# Comparing `tmp/vsrife-5.0.0-py3-none-any.whl.zip` & `tmp/vsrife-5.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,31 +1,32 @@
-Zip file size: 41434 bytes, number of entries: 50
+Zip file size: 43015 bytes, number of entries: 52
 -rw-r--r--  2.0 fat     4152 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_0.py
 -rw-r--r--  2.0 fat     4152 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_1.py
 -rw-r--r--  2.0 fat     4581 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_10.py
 -rw-r--r--  2.0 fat     4581 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_11.py
 -rw-r--r--  2.0 fat     4581 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_12.py
 -rw-r--r--  2.0 fat     4576 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_12_lite.py
 -rw-r--r--  2.0 fat     4915 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_13.py
 -rw-r--r--  2.0 fat     4576 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_13_lite.py
 -rw-r--r--  2.0 fat     4915 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_14.py
 -rw-r--r--  2.0 fat     4915 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_14_lite.py
 -rw-r--r--  2.0 fat     4915 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_15.py
 -rw-r--r--  2.0 fat     4910 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_15_lite.py
 -rw-r--r--  2.0 fat     4910 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_16_lite.py
+-rw-r--r--  2.0 fat     4915 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_17.py
 -rw-r--r--  2.0 fat     3570 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_2.py
 -rw-r--r--  2.0 fat     3570 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_3.py
 -rw-r--r--  2.0 fat     3570 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_4.py
 -rw-r--r--  2.0 fat     4043 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_5.py
 -rw-r--r--  2.0 fat     4043 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_6.py
 -rw-r--r--  2.0 fat     4381 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_7.py
 -rw-r--r--  2.0 fat     4381 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_8.py
 -rw-r--r--  2.0 fat     4381 b- defN 20-Feb-02 00:00 vsrife/IFNet_HDv3_v4_9.py
--rw-r--r--  2.0 fat    13432 b- defN 20-Feb-02 00:00 vsrife/__init__.py
--rw-r--r--  2.0 fat     1407 b- defN 20-Feb-02 00:00 vsrife/__main__.py
+-rw-r--r--  2.0 fat    13574 b- defN 20-Feb-02 00:00 vsrife/__init__.py
+-rw-r--r--  2.0 fat     1433 b- defN 20-Feb-02 00:00 vsrife/__main__.py
 -rw-r--r--  2.0 fat    17133 b- defN 20-Feb-02 00:00 vsrife/interpolate.py
 -rw-r--r--  2.0 fat     1033 b- defN 20-Feb-02 00:00 vsrife/warplayer.py
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.0.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.1.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.10.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.11.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.12.lite.pkl
@@ -33,20 +34,21 @@
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.13.lite.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.13.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.14.lite.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.14.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.15.lite.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.15.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.16.lite.pkl
+-rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.17.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.2.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.3.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.4.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.5.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.6.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.7.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.8.pkl
 -rw-r--r--  2.0 fat        0 b- defN 20-Feb-02 00:00 vsrife/models/flownet_v4.9.pkl
-?rw-r--r--  2.0 fat     1922 b- defN 20-Feb-02 00:00 vsrife-5.0.0.dist-info/METADATA
-?rw-r--r--  2.0 fat       87 b- defN 20-Feb-02 00:00 vsrife-5.0.0.dist-info/WHEEL
-?rw-r--r--  2.0 fat     1084 b- defN 20-Feb-02 00:00 vsrife-5.0.0.dist-info/licenses/LICENSE
-?rw-r--r--  2.0 fat     4163 b- defN 20-Feb-02 00:00 vsrife-5.0.0.dist-info/RECORD
-50 files, 132879 bytes uncompressed, 34752 bytes compressed:  73.8%
+?rw-r--r--  2.0 fat     1922 b- defN 20-Feb-02 00:00 vsrife-5.1.0.dist-info/METADATA
+?rw-r--r--  2.0 fat       87 b- defN 20-Feb-02 00:00 vsrife-5.1.0.dist-info/WHEEL
+?rw-r--r--  2.0 fat     1084 b- defN 20-Feb-02 00:00 vsrife-5.1.0.dist-info/licenses/LICENSE
+?rw-r--r--  2.0 fat     4331 b- defN 20-Feb-02 00:00 vsrife-5.1.0.dist-info/RECORD
+52 files, 138130 bytes uncompressed, 36067 bytes compressed:  73.9%
```

## zipnote {}

```diff
@@ -33,14 +33,17 @@
 
 Filename: vsrife/IFNet_HDv3_v4_15_lite.py
 Comment: 
 
 Filename: vsrife/IFNet_HDv3_v4_16_lite.py
 Comment: 
 
+Filename: vsrife/IFNet_HDv3_v4_17.py
+Comment: 
+
 Filename: vsrife/IFNet_HDv3_v4_2.py
 Comment: 
 
 Filename: vsrife/IFNet_HDv3_v4_3.py
 Comment: 
 
 Filename: vsrife/IFNet_HDv3_v4_4.py
@@ -108,14 +111,17 @@
 
 Filename: vsrife/models/flownet_v4.15.pkl
 Comment: 
 
 Filename: vsrife/models/flownet_v4.16.lite.pkl
 Comment: 
 
+Filename: vsrife/models/flownet_v4.17.pkl
+Comment: 
+
 Filename: vsrife/models/flownet_v4.2.pkl
 Comment: 
 
 Filename: vsrife/models/flownet_v4.3.pkl
 Comment: 
 
 Filename: vsrife/models/flownet_v4.4.pkl
@@ -132,20 +138,20 @@
 
 Filename: vsrife/models/flownet_v4.8.pkl
 Comment: 
 
 Filename: vsrife/models/flownet_v4.9.pkl
 Comment: 
 
-Filename: vsrife-5.0.0.dist-info/METADATA
+Filename: vsrife-5.1.0.dist-info/METADATA
 Comment: 
 
-Filename: vsrife-5.0.0.dist-info/WHEEL
+Filename: vsrife-5.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: vsrife-5.0.0.dist-info/licenses/LICENSE
+Filename: vsrife-5.1.0.dist-info/licenses/LICENSE
 Comment: 
 
-Filename: vsrife-5.0.0.dist-info/RECORD
+Filename: vsrife-5.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## vsrife/__init__.py

```diff
@@ -7,15 +7,15 @@
 from threading import Lock
 
 import numpy as np
 import torch
 import torch.nn.functional as F
 import vapoursynth as vs
 
-__version__ = "5.0.0"
+__version__ = "5.1.0"
 
 os.environ["CUDA_MODULE_LOADING"] = "LAZY"
 
 warnings.filterwarnings("ignore", "At pre-dispatch tracing")
 warnings.filterwarnings("ignore", "Attempted to insert a get_attr Node with no underlying reference")
 warnings.filterwarnings("ignore", "Node _run_on_acc_0_engine target _run_on_acc_0_engine _run_on_acc_0_engine of")
 warnings.filterwarnings("ignore", "The given NumPy array is not writable")
@@ -40,14 +40,15 @@
     "4.13",
     "4.13.lite",
     "4.14",
     "4.14.lite",
     "4.15",
     "4.15.lite",
     "4.16.lite",
+    "4.17",
 ]
 
 models_str = ""
 for model in models:
     models_str += "'" + model + "', "
 models_str = models_str[:-2]
 
@@ -195,33 +196,36 @@
             from .IFNet_HDv3_v4_14_lite import IFNet
         case "4.15":
             from .IFNet_HDv3_v4_15 import IFNet
         case "4.15.lite":
             from .IFNet_HDv3_v4_15_lite import IFNet
         case "4.16.lite":
             from .IFNet_HDv3_v4_16_lite import IFNet
+        case "4.17":
+            from .IFNet_HDv3_v4_17 import IFNet
 
     model_name = f"flownet_v{model}.pkl"
 
-    state_dict = torch.load(os.path.join(model_dir, model_name), map_location=device)
+    state_dict = torch.load(os.path.join(model_dir, model_name), map_location=device, mmap=True)
     state_dict = {k.replace("module.", ""): v for k, v in state_dict.items() if "module." in k}
 
-    flownet = IFNet(scale, ensemble)
-    flownet.load_state_dict(state_dict, strict=False)
+    with torch.device("meta"):
+        flownet = IFNet(scale, ensemble)
+    flownet.load_state_dict(state_dict, strict=False, assign=True)
     flownet.eval().to(device)
     if fp16:
         flownet.half()
 
     if fps_num is not None and fps_den is not None:
         factor = Fraction(fps_num, fps_den) / clip.fps
         factor_num, factor_den = factor.as_integer_ratio()
 
     w = clip.width
     h = clip.height
-    tmp = max(128, int(128 / scale))
+    tmp = max(32, int(32 / scale))
     pw = math.ceil(w / tmp) * tmp
     ph = math.ceil(h / tmp) * tmp
     padding = (0, pw - w, 0, ph - h)
 
     if sc_threshold is not None:
         clip = sc_detect(clip, sc_threshold)
 
@@ -230,15 +234,15 @@
         import torch_tensorrt
 
         trt_engine_path = os.path.join(
             os.path.realpath(trt_cache_dir),
             (
                 f"{model_name}"
                 + f"_{pw}x{ph}"
-                + f"_{"fp16" if fp16 else "fp32"}"
+                + f"_{'fp16' if fp16 else 'fp32'}"
                 + f"_scale-{scale}"
                 + f"_ensemble-{ensemble}"
                 + f"_{torch.cuda.get_device_name(device)}"
                 + f"_trt-{tensorrt.__version__}"
                 + (f"_workspace-{trt_workspace_size}" if trt_workspace_size > 0 else "")
                 + (f"_aux-{trt_max_aux_streams}" if trt_max_aux_streams is not None else "")
                 + (f"_level-{trt_optimization_level}" if trt_optimization_level is not None else "")
```

## vsrife/__main__.py

```diff
@@ -41,10 +41,11 @@
         "flownet_v4.13",
         "flownet_v4.13.lite",
         "flownet_v4.14",
         "flownet_v4.14.lite",
         "flownet_v4.15",
         "flownet_v4.15.lite",
         "flownet_v4.16.lite",
+        "flownet_v4.17",
     ]
     for model in models:
         download_model(url + model + ".pkl")
```

## Comparing `vsrife-5.0.0.dist-info/METADATA` & `vsrife-5.1.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.3
 Name: vsrife
-Version: 5.0.0
+Version: 5.1.0
 Summary: RIFE function for VapourSynth
 Project-URL: Homepage, https://github.com/HolyWu/vs-rife
 Project-URL: Issues, https://github.com/HolyWu/vs-rife/issues
 Author-email: HolyWu <holywu@gmail.com>
 License-File: LICENSE
 Keywords: PyTorch,RIFE,TensorRT,VapourSynth
 Classifier: Environment :: GPU :: NVIDIA CUDA
```

## Comparing `vsrife-5.0.0.dist-info/licenses/LICENSE` & `vsrife-5.1.0.dist-info/licenses/LICENSE`

 * *Files identical despite different names*

## Comparing `vsrife-5.0.0.dist-info/RECORD` & `vsrife-5.1.0.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -7,24 +7,25 @@
 vsrife/IFNet_HDv3_v4_13.py,sha256=zg9nBw-rOjINWDpTJ8_3nejqOH9nlDGXMy3AgAS3pRU,4915
 vsrife/IFNet_HDv3_v4_13_lite.py,sha256=3w0NaioUKkbMQclwRgo4X9qMIJt5PKm1Cbg6d6DSTRI,4576
 vsrife/IFNet_HDv3_v4_14.py,sha256=zg9nBw-rOjINWDpTJ8_3nejqOH9nlDGXMy3AgAS3pRU,4915
 vsrife/IFNet_HDv3_v4_14_lite.py,sha256=8qZds5ISMg-BJYBFHa7yER1TG4Bfkf-kBZL53oSrktQ,4915
 vsrife/IFNet_HDv3_v4_15.py,sha256=zg9nBw-rOjINWDpTJ8_3nejqOH9nlDGXMy3AgAS3pRU,4915
 vsrife/IFNet_HDv3_v4_15_lite.py,sha256=tt1uQGxKbvsei3rc7vYuxhCeJxG8CkkLbKAcKLxRVNI,4910
 vsrife/IFNet_HDv3_v4_16_lite.py,sha256=tt1uQGxKbvsei3rc7vYuxhCeJxG8CkkLbKAcKLxRVNI,4910
+vsrife/IFNet_HDv3_v4_17.py,sha256=zg9nBw-rOjINWDpTJ8_3nejqOH9nlDGXMy3AgAS3pRU,4915
 vsrife/IFNet_HDv3_v4_2.py,sha256=CBg09PkFH95VTtPjByAibuox83wLZx92LWvoL2iw6NQ,3570
 vsrife/IFNet_HDv3_v4_3.py,sha256=CBg09PkFH95VTtPjByAibuox83wLZx92LWvoL2iw6NQ,3570
 vsrife/IFNet_HDv3_v4_4.py,sha256=CBg09PkFH95VTtPjByAibuox83wLZx92LWvoL2iw6NQ,3570
 vsrife/IFNet_HDv3_v4_5.py,sha256=KqJwKz-I_hulLgYNp01QN4Ttco_YcjaHF6V346iW--E,4043
 vsrife/IFNet_HDv3_v4_6.py,sha256=G3q4MrAlmcPnTvmxdIY70clwO0WJgx4L7EUpeBY6AS0,4043
 vsrife/IFNet_HDv3_v4_7.py,sha256=dyS39ri5yjtf4JN34a_4-v7qNG4hgCP59oZUw_sVc2c,4381
 vsrife/IFNet_HDv3_v4_8.py,sha256=dyS39ri5yjtf4JN34a_4-v7qNG4hgCP59oZUw_sVc2c,4381
 vsrife/IFNet_HDv3_v4_9.py,sha256=dyS39ri5yjtf4JN34a_4-v7qNG4hgCP59oZUw_sVc2c,4381
-vsrife/__init__.py,sha256=qW3ujOEgMGKd3w4_N-im6td3Oy9sOywKNoM01uH0aX0,13432
-vsrife/__main__.py,sha256=RujFjUKsFrk-93v2nGSuirNyUpX1RZsk_sozPZDd4ZQ,1407
+vsrife/__init__.py,sha256=qluC-xdz2cMdP6acXEW-j_dF9Cobk7NVgbLBEZn2ydw,13574
+vsrife/__main__.py,sha256=7YYHX426HHXgcp_Hk_jF1FGeHEPgBNNYgf_F81QHi5o,1433
 vsrife/interpolate.py,sha256=iRNJfZ7SgdgEu-WHUpoWBcskM0Lv8SUmmVtkbK2z2Bs,17133
 vsrife/warplayer.py,sha256=6yNMlf7Vq_DOYzQNGnIzu3P_lXXjrgGe-vS7wPRUtq8,1033
 vsrife/models/flownet_v4.0.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.1.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.10.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.11.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.12.lite.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -32,19 +33,20 @@
 vsrife/models/flownet_v4.13.lite.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.13.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.14.lite.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.14.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.15.lite.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.15.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.16.lite.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+vsrife/models/flownet_v4.17.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.2.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.3.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.4.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.5.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.6.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.7.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.8.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 vsrife/models/flownet_v4.9.pkl,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-vsrife-5.0.0.dist-info/METADATA,sha256=b-YTS7v5qbIgq106g4BWcZ2otMEjQzIKmlqFs1z2kSc,1922
-vsrife-5.0.0.dist-info/WHEEL,sha256=zEMcRr9Kr03x1ozGwg5v9NQBKn3kndp6LSoSlVg-jhU,87
-vsrife-5.0.0.dist-info/licenses/LICENSE,sha256=TOnHjjjk72COaBl3aWUvIQWIiDASReAL7xEEGPSGN3E,1084
-vsrife-5.0.0.dist-info/RECORD,,
+vsrife-5.1.0.dist-info/METADATA,sha256=Y9KzvZYysyUfutjROrhTNid5VeGdVrobPZga1DzUbfM,1922
+vsrife-5.1.0.dist-info/WHEEL,sha256=zEMcRr9Kr03x1ozGwg5v9NQBKn3kndp6LSoSlVg-jhU,87
+vsrife-5.1.0.dist-info/licenses/LICENSE,sha256=TOnHjjjk72COaBl3aWUvIQWIiDASReAL7xEEGPSGN3E,1084
+vsrife-5.1.0.dist-info/RECORD,,
```


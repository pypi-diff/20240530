# Comparing `tmp/pydal-20240428.2.tar.gz` & `tmp/pydal-20240529.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "pydal-20240428.2.tar", last modified: Sun Apr 28 19:49:59 2024, max compression
+gzip compressed data, was "pydal-20240529.1.tar", last modified: Thu May 30 07:13:20 2024, max compression
```

## Comparing `pydal-20240428.2.tar` & `pydal-20240529.1.tar`

### file list

```diff
@@ -1,147 +1,149 @@
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.385179 pydal-20240428.2/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      344 2022-10-17 00:44:46.000000 pydal-20240428.2/AUTHORS
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6546 2022-10-17 00:44:46.000000 pydal-20240428.2/CHANGES
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1555 2022-10-17 00:44:46.000000 pydal-20240428.2/LICENSE.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      170 2022-11-11 06:37:56.000000 pydal-20240428.2/MANIFEST.in
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-04-28 19:49:59.385179 pydal-20240428.2/PKG-INFO
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2034 2022-10-17 00:44:46.000000 pydal-20240428.2/README.md
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.321847 pydal-20240428.2/docs/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6758 2022-10-17 00:44:46.000000 pydal-20240428.2/docs/Makefile
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8083 2023-05-07 23:00:04.000000 pydal-20240428.2/docs/conf.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      833 2022-10-17 00:44:46.000000 pydal-20240428.2/docs/index.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2834 2022-10-17 00:44:46.000000 pydal-20240428.2/docs/pydal.adapters.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      664 2022-10-17 00:44:46.000000 pydal-20240428.2/docs/pydal.helpers.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       29 2022-10-17 00:44:46.000000 pydal-20240428.2/docs/requirements.txt
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.328514 pydal-20240428.2/pydal/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      179 2024-04-28 19:48:51.000000 pydal-20240428.2/pydal/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5440 2023-11-15 07:07:33.000000 pydal-20240428.2/pydal/_compat.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      466 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/_gae.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      208 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/_globals.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      396 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/_load.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.341847 pydal-20240428.2/pydal/adapters/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2372 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38911 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/adapters/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5691 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2000 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3145 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/firebird.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    18365 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2076 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1882 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/ingres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    37772 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6161 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3412 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9172 2023-11-12 03:29:21.000000 pydal-20240428.2/pydal/adapters/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9327 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/postgres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1460 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/sap.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4894 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/snowflake.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4392 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      799 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/adapters/teradata.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38529 2023-12-28 08:14:12.000000 pydal-20240428.2/pydal/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6427 2023-05-07 22:57:59.000000 pydal-20240428.2/pydal/connection.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.345180 pydal-20240428.2/pydal/contrib/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/contrib/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    44546 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/contrib/imap_adapter.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    79360 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/contrib/ipaddress.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10686 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/contrib/mockimaplib.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4071 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/contrib/ordereddict.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5584 2023-05-07 22:58:06.000000 pydal-20240428.2/pydal/contrib/portalocker.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    33372 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/contrib/reserved_sql_keywords.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3532 2023-05-07 22:58:07.000000 pydal-20240428.2/pydal/default_validators.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.355180 pydal-20240428.2/pydal/dialects/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3803 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    23464 2023-05-07 22:58:13.000000 pydal-20240428.2/pydal/dialects/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1390 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3374 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4307 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/firebird.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5953 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3275 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3929 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/ingres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22110 2023-05-07 22:58:11.000000 pydal-20240428.2/pydal/dialects/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    15763 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/dialects/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3413 2023-05-07 22:51:50.000000 pydal-20240428.2/pydal/dialects/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8928 2023-05-07 22:58:13.000000 pydal-20240428.2/pydal/dialects/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14406 2023-11-12 03:31:51.000000 pydal-20240428.2/pydal/dialects/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3001 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/sap.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12077 2023-05-07 22:58:18.000000 pydal-20240428.2/pydal/dialects/snowflake.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4295 2023-05-07 22:52:12.000000 pydal-20240428.2/pydal/dialects/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3400 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/dialects/teradata.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3180 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/drivers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      347 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/exceptions.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.361846 pydal-20240428.2/pydal/helpers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      652 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/_internals.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16544 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/helpers/classes.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      971 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/gae.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14816 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/helpers/methods.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1144 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/regex.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16447 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/rest.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1839 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/helpers/serializers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    27287 2023-05-07 22:58:25.000000 pydal-20240428.2/pydal/migrator.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   129744 2024-04-28 19:48:27.000000 pydal-20240428.2/pydal/objects.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.365180 pydal-20240428.2/pydal/parsers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3394 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4718 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      360 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1605 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      815 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/parsers/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1043 2023-11-15 07:07:34.000000 pydal-20240428.2/pydal/parsers/sqlite.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.368513 pydal-20240428.2/pydal/representers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8806 2023-11-15 07:07:35.000000 pydal-20240428.2/pydal/representers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8793 2023-11-15 07:07:35.000000 pydal-20240428.2/pydal/representers/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1210 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      680 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1446 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      884 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1757 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      948 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      214 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1286 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1643 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      752 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/representers/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22855 2023-11-15 07:07:35.000000 pydal-20240428.2/pydal/restapi.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.368513 pydal-20240428.2/pydal/tools/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/tools/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2120 2023-11-15 06:54:34.000000 pydal-20240428.2/pydal/tools/tags.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1904 2022-10-17 00:44:46.000000 pydal-20240428.2/pydal/utils.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   158790 2023-11-19 17:50:44.000000 pydal-20240428.2/pydal/validators.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.331847 pydal-20240428.2/pydal.egg-info/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-04-28 19:49:59.000000 pydal-20240428.2/pydal.egg-info/PKG-INFO
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3314 2024-04-28 19:49:59.000000 pydal-20240428.2/pydal.egg-info/SOURCES.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2024-04-28 19:49:59.000000 pydal-20240428.2/pydal.egg-info/dependency_links.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        6 2024-04-28 19:49:59.000000 pydal-20240428.2/pydal.egg-info/top_level.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      905 2024-04-28 19:48:34.000000 pydal-20240428.2/pyproject.toml
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       99 2024-04-28 19:49:59.385179 pydal-20240428.2/setup.cfg
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.378512 pydal-20240428.2/tests/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      355 2023-05-07 23:00:04.000000 pydal-20240428.2/tests/__init__.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-04-28 19:49:59.385179 pydal-20240428.2/tests/__pycache__/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      625 2024-04-27 07:03:00.000000 pydal-20240428.2/tests/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1648 2023-12-28 08:14:31.000000 pydal-20240428.2/tests/__pycache__/_adapt.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      299 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/_compat.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1997 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/_helpers.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    17046 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/base.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6517 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/caching.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12212 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/contribs.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5665 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/indexes.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38716 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/is_url_validators.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10845 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/restapi.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     7654 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/smart_query.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   283900 2023-12-28 08:14:31.000000 pydal-20240428.2/tests/__pycache__/sql.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2554 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/tags.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     7017 2024-04-27 08:22:34.000000 pydal-20240428.2/tests/__pycache__/validation.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   100862 2023-12-28 08:14:32.000000 pydal-20240428.2/tests/__pycache__/validators.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      954 2022-10-17 00:44:46.000000 pydal-20240428.2/tests/_adapt.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       95 2022-10-17 00:44:46.000000 pydal-20240428.2/tests/_compat.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      765 2023-05-07 23:00:04.000000 pydal-20240428.2/tests/_helpers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8103 2023-11-15 07:07:11.000000 pydal-20240428.2/tests/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2554 2023-05-07 23:00:03.000000 pydal-20240428.2/tests/caching.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4954 2023-11-15 07:07:11.000000 pydal-20240428.2/tests/contribs.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2279 2023-05-07 23:00:03.000000 pydal-20240428.2/tests/indexes.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    29359 2023-11-15 07:07:11.000000 pydal-20240428.2/tests/is_url_validators.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    99826 2023-11-15 07:07:14.000000 pydal-20240428.2/tests/nosql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14072 2023-11-15 07:07:11.000000 pydal-20240428.2/tests/restapi.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12552 2023-05-07 23:00:04.000000 pydal-20240428.2/tests/smart_query.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   137750 2023-11-15 07:07:15.000000 pydal-20240428.2/tests/sql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      990 2023-05-07 23:00:04.000000 pydal-20240428.2/tests/tags.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3786 2024-04-27 08:22:32.000000 pydal-20240428.2/tests/validation.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    66909 2023-11-15 07:07:13.000000 pydal-20240428.2/tests/validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.661271 pydal-20240529.1/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      344 2022-10-17 00:44:46.000000 pydal-20240529.1/AUTHORS
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6546 2022-10-17 00:44:46.000000 pydal-20240529.1/CHANGES
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1555 2022-10-17 00:44:46.000000 pydal-20240529.1/LICENSE.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      170 2022-11-11 06:37:56.000000 pydal-20240529.1/MANIFEST.in
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-05-30 07:13:20.661271 pydal-20240529.1/PKG-INFO
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2034 2022-10-17 00:44:46.000000 pydal-20240529.1/README.md
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.607936 pydal-20240529.1/docs/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6758 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/Makefile
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8083 2023-05-07 23:00:04.000000 pydal-20240529.1/docs/conf.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      833 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/index.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2834 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/pydal.adapters.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      664 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/pydal.helpers.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       29 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/requirements.txt
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.614603 pydal-20240529.1/pydal/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      179 2024-05-30 07:11:38.000000 pydal-20240529.1/pydal/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5440 2023-11-15 07:07:33.000000 pydal-20240529.1/pydal/_compat.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      466 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_gae.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      208 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_globals.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      396 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_load.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.624603 pydal-20240529.1/pydal/adapters/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2372 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38911 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/adapters/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5691 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2000 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3145 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/firebird.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    18365 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2076 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1882 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/ingres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    37772 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6161 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3412 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9172 2023-11-12 03:29:21.000000 pydal-20240529.1/pydal/adapters/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9327 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/postgres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1460 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/sap.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4894 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/snowflake.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4392 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      799 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/teradata.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38529 2023-12-28 08:14:12.000000 pydal-20240529.1/pydal/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6427 2023-05-07 22:57:59.000000 pydal-20240529.1/pydal/connection.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.627937 pydal-20240529.1/pydal/contrib/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    44546 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/contrib/imap_adapter.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    79360 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/contrib/ipaddress.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10686 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/mockimaplib.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4071 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/ordereddict.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5584 2023-05-07 22:58:06.000000 pydal-20240529.1/pydal/contrib/portalocker.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    33372 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/reserved_sql_keywords.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3532 2023-05-07 22:58:07.000000 pydal-20240529.1/pydal/default_validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.634604 pydal-20240529.1/pydal/dialects/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3803 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    23464 2023-05-07 22:58:13.000000 pydal-20240529.1/pydal/dialects/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1390 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3374 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4307 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/firebird.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5953 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3275 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3929 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/ingres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22110 2023-05-07 22:58:11.000000 pydal-20240529.1/pydal/dialects/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    15763 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/dialects/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3413 2023-05-07 22:51:50.000000 pydal-20240529.1/pydal/dialects/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8928 2023-05-07 22:58:13.000000 pydal-20240529.1/pydal/dialects/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14406 2023-11-12 03:31:51.000000 pydal-20240529.1/pydal/dialects/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3001 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/sap.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12077 2023-05-07 22:58:18.000000 pydal-20240529.1/pydal/dialects/snowflake.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4295 2023-05-07 22:52:12.000000 pydal-20240529.1/pydal/dialects/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3400 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/teradata.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3180 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/drivers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      347 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/exceptions.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.637937 pydal-20240529.1/pydal/helpers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      652 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/_internals.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16544 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/helpers/classes.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      971 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/gae.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14816 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/helpers/methods.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1144 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/regex.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16447 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/rest.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1839 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/serializers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    27287 2023-05-07 22:58:25.000000 pydal-20240529.1/pydal/migrator.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   130609 2024-05-30 06:35:31.000000 pydal-20240529.1/pydal/objects.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.641270 pydal-20240529.1/pydal/parsers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3394 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4718 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      360 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1605 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      815 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1043 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/parsers/sqlite.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.644604 pydal-20240529.1/pydal/representers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8806 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/representers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8793 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/representers/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1210 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      680 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1446 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      884 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1757 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      948 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      214 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1286 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1643 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      752 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22855 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/restapi.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.644604 pydal-20240529.1/pydal/tools/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/tools/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2120 2023-11-15 06:54:34.000000 pydal-20240529.1/pydal/tools/tags.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1904 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/utils.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   159354 2024-05-30 07:10:48.000000 pydal-20240529.1/pydal/validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.617937 pydal-20240529.1/pydal.egg-info/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/PKG-INFO
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3430 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/SOURCES.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/dependency_links.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        6 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/top_level.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      905 2024-05-30 07:11:56.000000 pydal-20240529.1/pyproject.toml
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       99 2024-05-30 07:13:20.661271 pydal-20240529.1/setup.cfg
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.651271 pydal-20240529.1/tests/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      355 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/__init__.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.657938 pydal-20240529.1/tests/__pycache__/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      631 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/__init__.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_adapt.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      305 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_compat.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2003 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_helpers.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    17052 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/base.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6523 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/caching.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12218 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/contribs.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5671 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/indexes.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38722 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/is_url_validators.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10851 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/restapi.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     7660 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/smart_query.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   283906 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/sql.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2560 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/tags.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9720 2024-05-30 06:37:38.000000 pydal-20240529.1/tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9585 2024-05-30 06:52:14.000000 pydal-20240529.1/tests/__pycache__/validation.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   107134 2024-05-30 07:02:29.000000 pydal-20240529.1/tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   102242 2024-05-30 07:12:10.000000 pydal-20240529.1/tests/__pycache__/validators.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      954 2022-10-17 00:44:46.000000 pydal-20240529.1/tests/_adapt.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       95 2022-10-17 00:44:46.000000 pydal-20240529.1/tests/_compat.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      765 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/_helpers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8103 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2554 2023-05-07 23:00:03.000000 pydal-20240529.1/tests/caching.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4954 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/contribs.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2279 2023-05-07 23:00:03.000000 pydal-20240529.1/tests/indexes.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    29359 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/is_url_validators.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    99826 2023-11-15 07:07:14.000000 pydal-20240529.1/tests/nosql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14072 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/restapi.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12552 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/smart_query.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   137750 2023-11-15 07:07:15.000000 pydal-20240529.1/tests/sql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      990 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/tags.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5270 2024-05-30 06:37:37.000000 pydal-20240529.1/tests/validation.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    67571 2024-05-30 07:02:13.000000 pydal-20240529.1/tests/validators.py
```

### Comparing `pydal-20240428.2/CHANGES` & `pydal-20240529.1/CHANGES`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/LICENSE.txt` & `pydal-20240529.1/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/PKG-INFO` & `pydal-20240529.1/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pydal
-Version: 20240428.2
+Version: 20240529.1
 Summary: pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")
 Author-email: Massimo Di Pierro <massimo.dipierro@gmail.com>
 Project-URL: Homepage, https://github.com/web2py/pydal
 Project-URL: Bug Tracker, https://github.com/web2py/pydal/issues
 Project-URL: Documentation, https://py4web.com/_documentation/static/en/chapter-07.html
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: BSD License
```

### Comparing `pydal-20240428.2/README.md` & `pydal-20240529.1/README.md`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/docs/Makefile` & `pydal-20240529.1/docs/Makefile`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/docs/conf.py` & `pydal-20240529.1/docs/conf.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/docs/index.rst` & `pydal-20240529.1/docs/index.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/docs/pydal.adapters.rst` & `pydal-20240529.1/docs/pydal.adapters.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/docs/pydal.helpers.rst` & `pydal-20240529.1/docs/pydal.helpers.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/_compat.py` & `pydal-20240529.1/pydal/_compat.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/__init__.py` & `pydal-20240529.1/pydal/adapters/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/base.py` & `pydal-20240529.1/pydal/adapters/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/couchdb.py` & `pydal-20240529.1/pydal/adapters/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/db2.py` & `pydal-20240529.1/pydal/adapters/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/firebird.py` & `pydal-20240529.1/pydal/adapters/firebird.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/google.py` & `pydal-20240529.1/pydal/adapters/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/informix.py` & `pydal-20240529.1/pydal/adapters/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/ingres.py` & `pydal-20240529.1/pydal/adapters/ingres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/mongo.py` & `pydal-20240529.1/pydal/adapters/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/mssql.py` & `pydal-20240529.1/pydal/adapters/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/mysql.py` & `pydal-20240529.1/pydal/adapters/mysql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/oracle.py` & `pydal-20240529.1/pydal/adapters/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/postgres.py` & `pydal-20240529.1/pydal/adapters/postgres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/sap.py` & `pydal-20240529.1/pydal/adapters/sap.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/snowflake.py` & `pydal-20240529.1/pydal/adapters/snowflake.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/sqlite.py` & `pydal-20240529.1/pydal/adapters/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/adapters/teradata.py` & `pydal-20240529.1/pydal/adapters/teradata.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/base.py` & `pydal-20240529.1/pydal/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/connection.py` & `pydal-20240529.1/pydal/connection.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/imap_adapter.py` & `pydal-20240529.1/pydal/contrib/imap_adapter.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/ipaddress.py` & `pydal-20240529.1/pydal/contrib/ipaddress.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/mockimaplib.py` & `pydal-20240529.1/pydal/contrib/mockimaplib.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/ordereddict.py` & `pydal-20240529.1/pydal/contrib/ordereddict.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/portalocker.py` & `pydal-20240529.1/pydal/contrib/portalocker.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/contrib/reserved_sql_keywords.py` & `pydal-20240529.1/pydal/contrib/reserved_sql_keywords.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/default_validators.py` & `pydal-20240529.1/pydal/default_validators.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/__init__.py` & `pydal-20240529.1/pydal/dialects/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/base.py` & `pydal-20240529.1/pydal/dialects/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/couchdb.py` & `pydal-20240529.1/pydal/dialects/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/db2.py` & `pydal-20240529.1/pydal/dialects/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/firebird.py` & `pydal-20240529.1/pydal/dialects/firebird.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/google.py` & `pydal-20240529.1/pydal/dialects/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/informix.py` & `pydal-20240529.1/pydal/dialects/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/ingres.py` & `pydal-20240529.1/pydal/dialects/ingres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/mongo.py` & `pydal-20240529.1/pydal/dialects/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/mssql.py` & `pydal-20240529.1/pydal/dialects/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/mysql.py` & `pydal-20240529.1/pydal/dialects/mysql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/oracle.py` & `pydal-20240529.1/pydal/dialects/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/postgre.py` & `pydal-20240529.1/pydal/dialects/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/sap.py` & `pydal-20240529.1/pydal/dialects/sap.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/snowflake.py` & `pydal-20240529.1/pydal/dialects/snowflake.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/sqlite.py` & `pydal-20240529.1/pydal/dialects/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/dialects/teradata.py` & `pydal-20240529.1/pydal/dialects/teradata.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/drivers.py` & `pydal-20240529.1/pydal/drivers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/_internals.py` & `pydal-20240529.1/pydal/helpers/_internals.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/classes.py` & `pydal-20240529.1/pydal/helpers/classes.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/gae.py` & `pydal-20240529.1/pydal/helpers/gae.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/methods.py` & `pydal-20240529.1/pydal/helpers/methods.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/regex.py` & `pydal-20240529.1/pydal/helpers/regex.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/rest.py` & `pydal-20240529.1/pydal/helpers/rest.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/helpers/serializers.py` & `pydal-20240529.1/pydal/helpers/serializers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/migrator.py` & `pydal-20240529.1/pydal/migrator.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/objects.py` & `pydal-20240529.1/pydal/objects.py`

 * *Files 1% similar despite different names*

```diff
@@ -4,14 +4,15 @@
 import base64
 import binascii
 import cgi
 import copy
 import csv
 import datetime
 import decimal
+import io
 import os
 import re
 import shutil
 import sys
 import types
 from collections import OrderedDict
 from io import TextIOWrapper
@@ -897,40 +898,52 @@
         ret = self._db._adapter.insert(self, row.op_values())
         if ret and self._after_insert:
             for f in self._after_insert:
                 f(row, ret)
         return ret
 
     def _validate_fields(self, fields, record=None):
+        # do not change the input
+        fields = copy.copy(fields)
         from .validators import CRYPT
+
         # if a field it not writable or is an id or does not exist or
         # it is a computed field, than it is invalid
         valid_names = {
-            f.name for f in self if
-            f.writable and
-            f.type != "id" and
-            not f.compute
+            f.name for f in self if f.writable and f.type != "id" and not f.compute
         }
         errors = {}
         new_fields = {}
         for name in fields:
             if name not in valid_names:
                 errors[name] = "invalid"
+        # temp files
+        temp_files = []
         # loop over all expected fields
         for field in self:
             # the field already resulted in an error, skip it
             if field.name in errors:
                 continue
             # if field is required but missing error
             if record is None and field.required and not field.name in fields:
                 errors[field.name] = "required"
                 continue
             # if we tried to submit **** as a password, ignore it (perhaps should be error)
             if field.type == "password" and fields.get(field.name) == CRYPT.STARS:
                 continue
+            # if the field is of type upload but this is JSON content
+            if field.type == "upload" and isinstance(fields.get(field.name), dict):
+                filename = fields[field.name].get("filename")
+                content = fields[field.name].get("content")
+                if filename and content:
+                    file = io.BytesIO(base64.b64decode(content))
+                value = field.store(file, filename, field.uploadfolder)
+                fields[field.name] = value
+                if field.uploadfolder:
+                    temp_files.append(os.path.join(field.uploadfolder, value))
             # if the field has a value use it
             if field.name in fields:
                 id = record and record.id
                 value, error = field.validate(fields[field.name], record_id=id)
             # this is an insert and no  value use the default value
             elif not record and field.default:
                 value, error = field.default, None
@@ -944,15 +957,21 @@
                 errors[field.name] = "%s" % error
             # if no error and password
             else:
                 # value can be a function if coming from default of update
                 if callable(value):
                     value = value()
                 # only write if the field was passed and no error
-                new_fields[field.name] = value        
+                new_fields[field.name] = value
+        if errors:
+            for path in temp_files:
+                try:
+                    os.unlink(path)
+                except OSError:
+                    pass
         return errors, new_fields
 
     def validate_and_insert(self, **fields):
         errors, new_fields = self._validate_fields(fields)
         record_id = self.insert(**new_fields) if not errors else None
         return {"id": record_id, "errors": errors}
```

### Comparing `pydal-20240428.2/pydal/parsers/__init__.py` & `pydal-20240529.1/pydal/parsers/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/parsers/base.py` & `pydal-20240529.1/pydal/parsers/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/parsers/mongo.py` & `pydal-20240529.1/pydal/parsers/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/parsers/oracle.py` & `pydal-20240529.1/pydal/parsers/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/parsers/postgre.py` & `pydal-20240529.1/pydal/parsers/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/parsers/sqlite.py` & `pydal-20240529.1/pydal/parsers/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/__init__.py` & `pydal-20240529.1/pydal/representers/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/base.py` & `pydal-20240529.1/pydal/representers/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/couchdb.py` & `pydal-20240529.1/pydal/representers/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/db2.py` & `pydal-20240529.1/pydal/representers/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/google.py` & `pydal-20240529.1/pydal/representers/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/informix.py` & `pydal-20240529.1/pydal/representers/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/mongo.py` & `pydal-20240529.1/pydal/representers/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/mssql.py` & `pydal-20240529.1/pydal/representers/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/oracle.py` & `pydal-20240529.1/pydal/representers/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/postgre.py` & `pydal-20240529.1/pydal/representers/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/representers/sqlite.py` & `pydal-20240529.1/pydal/representers/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/restapi.py` & `pydal-20240529.1/pydal/restapi.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/tools/tags.py` & `pydal-20240529.1/pydal/tools/tags.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/utils.py` & `pydal-20240529.1/pydal/utils.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/pydal/validators.py` & `pydal-20240529.1/pydal/validators.py`

 * *Files 1% similar despite different names*

```diff
@@ -1011,8915 +1011,8950 @@
 00003f20: 2068 6173 6174 7472 2864 6273 6574 2c20   hasattr(dbset, 
 00003f30: 2264 6566 696e 655f 7461 626c 6522 293a  "define_table"):
 00003f40: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
 00003f50: 662e 6462 7365 7420 3d20 6462 7365 7428  f.dbset = dbset(
 00003f60: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
 00003f70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
 00003f80: 2e64 6273 6574 203d 2064 6273 6574 0a0a  .dbset = dbset..
-00003f90: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00003fa0: 7461 6e63 6528 6669 656c 642c 2054 6162  tance(field, Tab
-00003fb0: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-00003fc0: 2066 6965 6c64 203d 2066 6965 6c64 2e5f   field = field._
-00003fd0: 6964 0a20 2020 2020 2020 2065 6c69 6620  id.        elif 
-00003fe0: 6973 696e 7374 616e 6365 2866 6965 6c64  isinstance(field
-00003ff0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-00004000: 2020 2020 6974 656d 7320 3d20 6669 656c      items = fiel
-00004010: 642e 7370 6c69 7428 222e 2229 0a20 2020  d.split(".").   
-00004020: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00004030: 6974 656d 7329 203d 3d20 313a 0a20 2020  items) == 1:.   
-00004040: 2020 2020 2020 2020 2020 2020 2066 6965               fie
-00004050: 6c64 203d 2069 7465 6d73 5b30 5d20 2b20  ld = items[0] + 
-00004060: 222e 6964 220a 0a20 2020 2020 2020 2028  ".id"..        (
-00004070: 6b74 6162 6c65 2c20 6b66 6965 6c64 2920  ktable, kfield) 
-00004080: 3d20 7374 7228 6669 656c 6429 2e73 706c  = str(field).spl
-00004090: 6974 2822 2e22 290a 2020 2020 2020 2020  it(".").        
-000040a0: 6966 206e 6f74 206c 6162 656c 3a0a 2020  if not label:.  
-000040b0: 2020 2020 2020 2020 2020 6c61 6265 6c20            label 
-000040c0: 3d20 2225 2528 2573 2973 2220 2520 6b66  = "%%(%s)s" % kf
-000040d0: 6965 6c64 0a20 2020 2020 2020 2069 6620  ield.        if 
-000040e0: 6973 696e 7374 616e 6365 286c 6162 656c  isinstance(label
-000040f0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-00004100: 2020 2020 6d20 3d20 7265 2e6d 6174 6368      m = re.match
-00004110: 2873 656c 662e 5245 4745 585f 5441 424c  (self.REGEX_TABL
-00004120: 455f 444f 545f 4649 454c 442c 206c 6162  E_DOT_FIELD, lab
-00004130: 656c 290a 2020 2020 2020 2020 2020 2020  el).            
-00004140: 6966 206d 3a0a 2020 2020 2020 2020 2020  if m:.          
-00004150: 2020 2020 2020 6c61 6265 6c20 3d20 2225        label = "%
-00004160: 2528 2573 2973 2220 2520 6d2e 6772 6f75  %(%s)s" % m.grou
-00004170: 7028 3229 0a20 2020 2020 2020 2020 2020  p(2).           
-00004180: 2066 6965 6c64 6e61 6d65 7320 3d20 7265   fieldnames = re
-00004190: 2e66 696e 6461 6c6c 2873 656c 662e 5245  .findall(self.RE
-000041a0: 4745 585f 494e 5445 5250 5f43 4f4e 565f  GEX_INTERP_CONV_
-000041b0: 5350 4543 4946 4945 522c 206c 6162 656c  SPECIFIER, label
-000041c0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000041d0: 206b 6669 656c 6420 6e6f 7420 696e 2066   kfield not in f
-000041e0: 6965 6c64 6e61 6d65 733a 0a20 2020 2020  ieldnames:.     
-000041f0: 2020 2020 2020 2020 2020 2066 6965 6c64             field
-00004200: 6e61 6d65 732e 6170 7065 6e64 286b 6669  names.append(kfi
-00004210: 656c 6429 2020 2320 6b66 6965 6c64 206d  eld)  # kfield m
-00004220: 7573 7420 6265 206c 6173 740a 2020 2020  ust be last.    
-00004230: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00004240: 6e63 6528 6c61 6265 6c2c 2046 6965 6c64  nce(label, Field
-00004250: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
-00004260: 6965 6c64 6e61 6d65 7320 3d20 5b6c 6162  ieldnames = [lab
-00004270: 656c 2e6e 616d 652c 206b 6669 656c 645d  el.name, kfield]
-00004280: 2020 2320 6b66 6965 6c64 206d 7573 7420    # kfield must 
-00004290: 6265 206c 6173 740a 2020 2020 2020 2020  be last.        
-000042a0: 2020 2020 6c61 6265 6c20 3d20 2225 2528      label = "%%(
-000042b0: 2573 2973 2220 2520 6c61 6265 6c2e 6e61  %s)s" % label.na
-000042c0: 6d65 0a20 2020 2020 2020 2065 6c69 6620  me.        elif 
-000042d0: 6361 6c6c 6162 6c65 286c 6162 656c 293a  callable(label):
-000042e0: 0a20 2020 2020 2020 2020 2020 2066 6965  .            fie
-000042f0: 6c64 6e61 6d65 7320 3d20 222a 220a 2020  ldnames = "*".  
-00004300: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004310: 2020 2020 2020 2020 7261 6973 6520 4e6f          raise No
-00004320: 7449 6d70 6c65 6d65 6e74 6564 4572 726f  tImplementedErro
-00004330: 720a 0a20 2020 2020 2020 2073 656c 662e  r..        self.
-00004340: 6669 656c 646e 616d 6573 203d 2066 6965  fieldnames = fie
-00004350: 6c64 6e61 6d65 7320 2023 2066 6965 6c64  ldnames  # field
-00004360: 7320 7265 7175 6972 6573 2074 6f20 6275  s requires to bu
-00004370: 696c 6420 7468 6520 666f 726d 6174 7469  ild the formatti
-00004380: 6e67 0a20 2020 2020 2020 2073 656c 662e  ng.        self.
-00004390: 6c61 6265 6c20 3d20 6c61 6265 6c0a 2020  label = label.  
-000043a0: 2020 2020 2020 7365 6c66 2e6b 7461 626c        self.ktabl
-000043b0: 6520 3d20 6b74 6162 6c65 0a20 2020 2020  e = ktable.     
-000043c0: 2020 2073 656c 662e 6b66 6965 6c64 203d     self.kfield =
-000043d0: 206b 6669 656c 640a 2020 2020 2020 2020   kfield.        
-000043e0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-000043f0: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
-00004400: 6765 0a20 2020 2020 2020 2073 656c 662e  ge.        self.
-00004410: 7468 6573 6574 203d 204e 6f6e 650a 2020  theset = None.  
-00004420: 2020 2020 2020 7365 6c66 2e6f 7264 6572        self.order
-00004430: 6279 203d 206f 7264 6572 6279 0a20 2020  by = orderby.   
-00004440: 2020 2020 2073 656c 662e 6772 6f75 7062       self.groupb
-00004450: 7920 3d20 6772 6f75 7062 790a 2020 2020  y = groupby.    
-00004460: 2020 2020 7365 6c66 2e64 6973 7469 6e63      self.distinc
-00004470: 7420 3d20 6469 7374 696e 6374 0a20 2020  t = distinct.   
-00004480: 2020 2020 2073 656c 662e 6361 6368 6520       self.cache 
-00004490: 3d20 6361 6368 650a 2020 2020 2020 2020  = cache.        
-000044a0: 7365 6c66 2e6d 756c 7469 706c 6520 3d20  self.multiple = 
-000044b0: 6d75 6c74 6970 6c65 0a20 2020 2020 2020  multiple.       
-000044c0: 2073 656c 662e 7a65 726f 203d 207a 6572   self.zero = zer
-000044d0: 6f0a 2020 2020 2020 2020 7365 6c66 2e73  o.        self.s
-000044e0: 6f72 7420 3d20 736f 7274 0a20 2020 2020  ort = sort.     
-000044f0: 2020 2073 656c 662e 5f61 6e64 203d 205f     self._and = _
-00004500: 616e 640a 2020 2020 2020 2020 7365 6c66  and.        self
-00004510: 2e6c 6566 7420 3d20 6c65 6674 0a20 2020  .left = left.   
-00004520: 2020 2020 2073 656c 662e 6465 6c69 6d69       self.delimi
-00004530: 7465 7220 3d20 6465 6c69 6d69 7465 720a  ter = delimiter.
-00004540: 2020 2020 2020 2020 7365 6c66 2e61 7574          self.aut
-00004550: 6f5f 6164 6420 3d20 6175 746f 5f61 6464  o_add = auto_add
-00004560: 0a0a 2020 2020 6465 6620 7365 745f 7365  ..    def set_se
-00004570: 6c66 5f69 6428 7365 6c66 2c20 6964 293a  lf_id(self, id):
-00004580: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00004590: 2e5f 616e 643a 0a20 2020 2020 2020 2020  ._and:.         
-000045a0: 2020 2073 656c 662e 5f61 6e64 2e72 6563     self._and.rec
-000045b0: 6f72 645f 6964 203d 2069 640a 0a20 2020  ord_id = id..   
-000045c0: 2064 6566 2062 7569 6c64 5f73 6574 2873   def build_set(s
-000045d0: 656c 6629 3a0a 2020 2020 2020 2020 7461  elf):.        ta
-000045e0: 626c 6520 3d20 7365 6c66 2e64 6273 6574  ble = self.dbset
-000045f0: 2e64 625b 7365 6c66 2e6b 7461 626c 655d  .db[self.ktable]
-00004600: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00004610: 2e66 6965 6c64 6e61 6d65 7320 3d3d 2022  .fieldnames == "
-00004620: 2a22 3a0a 2020 2020 2020 2020 2020 2020  *":.            
-00004630: 6669 656c 6473 203d 205b 6620 666f 7220  fields = [f for 
-00004640: 6620 696e 2074 6162 6c65 5d0a 2020 2020  f in table].    
-00004650: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00004660: 2020 2020 2020 6669 656c 6473 203d 205b        fields = [
-00004670: 7461 626c 655b 6b5d 2066 6f72 206b 2069  table[k] for k i
-00004680: 6e20 7365 6c66 2e66 6965 6c64 6e61 6d65  n self.fieldname
-00004690: 735d 0a20 2020 2020 2020 2069 676e 6f72  s].        ignor
-000046a0: 6520 3d20 2846 6965 6c64 5669 7274 7561  e = (FieldVirtua
-000046b0: 6c2c 2046 6965 6c64 4d65 7468 6f64 290a  l, FieldMethod).
-000046c0: 2020 2020 2020 2020 6669 656c 6473 203d          fields =
-000046d0: 205b 6620 666f 7220 6620 696e 2066 6965   [f for f in fie
-000046e0: 6c64 7320 6966 206e 6f74 2069 7369 6e73  lds if not isins
-000046f0: 7461 6e63 6528 662c 2069 676e 6f72 6529  tance(f, ignore)
-00004700: 5d0a 2020 2020 2020 2020 6966 2073 656c  ].        if sel
-00004710: 662e 6462 7365 742e 6462 2e5f 6462 6e61  f.dbset.db._dbna
-00004720: 6d65 2021 3d20 2267 6165 223a 0a20 2020  me != "gae":.   
-00004730: 2020 2020 2020 2020 206f 7264 6572 6279           orderby
-00004740: 203d 2073 656c 662e 6f72 6465 7262 7920   = self.orderby 
-00004750: 6f72 2072 6564 7563 6528 6c61 6d62 6461  or reduce(lambda
-00004760: 2061 2c20 623a 2061 207c 2062 2c20 6669   a, b: a | b, fi
-00004770: 656c 6473 290a 2020 2020 2020 2020 2020  elds).          
-00004780: 2020 6772 6f75 7062 7920 3d20 7365 6c66    groupby = self
-00004790: 2e67 726f 7570 6279 0a20 2020 2020 2020  .groupby.       
-000047a0: 2020 2020 2064 6973 7469 6e63 7420 3d20       distinct = 
-000047b0: 7365 6c66 2e64 6973 7469 6e63 740a 2020  self.distinct.  
-000047c0: 2020 2020 2020 2020 2020 6c65 6674 203d            left =
-000047d0: 2073 656c 662e 6c65 6674 0a20 2020 2020   self.left.     
-000047e0: 2020 2020 2020 2064 6420 3d20 6469 6374         dd = dict
-000047f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00004800: 2020 6f72 6465 7262 793d 6f72 6465 7262    orderby=orderb
-00004810: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
-00004820: 2020 2067 726f 7570 6279 3d67 726f 7570     groupby=group
-00004830: 6279 2c0a 2020 2020 2020 2020 2020 2020  by,.            
-00004840: 2020 2020 6469 7374 696e 6374 3d64 6973      distinct=dis
-00004850: 7469 6e63 742c 0a20 2020 2020 2020 2020  tinct,.         
-00004860: 2020 2020 2020 2063 6163 6865 3d73 656c         cache=sel
-00004870: 662e 6361 6368 652c 0a20 2020 2020 2020  f.cache,.       
-00004880: 2020 2020 2020 2020 2063 6163 6865 6162           cacheab
-00004890: 6c65 3d54 7275 652c 0a20 2020 2020 2020  le=True,.       
-000048a0: 2020 2020 2020 2020 206c 6566 743d 6c65           left=le
-000048b0: 6674 2c0a 2020 2020 2020 2020 2020 2020  ft,.            
-000048c0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-000048d0: 636f 7264 7320 3d20 7365 6c66 2e64 6273  cords = self.dbs
-000048e0: 6574 2874 6162 6c65 292e 7365 6c65 6374  et(table).select
-000048f0: 282a 6669 656c 6473 2c20 2a2a 6464 290a  (*fields, **dd).
-00004900: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00004910: 2020 2020 2020 2020 2020 6f72 6465 7262            orderb
-00004920: 7920 3d20 7365 6c66 2e6f 7264 6572 6279  y = self.orderby
-00004930: 206f 7220 7265 6475 6365 280a 2020 2020   or reduce(.    
-00004940: 2020 2020 2020 2020 2020 2020 6c61 6d62              lamb
-00004950: 6461 2061 2c20 623a 2061 207c 2062 2c20  da a, b: a | b, 
-00004960: 2866 2066 6f72 2066 2069 6e20 6669 656c  (f for f in fiel
-00004970: 6473 2069 6620 6e6f 7420 662e 6e61 6d65  ds if not f.name
-00004980: 203d 3d20 2269 6422 290a 2020 2020 2020   == "id").      
-00004990: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000049a0: 2020 2020 6464 203d 2064 6963 7428 6f72      dd = dict(or
-000049b0: 6465 7262 793d 6f72 6465 7262 792c 2063  derby=orderby, c
-000049c0: 6163 6865 3d73 656c 662e 6361 6368 652c  ache=self.cache,
-000049d0: 2063 6163 6865 6162 6c65 3d54 7275 6529   cacheable=True)
-000049e0: 0a20 2020 2020 2020 2020 2020 2072 6563  .            rec
-000049f0: 6f72 6473 203d 2073 656c 662e 6462 7365  ords = self.dbse
-00004a00: 7428 7461 626c 6529 2e73 656c 6563 7428  t(table).select(
-00004a10: 7461 626c 652e 414c 4c2c 202a 2a64 6429  table.ALL, **dd)
-00004a20: 0a20 2020 2020 2020 2073 656c 662e 7468  .        self.th
-00004a30: 6573 6574 203d 205b 7374 7228 725b 7365  eset = [str(r[se
-00004a40: 6c66 2e6b 6669 656c 645d 2920 666f 7220  lf.kfield]) for 
-00004a50: 7220 696e 2072 6563 6f72 6473 5d0a 2020  r in records].  
-00004a60: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00004a70: 6e63 6528 7365 6c66 2e6c 6162 656c 2c20  nce(self.label, 
-00004a80: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-00004a90: 2020 7365 6c66 2e6c 6162 656c 7320 3d20    self.labels = 
-00004aa0: 5b73 656c 662e 6c61 6265 6c20 2520 7220  [self.label % r 
-00004ab0: 666f 7220 7220 696e 2072 6563 6f72 6473  for r in records
-00004ac0: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
-00004ad0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004ae0: 2e6c 6162 656c 7320 3d20 5b73 656c 662e  .labels = [self.
-00004af0: 6c61 6265 6c28 7229 2066 6f72 2072 2069  label(r) for r i
-00004b00: 6e20 7265 636f 7264 735d 0a0a 2020 2020  n records]..    
-00004b10: 6465 6620 6f70 7469 6f6e 7328 7365 6c66  def options(self
-00004b20: 2c20 7a65 726f 3d54 7275 6529 3a0a 2020  , zero=True):.  
-00004b30: 2020 2020 2020 7365 6c66 2e62 7569 6c64        self.build
-00004b40: 5f73 6574 2829 0a20 2020 2020 2020 2069  _set().        i
-00004b50: 7465 6d73 203d 205b 286b 2c20 7365 6c66  tems = [(k, self
-00004b60: 2e6c 6162 656c 735b 695d 2920 666f 7220  .labels[i]) for 
-00004b70: 2869 2c20 6b29 2069 6e20 656e 756d 6572  (i, k) in enumer
-00004b80: 6174 6528 7365 6c66 2e74 6865 7365 7429  ate(self.theset)
-00004b90: 5d0a 2020 2020 2020 2020 6966 2073 656c  ].        if sel
-00004ba0: 662e 736f 7274 3a0a 2020 2020 2020 2020  f.sort:.        
-00004bb0: 2020 2020 6974 656d 732e 736f 7274 286b      items.sort(k
-00004bc0: 6579 3d6c 616d 6264 6120 6f3a 2073 7472  ey=lambda o: str
-00004bd0: 286f 5b31 5d29 2e75 7070 6572 2829 290a  (o[1]).upper()).
-00004be0: 2020 2020 2020 2020 6966 207a 6572 6f20          if zero 
-00004bf0: 616e 6420 7365 6c66 2e7a 6572 6f20 6973  and self.zero is
-00004c00: 206e 6f74 204e 6f6e 6520 616e 6420 6e6f   not None and no
-00004c10: 7420 7365 6c66 2e6d 756c 7469 706c 653a  t self.multiple:
-00004c20: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
-00004c30: 6d73 2e69 6e73 6572 7428 302c 2028 2222  ms.insert(0, (""
-00004c40: 2c20 7365 6c66 2e7a 6572 6f29 290a 2020  , self.zero)).  
-00004c50: 2020 2020 2020 7265 7475 726e 2069 7465        return ite
-00004c60: 6d73 0a0a 2020 2020 6465 6620 6d61 7962  ms..    def mayb
-00004c70: 655f 6164 6428 7365 6c66 2c20 7461 626c  e_add(self, tabl
-00004c80: 652c 2066 6965 6c64 6e61 6d65 2c20 7661  e, fieldname, va
-00004c90: 6c75 6529 3a0a 2020 2020 2020 2020 6420  lue):.        d 
-00004ca0: 3d20 7b66 6965 6c64 6e61 6d65 3a20 7661  = {fieldname: va
-00004cb0: 6c75 657d 0a20 2020 2020 2020 2072 6563  lue}.        rec
-00004cc0: 6f72 6420 3d20 7461 626c 6528 2a2a 6429  ord = table(**d)
-00004cd0: 0a20 2020 2020 2020 2069 6620 7265 636f  .        if reco
-00004ce0: 7264 3a0a 2020 2020 2020 2020 2020 2020  rd:.            
-00004cf0: 7265 7475 726e 2072 6563 6f72 642e 6964  return record.id
-00004d00: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00004d10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00004d20: 6e20 7461 626c 652e 696e 7365 7274 282a  n table.insert(*
-00004d30: 2a64 290a 0a20 2020 2064 6566 2076 616c  *d)..    def val
-00004d40: 6964 6174 6528 7365 6c66 2c20 7661 6c75  idate(self, valu
-00004d50: 652c 2072 6563 6f72 645f 6964 3d4e 6f6e  e, record_id=Non
-00004d60: 6529 3a0a 2020 2020 2020 2020 7461 626c  e):.        tabl
-00004d70: 6520 3d20 7365 6c66 2e64 6273 6574 2e64  e = self.dbset.d
-00004d80: 625b 7365 6c66 2e6b 7461 626c 655d 0a20  b[self.ktable]. 
-00004d90: 2020 2020 2020 2066 6965 6c64 203d 2074         field = t
-00004da0: 6162 6c65 5b73 656c 662e 6b66 6965 6c64  able[self.kfield
-00004db0: 5d0a 0a20 2020 2020 2020 2069 6620 7365  ]..        if se
-00004dc0: 6c66 2e6d 756c 7469 706c 653a 0a20 2020  lf.multiple:.   
-00004dd0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00004de0: 2e5f 616e 643a 0a20 2020 2020 2020 2020  ._and:.         
-00004df0: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
-00004e00: 496d 706c 656d 656e 7465 6445 7272 6f72  ImplementedError
-00004e10: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00004e20: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
-00004e30: 2c20 6c69 7374 293a 0a20 2020 2020 2020  , list):.       
-00004e40: 2020 2020 2020 2020 2076 616c 7565 7320           values 
-00004e50: 3d20 7661 6c75 650a 2020 2020 2020 2020  = value.        
-00004e60: 2020 2020 656c 6966 2073 656c 662e 6465      elif self.de
-00004e70: 6c69 6d69 7465 723a 0a20 2020 2020 2020  limiter:.       
-00004e80: 2020 2020 2020 2020 2076 616c 7565 7320           values 
-00004e90: 3d20 7661 6c75 652e 7370 6c69 7428 7365  = value.split(se
-00004ea0: 6c66 2e64 656c 696d 6974 6572 2920 2023  lf.delimiter)  #
-00004eb0: 2062 6563 6175 7365 206f 6620 6175 746f   because of auto
-00004ec0: 636f 6d70 6c65 7465 0a20 2020 2020 2020  complete.       
-00004ed0: 2020 2020 2065 6c69 6620 7661 6c75 653a       elif value:
-00004ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004ef0: 2076 616c 7565 7320 3d20 5b76 616c 7565   values = [value
-00004f00: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
-00004f10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00004f20: 2020 2020 7661 6c75 6573 203d 205b 5d0a      values = [].
-00004f30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00004f40: 6669 656c 642e 7479 7065 2069 6e20 2822  field.type in ("
-00004f50: 6964 222c 2022 696e 7465 6765 7222 293a  id", "integer"):
-00004f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004f70: 206e 6577 5f76 616c 7565 7320 3d20 5b5d   new_values = []
-00004f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004f90: 2066 6f72 2076 616c 7565 2069 6e20 7661   for value in va
-00004fa0: 6c75 6573 3a0a 2020 2020 2020 2020 2020  lues:.          
-00004fb0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00004fc0: 2028 6973 696e 7374 616e 6365 2876 616c   (isinstance(val
-00004fd0: 7565 2c20 696e 7465 6765 725f 7479 7065  ue, integer_type
-00004fe0: 7329 206f 7220 7661 6c75 652e 6973 6469  s) or value.isdi
-00004ff0: 6769 7428 2929 3a0a 2020 2020 2020 2020  git()):.        
-00005000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005010: 6966 2073 656c 662e 6175 746f 5f61 6464  if self.auto_add
-00005020: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005030: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00005040: 6c75 6520 3d20 7374 7228 0a20 2020 2020  lue = str(.     
-00005050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005060: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005070: 6d61 7962 655f 6164 6428 7461 626c 652c  maybe_add(table,
-00005080: 2073 656c 662e 6669 656c 646e 616d 6573   self.fieldnames
-00005090: 5b30 5d2c 2076 616c 7565 290a 2020 2020  [0], value).    
-000050a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000050c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000050e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050f0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
-00005100: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
-00005110: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
-00005120: 7272 6f72 5f6d 6573 7361 6765 2929 0a20  rror_message)). 
-00005130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005140: 2020 206e 6577 5f76 616c 7565 732e 6170     new_values.ap
-00005150: 7065 6e64 2876 616c 7565 290a 2020 2020  pend(value).    
-00005160: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00005170: 6573 203d 206e 6577 5f76 616c 7565 730a  es = new_values.
-00005180: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005190: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000051a0: 2020 6973 696e 7374 616e 6365 2873 656c    isinstance(sel
-000051b0: 662e 6d75 6c74 6970 6c65 2c20 2874 7570  f.multiple, (tup
-000051c0: 6c65 2c20 6c69 7374 2929 0a20 2020 2020  le, list)).     
-000051d0: 2020 2020 2020 2020 2020 2061 6e64 206e             and n
-000051e0: 6f74 2073 656c 662e 6d75 6c74 6970 6c65  ot self.multiple
-000051f0: 5b30 5d20 3c3d 206c 656e 2876 616c 7565  [0] <= len(value
-00005200: 7329 203c 2073 656c 662e 6d75 6c74 6970  s) < self.multip
-00005210: 6c65 5b31 5d0a 2020 2020 2020 2020 2020  le[1].          
-00005220: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00005230: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00005240: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00005250: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00005260: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
-00005270: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00005280: 656c 662e 7468 6573 6574 3a0a 2020 2020  elf.theset:.    
-00005290: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000052a0: 6f74 205b 7620 666f 7220 7620 696e 2076  ot [v for v in v
-000052b0: 616c 7565 7320 6966 2073 7472 2876 2920  alues if str(v) 
-000052c0: 6e6f 7420 696e 2073 656c 662e 7468 6573  not in self.thes
-000052d0: 6574 5d3a 0a20 2020 2020 2020 2020 2020  et]:.           
-000052e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000052f0: 7661 6c75 6573 0a20 2020 2020 2020 2020  values.         
-00005300: 2020 2065 6c73 653a 0a0a 2020 2020 2020     else:..      
-00005310: 2020 2020 2020 2020 2020 6465 6620 636f            def co
-00005320: 756e 7428 7661 6c75 6573 2c20 733d 7365  unt(values, s=se
-00005330: 6c66 2e64 6273 6574 2c20 663d 6669 656c  lf.dbset, f=fiel
-00005340: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
-00005350: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00005360: 2866 2e62 656c 6f6e 6773 286c 6973 7428  (f.belongs(list(
-00005370: 6d61 7028 696e 742c 2076 616c 7565 7329  map(int, values)
-00005380: 2929 292e 636f 756e 7428 290a 0a20 2020  ))).count()..   
-00005390: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000053a0: 7365 6c66 2e64 6273 6574 2e64 622e 5f61  self.dbset.db._a
-000053b0: 6461 7074 6572 2e64 6265 6e67 696e 6520  dapter.dbengine 
-000053c0: 3d3d 2022 676f 6f67 6c65 3a64 6174 6173  == "google:datas
-000053d0: 746f 7265 223a 0a20 2020 2020 2020 2020  tore":.         
-000053e0: 2020 2020 2020 2020 2020 2072 616e 6765             range
-000053f0: 5f69 6473 203d 2072 616e 6765 2830 2c20  _ids = range(0, 
-00005400: 6c65 6e28 7661 6c75 6573 292c 2033 3029  len(values), 30)
-00005410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005420: 2020 2020 2074 6f74 616c 203d 2073 756d       total = sum
-00005430: 2863 6f75 6e74 2876 616c 7565 735b 6920  (count(values[i 
-00005440: 3a20 6920 2b20 3330 5d29 2066 6f72 2069  : i + 30]) for i
-00005450: 2069 6e20 7261 6e67 655f 6964 7329 0a20   in range_ids). 
-00005460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005470: 2020 2069 6620 746f 7461 6c20 3d3d 206c     if total == l
-00005480: 656e 2876 616c 7565 7329 3a0a 2020 2020  en(values):.    
-00005490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054a0: 2020 2020 7265 7475 726e 2076 616c 7565      return value
-000054b0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-000054c0: 2020 656c 6966 2063 6f75 6e74 2876 616c    elif count(val
-000054d0: 7565 7329 203d 3d20 6c65 6e28 7661 6c75  ues) == len(valu
-000054e0: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
-000054f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005500: 7661 6c75 6573 0a20 2020 2020 2020 2065  values.        e
-00005510: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00005520: 2069 6620 6669 656c 642e 7479 7065 2069   if field.type i
-00005530: 6e20 2822 6964 222c 2022 696e 7465 6765  n ("id", "intege
-00005540: 7222 293a 0a20 2020 2020 2020 2020 2020  r"):.           
-00005550: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00005560: 6365 2876 616c 7565 2c20 696e 7465 6765  ce(value, intege
-00005570: 725f 7479 7065 7329 206f 7220 280a 2020  r_types) or (.  
-00005580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005590: 2020 6973 696e 7374 616e 6365 2876 616c    isinstance(val
-000055a0: 7565 2c20 7374 7269 6e67 5f74 7970 6573  ue, string_types
-000055b0: 2920 616e 6420 7661 6c75 652e 6973 6469  ) and value.isdi
-000055c0: 6769 7428 290a 2020 2020 2020 2020 2020  git().          
-000055d0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-000055e0: 2020 2020 2020 2020 2020 2020 2076 616c               val
-000055f0: 7565 203d 2069 6e74 2876 616c 7565 290a  ue = int(value).
-00005600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005610: 656c 6966 2073 656c 662e 6175 746f 5f61  elif self.auto_a
-00005620: 6464 3a0a 2020 2020 2020 2020 2020 2020  dd:.            
-00005630: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-00005640: 7365 6c66 2e6d 6179 6265 5f61 6464 2874  self.maybe_add(t
-00005650: 6162 6c65 2c20 7365 6c66 2e66 6965 6c64  able, self.field
-00005660: 6e61 6d65 735b 305d 2c20 7661 6c75 6529  names[0], value)
-00005670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005680: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00005690: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000056a0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-000056b0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-000056c0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-000056d0: 6167 6529 290a 0a20 2020 2020 2020 2020  age))..         
-000056e0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-000056f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005700: 7661 6c75 6520 3d20 696e 7428 7661 6c75  value = int(valu
-00005710: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00005720: 2020 2065 7863 6570 7420 5479 7065 4572     except TypeEr
-00005730: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
-00005740: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00005750: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00005760: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-00005770: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00005780: 6529 290a 0a20 2020 2020 2020 2020 2020  e))..           
-00005790: 2069 6620 7365 6c66 2e74 6865 7365 743a   if self.theset:
-000057a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000057b0: 2069 6620 7374 7228 7661 6c75 6529 2069   if str(value) i
-000057c0: 6e20 7365 6c66 2e74 6865 7365 743a 0a20  n self.theset:. 
-000057d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000057e0: 2020 2069 6620 7365 6c66 2e5f 616e 643a     if self._and:
-000057f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005800: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005810: 7661 6c69 6461 746f 725f 6361 6c6c 6572  validator_caller
-00005820: 2873 656c 662e 5f61 6e64 2c20 7661 6c75  (self._and, valu
-00005830: 652c 2072 6563 6f72 645f 6964 290a 2020  e, record_id).  
-00005840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005850: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
-00005860: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00005870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005880: 2069 6620 7365 6c66 2e64 6273 6574 2866   if self.dbset(f
-00005890: 6965 6c64 203d 3d20 7661 6c75 6529 2e63  ield == value).c
-000058a0: 6f75 6e74 2829 3a0a 2020 2020 2020 2020  ount():.        
-000058b0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-000058c0: 656c 662e 5f61 6e64 3a0a 2020 2020 2020  elf._and:.      
-000058d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000058e0: 2020 7265 7475 726e 2076 616c 6964 6174    return validat
-000058f0: 6f72 5f63 616c 6c65 7228 7365 6c66 2e5f  or_caller(self._
-00005900: 616e 642c 2076 616c 7565 2c20 7265 636f  and, value, reco
-00005910: 7264 5f69 6429 0a20 2020 2020 2020 2020  rd_id).         
-00005920: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00005930: 6e20 7661 6c75 650a 2020 2020 2020 2020  n value.        
-00005940: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-00005950: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-00005960: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-00005970: 5f6d 6573 7361 6765 2929 0a0a 0a63 6c61  _message))...cla
-00005980: 7373 2049 535f 4e4f 545f 494e 5f44 4228  ss IS_NOT_IN_DB(
-00005990: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
-000059a0: 2222 220a 2020 2020 4578 616d 706c 653a  """.    Example:
-000059b0: 0a20 2020 2020 2020 2055 7365 6420 6173  .        Used as
-000059c0: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-000059d0: 494e 5055 5428 5f74 7970 653d 2774 6578  INPUT(_type='tex
-000059e0: 7427 2c20 5f6e 616d 653d 276e 616d 6527  t', _name='name'
-000059f0: 2c20 7265 7175 6972 6573 3d49 535f 4e4f  , requires=IS_NO
-00005a00: 545f 494e 5f44 4228 6462 2c20 6462 2e74  T_IN_DB(db, db.t
-00005a10: 6162 6c65 2929 0a0a 2020 2020 6d61 6b65  able))..    make
-00005a20: 7320 7468 6520 6669 656c 6420 756e 6971  s the field uniq
-00005a30: 7565 0a20 2020 2022 2222 0a0a 2020 2020  ue.    """..    
-00005a40: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-00005a50: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00005a60: 2020 2020 6462 7365 742c 0a20 2020 2020      dbset,.     
-00005a70: 2020 2066 6965 6c64 2c0a 2020 2020 2020     field,.      
-00005a80: 2020 6572 726f 725f 6d65 7373 6167 653d    error_message=
-00005a90: 2256 616c 7565 2061 6c72 6561 6479 2069  "Value already i
-00005aa0: 6e20 6461 7461 6261 7365 206f 7220 656d  n database or em
-00005ab0: 7074 7922 2c0a 2020 2020 2020 2020 616c  pty",.        al
-00005ac0: 6c6f 7765 645f 6f76 6572 7269 6465 3d5b  lowed_override=[
-00005ad0: 5d2c 0a20 2020 2020 2020 2069 676e 6f72  ],.        ignor
-00005ae0: 655f 636f 6d6d 6f6e 5f66 696c 7465 7273  e_common_filters
-00005af0: 3d46 616c 7365 2c0a 2020 2020 293a 0a20  =False,.    ):. 
-00005b00: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00005b10: 616e 6365 2866 6965 6c64 2c20 5461 626c  ance(field, Tabl
-00005b20: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00005b30: 6669 656c 6420 3d20 6669 656c 642e 5f69  field = field._i
-00005b40: 640a 0a20 2020 2020 2020 2069 6620 6861  d..        if ha
-00005b50: 7361 7474 7228 6462 7365 742c 2022 6465  sattr(dbset, "de
-00005b60: 6669 6e65 5f74 6162 6c65 2229 3a0a 2020  fine_table"):.  
-00005b70: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
-00005b80: 6273 6574 203d 2064 6273 6574 2829 0a20  bset = dbset(). 
-00005b90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00005ba0: 2020 2020 2020 2020 2073 656c 662e 6462           self.db
-00005bb0: 7365 7420 3d20 6462 7365 740a 2020 2020  set = dbset.    
-00005bc0: 2020 2020 7365 6c66 2e66 6965 6c64 203d      self.field =
-00005bd0: 2066 6965 6c64 0a20 2020 2020 2020 2073   field.        s
-00005be0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00005bf0: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
-00005c00: 650a 2020 2020 2020 2020 7365 6c66 2e72  e.        self.r
-00005c10: 6563 6f72 645f 6964 203d 2030 0a20 2020  ecord_id = 0.   
-00005c20: 2020 2020 2073 656c 662e 616c 6c6f 7765       self.allowe
-00005c30: 645f 6f76 6572 7269 6465 203d 2061 6c6c  d_override = all
-00005c40: 6f77 6564 5f6f 7665 7272 6964 650a 2020  owed_override.  
-00005c50: 2020 2020 2020 7365 6c66 2e69 676e 6f72        self.ignor
-00005c60: 655f 636f 6d6d 6f6e 5f66 696c 7465 7273  e_common_filters
-00005c70: 203d 2069 676e 6f72 655f 636f 6d6d 6f6e   = ignore_common
-00005c80: 5f66 696c 7465 7273 0a0a 2020 2020 6465  _filters..    de
-00005c90: 6620 7365 745f 7365 6c66 5f69 6428 7365  f set_self_id(se
-00005ca0: 6c66 2c20 6964 293a 0a20 2020 2020 2020  lf, id):.       
-00005cb0: 2023 2074 6869 7320 6973 206c 6567 6163   # this is legac
-00005cc0: 7920 202d 2077 6562 3270 7920 7573 6573  y  - web2py uses
-00005cd0: 2062 7574 206e 6f62 6f64 7920 656c 7365   but nobody else
-00005ce0: 2073 686f 756c 640a 2020 2020 2020 2020   should.        
-00005cf0: 2320 6974 2069 7320 6e6f 7420 7361 6665  # it is not safe
-00005d00: 2069 6620 7468 6520 6f62 6a65 6374 2069   if the object i
-00005d10: 7320 7265 6379 636c 6564 0a20 2020 2020  s recycled.     
-00005d20: 2020 2073 656c 662e 7265 636f 7264 5f69     self.record_i
-00005d30: 6420 3d20 6964 0a0a 2020 2020 6465 6620  d = id..    def 
-00005d40: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00005d50: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00005d60: 4e6f 6e65 293a 0a20 2020 2020 2020 2076  None):.        v
-00005d70: 616c 7565 203d 2074 6f5f 6e61 7469 7665  alue = to_native
-00005d80: 2873 7472 2876 616c 7565 2929 0a20 2020  (str(value)).   
-00005d90: 2020 2020 2069 6620 6e6f 7420 7661 6c75       if not valu
-00005da0: 652e 7374 7269 7028 293a 0a20 2020 2020  e.strip():.     
-00005db0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-00005dc0: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
-00005dd0: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
-00005de0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
-00005df0: 290a 2020 2020 2020 2020 6966 2076 616c  ).        if val
-00005e00: 7565 2069 6e20 7365 6c66 2e61 6c6c 6f77  ue in self.allow
-00005e10: 6564 5f6f 7665 7272 6964 653a 0a20 2020  ed_override:.   
-00005e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00005e30: 7661 6c75 650a 2020 2020 2020 2020 2874  value.        (t
-00005e40: 6162 6c65 6e61 6d65 2c20 6669 656c 646e  ablename, fieldn
-00005e50: 616d 6529 203d 2073 7472 2873 656c 662e  ame) = str(self.
-00005e60: 6669 656c 6429 2e73 706c 6974 2822 2e22  field).split("."
-00005e70: 290a 2020 2020 2020 2020 7461 626c 6520  ).        table 
-00005e80: 3d20 7365 6c66 2e64 6273 6574 2e64 625b  = self.dbset.db[
-00005e90: 7461 626c 656e 616d 655d 0a20 2020 2020  tablename].     
-00005ea0: 2020 2066 6965 6c64 203d 2074 6162 6c65     field = table
-00005eb0: 5b66 6965 6c64 6e61 6d65 5d0a 2020 2020  [fieldname].    
-00005ec0: 2020 2020 7175 6572 7920 3d20 6669 656c      query = fiel
-00005ed0: 6420 3d3d 2076 616c 7565 0a0a 2020 2020  d == value..    
-00005ee0: 2020 2020 2320 6d61 6b65 2073 7572 6520      # make sure 
-00005ef0: 6578 636c 7564 6520 7468 6520 7265 636f  exclude the reco
-00005f00: 7264 5f69 640a 2020 2020 2020 2020 6964  rd_id.        id
-00005f10: 203d 2072 6563 6f72 645f 6964 206f 7220   = record_id or 
-00005f20: 7365 6c66 2e72 6563 6f72 645f 6964 0a20  self.record_id. 
-00005f30: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00005f40: 616e 6365 2869 642c 2064 6963 7429 3a0a  ance(id, dict):.
-00005f50: 2020 2020 2020 2020 2020 2020 6964 203d              id =
-00005f60: 2074 6162 6c65 282a 2a69 6429 0a20 2020   table(**id).   
-00005f70: 2020 2020 2069 6620 6e6f 7420 6964 2069       if not id i
-00005f80: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00005f90: 2020 2020 7175 6572 7920 263d 2074 6162      query &= tab
-00005fa0: 6c65 2e5f 6964 2021 3d20 6964 0a20 2020  le._id != id.   
-00005fb0: 2020 2020 2073 7562 7365 7420 3d20 7365       subset = se
-00005fc0: 6c66 2e64 6273 6574 2871 7565 7279 2c20  lf.dbset(query, 
-00005fd0: 6967 6e6f 7265 5f63 6f6d 6d6f 6e5f 6669  ignore_common_fi
-00005fe0: 6c74 6572 733d 7365 6c66 2e69 676e 6f72  lters=self.ignor
-00005ff0: 655f 636f 6d6d 6f6e 5f66 696c 7465 7273  e_common_filters
-00006000: 290a 2020 2020 2020 2020 6966 2073 7562  ).        if sub
-00006010: 7365 742e 7365 6c65 6374 286c 696d 6974  set.select(limit
-00006020: 6279 3d28 302c 2031 2929 3a0a 2020 2020  by=(0, 1)):.    
-00006030: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00006040: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
-00006050: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
-00006060: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-00006070: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-00006080: 6e20 7661 6c75 650a 0a0a 6465 6620 7261  n value...def ra
-00006090: 6e67 655f 6572 726f 725f 6d65 7373 6167  nge_error_messag
-000060a0: 6528 6572 726f 725f 6d65 7373 6167 652c  e(error_message,
-000060b0: 2077 6861 745f 746f 5f65 6e74 6572 2c20   what_to_enter, 
-000060c0: 6d69 6e69 6d75 6d2c 206d 6178 696d 756d  minimum, maximum
-000060d0: 293a 0a20 2020 2022 2222 6275 696c 6420  ):.    """build 
-000060e0: 7468 6520 6572 726f 7220 6d65 7373 6167  the error messag
-000060f0: 6520 666f 7220 7468 6520 6e75 6d62 6572  e for the number
-00006100: 2072 616e 6765 2076 616c 6964 6174 6f72   range validator
-00006110: 7322 2222 0a20 2020 2069 6620 6572 726f  s""".    if erro
-00006120: 725f 6d65 7373 6167 6520 6973 204e 6f6e  r_message is Non
-00006130: 653a 0a20 2020 2020 2020 2065 7272 6f72  e:.        error
-00006140: 5f6d 6573 7361 6765 203d 2022 456e 7465  _message = "Ente
-00006150: 7220 2220 2b20 7768 6174 5f74 6f5f 656e  r " + what_to_en
-00006160: 7465 720a 2020 2020 2020 2020 6966 206d  ter.        if m
-00006170: 696e 696d 756d 2069 7320 6e6f 7420 4e6f  inimum is not No
-00006180: 6e65 2061 6e64 206d 6178 696d 756d 2069  ne and maximum i
-00006190: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-000061a0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-000061b0: 7373 6167 6520 2b3d 2022 2062 6574 7765  ssage += " betwe
-000061c0: 656e 2025 286d 696e 2967 2061 6e64 2025  en %(min)g and %
-000061d0: 286d 6178 2967 220a 2020 2020 2020 2020  (max)g".        
-000061e0: 656c 6966 206d 696e 696d 756d 2069 7320  elif minimum is 
-000061f0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00006200: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-00006210: 6167 6520 2b3d 2022 2067 7265 6174 6572  age += " greater
-00006220: 2074 6861 6e20 6f72 2065 7175 616c 2074   than or equal t
-00006230: 6f20 2528 6d69 6e29 6722 0a20 2020 2020  o %(min)g".     
-00006240: 2020 2065 6c69 6620 6d61 7869 6d75 6d20     elif maximum 
-00006250: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00006260: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
-00006270: 6573 7361 6765 202b 3d20 2220 6c65 7373  essage += " less
-00006280: 2074 6861 6e20 6f72 2065 7175 616c 2074   than or equal t
-00006290: 6f20 2528 6d61 7829 6722 0a20 2020 2069  o %(max)g".    i
-000062a0: 6620 7479 7065 286d 6178 696d 756d 2920  f type(maximum) 
-000062b0: 696e 2069 6e74 6567 6572 5f74 7970 6573  in integer_types
-000062c0: 3a0a 2020 2020 2020 2020 6d61 7869 6d75  :.        maximu
-000062d0: 6d20 2d3d 2031 0a20 2020 2072 6574 7572  m -= 1.    retur
-000062e0: 6e20 7374 7228 7472 616e 736c 6174 6528  n str(translate(
-000062f0: 6572 726f 725f 6d65 7373 6167 6529 2920  error_message)) 
-00006300: 2520 6469 6374 286d 696e 3d6d 696e 696d  % dict(min=minim
-00006310: 756d 2c20 6d61 783d 6d61 7869 6d75 6d29  um, max=maximum)
-00006320: 0a0a 0a63 6c61 7373 2049 535f 494e 545f  ...class IS_INT_
-00006330: 494e 5f52 414e 4745 2856 616c 6964 6174  IN_RANGE(Validat
-00006340: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
-00006350: 2044 6574 6572 6d69 6e65 7320 7468 6174   Determines that
-00006360: 2074 6865 2061 7267 756d 656e 7420 6973   the argument is
-00006370: 2028 6f72 2063 616e 2062 6520 7265 7072   (or can be repr
-00006380: 6573 656e 7465 6420 6173 2920 616e 2069  esented as) an i
-00006390: 6e74 2c0a 2020 2020 616e 6420 7468 6174  nt,.    and that
-000063a0: 2069 7420 6661 6c6c 7320 7769 7468 696e   it falls within
-000063b0: 2074 6865 2073 7065 6369 6669 6564 2072   the specified r
-000063c0: 616e 6765 2e20 5468 6520 7261 6e67 6520  ange. The range 
-000063d0: 6973 2069 6e74 6572 7072 6574 6564 0a20  is interpreted. 
-000063e0: 2020 2069 6e20 7468 6520 5079 7468 6f6e     in the Python
-000063f0: 6963 2077 6179 2c20 736f 2074 6865 2074  ic way, so the t
-00006400: 6573 7420 6973 3a20 6d69 6e20 3c3d 2076  est is: min <= v
-00006410: 616c 7565 203c 206d 6178 2e0a 0a20 2020  alue < max...   
-00006420: 2054 6865 206d 696e 696d 756d 2061 6e64   The minimum and
-00006430: 206d 6178 696d 756d 206c 696d 6974 7320   maximum limits 
-00006440: 6361 6e20 6265 204e 6f6e 652c 206d 6561  can be None, mea
-00006450: 6e69 6e67 206e 6f20 6c6f 7765 7220 6f72  ning no lower or
-00006460: 2075 7070 6572 206c 696d 6974 2c0a 2020   upper limit,.  
-00006470: 2020 7265 7370 6563 7469 7665 6c79 2e0a    respectively..
-00006480: 0a20 2020 2045 7861 6d70 6c65 3a0a 2020  .    Example:.  
-00006490: 2020 2020 2020 5573 6564 2061 733a 3a0a        Used as::.
-000064a0: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-000064b0: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-000064c0: 205f 6e61 6d65 3d27 6e61 6d65 272c 2072   _name='name', r
-000064d0: 6571 7569 7265 733d 4953 5f49 4e54 5f49  equires=IS_INT_I
-000064e0: 4e5f 5241 4e47 4528 302c 2031 3029 290a  N_RANGE(0, 10)).
-000064f0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00006500: 2049 535f 494e 545f 494e 5f52 414e 4745   IS_INT_IN_RANGE
-00006510: 2831 2c35 2928 2734 2729 0a20 2020 2020  (1,5)('4').     
-00006520: 2020 2020 2020 2028 342c 204e 6f6e 6529         (4, None)
-00006530: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00006540: 2049 535f 494e 545f 494e 5f52 414e 4745   IS_INT_IN_RANGE
-00006550: 2831 2c35 2928 3429 0a20 2020 2020 2020  (1,5)(4).       
-00006560: 2020 2020 2028 342c 204e 6f6e 6529 0a20       (4, None). 
-00006570: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00006580: 535f 494e 545f 494e 5f52 414e 4745 2831  S_INT_IN_RANGE(1
-00006590: 2c35 2928 3129 0a20 2020 2020 2020 2020  ,5)(1).         
-000065a0: 2020 2028 312c 204e 6f6e 6529 0a20 2020     (1, None).   
-000065b0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-000065c0: 494e 545f 494e 5f52 414e 4745 2831 2c35  INT_IN_RANGE(1,5
-000065d0: 2928 3529 0a20 2020 2020 2020 2020 2020  )(5).           
-000065e0: 2028 352c 2027 656e 7465 7220 616e 2069   (5, 'enter an i
-000065f0: 6e74 6567 6572 2062 6574 7765 656e 2031  nteger between 1
-00006600: 2061 6e64 2034 2729 0a20 2020 2020 2020   and 4').       
-00006610: 2020 2020 203e 3e3e 2049 535f 494e 545f       >>> IS_INT_
-00006620: 494e 5f52 414e 4745 2831 2c35 2928 3529  IN_RANGE(1,5)(5)
-00006630: 0a20 2020 2020 2020 2020 2020 2028 352c  .            (5,
-00006640: 2027 656e 7465 7220 616e 2069 6e74 6567   'enter an integ
-00006650: 6572 2062 6574 7765 656e 2031 2061 6e64  er between 1 and
-00006660: 2034 2729 0a20 2020 2020 2020 2020 2020   4').           
-00006670: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
-00006680: 414e 4745 2831 2c35 2928 332e 3529 0a20  ANGE(1,5)(3.5). 
-00006690: 2020 2020 2020 2020 2020 2028 332e 352c             (3.5,
-000066a0: 2027 656e 7465 7220 616e 2069 6e74 6567   'enter an integ
-000066b0: 6572 2062 6574 7765 656e 2031 2061 6e64  er between 1 and
-000066c0: 2034 2729 0a20 2020 2020 2020 2020 2020   4').           
-000066d0: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
-000066e0: 414e 4745 284e 6f6e 652c 3529 2827 3427  ANGE(None,5)('4'
-000066f0: 290a 2020 2020 2020 2020 2020 2020 2834  ).            (4
-00006700: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00006710: 2020 2020 3e3e 3e20 4953 5f49 4e54 5f49      >>> IS_INT_I
-00006720: 4e5f 5241 4e47 4528 4e6f 6e65 2c35 2928  N_RANGE(None,5)(
-00006730: 2736 2729 0a20 2020 2020 2020 2020 2020  '6').           
-00006740: 2028 2736 272c 2027 656e 7465 7220 616e   ('6', 'enter an
-00006750: 2069 6e74 6567 6572 206c 6573 7320 7468   integer less th
-00006760: 616e 206f 7220 6571 7561 6c20 746f 2034  an or equal to 4
-00006770: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-00006780: 3e3e 2049 535f 494e 545f 494e 5f52 414e  >> IS_INT_IN_RAN
-00006790: 4745 2831 2c4e 6f6e 6529 2827 3427 290a  GE(1,None)('4').
-000067a0: 2020 2020 2020 2020 2020 2020 2834 2c20              (4, 
-000067b0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-000067c0: 2020 3e3e 3e20 4953 5f49 4e54 5f49 4e5f    >>> IS_INT_IN_
-000067d0: 5241 4e47 4528 312c 4e6f 6e65 2928 2730  RANGE(1,None)('0
-000067e0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-000067f0: 2730 272c 2027 656e 7465 7220 616e 2069  '0', 'enter an i
-00006800: 6e74 6567 6572 2067 7265 6174 6572 2074  nteger greater t
-00006810: 6861 6e20 6f72 2065 7175 616c 2074 6f20  han or equal to 
-00006820: 3127 290a 2020 2020 2020 2020 2020 2020  1').            
-00006830: 3e3e 3e20 4953 5f49 4e54 5f49 4e5f 5241  >>> IS_INT_IN_RA
-00006840: 4e47 4528 2928 3629 0a20 2020 2020 2020  NGE()(6).       
-00006850: 2020 2020 2028 362c 204e 6f6e 6529 0a20       (6, None). 
-00006860: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00006870: 535f 494e 545f 494e 5f52 414e 4745 2829  S_INT_IN_RANGE()
-00006880: 2827 6162 6327 290a 2020 2020 2020 2020  ('abc').        
-00006890: 2020 2020 2827 6162 6327 2c20 2765 6e74      ('abc', 'ent
-000068a0: 6572 2061 6e20 696e 7465 6765 7227 290a  er an integer').
-000068b0: 2020 2020 2222 220a 0a20 2020 2052 4547      """..    REG
-000068c0: 4558 5f49 4e54 203d 2072 225e 5b2b 2d5d  EX_INT = r"^[+-]
-000068d0: 3f5c 642b 2422 0a0a 2020 2020 6465 6620  ?\d+$"..    def 
-000068e0: 5f5f 696e 6974 5f5f 2873 656c 662c 206d  __init__(self, m
-000068f0: 696e 696d 756d 3d4e 6f6e 652c 206d 6178  inimum=None, max
-00006900: 696d 756d 3d4e 6f6e 652c 2065 7272 6f72  imum=None, error
-00006910: 5f6d 6573 7361 6765 3d4e 6f6e 6529 3a0a  _message=None):.
-00006920: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
-00006930: 696d 756d 203d 2069 6e74 286d 696e 696d  imum = int(minim
-00006940: 756d 2920 6966 206d 696e 696d 756d 2069  um) if minimum i
-00006950: 7320 6e6f 7420 4e6f 6e65 2065 6c73 6520  s not None else 
-00006960: 4e6f 6e65 0a20 2020 2020 2020 2073 656c  None.        sel
-00006970: 662e 6d61 7869 6d75 6d20 3d20 696e 7428  f.maximum = int(
-00006980: 6d61 7869 6d75 6d29 2069 6620 6d61 7869  maximum) if maxi
-00006990: 6d75 6d20 6973 206e 6f74 204e 6f6e 6520  mum is not None 
-000069a0: 656c 7365 204e 6f6e 650a 2020 2020 2020  else None.      
-000069b0: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-000069c0: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-000069d0: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
-000069e0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-000069f0: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-00006a00: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
-00006a10: 7265 2e6d 6174 6368 2873 656c 662e 5245  re.match(self.RE
-00006a20: 4745 585f 494e 542c 2073 7472 2876 616c  GEX_INT, str(val
-00006a30: 7565 2929 3a0a 2020 2020 2020 2020 2020  ue)):.          
-00006a40: 2020 7620 3d20 696e 7428 7661 6c75 6529    v = int(value)
-00006a50: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00006a60: 2873 656c 662e 6d69 6e69 6d75 6d20 6973  (self.minimum is
-00006a70: 204e 6f6e 6520 6f72 2076 203e 3d20 7365   None or v >= se
-00006a80: 6c66 2e6d 696e 696d 756d 2920 616e 6420  lf.minimum) and 
-00006a90: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00006aa0: 2020 7365 6c66 2e6d 6178 696d 756d 2069    self.maximum i
-00006ab0: 7320 4e6f 6e65 206f 7220 7620 3c20 7365  s None or v < se
-00006ac0: 6c66 2e6d 6178 696d 756d 0a20 2020 2020  lf.maximum.     
-00006ad0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-00006ae0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00006af0: 2076 0a20 2020 2020 2020 2072 6169 7365   v.        raise
-00006b00: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00006b10: 280a 2020 2020 2020 2020 2020 2020 7261  (.            ra
-00006b20: 6e67 655f 6572 726f 725f 6d65 7373 6167  nge_error_messag
-00006b30: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-00006b40: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
-00006b50: 7373 6167 652c 2022 616e 2069 6e74 6567  ssage, "an integ
-00006b60: 6572 222c 2073 656c 662e 6d69 6e69 6d75  er", self.minimu
-00006b70: 6d2c 2073 656c 662e 6d61 7869 6d75 6d0a  m, self.maximum.
-00006b80: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00006b90: 2020 2020 2020 290a 0a0a 6465 6620 7374        )...def st
-00006ba0: 7232 6465 6328 6e75 6d62 6572 293a 0a20  r2dec(number):. 
-00006bb0: 2020 2073 203d 2073 7472 286e 756d 6265     s = str(numbe
-00006bc0: 7229 0a20 2020 2069 6620 222e 2220 6e6f  r).    if "." no
-00006bd0: 7420 696e 2073 3a0a 2020 2020 2020 2020  t in s:.        
-00006be0: 7320 2b3d 2022 2e30 3022 0a20 2020 2065  s += ".00".    e
-00006bf0: 6c73 653a 0a20 2020 2020 2020 2073 202b  lse:.        s +
-00006c00: 3d20 2230 2220 2a20 2832 202d 206c 656e  = "0" * (2 - len
-00006c10: 2873 2e73 706c 6974 2822 2e22 295b 315d  (s.split(".")[1]
-00006c20: 2929 0a20 2020 2072 6574 7572 6e20 730a  )).    return s.
-00006c30: 0a0a 636c 6173 7320 4953 5f46 4c4f 4154  ..class IS_FLOAT
-00006c40: 5f49 4e5f 5241 4e47 4528 5661 6c69 6461  _IN_RANGE(Valida
-00006c50: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
-00006c60: 2020 4465 7465 726d 696e 6573 2074 6861    Determines tha
-00006c70: 7420 7468 6520 6172 6775 6d65 6e74 2069  t the argument i
-00006c80: 7320 286f 7220 6361 6e20 6265 2072 6570  s (or can be rep
-00006c90: 7265 7365 6e74 6564 2061 7329 2061 2066  resented as) a f
-00006ca0: 6c6f 6174 2c0a 2020 2020 616e 6420 7468  loat,.    and th
-00006cb0: 6174 2069 7420 6661 6c6c 7320 7769 7468  at it falls with
-00006cc0: 696e 2074 6865 2073 7065 6369 6669 6564  in the specified
-00006cd0: 2069 6e63 6c75 7369 7665 2072 616e 6765   inclusive range
-00006ce0: 2e0a 2020 2020 5468 6520 636f 6d70 6172  ..    The compar
-00006cf0: 6973 6f6e 2069 7320 6d61 6465 2077 6974  ison is made wit
-00006d00: 6820 6e61 7469 7665 2061 7269 7468 6d65  h native arithme
-00006d10: 7469 632e 0a0a 2020 2020 5468 6520 6d69  tic...    The mi
-00006d20: 6e69 6d75 6d20 616e 6420 6d61 7869 6d75  nimum and maximu
-00006d30: 6d20 6c69 6d69 7473 2063 616e 2062 6520  m limits can be 
-00006d40: 4e6f 6e65 2c20 6d65 616e 696e 6720 6e6f  None, meaning no
-00006d50: 206c 6f77 6572 206f 7220 7570 7065 7220   lower or upper 
-00006d60: 6c69 6d69 742c 0a20 2020 2072 6573 7065  limit,.    respe
-00006d70: 6374 6976 656c 792e 0a0a 2020 2020 4578  ctively...    Ex
-00006d80: 616d 706c 653a 0a20 2020 2020 2020 2055  ample:.        U
-00006d90: 7365 6420 6173 3a3a 0a0a 2020 2020 2020  sed as::..      
-00006da0: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
-00006db0: 653d 2774 6578 7427 2c20 5f6e 616d 653d  e='text', _name=
-00006dc0: 276e 616d 6527 2c20 7265 7175 6972 6573  'name', requires
-00006dd0: 3d49 535f 464c 4f41 545f 494e 5f52 414e  =IS_FLOAT_IN_RAN
-00006de0: 4745 2830 2c20 3130 2929 0a0a 2020 2020  GE(0, 10))..    
-00006df0: 2020 2020 2020 2020 3e3e 3e20 4953 5f46          >>> IS_F
-00006e00: 4c4f 4154 5f49 4e5f 5241 4e47 4528 312c  LOAT_IN_RANGE(1,
-00006e10: 3529 2827 3427 290a 2020 2020 2020 2020  5)('4').        
-00006e20: 2020 2020 2834 2e30 2c20 4e6f 6e65 290a      (4.0, None).
-00006e30: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00006e40: 4953 5f46 4c4f 4154 5f49 4e5f 5241 4e47  IS_FLOAT_IN_RANG
-00006e50: 4528 312c 3529 2834 290a 2020 2020 2020  E(1,5)(4).      
-00006e60: 2020 2020 2020 2834 2e30 2c20 4e6f 6e65        (4.0, None
-00006e70: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00006e80: 3e20 4953 5f46 4c4f 4154 5f49 4e5f 5241  > IS_FLOAT_IN_RA
-00006e90: 4e47 4528 312c 3529 2831 290a 2020 2020  NGE(1,5)(1).    
-00006ea0: 2020 2020 2020 2020 2831 2e30 2c20 4e6f          (1.0, No
-00006eb0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00006ec0: 3e3e 3e20 4953 5f46 4c4f 4154 5f49 4e5f  >>> IS_FLOAT_IN_
-00006ed0: 5241 4e47 4528 312c 3529 2835 2e32 3529  RANGE(1,5)(5.25)
-00006ee0: 0a20 2020 2020 2020 2020 2020 2028 352e  .            (5.
-00006ef0: 3235 2c20 2765 6e74 6572 2061 206e 756d  25, 'enter a num
-00006f00: 6265 7220 6265 7477 6565 6e20 3120 616e  ber between 1 an
-00006f10: 6420 3527 290a 2020 2020 2020 2020 2020  d 5').          
-00006f20: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
-00006f30: 4e5f 5241 4e47 4528 312c 3529 2836 2e30  N_RANGE(1,5)(6.0
-00006f40: 290a 2020 2020 2020 2020 2020 2020 2836  ).            (6
-00006f50: 2e30 2c20 2765 6e74 6572 2061 206e 756d  .0, 'enter a num
-00006f60: 6265 7220 6265 7477 6565 6e20 3120 616e  ber between 1 an
-00006f70: 6420 3527 290a 2020 2020 2020 2020 2020  d 5').          
-00006f80: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
-00006f90: 4e5f 5241 4e47 4528 312c 3529 2833 2e35  N_RANGE(1,5)(3.5
-00006fa0: 290a 2020 2020 2020 2020 2020 2020 2833  ).            (3
-00006fb0: 2e35 2c20 4e6f 6e65 290a 2020 2020 2020  .5, None).      
-00006fc0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
-00006fd0: 4154 5f49 4e5f 5241 4e47 4528 312c 4e6f  AT_IN_RANGE(1,No
-00006fe0: 6e65 2928 332e 3529 0a20 2020 2020 2020  ne)(3.5).       
-00006ff0: 2020 2020 2028 332e 352c 204e 6f6e 6529       (3.5, None)
-00007000: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00007010: 2049 535f 464c 4f41 545f 494e 5f52 414e   IS_FLOAT_IN_RAN
-00007020: 4745 284e 6f6e 652c 3529 2833 2e35 290a  GE(None,5)(3.5).
-00007030: 2020 2020 2020 2020 2020 2020 2833 2e35              (3.5
-00007040: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00007050: 2020 2020 3e3e 3e20 4953 5f46 4c4f 4154      >>> IS_FLOAT
-00007060: 5f49 4e5f 5241 4e47 4528 312c 4e6f 6e65  _IN_RANGE(1,None
-00007070: 2928 302e 3529 0a20 2020 2020 2020 2020  )(0.5).         
-00007080: 2020 2028 302e 352c 2027 656e 7465 7220     (0.5, 'enter 
-00007090: 6120 6e75 6d62 6572 2067 7265 6174 6572  a number greater
-000070a0: 2074 6861 6e20 6f72 2065 7175 616c 2074   than or equal t
-000070b0: 6f20 3127 290a 2020 2020 2020 2020 2020  o 1').          
-000070c0: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
-000070d0: 4e5f 5241 4e47 4528 4e6f 6e65 2c35 2928  N_RANGE(None,5)(
-000070e0: 362e 3529 0a20 2020 2020 2020 2020 2020  6.5).           
-000070f0: 2028 362e 352c 2027 656e 7465 7220 6120   (6.5, 'enter a 
-00007100: 6e75 6d62 6572 206c 6573 7320 7468 616e  number less than
-00007110: 206f 7220 6571 7561 6c20 746f 2035 2729   or equal to 5')
-00007120: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00007130: 2049 535f 464c 4f41 545f 494e 5f52 414e   IS_FLOAT_IN_RAN
-00007140: 4745 2829 2836 2e35 290a 2020 2020 2020  GE()(6.5).      
-00007150: 2020 2020 2020 2836 2e35 2c20 4e6f 6e65        (6.5, None
-00007160: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00007170: 3e20 4953 5f46 4c4f 4154 5f49 4e5f 5241  > IS_FLOAT_IN_RA
-00007180: 4e47 4528 2928 2761 6263 2729 0a20 2020  NGE()('abc').   
-00007190: 2020 2020 2020 2020 2028 2761 6263 272c           ('abc',
-000071a0: 2027 656e 7465 7220 6120 6e75 6d62 6572   'enter a number
-000071b0: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
-000071c0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-000071d0: 662c 206d 696e 696d 756d 3d4e 6f6e 652c  f, minimum=None,
-000071e0: 206d 6178 696d 756d 3d4e 6f6e 652c 2065   maximum=None, e
-000071f0: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
-00007200: 652c 2064 6f74 3d22 2e22 293a 0a20 2020  e, dot="."):.   
-00007210: 2020 2020 2073 656c 662e 6d69 6e69 6d75       self.minimu
-00007220: 6d20 3d20 666c 6f61 7428 6d69 6e69 6d75  m = float(minimu
-00007230: 6d29 2069 6620 6d69 6e69 6d75 6d20 6973  m) if minimum is
-00007240: 206e 6f74 204e 6f6e 6520 656c 7365 204e   not None else N
-00007250: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
-00007260: 2e6d 6178 696d 756d 203d 2066 6c6f 6174  .maximum = float
-00007270: 286d 6178 696d 756d 2920 6966 206d 6178  (maximum) if max
-00007280: 696d 756d 2069 7320 6e6f 7420 4e6f 6e65  imum is not None
-00007290: 2065 6c73 6520 4e6f 6e65 0a20 2020 2020   else None.     
-000072a0: 2020 2073 656c 662e 646f 7420 3d20 7374     self.dot = st
-000072b0: 7228 646f 7429 0a20 2020 2020 2020 2073  r(dot).        s
-000072c0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-000072d0: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
-000072e0: 650a 0a20 2020 2064 6566 2076 616c 6964  e..    def valid
-000072f0: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
-00007300: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
-00007310: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
-00007320: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00007330: 6c66 2e64 6f74 203d 3d20 222e 223a 0a20  lf.dot == ".":. 
-00007340: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00007350: 203d 2066 6c6f 6174 2876 616c 7565 290a   = float(value).
-00007360: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00007370: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007380: 2020 7620 3d20 666c 6f61 7428 7374 7228    v = float(str(
-00007390: 7661 6c75 6529 2e72 6570 6c61 6365 2873  value).replace(s
-000073a0: 656c 662e 646f 742c 2022 2e22 2929 0a20  elf.dot, ".")). 
-000073b0: 2020 2020 2020 2020 2020 2069 6620 2873             if (s
-000073c0: 656c 662e 6d69 6e69 6d75 6d20 6973 204e  elf.minimum is N
-000073d0: 6f6e 6520 6f72 2076 203e 3d20 7365 6c66  one or v >= self
-000073e0: 2e6d 696e 696d 756d 2920 616e 6420 280a  .minimum) and (.
-000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007400: 7365 6c66 2e6d 6178 696d 756d 2069 7320  self.maximum is 
-00007410: 4e6f 6e65 206f 7220 7620 3c3d 2073 656c  None or v <= sel
-00007420: 662e 6d61 7869 6d75 6d0a 2020 2020 2020  f.maximum.      
-00007430: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-00007440: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00007450: 760a 2020 2020 2020 2020 6578 6365 7074  v.        except
-00007460: 2028 5661 6c75 6545 7272 6f72 2c20 5479   (ValueError, Ty
-00007470: 7065 4572 726f 7229 3a0a 2020 2020 2020  peError):.      
-00007480: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
-00007490: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
-000074a0: 696f 6e45 7272 6f72 280a 2020 2020 2020  ionError(.      
-000074b0: 2020 2020 2020 7261 6e67 655f 6572 726f        range_erro
-000074c0: 725f 6d65 7373 6167 6528 0a20 2020 2020  r_message(.     
-000074d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000074e0: 6572 726f 725f 6d65 7373 6167 652c 2022  error_message, "
-000074f0: 6120 6e75 6d62 6572 222c 2073 656c 662e  a number", self.
-00007500: 6d69 6e69 6d75 6d2c 2073 656c 662e 6d61  minimum, self.ma
-00007510: 7869 6d75 6d0a 2020 2020 2020 2020 2020  ximum.          
-00007520: 2020 290a 2020 2020 2020 2020 290a 0a20    ).        ).. 
-00007530: 2020 2064 6566 2066 6f72 6d61 7474 6572     def formatter
-00007540: 2873 656c 662c 2076 616c 7565 293a 0a20  (self, value):. 
-00007550: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
-00007560: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00007570: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-00007580: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00007590: 7374 7232 6465 6328 7661 6c75 6529 2e72  str2dec(value).r
-000075a0: 6570 6c61 6365 2822 2e22 2c20 7365 6c66  eplace(".", self
-000075b0: 2e64 6f74 290a 0a0a 636c 6173 7320 4953  .dot)...class IS
-000075c0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-000075d0: 4528 5661 6c69 6461 746f 7229 3a0a 2020  E(Validator):.  
-000075e0: 2020 2222 220a 2020 2020 4465 7465 726d    """.    Determ
-000075f0: 696e 6573 2074 6861 7420 7468 6520 6172  ines that the ar
-00007600: 6775 6d65 6e74 2069 7320 286f 7220 6361  gument is (or ca
-00007610: 6e20 6265 2072 6570 7265 7365 6e74 6564  n be represented
-00007620: 2061 7329 2061 2050 7974 686f 6e20 4465   as) a Python De
-00007630: 6369 6d61 6c2c 0a20 2020 2061 6e64 2074  cimal,.    and t
-00007640: 6861 7420 6974 2066 616c 6c73 2077 6974  hat it falls wit
-00007650: 6869 6e20 7468 6520 7370 6563 6966 6965  hin the specifie
-00007660: 6420 696e 636c 7573 6976 6520 7261 6e67  d inclusive rang
-00007670: 652e 0a20 2020 2054 6865 2063 6f6d 7061  e..    The compa
-00007680: 7269 736f 6e20 6973 206d 6164 6520 7769  rison is made wi
-00007690: 7468 2050 7974 686f 6e20 4465 6369 6d61  th Python Decima
-000076a0: 6c20 6172 6974 686d 6574 6963 2e0a 0a20  l arithmetic... 
-000076b0: 2020 2054 6865 206d 696e 696d 756d 2061     The minimum a
-000076c0: 6e64 206d 6178 696d 756d 206c 696d 6974  nd maximum limit
-000076d0: 7320 6361 6e20 6265 204e 6f6e 652c 206d  s can be None, m
-000076e0: 6561 6e69 6e67 206e 6f20 6c6f 7765 7220  eaning no lower 
-000076f0: 6f72 2075 7070 6572 206c 696d 6974 2c0a  or upper limit,.
-00007700: 2020 2020 7265 7370 6563 7469 7665 6c79      respectively
-00007710: 2e0a 0a20 2020 2045 7861 6d70 6c65 3a0a  ...    Example:.
-00007720: 2020 2020 2020 2020 5573 6564 2061 733a          Used as:
-00007730: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-00007740: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
-00007750: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-00007760: 2072 6571 7569 7265 733d 4953 5f44 4543   requires=IS_DEC
-00007770: 494d 414c 5f49 4e5f 5241 4e47 4528 302c  IMAL_IN_RANGE(0,
-00007780: 2031 3029 290a 0a20 2020 2020 2020 2020   10))..         
-00007790: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
-000077a0: 4c5f 494e 5f52 414e 4745 2831 2c35 2928  L_IN_RANGE(1,5)(
-000077b0: 2734 2729 0a20 2020 2020 2020 2020 2020  '4').           
-000077c0: 2028 4465 6369 6d61 6c28 2734 2729 2c20   (Decimal('4'), 
-000077d0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-000077e0: 2020 3e3e 3e20 4953 5f44 4543 494d 414c    >>> IS_DECIMAL
-000077f0: 5f49 4e5f 5241 4e47 4528 312c 3529 2834  _IN_RANGE(1,5)(4
-00007800: 290a 2020 2020 2020 2020 2020 2020 2844  ).            (D
-00007810: 6563 696d 616c 2827 3427 292c 204e 6f6e  ecimal('4'), Non
-00007820: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00007830: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
-00007840: 5f52 414e 4745 2831 2c35 2928 3129 0a20  _RANGE(1,5)(1). 
-00007850: 2020 2020 2020 2020 2020 2028 4465 6369             (Deci
-00007860: 6d61 6c28 2731 2729 2c20 4e6f 6e65 290a  mal('1'), None).
-00007870: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00007880: 4953 5f44 4543 494d 414c 5f49 4e5f 5241  IS_DECIMAL_IN_RA
-00007890: 4e47 4528 312c 3529 2835 2e32 3529 0a20  NGE(1,5)(5.25). 
-000078a0: 2020 2020 2020 2020 2020 2028 352e 3235             (5.25
-000078b0: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
-000078c0: 7220 6265 7477 6565 6e20 3120 616e 6420  r between 1 and 
-000078d0: 3527 290a 2020 2020 2020 2020 2020 2020  5').            
-000078e0: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
-000078f0: 4e5f 5241 4e47 4528 352e 3235 2c36 2928  N_RANGE(5.25,6)(
-00007900: 352e 3235 290a 2020 2020 2020 2020 2020  5.25).          
-00007910: 2020 2844 6563 696d 616c 2827 352e 3235    (Decimal('5.25
-00007920: 2729 2c20 4e6f 6e65 290a 2020 2020 2020  '), None).      
-00007930: 2020 2020 2020 3e3e 3e20 4953 5f44 4543        >>> IS_DEC
-00007940: 494d 414c 5f49 4e5f 5241 4e47 4528 352e  IMAL_IN_RANGE(5.
-00007950: 3235 2c36 2928 2735 2e32 3527 290a 2020  25,6)('5.25').  
-00007960: 2020 2020 2020 2020 2020 2844 6563 696d            (Decim
-00007970: 616c 2827 352e 3235 2729 2c20 4e6f 6e65  al('5.25'), None
-00007980: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00007990: 3e20 4953 5f44 4543 494d 414c 5f49 4e5f  > IS_DECIMAL_IN_
-000079a0: 5241 4e47 4528 312c 3529 2836 2e30 290a  RANGE(1,5)(6.0).
-000079b0: 2020 2020 2020 2020 2020 2020 2836 2e30              (6.0
-000079c0: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
-000079d0: 7220 6265 7477 6565 6e20 3120 616e 6420  r between 1 and 
-000079e0: 3527 290a 2020 2020 2020 2020 2020 2020  5').            
-000079f0: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
-00007a00: 4e5f 5241 4e47 4528 312c 3529 2833 2e35  N_RANGE(1,5)(3.5
-00007a10: 290a 2020 2020 2020 2020 2020 2020 2844  ).            (D
-00007a20: 6563 696d 616c 2827 332e 3527 292c 204e  ecimal('3.5'), N
-00007a30: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00007a40: 203e 3e3e 2049 535f 4445 4349 4d41 4c5f   >>> IS_DECIMAL_
-00007a50: 494e 5f52 414e 4745 2831 2e35 2c35 2e35  IN_RANGE(1.5,5.5
-00007a60: 2928 332e 3529 0a20 2020 2020 2020 2020  )(3.5).         
-00007a70: 2020 2028 4465 6369 6d61 6c28 2733 2e35     (Decimal('3.5
-00007a80: 2729 2c20 4e6f 6e65 290a 2020 2020 2020  '), None).      
-00007a90: 2020 2020 2020 3e3e 3e20 4953 5f44 4543        >>> IS_DEC
-00007aa0: 494d 414c 5f49 4e5f 5241 4e47 4528 312e  IMAL_IN_RANGE(1.
-00007ab0: 352c 352e 3529 2836 2e35 290a 2020 2020  5,5.5)(6.5).    
-00007ac0: 2020 2020 2020 2020 2836 2e35 2c20 2765          (6.5, 'e
-00007ad0: 6e74 6572 2061 206e 756d 6265 7220 6265  nter a number be
-00007ae0: 7477 6565 6e20 312e 3520 616e 6420 352e  tween 1.5 and 5.
-00007af0: 3527 290a 2020 2020 2020 2020 2020 2020  5').            
-00007b00: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
-00007b10: 4e5f 5241 4e47 4528 312e 352c 4e6f 6e65  N_RANGE(1.5,None
-00007b20: 2928 362e 3529 0a20 2020 2020 2020 2020  )(6.5).         
-00007b30: 2020 2028 4465 6369 6d61 6c28 2736 2e35     (Decimal('6.5
-00007b40: 2729 2c20 4e6f 6e65 290a 2020 2020 2020  '), None).      
-00007b50: 2020 2020 2020 3e3e 3e20 4953 5f44 4543        >>> IS_DEC
-00007b60: 494d 414c 5f49 4e5f 5241 4e47 4528 312e  IMAL_IN_RANGE(1.
-00007b70: 352c 4e6f 6e65 2928 302e 3529 0a20 2020  5,None)(0.5).   
-00007b80: 2020 2020 2020 2020 2028 302e 352c 2027           (0.5, '
-00007b90: 656e 7465 7220 6120 6e75 6d62 6572 2067  enter a number g
-00007ba0: 7265 6174 6572 2074 6861 6e20 6f72 2065  reater than or e
-00007bb0: 7175 616c 2074 6f20 312e 3527 290a 2020  qual to 1.5').  
-00007bc0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00007bd0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-00007be0: 4528 4e6f 6e65 2c35 2e35 2928 342e 3529  E(None,5.5)(4.5)
-00007bf0: 0a20 2020 2020 2020 2020 2020 2028 4465  .            (De
-00007c00: 6369 6d61 6c28 2734 2e35 2729 2c20 4e6f  cimal('4.5'), No
-00007c10: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00007c20: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
-00007c30: 4e5f 5241 4e47 4528 4e6f 6e65 2c35 2e35  N_RANGE(None,5.5
-00007c40: 2928 362e 3529 0a20 2020 2020 2020 2020  )(6.5).         
-00007c50: 2020 2028 362e 352c 2027 656e 7465 7220     (6.5, 'enter 
-00007c60: 6120 6e75 6d62 6572 206c 6573 7320 7468  a number less th
-00007c70: 616e 206f 7220 6571 7561 6c20 746f 2035  an or equal to 5
-00007c80: 2e35 2729 0a20 2020 2020 2020 2020 2020  .5').           
-00007c90: 203e 3e3e 2049 535f 4445 4349 4d41 4c5f   >>> IS_DECIMAL_
-00007ca0: 494e 5f52 414e 4745 2829 2836 2e35 290a  IN_RANGE()(6.5).
-00007cb0: 2020 2020 2020 2020 2020 2020 2844 6563              (Dec
-00007cc0: 696d 616c 2827 362e 3527 292c 204e 6f6e  imal('6.5'), Non
-00007cd0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00007ce0: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
-00007cf0: 5f52 414e 4745 2830 2c39 3929 2831 3233  _RANGE(0,99)(123
-00007d00: 2e31 3233 290a 2020 2020 2020 2020 2020  .123).          
-00007d10: 2020 2831 3233 2e31 3233 2c20 2765 6e74    (123.123, 'ent
-00007d20: 6572 2061 206e 756d 6265 7220 6265 7477  er a number betw
-00007d30: 6565 6e20 3020 616e 6420 3939 2729 0a20  een 0 and 99'). 
-00007d40: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00007d50: 535f 4445 4349 4d41 4c5f 494e 5f52 414e  S_DECIMAL_IN_RAN
-00007d60: 4745 2830 2c39 3929 2827 3132 332e 3132  GE(0,99)('123.12
-00007d70: 3327 290a 2020 2020 2020 2020 2020 2020  3').            
-00007d80: 2827 3132 332e 3132 3327 2c20 2765 6e74  ('123.123', 'ent
-00007d90: 6572 2061 206e 756d 6265 7220 6265 7477  er a number betw
-00007da0: 6565 6e20 3020 616e 6420 3939 2729 0a20  een 0 and 99'). 
-00007db0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00007dc0: 535f 4445 4349 4d41 4c5f 494e 5f52 414e  S_DECIMAL_IN_RAN
-00007dd0: 4745 2830 2c39 3929 2827 3132 2e33 3427  GE(0,99)('12.34'
-00007de0: 290a 2020 2020 2020 2020 2020 2020 2844  ).            (D
-00007df0: 6563 696d 616c 2827 3132 2e33 3427 292c  ecimal('12.34'),
-00007e00: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00007e10: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
-00007e20: 4c5f 494e 5f52 414e 4745 2829 2827 6162  L_IN_RANGE()('ab
-00007e30: 6327 290a 2020 2020 2020 2020 2020 2020  c').            
-00007e40: 2827 6162 6327 2c20 2765 6e74 6572 2061  ('abc', 'enter a
-00007e50: 206e 756d 6265 7227 290a 2020 2020 2222   number').    ""
-00007e60: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-00007e70: 745f 5f28 7365 6c66 2c20 6d69 6e69 6d75  t__(self, minimu
-00007e80: 6d3d 4e6f 6e65 2c20 6d61 7869 6d75 6d3d  m=None, maximum=
-00007e90: 4e6f 6e65 2c20 6572 726f 725f 6d65 7373  None, error_mess
-00007ea0: 6167 653d 4e6f 6e65 2c20 646f 743d 222e  age=None, dot=".
-00007eb0: 2229 3a0a 2020 2020 2020 2020 7365 6c66  "):.        self
-00007ec0: 2e6d 696e 696d 756d 203d 2064 6563 696d  .minimum = decim
-00007ed0: 616c 2e44 6563 696d 616c 2873 7472 286d  al.Decimal(str(m
-00007ee0: 696e 696d 756d 2929 2069 6620 6d69 6e69  inimum)) if mini
-00007ef0: 6d75 6d20 6973 206e 6f74 204e 6f6e 6520  mum is not None 
-00007f00: 656c 7365 204e 6f6e 650a 2020 2020 2020  else None.      
-00007f10: 2020 7365 6c66 2e6d 6178 696d 756d 203d    self.maximum =
-00007f20: 2064 6563 696d 616c 2e44 6563 696d 616c   decimal.Decimal
-00007f30: 2873 7472 286d 6178 696d 756d 2929 2069  (str(maximum)) i
-00007f40: 6620 6d61 7869 6d75 6d20 6973 206e 6f74  f maximum is not
-00007f50: 204e 6f6e 6520 656c 7365 204e 6f6e 650a   None else None.
-00007f60: 2020 2020 2020 2020 7365 6c66 2e64 6f74          self.dot
-00007f70: 203d 2073 7472 2864 6f74 290a 2020 2020   = str(dot).    
-00007f80: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-00007f90: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
-00007fa0: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
-00007fb0: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00007fc0: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00007fd0: 4e6f 6e65 293a 0a20 2020 2020 2020 2074  None):.        t
-00007fe0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00007ff0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-00008000: 6528 7661 6c75 652c 2064 6563 696d 616c  e(value, decimal
-00008010: 2e44 6563 696d 616c 293a 0a20 2020 2020  .Decimal):.     
-00008020: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00008030: 203d 2064 6563 696d 616c 2e44 6563 696d   = decimal.Decim
-00008040: 616c 2873 7472 2876 616c 7565 292e 7265  al(str(value).re
-00008050: 706c 6163 6528 7365 6c66 2e64 6f74 2c20  place(self.dot, 
-00008060: 222e 2229 290a 2020 2020 2020 2020 2020  ".")).          
-00008070: 2020 6966 2028 7365 6c66 2e6d 696e 696d    if (self.minim
-00008080: 756d 2069 7320 4e6f 6e65 206f 7220 7661  um is None or va
-00008090: 6c75 6520 3e3d 2073 656c 662e 6d69 6e69  lue >= self.mini
-000080a0: 6d75 6d29 2061 6e64 2028 0a20 2020 2020  mum) and (.     
-000080b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000080c0: 6d61 7869 6d75 6d20 6973 204e 6f6e 6520  maximum is None 
-000080d0: 6f72 2076 616c 7565 203c 3d20 7365 6c66  or value <= self
-000080e0: 2e6d 6178 696d 756d 0a20 2020 2020 2020  .maximum.       
-000080f0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00008100: 2020 2020 2020 2020 7265 7475 726e 2076          return v
-00008110: 616c 7565 0a20 2020 2020 2020 2065 7863  alue.        exc
-00008120: 6570 7420 2856 616c 7565 4572 726f 722c  ept (ValueError,
-00008130: 2054 7970 6545 7272 6f72 2c20 6465 6369   TypeError, deci
-00008140: 6d61 6c2e 496e 7661 6c69 644f 7065 7261  mal.InvalidOpera
-00008150: 7469 6f6e 293a 0a20 2020 2020 2020 2020  tion):.         
-00008160: 2020 2070 6173 730a 2020 2020 2020 2020     pass.        
-00008170: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-00008180: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-00008190: 2020 2072 616e 6765 5f65 7272 6f72 5f6d     range_error_m
-000081a0: 6573 7361 6765 280a 2020 2020 2020 2020  essage(.        
+00003f90: 2020 2020 2020 2020 7461 626c 6520 3d20          table = 
+00003fa0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+00003fb0: 6973 696e 7374 616e 6365 2866 6965 6c64  isinstance(field
+00003fc0: 2c20 5461 626c 6529 3a0a 2020 2020 2020  , Table):.      
+00003fd0: 2020 2020 2020 7461 626c 6520 3d20 6669        table = fi
+00003fe0: 656c 640a 2020 2020 2020 2020 2020 2020  eld.            
+00003ff0: 6669 656c 6420 3d20 7461 626c 652e 5f69  field = table._i
+00004000: 640a 2020 2020 2020 2020 2020 2020 666e  d.            fn
+00004010: 616d 6520 3d20 7374 7228 6669 656c 6429  ame = str(field)
+00004020: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00004030: 7374 616e 6365 2866 6965 6c64 2c20 4669  stance(field, Fi
+00004040: 656c 6429 3a0a 2020 2020 2020 2020 2020  eld):.          
+00004050: 2020 666e 616d 6520 3d20 7374 7228 6669    fname = str(fi
+00004060: 656c 6429 0a20 2020 2020 2020 2065 6c69  eld).        eli
+00004070: 6620 6973 696e 7374 616e 6365 2866 6965  f isinstance(fie
+00004080: 6c64 2c20 7374 7229 3a0a 2020 2020 2020  ld, str):.      
+00004090: 2020 2020 2020 6974 656d 7320 3d20 6669        items = fi
+000040a0: 656c 642e 7370 6c69 7428 222e 2229 0a20  eld.split("."). 
+000040b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+000040c0: 6e28 6974 656d 7329 203d 3d20 3120 6f72  n(items) == 1 or
+000040d0: 2069 7465 6d73 5b31 5d20 3d3d 2022 6964   items[1] == "id
+000040e0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+000040f0: 2020 2074 6162 6c65 203d 2073 656c 662e     table = self.
+00004100: 6462 7365 742e 5f64 622e 6765 7428 6974  dbset._db.get(it
+00004110: 656d 735b 305d 290a 2020 2020 2020 2020  ems[0]).        
+00004120: 2020 2020 2020 2020 666e 616d 6520 3d20          fname = 
+00004130: 6974 656d 735b 305d 202b 2022 2e69 6422  items[0] + ".id"
+00004140: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00004150: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00004160: 2020 2066 6e61 6d65 203d 2066 6965 6c64     fname = field
+00004170: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00004180: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00004190: 2052 756e 7469 6d65 4572 726f 7228 2249   RuntimeError("I
+000041a0: 535f 494e 5f44 423a 2061 2066 6965 6c64  S_IN_DB: a field
+000041b0: 2061 7267 756d 656e 7420 6d75 7374 2062   argument must b
+000041c0: 6520 7370 6563 6966 6965 6422 290a 2020  e specified").  
+000041d0: 2020 2020 2020 286b 7461 626c 652c 206b        (ktable, k
+000041e0: 6669 656c 6429 203d 2066 6e61 6d65 2e73  field) = fname.s
+000041f0: 706c 6974 2822 2e22 290a 2020 2020 2020  plit(".").      
+00004200: 2020 6966 206e 6f74 206c 6162 656c 3a0a    if not label:.
+00004210: 2020 2020 2020 2020 2020 2020 2320 6966              # if
+00004220: 2077 6520 6861 7665 2061 2074 6162 6c65   we have a table
+00004230: 2061 6e64 2069 7420 6861 7320 6120 5f66   and it has a _f
+00004240: 6f72 6d61 742c 2075 7365 2069 740a 2020  ormat, use it.  
+00004250: 2020 2020 2020 2020 2020 6966 2074 6162            if tab
+00004260: 6c65 2061 6e64 2074 6162 6c65 2e5f 666f  le and table._fo
+00004270: 726d 6174 3a0a 2020 2020 2020 2020 2020  rmat:.          
+00004280: 2020 2020 2020 6c61 6265 6c20 3d20 7461        label = ta
+00004290: 626c 652e 5f66 6f72 6d61 740a 2020 2020  ble._format.    
+000042a0: 2020 2020 2020 2020 2320 656c 7365 2066          # else f
+000042b0: 6f72 6d61 7420 7573 696e 6720 7468 6520  ormat using the 
+000042c0: 6669 656c 6420 7661 6c75 650a 2020 2020  field value.    
+000042d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000042e0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
+000042f0: 6265 6c20 3d20 2225 2528 2573 2973 2220  bel = "%%(%s)s" 
+00004300: 2520 6b66 6965 6c64 0a20 2020 2020 2020  % kfield.       
+00004310: 2069 6620 6973 696e 7374 616e 6365 286c   if isinstance(l
+00004320: 6162 656c 2c20 7374 7229 3a0a 2020 2020  abel, str):.    
+00004330: 2020 2020 2020 2020 6d20 3d20 7265 2e6d          m = re.m
+00004340: 6174 6368 2873 656c 662e 5245 4745 585f  atch(self.REGEX_
+00004350: 5441 424c 455f 444f 545f 4649 454c 442c  TABLE_DOT_FIELD,
+00004360: 206c 6162 656c 290a 2020 2020 2020 2020   label).        
+00004370: 2020 2020 6966 206d 3a0a 2020 2020 2020      if m:.      
+00004380: 2020 2020 2020 2020 2020 6c61 6265 6c20            label 
+00004390: 3d20 2225 2528 2573 2973 2220 2520 6d2e  = "%%(%s)s" % m.
+000043a0: 6772 6f75 7028 3229 0a20 2020 2020 2020  group(2).       
+000043b0: 2020 2020 2066 6965 6c64 6e61 6d65 7320       fieldnames 
+000043c0: 3d20 7265 2e66 696e 6461 6c6c 2873 656c  = re.findall(sel
+000043d0: 662e 5245 4745 585f 494e 5445 5250 5f43  f.REGEX_INTERP_C
+000043e0: 4f4e 565f 5350 4543 4946 4945 522c 206c  ONV_SPECIFIER, l
+000043f0: 6162 656c 290a 2020 2020 2020 2020 2020  abel).          
+00004400: 2020 6966 206b 6669 656c 6420 6e6f 7420    if kfield not 
+00004410: 696e 2066 6965 6c64 6e61 6d65 733a 0a20  in fieldnames:. 
+00004420: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00004430: 6965 6c64 6e61 6d65 732e 6170 7065 6e64  ieldnames.append
+00004440: 286b 6669 656c 6429 2020 2320 6b66 6965  (kfield)  # kfie
+00004450: 6c64 206d 7573 7420 6265 206c 6173 740a  ld must be last.
+00004460: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+00004470: 6e73 7461 6e63 6528 6c61 6265 6c2c 2046  nstance(label, F
+00004480: 6965 6c64 293a 0a20 2020 2020 2020 2020  ield):.         
+00004490: 2020 2066 6965 6c64 6e61 6d65 7320 3d20     fieldnames = 
+000044a0: 5b6c 6162 656c 2e6e 616d 652c 206b 6669  [label.name, kfi
+000044b0: 656c 645d 2020 2320 6b66 6965 6c64 206d  eld]  # kfield m
+000044c0: 7573 7420 6265 206c 6173 740a 2020 2020  ust be last.    
+000044d0: 2020 2020 2020 2020 6c61 6265 6c20 3d20          label = 
+000044e0: 2225 2528 2573 2973 2220 2520 6c61 6265  "%%(%s)s" % labe
+000044f0: 6c2e 6e61 6d65 0a20 2020 2020 2020 2065  l.name.        e
+00004500: 6c69 6620 6361 6c6c 6162 6c65 286c 6162  lif callable(lab
+00004510: 656c 293a 0a20 2020 2020 2020 2020 2020  el):.           
+00004520: 2066 6965 6c64 6e61 6d65 7320 3d20 222a   fieldnames = "*
+00004530: 220a 2020 2020 2020 2020 656c 7365 3a0a  ".        else:.
+00004540: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00004550: 6520 4e6f 7449 6d70 6c65 6d65 6e74 6564  e NotImplemented
+00004560: 4572 726f 720a 0a20 2020 2020 2020 2073  Error..        s
+00004570: 656c 662e 6669 656c 646e 616d 6573 203d  elf.fieldnames =
+00004580: 2066 6965 6c64 6e61 6d65 7320 2023 2066   fieldnames  # f
+00004590: 6965 6c64 7320 7265 7175 6972 6573 2074  ields requires t
+000045a0: 6f20 6275 696c 6420 7468 6520 666f 726d  o build the form
+000045b0: 6174 7469 6e67 0a20 2020 2020 2020 2073  atting.        s
+000045c0: 656c 662e 6c61 6265 6c20 3d20 6c61 6265  elf.label = labe
+000045d0: 6c0a 2020 2020 2020 2020 7365 6c66 2e6b  l.        self.k
+000045e0: 7461 626c 6520 3d20 6b74 6162 6c65 0a20  table = ktable. 
+000045f0: 2020 2020 2020 2073 656c 662e 6b66 6965         self.kfie
+00004600: 6c64 203d 206b 6669 656c 640a 2020 2020  ld = kfield.    
+00004610: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+00004620: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
+00004630: 6573 7361 6765 0a20 2020 2020 2020 2073  essage.        s
+00004640: 656c 662e 7468 6573 6574 203d 204e 6f6e  elf.theset = Non
+00004650: 650a 2020 2020 2020 2020 7365 6c66 2e6f  e.        self.o
+00004660: 7264 6572 6279 203d 206f 7264 6572 6279  rderby = orderby
+00004670: 0a20 2020 2020 2020 2073 656c 662e 6772  .        self.gr
+00004680: 6f75 7062 7920 3d20 6772 6f75 7062 790a  oupby = groupby.
+00004690: 2020 2020 2020 2020 7365 6c66 2e64 6973          self.dis
+000046a0: 7469 6e63 7420 3d20 6469 7374 696e 6374  tinct = distinct
+000046b0: 0a20 2020 2020 2020 2073 656c 662e 6361  .        self.ca
+000046c0: 6368 6520 3d20 6361 6368 650a 2020 2020  che = cache.    
+000046d0: 2020 2020 7365 6c66 2e6d 756c 7469 706c      self.multipl
+000046e0: 6520 3d20 6d75 6c74 6970 6c65 0a20 2020  e = multiple.   
+000046f0: 2020 2020 2073 656c 662e 7a65 726f 203d       self.zero =
+00004700: 207a 6572 6f0a 2020 2020 2020 2020 7365   zero.        se
+00004710: 6c66 2e73 6f72 7420 3d20 736f 7274 0a20  lf.sort = sort. 
+00004720: 2020 2020 2020 2073 656c 662e 5f61 6e64         self._and
+00004730: 203d 205f 616e 640a 2020 2020 2020 2020   = _and.        
+00004740: 7365 6c66 2e6c 6566 7420 3d20 6c65 6674  self.left = left
+00004750: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
+00004760: 6c69 6d69 7465 7220 3d20 6465 6c69 6d69  limiter = delimi
+00004770: 7465 720a 2020 2020 2020 2020 7365 6c66  ter.        self
+00004780: 2e61 7574 6f5f 6164 6420 3d20 6175 746f  .auto_add = auto
+00004790: 5f61 6464 0a0a 2020 2020 6465 6620 7365  _add..    def se
+000047a0: 745f 7365 6c66 5f69 6428 7365 6c66 2c20  t_self_id(self, 
+000047b0: 6964 293a 0a20 2020 2020 2020 2069 6620  id):.        if 
+000047c0: 7365 6c66 2e5f 616e 643a 0a20 2020 2020  self._and:.     
+000047d0: 2020 2020 2020 2073 656c 662e 5f61 6e64         self._and
+000047e0: 2e72 6563 6f72 645f 6964 203d 2069 640a  .record_id = id.
+000047f0: 0a20 2020 2064 6566 2062 7569 6c64 5f73  .    def build_s
+00004800: 6574 2873 656c 6629 3a0a 2020 2020 2020  et(self):.      
+00004810: 2020 7461 626c 6520 3d20 7365 6c66 2e64    table = self.d
+00004820: 6273 6574 2e64 625b 7365 6c66 2e6b 7461  bset.db[self.kta
+00004830: 626c 655d 0a20 2020 2020 2020 2069 6620  ble].        if 
+00004840: 7365 6c66 2e66 6965 6c64 6e61 6d65 7320  self.fieldnames 
+00004850: 3d3d 2022 2a22 3a0a 2020 2020 2020 2020  == "*":.        
+00004860: 2020 2020 6669 656c 6473 203d 205b 6620      fields = [f 
+00004870: 666f 7220 6620 696e 2074 6162 6c65 5d0a  for f in table].
+00004880: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00004890: 2020 2020 2020 2020 2020 6669 656c 6473            fields
+000048a0: 203d 205b 7461 626c 655b 6b5d 2066 6f72   = [table[k] for
+000048b0: 206b 2069 6e20 7365 6c66 2e66 6965 6c64   k in self.field
+000048c0: 6e61 6d65 735d 0a20 2020 2020 2020 2069  names].        i
+000048d0: 676e 6f72 6520 3d20 2846 6965 6c64 5669  gnore = (FieldVi
+000048e0: 7274 7561 6c2c 2046 6965 6c64 4d65 7468  rtual, FieldMeth
+000048f0: 6f64 290a 2020 2020 2020 2020 6669 656c  od).        fiel
+00004900: 6473 203d 205b 6620 666f 7220 6620 696e  ds = [f for f in
+00004910: 2066 6965 6c64 7320 6966 206e 6f74 2069   fields if not i
+00004920: 7369 6e73 7461 6e63 6528 662c 2069 676e  sinstance(f, ign
+00004930: 6f72 6529 5d0a 2020 2020 2020 2020 6966  ore)].        if
+00004940: 2073 656c 662e 6462 7365 742e 6462 2e5f   self.dbset.db._
+00004950: 6462 6e61 6d65 2021 3d20 2267 6165 223a  dbname != "gae":
+00004960: 0a20 2020 2020 2020 2020 2020 206f 7264  .            ord
+00004970: 6572 6279 203d 2073 656c 662e 6f72 6465  erby = self.orde
+00004980: 7262 7920 6f72 2072 6564 7563 6528 6c61  rby or reduce(la
+00004990: 6d62 6461 2061 2c20 623a 2061 207c 2062  mbda a, b: a | b
+000049a0: 2c20 6669 656c 6473 290a 2020 2020 2020  , fields).      
+000049b0: 2020 2020 2020 6772 6f75 7062 7920 3d20        groupby = 
+000049c0: 7365 6c66 2e67 726f 7570 6279 0a20 2020  self.groupby.   
+000049d0: 2020 2020 2020 2020 2064 6973 7469 6e63           distinc
+000049e0: 7420 3d20 7365 6c66 2e64 6973 7469 6e63  t = self.distinc
+000049f0: 740a 2020 2020 2020 2020 2020 2020 6c65  t.            le
+00004a00: 6674 203d 2073 656c 662e 6c65 6674 0a20  ft = self.left. 
+00004a10: 2020 2020 2020 2020 2020 2064 6420 3d20             dd = 
+00004a20: 6469 6374 280a 2020 2020 2020 2020 2020  dict(.          
+00004a30: 2020 2020 2020 6f72 6465 7262 793d 6f72        orderby=or
+00004a40: 6465 7262 792c 0a20 2020 2020 2020 2020  derby,.         
+00004a50: 2020 2020 2020 2067 726f 7570 6279 3d67         groupby=g
+00004a60: 726f 7570 6279 2c0a 2020 2020 2020 2020  roupby,.        
+00004a70: 2020 2020 2020 2020 6469 7374 696e 6374          distinct
+00004a80: 3d64 6973 7469 6e63 742c 0a20 2020 2020  =distinct,.     
+00004a90: 2020 2020 2020 2020 2020 2063 6163 6865             cache
+00004aa0: 3d73 656c 662e 6361 6368 652c 0a20 2020  =self.cache,.   
+00004ab0: 2020 2020 2020 2020 2020 2020 2063 6163               cac
+00004ac0: 6865 6162 6c65 3d54 7275 652c 0a20 2020  heable=True,.   
+00004ad0: 2020 2020 2020 2020 2020 2020 206c 6566               lef
+00004ae0: 743d 6c65 6674 2c0a 2020 2020 2020 2020  t=left,.        
+00004af0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00004b00: 2020 7265 636f 7264 7320 3d20 7365 6c66    records = self
+00004b10: 2e64 6273 6574 2874 6162 6c65 292e 7365  .dbset(table).se
+00004b20: 6c65 6374 282a 6669 656c 6473 2c20 2a2a  lect(*fields, **
+00004b30: 6464 290a 2020 2020 2020 2020 656c 7365  dd).        else
+00004b40: 3a0a 2020 2020 2020 2020 2020 2020 6f72  :.            or
+00004b50: 6465 7262 7920 3d20 7365 6c66 2e6f 7264  derby = self.ord
+00004b60: 6572 6279 206f 7220 7265 6475 6365 280a  erby or reduce(.
+00004b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b80: 6c61 6d62 6461 2061 2c20 623a 2061 207c  lambda a, b: a |
+00004b90: 2062 2c20 2866 2066 6f72 2066 2069 6e20   b, (f for f in 
+00004ba0: 6669 656c 6473 2069 6620 6e6f 7420 662e  fields if not f.
+00004bb0: 6e61 6d65 203d 3d20 2269 6422 290a 2020  name == "id").  
+00004bc0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00004bd0: 2020 2020 2020 2020 6464 203d 2064 6963          dd = dic
+00004be0: 7428 6f72 6465 7262 793d 6f72 6465 7262  t(orderby=orderb
+00004bf0: 792c 2063 6163 6865 3d73 656c 662e 6361  y, cache=self.ca
+00004c00: 6368 652c 2063 6163 6865 6162 6c65 3d54  che, cacheable=T
+00004c10: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+00004c20: 2072 6563 6f72 6473 203d 2073 656c 662e   records = self.
+00004c30: 6462 7365 7428 7461 626c 6529 2e73 656c  dbset(table).sel
+00004c40: 6563 7428 7461 626c 652e 414c 4c2c 202a  ect(table.ALL, *
+00004c50: 2a64 6429 0a20 2020 2020 2020 2073 656c  *dd).        sel
+00004c60: 662e 7468 6573 6574 203d 205b 7374 7228  f.theset = [str(
+00004c70: 725b 7365 6c66 2e6b 6669 656c 645d 2920  r[self.kfield]) 
+00004c80: 666f 7220 7220 696e 2072 6563 6f72 6473  for r in records
+00004c90: 5d0a 2020 2020 2020 2020 6966 2069 7369  ].        if isi
+00004ca0: 6e73 7461 6e63 6528 7365 6c66 2e6c 6162  nstance(self.lab
+00004cb0: 656c 2c20 7374 7229 3a0a 2020 2020 2020  el, str):.      
+00004cc0: 2020 2020 2020 7365 6c66 2e6c 6162 656c        self.label
+00004cd0: 7320 3d20 5b73 656c 662e 6c61 6265 6c20  s = [self.label 
+00004ce0: 2520 7220 666f 7220 7220 696e 2072 6563  % r for r in rec
+00004cf0: 6f72 6473 5d0a 2020 2020 2020 2020 656c  ords].        el
+00004d00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00004d10: 7365 6c66 2e6c 6162 656c 7320 3d20 5b73  self.labels = [s
+00004d20: 656c 662e 6c61 6265 6c28 7229 2066 6f72  elf.label(r) for
+00004d30: 2072 2069 6e20 7265 636f 7264 735d 0a0a   r in records]..
+00004d40: 2020 2020 6465 6620 6f70 7469 6f6e 7328      def options(
+00004d50: 7365 6c66 2c20 7a65 726f 3d54 7275 6529  self, zero=True)
+00004d60: 3a0a 2020 2020 2020 2020 7365 6c66 2e62  :.        self.b
+00004d70: 7569 6c64 5f73 6574 2829 0a20 2020 2020  uild_set().     
+00004d80: 2020 2069 7465 6d73 203d 205b 286b 2c20     items = [(k, 
+00004d90: 7365 6c66 2e6c 6162 656c 735b 695d 2920  self.labels[i]) 
+00004da0: 666f 7220 2869 2c20 6b29 2069 6e20 656e  for (i, k) in en
+00004db0: 756d 6572 6174 6528 7365 6c66 2e74 6865  umerate(self.the
+00004dc0: 7365 7429 5d0a 2020 2020 2020 2020 6966  set)].        if
+00004dd0: 2073 656c 662e 736f 7274 3a0a 2020 2020   self.sort:.    
+00004de0: 2020 2020 2020 2020 6974 656d 732e 736f          items.so
+00004df0: 7274 286b 6579 3d6c 616d 6264 6120 6f3a  rt(key=lambda o:
+00004e00: 2073 7472 286f 5b31 5d29 2e75 7070 6572   str(o[1]).upper
+00004e10: 2829 290a 2020 2020 2020 2020 6966 207a  ()).        if z
+00004e20: 6572 6f20 616e 6420 7365 6c66 2e7a 6572  ero and self.zer
+00004e30: 6f20 6973 206e 6f74 204e 6f6e 6520 616e  o is not None an
+00004e40: 6420 6e6f 7420 7365 6c66 2e6d 756c 7469  d not self.multi
+00004e50: 706c 653a 0a20 2020 2020 2020 2020 2020  ple:.           
+00004e60: 2069 7465 6d73 2e69 6e73 6572 7428 302c   items.insert(0,
+00004e70: 2028 2222 2c20 7365 6c66 2e7a 6572 6f29   ("", self.zero)
+00004e80: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00004e90: 2069 7465 6d73 0a0a 2020 2020 6465 6620   items..    def 
+00004ea0: 6d61 7962 655f 6164 6428 7365 6c66 2c20  maybe_add(self, 
+00004eb0: 7461 626c 652c 2066 6965 6c64 6e61 6d65  table, fieldname
+00004ec0: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
+00004ed0: 2020 6420 3d20 7b66 6965 6c64 6e61 6d65    d = {fieldname
+00004ee0: 3a20 7661 6c75 657d 0a20 2020 2020 2020  : value}.       
+00004ef0: 2072 6563 6f72 6420 3d20 7461 626c 6528   record = table(
+00004f00: 2a2a 6429 0a20 2020 2020 2020 2069 6620  **d).        if 
+00004f10: 7265 636f 7264 3a0a 2020 2020 2020 2020  record:.        
+00004f20: 2020 2020 7265 7475 726e 2072 6563 6f72      return recor
+00004f30: 642e 6964 0a20 2020 2020 2020 2065 6c73  d.id.        els
+00004f40: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00004f50: 6574 7572 6e20 7461 626c 652e 696e 7365  eturn table.inse
+00004f60: 7274 282a 2a64 290a 0a20 2020 2064 6566  rt(**d)..    def
+00004f70: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
+00004f80: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
+00004f90: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00004fa0: 7461 626c 6520 3d20 7365 6c66 2e64 6273  table = self.dbs
+00004fb0: 6574 2e64 625b 7365 6c66 2e6b 7461 626c  et.db[self.ktabl
+00004fc0: 655d 0a20 2020 2020 2020 2066 6965 6c64  e].        field
+00004fd0: 203d 2074 6162 6c65 5b73 656c 662e 6b66   = table[self.kf
+00004fe0: 6965 6c64 5d0a 0a20 2020 2020 2020 2069  ield]..        i
+00004ff0: 6620 7365 6c66 2e6d 756c 7469 706c 653a  f self.multiple:
+00005000: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00005010: 7365 6c66 2e5f 616e 643a 0a20 2020 2020  self._and:.     
+00005020: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00005030: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
+00005040: 7272 6f72 0a20 2020 2020 2020 2020 2020  rror.           
+00005050: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
+00005060: 616c 7565 2c20 6c69 7374 293a 0a20 2020  alue, list):.   
+00005070: 2020 2020 2020 2020 2020 2020 2076 616c               val
+00005080: 7565 7320 3d20 7661 6c75 650a 2020 2020  ues = value.    
+00005090: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+000050a0: 662e 6465 6c69 6d69 7465 723a 0a20 2020  f.delimiter:.   
+000050b0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000050c0: 7565 7320 3d20 7661 6c75 652e 7370 6c69  ues = value.spli
+000050d0: 7428 7365 6c66 2e64 656c 696d 6974 6572  t(self.delimiter
+000050e0: 2920 2023 2062 6563 6175 7365 206f 6620  )  # because of 
+000050f0: 6175 746f 636f 6d70 6c65 7465 0a20 2020  autocomplete.   
+00005100: 2020 2020 2020 2020 2065 6c69 6620 7661           elif va
+00005110: 6c75 653a 0a20 2020 2020 2020 2020 2020  lue:.           
+00005120: 2020 2020 2076 616c 7565 7320 3d20 5b76       values = [v
+00005130: 616c 7565 5d0a 2020 2020 2020 2020 2020  alue].          
+00005140: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00005150: 2020 2020 2020 2020 7661 6c75 6573 203d          values =
+00005160: 205b 5d0a 0a20 2020 2020 2020 2020 2020   []..           
+00005170: 2069 6620 6669 656c 642e 7479 7065 2069   if field.type i
+00005180: 6e20 2822 6964 222c 2022 696e 7465 6765  n ("id", "intege
+00005190: 7222 293a 0a20 2020 2020 2020 2020 2020  r"):.           
+000051a0: 2020 2020 206e 6577 5f76 616c 7565 7320       new_values 
+000051b0: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
+000051c0: 2020 2020 2066 6f72 2076 616c 7565 2069       for value i
+000051d0: 6e20 7661 6c75 6573 3a0a 2020 2020 2020  n values:.      
+000051e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000051f0: 206e 6f74 2028 6973 696e 7374 616e 6365   not (isinstance
+00005200: 2876 616c 7565 2c20 696e 7465 6765 725f  (value, integer_
+00005210: 7479 7065 7329 206f 7220 7661 6c75 652e  types) or value.
+00005220: 6973 6469 6769 7428 2929 3a0a 2020 2020  isdigit()):.    
+00005230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005240: 2020 2020 6966 2073 656c 662e 6175 746f      if self.auto
+00005250: 5f61 6464 3a0a 2020 2020 2020 2020 2020  _add:.          
+00005260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005270: 2020 7661 6c75 6520 3d20 7374 7228 0a20    value = str(. 
+00005280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005290: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000052a0: 656c 662e 6d61 7962 655f 6164 6428 7461  elf.maybe_add(ta
+000052b0: 626c 652c 2073 656c 662e 6669 656c 646e  ble, self.fieldn
+000052c0: 616d 6573 5b30 5d2c 2076 616c 7565 290a  ames[0], value).
+000052d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000052e0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000052f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005300: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00005310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005320: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00005330: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
+00005340: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
+00005350: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+00005360: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00005370: 2020 2020 2020 206e 6577 5f76 616c 7565         new_value
+00005380: 732e 6170 7065 6e64 2876 616c 7565 290a  s.append(value).
+00005390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000053a0: 7661 6c75 6573 203d 206e 6577 5f76 616c  values = new_val
+000053b0: 7565 730a 0a20 2020 2020 2020 2020 2020  ues..           
+000053c0: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+000053d0: 2020 2020 2020 6973 696e 7374 616e 6365        isinstance
+000053e0: 2873 656c 662e 6d75 6c74 6970 6c65 2c20  (self.multiple, 
+000053f0: 2874 7570 6c65 2c20 6c69 7374 2929 0a20  (tuple, list)). 
+00005400: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00005410: 6e64 206e 6f74 2073 656c 662e 6d75 6c74  nd not self.mult
+00005420: 6970 6c65 5b30 5d20 3c3d 206c 656e 2876  iple[0] <= len(v
+00005430: 616c 7565 7329 203c 2073 656c 662e 6d75  alues) < self.mu
+00005440: 6c74 6970 6c65 5b31 5d0a 2020 2020 2020  ltiple[1].      
+00005450: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00005460: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00005470: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+00005480: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+00005490: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+000054a0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
+000054b0: 6966 2073 656c 662e 7468 6573 6574 3a0a  if self.theset:.
+000054c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000054d0: 6966 206e 6f74 205b 7620 666f 7220 7620  if not [v for v 
+000054e0: 696e 2076 616c 7565 7320 6966 2073 7472  in values if str
+000054f0: 2876 2920 6e6f 7420 696e 2073 656c 662e  (v) not in self.
+00005500: 7468 6573 6574 5d3a 0a20 2020 2020 2020  theset]:.       
+00005510: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00005520: 7572 6e20 7661 6c75 6573 0a20 2020 2020  urn values.     
+00005530: 2020 2020 2020 2065 6c73 653a 0a0a 2020         else:..  
+00005540: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00005550: 6620 636f 756e 7428 7661 6c75 6573 2c20  f count(values, 
+00005560: 733d 7365 6c66 2e64 6273 6574 2c20 663d  s=self.dbset, f=
+00005570: 6669 656c 6429 3a0a 2020 2020 2020 2020  field):.        
+00005580: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00005590: 726e 2073 2866 2e62 656c 6f6e 6773 286c  rn s(f.belongs(l
+000055a0: 6973 7428 6d61 7028 696e 742c 2076 616c  ist(map(int, val
+000055b0: 7565 7329 2929 292e 636f 756e 7428 290a  ues)))).count().
+000055c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000055d0: 2069 6620 7365 6c66 2e64 6273 6574 2e64   if self.dbset.d
+000055e0: 622e 5f61 6461 7074 6572 2e64 6265 6e67  b._adapter.dbeng
+000055f0: 696e 6520 3d3d 2022 676f 6f67 6c65 3a64  ine == "google:d
+00005600: 6174 6173 746f 7265 223a 0a20 2020 2020  atastore":.     
+00005610: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00005620: 616e 6765 5f69 6473 203d 2072 616e 6765  ange_ids = range
+00005630: 2830 2c20 6c65 6e28 7661 6c75 6573 292c  (0, len(values),
+00005640: 2033 3029 0a20 2020 2020 2020 2020 2020   30).           
+00005650: 2020 2020 2020 2020 2074 6f74 616c 203d           total =
+00005660: 2073 756d 2863 6f75 6e74 2876 616c 7565   sum(count(value
+00005670: 735b 6920 3a20 6920 2b20 3330 5d29 2066  s[i : i + 30]) f
+00005680: 6f72 2069 2069 6e20 7261 6e67 655f 6964  or i in range_id
+00005690: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+000056a0: 2020 2020 2020 2069 6620 746f 7461 6c20         if total 
+000056b0: 3d3d 206c 656e 2876 616c 7565 7329 3a0a  == len(values):.
+000056c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056d0: 2020 2020 2020 2020 7265 7475 726e 2076          return v
+000056e0: 616c 7565 730a 2020 2020 2020 2020 2020  alues.          
+000056f0: 2020 2020 2020 656c 6966 2063 6f75 6e74        elif count
+00005700: 2876 616c 7565 7329 203d 3d20 6c65 6e28  (values) == len(
+00005710: 7661 6c75 6573 293a 0a20 2020 2020 2020  values):.       
+00005720: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00005730: 7572 6e20 7661 6c75 6573 0a20 2020 2020  urn values.     
+00005740: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00005750: 2020 2020 2069 6620 6669 656c 642e 7479       if field.ty
+00005760: 7065 2069 6e20 2822 6964 222c 2022 696e  pe in ("id", "in
+00005770: 7465 6765 7222 293a 0a20 2020 2020 2020  teger"):.       
+00005780: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00005790: 7374 616e 6365 2876 616c 7565 2c20 696e  stance(value, in
+000057a0: 7465 6765 725f 7479 7065 7329 206f 7220  teger_types) or 
+000057b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000057c0: 2020 2020 2020 6973 696e 7374 616e 6365        isinstance
+000057d0: 2876 616c 7565 2c20 7374 7269 6e67 5f74  (value, string_t
+000057e0: 7970 6573 2920 616e 6420 7661 6c75 652e  ypes) and value.
+000057f0: 6973 6469 6769 7428 290a 2020 2020 2020  isdigit().      
+00005800: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+00005810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005820: 2076 616c 7565 203d 2069 6e74 2876 616c   value = int(val
+00005830: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00005840: 2020 2020 656c 6966 2073 656c 662e 6175      elif self.au
+00005850: 746f 5f61 6464 3a0a 2020 2020 2020 2020  to_add:.        
+00005860: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00005870: 6520 3d20 7365 6c66 2e6d 6179 6265 5f61  e = self.maybe_a
+00005880: 6464 2874 6162 6c65 2c20 7365 6c66 2e66  dd(table, self.f
+00005890: 6965 6c64 6e61 6d65 735b 305d 2c20 7661  ieldnames[0], va
+000058a0: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+000058b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000058c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000058d0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+000058e0: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+000058f0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00005900: 6d65 7373 6167 6529 290a 0a20 2020 2020  message))..     
+00005910: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005930: 2020 2020 7661 6c75 6520 3d20 696e 7428      value = int(
+00005940: 7661 6c75 6529 0a20 2020 2020 2020 2020  value).         
+00005950: 2020 2020 2020 2065 7863 6570 7420 5479         except Ty
+00005960: 7065 4572 726f 723a 0a20 2020 2020 2020  peError:.       
+00005970: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00005980: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00005990: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+000059a0: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+000059b0: 7373 6167 6529 290a 0a20 2020 2020 2020  ssage))..       
+000059c0: 2020 2020 2069 6620 7365 6c66 2e74 6865       if self.the
+000059d0: 7365 743a 0a20 2020 2020 2020 2020 2020  set:.           
+000059e0: 2020 2020 2069 6620 7374 7228 7661 6c75       if str(valu
+000059f0: 6529 2069 6e20 7365 6c66 2e74 6865 7365  e) in self.these
+00005a00: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00005a10: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00005a20: 616e 643a 0a20 2020 2020 2020 2020 2020  and:.           
+00005a30: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00005a40: 7572 6e20 7661 6c69 6461 746f 725f 6361  urn validator_ca
+00005a50: 6c6c 6572 2873 656c 662e 5f61 6e64 2c20  ller(self._and, 
+00005a60: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
+00005a70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00005a80: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+00005a90: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+00005aa0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00005ab0: 2020 2020 2069 6620 7365 6c66 2e64 6273       if self.dbs
+00005ac0: 6574 2866 6965 6c64 203d 3d20 7661 6c75  et(field == valu
+00005ad0: 6529 2e63 6f75 6e74 2829 3a0a 2020 2020  e).count():.    
+00005ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005af0: 6966 2073 656c 662e 5f61 6e64 3a0a 2020  if self._and:.  
+00005b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b10: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+00005b20: 6964 6174 6f72 5f63 616c 6c65 7228 7365  idator_caller(se
+00005b30: 6c66 2e5f 616e 642c 2076 616c 7565 2c20  lf._and, value, 
+00005b40: 7265 636f 7264 5f69 6429 0a20 2020 2020  record_id).     
+00005b50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00005b60: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
+00005b70: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00005b80: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+00005b90: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+00005ba0: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
+00005bb0: 0a63 6c61 7373 2049 535f 4e4f 545f 494e  .class IS_NOT_IN
+00005bc0: 5f44 4228 5661 6c69 6461 746f 7229 3a0a  _DB(Validator):.
+00005bd0: 2020 2020 2222 220a 2020 2020 4578 616d      """.    Exam
+00005be0: 706c 653a 0a20 2020 2020 2020 2055 7365  ple:.        Use
+00005bf0: 6420 6173 3a3a 0a0a 2020 2020 2020 2020  d as::..        
+00005c00: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+00005c10: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
+00005c20: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
+00005c30: 535f 4e4f 545f 494e 5f44 4228 6462 2c20  S_NOT_IN_DB(db, 
+00005c40: 6462 2e74 6162 6c65 2929 0a0a 2020 2020  db.table))..    
+00005c50: 6d61 6b65 7320 7468 6520 6669 656c 6420  makes the field 
+00005c60: 756e 6971 7565 0a20 2020 2022 2222 0a0a  unique.    """..
+00005c70: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00005c80: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00005c90: 2020 2020 2020 2020 6462 7365 742c 0a20          dbset,. 
+00005ca0: 2020 2020 2020 2066 6965 6c64 2c0a 2020         field,.  
+00005cb0: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
+00005cc0: 6167 653d 2256 616c 7565 2061 6c72 6561  age="Value alrea
+00005cd0: 6479 2069 6e20 6461 7461 6261 7365 206f  dy in database o
+00005ce0: 7220 656d 7074 7922 2c0a 2020 2020 2020  r empty",.      
+00005cf0: 2020 616c 6c6f 7765 645f 6f76 6572 7269    allowed_overri
+00005d00: 6465 3d5b 5d2c 0a20 2020 2020 2020 2069  de=[],.        i
+00005d10: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
+00005d20: 7465 7273 3d46 616c 7365 2c0a 2020 2020  ters=False,.    
+00005d30: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00005d40: 696e 7374 616e 6365 2866 6965 6c64 2c20  instance(field, 
+00005d50: 5461 626c 6529 3a0a 2020 2020 2020 2020  Table):.        
+00005d60: 2020 2020 6669 656c 6420 3d20 6669 656c      field = fiel
+00005d70: 642e 5f69 640a 0a20 2020 2020 2020 2069  d._id..        i
+00005d80: 6620 6861 7361 7474 7228 6462 7365 742c  f hasattr(dbset,
+00005d90: 2022 6465 6669 6e65 5f74 6162 6c65 2229   "define_table")
+00005da0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00005db0: 6c66 2e64 6273 6574 203d 2064 6273 6574  lf.dbset = dbset
+00005dc0: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
+00005dd0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00005de0: 662e 6462 7365 7420 3d20 6462 7365 740a  f.dbset = dbset.
+00005df0: 2020 2020 2020 2020 7365 6c66 2e66 6965          self.fie
+00005e00: 6c64 203d 2066 6965 6c64 0a20 2020 2020  ld = field.     
+00005e10: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
+00005e20: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
+00005e30: 7373 6167 650a 2020 2020 2020 2020 7365  ssage.        se
+00005e40: 6c66 2e72 6563 6f72 645f 6964 203d 2030  lf.record_id = 0
+00005e50: 0a20 2020 2020 2020 2073 656c 662e 616c  .        self.al
+00005e60: 6c6f 7765 645f 6f76 6572 7269 6465 203d  lowed_override =
+00005e70: 2061 6c6c 6f77 6564 5f6f 7665 7272 6964   allowed_overrid
+00005e80: 650a 2020 2020 2020 2020 7365 6c66 2e69  e.        self.i
+00005e90: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
+00005ea0: 7465 7273 203d 2069 676e 6f72 655f 636f  ters = ignore_co
+00005eb0: 6d6d 6f6e 5f66 696c 7465 7273 0a0a 2020  mmon_filters..  
+00005ec0: 2020 6465 6620 7365 745f 7365 6c66 5f69    def set_self_i
+00005ed0: 6428 7365 6c66 2c20 6964 293a 0a20 2020  d(self, id):.   
+00005ee0: 2020 2020 2023 2074 6869 7320 6973 206c       # this is l
+00005ef0: 6567 6163 7920 202d 2077 6562 3270 7920  egacy  - web2py 
+00005f00: 7573 6573 2062 7574 206e 6f62 6f64 7920  uses but nobody 
+00005f10: 656c 7365 2073 686f 756c 640a 2020 2020  else should.    
+00005f20: 2020 2020 2320 6974 2069 7320 6e6f 7420      # it is not 
+00005f30: 7361 6665 2069 6620 7468 6520 6f62 6a65  safe if the obje
+00005f40: 6374 2069 7320 7265 6379 636c 6564 0a20  ct is recycled. 
+00005f50: 2020 2020 2020 2073 656c 662e 7265 636f         self.reco
+00005f60: 7264 5f69 6420 3d20 6964 0a0a 2020 2020  rd_id = id..    
+00005f70: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+00005f80: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+00005f90: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00005fa0: 2020 2076 616c 7565 203d 2074 6f5f 6e61     value = to_na
+00005fb0: 7469 7665 2873 7472 2876 616c 7565 2929  tive(str(value))
+00005fc0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00005fd0: 7661 6c75 652e 7374 7269 7028 293a 0a20  value.strip():. 
+00005fe0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00005ff0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+00006000: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+00006010: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+00006020: 6167 6529 290a 2020 2020 2020 2020 6966  age)).        if
+00006030: 2076 616c 7565 2069 6e20 7365 6c66 2e61   value in self.a
+00006040: 6c6c 6f77 6564 5f6f 7665 7272 6964 653a  llowed_override:
+00006050: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00006060: 7572 6e20 7661 6c75 650a 2020 2020 2020  urn value.      
+00006070: 2020 2874 6162 6c65 6e61 6d65 2c20 6669    (tablename, fi
+00006080: 656c 646e 616d 6529 203d 2073 7472 2873  eldname) = str(s
+00006090: 656c 662e 6669 656c 6429 2e73 706c 6974  elf.field).split
+000060a0: 2822 2e22 290a 2020 2020 2020 2020 7461  (".").        ta
+000060b0: 626c 6520 3d20 7365 6c66 2e64 6273 6574  ble = self.dbset
+000060c0: 2e64 625b 7461 626c 656e 616d 655d 0a20  .db[tablename]. 
+000060d0: 2020 2020 2020 2066 6965 6c64 203d 2074         field = t
+000060e0: 6162 6c65 5b66 6965 6c64 6e61 6d65 5d0a  able[fieldname].
+000060f0: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
+00006100: 6669 656c 6420 3d3d 2076 616c 7565 0a0a  field == value..
+00006110: 2020 2020 2020 2020 2320 6d61 6b65 2073          # make s
+00006120: 7572 6520 6578 636c 7564 6520 7468 6520  ure exclude the 
+00006130: 7265 636f 7264 5f69 640a 2020 2020 2020  record_id.      
+00006140: 2020 6964 203d 2072 6563 6f72 645f 6964    id = record_id
+00006150: 206f 7220 7365 6c66 2e72 6563 6f72 645f   or self.record_
+00006160: 6964 0a20 2020 2020 2020 2069 6620 6973  id.        if is
+00006170: 696e 7374 616e 6365 2869 642c 2064 6963  instance(id, dic
+00006180: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00006190: 6964 203d 2074 6162 6c65 282a 2a69 6429  id = table(**id)
+000061a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+000061b0: 6964 2069 7320 4e6f 6e65 3a0a 2020 2020  id is None:.    
+000061c0: 2020 2020 2020 2020 7175 6572 7920 263d          query &=
+000061d0: 2074 6162 6c65 2e5f 6964 2021 3d20 6964   table._id != id
+000061e0: 0a20 2020 2020 2020 2073 7562 7365 7420  .        subset 
+000061f0: 3d20 7365 6c66 2e64 6273 6574 2871 7565  = self.dbset(que
+00006200: 7279 2c20 6967 6e6f 7265 5f63 6f6d 6d6f  ry, ignore_commo
+00006210: 6e5f 6669 6c74 6572 733d 7365 6c66 2e69  n_filters=self.i
+00006220: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
+00006230: 7465 7273 290a 2020 2020 2020 2020 6966  ters).        if
+00006240: 2073 7562 7365 742e 7365 6c65 6374 286c   subset.select(l
+00006250: 696d 6974 6279 3d28 302c 2031 2929 3a0a  imitby=(0, 1)):.
+00006260: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00006270: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
+00006280: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
+00006290: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
+000062a0: 7361 6765 2929 0a20 2020 2020 2020 2072  sage)).        r
+000062b0: 6574 7572 6e20 7661 6c75 650a 0a0a 6465  eturn value...de
+000062c0: 6620 7261 6e67 655f 6572 726f 725f 6d65  f range_error_me
+000062d0: 7373 6167 6528 6572 726f 725f 6d65 7373  ssage(error_mess
+000062e0: 6167 652c 2077 6861 745f 746f 5f65 6e74  age, what_to_ent
+000062f0: 6572 2c20 6d69 6e69 6d75 6d2c 206d 6178  er, minimum, max
+00006300: 696d 756d 293a 0a20 2020 2022 2222 6275  imum):.    """bu
+00006310: 696c 6420 7468 6520 6572 726f 7220 6d65  ild the error me
+00006320: 7373 6167 6520 666f 7220 7468 6520 6e75  ssage for the nu
+00006330: 6d62 6572 2072 616e 6765 2076 616c 6964  mber range valid
+00006340: 6174 6f72 7322 2222 0a20 2020 2069 6620  ators""".    if 
+00006350: 6572 726f 725f 6d65 7373 6167 6520 6973  error_message is
+00006360: 204e 6f6e 653a 0a20 2020 2020 2020 2065   None:.        e
+00006370: 7272 6f72 5f6d 6573 7361 6765 203d 2022  rror_message = "
+00006380: 456e 7465 7220 2220 2b20 7768 6174 5f74  Enter " + what_t
+00006390: 6f5f 656e 7465 720a 2020 2020 2020 2020  o_enter.        
+000063a0: 6966 206d 696e 696d 756d 2069 7320 6e6f  if minimum is no
+000063b0: 7420 4e6f 6e65 2061 6e64 206d 6178 696d  t None and maxim
+000063c0: 756d 2069 7320 6e6f 7420 4e6f 6e65 3a0a  um is not None:.
+000063d0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+000063e0: 725f 6d65 7373 6167 6520 2b3d 2022 2062  r_message += " b
+000063f0: 6574 7765 656e 2025 286d 696e 2967 2061  etween %(min)g a
+00006400: 6e64 2025 286d 6178 2967 220a 2020 2020  nd %(max)g".    
+00006410: 2020 2020 656c 6966 206d 696e 696d 756d      elif minimum
+00006420: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00006430: 2020 2020 2020 2020 2020 6572 726f 725f            error_
+00006440: 6d65 7373 6167 6520 2b3d 2022 2067 7265  message += " gre
+00006450: 6174 6572 2074 6861 6e20 6f72 2065 7175  ater than or equ
+00006460: 616c 2074 6f20 2528 6d69 6e29 6722 0a20  al to %(min)g". 
+00006470: 2020 2020 2020 2065 6c69 6620 6d61 7869         elif maxi
+00006480: 6d75 6d20 6973 206e 6f74 204e 6f6e 653a  mum is not None:
+00006490: 0a20 2020 2020 2020 2020 2020 2065 7272  .            err
+000064a0: 6f72 5f6d 6573 7361 6765 202b 3d20 2220  or_message += " 
+000064b0: 6c65 7373 2074 6861 6e20 6f72 2065 7175  less than or equ
+000064c0: 616c 2074 6f20 2528 6d61 7829 6722 0a20  al to %(max)g". 
+000064d0: 2020 2069 6620 7479 7065 286d 6178 696d     if type(maxim
+000064e0: 756d 2920 696e 2069 6e74 6567 6572 5f74  um) in integer_t
+000064f0: 7970 6573 3a0a 2020 2020 2020 2020 6d61  ypes:.        ma
+00006500: 7869 6d75 6d20 2d3d 2031 0a20 2020 2072  ximum -= 1.    r
+00006510: 6574 7572 6e20 7374 7228 7472 616e 736c  eturn str(transl
+00006520: 6174 6528 6572 726f 725f 6d65 7373 6167  ate(error_messag
+00006530: 6529 2920 2520 6469 6374 286d 696e 3d6d  e)) % dict(min=m
+00006540: 696e 696d 756d 2c20 6d61 783d 6d61 7869  inimum, max=maxi
+00006550: 6d75 6d29 0a0a 0a63 6c61 7373 2049 535f  mum)...class IS_
+00006560: 494e 545f 494e 5f52 414e 4745 2856 616c  INT_IN_RANGE(Val
+00006570: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
+00006580: 0a20 2020 2044 6574 6572 6d69 6e65 7320  .    Determines 
+00006590: 7468 6174 2074 6865 2061 7267 756d 656e  that the argumen
+000065a0: 7420 6973 2028 6f72 2063 616e 2062 6520  t is (or can be 
+000065b0: 7265 7072 6573 656e 7465 6420 6173 2920  represented as) 
+000065c0: 616e 2069 6e74 2c0a 2020 2020 616e 6420  an int,.    and 
+000065d0: 7468 6174 2069 7420 6661 6c6c 7320 7769  that it falls wi
+000065e0: 7468 696e 2074 6865 2073 7065 6369 6669  thin the specifi
+000065f0: 6564 2072 616e 6765 2e20 5468 6520 7261  ed range. The ra
+00006600: 6e67 6520 6973 2069 6e74 6572 7072 6574  nge is interpret
+00006610: 6564 0a20 2020 2069 6e20 7468 6520 5079  ed.    in the Py
+00006620: 7468 6f6e 6963 2077 6179 2c20 736f 2074  thonic way, so t
+00006630: 6865 2074 6573 7420 6973 3a20 6d69 6e20  he test is: min 
+00006640: 3c3d 2076 616c 7565 203c 206d 6178 2e0a  <= value < max..
+00006650: 0a20 2020 2054 6865 206d 696e 696d 756d  .    The minimum
+00006660: 2061 6e64 206d 6178 696d 756d 206c 696d   and maximum lim
+00006670: 6974 7320 6361 6e20 6265 204e 6f6e 652c  its can be None,
+00006680: 206d 6561 6e69 6e67 206e 6f20 6c6f 7765   meaning no lowe
+00006690: 7220 6f72 2075 7070 6572 206c 696d 6974  r or upper limit
+000066a0: 2c0a 2020 2020 7265 7370 6563 7469 7665  ,.    respective
+000066b0: 6c79 2e0a 0a20 2020 2045 7861 6d70 6c65  ly...    Example
+000066c0: 3a0a 2020 2020 2020 2020 5573 6564 2061  :.        Used a
+000066d0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+000066e0: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
+000066f0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
+00006700: 272c 2072 6571 7569 7265 733d 4953 5f49  ', requires=IS_I
+00006710: 4e54 5f49 4e5f 5241 4e47 4528 302c 2031  NT_IN_RANGE(0, 1
+00006720: 3029 290a 0a20 2020 2020 2020 2020 2020  0))..           
+00006730: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
+00006740: 414e 4745 2831 2c35 2928 2734 2729 0a20  ANGE(1,5)('4'). 
+00006750: 2020 2020 2020 2020 2020 2028 342c 204e             (4, N
+00006760: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00006770: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
+00006780: 414e 4745 2831 2c35 2928 3429 0a20 2020  ANGE(1,5)(4).   
+00006790: 2020 2020 2020 2020 2028 342c 204e 6f6e           (4, Non
+000067a0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+000067b0: 3e3e 2049 535f 494e 545f 494e 5f52 414e  >> IS_INT_IN_RAN
+000067c0: 4745 2831 2c35 2928 3129 0a20 2020 2020  GE(1,5)(1).     
+000067d0: 2020 2020 2020 2028 312c 204e 6f6e 6529         (1, None)
+000067e0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000067f0: 2049 535f 494e 545f 494e 5f52 414e 4745   IS_INT_IN_RANGE
+00006800: 2831 2c35 2928 3529 0a20 2020 2020 2020  (1,5)(5).       
+00006810: 2020 2020 2028 352c 2027 656e 7465 7220       (5, 'enter 
+00006820: 616e 2069 6e74 6567 6572 2062 6574 7765  an integer betwe
+00006830: 656e 2031 2061 6e64 2034 2729 0a20 2020  en 1 and 4').   
+00006840: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00006850: 494e 545f 494e 5f52 414e 4745 2831 2c35  INT_IN_RANGE(1,5
+00006860: 2928 3529 0a20 2020 2020 2020 2020 2020  )(5).           
+00006870: 2028 352c 2027 656e 7465 7220 616e 2069   (5, 'enter an i
+00006880: 6e74 6567 6572 2062 6574 7765 656e 2031  nteger between 1
+00006890: 2061 6e64 2034 2729 0a20 2020 2020 2020   and 4').       
+000068a0: 2020 2020 203e 3e3e 2049 535f 494e 545f       >>> IS_INT_
+000068b0: 494e 5f52 414e 4745 2831 2c35 2928 332e  IN_RANGE(1,5)(3.
+000068c0: 3529 0a20 2020 2020 2020 2020 2020 2028  5).            (
+000068d0: 332e 352c 2027 656e 7465 7220 616e 2069  3.5, 'enter an i
+000068e0: 6e74 6567 6572 2062 6574 7765 656e 2031  nteger between 1
+000068f0: 2061 6e64 2034 2729 0a20 2020 2020 2020   and 4').       
+00006900: 2020 2020 203e 3e3e 2049 535f 494e 545f       >>> IS_INT_
+00006910: 494e 5f52 414e 4745 284e 6f6e 652c 3529  IN_RANGE(None,5)
+00006920: 2827 3427 290a 2020 2020 2020 2020 2020  ('4').          
+00006930: 2020 2834 2c20 4e6f 6e65 290a 2020 2020    (4, None).    
+00006940: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00006950: 4e54 5f49 4e5f 5241 4e47 4528 4e6f 6e65  NT_IN_RANGE(None
+00006960: 2c35 2928 2736 2729 0a20 2020 2020 2020  ,5)('6').       
+00006970: 2020 2020 2028 2736 272c 2027 656e 7465       ('6', 'ente
+00006980: 7220 616e 2069 6e74 6567 6572 206c 6573  r an integer les
+00006990: 7320 7468 616e 206f 7220 6571 7561 6c20  s than or equal 
+000069a0: 746f 2034 2729 0a20 2020 2020 2020 2020  to 4').         
+000069b0: 2020 203e 3e3e 2049 535f 494e 545f 494e     >>> IS_INT_IN
+000069c0: 5f52 414e 4745 2831 2c4e 6f6e 6529 2827  _RANGE(1,None)('
+000069d0: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
+000069e0: 2834 2c20 4e6f 6e65 290a 2020 2020 2020  (4, None).      
+000069f0: 2020 2020 2020 3e3e 3e20 4953 5f49 4e54        >>> IS_INT
+00006a00: 5f49 4e5f 5241 4e47 4528 312c 4e6f 6e65  _IN_RANGE(1,None
+00006a10: 2928 2730 2729 0a20 2020 2020 2020 2020  )('0').         
+00006a20: 2020 2028 2730 272c 2027 656e 7465 7220     ('0', 'enter 
+00006a30: 616e 2069 6e74 6567 6572 2067 7265 6174  an integer great
+00006a40: 6572 2074 6861 6e20 6f72 2065 7175 616c  er than or equal
+00006a50: 2074 6f20 3127 290a 2020 2020 2020 2020   to 1').        
+00006a60: 2020 2020 3e3e 3e20 4953 5f49 4e54 5f49      >>> IS_INT_I
+00006a70: 4e5f 5241 4e47 4528 2928 3629 0a20 2020  N_RANGE()(6).   
+00006a80: 2020 2020 2020 2020 2028 362c 204e 6f6e           (6, Non
+00006a90: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00006aa0: 3e3e 2049 535f 494e 545f 494e 5f52 414e  >> IS_INT_IN_RAN
+00006ab0: 4745 2829 2827 6162 6327 290a 2020 2020  GE()('abc').    
+00006ac0: 2020 2020 2020 2020 2827 6162 6327 2c20          ('abc', 
+00006ad0: 2765 6e74 6572 2061 6e20 696e 7465 6765  'enter an intege
+00006ae0: 7227 290a 2020 2020 2222 220a 0a20 2020  r').    """..   
+00006af0: 2052 4547 4558 5f49 4e54 203d 2072 225e   REGEX_INT = r"^
+00006b00: 5b2b 2d5d 3f5c 642b 2422 0a0a 2020 2020  [+-]?\d+$"..    
+00006b10: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00006b20: 662c 206d 696e 696d 756d 3d4e 6f6e 652c  f, minimum=None,
+00006b30: 206d 6178 696d 756d 3d4e 6f6e 652c 2065   maximum=None, e
+00006b40: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
+00006b50: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
+00006b60: 2e6d 696e 696d 756d 203d 2069 6e74 286d  .minimum = int(m
+00006b70: 696e 696d 756d 2920 6966 206d 696e 696d  inimum) if minim
+00006b80: 756d 2069 7320 6e6f 7420 4e6f 6e65 2065  um is not None e
+00006b90: 6c73 6520 4e6f 6e65 0a20 2020 2020 2020  lse None.       
+00006ba0: 2073 656c 662e 6d61 7869 6d75 6d20 3d20   self.maximum = 
+00006bb0: 696e 7428 6d61 7869 6d75 6d29 2069 6620  int(maximum) if 
+00006bc0: 6d61 7869 6d75 6d20 6973 206e 6f74 204e  maximum is not N
+00006bd0: 6f6e 6520 656c 7365 204e 6f6e 650a 2020  one else None.  
+00006be0: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+00006bf0: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+00006c00: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
+00006c10: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+00006c20: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+00006c30: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+00006c40: 2069 6620 7265 2e6d 6174 6368 2873 656c   if re.match(sel
+00006c50: 662e 5245 4745 585f 494e 542c 2073 7472  f.REGEX_INT, str
+00006c60: 2876 616c 7565 2929 3a0a 2020 2020 2020  (value)):.      
+00006c70: 2020 2020 2020 7620 3d20 696e 7428 7661        v = int(va
+00006c80: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+00006c90: 2069 6620 2873 656c 662e 6d69 6e69 6d75   if (self.minimu
+00006ca0: 6d20 6973 204e 6f6e 6520 6f72 2076 203e  m is None or v >
+00006cb0: 3d20 7365 6c66 2e6d 696e 696d 756d 2920  = self.minimum) 
+00006cc0: 616e 6420 280a 2020 2020 2020 2020 2020  and (.          
+00006cd0: 2020 2020 2020 7365 6c66 2e6d 6178 696d        self.maxim
+00006ce0: 756d 2069 7320 4e6f 6e65 206f 7220 7620  um is None or v 
+00006cf0: 3c20 7365 6c66 2e6d 6178 696d 756d 0a20  < self.maximum. 
+00006d00: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+00006d10: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00006d20: 7475 726e 2076 0a20 2020 2020 2020 2072  turn v.        r
+00006d30: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00006d40: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+00006d50: 2020 7261 6e67 655f 6572 726f 725f 6d65    range_error_me
+00006d60: 7373 6167 6528 0a20 2020 2020 2020 2020  ssage(.         
+00006d70: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
+00006d80: 725f 6d65 7373 6167 652c 2022 616e 2069  r_message, "an i
+00006d90: 6e74 6567 6572 222c 2073 656c 662e 6d69  nteger", self.mi
+00006da0: 6e69 6d75 6d2c 2073 656c 662e 6d61 7869  nimum, self.maxi
+00006db0: 6d75 6d0a 2020 2020 2020 2020 2020 2020  mum.            
+00006dc0: 290a 2020 2020 2020 2020 290a 0a0a 6465  ).        )...de
+00006dd0: 6620 7374 7232 6465 6328 6e75 6d62 6572  f str2dec(number
+00006de0: 293a 0a20 2020 2073 203d 2073 7472 286e  ):.    s = str(n
+00006df0: 756d 6265 7229 0a20 2020 2069 6620 222e  umber).    if ".
+00006e00: 2220 6e6f 7420 696e 2073 3a0a 2020 2020  " not in s:.    
+00006e10: 2020 2020 7320 2b3d 2022 2e30 3022 0a20      s += ".00". 
+00006e20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00006e30: 2073 202b 3d20 2230 2220 2a20 2832 202d   s += "0" * (2 -
+00006e40: 206c 656e 2873 2e73 706c 6974 2822 2e22   len(s.split("."
+00006e50: 295b 315d 2929 0a20 2020 2072 6574 7572  )[1])).    retur
+00006e60: 6e20 730a 0a0a 636c 6173 7320 4953 5f46  n s...class IS_F
+00006e70: 4c4f 4154 5f49 4e5f 5241 4e47 4528 5661  LOAT_IN_RANGE(Va
+00006e80: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
+00006e90: 220a 2020 2020 4465 7465 726d 696e 6573  ".    Determines
+00006ea0: 2074 6861 7420 7468 6520 6172 6775 6d65   that the argume
+00006eb0: 6e74 2069 7320 286f 7220 6361 6e20 6265  nt is (or can be
+00006ec0: 2072 6570 7265 7365 6e74 6564 2061 7329   represented as)
+00006ed0: 2061 2066 6c6f 6174 2c0a 2020 2020 616e   a float,.    an
+00006ee0: 6420 7468 6174 2069 7420 6661 6c6c 7320  d that it falls 
+00006ef0: 7769 7468 696e 2074 6865 2073 7065 6369  within the speci
+00006f00: 6669 6564 2069 6e63 6c75 7369 7665 2072  fied inclusive r
+00006f10: 616e 6765 2e0a 2020 2020 5468 6520 636f  ange..    The co
+00006f20: 6d70 6172 6973 6f6e 2069 7320 6d61 6465  mparison is made
+00006f30: 2077 6974 6820 6e61 7469 7665 2061 7269   with native ari
+00006f40: 7468 6d65 7469 632e 0a0a 2020 2020 5468  thmetic...    Th
+00006f50: 6520 6d69 6e69 6d75 6d20 616e 6420 6d61  e minimum and ma
+00006f60: 7869 6d75 6d20 6c69 6d69 7473 2063 616e  ximum limits can
+00006f70: 2062 6520 4e6f 6e65 2c20 6d65 616e 696e   be None, meanin
+00006f80: 6720 6e6f 206c 6f77 6572 206f 7220 7570  g no lower or up
+00006f90: 7065 7220 6c69 6d69 742c 0a20 2020 2072  per limit,.    r
+00006fa0: 6573 7065 6374 6976 656c 792e 0a0a 2020  espectively...  
+00006fb0: 2020 4578 616d 706c 653a 0a20 2020 2020    Example:.     
+00006fc0: 2020 2055 7365 6420 6173 3a3a 0a0a 2020     Used as::..  
+00006fd0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
+00006fe0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
+00006ff0: 616d 653d 276e 616d 6527 2c20 7265 7175  ame='name', requ
+00007000: 6972 6573 3d49 535f 464c 4f41 545f 494e  ires=IS_FLOAT_IN
+00007010: 5f52 414e 4745 2830 2c20 3130 2929 0a0a  _RANGE(0, 10))..
+00007020: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00007030: 4953 5f46 4c4f 4154 5f49 4e5f 5241 4e47  IS_FLOAT_IN_RANG
+00007040: 4528 312c 3529 2827 3427 290a 2020 2020  E(1,5)('4').    
+00007050: 2020 2020 2020 2020 2834 2e30 2c20 4e6f          (4.0, No
+00007060: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+00007070: 3e3e 3e20 4953 5f46 4c4f 4154 5f49 4e5f  >>> IS_FLOAT_IN_
+00007080: 5241 4e47 4528 312c 3529 2834 290a 2020  RANGE(1,5)(4).  
+00007090: 2020 2020 2020 2020 2020 2834 2e30 2c20            (4.0, 
+000070a0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+000070b0: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
+000070c0: 4e5f 5241 4e47 4528 312c 3529 2831 290a  N_RANGE(1,5)(1).
+000070d0: 2020 2020 2020 2020 2020 2020 2831 2e30              (1.0
+000070e0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+000070f0: 2020 2020 3e3e 3e20 4953 5f46 4c4f 4154      >>> IS_FLOAT
+00007100: 5f49 4e5f 5241 4e47 4528 312c 3529 2835  _IN_RANGE(1,5)(5
+00007110: 2e32 3529 0a20 2020 2020 2020 2020 2020  .25).           
+00007120: 2028 352e 3235 2c20 2765 6e74 6572 2061   (5.25, 'enter a
+00007130: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
+00007140: 3120 616e 6420 3527 290a 2020 2020 2020  1 and 5').      
+00007150: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
+00007160: 4154 5f49 4e5f 5241 4e47 4528 312c 3529  AT_IN_RANGE(1,5)
+00007170: 2836 2e30 290a 2020 2020 2020 2020 2020  (6.0).          
+00007180: 2020 2836 2e30 2c20 2765 6e74 6572 2061    (6.0, 'enter a
+00007190: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
+000071a0: 3120 616e 6420 3527 290a 2020 2020 2020  1 and 5').      
+000071b0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
+000071c0: 4154 5f49 4e5f 5241 4e47 4528 312c 3529  AT_IN_RANGE(1,5)
+000071d0: 2833 2e35 290a 2020 2020 2020 2020 2020  (3.5).          
+000071e0: 2020 2833 2e35 2c20 4e6f 6e65 290a 2020    (3.5, None).  
+000071f0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007200: 5f46 4c4f 4154 5f49 4e5f 5241 4e47 4528  _FLOAT_IN_RANGE(
+00007210: 312c 4e6f 6e65 2928 332e 3529 0a20 2020  1,None)(3.5).   
+00007220: 2020 2020 2020 2020 2028 332e 352c 204e           (3.5, N
+00007230: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00007240: 203e 3e3e 2049 535f 464c 4f41 545f 494e   >>> IS_FLOAT_IN
+00007250: 5f52 414e 4745 284e 6f6e 652c 3529 2833  _RANGE(None,5)(3
+00007260: 2e35 290a 2020 2020 2020 2020 2020 2020  .5).            
+00007270: 2833 2e35 2c20 4e6f 6e65 290a 2020 2020  (3.5, None).    
+00007280: 2020 2020 2020 2020 3e3e 3e20 4953 5f46          >>> IS_F
+00007290: 4c4f 4154 5f49 4e5f 5241 4e47 4528 312c  LOAT_IN_RANGE(1,
+000072a0: 4e6f 6e65 2928 302e 3529 0a20 2020 2020  None)(0.5).     
+000072b0: 2020 2020 2020 2028 302e 352c 2027 656e         (0.5, 'en
+000072c0: 7465 7220 6120 6e75 6d62 6572 2067 7265  ter a number gre
+000072d0: 6174 6572 2074 6861 6e20 6f72 2065 7175  ater than or equ
+000072e0: 616c 2074 6f20 3127 290a 2020 2020 2020  al to 1').      
+000072f0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
+00007300: 4154 5f49 4e5f 5241 4e47 4528 4e6f 6e65  AT_IN_RANGE(None
+00007310: 2c35 2928 362e 3529 0a20 2020 2020 2020  ,5)(6.5).       
+00007320: 2020 2020 2028 362e 352c 2027 656e 7465       (6.5, 'ente
+00007330: 7220 6120 6e75 6d62 6572 206c 6573 7320  r a number less 
+00007340: 7468 616e 206f 7220 6571 7561 6c20 746f  than or equal to
+00007350: 2035 2729 0a20 2020 2020 2020 2020 2020   5').           
+00007360: 203e 3e3e 2049 535f 464c 4f41 545f 494e   >>> IS_FLOAT_IN
+00007370: 5f52 414e 4745 2829 2836 2e35 290a 2020  _RANGE()(6.5).  
+00007380: 2020 2020 2020 2020 2020 2836 2e35 2c20            (6.5, 
+00007390: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+000073a0: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
+000073b0: 4e5f 5241 4e47 4528 2928 2761 6263 2729  N_RANGE()('abc')
+000073c0: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
+000073d0: 6263 272c 2027 656e 7465 7220 6120 6e75  bc', 'enter a nu
+000073e0: 6d62 6572 2729 0a20 2020 2022 2222 0a0a  mber').    """..
+000073f0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00007400: 2873 656c 662c 206d 696e 696d 756d 3d4e  (self, minimum=N
+00007410: 6f6e 652c 206d 6178 696d 756d 3d4e 6f6e  one, maximum=Non
+00007420: 652c 2065 7272 6f72 5f6d 6573 7361 6765  e, error_message
+00007430: 3d4e 6f6e 652c 2064 6f74 3d22 2e22 293a  =None, dot="."):
+00007440: 0a20 2020 2020 2020 2073 656c 662e 6d69  .        self.mi
+00007450: 6e69 6d75 6d20 3d20 666c 6f61 7428 6d69  nimum = float(mi
+00007460: 6e69 6d75 6d29 2069 6620 6d69 6e69 6d75  nimum) if minimu
+00007470: 6d20 6973 206e 6f74 204e 6f6e 6520 656c  m is not None el
+00007480: 7365 204e 6f6e 650a 2020 2020 2020 2020  se None.        
+00007490: 7365 6c66 2e6d 6178 696d 756d 203d 2066  self.maximum = f
+000074a0: 6c6f 6174 286d 6178 696d 756d 2920 6966  loat(maximum) if
+000074b0: 206d 6178 696d 756d 2069 7320 6e6f 7420   maximum is not 
+000074c0: 4e6f 6e65 2065 6c73 6520 4e6f 6e65 0a20  None else None. 
+000074d0: 2020 2020 2020 2073 656c 662e 646f 7420         self.dot 
+000074e0: 3d20 7374 7228 646f 7429 0a20 2020 2020  = str(dot).     
+000074f0: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
+00007500: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
+00007510: 7373 6167 650a 0a20 2020 2064 6566 2076  ssage..    def v
+00007520: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
+00007530: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
+00007540: 6f6e 6529 3a0a 2020 2020 2020 2020 7472  one):.        tr
+00007550: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+00007560: 6620 7365 6c66 2e64 6f74 203d 3d20 222e  f self.dot == ".
+00007570: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+00007580: 2020 2076 203d 2066 6c6f 6174 2876 616c     v = float(val
+00007590: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+000075a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000075b0: 2020 2020 2020 7620 3d20 666c 6f61 7428        v = float(
+000075c0: 7374 7228 7661 6c75 6529 2e72 6570 6c61  str(value).repla
+000075d0: 6365 2873 656c 662e 646f 742c 2022 2e22  ce(self.dot, "."
+000075e0: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
+000075f0: 6620 2873 656c 662e 6d69 6e69 6d75 6d20  f (self.minimum 
+00007600: 6973 204e 6f6e 6520 6f72 2076 203e 3d20  is None or v >= 
+00007610: 7365 6c66 2e6d 696e 696d 756d 2920 616e  self.minimum) an
+00007620: 6420 280a 2020 2020 2020 2020 2020 2020  d (.            
+00007630: 2020 2020 7365 6c66 2e6d 6178 696d 756d      self.maximum
+00007640: 2069 7320 4e6f 6e65 206f 7220 7620 3c3d   is None or v <=
+00007650: 2073 656c 662e 6d61 7869 6d75 6d0a 2020   self.maximum.  
+00007660: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+00007670: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00007680: 7572 6e20 760a 2020 2020 2020 2020 6578  urn v.        ex
+00007690: 6365 7074 2028 5661 6c75 6545 7272 6f72  cept (ValueError
+000076a0: 2c20 5479 7065 4572 726f 7229 3a0a 2020  , TypeError):.  
+000076b0: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
+000076c0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+000076d0: 6964 6174 696f 6e45 7272 6f72 280a 2020  idationError(.  
+000076e0: 2020 2020 2020 2020 2020 7261 6e67 655f            range_
+000076f0: 6572 726f 725f 6d65 7373 6167 6528 0a20  error_message(. 
+00007700: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00007710: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+00007720: 652c 2022 6120 6e75 6d62 6572 222c 2073  e, "a number", s
+00007730: 656c 662e 6d69 6e69 6d75 6d2c 2073 656c  elf.minimum, sel
+00007740: 662e 6d61 7869 6d75 6d0a 2020 2020 2020  f.maximum.      
+00007750: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00007760: 290a 0a20 2020 2064 6566 2066 6f72 6d61  )..    def forma
+00007770: 7474 6572 2873 656c 662c 2076 616c 7565  tter(self, value
+00007780: 293a 0a20 2020 2020 2020 2069 6620 7661  ):.        if va
+00007790: 6c75 6520 6973 204e 6f6e 653a 0a20 2020  lue is None:.   
+000077a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000077b0: 4e6f 6e65 0a20 2020 2020 2020 2072 6574  None.        ret
+000077c0: 7572 6e20 7374 7232 6465 6328 7661 6c75  urn str2dec(valu
+000077d0: 6529 2e72 6570 6c61 6365 2822 2e22 2c20  e).replace(".", 
+000077e0: 7365 6c66 2e64 6f74 290a 0a0a 636c 6173  self.dot)...clas
+000077f0: 7320 4953 5f44 4543 494d 414c 5f49 4e5f  s IS_DECIMAL_IN_
+00007800: 5241 4e47 4528 5661 6c69 6461 746f 7229  RANGE(Validator)
+00007810: 3a0a 2020 2020 2222 220a 2020 2020 4465  :.    """.    De
+00007820: 7465 726d 696e 6573 2074 6861 7420 7468  termines that th
+00007830: 6520 6172 6775 6d65 6e74 2069 7320 286f  e argument is (o
+00007840: 7220 6361 6e20 6265 2072 6570 7265 7365  r can be represe
+00007850: 6e74 6564 2061 7329 2061 2050 7974 686f  nted as) a Pytho
+00007860: 6e20 4465 6369 6d61 6c2c 0a20 2020 2061  n Decimal,.    a
+00007870: 6e64 2074 6861 7420 6974 2066 616c 6c73  nd that it falls
+00007880: 2077 6974 6869 6e20 7468 6520 7370 6563   within the spec
+00007890: 6966 6965 6420 696e 636c 7573 6976 6520  ified inclusive 
+000078a0: 7261 6e67 652e 0a20 2020 2054 6865 2063  range..    The c
+000078b0: 6f6d 7061 7269 736f 6e20 6973 206d 6164  omparison is mad
+000078c0: 6520 7769 7468 2050 7974 686f 6e20 4465  e with Python De
+000078d0: 6369 6d61 6c20 6172 6974 686d 6574 6963  cimal arithmetic
+000078e0: 2e0a 0a20 2020 2054 6865 206d 696e 696d  ...    The minim
+000078f0: 756d 2061 6e64 206d 6178 696d 756d 206c  um and maximum l
+00007900: 696d 6974 7320 6361 6e20 6265 204e 6f6e  imits can be Non
+00007910: 652c 206d 6561 6e69 6e67 206e 6f20 6c6f  e, meaning no lo
+00007920: 7765 7220 6f72 2075 7070 6572 206c 696d  wer or upper lim
+00007930: 6974 2c0a 2020 2020 7265 7370 6563 7469  it,.    respecti
+00007940: 7665 6c79 2e0a 0a20 2020 2045 7861 6d70  vely...    Examp
+00007950: 6c65 3a0a 2020 2020 2020 2020 5573 6564  le:.        Used
+00007960: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
+00007970: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+00007980: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
+00007990: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+000079a0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+000079b0: 4528 302c 2031 3029 290a 0a20 2020 2020  E(0, 10))..     
+000079c0: 2020 2020 2020 203e 3e3e 2049 535f 4445         >>> IS_DE
+000079d0: 4349 4d41 4c5f 494e 5f52 414e 4745 2831  CIMAL_IN_RANGE(1
+000079e0: 2c35 2928 2734 2729 0a20 2020 2020 2020  ,5)('4').       
+000079f0: 2020 2020 2028 4465 6369 6d61 6c28 2734       (Decimal('4
+00007a00: 2729 2c20 4e6f 6e65 290a 2020 2020 2020  '), None).      
+00007a10: 2020 2020 2020 3e3e 3e20 4953 5f44 4543        >>> IS_DEC
+00007a20: 494d 414c 5f49 4e5f 5241 4e47 4528 312c  IMAL_IN_RANGE(1,
+00007a30: 3529 2834 290a 2020 2020 2020 2020 2020  5)(4).          
+00007a40: 2020 2844 6563 696d 616c 2827 3427 292c    (Decimal('4'),
+00007a50: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00007a60: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
+00007a70: 4c5f 494e 5f52 414e 4745 2831 2c35 2928  L_IN_RANGE(1,5)(
+00007a80: 3129 0a20 2020 2020 2020 2020 2020 2028  1).            (
+00007a90: 4465 6369 6d61 6c28 2731 2729 2c20 4e6f  Decimal('1'), No
+00007aa0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+00007ab0: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
+00007ac0: 4e5f 5241 4e47 4528 312c 3529 2835 2e32  N_RANGE(1,5)(5.2
+00007ad0: 3529 0a20 2020 2020 2020 2020 2020 2028  5).            (
+00007ae0: 352e 3235 2c20 2765 6e74 6572 2061 206e  5.25, 'enter a n
+00007af0: 756d 6265 7220 6265 7477 6565 6e20 3120  umber between 1 
+00007b00: 616e 6420 3527 290a 2020 2020 2020 2020  and 5').        
+00007b10: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00007b20: 414c 5f49 4e5f 5241 4e47 4528 352e 3235  AL_IN_RANGE(5.25
+00007b30: 2c36 2928 352e 3235 290a 2020 2020 2020  ,6)(5.25).      
+00007b40: 2020 2020 2020 2844 6563 696d 616c 2827        (Decimal('
+00007b50: 352e 3235 2729 2c20 4e6f 6e65 290a 2020  5.25'), None).  
+00007b60: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007b70: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+00007b80: 4528 352e 3235 2c36 2928 2735 2e32 3527  E(5.25,6)('5.25'
+00007b90: 290a 2020 2020 2020 2020 2020 2020 2844  ).            (D
+00007ba0: 6563 696d 616c 2827 352e 3235 2729 2c20  ecimal('5.25'), 
+00007bb0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+00007bc0: 2020 3e3e 3e20 4953 5f44 4543 494d 414c    >>> IS_DECIMAL
+00007bd0: 5f49 4e5f 5241 4e47 4528 312c 3529 2836  _IN_RANGE(1,5)(6
+00007be0: 2e30 290a 2020 2020 2020 2020 2020 2020  .0).            
+00007bf0: 2836 2e30 2c20 2765 6e74 6572 2061 206e  (6.0, 'enter a n
+00007c00: 756d 6265 7220 6265 7477 6565 6e20 3120  umber between 1 
+00007c10: 616e 6420 3527 290a 2020 2020 2020 2020  and 5').        
+00007c20: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00007c30: 414c 5f49 4e5f 5241 4e47 4528 312c 3529  AL_IN_RANGE(1,5)
+00007c40: 2833 2e35 290a 2020 2020 2020 2020 2020  (3.5).          
+00007c50: 2020 2844 6563 696d 616c 2827 332e 3527    (Decimal('3.5'
+00007c60: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
+00007c70: 2020 2020 203e 3e3e 2049 535f 4445 4349       >>> IS_DECI
+00007c80: 4d41 4c5f 494e 5f52 414e 4745 2831 2e35  MAL_IN_RANGE(1.5
+00007c90: 2c35 2e35 2928 332e 3529 0a20 2020 2020  ,5.5)(3.5).     
+00007ca0: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
+00007cb0: 2733 2e35 2729 2c20 4e6f 6e65 290a 2020  '3.5'), None).  
+00007cc0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007cd0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+00007ce0: 4528 312e 352c 352e 3529 2836 2e35 290a  E(1.5,5.5)(6.5).
+00007cf0: 2020 2020 2020 2020 2020 2020 2836 2e35              (6.5
+00007d00: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
+00007d10: 7220 6265 7477 6565 6e20 312e 3520 616e  r between 1.5 an
+00007d20: 6420 352e 3527 290a 2020 2020 2020 2020  d 5.5').        
+00007d30: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00007d40: 414c 5f49 4e5f 5241 4e47 4528 312e 352c  AL_IN_RANGE(1.5,
+00007d50: 4e6f 6e65 2928 362e 3529 0a20 2020 2020  None)(6.5).     
+00007d60: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
+00007d70: 2736 2e35 2729 2c20 4e6f 6e65 290a 2020  '6.5'), None).  
+00007d80: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007d90: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+00007da0: 4528 312e 352c 4e6f 6e65 2928 302e 3529  E(1.5,None)(0.5)
+00007db0: 0a20 2020 2020 2020 2020 2020 2028 302e  .            (0.
+00007dc0: 352c 2027 656e 7465 7220 6120 6e75 6d62  5, 'enter a numb
+00007dd0: 6572 2067 7265 6174 6572 2074 6861 6e20  er greater than 
+00007de0: 6f72 2065 7175 616c 2074 6f20 312e 3527  or equal to 1.5'
+00007df0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00007e00: 3e20 4953 5f44 4543 494d 414c 5f49 4e5f  > IS_DECIMAL_IN_
+00007e10: 5241 4e47 4528 4e6f 6e65 2c35 2e35 2928  RANGE(None,5.5)(
+00007e20: 342e 3529 0a20 2020 2020 2020 2020 2020  4.5).           
+00007e30: 2028 4465 6369 6d61 6c28 2734 2e35 2729   (Decimal('4.5')
+00007e40: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00007e50: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00007e60: 414c 5f49 4e5f 5241 4e47 4528 4e6f 6e65  AL_IN_RANGE(None
+00007e70: 2c35 2e35 2928 362e 3529 0a20 2020 2020  ,5.5)(6.5).     
+00007e80: 2020 2020 2020 2028 362e 352c 2027 656e         (6.5, 'en
+00007e90: 7465 7220 6120 6e75 6d62 6572 206c 6573  ter a number les
+00007ea0: 7320 7468 616e 206f 7220 6571 7561 6c20  s than or equal 
+00007eb0: 746f 2035 2e35 2729 0a20 2020 2020 2020  to 5.5').       
+00007ec0: 2020 2020 203e 3e3e 2049 535f 4445 4349       >>> IS_DECI
+00007ed0: 4d41 4c5f 494e 5f52 414e 4745 2829 2836  MAL_IN_RANGE()(6
+00007ee0: 2e35 290a 2020 2020 2020 2020 2020 2020  .5).            
+00007ef0: 2844 6563 696d 616c 2827 362e 3527 292c  (Decimal('6.5'),
+00007f00: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00007f10: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
+00007f20: 4c5f 494e 5f52 414e 4745 2830 2c39 3929  L_IN_RANGE(0,99)
+00007f30: 2831 3233 2e31 3233 290a 2020 2020 2020  (123.123).      
+00007f40: 2020 2020 2020 2831 3233 2e31 3233 2c20        (123.123, 
+00007f50: 2765 6e74 6572 2061 206e 756d 6265 7220  'enter a number 
+00007f60: 6265 7477 6565 6e20 3020 616e 6420 3939  between 0 and 99
+00007f70: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+00007f80: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
+00007f90: 5f52 414e 4745 2830 2c39 3929 2827 3132  _RANGE(0,99)('12
+00007fa0: 332e 3132 3327 290a 2020 2020 2020 2020  3.123').        
+00007fb0: 2020 2020 2827 3132 332e 3132 3327 2c20      ('123.123', 
+00007fc0: 2765 6e74 6572 2061 206e 756d 6265 7220  'enter a number 
+00007fd0: 6265 7477 6565 6e20 3020 616e 6420 3939  between 0 and 99
+00007fe0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+00007ff0: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
+00008000: 5f52 414e 4745 2830 2c39 3929 2827 3132  _RANGE(0,99)('12
+00008010: 2e33 3427 290a 2020 2020 2020 2020 2020  .34').          
+00008020: 2020 2844 6563 696d 616c 2827 3132 2e33    (Decimal('12.3
+00008030: 3427 292c 204e 6f6e 6529 0a20 2020 2020  4'), None).     
+00008040: 2020 2020 2020 203e 3e3e 2049 535f 4445         >>> IS_DE
+00008050: 4349 4d41 4c5f 494e 5f52 414e 4745 2829  CIMAL_IN_RANGE()
+00008060: 2827 6162 6327 290a 2020 2020 2020 2020  ('abc').        
+00008070: 2020 2020 2827 6162 6327 2c20 2765 6e74      ('abc', 'ent
+00008080: 6572 2061 206e 756d 6265 7227 290a 2020  er a number').  
+00008090: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
+000080a0: 5f69 6e69 745f 5f28 7365 6c66 2c20 6d69  _init__(self, mi
+000080b0: 6e69 6d75 6d3d 4e6f 6e65 2c20 6d61 7869  nimum=None, maxi
+000080c0: 6d75 6d3d 4e6f 6e65 2c20 6572 726f 725f  mum=None, error_
+000080d0: 6d65 7373 6167 653d 4e6f 6e65 2c20 646f  message=None, do
+000080e0: 743d 222e 2229 3a0a 2020 2020 2020 2020  t="."):.        
+000080f0: 7365 6c66 2e6d 696e 696d 756d 203d 2064  self.minimum = d
+00008100: 6563 696d 616c 2e44 6563 696d 616c 2873  ecimal.Decimal(s
+00008110: 7472 286d 696e 696d 756d 2929 2069 6620  tr(minimum)) if 
+00008120: 6d69 6e69 6d75 6d20 6973 206e 6f74 204e  minimum is not N
+00008130: 6f6e 6520 656c 7365 204e 6f6e 650a 2020  one else None.  
+00008140: 2020 2020 2020 7365 6c66 2e6d 6178 696d        self.maxim
+00008150: 756d 203d 2064 6563 696d 616c 2e44 6563  um = decimal.Dec
+00008160: 696d 616c 2873 7472 286d 6178 696d 756d  imal(str(maximum
+00008170: 2929 2069 6620 6d61 7869 6d75 6d20 6973  )) if maximum is
+00008180: 206e 6f74 204e 6f6e 6520 656c 7365 204e   not None else N
+00008190: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+000081a0: 2e64 6f74 203d 2073 7472 2864 6f74 290a  .dot = str(dot).
 000081b0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-000081c0: 6f72 5f6d 6573 7361 6765 2c20 2261 206e  or_message, "a n
-000081d0: 756d 6265 7222 2c20 7365 6c66 2e6d 696e  umber", self.min
-000081e0: 696d 756d 2c20 7365 6c66 2e6d 6178 696d  imum, self.maxim
-000081f0: 756d 0a20 2020 2020 2020 2020 2020 2029  um.            )
-00008200: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00008210: 6465 6620 666f 726d 6174 7465 7228 7365  def formatter(se
-00008220: 6c66 2c20 7661 6c75 6529 3a0a 2020 2020  lf, value):.    
-00008230: 2020 2020 6966 2076 616c 7565 2069 7320      if value is 
-00008240: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00008250: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
-00008260: 2020 2020 2020 7265 7475 726e 2073 7472        return str
-00008270: 3264 6563 2876 616c 7565 292e 7265 706c  2dec(value).repl
-00008280: 6163 6528 222e 222c 2073 656c 662e 646f  ace(".", self.do
-00008290: 7429 0a0a 0a64 6566 2069 735f 656d 7074  t)...def is_empt
-000082a0: 7928 7661 6c75 652c 2065 6d70 7479 5f72  y(value, empty_r
-000082b0: 6567 6578 3d4e 6f6e 6529 3a0a 2020 2020  egex=None):.    
-000082c0: 5f76 616c 7565 203d 2076 616c 7565 0a20  _value = value. 
-000082d0: 2020 2022 2222 7465 7374 2065 6d70 7479     """test empty
-000082e0: 2066 6965 6c64 2222 220a 2020 2020 6966   field""".    if
-000082f0: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
-00008300: 652c 2028 7374 722c 2075 6e69 636f 6465  e, (str, unicode
-00008310: 5429 293a 0a20 2020 2020 2020 2076 616c  T)):.        val
-00008320: 7565 203d 2076 616c 7565 2e73 7472 6970  ue = value.strip
-00008330: 2829 0a20 2020 2020 2020 2069 6620 656d  ().        if em
-00008340: 7074 795f 7265 6765 7820 6973 206e 6f74  pty_regex is not
-00008350: 204e 6f6e 6520 616e 6420 656d 7074 795f   None and empty_
-00008360: 7265 6765 782e 6d61 7463 6828 7661 6c75  regex.match(valu
-00008370: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00008380: 7661 6c75 6520 3d20 2222 0a20 2020 2069  value = "".    i
-00008390: 6620 7661 6c75 6520 6973 204e 6f6e 6520  f value is None 
-000083a0: 6f72 2076 616c 7565 203d 3d20 2222 206f  or value == "" o
-000083b0: 7220 7661 6c75 6520 3d3d 2062 2222 206f  r value == b"" o
-000083c0: 7220 7661 6c75 6520 3d3d 205b 5d3a 0a20  r value == []:. 
-000083d0: 2020 2020 2020 2072 6574 7572 6e20 285f         return (_
-000083e0: 7661 6c75 652c 2054 7275 6529 0a20 2020  value, True).   
-000083f0: 2072 6574 7572 6e20 285f 7661 6c75 652c   return (_value,
-00008400: 2046 616c 7365 290a 0a0a 636c 6173 7320   False)...class 
-00008410: 4953 5f4e 4f54 5f45 4d50 5459 2856 616c  IS_NOT_EMPTY(Val
-00008420: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
-00008430: 0a20 2020 2045 7861 6d70 6c65 3a0a 2020  .    Example:.  
-00008440: 2020 2020 2020 5573 6564 2061 733a 3a0a        Used as::.
-00008450: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-00008460: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-00008470: 205f 6e61 6d65 3d27 6e61 6d65 272c 2072   _name='name', r
-00008480: 6571 7569 7265 733d 4953 5f4e 4f54 5f45  equires=IS_NOT_E
-00008490: 4d50 5459 2829 290a 0a20 2020 2020 2020  MPTY())..       
-000084a0: 2020 2020 203e 3e3e 2049 535f 4e4f 545f       >>> IS_NOT_
-000084b0: 454d 5054 5928 2928 3129 0a20 2020 2020  EMPTY()(1).     
-000084c0: 2020 2020 2020 2028 312c 204e 6f6e 6529         (1, None)
-000084d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000084e0: 2049 535f 4e4f 545f 454d 5054 5928 2928   IS_NOT_EMPTY()(
-000084f0: 3029 0a20 2020 2020 2020 2020 2020 2028  0).            (
-00008500: 302c 204e 6f6e 6529 0a20 2020 2020 2020  0, None).       
-00008510: 2020 2020 203e 3e3e 2049 535f 4e4f 545f       >>> IS_NOT_
-00008520: 454d 5054 5928 2928 2778 2729 0a20 2020  EMPTY()('x').   
-00008530: 2020 2020 2020 2020 2028 2778 272c 204e           ('x', N
-00008540: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00008550: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
-00008560: 5928 2928 2720 7820 2729 0a20 2020 2020  Y()(' x ').     
-00008570: 2020 2020 2020 2028 2778 272c 204e 6f6e         ('x', Non
-00008580: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00008590: 3e3e 2049 535f 4e4f 545f 454d 5054 5928  >> IS_NOT_EMPTY(
-000085a0: 2928 4e6f 6e65 290a 2020 2020 2020 2020  )(None).        
-000085b0: 2020 2020 284e 6f6e 652c 2027 656e 7465      (None, 'ente
-000085c0: 7220 6120 7661 6c75 6527 290a 2020 2020  r a value').    
-000085d0: 2020 2020 2020 2020 3e3e 3e20 4953 5f4e          >>> IS_N
-000085e0: 4f54 5f45 4d50 5459 2829 2827 2729 0a20  OT_EMPTY()(''). 
-000085f0: 2020 2020 2020 2020 2020 2028 2727 2c20             ('', 
-00008600: 2765 6e74 6572 2061 2076 616c 7565 2729  'enter a value')
-00008610: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00008620: 2049 535f 4e4f 545f 454d 5054 5928 2928   IS_NOT_EMPTY()(
-00008630: 2720 2027 290a 2020 2020 2020 2020 2020  '  ').          
-00008640: 2020 2827 272c 2027 656e 7465 7220 6120    ('', 'enter a 
-00008650: 7661 6c75 6527 290a 2020 2020 2020 2020  value').        
-00008660: 2020 2020 3e3e 3e20 4953 5f4e 4f54 5f45      >>> IS_NOT_E
-00008670: 4d50 5459 2829 2827 205c 5c6e 5c5c 7427  MPTY()(' \\n\\t'
-00008680: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00008690: 272c 2027 656e 7465 7220 6120 7661 6c75  ', 'enter a valu
-000086a0: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-000086b0: 3e3e 3e20 4953 5f4e 4f54 5f45 4d50 5459  >>> IS_NOT_EMPTY
-000086c0: 2829 285b 5d29 0a20 2020 2020 2020 2020  ()([]).         
-000086d0: 2020 2028 5b5d 2c20 2765 6e74 6572 2061     ([], 'enter a
-000086e0: 2076 616c 7565 2729 0a20 2020 2020 2020   value').       
-000086f0: 2020 2020 203e 3e3e 2049 535f 4e4f 545f       >>> IS_NOT_
-00008700: 454d 5054 5928 656d 7074 795f 7265 6765  EMPTY(empty_rege
-00008710: 783d 2764 6566 2729 2827 6465 6627 290a  x='def')('def').
-00008720: 2020 2020 2020 2020 2020 2020 2827 272c              ('',
-00008730: 2027 656e 7465 7220 6120 7661 6c75 6527   'enter a value'
-00008740: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00008750: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2865  > IS_NOT_EMPTY(e
-00008760: 6d70 7479 5f72 6567 6578 3d27 6465 5b66  mpty_regex='de[f
-00008770: 675d 2729 2827 6465 6727 290a 2020 2020  g]')('deg').    
-00008780: 2020 2020 2020 2020 2827 272c 2027 656e          ('', 'en
-00008790: 7465 7220 6120 7661 6c75 6527 290a 2020  ter a value').  
-000087a0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-000087b0: 5f4e 4f54 5f45 4d50 5459 2865 6d70 7479  _NOT_EMPTY(empty
-000087c0: 5f72 6567 6578 3d27 6465 6627 2928 2761  _regex='def')('a
-000087d0: 6263 2729 0a20 2020 2020 2020 2020 2020  bc').           
-000087e0: 2028 2761 6263 272c 204e 6f6e 6529 0a20   ('abc', None). 
-000087f0: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
-00008800: 5f5f 696e 6974 5f5f 2873 656c 662c 2065  __init__(self, e
-00008810: 7272 6f72 5f6d 6573 7361 6765 3d22 456e  rror_message="En
-00008820: 7465 7220 6120 7661 6c75 6522 2c20 656d  ter a value", em
-00008830: 7074 795f 7265 6765 783d 4e6f 6e65 293a  pty_regex=None):
-00008840: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
-00008850: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
-00008860: 726f 725f 6d65 7373 6167 650a 2020 2020  ror_message.    
-00008870: 2020 2020 6966 2065 6d70 7479 5f72 6567      if empty_reg
-00008880: 6578 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ex is not None:.
-00008890: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000088a0: 2e65 6d70 7479 5f72 6567 6578 203d 2072  .empty_regex = r
-000088b0: 652e 636f 6d70 696c 6528 656d 7074 795f  e.compile(empty_
-000088c0: 7265 6765 7829 0a20 2020 2020 2020 2065  regex).        e
-000088d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000088e0: 2073 656c 662e 656d 7074 795f 7265 6765   self.empty_rege
-000088f0: 7820 3d20 4e6f 6e65 0a0a 2020 2020 6465  x = None..    de
-00008900: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
-00008910: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
-00008920: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
-00008930: 2076 616c 7565 2c20 656d 7074 7920 3d20   value, empty = 
-00008940: 6973 5f65 6d70 7479 2876 616c 7565 2c20  is_empty(value, 
-00008950: 656d 7074 795f 7265 6765 783d 7365 6c66  empty_regex=self
-00008960: 2e65 6d70 7479 5f72 6567 6578 290a 2020  .empty_regex).  
-00008970: 2020 2020 2020 6966 2065 6d70 7479 3a0a        if empty:.
-00008980: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00008990: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-000089a0: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-000089b0: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-000089c0: 7361 6765 2929 0a20 2020 2020 2020 2072  sage)).        r
-000089d0: 6574 7572 6e20 7661 6c75 650a 0a0a 636c  eturn value...cl
-000089e0: 6173 7320 4953 5f41 4c50 4841 4e55 4d45  ass IS_ALPHANUME
-000089f0: 5249 4328 4953 5f4d 4154 4348 293a 0a20  RIC(IS_MATCH):. 
-00008a00: 2020 2022 2222 0a20 2020 2045 7861 6d70     """.    Examp
-00008a10: 6c65 3a0a 2020 2020 2020 2020 5573 6564  le:.        Used
-00008a20: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
-00008a30: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-00008a40: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
-00008a50: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
-00008a60: 5f41 4c50 4841 4e55 4d45 5249 4328 2929  _ALPHANUMERIC())
-00008a70: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00008a80: 3e20 4953 5f41 4c50 4841 4e55 4d45 5249  > IS_ALPHANUMERI
-00008a90: 4328 2928 2731 2729 0a20 2020 2020 2020  C()('1').       
-00008aa0: 2020 2020 2028 2731 272c 204e 6f6e 6529       ('1', None)
-00008ab0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00008ac0: 2049 535f 414c 5048 414e 554d 4552 4943   IS_ALPHANUMERIC
-00008ad0: 2829 2827 2729 0a20 2020 2020 2020 2020  ()('').         
-00008ae0: 2020 2028 2727 2c20 4e6f 6e65 290a 2020     ('', None).  
-00008af0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00008b00: 5f41 4c50 4841 4e55 4d45 5249 4328 2928  _ALPHANUMERIC()(
-00008b10: 2741 5f61 2729 0a20 2020 2020 2020 2020  'A_a').         
-00008b20: 2020 2028 2741 5f61 272c 204e 6f6e 6529     ('A_a', None)
-00008b30: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00008b40: 2049 535f 414c 5048 414e 554d 4552 4943   IS_ALPHANUMERIC
-00008b50: 2829 2827 2127 290a 2020 2020 2020 2020  ()('!').        
-00008b60: 2020 2020 2827 2127 2c20 2765 6e74 6572      ('!', 'enter
-00008b70: 206f 6e6c 7920 6c65 7474 6572 732c 206e   only letters, n
-00008b80: 756d 6265 7273 2c20 616e 6420 756e 6465  umbers, and unde
-00008b90: 7273 636f 7265 2729 0a20 2020 2022 2222  rscore').    """
-00008ba0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00008bb0: 5f5f 2873 656c 662c 2065 7272 6f72 5f6d  __(self, error_m
-00008bc0: 6573 7361 6765 3d22 456e 7465 7220 6f6e  essage="Enter on
-00008bd0: 6c79 206c 6574 7465 7273 2c20 6e75 6d62  ly letters, numb
-00008be0: 6572 732c 2061 6e64 2075 6e64 6572 7363  ers, and undersc
-00008bf0: 6f72 6522 293a 0a20 2020 2020 2020 2049  ore"):.        I
-00008c00: 535f 4d41 5443 482e 5f5f 696e 6974 5f5f  S_MATCH.__init__
-00008c10: 2873 656c 662c 2072 225e 5b5c 775d 2a24  (self, r"^[\w]*$
-00008c20: 222c 2065 7272 6f72 5f6d 6573 7361 6765  ", error_message
-00008c30: 290a 0a0a 636c 6173 7320 4953 5f45 4d41  )...class IS_EMA
-00008c40: 494c 2856 616c 6964 6174 6f72 293a 0a0a  IL(Validator):..
-00008c50: 2020 2020 2222 220a 2020 2020 4368 6563      """.    Chec
-00008c60: 6b73 2069 6620 6669 656c 6427 7320 7661  ks if field's va
-00008c70: 6c75 6520 6973 2061 2076 616c 6964 2065  lue is a valid e
-00008c80: 6d61 696c 2061 6464 7265 7373 2e20 4361  mail address. Ca
-00008c90: 6e20 6265 2073 6574 2074 6f20 6469 7361  n be set to disa
-00008ca0: 6c6c 6f77 0a20 2020 206f 7220 666f 7263  llow.    or forc
-00008cb0: 6520 6164 6472 6573 7365 7320 6672 6f6d  e addresses from
-00008cc0: 2063 6572 7461 696e 2064 6f6d 6169 6e28   certain domain(
-00008cd0: 7329 2e0a 0a20 2020 2045 6d61 696c 2072  s)...    Email r
-00008ce0: 6567 6578 2061 6461 7074 6564 2066 726f  egex adapted fro
-00008cf0: 6d0a 2020 2020 6874 7470 3a2f 2f68 6161  m.    http://haa
-00008d00: 636b 6564 2e63 6f6d 2f61 7263 6869 7665  cked.com/archive
-00008d10: 2f32 3030 372f 3038 2f32 312f 692d 6b6e  /2007/08/21/i-kn
-00008d20: 6577 2d68 6f77 2d74 6f2d 7661 6c69 6461  ew-how-to-valida
-00008d30: 7465 2d61 6e2d 656d 6169 6c2d 6164 6472  te-an-email-addr
-00008d40: 6573 732d 756e 7469 6c2d 692e 6173 7078  ess-until-i.aspx
-00008d50: 2c0a 2020 2020 6765 6e65 7261 6c6c 7920  ,.    generally 
-00008d60: 666f 6c6c 6f77 696e 6720 7468 6520 5246  following the RF
-00008d70: 4373 2c20 6578 6365 7074 2074 6861 7420  Cs, except that 
-00008d80: 7765 2064 6973 616c 6c6f 7720 7175 6f74  we disallow quot
-00008d90: 6564 2073 7472 696e 6773 0a20 2020 2061  ed strings.    a
-00008da0: 6e64 2070 6572 6d69 7420 756e 6465 7273  nd permit unders
-00008db0: 636f 7265 7320 616e 6420 6c65 6164 696e  cores and leadin
-00008dc0: 6720 6e75 6d65 7269 6373 2069 6e20 7375  g numerics in su
-00008dd0: 6264 6f6d 6169 6e20 6c61 6265 6c73 0a0a  bdomain labels..
-00008de0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00008df0: 2020 6261 6e6e 6564 3a20 7265 6765 7820    banned: regex 
-00008e00: 7465 7874 2066 6f72 2064 6973 616c 6c6f  text for disallo
-00008e10: 7765 6420 6164 6472 6573 7320 646f 6d61  wed address doma
-00008e20: 696e 730a 2020 2020 2020 2020 666f 7263  ins.        forc
-00008e30: 6564 3a20 7265 6765 7820 7465 7874 2066  ed: regex text f
-00008e40: 6f72 2072 6571 7569 7265 6420 6164 6472  or required addr
-00008e50: 6573 7320 646f 6d61 696e 730a 0a20 2020  ess domains..   
-00008e60: 2042 6f74 6820 6172 6775 6d65 6e74 7320   Both arguments 
-00008e70: 6361 6e20 616c 736f 2062 6520 6375 7374  can also be cust
-00008e80: 6f6d 206f 626a 6563 7473 2077 6974 6820  om objects with 
-00008e90: 6120 6d61 7463 6828 7661 6c75 6529 206d  a match(value) m
-00008ea0: 6574 686f 642e 0a0a 2020 2020 4578 616d  ethod...    Exam
-00008eb0: 706c 653a 0a20 2020 2020 2020 2043 6865  ple:.        Che
-00008ec0: 636b 2066 6f72 2076 616c 6964 2065 6d61  ck for valid ema
-00008ed0: 696c 2061 6464 7265 7373 3a3a 0a0a 2020  il address::..  
-00008ee0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
-00008ef0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
-00008f00: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
-00008f10: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00008f20: 6972 6573 3d49 535f 454d 4149 4c28 2929  ires=IS_EMAIL())
-00008f30: 0a0a 2020 2020 2020 2020 4368 6563 6b20  ..        Check 
-00008f40: 666f 7220 7661 6c69 6420 656d 6169 6c20  for valid email 
-00008f50: 6164 6472 6573 7320 7468 6174 2063 616e  address that can
-00008f60: 2774 2062 6520 6672 6f6d 2061 202e 636f  't be from a .co
-00008f70: 6d20 646f 6d61 696e 3a3a 0a0a 2020 2020  m domain::..    
-00008f80: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
-00008f90: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
-00008fa0: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
-00008fb0: 2020 2020 2020 2020 2020 7265 7175 6972            requir
-00008fc0: 6573 3d49 535f 454d 4149 4c28 6261 6e6e  es=IS_EMAIL(bann
-00008fd0: 6564 3d27 5e2e 2a5c 5c2e 636f 6d28 7c5c  ed='^.*\\.com(|\
-00008fe0: 5c2e 2e2a 2924 2729 290a 0a20 2020 2020  \..*)$'))..     
-00008ff0: 2020 2043 6865 636b 2066 6f72 2076 616c     Check for val
-00009000: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
-00009010: 2074 6861 7420 6d75 7374 2062 6520 6672   that must be fr
-00009020: 6f6d 2061 202e 6564 7520 646f 6d61 696e  om a .edu domain
-00009030: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00009040: 494e 5055 5428 5f74 7970 653d 2774 6578  INPUT(_type='tex
-00009050: 7427 2c20 5f6e 616d 653d 276e 616d 6527  t', _name='name'
-00009060: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00009070: 2020 7265 7175 6972 6573 3d49 535f 454d    requires=IS_EM
-00009080: 4149 4c28 666f 7263 6564 3d27 5e2e 2a5c  AIL(forced='^.*\
-00009090: 5c2e 6564 7528 7c5c 5c2e 2e2a 2924 2729  \.edu(|\\..*)$')
-000090a0: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
-000090b0: 3e3e 2049 535f 454d 4149 4c28 2928 2761  >> IS_EMAIL()('a
-000090c0: 4062 2e63 6f6d 2729 0a20 2020 2020 2020  @b.com').       
-000090d0: 2020 2020 2028 2761 4062 2e63 6f6d 272c       ('a@b.com',
-000090e0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-000090f0: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-00009100: 2928 2761 6263 4064 6566 2e63 6f6d 2729  )('abc@def.com')
-00009110: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
-00009120: 6263 4064 6566 2e63 6f6d 272c 204e 6f6e  bc@def.com', Non
-00009130: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00009140: 3e3e 2049 535f 454d 4149 4c28 2928 2761  >> IS_EMAIL()('a
-00009150: 6263 4033 6465 662e 636f 6d27 290a 2020  bc@3def.com').  
-00009160: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
-00009170: 3364 6566 2e63 6f6d 272c 204e 6f6e 6529  3def.com', None)
-00009180: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00009190: 2049 535f 454d 4149 4c28 2928 2761 6263   IS_EMAIL()('abc
-000091a0: 4064 6566 2e75 7327 290a 2020 2020 2020  @def.us').      
-000091b0: 2020 2020 2020 2827 6162 6340 6465 662e        ('abc@def.
-000091c0: 7573 272c 204e 6f6e 6529 0a20 2020 2020  us', None).     
-000091d0: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-000091e0: 4149 4c28 2928 2761 6263 4064 5f2d 662e  AIL()('abc@d_-f.
-000091f0: 7573 2729 0a20 2020 2020 2020 2020 2020  us').           
-00009200: 2028 2761 6263 4064 5f2d 662e 7573 272c   ('abc@d_-f.us',
-00009210: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00009220: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-00009230: 2928 2740 6465 662e 636f 6d27 2920 2020  )('@def.com')   
-00009240: 2020 2020 2020 2020 2320 6d69 7373 696e          # missin
-00009250: 6720 6e61 6d65 0a20 2020 2020 2020 2020  g name.         
-00009260: 2020 2028 2740 6465 662e 636f 6d27 2c20     ('@def.com', 
-00009270: 2765 6e74 6572 2061 2076 616c 6964 2065  'enter a valid e
-00009280: 6d61 696c 2061 6464 7265 7373 2729 0a20  mail address'). 
-00009290: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-000092a0: 535f 454d 4149 4c28 2928 2722 6162 6340  S_EMAIL()('"abc@
-000092b0: 6465 6622 2e63 6f6d 2729 2020 2020 2020  def".com')      
-000092c0: 2320 7175 6f74 6564 206e 616d 650a 2020  # quoted name.  
-000092d0: 2020 2020 2020 2020 2020 2827 2261 6263            ('"abc
-000092e0: 4064 6566 222e 636f 6d27 2c20 2765 6e74  @def".com', 'ent
-000092f0: 6572 2061 2076 616c 6964 2065 6d61 696c  er a valid email
-00009300: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00009310: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009320: 4149 4c28 2928 2761 6263 2b64 6566 2e63  AIL()('abc+def.c
-00009330: 6f6d 2729 2020 2020 2020 2020 2320 6e6f  om')        # no
-00009340: 2040 0a20 2020 2020 2020 2020 2020 2028   @.            (
-00009350: 2761 6263 2b64 6566 2e63 6f6d 272c 2027  'abc+def.com', '
-00009360: 656e 7465 7220 6120 7661 6c69 6420 656d  enter a valid em
-00009370: 6169 6c20 6164 6472 6573 7327 290a 2020  ail address').  
-00009380: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00009390: 5f45 4d41 494c 2829 2827 6162 6340 6465  _EMAIL()('abc@de
-000093a0: 662e 7827 2920 2020 2020 2020 2020 2023  f.x')          #
-000093b0: 206f 6e65 2d63 6861 7220 544c 440a 2020   one-char TLD.  
-000093c0: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
-000093d0: 6465 662e 7827 2c20 2765 6e74 6572 2061  def.x', 'enter a
-000093e0: 2076 616c 6964 2065 6d61 696c 2061 6464   valid email add
-000093f0: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
-00009400: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-00009410: 2928 2761 6263 4064 6566 2e31 3227 2920  )('abc@def.12') 
-00009420: 2020 2020 2020 2020 2320 6e75 6d65 7269          # numeri
-00009430: 6320 544c 440a 2020 2020 2020 2020 2020  c TLD.          
-00009440: 2020 2827 6162 6340 6465 662e 3132 272c    ('abc@def.12',
-00009450: 2027 656e 7465 7220 6120 7661 6c69 6420   'enter a valid 
-00009460: 656d 6169 6c20 6164 6472 6573 7327 290a  email address').
-00009470: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00009480: 4953 5f45 4d41 494c 2829 2827 6162 6340  IS_EMAIL()('abc@
-00009490: 6465 662e 2e63 6f6d 2729 2020 2020 2020  def..com')      
-000094a0: 2023 2064 6f75 626c 652d 646f 7420 696e   # double-dot in
-000094b0: 2064 6f6d 6169 6e0a 2020 2020 2020 2020   domain.        
-000094c0: 2020 2020 2827 6162 6340 6465 662e 2e63      ('abc@def..c
-000094d0: 6f6d 272c 2027 656e 7465 7220 6120 7661  om', 'enter a va
-000094e0: 6c69 6420 656d 6169 6c20 6164 6472 6573  lid email addres
-000094f0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-00009500: 3e3e 3e20 4953 5f45 4d41 494c 2829 2827  >>> IS_EMAIL()('
-00009510: 6162 6340 2e64 6566 2e63 6f6d 2729 2020  abc@.def.com')  
-00009520: 2020 2020 2023 2064 6f74 2073 7461 7274       # dot start
-00009530: 7320 646f 6d61 696e 0a20 2020 2020 2020  s domain.       
-00009540: 2020 2020 2028 2761 6263 402e 6465 662e       ('abc@.def.
-00009550: 636f 6d27 2c20 2765 6e74 6572 2061 2076  com', 'enter a v
-00009560: 616c 6964 2065 6d61 696c 2061 6464 7265  alid email addre
-00009570: 7373 2729 0a20 2020 2020 2020 2020 2020  ss').           
-00009580: 203e 3e3e 2049 535f 454d 4149 4c28 2928   >>> IS_EMAIL()(
-00009590: 2761 6263 4064 6566 2e63 5f6d 2729 2020  'abc@def.c_m')  
-000095a0: 2020 2020 2020 2320 756e 6465 7273 636f        # undersco
-000095b0: 7265 2069 6e20 544c 440a 2020 2020 2020  re in TLD.      
-000095c0: 2020 2020 2020 2827 6162 6340 6465 662e        ('abc@def.
-000095d0: 635f 6d27 2c20 2765 6e74 6572 2061 2076  c_m', 'enter a v
-000095e0: 616c 6964 2065 6d61 696c 2061 6464 7265  alid email addre
-000095f0: 7373 2729 0a20 2020 2020 2020 2020 2020  ss').           
-00009600: 203e 3e3e 2049 535f 454d 4149 4c28 2928   >>> IS_EMAIL()(
-00009610: 274e 6f74 416e 456d 6169 6c27 2920 2020  'NotAnEmail')   
-00009620: 2020 2020 2020 2320 6d69 7373 696e 6720        # missing 
-00009630: 400a 2020 2020 2020 2020 2020 2020 2827  @.            ('
-00009640: 4e6f 7441 6e45 6d61 696c 272c 2027 656e  NotAnEmail', 'en
-00009650: 7465 7220 6120 7661 6c69 6420 656d 6169  ter a valid emai
-00009660: 6c20 6164 6472 6573 7327 290a 2020 2020  l address').    
-00009670: 2020 2020 2020 2020 3e3e 3e20 4953 5f45          >>> IS_E
-00009680: 4d41 494c 2829 2827 6162 6340 4e6f 7441  MAIL()('abc@NotA
-00009690: 6e45 6d61 696c 2729 2020 2020 2023 206d  nEmail')     # m
-000096a0: 6973 7369 6e67 2054 4c44 0a20 2020 2020  issing TLD.     
-000096b0: 2020 2020 2020 2028 2761 6263 404e 6f74         ('abc@Not
-000096c0: 416e 456d 6169 6c27 2c20 2765 6e74 6572  AnEmail', 'enter
-000096d0: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-000096e0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-000096f0: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
-00009700: 4c28 2928 2763 7573 746f 6d65 722f 6465  L()('customer/de
-00009710: 7061 7274 6d65 6e74 4065 7861 6d70 6c65  partment@example
-00009720: 2e63 6f6d 2729 0a20 2020 2020 2020 2020  .com').         
-00009730: 2020 2028 2763 7573 746f 6d65 722f 6465     ('customer/de
-00009740: 7061 7274 6d65 6e74 4065 7861 6d70 6c65  partment@example
-00009750: 2e63 6f6d 272c 204e 6f6e 6529 0a20 2020  .com', None).   
-00009760: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00009770: 454d 4149 4c28 2928 2724 4131 3233 3435  EMAIL()('$A12345
-00009780: 4065 7861 6d70 6c65 2e63 6f6d 2729 0a20  @example.com'). 
-00009790: 2020 2020 2020 2020 2020 2028 2724 4131             ('$A1
-000097a0: 3233 3435 4065 7861 6d70 6c65 2e63 6f6d  2345@example.com
-000097b0: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-000097c0: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
-000097d0: 4c28 2928 2721 6465 6621 7879 7a25 6162  L()('!def!xyz%ab
-000097e0: 6340 6578 616d 706c 652e 636f 6d27 290a  c@example.com').
-000097f0: 2020 2020 2020 2020 2020 2020 2827 2164              ('!d
-00009800: 6566 2178 797a 2561 6263 4065 7861 6d70  ef!xyz%abc@examp
-00009810: 6c65 2e63 6f6d 272c 204e 6f6e 6529 0a20  le.com', None). 
-00009820: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00009830: 535f 454d 4149 4c28 2928 275f 596f 7365  S_EMAIL()('_Yose
-00009840: 6d69 7465 2e53 616d 4065 7861 6d70 6c65  mite.Sam@example
-00009850: 2e63 6f6d 2729 0a20 2020 2020 2020 2020  .com').         
-00009860: 2020 2028 275f 596f 7365 6d69 7465 2e53     ('_Yosemite.S
-00009870: 616d 4065 7861 6d70 6c65 2e63 6f6d 272c  am@example.com',
-00009880: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00009890: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-000098a0: 2928 277e 4065 7861 6d70 6c65 2e63 6f6d  )('~@example.com
-000098b0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-000098c0: 277e 4065 7861 6d70 6c65 2e63 6f6d 272c  '~@example.com',
-000098d0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-000098e0: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-000098f0: 2928 272e 776f 6f6c 7940 6578 616d 706c  )('.wooly@exampl
-00009900: 652e 636f 6d27 2920 2020 2020 2020 2320  e.com')       # 
-00009910: 646f 7420 7374 6172 7473 206e 616d 650a  dot starts name.
-00009920: 2020 2020 2020 2020 2020 2020 2827 2e77              ('.w
-00009930: 6f6f 6c79 4065 7861 6d70 6c65 2e63 6f6d  ooly@example.com
-00009940: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
-00009950: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
-00009960: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00009970: 3e20 4953 5f45 4d41 494c 2829 2827 776f  > IS_EMAIL()('wo
-00009980: 2e2e 6f6c 7940 6578 616d 706c 652e 636f  ..oly@example.co
-00009990: 6d27 2920 2020 2020 2023 2061 646a 6163  m')      # adjac
-000099a0: 656e 7420 646f 7473 2069 6e20 6e61 6d65  ent dots in name
-000099b0: 0a20 2020 2020 2020 2020 2020 2028 2777  .            ('w
-000099c0: 6f2e 2e6f 6c79 4065 7861 6d70 6c65 2e63  o..oly@example.c
-000099d0: 6f6d 272c 2027 656e 7465 7220 6120 7661  om', 'enter a va
-000099e0: 6c69 6420 656d 6169 6c20 6164 6472 6573  lid email addres
-000099f0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-00009a00: 3e3e 3e20 4953 5f45 4d41 494c 2829 2827  >>> IS_EMAIL()('
-00009a10: 706f 6f74 6965 7461 6e67 2e40 6578 616d  pootietang.@exam
-00009a20: 706c 652e 636f 6d27 2920 2023 2064 6f74  ple.com')  # dot
-00009a30: 2065 6e64 7320 6e61 6d65 0a20 2020 2020   ends name.     
-00009a40: 2020 2020 2020 2028 2770 6f6f 7469 6574         ('pootiet
-00009a50: 616e 672e 4065 7861 6d70 6c65 2e63 6f6d  ang.@example.com
-00009a60: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
-00009a70: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
-00009a80: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00009a90: 3e20 4953 5f45 4d41 494c 2829 2827 2e40  > IS_EMAIL()('.@
-00009aa0: 6578 616d 706c 652e 636f 6d27 2920 2020  example.com')   
-00009ab0: 2020 2020 2020 2020 2023 206e 616d 6520           # name 
-00009ac0: 6973 2062 6172 6520 646f 740a 2020 2020  is bare dot.    
-00009ad0: 2020 2020 2020 2020 2827 2e40 6578 616d          ('.@exam
-00009ae0: 706c 652e 636f 6d27 2c20 2765 6e74 6572  ple.com', 'enter
-00009af0: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-00009b00: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-00009b10: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
-00009b20: 4c28 2928 2749 6d61 2e46 6f6f 6c40 6578  L()('Ima.Fool@ex
-00009b30: 616d 706c 652e 636f 6d27 290a 2020 2020  ample.com').    
-00009b40: 2020 2020 2020 2020 2827 496d 612e 466f          ('Ima.Fo
-00009b50: 6f6c 4065 7861 6d70 6c65 2e63 6f6d 272c  ol@example.com',
-00009b60: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00009b70: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-00009b80: 2928 2749 6d61 2046 6f6f 6c40 6578 616d  )('Ima Fool@exam
-00009b90: 706c 652e 636f 6d27 2920 2020 2020 2320  ple.com')     # 
-00009ba0: 7370 6163 6520 696e 206e 616d 650a 2020  space in name.  
-00009bb0: 2020 2020 2020 2020 2020 2827 496d 6120            ('Ima 
-00009bc0: 466f 6f6c 4065 7861 6d70 6c65 2e63 6f6d  Fool@example.com
-00009bd0: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
-00009be0: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
-00009bf0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00009c00: 3e20 4953 5f45 4d41 494c 2829 2827 6c6f  > IS_EMAIL()('lo
-00009c10: 6361 6c67 7579 406c 6f63 616c 686f 7374  calguy@localhost
-00009c20: 2729 2020 2020 2020 2023 206c 6f63 616c  ')       # local
-00009c30: 686f 7374 2061 7320 646f 6d61 696e 0a20  host as domain. 
-00009c40: 2020 2020 2020 2020 2020 2028 276c 6f63             ('loc
-00009c50: 616c 6775 7940 6c6f 6361 6c68 6f73 7427  alguy@localhost'
-00009c60: 2c20 4e6f 6e65 290a 0a20 2020 2022 2222  , None)..    """
-00009c70: 0a0a 2020 2020 2320 4e4f 5445 3a20 7573  ..    # NOTE: us
-00009c80: 6520 7468 6573 6520 7769 7468 2066 6c61  e these with fla
-00009c90: 6773 203d 2072 652e 5645 5242 4f53 4520  gs = re.VERBOSE 
-00009ca0: 7c20 7265 2e49 474e 4f52 4543 4153 450a  | re.IGNORECASE.
-00009cb0: 2020 2020 5245 4745 585f 424f 4459 203d      REGEX_BODY =
-00009cc0: 2072 2222 220a 2020 2020 2020 2020 5e28   r""".        ^(
-00009cd0: 3f21 5c2e 2920 2020 2020 2020 2020 2020  ?!\.)           
-00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cf0: 2320 6e61 6d65 206d 6179 206e 6f74 2062  # name may not b
-00009d00: 6567 696e 2077 6974 6820 6120 646f 740a  egin with a dot.
-00009d10: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00009d20: 2020 2020 5b2d 612d 7a30 2d39 215c 2324      [-a-z0-9!\#$
-00009d30: 2526 272a 2b2f 3d3f 5e5f 607b 7c7d 7e5d  %&'*+/=?^_`{|}~]
-00009d40: 2020 2020 2320 616c 6c20 6c65 6761 6c20      # all legal 
-00009d50: 6368 6172 6163 7465 7273 2065 7863 6570  characters excep
-00009d60: 7420 646f 740a 2020 2020 2020 2020 2020  t dot.          
-00009d70: 7c0a 2020 2020 2020 2020 2020 283f 3c21  |.          (?<!
-00009d80: 5c2e 295c 2e20 2020 2020 2020 2020 2020  \.)\.           
-00009d90: 2020 2020 2020 2020 2020 2020 2320 7369              # si
-00009da0: 6e67 6c65 2064 6f74 7320 6f6e 6c79 0a20  ngle dots only. 
-00009db0: 2020 2020 2020 2029 2b0a 2020 2020 2020         )+.      
-00009dc0: 2020 283f 3c21 5c2e 2924 2020 2020 2020    (?<!\.)$      
-00009dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009de0: 2020 2020 2320 6e61 6d65 206d 6179 206e      # name may n
-00009df0: 6f74 2065 6e64 2077 6974 6820 6120 646f  ot end with a do
-00009e00: 740a 2020 2020 2222 220a 2020 2020 5245  t.    """.    RE
-00009e10: 4745 585f 444f 4d41 494e 203d 2072 2222  GEX_DOMAIN = r""
-00009e20: 220a 2020 2020 2020 2020 280a 2020 2020  ".        (.    
-00009e30: 2020 2020 2020 6c6f 6361 6c68 6f73 740a        localhost.
-00009e40: 2020 2020 2020 2020 2020 7c0a 2020 2020            |.    
-00009e50: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
-00009e60: 2020 2020 5b61 2d7a 302d 395d 2020 2020      [a-z0-9]    
-00009e70: 2020 2320 5b73 7562 5d64 6f6d 6169 6e20    # [sub]domain 
-00009e80: 6265 6769 6e73 2077 6974 6820 616c 7068  begins with alph
-00009e90: 616e 756d 6572 6963 0a20 2020 2020 2020  anumeric.       
-00009ea0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-00009eb0: 2020 2020 205b 2d5c 775d 2a20 2020 2020       [-\w]*     
-00009ec0: 2023 2061 6c70 6861 6e75 6d65 7269 632c   # alphanumeric,
-00009ed0: 2075 6e64 6572 7363 6f72 652c 2064 6f74   underscore, dot
-00009ee0: 2c20 6879 7068 656e 0a20 2020 2020 2020  , hyphen.       
-00009ef0: 2020 2020 2020 205b 612d 7a30 2d39 5d20         [a-z0-9] 
-00009f00: 2020 2023 2065 6e64 696e 6720 616c 7068     # ending alph
-00009f10: 616e 756d 6572 6963 0a20 2020 2020 2020  anumeric.       
-00009f20: 2020 2020 2029 3f0a 2020 2020 2020 2020       )?.        
-00009f30: 2020 5c2e 2020 2020 2020 2020 2020 2020    \.            
-00009f40: 2020 2320 656e 6469 6e67 2064 6f74 0a20    # ending dot. 
-00009f50: 2020 2020 2020 2020 2029 2b0a 2020 2020           )+.    
-00009f60: 2020 2020 2020 5b61 2d7a 5d7b 322c 7d20        [a-z]{2,} 
-00009f70: 2020 2020 2020 2320 544c 4420 616c 7068        # TLD alph
-00009f80: 612d 6f6e 6c79 0a20 2020 2020 2020 2924  a-only.       )$
-00009f90: 0a20 2020 2022 2222 0a20 2020 2023 2072  .    """.    # r
-00009fa0: 6567 6578 5f70 726f 706f 7365 645f 6275  egex_proposed_bu
-00009fb0: 745f 6661 696c 6564 203d 2072 652e 636f  t_failed = re.co
-00009fc0: 6d70 696c 6528 7227 5e28 5b5c 775c 215c  mpile(r'^([\w\!\
-00009fd0: 2324 5c25 5c26 5c27 5c2a 5c2b 5c2d 5c2f  #$\%\&\'\*\+\-\/
-00009fe0: 5c3d 5c3f 5c5e 5c60 7b5c 7c5c 7d5c 7e5d  \=\?\^\`{\|\}\~]
-00009ff0: 2b5c 2e29 2a5b 5c77 5c21 5c23 245c 255c  +\.)*[\w\!\#$\%\
-0000a000: 265c 275c 2a5c 2b5c 2d5c 2f5c 3d5c 3f5c  &\'\*\+\-\/\=\?\
-0000a010: 5e5c 607b 5c7c 5c7d 5c7e 5d2b 4028 2828  ^\`{\|\}\~]+@(((
-0000a020: 2828 5b61 2d7a 302d 395d 7b31 7d5b 612d  (([a-z0-9]{1}[a-
-0000a030: 7a30 2d39 5c2d 5d7b 302c 3632 7d5b 612d  z0-9\-]{0,62}[a-
-0000a040: 7a30 2d39 5d7b 317d 297c 5b61 2d7a 5d29  z0-9]{1})|[a-z])
-0000a050: 5c2e 292b 5b61 2d7a 5d7b 322c 367d 297c  \.)+[a-z]{2,6})|
-0000a060: 285c 647b 312c 337d 5c2e 297b 337d 5c64  (\d{1,3}\.){3}\d
-0000a070: 7b31 2c33 7d28 5c3a 5c64 7b31 2c35 7d29  {1,3}(\:\d{1,5})
-0000a080: 3f29 2427 2c20 7265 2e56 4552 424f 5345  ?)$', re.VERBOSE
-0000a090: 207c 2072 652e 4947 4e4f 5245 4341 5345   | re.IGNORECASE
-0000a0a0: 290a 0a20 2020 2064 6566 205f 5f69 6e69  )..    def __ini
-0000a0b0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-0000a0c0: 662c 2062 616e 6e65 643d 4e6f 6e65 2c20  f, banned=None, 
-0000a0d0: 666f 7263 6564 3d4e 6f6e 652c 2065 7272  forced=None, err
-0000a0e0: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-0000a0f0: 7220 6120 7661 6c69 6420 656d 6169 6c20  r a valid email 
-0000a100: 6164 6472 6573 7322 0a20 2020 2029 3a0a  address".    ):.
-0000a110: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000a120: 7461 6e63 6528 6261 6e6e 6564 2c20 7374  tance(banned, st
-0000a130: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0000a140: 6261 6e6e 6564 203d 2072 652e 636f 6d70  banned = re.comp
-0000a150: 696c 6528 6261 6e6e 6564 290a 2020 2020  ile(banned).    
-0000a160: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000a170: 6528 666f 7263 6564 2c20 7374 7229 3a0a  e(forced, str):.
-0000a180: 2020 2020 2020 2020 2020 2020 666f 7263              forc
-0000a190: 6564 203d 2072 652e 636f 6d70 696c 6528  ed = re.compile(
-0000a1a0: 666f 7263 6564 290a 2020 2020 2020 2020  forced).        
-0000a1b0: 7365 6c66 2e62 616e 6e65 6420 3d20 6261  self.banned = ba
-0000a1c0: 6e6e 6564 0a20 2020 2020 2020 2073 656c  nned.        sel
-0000a1d0: 662e 666f 7263 6564 203d 2066 6f72 6365  f.forced = force
-0000a1e0: 640a 2020 2020 2020 2020 7365 6c66 2e65  d.        self.e
-0000a1f0: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
-0000a200: 7272 6f72 5f6d 6573 7361 6765 0a0a 2020  rror_message..  
-0000a210: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-0000a220: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-0000a230: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-0000a240: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
-0000a250: 2020 2020 2020 6e6f 7420 2869 7369 6e73        not (isins
-0000a260: 7461 6e63 6528 7661 6c75 652c 2028 6261  tance(value, (ba
-0000a270: 7365 7374 7269 6e67 2c20 756e 6963 6f64  sestring, unicod
-0000a280: 6554 2929 290a 2020 2020 2020 2020 2020  eT))).          
-0000a290: 2020 6f72 206e 6f74 2076 616c 7565 0a20    or not value. 
-0000a2a0: 2020 2020 2020 2020 2020 206f 7220 2240             or "@
-0000a2b0: 2220 6e6f 7420 696e 2076 616c 7565 0a20  " not in value. 
-0000a2c0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-0000a2d0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-0000a2e0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
-0000a2f0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-0000a300: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
-0000a310: 0a0a 2020 2020 2020 2020 626f 6479 2c20  ..        body, 
-0000a320: 646f 6d61 696e 203d 2076 616c 7565 2e72  domain = value.r
-0000a330: 7370 6c69 7428 2240 222c 2031 290a 0a20  split("@", 1).. 
-0000a340: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0000a350: 2020 2020 2020 2020 7265 6765 785f 666c          regex_fl
-0000a360: 6167 7320 3d20 7265 2e56 4552 424f 5345  ags = re.VERBOSE
-0000a370: 207c 2072 652e 4947 4e4f 5245 4341 5345   | re.IGNORECASE
-0000a380: 0a20 2020 2020 2020 2020 2020 206d 6174  .            mat
-0000a390: 6368 5f62 6f64 7920 3d20 7265 2e6d 6174  ch_body = re.mat
-0000a3a0: 6368 2873 656c 662e 5245 4745 585f 424f  ch(self.REGEX_BO
-0000a3b0: 4459 2c20 626f 6479 2c20 7265 6765 785f  DY, body, regex_
-0000a3c0: 666c 6167 7329 0a20 2020 2020 2020 2020  flags).         
-0000a3d0: 2020 206d 6174 6368 5f64 6f6d 6169 6e20     match_domain 
-0000a3e0: 3d20 7265 2e6d 6174 6368 2873 656c 662e  = re.match(self.
-0000a3f0: 5245 4745 585f 444f 4d41 494e 2c20 646f  REGEX_DOMAIN, do
-0000a400: 6d61 696e 2c20 7265 6765 785f 666c 6167  main, regex_flag
-0000a410: 7329 0a0a 2020 2020 2020 2020 2020 2020  s)..            
-0000a420: 6966 206e 6f74 206d 6174 6368 5f64 6f6d  if not match_dom
-0000a430: 6169 6e3a 0a20 2020 2020 2020 2020 2020  ain:.           
-0000a440: 2020 2020 2023 2063 6865 636b 2066 6f72       # check for
-0000a450: 2049 6e74 6572 6e61 7469 6f6e 616c 697a   Internationaliz
-0000a460: 6564 2044 6f6d 6169 6e20 4e61 6d65 730a  ed Domain Names.
-0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a480: 2320 7365 6520 6874 7470 733a 2f2f 646f  # see https://do
-0000a490: 6373 2e70 7974 686f 6e2e 6f72 672f 322f  cs.python.org/2/
-0000a4a0: 6c69 6272 6172 792f 636f 6465 6373 2e68  library/codecs.h
-0000a4b0: 746d 6c23 6d6f 6475 6c65 2d65 6e63 6f64  tml#module-encod
-0000a4c0: 696e 6773 2e69 646e 610a 2020 2020 2020  ings.idna.      
-0000a4d0: 2020 2020 2020 2020 2020 646f 6d61 696e            domain
-0000a4e0: 5f65 6e63 6f64 6564 203d 2074 6f5f 756e  _encoded = to_un
-0000a4f0: 6963 6f64 6528 646f 6d61 696e 292e 656e  icode(domain).en
-0000a500: 636f 6465 2822 6964 6e61 2229 2e64 6563  code("idna").dec
-0000a510: 6f64 6528 2261 7363 6969 2229 0a20 2020  ode("ascii").   
-0000a520: 2020 2020 2020 2020 2020 2020 206d 6174               mat
-0000a530: 6368 5f64 6f6d 6169 6e20 3d20 7265 2e6d  ch_domain = re.m
-0000a540: 6174 6368 2873 656c 662e 5245 4745 585f  atch(self.REGEX_
-0000a550: 444f 4d41 494e 2c20 646f 6d61 696e 5f65  DOMAIN, domain_e
-0000a560: 6e63 6f64 6564 2c20 7265 6765 785f 666c  ncoded, regex_fl
-0000a570: 6167 7329 0a0a 2020 2020 2020 2020 2020  ags)..          
-0000a580: 2020 6d61 7463 6820 3d20 286d 6174 6368    match = (match
-0000a590: 5f62 6f64 7920 6973 206e 6f74 204e 6f6e  _body is not Non
-0000a5a0: 6529 2061 6e64 2028 6d61 7463 685f 646f  e) and (match_do
-0000a5b0: 6d61 696e 2069 7320 6e6f 7420 4e6f 6e65  main is not None
-0000a5c0: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-0000a5d0: 2028 5479 7065 4572 726f 722c 2055 6e69   (TypeError, Uni
-0000a5e0: 636f 6465 4572 726f 7229 3a0a 2020 2020  codeError):.    
-0000a5f0: 2020 2020 2020 2020 2320 5661 6c75 6520          # Value 
-0000a600: 6d61 7920 6e6f 7420 6265 2061 2073 7472  may not be a str
-0000a610: 696e 6720 7768 6572 6520 7765 2063 616e  ing where we can
-0000a620: 206c 6f6f 6b20 666f 7220 6d61 7463 6865   look for matche
-0000a630: 732e 0a20 2020 2020 2020 2020 2020 2023  s..            #
-0000a640: 2045 7861 6d70 6c65 3a20 7765 2772 6520   Example: we're 
-0000a650: 6361 6c6c 696e 6720 414e 595f 4f46 2066  calling ANY_OF f
-0000a660: 6f72 6d61 7474 6572 2061 6e64 2049 535f  ormatter and IS_
-0000a670: 454d 4149 4c20 6973 2061 736b 6564 2074  EMAIL is asked t
-0000a680: 6f20 7661 6c69 6461 7465 2061 2064 6174  o validate a dat
-0000a690: 652e 0a20 2020 2020 2020 2020 2020 206d  e..            m
-0000a6a0: 6174 6368 203d 204e 6f6e 650a 2020 2020  atch = None.    
-0000a6b0: 2020 2020 6966 206d 6174 6368 3a0a 2020      if match:.  
-0000a6c0: 2020 2020 2020 2020 2020 6966 2028 6e6f            if (no
-0000a6d0: 7420 7365 6c66 2e62 616e 6e65 6420 6f72  t self.banned or
-0000a6e0: 206e 6f74 2073 656c 662e 6261 6e6e 6564   not self.banned
-0000a6f0: 2e6d 6174 6368 2864 6f6d 6169 6e29 2920  .match(domain)) 
-0000a700: 616e 6420 280a 2020 2020 2020 2020 2020  and (.          
-0000a710: 2020 2020 2020 6e6f 7420 7365 6c66 2e66        not self.f
-0000a720: 6f72 6365 6420 6f72 2073 656c 662e 666f  orced or self.fo
-0000a730: 7263 6564 2e6d 6174 6368 2864 6f6d 6169  rced.match(domai
-0000a740: 6e29 0a20 2020 2020 2020 2020 2020 2029  n).            )
-0000a750: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000a760: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
-0000a770: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000a780: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
-0000a790: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
-0000a7a0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
-0000a7b0: 290a 0a0a 636c 6173 7320 4953 5f4c 4953  )...class IS_LIS
-0000a7c0: 545f 4f46 5f45 4d41 494c 5328 5661 6c69  T_OF_EMAILS(Vali
-0000a7d0: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
-0000a7e0: 2020 2020 4578 616d 706c 653a 0a20 2020      Example:.   
-0000a7f0: 2020 2020 2055 7365 6420 6173 3a3a 0a0a       Used as::..
-0000a800: 2020 2020 2020 2020 4669 656c 6428 2765          Field('e
-0000a810: 6d61 696c 7327 2c20 276c 6973 743a 7374  mails', 'list:st
-0000a820: 7269 6e67 272c 0a20 2020 2020 2020 2020  ring',.         
-0000a830: 2020 2020 2077 6964 6765 743d 5351 4c46       widget=SQLF
-0000a840: 4f52 4d2e 7769 6467 6574 732e 7465 7874  ORM.widgets.text
-0000a850: 2e77 6964 6765 742c 0a20 2020 2020 2020  .widget,.       
-0000a860: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
-0000a870: 4953 5f4c 4953 545f 4f46 5f45 4d41 494c  IS_LIST_OF_EMAIL
-0000a880: 5328 292c 0a20 2020 2020 2020 2020 2020  S(),.           
-0000a890: 2020 2072 6570 7265 7365 6e74 3d6c 616d     represent=lam
-0000a8a0: 6264 6120 762c 2072 3a20 5c0a 2020 2020  bda v, r: \.    
-0000a8b0: 2020 2020 2020 2020 2020 2020 584d 4c28              XML(
-0000a8c0: 272c 2027 2e6a 6f69 6e28 5b41 2878 2c20  ', '.join([A(x, 
-0000a8d0: 5f68 7265 663d 276d 6169 6c74 6f3a 272b  _href='mailto:'+
-0000a8e0: 7829 2e78 6d6c 2829 2066 6f72 2078 2069  x).xml() for x i
-0000a8f0: 6e20 2876 206f 7220 5b5d 295d 2929 0a20  n (v or [])])). 
-0000a900: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000a910: 2020 2222 220a 0a20 2020 2052 4547 4558    """..    REGEX
-0000a920: 5f4e 4f54 5f45 4d41 494c 5f53 504c 4954  _NOT_EMAIL_SPLIT
-0000a930: 5445 5220 3d20 7222 5b5e 2c3b 5c73 5d2b  TER = r"[^,;\s]+
-0000a940: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-0000a950: 745f 5f28 7365 6c66 2c20 6572 726f 725f  t__(self, error_
-0000a960: 6d65 7373 6167 653d 2249 6e76 616c 6964  message="Invalid
-0000a970: 2065 6d61 696c 733a 2025 7322 293a 0a20   emails: %s"):. 
-0000a980: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-0000a990: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
-0000a9a0: 725f 6d65 7373 6167 650a 0a20 2020 2064  r_message..    d
-0000a9b0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-0000a9c0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-0000a9d0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-0000a9e0: 2020 6261 645f 656d 6169 6c73 203d 205b    bad_emails = [
-0000a9f0: 5d0a 2020 2020 2020 2020 6620 3d20 4953  ].        f = IS
-0000aa00: 5f45 4d41 494c 2829 0a20 2020 2020 2020  _EMAIL().       
-0000aa10: 2066 6f72 2065 6d61 696c 2069 6e20 7265   for email in re
-0000aa20: 2e66 696e 6461 6c6c 2873 656c 662e 5245  .findall(self.RE
-0000aa30: 4745 585f 4e4f 545f 454d 4149 4c5f 5350  GEX_NOT_EMAIL_SP
-0000aa40: 4c49 5454 4552 2c20 7661 6c75 6529 3a0a  LITTER, value):.
-0000aa50: 2020 2020 2020 2020 2020 2020 6572 726f              erro
-0000aa60: 7220 3d20 6628 656d 6169 6c29 5b31 5d0a  r = f(email)[1].
-0000aa70: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-0000aa80: 7272 6f72 2061 6e64 2065 6d61 696c 206e  rror and email n
-0000aa90: 6f74 2069 6e20 6261 645f 656d 6169 6c73  ot in bad_emails
-0000aaa0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000aab0: 2020 6261 645f 656d 6169 6c73 2e61 7070    bad_emails.app
-0000aac0: 656e 6428 656d 6169 6c29 0a20 2020 2020  end(email).     
-0000aad0: 2020 2069 6620 6261 645f 656d 6169 6c73     if bad_emails
-0000aae0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0000aaf0: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-0000ab00: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-0000ab10: 2020 2020 2073 656c 662e 7472 616e 736c       self.transl
-0000ab20: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-0000ab30: 6d65 7373 6167 6529 2025 2022 2c20 222e  message) % ", ".
-0000ab40: 6a6f 696e 2862 6164 5f65 6d61 696c 7329  join(bad_emails)
-0000ab50: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-0000ab60: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
-0000ab70: 6c75 650a 0a20 2020 2064 6566 2066 6f72  lue..    def for
-0000ab80: 6d61 7474 6572 2873 656c 662c 2076 616c  matter(self, val
-0000ab90: 7565 2c20 726f 773d 4e6f 6e65 293a 0a20  ue, row=None):. 
-0000aba0: 2020 2020 2020 2072 6574 7572 6e20 222c         return ",
-0000abb0: 2022 2e6a 6f69 6e28 7661 6c75 6520 6f72   ".join(value or
-0000abc0: 205b 5d29 0a0a 0a23 2055 524c 2073 6368   [])...# URL sch
-0000abd0: 656d 6520 736f 7572 6365 3a0a 2320 3c68  eme source:.# <h
-0000abe0: 7474 703a 2f2f 656e 2e77 696b 6970 6564  ttp://en.wikiped
-0000abf0: 6961 2e6f 7267 2f77 696b 692f 5552 495f  ia.org/wiki/URI_
-0000ac00: 7363 6865 6d65 3e20 6f62 7461 696e 6564  scheme> obtained
-0000ac10: 206f 6e20 3230 3038 2d4e 6f76 2d31 300a   on 2008-Nov-10.
-0000ac20: 0a6f 6666 6963 6961 6c5f 7572 6c5f 7363  .official_url_sc
-0000ac30: 6865 6d65 7320 3d20 5b0a 2020 2020 2261  hemes = [.    "a
-0000ac40: 6161 222c 0a20 2020 2022 6161 6173 222c  aa",.    "aaas",
-0000ac50: 0a20 2020 2022 6163 6170 222c 0a20 2020  .    "acap",.   
-0000ac60: 2022 6361 7022 2c0a 2020 2020 2263 6964   "cap",.    "cid
-0000ac70: 222c 0a20 2020 2022 6372 6964 222c 0a20  ",.    "crid",. 
-0000ac80: 2020 2022 6461 7461 222c 0a20 2020 2022     "data",.    "
-0000ac90: 6461 7622 2c0a 2020 2020 2264 6963 7422  dav",.    "dict"
-0000aca0: 2c0a 2020 2020 2264 6e73 222c 0a20 2020  ,.    "dns",.   
-0000acb0: 2022 6661 7822 2c0a 2020 2020 2266 696c   "fax",.    "fil
-0000acc0: 6522 2c0a 2020 2020 2266 7470 222c 0a20  e",.    "ftp",. 
-0000acd0: 2020 2022 676f 222c 0a20 2020 2022 676f     "go",.    "go
-0000ace0: 7068 6572 222c 0a20 2020 2022 6833 3233  pher",.    "h323
-0000acf0: 222c 0a20 2020 2022 6874 7470 222c 0a20  ",.    "http",. 
-0000ad00: 2020 2022 6874 7470 7322 2c0a 2020 2020     "https",.    
-0000ad10: 2269 6361 7022 2c0a 2020 2020 2269 6d22  "icap",.    "im"
-0000ad20: 2c0a 2020 2020 2269 6d61 7022 2c0a 2020  ,.    "imap",.  
-0000ad30: 2020 2269 6e66 6f22 2c0a 2020 2020 2269    "info",.    "i
-0000ad40: 7070 222c 0a20 2020 2022 6972 6973 222c  pp",.    "iris",
-0000ad50: 0a20 2020 2022 6972 6973 2e62 6565 7022  .    "iris.beep"
-0000ad60: 2c0a 2020 2020 2269 7269 732e 7870 6322  ,.    "iris.xpc"
-0000ad70: 2c0a 2020 2020 2269 7269 732e 7870 6373  ,.    "iris.xpcs
-0000ad80: 222c 0a20 2020 2022 6972 6973 2e6c 7773  ",.    "iris.lws
-0000ad90: 222c 0a20 2020 2022 6c64 6170 222c 0a20  ",.    "ldap",. 
-0000ada0: 2020 2022 6d61 696c 746f 222c 0a20 2020     "mailto",.   
-0000adb0: 2022 6d69 6422 2c0a 2020 2020 226d 6f64   "mid",.    "mod
-0000adc0: 656d 222c 0a20 2020 2022 6d73 7270 222c  em",.    "msrp",
-0000add0: 0a20 2020 2022 6d73 7270 7322 2c0a 2020  .    "msrps",.  
-0000ade0: 2020 226d 7471 7022 2c0a 2020 2020 226d    "mtqp",.    "m
-0000adf0: 7570 6461 7465 222c 0a20 2020 2022 6e65  update",.    "ne
-0000ae00: 7773 222c 0a20 2020 2022 6e66 7322 2c0a  ws",.    "nfs",.
-0000ae10: 2020 2020 226e 6e74 7022 2c0a 2020 2020      "nntp",.    
-0000ae20: 226f 7061 7175 656c 6f63 6b74 6f6b 656e  "opaquelocktoken
-0000ae30: 222c 0a20 2020 2022 706f 7022 2c0a 2020  ",.    "pop",.  
-0000ae40: 2020 2270 7265 7322 2c0a 2020 2020 2270    "pres",.    "p
-0000ae50: 726f 7370 6572 6f22 2c0a 2020 2020 2272  rospero",.    "r
-0000ae60: 7473 7022 2c0a 2020 2020 2273 6572 7669  tsp",.    "servi
-0000ae70: 6365 222c 0a20 2020 2022 7368 7474 7022  ce",.    "shttp"
-0000ae80: 2c0a 2020 2020 2273 6970 222c 0a20 2020  ,.    "sip",.   
-0000ae90: 2022 7369 7073 222c 0a20 2020 2022 736e   "sips",.    "sn
-0000aea0: 6d70 222c 0a20 2020 2022 736f 6170 2e62  mp",.    "soap.b
-0000aeb0: 6565 7022 2c0a 2020 2020 2273 6f61 702e  eep",.    "soap.
-0000aec0: 6265 6570 7322 2c0a 2020 2020 2274 6167  beeps",.    "tag
-0000aed0: 222c 0a20 2020 2022 7465 6c22 2c0a 2020  ",.    "tel",.  
-0000aee0: 2020 2274 656c 6e65 7422 2c0a 2020 2020    "telnet",.    
-0000aef0: 2274 6674 7022 2c0a 2020 2020 2274 6869  "tftp",.    "thi
-0000af00: 736d 6573 7361 6765 222c 0a20 2020 2022  smessage",.    "
-0000af10: 7469 7022 2c0a 2020 2020 2274 7622 2c0a  tip",.    "tv",.
-0000af20: 2020 2020 2275 726e 222c 0a20 2020 2022      "urn",.    "
-0000af30: 7665 6d6d 6922 2c0a 2020 2020 2277 6169  vemmi",.    "wai
-0000af40: 7322 2c0a 2020 2020 2278 6d6c 7270 632e  s",.    "xmlrpc.
-0000af50: 6265 6570 222c 0a20 2020 2022 786d 6c72  beep",.    "xmlr
-0000af60: 7063 2e62 6565 7022 2c0a 2020 2020 2278  pc.beep",.    "x
-0000af70: 6d70 7022 2c0a 2020 2020 227a 3339 2e35  mpp",.    "z39.5
-0000af80: 3072 222c 0a20 2020 2022 7a33 392e 3530  0r",.    "z39.50
-0000af90: 7322 2c0a 5d0a 756e 6f66 6669 6369 616c  s",.].unofficial
-0000afa0: 5f75 726c 5f73 6368 656d 6573 203d 205b  _url_schemes = [
-0000afb0: 0a20 2020 2022 6162 6f75 7422 2c0a 2020  .    "about",.  
-0000afc0: 2020 2261 6469 756d 7874 7261 222c 0a20    "adiumxtra",. 
-0000afd0: 2020 2022 6169 6d22 2c0a 2020 2020 2261     "aim",.    "a
-0000afe0: 6670 222c 0a20 2020 2022 6177 222c 0a20  fp",.    "aw",. 
-0000aff0: 2020 2022 6361 6c6c 746f 222c 0a20 2020     "callto",.   
-0000b000: 2022 6368 726f 6d65 222c 0a20 2020 2022   "chrome",.    "
-0000b010: 6376 7322 2c0a 2020 2020 2265 6432 6b22  cvs",.    "ed2k"
-0000b020: 2c0a 2020 2020 2266 6565 6422 2c0a 2020  ,.    "feed",.  
-0000b030: 2020 2266 6973 6822 2c0a 2020 2020 2267    "fish",.    "g
-0000b040: 6722 2c0a 2020 2020 2267 697a 6d6f 7072  g",.    "gizmopr
-0000b050: 6f6a 6563 7422 2c0a 2020 2020 2269 6178  oject",.    "iax
-0000b060: 3222 2c0a 2020 2020 2269 7263 222c 0a20  2",.    "irc",. 
-0000b070: 2020 2022 6972 6373 222c 0a20 2020 2022     "ircs",.    "
-0000b080: 6974 6d73 222c 0a20 2020 2022 6a61 7222  itms",.    "jar"
-0000b090: 2c0a 2020 2020 226a 6176 6173 6372 6970  ,.    "javascrip
-0000b0a0: 7422 2c0a 2020 2020 226b 6579 7061 7263  t",.    "keyparc
-0000b0b0: 222c 0a20 2020 2022 6c61 7374 666d 222c  ",.    "lastfm",
-0000b0c0: 0a20 2020 2022 6c64 6170 7322 2c0a 2020  .    "ldaps",.  
-0000b0d0: 2020 226d 6167 6e65 7422 2c0a 2020 2020    "magnet",.    
-0000b0e0: 226d 6d73 222c 0a20 2020 2022 6d73 6e69  "mms",.    "msni
-0000b0f0: 6d22 2c0a 2020 2020 226d 766e 222c 0a20  m",.    "mvn",. 
-0000b100: 2020 2022 6e6f 7465 7322 2c0a 2020 2020     "notes",.    
-0000b110: 226e 7366 7722 2c0a 2020 2020 2270 7379  "nsfw",.    "psy
-0000b120: 6322 2c0a 2020 2020 2270 6170 6172 617a  c",.    "paparaz
-0000b130: 7a69 3a68 7474 7022 2c0a 2020 2020 2272  zi:http",.    "r
-0000b140: 6d69 222c 0a20 2020 2022 7273 796e 6322  mi",.    "rsync"
-0000b150: 2c0a 2020 2020 2273 6563 6f6e 646c 6966  ,.    "secondlif
-0000b160: 6522 2c0a 2020 2020 2273 676e 222c 0a20  e",.    "sgn",. 
-0000b170: 2020 2022 736b 7970 6522 2c0a 2020 2020     "skype",.    
-0000b180: 2273 7368 222c 0a20 2020 2022 7366 7470  "ssh",.    "sftp
-0000b190: 222c 0a20 2020 2022 736d 6222 2c0a 2020  ",.    "smb",.  
-0000b1a0: 2020 2273 6d73 222c 0a20 2020 2022 736f    "sms",.    "so
-0000b1b0: 6c64 6174 222c 0a20 2020 2022 7374 6561  ldat",.    "stea
-0000b1c0: 6d22 2c0a 2020 2020 2273 766e 222c 0a20  m",.    "svn",. 
-0000b1d0: 2020 2022 7465 616d 7370 6561 6b22 2c0a     "teamspeak",.
-0000b1e0: 2020 2020 2275 6e72 6561 6c22 2c0a 2020      "unreal",.  
-0000b1f0: 2020 2275 7432 3030 3422 2c0a 2020 2020    "ut2004",.    
-0000b200: 2276 656e 7472 696c 6f22 2c0a 2020 2020  "ventrilo",.    
-0000b210: 2276 6965 772d 736f 7572 6365 222c 0a20  "view-source",. 
-0000b220: 2020 2022 7765 6263 616c 222c 0a20 2020     "webcal",.   
-0000b230: 2022 7779 6369 7779 6722 2c0a 2020 2020   "wyciwyg",.    
-0000b240: 2278 6669 7265 222c 0a20 2020 2022 7872  "xfire",.    "xr
-0000b250: 6922 2c0a 2020 2020 2279 6d73 6772 222c  i",.    "ymsgr",
-0000b260: 0a5d 0a61 6c6c 5f75 726c 5f73 6368 656d  .].all_url_schem
-0000b270: 6573 203d 205b 4e6f 6e65 5d20 2b20 6f66  es = [None] + of
-0000b280: 6669 6369 616c 5f75 726c 5f73 6368 656d  ficial_url_schem
-0000b290: 6573 202b 2075 6e6f 6666 6963 6961 6c5f  es + unofficial_
-0000b2a0: 7572 6c5f 7363 6865 6d65 730a 6874 7470  url_schemes.http
-0000b2b0: 5f73 6368 656d 6573 203d 205b 4e6f 6e65  _schemes = [None
-0000b2c0: 2c20 2268 7474 7022 2c20 2268 7474 7073  , "http", "https
-0000b2d0: 225d 0a0a 2320 4465 6669 6e65 6420 696e  "]..# Defined in
-0000b2e0: 2052 4643 2033 3439 302c 2053 6563 7469   RFC 3490, Secti
-0000b2f0: 6f6e 2033 2e31 2c20 5265 7175 6972 656d  on 3.1, Requirem
-0000b300: 656e 7420 2331 0a23 2055 7365 2074 6869  ent #1.# Use thi
-0000b310: 7320 7265 6765 7820 746f 2073 706c 6974  s regex to split
-0000b320: 2074 6865 2061 7574 686f 7269 7479 2063   the authority c
-0000b330: 6f6d 706f 6e65 6e74 206f 6620 6120 756e  omponent of a un
-0000b340: 6963 6f64 6520 5552 4c20 696e 746f 0a23  icode URL into.#
-0000b350: 2069 7473 2063 6f6d 706f 6e65 6e74 206c   its component l
-0000b360: 6162 656c 730a 5245 4745 585f 4155 5448  abels.REGEX_AUTH
-0000b370: 4f52 4954 595f 5350 4c49 5454 4552 203d  ORITY_SPLITTER =
-0000b380: 2022 5b5c 7530 3032 655c 7533 3030 325c   "[\u002e\u3002\
-0000b390: 7566 6630 655c 7566 6636 315d 220a 0a0a  uff0e\uff61]"...
-0000b3a0: 6465 6620 6573 6361 7065 5f75 6e69 636f  def escape_unico
-0000b3b0: 6465 2873 7472 696e 6729 3a0a 2020 2020  de(string):.    
-0000b3c0: 2222 220a 2020 2020 436f 6e76 6572 7473  """.    Converts
-0000b3d0: 2061 2075 6e69 636f 6465 2073 7472 696e   a unicode strin
-0000b3e0: 6720 696e 746f 2055 532d 4153 4349 492c  g into US-ASCII,
-0000b3f0: 2075 7369 6e67 2061 2073 696d 706c 6520   using a simple 
-0000b400: 636f 6e76 6572 7369 6f6e 2073 6368 656d  conversion schem
-0000b410: 652e 0a20 2020 2045 6163 6820 756e 6963  e..    Each unic
-0000b420: 6f64 6520 6368 6172 6163 7465 7220 7468  ode character th
-0000b430: 6174 2064 6f65 7320 6e6f 7420 6861 7665  at does not have
-0000b440: 2061 2055 532d 4153 4349 4920 6571 7569   a US-ASCII equi
-0000b450: 7661 6c65 6e74 2069 730a 2020 2020 636f  valent is.    co
-0000b460: 6e76 6572 7465 6420 696e 746f 2061 2055  nverted into a U
-0000b470: 524c 2065 7363 6170 6564 2066 6f72 6d20  RL escaped form 
-0000b480: 6261 7365 6420 6f6e 2069 7473 2068 6578  based on its hex
-0000b490: 6164 6563 696d 616c 2076 616c 7565 2e0a  adecimal value..
-0000b4a0: 2020 2020 466f 7220 6578 616d 706c 652c      For example,
-0000b4b0: 2074 6865 2075 6e69 636f 6465 2063 6861   the unicode cha
-0000b4c0: 7261 6374 6572 2027 5c5c 7534 6538 3627  racter '\\u4e86'
-0000b4d0: 2077 696c 6c20 6265 636f 6d65 2074 6865   will become the
-0000b4e0: 2073 7472 696e 6720 2725 3465 2538 3627   string '%4e%86'
-0000b4f0: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
-0000b500: 2020 2020 7374 7269 6e67 3a20 756e 6963      string: unic
-0000b510: 6f64 6520 7374 7269 6e67 2c20 7468 6520  ode string, the 
-0000b520: 756e 6963 6f64 6520 7374 7269 6e67 2074  unicode string t
-0000b530: 6f20 636f 6e76 6572 7420 696e 746f 2061  o convert into a
-0000b540: 6e0a 2020 2020 2020 2020 2020 2020 6573  n.            es
-0000b550: 6361 7065 6420 5553 2d41 5343 4949 2066  caped US-ASCII f
-0000b560: 6f72 6d0a 0a20 2020 2052 6574 7572 6e73  orm..    Returns
-0000b570: 3a0a 2020 2020 2020 2020 7374 7269 6e67  :.        string
-0000b580: 3a20 7468 6520 5553 2d41 5343 4949 2065  : the US-ASCII e
-0000b590: 7363 6170 6564 2066 6f72 6d20 6f66 2074  scaped form of t
-0000b5a0: 6865 2069 6e70 7574 7465 6420 7374 7269  he inputted stri
-0000b5b0: 6e67 0a0a 2020 2020 4061 7574 686f 723a  ng..    @author:
-0000b5c0: 204a 6f6e 6174 6861 6e20 4265 6e6e 0a20   Jonathan Benn. 
-0000b5d0: 2020 2022 2222 0a20 2020 2072 6574 7572     """.    retur
-0000b5e0: 6e56 616c 7565 203d 2053 7472 696e 6749  nValue = StringI
-0000b5f0: 4f28 290a 0a20 2020 2066 6f72 2063 6861  O()..    for cha
-0000b600: 7261 6374 6572 2069 6e20 7374 7269 6e67  racter in string
-0000b610: 3a0a 2020 2020 2020 2020 636f 6465 203d  :.        code =
-0000b620: 206f 7264 2863 6861 7261 6374 6572 290a   ord(character).
-0000b630: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
-0000b640: 3e20 3078 3746 3a0a 2020 2020 2020 2020  > 0x7F:.        
-0000b650: 2020 2020 6865 7843 6f64 6520 3d20 6865      hexCode = he
-0000b660: 7828 636f 6465 290a 2020 2020 2020 2020  x(code).        
-0000b670: 2020 2020 7265 7475 726e 5661 6c75 652e      returnValue.
-0000b680: 7772 6974 6528 2225 2220 2b20 6865 7843  write("%" + hexC
-0000b690: 6f64 655b 323a 345d 202b 2022 2522 202b  ode[2:4] + "%" +
-0000b6a0: 2068 6578 436f 6465 5b34 3a36 5d29 0a20   hexCode[4:6]). 
-0000b6b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000b6c0: 2020 2020 2020 2020 2072 6574 7572 6e56           returnV
-0000b6d0: 616c 7565 2e77 7269 7465 2863 6861 7261  alue.write(chara
-0000b6e0: 6374 6572 290a 0a20 2020 2072 6574 7572  cter)..    retur
-0000b6f0: 6e20 7265 7475 726e 5661 6c75 652e 6765  n returnValue.ge
-0000b700: 7476 616c 7565 2829 0a0a 0a64 6566 2075  tvalue()...def u
-0000b710: 6e69 636f 6465 5f74 6f5f 6173 6369 695f  nicode_to_ascii_
-0000b720: 6175 7468 6f72 6974 7928 6175 7468 6f72  authority(author
-0000b730: 6974 7929 3a0a 2020 2020 2222 220a 2020  ity):.    """.  
-0000b740: 2020 466f 6c6c 6f77 7320 7468 6520 7374    Follows the st
-0000b750: 6570 7320 696e 2052 4643 2033 3439 302c  eps in RFC 3490,
-0000b760: 2053 6563 7469 6f6e 2034 2074 6f20 636f   Section 4 to co
-0000b770: 6e76 6572 7420 6120 756e 6963 6f64 6520  nvert a unicode 
-0000b780: 6175 7468 6f72 6974 790a 2020 2020 7374  authority.    st
-0000b790: 7269 6e67 2069 6e74 6f20 6974 7320 4153  ring into its AS
-0000b7a0: 4349 4920 6571 7569 7661 6c65 6e74 2e0a  CII equivalent..
-0000b7b0: 2020 2020 466f 7220 6578 616d 706c 652c      For example,
-0000b7c0: 2075 2777 7777 2e41 6c6c 6961 6e63 6566   u'www.Alliancef
-0000b7d0: 7261 6e5c 5c78 6537 6169 7365 2e6e 7527  ran\\xe7aise.nu'
-0000b7e0: 2077 696c 6c20 6265 2063 6f6e 7665 7274   will be convert
-0000b7f0: 6564 2069 6e74 6f0a 2020 2020 2777 7777  ed into.    'www
-0000b800: 2e78 6e2d 2d61 6c6c 6961 6e63 6566 7261  .xn--alliancefra
-0000b810: 6e61 6973 652d 6e70 622e 6e75 270a 0a20  naise-npb.nu'.. 
-0000b820: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0000b830: 2061 7574 686f 7269 7479 3a20 756e 6963   authority: unic
-0000b840: 6f64 6520 7374 7269 6e67 2c20 7468 6520  ode string, the 
-0000b850: 5552 4c20 6175 7468 6f72 6974 7920 636f  URL authority co
-0000b860: 6d70 6f6e 656e 7420 746f 2063 6f6e 7665  mponent to conve
-0000b870: 7274 2c0a 2020 2020 2020 2020 2020 2020  rt,.            
-0000b880: 652e 672e 2075 2777 7777 2e41 6c6c 6961  e.g. u'www.Allia
-0000b890: 6e63 6566 7261 6e5c 5c78 6537 6169 7365  ncefran\\xe7aise
-0000b8a0: 2e6e 7527 0a0a 2020 2020 5265 7475 726e  .nu'..    Return
-0000b8b0: 733a 0a20 2020 2020 2020 2073 7472 696e  s:.        strin
-0000b8c0: 673a 2074 6865 2055 532d 4153 4349 4920  g: the US-ASCII 
-0000b8d0: 6368 6172 6163 7465 7220 6571 7569 7661  character equiva
-0000b8e0: 6c65 6e74 2074 6f20 7468 6520 696e 7075  lent to the inpu
-0000b8f0: 7474 6564 2061 7574 686f 7269 7479 2c0a  tted authority,.
-0000b900: 2020 2020 2020 2020 2020 2020 2065 2e67               e.g
-0000b910: 2e20 2777 7777 2e78 6e2d 2d61 6c6c 6961  . 'www.xn--allia
-0000b920: 6e63 6566 7261 6e61 6973 652d 6e70 622e  ncefranaise-npb.
-0000b930: 6e75 270a 0a20 2020 2052 6169 7365 733a  nu'..    Raises:
-0000b940: 0a20 2020 2020 2020 2045 7863 6570 7469  .        Excepti
-0000b950: 6f6e 3a20 6966 2074 6865 2066 756e 6374  on: if the funct
-0000b960: 696f 6e20 6973 206e 6f74 2061 626c 6520  ion is not able 
-0000b970: 746f 2063 6f6e 7665 7274 2074 6865 2069  to convert the i
-0000b980: 6e70 7574 7465 640a 2020 2020 2020 2020  nputted.        
-0000b990: 2020 2020 6175 7468 6f72 6974 790a 0a20      authority.. 
-0000b9a0: 2020 2040 6175 7468 6f72 3a20 4a6f 6e61     @author: Jona
-0000b9b0: 7468 616e 2042 656e 6e0a 2020 2020 2222  than Benn.    ""
-0000b9c0: 220a 2020 2020 2320 5246 4320 3334 3930  ".    # RFC 3490
-0000b9d0: 2c20 5365 6374 696f 6e20 342c 2053 7465  , Section 4, Ste
-0000b9e0: 7020 310a 2020 2020 2320 5468 6520 656e  p 1.    # The en
-0000b9f0: 636f 6469 6e67 732e 6964 6e61 2050 7974  codings.idna Pyt
-0000ba00: 686f 6e20 6d6f 6475 6c65 2061 7373 756d  hon module assum
-0000ba10: 6573 2074 6861 7420 416c 6c6f 7755 6e61  es that AllowUna
-0000ba20: 7373 6967 6e65 6420 3d3d 2054 7275 650a  ssigned == True.
-0000ba30: 0a20 2020 2023 2052 4643 2033 3439 302c  .    # RFC 3490,
-0000ba40: 2053 6563 7469 6f6e 2034 2c20 5374 6570   Section 4, Step
-0000ba50: 2032 0a20 2020 206c 6162 656c 7320 3d20   2.    labels = 
-0000ba60: 7265 2e73 706c 6974 2852 4547 4558 5f41  re.split(REGEX_A
-0000ba70: 5554 484f 5249 5459 5f53 504c 4954 5445  UTHORITY_SPLITTE
-0000ba80: 522c 2061 7574 686f 7269 7479 290a 0a20  R, authority).. 
-0000ba90: 2020 2023 2052 4643 2033 3439 302c 2053     # RFC 3490, S
-0000baa0: 6563 7469 6f6e 2034 2c20 5374 6570 2033  ection 4, Step 3
-0000bab0: 0a20 2020 2023 2054 6865 2065 6e63 6f64  .    # The encod
-0000bac0: 696e 6773 2e69 646e 6120 5079 7468 6f6e  ings.idna Python
-0000bad0: 206d 6f64 756c 6520 6173 7375 6d65 7320   module assumes 
-0000bae0: 7468 6174 2055 7365 5354 4433 4153 4349  that UseSTD3ASCI
-0000baf0: 4952 756c 6573 203d 3d20 4661 6c73 650a  IRules == False.
-0000bb00: 0a20 2020 2023 2052 4643 2033 3439 302c  .    # RFC 3490,
-0000bb10: 2053 6563 7469 6f6e 2034 2c20 5374 6570   Section 4, Step
-0000bb20: 2034 0a20 2020 2023 2057 6520 7573 6520   4.    # We use 
-0000bb30: 7468 6520 546f 4153 4349 4920 6f70 6572  the ToASCII oper
-0000bb40: 6174 696f 6e20 6265 6361 7573 6520 7765  ation because we
-0000bb50: 2061 7265 2061 626f 7574 2074 6f20 7075   are about to pu
-0000bb60: 7420 7468 6520 6175 7468 6f72 6974 790a  t the authority.
-0000bb70: 2020 2020 2320 696e 746f 2061 6e20 4944      # into an ID
-0000bb80: 4e2d 756e 6177 6172 6520 736c 6f74 0a20  N-unaware slot. 
-0000bb90: 2020 2061 7363 6969 4c61 6265 6c73 203d     asciiLabels =
-0000bba0: 205b 5d0a 2020 2020 666f 7220 6c61 6265   [].    for labe
-0000bbb0: 6c20 696e 206c 6162 656c 733a 0a20 2020  l in labels:.   
-0000bbc0: 2020 2020 2069 6620 6c61 6265 6c3a 0a20       if label:. 
-0000bbd0: 2020 2020 2020 2020 2020 2061 7363 6969             ascii
-0000bbe0: 4c61 6265 6c73 2e61 7070 656e 6428 746f  Labels.append(to
-0000bbf0: 5f6e 6174 6976 6528 656e 636f 6469 6e67  _native(encoding
-0000bc00: 732e 6964 6e61 2e54 6f41 5343 4949 286c  s.idna.ToASCII(l
-0000bc10: 6162 656c 2929 290a 2020 2020 2020 2020  abel))).        
-0000bc20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000bc30: 2020 2320 656e 636f 6469 6e67 732e 6964    # encodings.id
-0000bc40: 6e61 2e54 6f41 5343 4949 2064 6f65 7320  na.ToASCII does 
-0000bc50: 6e6f 7420 6163 6365 7074 2061 6e20 656d  not accept an em
-0000bc60: 7074 7920 7374 7269 6e67 2c20 6275 740a  pty string, but.
-0000bc70: 2020 2020 2020 2020 2020 2020 2320 6974              # it
-0000bc80: 2069 7320 6e65 6365 7373 6172 7920 666f   is necessary fo
-0000bc90: 7220 7573 2074 6f20 616c 6c6f 7720 666f  r us to allow fo
-0000bca0: 7220 656d 7074 7920 6c61 6265 6c73 2073  r empty labels s
-0000bcb0: 6f20 7468 6174 2077 650a 2020 2020 2020  o that we.      
-0000bcc0: 2020 2020 2020 2320 646f 6e27 7420 6d6f        # don't mo
-0000bcd0: 6469 6679 2074 6865 2055 524c 0a20 2020  dify the URL.   
-0000bce0: 2020 2020 2020 2020 2061 7363 6969 4c61           asciiLa
-0000bcf0: 6265 6c73 2e61 7070 656e 6428 2222 290a  bels.append("").
-0000bd00: 2020 2020 2320 5246 4320 3334 3930 2c20      # RFC 3490, 
-0000bd10: 5365 6374 696f 6e20 342c 2053 7465 7020  Section 4, Step 
-0000bd20: 350a 2020 2020 7265 7475 726e 2073 7472  5.    return str
-0000bd30: 2872 6564 7563 6528 6c61 6d62 6461 2078  (reduce(lambda x
-0000bd40: 2c20 793a 2078 202b 2075 6e69 6368 7228  , y: x + unichr(
-0000bd50: 3078 3030 3245 2920 2b20 792c 2061 7363  0x002E) + y, asc
-0000bd60: 6969 4c61 6265 6c73 2929 0a0a 0a64 6566  iiLabels))...def
-0000bd70: 2075 6e69 636f 6465 5f74 6f5f 6173 6369   unicode_to_asci
-0000bd80: 695f 7572 6c28 7572 6c2c 2070 7265 7065  i_url(url, prepe
-0000bd90: 6e64 5f73 6368 656d 6529 3a0a 2020 2020  nd_scheme):.    
-0000bda0: 2222 220a 2020 2020 436f 6e76 6572 7473  """.    Converts
-0000bdb0: 2074 6865 2069 6e70 7574 7465 6420 756e   the inputted un
-0000bdc0: 6963 6f64 6520 7572 6c20 696e 746f 2061  icode url into a
-0000bdd0: 2055 532d 4153 4349 4920 6571 7569 7661   US-ASCII equiva
-0000bde0: 6c65 6e74 2e20 5468 6973 2066 756e 6374  lent. This funct
-0000bdf0: 696f 6e0a 2020 2020 676f 6573 2061 206c  ion.    goes a l
-0000be00: 6974 746c 6520 6265 796f 6e64 2052 4643  ittle beyond RFC
-0000be10: 2033 3439 302c 2077 6869 6368 2069 7320   3490, which is 
-0000be20: 6c69 6d69 7465 6420 696e 2073 636f 7065  limited in scope
-0000be30: 2074 6f20 7468 6520 646f 6d61 696e 206e   to the domain n
-0000be40: 616d 650a 2020 2020 2861 7574 686f 7269  ame.    (authori
-0000be50: 7479 2920 6f6e 6c79 2e20 4865 7265 2c20  ty) only. Here, 
-0000be60: 7468 6520 6675 6e63 7469 6f6e 616c 6974  the functionalit
-0000be70: 7920 6973 2065 7870 616e 6465 6420 746f  y is expanded to
-0000be80: 2077 6861 7420 7761 7320 6f62 7365 7276   what was observ
-0000be90: 6564 0a20 2020 206f 6e20 5769 6b69 7065  ed.    on Wikipe
-0000bea0: 6469 6120 6f6e 2032 3030 392d 4a61 6e2d  dia on 2009-Jan-
-0000beb0: 3232 3a0a 0a20 2020 2020 2020 436f 6d70  22:..       Comp
-0000bec0: 6f6e 656e 7420 2020 2043 616e 2055 7365  onent    Can Use
-0000bed0: 2055 6e69 636f 6465 3f0a 2020 2020 2020   Unicode?.      
-0000bee0: 202d 2d2d 2d2d 2d2d 2d2d 2020 2020 2d2d   ---------    --
-0000bef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a20  --------------. 
-0000bf00: 2020 2020 2020 7363 6865 6d65 2020 2020        scheme    
-0000bf10: 2020 204e 6f0a 2020 2020 2020 2061 7574     No.       aut
-0000bf20: 686f 7269 7479 2020 2020 5965 730a 2020  hority    Yes.  
-0000bf30: 2020 2020 2070 6174 6820 2020 2020 2020       path       
-0000bf40: 2020 5965 730a 2020 2020 2020 2071 7565    Yes.       que
-0000bf50: 7279 2020 2020 2020 2020 5965 730a 2020  ry        Yes.  
-0000bf60: 2020 2020 2066 7261 676d 656e 7420 2020       fragment   
-0000bf70: 2020 4e6f 0a0a 2020 2020 5468 6520 6175    No..    The au
-0000bf80: 7468 6f72 6974 7920 636f 6d70 6f6e 656e  thority componen
-0000bf90: 7420 6765 7473 2063 6f6e 7665 7274 6564  t gets converted
-0000bfa0: 2074 6f20 7075 6e79 636f 6465 2c20 6275   to punycode, bu
-0000bfb0: 7420 6f63 6375 7272 656e 6365 7320 6f66  t occurrences of
-0000bfc0: 0a20 2020 2075 6e69 636f 6465 2069 6e20  .    unicode in 
-0000bfd0: 6f74 6865 7220 636f 6d70 6f6e 656e 7473  other components
-0000bfe0: 2067 6574 2063 6f6e 7665 7274 6564 2069   get converted i
-0000bff0: 6e74 6f20 6120 7061 6972 206f 6620 5552  nto a pair of UR
-0000c000: 4920 6573 6361 7065 7320 2877 650a 2020  I escapes (we.  
-0000c010: 2020 6173 7375 6d65 2034 2d62 7974 6520    assume 4-byte 
-0000c020: 756e 6963 6f64 6529 2e20 452e 672e 2074  unicode). E.g. t
-0000c030: 6865 2075 6e69 636f 6465 2063 6861 7261  he unicode chara
-0000c040: 6374 6572 2055 2b34 4532 4420 7769 6c6c  cter U+4E2D will
-0000c050: 2062 650a 2020 2020 636f 6e76 6572 7465   be.    converte
-0000c060: 6420 696e 746f 2027 2534 4525 3244 272e  d into '%4E%2D'.
-0000c070: 2054 6573 7469 6e67 2077 6974 6820 4669   Testing with Fi
-0000c080: 7265 666f 7820 7633 2e30 2e35 2068 6173  refox v3.0.5 has
-0000c090: 2073 686f 776e 2074 6861 7420 6974 2063   shown that it c
-0000c0a0: 616e 0a20 2020 2075 6e64 6572 7374 616e  an.    understan
-0000c0b0: 6420 7468 6973 206b 696e 6420 6f66 2055  d this kind of U
-0000c0c0: 5249 2065 6e63 6f64 696e 672e 0a0a 2020  RI encoding...  
-0000c0d0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-0000c0e0: 7572 6c3a 2075 6e69 636f 6465 2073 7472  url: unicode str
-0000c0f0: 696e 672c 2074 6865 2055 524c 2074 6f20  ing, the URL to 
-0000c100: 636f 6e76 6572 7420 6672 6f6d 2075 6e69  convert from uni
-0000c110: 636f 6465 2069 6e74 6f20 5553 2d41 5343  code into US-ASC
-0000c120: 4949 0a20 2020 2020 2020 2070 7265 7065  II.        prepe
-0000c130: 6e64 5f73 6368 656d 653a 2073 7472 696e  nd_scheme: strin
-0000c140: 672c 2061 2070 726f 746f 636f 6c20 7363  g, a protocol sc
-0000c150: 6865 6d65 2074 6f20 7072 6570 656e 6420  heme to prepend 
-0000c160: 746f 2074 6865 2055 524c 2069 660a 2020  to the URL if.  
-0000c170: 2020 2020 2020 2020 2020 7765 2772 6520            we're 
-0000c180: 6861 7669 6e67 2074 726f 7562 6c65 2070  having trouble p
-0000c190: 6172 7369 6e67 2069 742e 0a20 2020 2020  arsing it..     
-0000c1a0: 2020 2020 2020 2065 2e67 2e20 2268 7474         e.g. "htt
-0000c1b0: 7022 2e20 496e 7075 7420 4e6f 6e65 2074  p". Input None t
-0000c1c0: 6f20 6469 7361 626c 6520 7468 6973 2066  o disable this f
-0000c1d0: 756e 6374 696f 6e61 6c69 7479 0a0a 2020  unctionality..  
-0000c1e0: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
-0000c1f0: 2020 2073 7472 696e 673a 2061 2055 532d     string: a US-
-0000c200: 4153 4349 4920 6571 7569 7661 6c65 6e74  ASCII equivalent
-0000c210: 206f 6620 7468 6520 696e 7075 7474 6564   of the inputted
-0000c220: 2075 726c 0a0a 2020 2020 4061 7574 686f   url..    @autho
-0000c230: 723a 204a 6f6e 6174 6861 6e20 4265 6e6e  r: Jonathan Benn
-0000c240: 0a20 2020 2022 2222 0a20 2020 2023 2063  .    """.    # c
-0000c250: 6f6e 7665 7274 2074 6865 2061 7574 686f  onvert the autho
-0000c260: 7269 7479 2063 6f6d 706f 6e65 6e74 206f  rity component o
-0000c270: 6620 7468 6520 5552 4c20 696e 746f 2061  f the URL into a
-0000c280: 6e20 4153 4349 4920 7075 6e79 636f 6465  n ASCII punycode
-0000c290: 2073 7472 696e 672c 0a20 2020 2023 2062   string,.    # b
-0000c2a0: 7574 2065 6e63 6f64 6520 7468 6520 7265  ut encode the re
-0000c2b0: 7374 2075 7369 6e67 2074 6865 2072 6567  st using the reg
-0000c2c0: 756c 6172 2055 5249 2063 6861 7261 6374  ular URI charact
-0000c2d0: 6572 2065 6e63 6f64 696e 670a 2020 2020  er encoding.    
-0000c2e0: 636f 6d70 6f6e 656e 7473 203d 2075 726c  components = url
-0000c2f0: 7061 7273 652e 7572 6c70 6172 7365 2875  parse.urlparse(u
-0000c300: 726c 290a 2020 2020 7072 6570 656e 6465  rl).    prepende
-0000c310: 6420 3d20 4661 6c73 650a 2020 2020 2320  d = False.    # 
-0000c320: 4966 206e 6f20 6175 7468 6f72 6974 7920  If no authority 
-0000c330: 7761 7320 666f 756e 640a 2020 2020 6966  was found.    if
-0000c340: 206e 6f74 2063 6f6d 706f 6e65 6e74 732e   not components.
-0000c350: 6e65 746c 6f63 3a0a 2020 2020 2020 2020  netloc:.        
-0000c360: 2320 5472 7920 6170 7065 6e64 696e 6720  # Try appending 
-0000c370: 6120 7363 6865 6d65 2074 6f20 7365 6520  a scheme to see 
-0000c380: 6966 2074 6861 7420 6669 7865 7320 7468  if that fixes th
-0000c390: 6520 7072 6f62 6c65 6d0a 2020 2020 2020  e problem.      
-0000c3a0: 2020 7363 6865 6d65 5f74 6f5f 7072 6570    scheme_to_prep
-0000c3b0: 656e 6420 3d20 7072 6570 656e 645f 7363  end = prepend_sc
-0000c3c0: 6865 6d65 206f 7220 2268 7474 7022 0a20  heme or "http". 
-0000c3d0: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-0000c3e0: 7320 3d20 7572 6c70 6172 7365 2e75 726c  s = urlparse.url
-0000c3f0: 7061 7273 6528 746f 5f75 6e69 636f 6465  parse(to_unicode
-0000c400: 2873 6368 656d 655f 746f 5f70 7265 7065  (scheme_to_prepe
-0000c410: 6e64 2920 2b20 223a 2f2f 2220 2b20 7572  nd) + "://" + ur
-0000c420: 6c29 0a20 2020 2020 2020 2070 7265 7065  l).        prepe
-0000c430: 6e64 6564 203d 2054 7275 650a 0a20 2020  nded = True..   
-0000c440: 2023 2069 6620 7765 2073 7469 6c6c 2063   # if we still c
-0000c450: 616e 2774 2066 696e 6420 7468 6520 6175  an't find the au
-0000c460: 7468 6f72 6974 790a 2020 2020 6966 206e  thority.    if n
-0000c470: 6f74 2063 6f6d 706f 6e65 6e74 732e 6e65  ot components.ne
-0000c480: 746c 6f63 3a0a 2020 2020 2020 2020 2320  tloc:.        # 
-0000c490: 416e 6420 6974 2773 206e 6f74 2062 6563  And it's not bec
-0000c4a0: 6175 7365 2074 6865 2075 726c 2069 7320  ause the url is 
-0000c4b0: 6120 7265 6c61 7469 7665 2075 726c 0a20  a relative url. 
-0000c4c0: 2020 2020 2020 2069 6620 6e6f 7420 7572         if not ur
-0000c4d0: 6c2e 7374 6172 7473 7769 7468 2822 2f22  l.startswith("/"
-0000c4e0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0000c4f0: 6169 7365 2045 7863 6570 7469 6f6e 280a  aise Exception(.
-0000c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c510: 224e 6f20 6175 7468 6f72 6974 7920 636f  "No authority co
-0000c520: 6d70 6f6e 656e 7420 666f 756e 642c 2022  mponent found, "
-0000c530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c540: 202b 2022 636f 756c 6420 6e6f 7420 6465   + "could not de
-0000c550: 636f 6465 2075 6e69 636f 6465 2074 6f20  code unicode to 
-0000c560: 5553 2d41 5343 4949 220a 2020 2020 2020  US-ASCII".      
-0000c570: 2020 2020 2020 290a 0a20 2020 2023 2057        )..    # W
-0000c580: 6527 7265 2068 6572 6520 6966 2077 6520  e're here if we 
-0000c590: 666f 756e 6420 616e 2061 7574 686f 7269  found an authori
-0000c5a0: 7479 2c20 6c65 7427 7320 7265 6275 696c  ty, let's rebuil
-0000c5b0: 6420 7468 6520 5552 4c0a 2020 2020 7363  d the URL.    sc
-0000c5c0: 6865 6d65 203d 2063 6f6d 706f 6e65 6e74  heme = component
-0000c5d0: 732e 7363 6865 6d65 0a20 2020 2061 7574  s.scheme.    aut
-0000c5e0: 686f 7269 7479 203d 2063 6f6d 706f 6e65  hority = compone
-0000c5f0: 6e74 732e 6e65 746c 6f63 0a20 2020 2070  nts.netloc.    p
-0000c600: 6174 6820 3d20 636f 6d70 6f6e 656e 7473  ath = components
-0000c610: 2e70 6174 680a 2020 2020 7175 6572 7920  .path.    query 
-0000c620: 3d20 636f 6d70 6f6e 656e 7473 2e71 7565  = components.que
-0000c630: 7279 0a20 2020 2066 7261 676d 656e 7420  ry.    fragment 
-0000c640: 3d20 636f 6d70 6f6e 656e 7473 2e66 7261  = components.fra
-0000c650: 676d 656e 740a 0a20 2020 2069 6620 7072  gment..    if pr
-0000c660: 6570 656e 6465 643a 0a20 2020 2020 2020  epended:.       
-0000c670: 2073 6368 656d 6520 3d20 2222 0a0a 2020   scheme = ""..  
-0000c680: 2020 756e 7061 7273 6564 203d 2075 726c    unparsed = url
-0000c690: 7061 7273 652e 7572 6c75 6e70 6172 7365  parse.urlunparse
-0000c6a0: 280a 2020 2020 2020 2020 280a 2020 2020  (.        (.    
-0000c6b0: 2020 2020 2020 2020 7363 6865 6d65 2c0a          scheme,.
-0000c6c0: 2020 2020 2020 2020 2020 2020 756e 6963              unic
-0000c6d0: 6f64 655f 746f 5f61 7363 6969 5f61 7574  ode_to_ascii_aut
-0000c6e0: 686f 7269 7479 2861 7574 686f 7269 7479  hority(authority
-0000c6f0: 292c 0a20 2020 2020 2020 2020 2020 2065  ),.            e
-0000c700: 7363 6170 655f 756e 6963 6f64 6528 7061  scape_unicode(pa
-0000c710: 7468 292c 0a20 2020 2020 2020 2020 2020  th),.           
-0000c720: 2022 222c 0a20 2020 2020 2020 2020 2020   "",.           
-0000c730: 2065 7363 6170 655f 756e 6963 6f64 6528   escape_unicode(
-0000c740: 7175 6572 7929 2c0a 2020 2020 2020 2020  query),.        
-0000c750: 2020 2020 7374 7228 6672 6167 6d65 6e74      str(fragment
-0000c760: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
-0000c770: 2029 0a20 2020 2069 6620 756e 7061 7273   ).    if unpars
-0000c780: 6564 2e73 7461 7274 7377 6974 6828 222f  ed.startswith("/
-0000c790: 2f22 293a 0a20 2020 2020 2020 2075 6e70  /"):.        unp
-0000c7a0: 6172 7365 6420 3d20 756e 7061 7273 6564  arsed = unparsed
-0000c7b0: 5b32 3a5d 2020 2320 5265 6d6f 7665 2074  [2:]  # Remove t
-0000c7c0: 6865 202f 2f20 7572 6c75 6e70 6172 7365  he // urlunparse
-0000c7d0: 2070 7574 7320 696e 2074 6865 2062 6567   puts in the beg
-0000c7e0: 696e 6e69 6e67 0a20 2020 2072 6574 7572  inning.    retur
-0000c7f0: 6e20 756e 7061 7273 6564 0a0a 0a63 6c61  n unparsed...cla
-0000c800: 7373 2049 535f 4745 4e45 5249 435f 5552  ss IS_GENERIC_UR
-0000c810: 4c28 5661 6c69 6461 746f 7229 3a0a 2020  L(Validator):.  
-0000c820: 2020 2222 220a 2020 2020 5265 6a65 6374    """.    Reject
-0000c830: 7320 6120 5552 4c20 7374 7269 6e67 2069  s a URL string i
-0000c840: 6620 616e 7920 6f66 2074 6865 2066 6f6c  f any of the fol
-0000c850: 6c6f 7769 6e67 2069 7320 7472 7565 3a0a  lowing is true:.
-0000c860: 2020 2020 2020 202a 2054 6865 2073 7472         * The str
-0000c870: 696e 6720 6973 2065 6d70 7479 206f 7220  ing is empty or 
-0000c880: 4e6f 6e65 0a20 2020 2020 2020 2a20 5468  None.       * Th
-0000c890: 6520 7374 7269 6e67 2075 7365 7320 6368  e string uses ch
-0000c8a0: 6172 6163 7465 7273 2074 6861 7420 6172  aracters that ar
-0000c8b0: 6520 6e6f 7420 616c 6c6f 7765 6420 696e  e not allowed in
-0000c8c0: 2061 2055 524c 0a20 2020 2020 2020 2a20   a URL.       * 
-0000c8d0: 5468 6520 5552 4c20 7363 6865 6d65 2073  The URL scheme s
-0000c8e0: 7065 6369 6669 6564 2028 6966 206f 6e65  pecified (if one
-0000c8f0: 2069 7320 7370 6563 6966 6965 6429 2069   is specified) i
-0000c900: 7320 6e6f 7420 7661 6c69 640a 0a20 2020  s not valid..   
-0000c910: 2042 6173 6564 206f 6e20 5246 4320 3233   Based on RFC 23
-0000c920: 3936 3a20 6874 7470 3a2f 2f77 7777 2e66  96: http://www.f
-0000c930: 6171 732e 6f72 672f 7266 6373 2f72 6663  aqs.org/rfcs/rfc
-0000c940: 3233 3936 2e68 746d 6c0a 0a20 2020 2054  2396.html..    T
-0000c950: 6869 7320 6675 6e63 7469 6f6e 206f 6e6c  his function onl
-0000c960: 7920 6368 6563 6b73 2074 6865 2055 524c  y checks the URL
-0000c970: 2773 2073 796e 7461 782e 2049 7420 646f  's syntax. It do
-0000c980: 6573 206e 6f74 2063 6865 636b 2074 6861  es not check tha
-0000c990: 7420 7468 6520 5552 4c0a 2020 2020 706f  t the URL.    po
-0000c9a0: 696e 7473 2074 6f20 6120 7265 616c 2064  ints to a real d
-0000c9b0: 6f63 756d 656e 742c 2066 6f72 2065 7861  ocument, for exa
-0000c9c0: 6d70 6c65 2c20 6f72 2074 6861 7420 6974  mple, or that it
-0000c9d0: 206f 7468 6572 7769 7365 206d 616b 6573   otherwise makes
-0000c9e0: 2073 656e 7365 0a20 2020 2073 656d 616e   sense.    seman
-0000c9f0: 7469 6361 6c6c 792e 2054 6869 7320 6675  tically. This fu
-0000ca00: 6e63 7469 6f6e 2064 6f65 7320 6175 746f  nction does auto
-0000ca10: 6d61 7469 6361 6c6c 7920 7072 6570 656e  matically prepen
-0000ca20: 6420 2768 7474 703a 2f2f 2720 696e 2066  d 'http://' in f
-0000ca30: 726f 6e74 0a20 2020 206f 6620 6120 5552  ront.    of a UR
-0000ca40: 4c20 6966 2061 6e64 206f 6e6c 7920 6966  L if and only if
-0000ca50: 2074 6861 7427 7320 6e65 6365 7373 6172   that's necessar
-0000ca60: 7920 746f 2073 7563 6365 7373 6675 6c6c  y to successfull
-0000ca70: 7920 7061 7273 6520 7468 6520 5552 4c2e  y parse the URL.
-0000ca80: 0a20 2020 2050 6c65 6173 6520 6e6f 7465  .    Please note
-0000ca90: 2074 6861 7420 6120 7363 6865 6d65 2077   that a scheme w
-0000caa0: 696c 6c20 6265 2070 7265 7065 6e64 6564  ill be prepended
-0000cab0: 206f 6e6c 7920 666f 7220 7261 7265 2063   only for rare c
-0000cac0: 6173 6573 0a20 2020 2028 652e 672e 2027  ases.    (e.g. '
-0000cad0: 676f 6f67 6c65 2e63 613a 3830 2729 0a0a  google.ca:80')..
-0000cae0: 2020 2020 5468 6520 6c69 7374 206f 6620      The list of 
-0000caf0: 616c 6c6f 7765 6420 7363 6865 6d65 7320  allowed schemes 
-0000cb00: 6973 2063 7573 746f 6d69 7a61 626c 6520  is customizable 
-0000cb10: 7769 7468 2074 6865 2061 6c6c 6f77 6564  with the allowed
-0000cb20: 5f73 6368 656d 6573 0a20 2020 2070 6172  _schemes.    par
-0000cb30: 616d 6574 6572 2e20 4966 2079 6f75 2065  ameter. If you e
-0000cb40: 7863 6c75 6465 204e 6f6e 6520 6672 6f6d  xclude None from
-0000cb50: 2074 6865 206c 6973 742c 2074 6865 6e20   the list, then 
-0000cb60: 6162 6272 6576 6961 7465 6420 5552 4c73  abbreviated URLs
-0000cb70: 0a20 2020 2028 6c61 636b 696e 6720 6120  .    (lacking a 
-0000cb80: 7363 6865 6d65 2073 7563 6820 6173 2027  scheme such as '
-0000cb90: 6874 7470 2729 2077 696c 6c20 6265 2072  http') will be r
-0000cba0: 656a 6563 7465 642e 0a0a 2020 2020 5468  ejected...    Th
-0000cbb0: 6520 6465 6661 756c 7420 7072 6570 656e  e default prepen
-0000cbc0: 6465 6420 7363 6865 6d65 2069 7320 6375  ded scheme is cu
-0000cbd0: 7374 6f6d 697a 6162 6c65 2077 6974 6820  stomizable with 
-0000cbe0: 7468 6520 7072 6570 656e 645f 7363 6865  the prepend_sche
-0000cbf0: 6d65 0a20 2020 2070 6172 616d 6574 6572  me.    parameter
-0000cc00: 2e20 4966 2079 6f75 2073 6574 2070 7265  . If you set pre
-0000cc10: 7065 6e64 5f73 6368 656d 6520 746f 204e  pend_scheme to N
-0000cc20: 6f6e 6520 7468 656e 2070 7265 7065 6e64  one then prepend
-0000cc30: 696e 6720 7769 6c6c 2062 650a 2020 2020  ing will be.    
-0000cc40: 6469 7361 626c 6564 2e20 5552 4c73 2074  disabled. URLs t
-0000cc50: 6861 7420 7265 7175 6972 6520 7072 6570  hat require prep
-0000cc60: 656e 6469 6e67 2074 6f20 7061 7273 6520  ending to parse 
-0000cc70: 7769 6c6c 2073 7469 6c6c 2062 6520 6163  will still be ac
-0000cc80: 6365 7074 6564 2c0a 2020 2020 6275 7420  cepted,.    but 
-0000cc90: 7468 6520 7265 7475 726e 2076 616c 7565  the return value
-0000cca0: 2077 696c 6c20 6e6f 7420 6265 206d 6f64   will not be mod
-0000ccb0: 6966 6965 642e 0a0a 2020 2020 4061 7574  ified...    @aut
-0000ccc0: 686f 723a 204a 6f6e 6174 6861 6e20 4265  hor: Jonathan Be
-0000ccd0: 6e6e 0a0a 2020 2020 2020 2020 3e3e 3e20  nn..        >>> 
-0000cce0: 4953 5f47 454e 4552 4943 5f55 524c 2829  IS_GENERIC_URL()
-0000ccf0: 2827 6874 7470 3a2f 2f75 7365 7240 6162  ('http://user@ab
-0000cd00: 632e 636f 6d27 290a 2020 2020 2020 2020  c.com').        
-0000cd10: 2827 6874 7470 3a2f 2f75 7365 7240 6162  ('http://user@ab
-0000cd20: 632e 636f 6d27 2c20 4e6f 6e65 290a 0a20  c.com', None).. 
-0000cd30: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0000cd40: 2065 7272 6f72 5f6d 6573 7361 6765 3a20   error_message: 
-0000cd50: 6120 7374 7269 6e67 2c20 7468 6520 6572  a string, the er
-0000cd60: 726f 7220 6d65 7373 6167 6520 746f 2067  ror message to g
-0000cd70: 6976 6520 7468 6520 656e 6420 7573 6572  ive the end user
-0000cd80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000cd90: 7468 6520 5552 4c20 646f 6573 206e 6f74  the URL does not
-0000cda0: 2076 616c 6964 6174 650a 2020 2020 2020   validate.      
-0000cdb0: 2020 616c 6c6f 7765 645f 7363 6865 6d65    allowed_scheme
-0000cdc0: 733a 2061 206c 6973 7420 636f 6e74 6169  s: a list contai
-0000cdd0: 6e69 6e67 2073 7472 696e 6773 206f 7220  ning strings or 
-0000cde0: 4e6f 6e65 2e20 4561 6368 2065 6c65 6d65  None. Each eleme
-0000cdf0: 6e74 0a20 2020 2020 2020 2020 2020 2069  nt.            i
-0000ce00: 7320 6120 7363 6865 6d65 2074 6865 2069  s a scheme the i
-0000ce10: 6e70 7574 7465 6420 5552 4c20 6973 2061  nputted URL is a
-0000ce20: 6c6c 6f77 6564 2074 6f20 7573 650a 2020  llowed to use.  
-0000ce30: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
-0000ce40: 6865 6d65 3a20 6120 7374 7269 6e67 2c20  heme: a string, 
-0000ce50: 7468 6973 2073 6368 656d 6520 6973 2070  this scheme is p
-0000ce60: 7265 7065 6e64 6564 2069 6620 6974 2773  repended if it's
-0000ce70: 0a20 2020 2020 2020 2020 2020 206e 6563  .            nec
-0000ce80: 6573 7361 7279 2074 6f20 6d61 6b65 2074  essary to make t
-0000ce90: 6865 2055 524c 2076 616c 6964 0a0a 2020  he URL valid..  
-0000cea0: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
-0000ceb0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-0000cec0: 2073 656c 662c 0a20 2020 2020 2020 2065   self,.        e
-0000ced0: 7272 6f72 5f6d 6573 7361 6765 3d22 456e  rror_message="En
-0000cee0: 7465 7220 6120 7661 6c69 6420 5552 4c22  ter a valid URL"
-0000cef0: 2c0a 2020 2020 2020 2020 616c 6c6f 7765  ,.        allowe
-0000cf00: 645f 7363 6865 6d65 733d 4e6f 6e65 2c0a  d_schemes=None,.
-0000cf10: 2020 2020 2020 2020 7072 6570 656e 645f          prepend_
-0000cf20: 7363 6865 6d65 3d4e 6f6e 652c 0a20 2020  scheme=None,.   
-0000cf30: 2029 3a0a 2020 2020 2020 2020 7365 6c66   ):.        self
-0000cf40: 2e65 7272 6f72 5f6d 6573 7361 6765 203d  .error_message =
-0000cf50: 2065 7272 6f72 5f6d 6573 7361 6765 0a20   error_message. 
-0000cf60: 2020 2020 2020 2069 6620 616c 6c6f 7765         if allowe
-0000cf70: 645f 7363 6865 6d65 7320 6973 204e 6f6e  d_schemes is Non
-0000cf80: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-0000cf90: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
-0000cfa0: 6d65 7320 3d20 616c 6c5f 7572 6c5f 7363  mes = all_url_sc
-0000cfb0: 6865 6d65 730a 2020 2020 2020 2020 656c  hemes.        el
-0000cfc0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000cfd0: 7365 6c66 2e61 6c6c 6f77 6564 5f73 6368  self.allowed_sch
-0000cfe0: 656d 6573 203d 2061 6c6c 6f77 6564 5f73  emes = allowed_s
-0000cff0: 6368 656d 6573 0a20 2020 2020 2020 2073  chemes.        s
-0000d000: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
-0000d010: 6d65 203d 2070 7265 7065 6e64 5f73 6368  me = prepend_sch
-0000d020: 656d 650a 2020 2020 2020 2020 6966 2073  eme.        if s
-0000d030: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
-0000d040: 6d65 206e 6f74 2069 6e20 7365 6c66 2e61  me not in self.a
-0000d050: 6c6c 6f77 6564 5f73 6368 656d 6573 3a0a  llowed_schemes:.
-0000d060: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0000d070: 6520 5379 6e74 6178 4572 726f 7228 0a20  e SyntaxError(. 
-0000d080: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000d090: 7072 6570 656e 645f 7363 6865 6d65 3d27  prepend_scheme='
-0000d0a0: 2573 2720 6973 206e 6f74 2069 6e20 616c  %s' is not in al
-0000d0b0: 6c6f 7765 645f 7363 6865 6d65 733d 2573  lowed_schemes=%s
-0000d0c0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000d0d0: 2020 2520 2873 656c 662e 7072 6570 656e    % (self.prepen
-0000d0e0: 645f 7363 6865 6d65 2c20 7365 6c66 2e61  d_scheme, self.a
-0000d0f0: 6c6c 6f77 6564 5f73 6368 656d 6573 290a  llowed_schemes).
-0000d100: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-0000d110: 2020 2052 4547 4558 5f47 454e 4552 4943     REGEX_GENERIC
-0000d120: 5f55 524c 203d 2072 2225 5b5e 302d 3941  _URL = r"%[^0-9A
-0000d130: 2d46 612d 665d 7b32 7d7c 255b 5e30 2d39  -Fa-f]{2}|%[^0-9
-0000d140: 412d 4661 2d66 5d5b 302d 3941 2d46 612d  A-Fa-f][0-9A-Fa-
-0000d150: 665d 7c25 5b30 2d39 412d 4661 2d66 5d5b  f]|%[0-9A-Fa-f][
-0000d160: 5e30 2d39 412d 4661 2d66 5d7c 2524 7c25  ^0-9A-Fa-f]|%$|%
-0000d170: 5b30 2d39 412d 4661 2d66 5d24 7c25 5b5e  [0-9A-Fa-f]$|%[^
-0000d180: 302d 3941 2d46 612d 665d 2422 0a20 2020  0-9A-Fa-f]$".   
-0000d190: 2052 4547 4558 5f47 454e 4552 4943 5f55   REGEX_GENERIC_U
-0000d1a0: 524c 5f56 414c 4944 203d 2072 225b 412d  RL_VALID = r"[A-
-0000d1b0: 5a61 2d7a 302d 393b 2f3f 3a40 263d 2b24  Za-z0-9;/?:@&=+$
-0000d1c0: 2c5c 2d5f 5c2e 217e 2a27 5c28 5c29 255d  ,\-_\.!~*'\(\)%]
-0000d1d0: 2b24 220a 2020 2020 5245 4745 585f 5552  +$".    REGEX_UR
-0000d1e0: 4c5f 4652 4147 4d45 4e54 5f56 414c 4944  L_FRAGMENT_VALID
-0000d1f0: 203d 2072 225b 7c41 2d5a 612d 7a30 2d39   = r"[|A-Za-z0-9
-0000d200: 3b2f 3f3a 4026 3d2b 242c 5c2d 5f5c 2e21  ;/?:@&=+$,\-_\.!
-0000d210: 7e2a 275c 285c 2925 5d2b 2422 0a0a 2020  ~*'\(\)%]+$"..  
-0000d220: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-0000d230: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-0000d240: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-0000d250: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0000d260: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0000d270: 2020 2076 616c 7565 3a20 6120 7374 7269     value: a stri
-0000d280: 6e67 2c20 7468 6520 5552 4c20 746f 2076  ng, the URL to v
-0000d290: 616c 6964 6174 650a 0a20 2020 2020 2020  alidate..       
-0000d2a0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-0000d2b0: 2020 2020 2020 6120 7475 706c 652c 2077        a tuple, w
-0000d2c0: 6865 7265 2074 7570 6c65 5b30 5d20 6973  here tuple[0] is
-0000d2d0: 2074 6865 2069 6e70 7574 7465 6420 7661   the inputted va
-0000d2e0: 6c75 6520 2870 6f73 7369 626c 650a 2020  lue (possible.  
-0000d2f0: 2020 2020 2020 2020 2020 7072 6570 656e            prepen
-0000d300: 6465 6420 7769 7468 2070 7265 7065 6e64  ded with prepend
-0000d310: 5f73 6368 656d 6529 2c20 616e 6420 7475  _scheme), and tu
-0000d320: 706c 655b 315d 2069 7320 6569 7468 6572  ple[1] is either
-0000d330: 0a20 2020 2020 2020 2020 2020 204e 6f6e  .            Non
-0000d340: 6520 2873 7563 6365 7373 2129 206f 7220  e (success!) or 
-0000d350: 7468 6520 7374 7269 6e67 2065 7272 6f72  the string error
-0000d360: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
-0000d370: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
-0000d380: 6966 2077 6520 646f 6e74 2068 6176 6520  if we dont have 
-0000d390: 616e 7974 6869 6e67 206f 7220 7468 6520  anything or the 
-0000d3a0: 5552 4c20 6d69 7375 7365 7320 7468 6520  URL misuses the 
-0000d3b0: 2725 2720 6368 6172 6163 7465 720a 0a20  '%' character.. 
-0000d3c0: 2020 2020 2020 2069 6620 6e6f 7420 7661         if not va
-0000d3d0: 6c75 6520 6f72 2072 652e 7365 6172 6368  lue or re.search
-0000d3e0: 2873 656c 662e 5245 4745 585f 4745 4e45  (self.REGEX_GENE
-0000d3f0: 5249 435f 5552 4c2c 2076 616c 7565 293a  RIC_URL, value):
-0000d400: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0000d410: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
-0000d420: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
-0000d430: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
-0000d440: 7373 6167 6529 290a 0a20 2020 2020 2020  ssage))..       
-0000d450: 2069 6620 2223 2220 696e 2076 616c 7565   if "#" in value
-0000d460: 3a0a 2020 2020 2020 2020 2020 2020 7572  :.            ur
-0000d470: 6c2c 2066 7261 676d 656e 745f 7061 7274  l, fragment_part
-0000d480: 203d 2076 616c 7565 2e73 706c 6974 2822   = value.split("
-0000d490: 2322 290a 2020 2020 2020 2020 656c 7365  #").        else
-0000d4a0: 3a0a 2020 2020 2020 2020 2020 2020 7572  :.            ur
-0000d4b0: 6c2c 2066 7261 676d 656e 745f 7061 7274  l, fragment_part
-0000d4c0: 203d 2076 616c 7565 2c20 2222 0a20 2020   = value, "".   
-0000d4d0: 2020 2020 2023 2069 6620 7468 6520 5552       # if the UR
-0000d4e0: 4c20 6973 206f 6e6c 7920 636f 6d70 6f73  L is only compos
-0000d4f0: 6564 206f 6620 7661 6c69 6420 6368 6172  ed of valid char
-0000d500: 6163 7465 7273 0a20 2020 2020 2020 2069  acters.        i
-0000d510: 6620 6e6f 7420 7265 2e6d 6174 6368 2873  f not re.match(s
-0000d520: 656c 662e 5245 4745 585f 4745 4e45 5249  elf.REGEX_GENERI
-0000d530: 435f 5552 4c5f 5641 4c49 442c 2075 726c  C_URL_VALID, url
-0000d540: 2920 6f72 2028 0a20 2020 2020 2020 2020  ) or (.         
-0000d550: 2020 2066 7261 676d 656e 745f 7061 7274     fragment_part
-0000d560: 2061 6e64 206e 6f74 2072 652e 6d61 7463   and not re.matc
-0000d570: 6828 7365 6c66 2e52 4547 4558 5f55 524c  h(self.REGEX_URL
-0000d580: 5f46 5241 474d 454e 545f 5641 4c49 442c  _FRAGMENT_VALID,
-0000d590: 2066 7261 676d 656e 745f 7061 7274 290a   fragment_part).
-0000d5a0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-0000d5b0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000d5c0: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
-0000d5d0: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
-0000d5e0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
-0000d5f0: 290a 2020 2020 2020 2020 2320 5468 656e  ).        # Then
-0000d600: 2070 6172 7365 2074 6865 2055 524c 2069   parse the URL i
-0000d610: 6e74 6f20 6974 7320 636f 6d70 6f6e 656e  nto its componen
-0000d620: 7473 2061 6e64 2063 6865 636b 206f 6e0a  ts and check on.
-0000d630: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0000d640: 2020 2020 2020 2020 2063 6f6d 706f 6e65           compone
-0000d650: 6e74 7320 3d20 7572 6c70 6172 7365 2e75  nts = urlparse.u
-0000d660: 726c 7061 7273 6528 7572 6c6c 6962 5f75  rlparse(urllib_u
-0000d670: 6e71 756f 7465 2876 616c 7565 2929 2e5f  nquote(value))._
-0000d680: 6173 6469 6374 2829 0a20 2020 2020 2020  asdict().       
-0000d690: 2065 7863 6570 7420 5661 6c75 6545 7272   except ValueErr
-0000d6a0: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
-0000d6b0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-0000d6c0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-0000d6d0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-0000d6e0: 5f6d 6573 7361 6765 2929 0a0a 2020 2020  _message))..    
-0000d6f0: 2020 2020 2320 436c 6561 6e20 7570 2074      # Clean up t
-0000d700: 6865 2073 6368 656d 6520 6265 666f 7265  he scheme before
-0000d710: 2077 6520 6368 6563 6b20 6974 0a20 2020   we check it.   
-0000d720: 2020 2020 2073 6368 656d 6520 3d20 636f       scheme = co
-0000d730: 6d70 6f6e 656e 7473 5b22 7363 6865 6d65  mponents["scheme
-0000d740: 225d 0a20 2020 2020 2020 2069 6620 6c65  "].        if le
-0000d750: 6e28 7363 6865 6d65 2920 3d3d 2030 3a0a  n(scheme) == 0:.
-0000d760: 2020 2020 2020 2020 2020 2020 7363 6865              sche
-0000d770: 6d65 203d 204e 6f6e 650a 2020 2020 2020  me = None.      
-0000d780: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000d790: 2020 2020 7363 6865 6d65 203d 2063 6f6d      scheme = com
-0000d7a0: 706f 6e65 6e74 735b 2273 6368 656d 6522  ponents["scheme"
-0000d7b0: 5d2e 6c6f 7765 7228 290a 2020 2020 2020  ].lower().      
-0000d7c0: 2020 2320 4966 2074 6865 2073 6368 656d    # If the schem
-0000d7d0: 6520 646f 6573 6e27 7420 7265 616c 6c79  e doesn't really
-0000d7e0: 2065 7869 7374 730a 2020 2020 2020 2020   exists.        
-0000d7f0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
-0000d800: 2073 6368 656d 6520 6e6f 7420 696e 2073   scheme not in s
-0000d810: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
-0000d820: 6d65 730a 2020 2020 2020 2020 2020 2020  mes.            
-0000d830: 6f72 206e 6f74 2073 6368 656d 650a 2020  or not scheme.  
-0000d840: 2020 2020 2020 2020 2020 616e 6420 223a            and ":
-0000d850: 2220 696e 2063 6f6d 706f 6e65 6e74 735b  " in components[
-0000d860: 2270 6174 6822 5d0a 2020 2020 2020 2020  "path"].        
-0000d870: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
-0000d880: 2066 6f72 2074 6865 2070 6f73 7369 626c   for the possibl
-0000d890: 6520 6361 7365 206f 6620 6162 6272 6576  e case of abbrev
-0000d8a0: 6961 7465 6420 5552 4c73 2077 6974 680a  iated URLs with.
-0000d8b0: 2020 2020 2020 2020 2020 2020 2320 706f              # po
-0000d8c0: 7274 732c 2063 6865 636b 2074 6f20 7365  rts, check to se
-0000d8d0: 6520 6966 2061 6464 696e 6720 6120 7661  e if adding a va
-0000d8e0: 6c69 6420 7363 6865 6d65 2066 6978 6573  lid scheme fixes
-0000d8f0: 0a20 2020 2020 2020 2020 2020 2023 2074  .            # t
-0000d900: 6865 2070 726f 626c 656d 2028 6275 7420  he problem (but 
-0000d910: 6f6e 6c79 2064 6f20 7468 6973 2069 6620  only do this if 
-0000d920: 6974 2064 6f65 736e 2774 2068 6176 650a  it doesn't have.
-0000d930: 2020 2020 2020 2020 2020 2020 2320 6f6e              # on
-0000d940: 6520 616c 7265 6164 7921 290a 2020 2020  e already!).    
-0000d950: 2020 2020 2020 2020 6966 2022 3a2f 2f22          if "://"
-0000d960: 206e 6f74 2069 6e20 7661 6c75 6520 616e   not in value an
-0000d970: 6420 4e6f 6e65 2069 6e20 7365 6c66 2e61  d None in self.a
-0000d980: 6c6c 6f77 6564 5f73 6368 656d 6573 3a0a  llowed_schemes:.
-0000d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d9a0: 7363 6865 6d65 546f 5573 6520 3d20 7365  schemeToUse = se
-0000d9b0: 6c66 2e70 7265 7065 6e64 5f73 6368 656d  lf.prepend_schem
-0000d9c0: 6520 6f72 2022 6874 7470 220a 2020 2020  e or "http".    
-0000d9d0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0000d9e0: 7661 6c75 6520 3d20 7365 6c66 2e76 616c  value = self.val
-0000d9f0: 6964 6174 6528 7363 6865 6d65 546f 5573  idate(schemeToUs
-0000da00: 6520 2b20 223a 2f2f 2220 2b20 7661 6c75  e + "://" + valu
-0000da10: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-0000da20: 2020 2072 6574 7572 6e20 6e65 775f 7661     return new_va
-0000da30: 6c75 6520 6966 2073 656c 662e 7072 6570  lue if self.prep
-0000da40: 656e 645f 7363 6865 6d65 2065 6c73 6520  end_scheme else 
-0000da50: 7661 6c75 650a 2020 2020 2020 2020 2020  value.          
-0000da60: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-0000da70: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
-0000da80: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-0000da90: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
-0000daa0: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-0000dab0: 650a 0a0a 2320 536f 7572 6365 7320 286f  e...# Sources (o
-0000dac0: 6274 6169 6e65 6420 3230 3137 2d4e 6f76  btained 2017-Nov
-0000dad0: 2d31 3129 3a0a 2320 2020 2068 7474 703a  -11):.#    http:
-0000dae0: 2f2f 6461 7461 2e69 616e 612e 6f72 672f  //data.iana.org/
-0000daf0: 544c 442f 746c 6473 2d61 6c70 6861 2d62  TLD/tlds-alpha-b
-0000db00: 792d 646f 6d61 696e 2e74 7874 0a23 2073  y-domain.txt.# s
-0000db10: 6565 2073 6372 6970 7473 2f70 6172 7365  ee scripts/parse
-0000db20: 5f74 6f70 5f6c 6576 656c 5f64 6f6d 6169  _top_level_domai
-0000db30: 6e73 2e70 7920 666f 7220 616e 2065 6173  ns.py for an eas
-0000db40: 7920 7570 6461 7465 0a0a 6f66 6669 6369  y update..offici
-0000db50: 616c 5f74 6f70 5f6c 6576 656c 5f64 6f6d  al_top_level_dom
-0000db60: 6169 6e73 203d 205b 0a20 2020 2023 2061  ains = [.    # a
-0000db70: 0a20 2020 2022 6161 6122 2c0a 2020 2020  .    "aaa",.    
-0000db80: 2261 6172 7022 2c0a 2020 2020 2261 6261  "aarp",.    "aba
-0000db90: 7274 6822 2c0a 2020 2020 2261 6262 222c  rth",.    "abb",
-0000dba0: 0a20 2020 2022 6162 626f 7474 222c 0a20  .    "abbott",. 
-0000dbb0: 2020 2022 6162 6276 6965 222c 0a20 2020     "abbvie",.   
-0000dbc0: 2022 6162 6322 2c0a 2020 2020 2261 626c   "abc",.    "abl
-0000dbd0: 6522 2c0a 2020 2020 2261 626f 6761 646f  e",.    "abogado
-0000dbe0: 222c 0a20 2020 2022 6162 7564 6861 6269  ",.    "abudhabi
-0000dbf0: 222c 0a20 2020 2022 6163 222c 0a20 2020  ",.    "ac",.   
-0000dc00: 2022 6163 6164 656d 7922 2c0a 2020 2020   "academy",.    
-0000dc10: 2261 6363 656e 7475 7265 222c 0a20 2020  "accenture",.   
-0000dc20: 2022 6163 636f 756e 7461 6e74 222c 0a20   "accountant",. 
-0000dc30: 2020 2022 6163 636f 756e 7461 6e74 7322     "accountants"
-0000dc40: 2c0a 2020 2020 2261 636f 222c 0a20 2020  ,.    "aco",.   
-0000dc50: 2022 6163 7469 7665 222c 0a20 2020 2022   "active",.    "
-0000dc60: 6163 746f 7222 2c0a 2020 2020 2261 6422  actor",.    "ad"
-0000dc70: 2c0a 2020 2020 2261 6461 6322 2c0a 2020  ,.    "adac",.  
-0000dc80: 2020 2261 6473 222c 0a20 2020 2022 6164    "ads",.    "ad
-0000dc90: 756c 7422 2c0a 2020 2020 2261 6522 2c0a  ult",.    "ae",.
-0000dca0: 2020 2020 2261 6567 222c 0a20 2020 2022      "aeg",.    "
-0000dcb0: 6165 726f 222c 0a20 2020 2022 6165 746e  aero",.    "aetn
-0000dcc0: 6122 2c0a 2020 2020 2261 6622 2c0a 2020  a",.    "af",.  
-0000dcd0: 2020 2261 6661 6d69 6c79 636f 6d70 616e    "afamilycompan
-0000dce0: 7922 2c0a 2020 2020 2261 666c 222c 0a20  y",.    "afl",. 
-0000dcf0: 2020 2022 6166 7269 6361 222c 0a20 2020     "africa",.   
-0000dd00: 2022 6167 222c 0a20 2020 2022 6167 616b   "ag",.    "agak
-0000dd10: 6861 6e22 2c0a 2020 2020 2261 6765 6e63  han",.    "agenc
-0000dd20: 7922 2c0a 2020 2020 2261 6922 2c0a 2020  y",.    "ai",.  
-0000dd30: 2020 2261 6967 222c 0a20 2020 2022 6169    "aig",.    "ai
-0000dd40: 676f 222c 0a20 2020 2022 6169 7262 7573  go",.    "airbus
-0000dd50: 222c 0a20 2020 2022 6169 7266 6f72 6365  ",.    "airforce
-0000dd60: 222c 0a20 2020 2022 6169 7274 656c 222c  ",.    "airtel",
-0000dd70: 0a20 2020 2022 616b 646e 222c 0a20 2020  .    "akdn",.   
-0000dd80: 2022 616c 222c 0a20 2020 2022 616c 6661   "al",.    "alfa
-0000dd90: 726f 6d65 6f22 2c0a 2020 2020 2261 6c69  romeo",.    "ali
-0000dda0: 6261 6261 222c 0a20 2020 2022 616c 6970  baba",.    "alip
-0000ddb0: 6179 222c 0a20 2020 2022 616c 6c66 696e  ay",.    "allfin
-0000ddc0: 616e 7a22 2c0a 2020 2020 2261 6c6c 7374  anz",.    "allst
-0000ddd0: 6174 6522 2c0a 2020 2020 2261 6c6c 7922  ate",.    "ally"
-0000dde0: 2c0a 2020 2020 2261 6c73 6163 6522 2c0a  ,.    "alsace",.
-0000ddf0: 2020 2020 2261 6c73 746f 6d22 2c0a 2020      "alstom",.  
-0000de00: 2020 2261 6d22 2c0a 2020 2020 2261 6d65    "am",.    "ame
-0000de10: 7269 6361 6e65 7870 7265 7373 222c 0a20  ricanexpress",. 
-0000de20: 2020 2022 616d 6572 6963 616e 6661 6d69     "americanfami
-0000de30: 6c79 222c 0a20 2020 2022 616d 6578 222c  ly",.    "amex",
-0000de40: 0a20 2020 2022 616d 6661 6d22 2c0a 2020  .    "amfam",.  
-0000de50: 2020 2261 6d69 6361 222c 0a20 2020 2022    "amica",.    "
-0000de60: 616d 7374 6572 6461 6d22 2c0a 2020 2020  amsterdam",.    
-0000de70: 2261 6e61 6c79 7469 6373 222c 0a20 2020  "analytics",.   
-0000de80: 2022 616e 6472 6f69 6422 2c0a 2020 2020   "android",.    
-0000de90: 2261 6e71 7561 6e22 2c0a 2020 2020 2261  "anquan",.    "a
-0000dea0: 6e7a 222c 0a20 2020 2022 616f 222c 0a20  nz",.    "ao",. 
-0000deb0: 2020 2022 616f 6c22 2c0a 2020 2020 2261     "aol",.    "a
-0000dec0: 7061 7274 6d65 6e74 7322 2c0a 2020 2020  partments",.    
-0000ded0: 2261 7070 222c 0a20 2020 2022 6170 706c  "app",.    "appl
-0000dee0: 6522 2c0a 2020 2020 2261 7122 2c0a 2020  e",.    "aq",.  
-0000def0: 2020 2261 7175 6172 656c 6c65 222c 0a20    "aquarelle",. 
-0000df00: 2020 2022 6172 222c 0a20 2020 2022 6172     "ar",.    "ar
-0000df10: 6162 222c 0a20 2020 2022 6172 616d 636f  ab",.    "aramco
-0000df20: 222c 0a20 2020 2022 6172 6368 6922 2c0a  ",.    "archi",.
-0000df30: 2020 2020 2261 726d 7922 2c0a 2020 2020      "army",.    
-0000df40: 2261 7270 6122 2c0a 2020 2020 2261 7274  "arpa",.    "art
-0000df50: 222c 0a20 2020 2022 6172 7465 222c 0a20  ",.    "arte",. 
-0000df60: 2020 2022 6173 222c 0a20 2020 2022 6173     "as",.    "as
-0000df70: 6461 222c 0a20 2020 2022 6173 6961 222c  da",.    "asia",
-0000df80: 0a20 2020 2022 6173 736f 6369 6174 6573  .    "associates
-0000df90: 222c 0a20 2020 2022 6174 222c 0a20 2020  ",.    "at",.   
-0000dfa0: 2022 6174 686c 6574 6122 2c0a 2020 2020   "athleta",.    
-0000dfb0: 2261 7474 6f72 6e65 7922 2c0a 2020 2020  "attorney",.    
-0000dfc0: 2261 7522 2c0a 2020 2020 2261 7563 7469  "au",.    "aucti
-0000dfd0: 6f6e 222c 0a20 2020 2022 6175 6469 222c  on",.    "audi",
-0000dfe0: 0a20 2020 2022 6175 6469 626c 6522 2c0a  .    "audible",.
-0000dff0: 2020 2020 2261 7564 696f 222c 0a20 2020      "audio",.   
-0000e000: 2022 6175 7370 6f73 7422 2c0a 2020 2020   "auspost",.    
-0000e010: 2261 7574 686f 7222 2c0a 2020 2020 2261  "author",.    "a
-0000e020: 7574 6f22 2c0a 2020 2020 2261 7574 6f73  uto",.    "autos
-0000e030: 222c 0a20 2020 2022 6176 6961 6e63 6122  ",.    "avianca"
-0000e040: 2c0a 2020 2020 2261 7722 2c0a 2020 2020  ,.    "aw",.    
-0000e050: 2261 7773 222c 0a20 2020 2022 6178 222c  "aws",.    "ax",
-0000e060: 0a20 2020 2022 6178 6122 2c0a 2020 2020  .    "axa",.    
-0000e070: 2261 7a22 2c0a 2020 2020 2261 7a75 7265  "az",.    "azure
-0000e080: 222c 0a20 2020 2023 2062 0a20 2020 2022  ",.    # b.    "
-0000e090: 6261 222c 0a20 2020 2022 6261 6279 222c  ba",.    "baby",
-0000e0a0: 0a20 2020 2022 6261 6964 7522 2c0a 2020  .    "baidu",.  
-0000e0b0: 2020 2262 616e 616d 6578 222c 0a20 2020    "banamex",.   
-0000e0c0: 2022 6261 6e61 6e61 7265 7075 626c 6963   "bananarepublic
-0000e0d0: 222c 0a20 2020 2022 6261 6e64 222c 0a20  ",.    "band",. 
-0000e0e0: 2020 2022 6261 6e6b 222c 0a20 2020 2022     "bank",.    "
-0000e0f0: 6261 7222 2c0a 2020 2020 2262 6172 6365  bar",.    "barce
-0000e100: 6c6f 6e61 222c 0a20 2020 2022 6261 7263  lona",.    "barc
-0000e110: 6c61 7963 6172 6422 2c0a 2020 2020 2262  laycard",.    "b
-0000e120: 6172 636c 6179 7322 2c0a 2020 2020 2262  arclays",.    "b
-0000e130: 6172 6566 6f6f 7422 2c0a 2020 2020 2262  arefoot",.    "b
-0000e140: 6172 6761 696e 7322 2c0a 2020 2020 2262  argains",.    "b
-0000e150: 6173 6562 616c 6c22 2c0a 2020 2020 2262  aseball",.    "b
-0000e160: 6173 6b65 7462 616c 6c22 2c0a 2020 2020  asketball",.    
-0000e170: 2262 6175 6861 7573 222c 0a20 2020 2022  "bauhaus",.    "
-0000e180: 6261 7965 726e 222c 0a20 2020 2022 6262  bayern",.    "bb
-0000e190: 222c 0a20 2020 2022 6262 6322 2c0a 2020  ",.    "bbc",.  
-0000e1a0: 2020 2262 6274 222c 0a20 2020 2022 6262    "bbt",.    "bb
-0000e1b0: 7661 222c 0a20 2020 2022 6263 6722 2c0a  va",.    "bcg",.
-0000e1c0: 2020 2020 2262 636e 222c 0a20 2020 2022      "bcn",.    "
-0000e1d0: 6264 222c 0a20 2020 2022 6265 222c 0a20  bd",.    "be",. 
-0000e1e0: 2020 2022 6265 6174 7322 2c0a 2020 2020     "beats",.    
-0000e1f0: 2262 6561 7574 7922 2c0a 2020 2020 2262  "beauty",.    "b
-0000e200: 6565 7222 2c0a 2020 2020 2262 656e 746c  eer",.    "bentl
-0000e210: 6579 222c 0a20 2020 2022 6265 726c 696e  ey",.    "berlin
-0000e220: 222c 0a20 2020 2022 6265 7374 222c 0a20  ",.    "best",. 
-0000e230: 2020 2022 6265 7374 6275 7922 2c0a 2020     "bestbuy",.  
-0000e240: 2020 2262 6574 222c 0a20 2020 2022 6266    "bet",.    "bf
-0000e250: 222c 0a20 2020 2022 6267 222c 0a20 2020  ",.    "bg",.   
-0000e260: 2022 6268 222c 0a20 2020 2022 6268 6172   "bh",.    "bhar
-0000e270: 7469 222c 0a20 2020 2022 6269 222c 0a20  ti",.    "bi",. 
-0000e280: 2020 2022 6269 626c 6522 2c0a 2020 2020     "bible",.    
-0000e290: 2262 6964 222c 0a20 2020 2022 6269 6b65  "bid",.    "bike
-0000e2a0: 222c 0a20 2020 2022 6269 6e67 222c 0a20  ",.    "bing",. 
-0000e2b0: 2020 2022 6269 6e67 6f22 2c0a 2020 2020     "bingo",.    
-0000e2c0: 2262 696f 222c 0a20 2020 2022 6269 7a22  "bio",.    "biz"
-0000e2d0: 2c0a 2020 2020 2262 6a22 2c0a 2020 2020  ,.    "bj",.    
-0000e2e0: 2262 6c61 636b 222c 0a20 2020 2022 626c  "black",.    "bl
-0000e2f0: 6163 6b66 7269 6461 7922 2c0a 2020 2020  ackfriday",.    
-0000e300: 2262 6c61 6e63 6f22 2c0a 2020 2020 2262  "blanco",.    "b
-0000e310: 6c6f 636b 6275 7374 6572 222c 0a20 2020  lockbuster",.   
-0000e320: 2022 626c 6f67 222c 0a20 2020 2022 626c   "blog",.    "bl
-0000e330: 6f6f 6d62 6572 6722 2c0a 2020 2020 2262  oomberg",.    "b
-0000e340: 6c75 6522 2c0a 2020 2020 2262 6d22 2c0a  lue",.    "bm",.
-0000e350: 2020 2020 2262 6d73 222c 0a20 2020 2022      "bms",.    "
-0000e360: 626d 7722 2c0a 2020 2020 2262 6e22 2c0a  bmw",.    "bn",.
-0000e370: 2020 2020 2262 6e6c 222c 0a20 2020 2022      "bnl",.    "
-0000e380: 626e 7070 6172 6962 6173 222c 0a20 2020  bnpparibas",.   
-0000e390: 2022 626f 222c 0a20 2020 2022 626f 6174   "bo",.    "boat
-0000e3a0: 7322 2c0a 2020 2020 2262 6f65 6872 696e  s",.    "boehrin
-0000e3b0: 6765 7222 2c0a 2020 2020 2262 6f66 6122  ger",.    "bofa"
-0000e3c0: 2c0a 2020 2020 2262 6f6d 222c 0a20 2020  ,.    "bom",.   
-0000e3d0: 2022 626f 6e64 222c 0a20 2020 2022 626f   "bond",.    "bo
-0000e3e0: 6f22 2c0a 2020 2020 2262 6f6f 6b22 2c0a  o",.    "book",.
-0000e3f0: 2020 2020 2262 6f6f 6b69 6e67 222c 0a20      "booking",. 
-0000e400: 2020 2022 626f 6f74 7322 2c0a 2020 2020     "boots",.    
-0000e410: 2262 6f73 6368 222c 0a20 2020 2022 626f  "bosch",.    "bo
-0000e420: 7374 696b 222c 0a20 2020 2022 626f 7374  stik",.    "bost
-0000e430: 6f6e 222c 0a20 2020 2022 626f 7422 2c0a  on",.    "bot",.
-0000e440: 2020 2020 2262 6f75 7469 7175 6522 2c0a      "boutique",.
-0000e450: 2020 2020 2262 6f78 222c 0a20 2020 2022      "box",.    "
-0000e460: 6272 222c 0a20 2020 2022 6272 6164 6573  br",.    "brades
-0000e470: 636f 222c 0a20 2020 2022 6272 6964 6765  co",.    "bridge
-0000e480: 7374 6f6e 6522 2c0a 2020 2020 2262 726f  stone",.    "bro
-0000e490: 6164 7761 7922 2c0a 2020 2020 2262 726f  adway",.    "bro
-0000e4a0: 6b65 7222 2c0a 2020 2020 2262 726f 7468  ker",.    "broth
-0000e4b0: 6572 222c 0a20 2020 2022 6272 7573 7365  er",.    "brusse
-0000e4c0: 6c73 222c 0a20 2020 2022 6273 222c 0a20  ls",.    "bs",. 
-0000e4d0: 2020 2022 6274 222c 0a20 2020 2022 6275     "bt",.    "bu
-0000e4e0: 6461 7065 7374 222c 0a20 2020 2022 6275  dapest",.    "bu
-0000e4f0: 6761 7474 6922 2c0a 2020 2020 2262 7569  gatti",.    "bui
-0000e500: 6c64 222c 0a20 2020 2022 6275 696c 6465  ld",.    "builde
-0000e510: 7273 222c 0a20 2020 2022 6275 7369 6e65  rs",.    "busine
-0000e520: 7373 222c 0a20 2020 2022 6275 7922 2c0a  ss",.    "buy",.
-0000e530: 2020 2020 2262 757a 7a22 2c0a 2020 2020      "buzz",.    
-0000e540: 2262 7622 2c0a 2020 2020 2262 7722 2c0a  "bv",.    "bw",.
-0000e550: 2020 2020 2262 7922 2c0a 2020 2020 2262      "by",.    "b
-0000e560: 7a22 2c0a 2020 2020 2262 7a68 222c 0a20  z",.    "bzh",. 
-0000e570: 2020 2023 2063 0a20 2020 2022 6361 222c     # c.    "ca",
-0000e580: 0a20 2020 2022 6361 6222 2c0a 2020 2020  .    "cab",.    
-0000e590: 2263 6166 6522 2c0a 2020 2020 2263 616c  "cafe",.    "cal
-0000e5a0: 222c 0a20 2020 2022 6361 6c6c 222c 0a20  ",.    "call",. 
-0000e5b0: 2020 2022 6361 6c76 696e 6b6c 6569 6e22     "calvinklein"
-0000e5c0: 2c0a 2020 2020 2263 616d 222c 0a20 2020  ,.    "cam",.   
-0000e5d0: 2022 6361 6d65 7261 222c 0a20 2020 2022   "camera",.    "
-0000e5e0: 6361 6d70 222c 0a20 2020 2022 6361 6e63  camp",.    "canc
-0000e5f0: 6572 7265 7365 6172 6368 222c 0a20 2020  erresearch",.   
-0000e600: 2022 6361 6e6f 6e22 2c0a 2020 2020 2263   "canon",.    "c
-0000e610: 6170 6574 6f77 6e22 2c0a 2020 2020 2263  apetown",.    "c
-0000e620: 6170 6974 616c 222c 0a20 2020 2022 6361  apital",.    "ca
-0000e630: 7069 7461 6c6f 6e65 222c 0a20 2020 2022  pitalone",.    "
-0000e640: 6361 7222 2c0a 2020 2020 2263 6172 6176  car",.    "carav
-0000e650: 616e 222c 0a20 2020 2022 6361 7264 7322  an",.    "cards"
-0000e660: 2c0a 2020 2020 2263 6172 6522 2c0a 2020  ,.    "care",.  
-0000e670: 2020 2263 6172 6565 7222 2c0a 2020 2020    "career",.    
-0000e680: 2263 6172 6565 7273 222c 0a20 2020 2022  "careers",.    "
-0000e690: 6361 7273 222c 0a20 2020 2022 6361 7274  cars",.    "cart
-0000e6a0: 6965 7222 2c0a 2020 2020 2263 6173 6122  ier",.    "casa"
-0000e6b0: 2c0a 2020 2020 2263 6173 6522 2c0a 2020  ,.    "case",.  
-0000e6c0: 2020 2263 6173 6569 6822 2c0a 2020 2020    "caseih",.    
-0000e6d0: 2263 6173 6822 2c0a 2020 2020 2263 6173  "cash",.    "cas
-0000e6e0: 696e 6f22 2c0a 2020 2020 2263 6174 222c  ino",.    "cat",
-0000e6f0: 0a20 2020 2022 6361 7465 7269 6e67 222c  .    "catering",
-0000e700: 0a20 2020 2022 6361 7468 6f6c 6963 222c  .    "catholic",
-0000e710: 0a20 2020 2022 6362 6122 2c0a 2020 2020  .    "cba",.    
-0000e720: 2263 626e 222c 0a20 2020 2022 6362 7265  "cbn",.    "cbre
-0000e730: 222c 0a20 2020 2022 6362 7322 2c0a 2020  ",.    "cbs",.  
-0000e740: 2020 2263 6322 2c0a 2020 2020 2263 6422    "cc",.    "cd"
-0000e750: 2c0a 2020 2020 2263 6562 222c 0a20 2020  ,.    "ceb",.   
-0000e760: 2022 6365 6e74 6572 222c 0a20 2020 2022   "center",.    "
-0000e770: 6365 6f22 2c0a 2020 2020 2263 6572 6e22  ceo",.    "cern"
-0000e780: 2c0a 2020 2020 2263 6622 2c0a 2020 2020  ,.    "cf",.    
-0000e790: 2263 6661 222c 0a20 2020 2022 6366 6422  "cfa",.    "cfd"
-0000e7a0: 2c0a 2020 2020 2263 6722 2c0a 2020 2020  ,.    "cg",.    
-0000e7b0: 2263 6822 2c0a 2020 2020 2263 6861 6e65  "ch",.    "chane
-0000e7c0: 6c22 2c0a 2020 2020 2263 6861 6e6e 656c  l",.    "channel
-0000e7d0: 222c 0a20 2020 2022 6368 6173 6522 2c0a  ",.    "chase",.
-0000e7e0: 2020 2020 2263 6861 7422 2c0a 2020 2020      "chat",.    
-0000e7f0: 2263 6865 6170 222c 0a20 2020 2022 6368  "cheap",.    "ch
-0000e800: 696e 7461 6922 2c0a 2020 2020 2263 6872  intai",.    "chr
-0000e810: 6973 746d 6173 222c 0a20 2020 2022 6368  istmas",.    "ch
-0000e820: 726f 6d65 222c 0a20 2020 2022 6368 7279  rome",.    "chry
-0000e830: 736c 6572 222c 0a20 2020 2022 6368 7572  sler",.    "chur
-0000e840: 6368 222c 0a20 2020 2022 6369 222c 0a20  ch",.    "ci",. 
-0000e850: 2020 2022 6369 7072 6961 6e69 222c 0a20     "cipriani",. 
-0000e860: 2020 2022 6369 7263 6c65 222c 0a20 2020     "circle",.   
-0000e870: 2022 6369 7363 6f22 2c0a 2020 2020 2263   "cisco",.    "c
-0000e880: 6974 6164 656c 222c 0a20 2020 2022 6369  itadel",.    "ci
-0000e890: 7469 222c 0a20 2020 2022 6369 7469 6322  ti",.    "citic"
-0000e8a0: 2c0a 2020 2020 2263 6974 7922 2c0a 2020  ,.    "city",.  
-0000e8b0: 2020 2263 6974 7965 6174 7322 2c0a 2020    "cityeats",.  
-0000e8c0: 2020 2263 6b22 2c0a 2020 2020 2263 6c22    "ck",.    "cl"
-0000e8d0: 2c0a 2020 2020 2263 6c61 696d 7322 2c0a  ,.    "claims",.
-0000e8e0: 2020 2020 2263 6c65 616e 696e 6722 2c0a      "cleaning",.
-0000e8f0: 2020 2020 2263 6c69 636b 222c 0a20 2020      "click",.   
-0000e900: 2022 636c 696e 6963 222c 0a20 2020 2022   "clinic",.    "
-0000e910: 636c 696e 6971 7565 222c 0a20 2020 2022  clinique",.    "
-0000e920: 636c 6f74 6869 6e67 222c 0a20 2020 2022  clothing",.    "
-0000e930: 636c 6f75 6422 2c0a 2020 2020 2263 6c75  cloud",.    "clu
-0000e940: 6222 2c0a 2020 2020 2263 6c75 626d 6564  b",.    "clubmed
-0000e950: 222c 0a20 2020 2022 636d 222c 0a20 2020  ",.    "cm",.   
-0000e960: 2022 636e 222c 0a20 2020 2022 636f 222c   "cn",.    "co",
-0000e970: 0a20 2020 2022 636f 6163 6822 2c0a 2020  .    "coach",.  
-0000e980: 2020 2263 6f64 6573 222c 0a20 2020 2022    "codes",.    "
-0000e990: 636f 6666 6565 222c 0a20 2020 2022 636f  coffee",.    "co
-0000e9a0: 6c6c 6567 6522 2c0a 2020 2020 2263 6f6c  llege",.    "col
-0000e9b0: 6f67 6e65 222c 0a20 2020 2022 636f 6d22  ogne",.    "com"
-0000e9c0: 2c0a 2020 2020 2263 6f6d 6361 7374 222c  ,.    "comcast",
-0000e9d0: 0a20 2020 2022 636f 6d6d 6261 6e6b 222c  .    "commbank",
-0000e9e0: 0a20 2020 2022 636f 6d6d 756e 6974 7922  .    "community"
-0000e9f0: 2c0a 2020 2020 2263 6f6d 7061 6e79 222c  ,.    "company",
-0000ea00: 0a20 2020 2022 636f 6d70 6172 6522 2c0a  .    "compare",.
-0000ea10: 2020 2020 2263 6f6d 7075 7465 7222 2c0a      "computer",.
-0000ea20: 2020 2020 2263 6f6d 7365 6322 2c0a 2020      "comsec",.  
-0000ea30: 2020 2263 6f6e 646f 7322 2c0a 2020 2020    "condos",.    
-0000ea40: 2263 6f6e 7374 7275 6374 696f 6e22 2c0a  "construction",.
-0000ea50: 2020 2020 2263 6f6e 7375 6c74 696e 6722      "consulting"
-0000ea60: 2c0a 2020 2020 2263 6f6e 7461 6374 222c  ,.    "contact",
-0000ea70: 0a20 2020 2022 636f 6e74 7261 6374 6f72  .    "contractor
-0000ea80: 7322 2c0a 2020 2020 2263 6f6f 6b69 6e67  s",.    "cooking
-0000ea90: 222c 0a20 2020 2022 636f 6f6b 696e 6763  ",.    "cookingc
-0000eaa0: 6861 6e6e 656c 222c 0a20 2020 2022 636f  hannel",.    "co
-0000eab0: 6f6c 222c 0a20 2020 2022 636f 6f70 222c  ol",.    "coop",
-0000eac0: 0a20 2020 2022 636f 7273 6963 6122 2c0a  .    "corsica",.
-0000ead0: 2020 2020 2263 6f75 6e74 7279 222c 0a20      "country",. 
-0000eae0: 2020 2022 636f 7570 6f6e 222c 0a20 2020     "coupon",.   
-0000eaf0: 2022 636f 7570 6f6e 7322 2c0a 2020 2020   "coupons",.    
-0000eb00: 2263 6f75 7273 6573 222c 0a20 2020 2022  "courses",.    "
-0000eb10: 6372 222c 0a20 2020 2022 6372 6564 6974  cr",.    "credit
-0000eb20: 222c 0a20 2020 2022 6372 6564 6974 6361  ",.    "creditca
-0000eb30: 7264 222c 0a20 2020 2022 6372 6564 6974  rd",.    "credit
-0000eb40: 756e 696f 6e22 2c0a 2020 2020 2263 7269  union",.    "cri
-0000eb50: 636b 6574 222c 0a20 2020 2022 6372 6f77  cket",.    "crow
-0000eb60: 6e22 2c0a 2020 2020 2263 7273 222c 0a20  n",.    "crs",. 
-0000eb70: 2020 2022 6372 7569 7365 222c 0a20 2020     "cruise",.   
-0000eb80: 2022 6372 7569 7365 7322 2c0a 2020 2020   "cruises",.    
-0000eb90: 2263 7363 222c 0a20 2020 2022 6375 222c  "csc",.    "cu",
-0000eba0: 0a20 2020 2022 6375 6973 696e 656c 6c61  .    "cuisinella
-0000ebb0: 222c 0a20 2020 2022 6376 222c 0a20 2020  ",.    "cv",.   
-0000ebc0: 2022 6377 222c 0a20 2020 2022 6378 222c   "cw",.    "cx",
-0000ebd0: 0a20 2020 2022 6379 222c 0a20 2020 2022  .    "cy",.    "
-0000ebe0: 6379 6d72 7522 2c0a 2020 2020 2263 796f  cymru",.    "cyo
-0000ebf0: 7522 2c0a 2020 2020 2263 7a22 2c0a 2020  u",.    "cz",.  
-0000ec00: 2020 2320 640a 2020 2020 2264 6162 7572    # d.    "dabur
-0000ec10: 222c 0a20 2020 2022 6461 6422 2c0a 2020  ",.    "dad",.  
-0000ec20: 2020 2264 616e 6365 222c 0a20 2020 2022    "dance",.    "
-0000ec30: 6461 7461 222c 0a20 2020 2022 6461 7465  data",.    "date
-0000ec40: 222c 0a20 2020 2022 6461 7469 6e67 222c  ",.    "dating",
-0000ec50: 0a20 2020 2022 6461 7473 756e 222c 0a20  .    "datsun",. 
-0000ec60: 2020 2022 6461 7922 2c0a 2020 2020 2264     "day",.    "d
-0000ec70: 636c 6b22 2c0a 2020 2020 2264 6473 222c  clk",.    "dds",
-0000ec80: 0a20 2020 2022 6465 222c 0a20 2020 2022  .    "de",.    "
-0000ec90: 6465 616c 222c 0a20 2020 2022 6465 616c  deal",.    "deal
-0000eca0: 6572 222c 0a20 2020 2022 6465 616c 7322  er",.    "deals"
-0000ecb0: 2c0a 2020 2020 2264 6567 7265 6522 2c0a  ,.    "degree",.
-0000ecc0: 2020 2020 2264 656c 6976 6572 7922 2c0a      "delivery",.
-0000ecd0: 2020 2020 2264 656c 6c22 2c0a 2020 2020      "dell",.    
-0000ece0: 2264 656c 6f69 7474 6522 2c0a 2020 2020  "deloitte",.    
-0000ecf0: 2264 656c 7461 222c 0a20 2020 2022 6465  "delta",.    "de
-0000ed00: 6d6f 6372 6174 222c 0a20 2020 2022 6465  mocrat",.    "de
-0000ed10: 6e74 616c 222c 0a20 2020 2022 6465 6e74  ntal",.    "dent
-0000ed20: 6973 7422 2c0a 2020 2020 2264 6573 6922  ist",.    "desi"
-0000ed30: 2c0a 2020 2020 2264 6573 6967 6e22 2c0a  ,.    "design",.
-0000ed40: 2020 2020 2264 6576 222c 0a20 2020 2022      "dev",.    "
-0000ed50: 6468 6c22 2c0a 2020 2020 2264 6961 6d6f  dhl",.    "diamo
-0000ed60: 6e64 7322 2c0a 2020 2020 2264 6965 7422  nds",.    "diet"
-0000ed70: 2c0a 2020 2020 2264 6967 6974 616c 222c  ,.    "digital",
-0000ed80: 0a20 2020 2022 6469 7265 6374 222c 0a20  .    "direct",. 
-0000ed90: 2020 2022 6469 7265 6374 6f72 7922 2c0a     "directory",.
-0000eda0: 2020 2020 2264 6973 636f 756e 7422 2c0a      "discount",.
-0000edb0: 2020 2020 2264 6973 636f 7665 7222 2c0a      "discover",.
-0000edc0: 2020 2020 2264 6973 6822 2c0a 2020 2020      "dish",.    
-0000edd0: 2264 6979 222c 0a20 2020 2022 646a 222c  "diy",.    "dj",
-0000ede0: 0a20 2020 2022 646b 222c 0a20 2020 2022  .    "dk",.    "
-0000edf0: 646d 222c 0a20 2020 2022 646e 7022 2c0a  dm",.    "dnp",.
-0000ee00: 2020 2020 2264 6f22 2c0a 2020 2020 2264      "do",.    "d
-0000ee10: 6f63 7322 2c0a 2020 2020 2264 6f63 746f  ocs",.    "docto
-0000ee20: 7222 2c0a 2020 2020 2264 6f64 6765 222c  r",.    "dodge",
-0000ee30: 0a20 2020 2022 646f 6722 2c0a 2020 2020  .    "dog",.    
-0000ee40: 2264 6f68 6122 2c0a 2020 2020 2264 6f6d  "doha",.    "dom
-0000ee50: 6169 6e73 222c 0a20 2020 2022 646f 7422  ains",.    "dot"
-0000ee60: 2c0a 2020 2020 2264 6f77 6e6c 6f61 6422  ,.    "download"
-0000ee70: 2c0a 2020 2020 2264 7269 7665 222c 0a20  ,.    "drive",. 
-0000ee80: 2020 2022 6474 7622 2c0a 2020 2020 2264     "dtv",.    "d
-0000ee90: 7562 6169 222c 0a20 2020 2022 6475 636b  ubai",.    "duck
-0000eea0: 222c 0a20 2020 2022 6475 6e6c 6f70 222c  ",.    "dunlop",
-0000eeb0: 0a20 2020 2022 6475 6e73 222c 0a20 2020  .    "duns",.   
-0000eec0: 2022 6475 706f 6e74 222c 0a20 2020 2022   "dupont",.    "
-0000eed0: 6475 7262 616e 222c 0a20 2020 2022 6476  durban",.    "dv
-0000eee0: 6167 222c 0a20 2020 2022 6476 7222 2c0a  ag",.    "dvr",.
-0000eef0: 2020 2020 2264 7a22 2c0a 2020 2020 2320      "dz",.    # 
-0000ef00: 650a 2020 2020 2265 6172 7468 222c 0a20  e.    "earth",. 
-0000ef10: 2020 2022 6561 7422 2c0a 2020 2020 2265     "eat",.    "e
-0000ef20: 6322 2c0a 2020 2020 2265 636f 222c 0a20  c",.    "eco",. 
-0000ef30: 2020 2022 6564 656b 6122 2c0a 2020 2020     "edeka",.    
-0000ef40: 2265 6475 222c 0a20 2020 2022 6564 7563  "edu",.    "educ
-0000ef50: 6174 696f 6e22 2c0a 2020 2020 2265 6522  ation",.    "ee"
-0000ef60: 2c0a 2020 2020 2265 6722 2c0a 2020 2020  ,.    "eg",.    
-0000ef70: 2265 6d61 696c 222c 0a20 2020 2022 656d  "email",.    "em
-0000ef80: 6572 636b 222c 0a20 2020 2022 656e 6572  erck",.    "ener
-0000ef90: 6779 222c 0a20 2020 2022 656e 6769 6e65  gy",.    "engine
-0000efa0: 6572 222c 0a20 2020 2022 656e 6769 6e65  er",.    "engine
-0000efb0: 6572 696e 6722 2c0a 2020 2020 2265 6e74  ering",.    "ent
-0000efc0: 6572 7072 6973 6573 222c 0a20 2020 2022  erprises",.    "
-0000efd0: 6570 6f73 7422 2c0a 2020 2020 2265 7073  epost",.    "eps
-0000efe0: 6f6e 222c 0a20 2020 2022 6571 7569 706d  on",.    "equipm
-0000eff0: 656e 7422 2c0a 2020 2020 2265 7222 2c0a  ent",.    "er",.
-0000f000: 2020 2020 2265 7269 6373 736f 6e22 2c0a      "ericsson",.
-0000f010: 2020 2020 2265 726e 6922 2c0a 2020 2020      "erni",.    
-0000f020: 2265 7322 2c0a 2020 2020 2265 7371 222c  "es",.    "esq",
-0000f030: 0a20 2020 2022 6573 7461 7465 222c 0a20  .    "estate",. 
-0000f040: 2020 2022 6573 7572 616e 6365 222c 0a20     "esurance",. 
-0000f050: 2020 2022 6574 222c 0a20 2020 2022 6574     "et",.    "et
-0000f060: 6973 616c 6174 222c 0a20 2020 2022 6575  isalat",.    "eu
-0000f070: 222c 0a20 2020 2022 6575 726f 7669 7369  ",.    "eurovisi
-0000f080: 6f6e 222c 0a20 2020 2022 6575 7322 2c0a  on",.    "eus",.
-0000f090: 2020 2020 2265 7665 6e74 7322 2c0a 2020      "events",.  
-0000f0a0: 2020 2265 7665 7262 616e 6b22 2c0a 2020    "everbank",.  
-0000f0b0: 2020 2265 7863 6861 6e67 6522 2c0a 2020    "exchange",.  
-0000f0c0: 2020 2265 7870 6572 7422 2c0a 2020 2020    "expert",.    
-0000f0d0: 2265 7870 6f73 6564 222c 0a20 2020 2022  "exposed",.    "
-0000f0e0: 6578 7072 6573 7322 2c0a 2020 2020 2265  express",.    "e
-0000f0f0: 7874 7261 7370 6163 6522 2c0a 2020 2020  xtraspace",.    
-0000f100: 2320 660a 2020 2020 2266 6167 6522 2c0a  # f.    "fage",.
-0000f110: 2020 2020 2266 6169 6c22 2c0a 2020 2020      "fail",.    
-0000f120: 2266 6169 7277 696e 6473 222c 0a20 2020  "fairwinds",.   
-0000f130: 2022 6661 6974 6822 2c0a 2020 2020 2266   "faith",.    "f
-0000f140: 616d 696c 7922 2c0a 2020 2020 2266 616e  amily",.    "fan
-0000f150: 222c 0a20 2020 2022 6661 6e73 222c 0a20  ",.    "fans",. 
-0000f160: 2020 2022 6661 726d 222c 0a20 2020 2022     "farm",.    "
-0000f170: 6661 726d 6572 7322 2c0a 2020 2020 2266  farmers",.    "f
-0000f180: 6173 6869 6f6e 222c 0a20 2020 2022 6661  ashion",.    "fa
-0000f190: 7374 222c 0a20 2020 2022 6665 6465 7822  st",.    "fedex"
-0000f1a0: 2c0a 2020 2020 2266 6565 6462 6163 6b22  ,.    "feedback"
-0000f1b0: 2c0a 2020 2020 2266 6572 7261 7269 222c  ,.    "ferrari",
-0000f1c0: 0a20 2020 2022 6665 7272 6572 6f22 2c0a  .    "ferrero",.
-0000f1d0: 2020 2020 2266 6922 2c0a 2020 2020 2266      "fi",.    "f
-0000f1e0: 6961 7422 2c0a 2020 2020 2266 6964 656c  iat",.    "fidel
-0000f1f0: 6974 7922 2c0a 2020 2020 2266 6964 6f22  ity",.    "fido"
-0000f200: 2c0a 2020 2020 2266 696c 6d22 2c0a 2020  ,.    "film",.  
-0000f210: 2020 2266 696e 616c 222c 0a20 2020 2022    "final",.    "
-0000f220: 6669 6e61 6e63 6522 2c0a 2020 2020 2266  finance",.    "f
-0000f230: 696e 616e 6369 616c 222c 0a20 2020 2022  inancial",.    "
-0000f240: 6669 7265 222c 0a20 2020 2022 6669 7265  fire",.    "fire
-0000f250: 7374 6f6e 6522 2c0a 2020 2020 2266 6972  stone",.    "fir
-0000f260: 6d64 616c 6522 2c0a 2020 2020 2266 6973  mdale",.    "fis
-0000f270: 6822 2c0a 2020 2020 2266 6973 6869 6e67  h",.    "fishing
-0000f280: 222c 0a20 2020 2022 6669 7422 2c0a 2020  ",.    "fit",.  
-0000f290: 2020 2266 6974 6e65 7373 222c 0a20 2020    "fitness",.   
-0000f2a0: 2022 666a 222c 0a20 2020 2022 666b 222c   "fj",.    "fk",
-0000f2b0: 0a20 2020 2022 666c 6963 6b72 222c 0a20  .    "flickr",. 
-0000f2c0: 2020 2022 666c 6967 6874 7322 2c0a 2020     "flights",.  
-0000f2d0: 2020 2266 6c69 7222 2c0a 2020 2020 2266    "flir",.    "f
-0000f2e0: 6c6f 7269 7374 222c 0a20 2020 2022 666c  lorist",.    "fl
-0000f2f0: 6f77 6572 7322 2c0a 2020 2020 2266 6c79  owers",.    "fly
-0000f300: 222c 0a20 2020 2022 666d 222c 0a20 2020  ",.    "fm",.   
-0000f310: 2022 666f 222c 0a20 2020 2022 666f 6f22   "fo",.    "foo"
-0000f320: 2c0a 2020 2020 2266 6f6f 6422 2c0a 2020  ,.    "food",.  
-0000f330: 2020 2266 6f6f 646e 6574 776f 726b 222c    "foodnetwork",
-0000f340: 0a20 2020 2022 666f 6f74 6261 6c6c 222c  .    "football",
-0000f350: 0a20 2020 2022 666f 7264 222c 0a20 2020  .    "ford",.   
-0000f360: 2022 666f 7265 7822 2c0a 2020 2020 2266   "forex",.    "f
-0000f370: 6f72 7361 6c65 222c 0a20 2020 2022 666f  orsale",.    "fo
-0000f380: 7275 6d22 2c0a 2020 2020 2266 6f75 6e64  rum",.    "found
-0000f390: 6174 696f 6e22 2c0a 2020 2020 2266 6f78  ation",.    "fox
-0000f3a0: 222c 0a20 2020 2022 6672 222c 0a20 2020  ",.    "fr",.   
-0000f3b0: 2022 6672 6565 222c 0a20 2020 2022 6672   "free",.    "fr
-0000f3c0: 6573 656e 6975 7322 2c0a 2020 2020 2266  esenius",.    "f
-0000f3d0: 726c 222c 0a20 2020 2022 6672 6f67 616e  rl",.    "frogan
-0000f3e0: 7322 2c0a 2020 2020 2266 726f 6e74 646f  s",.    "frontdo
-0000f3f0: 6f72 222c 0a20 2020 2022 6672 6f6e 7469  or",.    "fronti
-0000f400: 6572 222c 0a20 2020 2022 6674 7222 2c0a  er",.    "ftr",.
-0000f410: 2020 2020 2266 756a 6974 7375 222c 0a20      "fujitsu",. 
-0000f420: 2020 2022 6675 6a69 7865 726f 7822 2c0a     "fujixerox",.
-0000f430: 2020 2020 2266 756e 222c 0a20 2020 2022      "fun",.    "
-0000f440: 6675 6e64 222c 0a20 2020 2022 6675 726e  fund",.    "furn
-0000f450: 6974 7572 6522 2c0a 2020 2020 2266 7574  iture",.    "fut
-0000f460: 626f 6c22 2c0a 2020 2020 2266 7969 222c  bol",.    "fyi",
-0000f470: 0a20 2020 2023 2067 0a20 2020 2022 6761  .    # g.    "ga
-0000f480: 222c 0a20 2020 2022 6761 6c22 2c0a 2020  ",.    "gal",.  
-0000f490: 2020 2267 616c 6c65 7279 222c 0a20 2020    "gallery",.   
-0000f4a0: 2022 6761 6c6c 6f22 2c0a 2020 2020 2267   "gallo",.    "g
-0000f4b0: 616c 6c75 7022 2c0a 2020 2020 2267 616d  allup",.    "gam
-0000f4c0: 6522 2c0a 2020 2020 2267 616d 6573 222c  e",.    "games",
-0000f4d0: 0a20 2020 2022 6761 7022 2c0a 2020 2020  .    "gap",.    
-0000f4e0: 2267 6172 6465 6e22 2c0a 2020 2020 2267  "garden",.    "g
-0000f4f0: 6222 2c0a 2020 2020 2267 6269 7a22 2c0a  b",.    "gbiz",.
-0000f500: 2020 2020 2267 6422 2c0a 2020 2020 2267      "gd",.    "g
-0000f510: 646e 222c 0a20 2020 2022 6765 222c 0a20  dn",.    "ge",. 
-0000f520: 2020 2022 6765 6122 2c0a 2020 2020 2267     "gea",.    "g
-0000f530: 656e 7422 2c0a 2020 2020 2267 656e 7469  ent",.    "genti
-0000f540: 6e67 222c 0a20 2020 2022 6765 6f72 6765  ng",.    "george
-0000f550: 222c 0a20 2020 2022 6766 222c 0a20 2020  ",.    "gf",.   
-0000f560: 2022 6767 222c 0a20 2020 2022 6767 6565   "gg",.    "ggee
-0000f570: 222c 0a20 2020 2022 6768 222c 0a20 2020  ",.    "gh",.   
-0000f580: 2022 6769 222c 0a20 2020 2022 6769 6674   "gi",.    "gift
-0000f590: 222c 0a20 2020 2022 6769 6674 7322 2c0a  ",.    "gifts",.
-0000f5a0: 2020 2020 2267 6976 6573 222c 0a20 2020      "gives",.   
-0000f5b0: 2022 6769 7669 6e67 222c 0a20 2020 2022   "giving",.    "
-0000f5c0: 676c 222c 0a20 2020 2022 676c 6164 6522  gl",.    "glade"
-0000f5d0: 2c0a 2020 2020 2267 6c61 7373 222c 0a20  ,.    "glass",. 
-0000f5e0: 2020 2022 676c 6522 2c0a 2020 2020 2267     "gle",.    "g
-0000f5f0: 6c6f 6261 6c22 2c0a 2020 2020 2267 6c6f  lobal",.    "glo
-0000f600: 626f 222c 0a20 2020 2022 676d 222c 0a20  bo",.    "gm",. 
-0000f610: 2020 2022 676d 6169 6c22 2c0a 2020 2020     "gmail",.    
-0000f620: 2267 6d62 6822 2c0a 2020 2020 2267 6d6f  "gmbh",.    "gmo
-0000f630: 222c 0a20 2020 2022 676d 7822 2c0a 2020  ",.    "gmx",.  
-0000f640: 2020 2267 6e22 2c0a 2020 2020 2267 6f64    "gn",.    "god
-0000f650: 6164 6479 222c 0a20 2020 2022 676f 6c64  addy",.    "gold
-0000f660: 222c 0a20 2020 2022 676f 6c64 706f 696e  ",.    "goldpoin
-0000f670: 7422 2c0a 2020 2020 2267 6f6c 6622 2c0a  t",.    "golf",.
-0000f680: 2020 2020 2267 6f6f 222c 0a20 2020 2022      "goo",.    "
-0000f690: 676f 6f64 6861 6e64 7322 2c0a 2020 2020  goodhands",.    
-0000f6a0: 2267 6f6f 6479 6561 7222 2c0a 2020 2020  "goodyear",.    
-0000f6b0: 2267 6f6f 6722 2c0a 2020 2020 2267 6f6f  "goog",.    "goo
-0000f6c0: 676c 6522 2c0a 2020 2020 2267 6f70 222c  gle",.    "gop",
-0000f6d0: 0a20 2020 2022 676f 7422 2c0a 2020 2020  .    "got",.    
-0000f6e0: 2267 6f76 222c 0a20 2020 2022 6770 222c  "gov",.    "gp",
-0000f6f0: 0a20 2020 2022 6771 222c 0a20 2020 2022  .    "gq",.    "
-0000f700: 6772 222c 0a20 2020 2022 6772 6169 6e67  gr",.    "graing
-0000f710: 6572 222c 0a20 2020 2022 6772 6170 6869  er",.    "graphi
-0000f720: 6373 222c 0a20 2020 2022 6772 6174 6973  cs",.    "gratis
-0000f730: 222c 0a20 2020 2022 6772 6565 6e22 2c0a  ",.    "green",.
-0000f740: 2020 2020 2267 7269 7065 222c 0a20 2020      "gripe",.   
-0000f750: 2022 6772 6f63 6572 7922 2c0a 2020 2020   "grocery",.    
-0000f760: 2267 726f 7570 222c 0a20 2020 2022 6773  "group",.    "gs
-0000f770: 222c 0a20 2020 2022 6774 222c 0a20 2020  ",.    "gt",.   
-0000f780: 2022 6775 222c 0a20 2020 2022 6775 6172   "gu",.    "guar
-0000f790: 6469 616e 222c 0a20 2020 2022 6775 6363  dian",.    "gucc
-0000f7a0: 6922 2c0a 2020 2020 2267 7567 6522 2c0a  i",.    "guge",.
-0000f7b0: 2020 2020 2267 7569 6465 222c 0a20 2020      "guide",.   
-0000f7c0: 2022 6775 6974 6172 7322 2c0a 2020 2020   "guitars",.    
-0000f7d0: 2267 7572 7522 2c0a 2020 2020 2267 7722  "guru",.    "gw"
-0000f7e0: 2c0a 2020 2020 2267 7922 2c0a 2020 2020  ,.    "gy",.    
-0000f7f0: 2320 680a 2020 2020 2268 6169 7222 2c0a  # h.    "hair",.
-0000f800: 2020 2020 2268 616d 6275 7267 222c 0a20      "hamburg",. 
-0000f810: 2020 2022 6861 6e67 6f75 7422 2c0a 2020     "hangout",.  
-0000f820: 2020 2268 6175 7322 2c0a 2020 2020 2268    "haus",.    "h
-0000f830: 626f 222c 0a20 2020 2022 6864 6663 222c  bo",.    "hdfc",
-0000f840: 0a20 2020 2022 6864 6663 6261 6e6b 222c  .    "hdfcbank",
-0000f850: 0a20 2020 2022 6865 616c 7468 222c 0a20  .    "health",. 
-0000f860: 2020 2022 6865 616c 7468 6361 7265 222c     "healthcare",
-0000f870: 0a20 2020 2022 6865 6c70 222c 0a20 2020  .    "help",.   
-0000f880: 2022 6865 6c73 696e 6b69 222c 0a20 2020   "helsinki",.   
-0000f890: 2022 6865 7265 222c 0a20 2020 2022 6865   "here",.    "he
-0000f8a0: 726d 6573 222c 0a20 2020 2022 6867 7476  rmes",.    "hgtv
-0000f8b0: 222c 0a20 2020 2022 6869 7068 6f70 222c  ",.    "hiphop",
-0000f8c0: 0a20 2020 2022 6869 7361 6d69 7473 7522  .    "hisamitsu"
-0000f8d0: 2c0a 2020 2020 2268 6974 6163 6869 222c  ,.    "hitachi",
-0000f8e0: 0a20 2020 2022 6869 7622 2c0a 2020 2020  .    "hiv",.    
-0000f8f0: 2268 6b22 2c0a 2020 2020 2268 6b74 222c  "hk",.    "hkt",
-0000f900: 0a20 2020 2022 686d 222c 0a20 2020 2022  .    "hm",.    "
-0000f910: 686e 222c 0a20 2020 2022 686f 636b 6579  hn",.    "hockey
-0000f920: 222c 0a20 2020 2022 686f 6c64 696e 6773  ",.    "holdings
-0000f930: 222c 0a20 2020 2022 686f 6c69 6461 7922  ",.    "holiday"
-0000f940: 2c0a 2020 2020 2268 6f6d 6564 6570 6f74  ,.    "homedepot
-0000f950: 222c 0a20 2020 2022 686f 6d65 676f 6f64  ",.    "homegood
-0000f960: 7322 2c0a 2020 2020 2268 6f6d 6573 222c  s",.    "homes",
-0000f970: 0a20 2020 2022 686f 6d65 7365 6e73 6522  .    "homesense"
-0000f980: 2c0a 2020 2020 2268 6f6e 6461 222c 0a20  ,.    "honda",. 
-0000f990: 2020 2022 686f 6e65 7977 656c 6c22 2c0a     "honeywell",.
-0000f9a0: 2020 2020 2268 6f72 7365 222c 0a20 2020      "horse",.   
-0000f9b0: 2022 686f 7370 6974 616c 222c 0a20 2020   "hospital",.   
-0000f9c0: 2022 686f 7374 222c 0a20 2020 2022 686f   "host",.    "ho
-0000f9d0: 7374 696e 6722 2c0a 2020 2020 2268 6f74  sting",.    "hot
-0000f9e0: 222c 0a20 2020 2022 686f 7465 6c65 7322  ",.    "hoteles"
-0000f9f0: 2c0a 2020 2020 2268 6f74 656c 7322 2c0a  ,.    "hotels",.
-0000fa00: 2020 2020 2268 6f74 6d61 696c 222c 0a20      "hotmail",. 
-0000fa10: 2020 2022 686f 7573 6522 2c0a 2020 2020     "house",.    
-0000fa20: 2268 6f77 222c 0a20 2020 2022 6872 222c  "how",.    "hr",
-0000fa30: 0a20 2020 2022 6873 6263 222c 0a20 2020  .    "hsbc",.   
-0000fa40: 2022 6874 222c 0a20 2020 2022 6875 222c   "ht",.    "hu",
-0000fa50: 0a20 2020 2022 6875 6768 6573 222c 0a20  .    "hughes",. 
-0000fa60: 2020 2022 6879 6174 7422 2c0a 2020 2020     "hyatt",.    
-0000fa70: 2268 7975 6e64 6169 222c 0a20 2020 2023  "hyundai",.    #
-0000fa80: 2069 0a20 2020 2022 6962 6d22 2c0a 2020   i.    "ibm",.  
-0000fa90: 2020 2269 6362 6322 2c0a 2020 2020 2269    "icbc",.    "i
-0000faa0: 6365 222c 0a20 2020 2022 6963 7522 2c0a  ce",.    "icu",.
-0000fab0: 2020 2020 2269 6422 2c0a 2020 2020 2269      "id",.    "i
-0000fac0: 6522 2c0a 2020 2020 2269 6565 6522 2c0a  e",.    "ieee",.
-0000fad0: 2020 2020 2269 666d 222c 0a20 2020 2022      "ifm",.    "
-0000fae0: 696b 616e 6f22 2c0a 2020 2020 2269 6c22  ikano",.    "il"
-0000faf0: 2c0a 2020 2020 2269 6d22 2c0a 2020 2020  ,.    "im",.    
-0000fb00: 2269 6d61 6d61 7422 2c0a 2020 2020 2269  "imamat",.    "i
-0000fb10: 6d64 6222 2c0a 2020 2020 2269 6d6d 6f22  mdb",.    "immo"
-0000fb20: 2c0a 2020 2020 2269 6d6d 6f62 696c 6965  ,.    "immobilie
-0000fb30: 6e22 2c0a 2020 2020 2269 6e22 2c0a 2020  n",.    "in",.  
-0000fb40: 2020 2269 6e64 7573 7472 6965 7322 2c0a    "industries",.
-0000fb50: 2020 2020 2269 6e66 696e 6974 6922 2c0a      "infiniti",.
-0000fb60: 2020 2020 2269 6e66 6f22 2c0a 2020 2020      "info",.    
-0000fb70: 2269 6e67 222c 0a20 2020 2022 696e 6b22  "ing",.    "ink"
-0000fb80: 2c0a 2020 2020 2269 6e73 7469 7475 7465  ,.    "institute
-0000fb90: 222c 0a20 2020 2022 696e 7375 7261 6e63  ",.    "insuranc
-0000fba0: 6522 2c0a 2020 2020 2269 6e73 7572 6522  e",.    "insure"
-0000fbb0: 2c0a 2020 2020 2269 6e74 222c 0a20 2020  ,.    "int",.   
-0000fbc0: 2022 696e 7465 6c22 2c0a 2020 2020 2269   "intel",.    "i
-0000fbd0: 6e74 6572 6e61 7469 6f6e 616c 222c 0a20  nternational",. 
-0000fbe0: 2020 2022 696e 7475 6974 222c 0a20 2020     "intuit",.   
-0000fbf0: 2022 696e 7665 7374 6d65 6e74 7322 2c0a   "investments",.
-0000fc00: 2020 2020 2269 6f22 2c0a 2020 2020 2269      "io",.    "i
-0000fc10: 7069 7261 6e67 6122 2c0a 2020 2020 2269  piranga",.    "i
-0000fc20: 7122 2c0a 2020 2020 2269 7222 2c0a 2020  q",.    "ir",.  
-0000fc30: 2020 2269 7269 7368 222c 0a20 2020 2022    "irish",.    "
-0000fc40: 6973 222c 0a20 2020 2022 6973 656c 6563  is",.    "iselec
-0000fc50: 7422 2c0a 2020 2020 2269 736d 6169 6c69  t",.    "ismaili
-0000fc60: 222c 0a20 2020 2022 6973 7422 2c0a 2020  ",.    "ist",.  
-0000fc70: 2020 2269 7374 616e 6275 6c22 2c0a 2020    "istanbul",.  
-0000fc80: 2020 2269 7422 2c0a 2020 2020 2269 7461    "it",.    "ita
-0000fc90: 7522 2c0a 2020 2020 2269 7476 222c 0a20  u",.    "itv",. 
-0000fca0: 2020 2022 6976 6563 6f22 2c0a 2020 2020     "iveco",.    
-0000fcb0: 2269 7763 222c 0a20 2020 2023 206a 0a20  "iwc",.    # j. 
-0000fcc0: 2020 2022 6a61 6775 6172 222c 0a20 2020     "jaguar",.   
-0000fcd0: 2022 6a61 7661 222c 0a20 2020 2022 6a63   "java",.    "jc
-0000fce0: 6222 2c0a 2020 2020 226a 6370 222c 0a20  b",.    "jcp",. 
-0000fcf0: 2020 2022 6a65 222c 0a20 2020 2022 6a65     "je",.    "je
-0000fd00: 6570 222c 0a20 2020 2022 6a65 747a 7422  ep",.    "jetzt"
-0000fd10: 2c0a 2020 2020 226a 6577 656c 7279 222c  ,.    "jewelry",
-0000fd20: 0a20 2020 2022 6a69 6f22 2c0a 2020 2020  .    "jio",.    
-0000fd30: 226a 6c63 222c 0a20 2020 2022 6a6c 6c22  "jlc",.    "jll"
-0000fd40: 2c0a 2020 2020 226a 6d22 2c0a 2020 2020  ,.    "jm",.    
-0000fd50: 226a 6d70 222c 0a20 2020 2022 6a6e 6a22  "jmp",.    "jnj"
-0000fd60: 2c0a 2020 2020 226a 6f22 2c0a 2020 2020  ,.    "jo",.    
-0000fd70: 226a 6f62 7322 2c0a 2020 2020 226a 6f62  "jobs",.    "job
-0000fd80: 7572 6722 2c0a 2020 2020 226a 6f74 222c  urg",.    "jot",
-0000fd90: 0a20 2020 2022 6a6f 7922 2c0a 2020 2020  .    "joy",.    
-0000fda0: 226a 7022 2c0a 2020 2020 226a 706d 6f72  "jp",.    "jpmor
-0000fdb0: 6761 6e22 2c0a 2020 2020 226a 7072 7322  gan",.    "jprs"
-0000fdc0: 2c0a 2020 2020 226a 7565 676f 7322 2c0a  ,.    "juegos",.
-0000fdd0: 2020 2020 226a 756e 6970 6572 222c 0a20      "juniper",. 
-0000fde0: 2020 2023 206b 0a20 2020 2022 6b61 7566     # k.    "kauf
-0000fdf0: 656e 222c 0a20 2020 2022 6b64 6469 222c  en",.    "kddi",
-0000fe00: 0a20 2020 2022 6b65 222c 0a20 2020 2022  .    "ke",.    "
-0000fe10: 6b65 7272 7968 6f74 656c 7322 2c0a 2020  kerryhotels",.  
-0000fe20: 2020 226b 6572 7279 6c6f 6769 7374 6963    "kerrylogistic
-0000fe30: 7322 2c0a 2020 2020 226b 6572 7279 7072  s",.    "kerrypr
-0000fe40: 6f70 6572 7469 6573 222c 0a20 2020 2022  operties",.    "
-0000fe50: 6b66 6822 2c0a 2020 2020 226b 6722 2c0a  kfh",.    "kg",.
-0000fe60: 2020 2020 226b 6822 2c0a 2020 2020 226b      "kh",.    "k
-0000fe70: 6922 2c0a 2020 2020 226b 6961 222c 0a20  i",.    "kia",. 
-0000fe80: 2020 2022 6b69 6d22 2c0a 2020 2020 226b     "kim",.    "k
-0000fe90: 696e 6465 7222 2c0a 2020 2020 226b 696e  inder",.    "kin
-0000fea0: 646c 6522 2c0a 2020 2020 226b 6974 6368  dle",.    "kitch
-0000feb0: 656e 222c 0a20 2020 2022 6b69 7769 222c  en",.    "kiwi",
-0000fec0: 0a20 2020 2022 6b6d 222c 0a20 2020 2022  .    "km",.    "
-0000fed0: 6b6e 222c 0a20 2020 2022 6b6f 656c 6e22  kn",.    "koeln"
-0000fee0: 2c0a 2020 2020 226b 6f6d 6174 7375 222c  ,.    "komatsu",
-0000fef0: 0a20 2020 2022 6b6f 7368 6572 222c 0a20  .    "kosher",. 
-0000ff00: 2020 2022 6b70 222c 0a20 2020 2022 6b70     "kp",.    "kp
-0000ff10: 6d67 222c 0a20 2020 2022 6b70 6e22 2c0a  mg",.    "kpn",.
-0000ff20: 2020 2020 226b 7222 2c0a 2020 2020 226b      "kr",.    "k
-0000ff30: 7264 222c 0a20 2020 2022 6b72 6564 222c  rd",.    "kred",
-0000ff40: 0a20 2020 2022 6b75 6f6b 6772 6f75 7022  .    "kuokgroup"
-0000ff50: 2c0a 2020 2020 226b 7722 2c0a 2020 2020  ,.    "kw",.    
-0000ff60: 226b 7922 2c0a 2020 2020 226b 796f 746f  "ky",.    "kyoto
-0000ff70: 222c 0a20 2020 2022 6b7a 222c 0a20 2020  ",.    "kz",.   
-0000ff80: 2023 206c 0a20 2020 2022 6c61 222c 0a20   # l.    "la",. 
-0000ff90: 2020 2022 6c61 6361 6978 6122 2c0a 2020     "lacaixa",.  
-0000ffa0: 2020 226c 6164 6272 6f6b 6573 222c 0a20    "ladbrokes",. 
-0000ffb0: 2020 2022 6c61 6d62 6f72 6768 696e 6922     "lamborghini"
-0000ffc0: 2c0a 2020 2020 226c 616d 6572 222c 0a20  ,.    "lamer",. 
-0000ffd0: 2020 2022 6c61 6e63 6173 7465 7222 2c0a     "lancaster",.
-0000ffe0: 2020 2020 226c 616e 6369 6122 2c0a 2020      "lancia",.  
-0000fff0: 2020 226c 616e 636f 6d65 222c 0a20 2020    "lancome",.   
-00010000: 2022 6c61 6e64 222c 0a20 2020 2022 6c61   "land",.    "la
-00010010: 6e64 726f 7665 7222 2c0a 2020 2020 226c  ndrover",.    "l
-00010020: 616e 7865 7373 222c 0a20 2020 2022 6c61  anxess",.    "la
-00010030: 7361 6c6c 6522 2c0a 2020 2020 226c 6174  salle",.    "lat
-00010040: 222c 0a20 2020 2022 6c61 7469 6e6f 222c  ",.    "latino",
-00010050: 0a20 2020 2022 6c61 7472 6f62 6522 2c0a  .    "latrobe",.
-00010060: 2020 2020 226c 6177 222c 0a20 2020 2022      "law",.    "
-00010070: 6c61 7779 6572 222c 0a20 2020 2022 6c62  lawyer",.    "lb
-00010080: 222c 0a20 2020 2022 6c63 222c 0a20 2020  ",.    "lc",.   
-00010090: 2022 6c64 7322 2c0a 2020 2020 226c 6561   "lds",.    "lea
-000100a0: 7365 222c 0a20 2020 2022 6c65 636c 6572  se",.    "lecler
-000100b0: 6322 2c0a 2020 2020 226c 6566 7261 6b22  c",.    "lefrak"
-000100c0: 2c0a 2020 2020 226c 6567 616c 222c 0a20  ,.    "legal",. 
-000100d0: 2020 2022 6c65 676f 222c 0a20 2020 2022     "lego",.    "
-000100e0: 6c65 7875 7322 2c0a 2020 2020 226c 6762  lexus",.    "lgb
-000100f0: 7422 2c0a 2020 2020 226c 6922 2c0a 2020  t",.    "li",.  
-00010100: 2020 226c 6961 6973 6f6e 222c 0a20 2020    "liaison",.   
-00010110: 2022 6c69 646c 222c 0a20 2020 2022 6c69   "lidl",.    "li
-00010120: 6665 222c 0a20 2020 2022 6c69 6665 696e  fe",.    "lifein
-00010130: 7375 7261 6e63 6522 2c0a 2020 2020 226c  surance",.    "l
-00010140: 6966 6573 7479 6c65 222c 0a20 2020 2022  ifestyle",.    "
-00010150: 6c69 6768 7469 6e67 222c 0a20 2020 2022  lighting",.    "
-00010160: 6c69 6b65 222c 0a20 2020 2022 6c69 6c6c  like",.    "lill
-00010170: 7922 2c0a 2020 2020 226c 696d 6974 6564  y",.    "limited
-00010180: 222c 0a20 2020 2022 6c69 6d6f 222c 0a20  ",.    "limo",. 
-00010190: 2020 2022 6c69 6e63 6f6c 6e22 2c0a 2020     "lincoln",.  
-000101a0: 2020 226c 696e 6465 222c 0a20 2020 2022    "linde",.    "
-000101b0: 6c69 6e6b 222c 0a20 2020 2022 6c69 7073  link",.    "lips
-000101c0: 7922 2c0a 2020 2020 226c 6976 6522 2c0a  y",.    "live",.
-000101d0: 2020 2020 226c 6976 696e 6722 2c0a 2020      "living",.  
-000101e0: 2020 226c 6978 696c 222c 0a20 2020 2022    "lixil",.    "
-000101f0: 6c6b 222c 0a20 2020 2022 6c6f 616e 222c  lk",.    "loan",
-00010200: 0a20 2020 2022 6c6f 616e 7322 2c0a 2020  .    "loans",.  
-00010210: 2020 226c 6f63 616c 686f 7374 222c 0a20    "localhost",. 
-00010220: 2020 2022 6c6f 636b 6572 222c 0a20 2020     "locker",.   
-00010230: 2022 6c6f 6375 7322 2c0a 2020 2020 226c   "locus",.    "l
-00010240: 6f66 7422 2c0a 2020 2020 226c 6f6c 222c  oft",.    "lol",
-00010250: 0a20 2020 2022 6c6f 6e64 6f6e 222c 0a20  .    "london",. 
-00010260: 2020 2022 6c6f 7474 6522 2c0a 2020 2020     "lotte",.    
-00010270: 226c 6f74 746f 222c 0a20 2020 2022 6c6f  "lotto",.    "lo
-00010280: 7665 222c 0a20 2020 2022 6c70 6c22 2c0a  ve",.    "lpl",.
-00010290: 2020 2020 226c 706c 6669 6e61 6e63 6961      "lplfinancia
-000102a0: 6c22 2c0a 2020 2020 226c 7222 2c0a 2020  l",.    "lr",.  
-000102b0: 2020 226c 7322 2c0a 2020 2020 226c 7422    "ls",.    "lt"
-000102c0: 2c0a 2020 2020 226c 7464 222c 0a20 2020  ,.    "ltd",.   
-000102d0: 2022 6c74 6461 222c 0a20 2020 2022 6c75   "ltda",.    "lu
-000102e0: 222c 0a20 2020 2022 6c75 6e64 6265 636b  ",.    "lundbeck
-000102f0: 222c 0a20 2020 2022 6c75 7069 6e22 2c0a  ",.    "lupin",.
-00010300: 2020 2020 226c 7578 6522 2c0a 2020 2020      "luxe",.    
-00010310: 226c 7578 7572 7922 2c0a 2020 2020 226c  "luxury",.    "l
-00010320: 7622 2c0a 2020 2020 226c 7922 2c0a 2020  v",.    "ly",.  
-00010330: 2020 2320 6d0a 2020 2020 226d 6122 2c0a    # m.    "ma",.
-00010340: 2020 2020 226d 6163 7973 222c 0a20 2020      "macys",.   
-00010350: 2022 6d61 6472 6964 222c 0a20 2020 2022   "madrid",.    "
-00010360: 6d61 6966 222c 0a20 2020 2022 6d61 6973  maif",.    "mais
-00010370: 6f6e 222c 0a20 2020 2022 6d61 6b65 7570  on",.    "makeup
-00010380: 222c 0a20 2020 2022 6d61 6e22 2c0a 2020  ",.    "man",.  
-00010390: 2020 226d 616e 6167 656d 656e 7422 2c0a    "management",.
-000103a0: 2020 2020 226d 616e 676f 222c 0a20 2020      "mango",.   
-000103b0: 2022 6d61 7022 2c0a 2020 2020 226d 6172   "map",.    "mar
-000103c0: 6b65 7422 2c0a 2020 2020 226d 6172 6b65  ket",.    "marke
-000103d0: 7469 6e67 222c 0a20 2020 2022 6d61 726b  ting",.    "mark
-000103e0: 6574 7322 2c0a 2020 2020 226d 6172 7269  ets",.    "marri
-000103f0: 6f74 7422 2c0a 2020 2020 226d 6172 7368  ott",.    "marsh
-00010400: 616c 6c73 222c 0a20 2020 2022 6d61 7365  alls",.    "mase
-00010410: 7261 7469 222c 0a20 2020 2022 6d61 7474  rati",.    "matt
-00010420: 656c 222c 0a20 2020 2022 6d62 6122 2c0a  el",.    "mba",.
-00010430: 2020 2020 226d 6322 2c0a 2020 2020 226d      "mc",.    "m
-00010440: 636b 696e 7365 7922 2c0a 2020 2020 226d  ckinsey",.    "m
-00010450: 6422 2c0a 2020 2020 226d 6522 2c0a 2020  d",.    "me",.  
-00010460: 2020 226d 6564 222c 0a20 2020 2022 6d65    "med",.    "me
-00010470: 6469 6122 2c0a 2020 2020 226d 6565 7422  dia",.    "meet"
-00010480: 2c0a 2020 2020 226d 656c 626f 7572 6e65  ,.    "melbourne
-00010490: 222c 0a20 2020 2022 6d65 6d65 222c 0a20  ",.    "meme",. 
-000104a0: 2020 2022 6d65 6d6f 7269 616c 222c 0a20     "memorial",. 
-000104b0: 2020 2022 6d65 6e22 2c0a 2020 2020 226d     "men",.    "m
-000104c0: 656e 7522 2c0a 2020 2020 226d 656f 222c  enu",.    "meo",
-000104d0: 0a20 2020 2022 6d65 7263 6b6d 7364 222c  .    "merckmsd",
-000104e0: 0a20 2020 2022 6d65 746c 6966 6522 2c0a  .    "metlife",.
-000104f0: 2020 2020 226d 6722 2c0a 2020 2020 226d      "mg",.    "m
-00010500: 6822 2c0a 2020 2020 226d 6961 6d69 222c  h",.    "miami",
-00010510: 0a20 2020 2022 6d69 6372 6f73 6f66 7422  .    "microsoft"
-00010520: 2c0a 2020 2020 226d 696c 222c 0a20 2020  ,.    "mil",.   
-00010530: 2022 6d69 6e69 222c 0a20 2020 2022 6d69   "mini",.    "mi
-00010540: 6e74 222c 0a20 2020 2022 6d69 7422 2c0a  nt",.    "mit",.
-00010550: 2020 2020 226d 6974 7375 6269 7368 6922      "mitsubishi"
-00010560: 2c0a 2020 2020 226d 6b22 2c0a 2020 2020  ,.    "mk",.    
-00010570: 226d 6c22 2c0a 2020 2020 226d 6c62 222c  "ml",.    "mlb",
-00010580: 0a20 2020 2022 6d6c 7322 2c0a 2020 2020  .    "mls",.    
-00010590: 226d 6d22 2c0a 2020 2020 226d 6d61 222c  "mm",.    "mma",
-000105a0: 0a20 2020 2022 6d6e 222c 0a20 2020 2022  .    "mn",.    "
-000105b0: 6d6f 222c 0a20 2020 2022 6d6f 6269 222c  mo",.    "mobi",
-000105c0: 0a20 2020 2022 6d6f 6269 6c65 222c 0a20  .    "mobile",. 
-000105d0: 2020 2022 6d6f 6269 6c79 222c 0a20 2020     "mobily",.   
-000105e0: 2022 6d6f 6461 222c 0a20 2020 2022 6d6f   "moda",.    "mo
-000105f0: 6522 2c0a 2020 2020 226d 6f69 222c 0a20  e",.    "moi",. 
-00010600: 2020 2022 6d6f 6d22 2c0a 2020 2020 226d     "mom",.    "m
-00010610: 6f6e 6173 6822 2c0a 2020 2020 226d 6f6e  onash",.    "mon
-00010620: 6579 222c 0a20 2020 2022 6d6f 6e73 7465  ey",.    "monste
-00010630: 7222 2c0a 2020 2020 226d 6f70 6172 222c  r",.    "mopar",
-00010640: 0a20 2020 2022 6d6f 726d 6f6e 222c 0a20  .    "mormon",. 
-00010650: 2020 2022 6d6f 7274 6761 6765 222c 0a20     "mortgage",. 
-00010660: 2020 2022 6d6f 7363 6f77 222c 0a20 2020     "moscow",.   
-00010670: 2022 6d6f 746f 222c 0a20 2020 2022 6d6f   "moto",.    "mo
-00010680: 746f 7263 7963 6c65 7322 2c0a 2020 2020  torcycles",.    
-00010690: 226d 6f76 222c 0a20 2020 2022 6d6f 7669  "mov",.    "movi
-000106a0: 6522 2c0a 2020 2020 226d 6f76 6973 7461  e",.    "movista
-000106b0: 7222 2c0a 2020 2020 226d 7022 2c0a 2020  r",.    "mp",.  
-000106c0: 2020 226d 7122 2c0a 2020 2020 226d 7222    "mq",.    "mr"
-000106d0: 2c0a 2020 2020 226d 7322 2c0a 2020 2020  ,.    "ms",.    
-000106e0: 226d 7364 222c 0a20 2020 2022 6d74 222c  "msd",.    "mt",
-000106f0: 0a20 2020 2022 6d74 6e22 2c0a 2020 2020  .    "mtn",.    
-00010700: 226d 7472 222c 0a20 2020 2022 6d75 222c  "mtr",.    "mu",
-00010710: 0a20 2020 2022 6d75 7365 756d 222c 0a20  .    "museum",. 
-00010720: 2020 2022 6d75 7475 616c 222c 0a20 2020     "mutual",.   
-00010730: 2022 6d76 222c 0a20 2020 2022 6d77 222c   "mv",.    "mw",
-00010740: 0a20 2020 2022 6d78 222c 0a20 2020 2022  .    "mx",.    "
-00010750: 6d79 222c 0a20 2020 2022 6d7a 222c 0a20  my",.    "mz",. 
-00010760: 2020 2023 206e 0a20 2020 2022 6e61 222c     # n.    "na",
-00010770: 0a20 2020 2022 6e61 6222 2c0a 2020 2020  .    "nab",.    
-00010780: 226e 6164 6578 222c 0a20 2020 2022 6e61  "nadex",.    "na
-00010790: 676f 7961 222c 0a20 2020 2022 6e61 6d65  goya",.    "name
-000107a0: 222c 0a20 2020 2022 6e61 7469 6f6e 7769  ",.    "nationwi
-000107b0: 6465 222c 0a20 2020 2022 6e61 7475 7261  de",.    "natura
-000107c0: 222c 0a20 2020 2022 6e61 7679 222c 0a20  ",.    "navy",. 
-000107d0: 2020 2022 6e62 6122 2c0a 2020 2020 226e     "nba",.    "n
-000107e0: 6322 2c0a 2020 2020 226e 6522 2c0a 2020  c",.    "ne",.  
-000107f0: 2020 226e 6563 222c 0a20 2020 2022 6e65    "nec",.    "ne
-00010800: 7422 2c0a 2020 2020 226e 6574 6261 6e6b  t",.    "netbank
-00010810: 222c 0a20 2020 2022 6e65 7466 6c69 7822  ",.    "netflix"
-00010820: 2c0a 2020 2020 226e 6574 776f 726b 222c  ,.    "network",
-00010830: 0a20 2020 2022 6e65 7573 7461 7222 2c0a  .    "neustar",.
-00010840: 2020 2020 226e 6577 222c 0a20 2020 2022      "new",.    "
-00010850: 6e65 7768 6f6c 6c61 6e64 222c 0a20 2020  newholland",.   
-00010860: 2022 6e65 7773 222c 0a20 2020 2022 6e65   "news",.    "ne
-00010870: 7874 222c 0a20 2020 2022 6e65 7874 6469  xt",.    "nextdi
-00010880: 7265 6374 222c 0a20 2020 2022 6e65 7875  rect",.    "nexu
-00010890: 7322 2c0a 2020 2020 226e 6622 2c0a 2020  s",.    "nf",.  
-000108a0: 2020 226e 666c 222c 0a20 2020 2022 6e67    "nfl",.    "ng
-000108b0: 222c 0a20 2020 2022 6e67 6f22 2c0a 2020  ",.    "ngo",.  
-000108c0: 2020 226e 686b 222c 0a20 2020 2022 6e69    "nhk",.    "ni
-000108d0: 222c 0a20 2020 2022 6e69 636f 222c 0a20  ",.    "nico",. 
-000108e0: 2020 2022 6e69 6b65 222c 0a20 2020 2022     "nike",.    "
-000108f0: 6e69 6b6f 6e22 2c0a 2020 2020 226e 696e  nikon",.    "nin
-00010900: 6a61 222c 0a20 2020 2022 6e69 7373 616e  ja",.    "nissan
-00010910: 222c 0a20 2020 2022 6e69 7373 6179 222c  ",.    "nissay",
-00010920: 0a20 2020 2022 6e6c 222c 0a20 2020 2022  .    "nl",.    "
-00010930: 6e6f 222c 0a20 2020 2022 6e6f 6b69 6122  no",.    "nokia"
-00010940: 2c0a 2020 2020 226e 6f72 7468 7765 7374  ,.    "northwest
-00010950: 6572 6e6d 7574 7561 6c22 2c0a 2020 2020  ernmutual",.    
-00010960: 226e 6f72 746f 6e22 2c0a 2020 2020 226e  "norton",.    "n
-00010970: 6f77 222c 0a20 2020 2022 6e6f 7772 757a  ow",.    "nowruz
-00010980: 222c 0a20 2020 2022 6e6f 7774 7622 2c0a  ",.    "nowtv",.
-00010990: 2020 2020 226e 7022 2c0a 2020 2020 226e      "np",.    "n
-000109a0: 7222 2c0a 2020 2020 226e 7261 222c 0a20  r",.    "nra",. 
-000109b0: 2020 2022 6e72 7722 2c0a 2020 2020 226e     "nrw",.    "n
-000109c0: 7474 222c 0a20 2020 2022 6e75 222c 0a20  tt",.    "nu",. 
-000109d0: 2020 2022 6e79 6322 2c0a 2020 2020 226e     "nyc",.    "n
-000109e0: 7a22 2c0a 2020 2020 2320 6f0a 2020 2020  z",.    # o.    
-000109f0: 226f 6269 222c 0a20 2020 2022 6f62 7365  "obi",.    "obse
-00010a00: 7276 6572 222c 0a20 2020 2022 6f66 6622  rver",.    "off"
-00010a10: 2c0a 2020 2020 226f 6666 6963 6522 2c0a  ,.    "office",.
-00010a20: 2020 2020 226f 6b69 6e61 7761 222c 0a20      "okinawa",. 
-00010a30: 2020 2022 6f6c 6179 616e 222c 0a20 2020     "olayan",.   
-00010a40: 2022 6f6c 6179 616e 6772 6f75 7022 2c0a   "olayangroup",.
-00010a50: 2020 2020 226f 6c64 6e61 7679 222c 0a20      "oldnavy",. 
-00010a60: 2020 2022 6f6c 6c6f 222c 0a20 2020 2022     "ollo",.    "
-00010a70: 6f6d 222c 0a20 2020 2022 6f6d 6567 6122  om",.    "omega"
-00010a80: 2c0a 2020 2020 226f 6e65 222c 0a20 2020  ,.    "one",.   
-00010a90: 2022 6f6e 6722 2c0a 2020 2020 226f 6e6c   "ong",.    "onl
-00010aa0: 222c 0a20 2020 2022 6f6e 6c69 6e65 222c  ",.    "online",
-00010ab0: 0a20 2020 2022 6f6e 796f 7572 7369 6465  .    "onyourside
-00010ac0: 222c 0a20 2020 2022 6f6f 6f22 2c0a 2020  ",.    "ooo",.  
-00010ad0: 2020 226f 7065 6e22 2c0a 2020 2020 226f    "open",.    "o
-00010ae0: 7261 636c 6522 2c0a 2020 2020 226f 7261  racle",.    "ora
-00010af0: 6e67 6522 2c0a 2020 2020 226f 7267 222c  nge",.    "org",
-00010b00: 0a20 2020 2022 6f72 6761 6e69 6322 2c0a  .    "organic",.
-00010b10: 2020 2020 226f 7269 6769 6e73 222c 0a20      "origins",. 
-00010b20: 2020 2022 6f73 616b 6122 2c0a 2020 2020     "osaka",.    
-00010b30: 226f 7473 756b 6122 2c0a 2020 2020 226f  "otsuka",.    "o
-00010b40: 7474 222c 0a20 2020 2022 6f76 6822 2c0a  tt",.    "ovh",.
-00010b50: 2020 2020 2320 700a 2020 2020 2270 6122      # p.    "pa"
-00010b60: 2c0a 2020 2020 2270 6167 6522 2c0a 2020  ,.    "page",.  
-00010b70: 2020 2270 616e 6173 6f6e 6963 222c 0a20    "panasonic",. 
-00010b80: 2020 2022 7061 6e65 7261 6922 2c0a 2020     "panerai",.  
-00010b90: 2020 2270 6172 6973 222c 0a20 2020 2022    "paris",.    "
-00010ba0: 7061 7273 222c 0a20 2020 2022 7061 7274  pars",.    "part
-00010bb0: 6e65 7273 222c 0a20 2020 2022 7061 7274  ners",.    "part
-00010bc0: 7322 2c0a 2020 2020 2270 6172 7479 222c  s",.    "party",
-00010bd0: 0a20 2020 2022 7061 7373 6167 656e 7322  .    "passagens"
-00010be0: 2c0a 2020 2020 2270 6179 222c 0a20 2020  ,.    "pay",.   
-00010bf0: 2022 7063 6377 222c 0a20 2020 2022 7065   "pccw",.    "pe
-00010c00: 222c 0a20 2020 2022 7065 7422 2c0a 2020  ",.    "pet",.  
-00010c10: 2020 2270 6622 2c0a 2020 2020 2270 6669    "pf",.    "pfi
-00010c20: 7a65 7222 2c0a 2020 2020 2270 6722 2c0a  zer",.    "pg",.
-00010c30: 2020 2020 2270 6822 2c0a 2020 2020 2270      "ph",.    "p
-00010c40: 6861 726d 6163 7922 2c0a 2020 2020 2270  harmacy",.    "p
-00010c50: 6864 222c 0a20 2020 2022 7068 696c 6970  hd",.    "philip
-00010c60: 7322 2c0a 2020 2020 2270 686f 6e65 222c  s",.    "phone",
-00010c70: 0a20 2020 2022 7068 6f74 6f22 2c0a 2020  .    "photo",.  
-00010c80: 2020 2270 686f 746f 6772 6170 6879 222c    "photography",
-00010c90: 0a20 2020 2022 7068 6f74 6f73 222c 0a20  .    "photos",. 
-00010ca0: 2020 2022 7068 7973 696f 222c 0a20 2020     "physio",.   
-00010cb0: 2022 7069 6167 6574 222c 0a20 2020 2022   "piaget",.    "
-00010cc0: 7069 6373 222c 0a20 2020 2022 7069 6374  pics",.    "pict
-00010cd0: 6574 222c 0a20 2020 2022 7069 6374 7572  et",.    "pictur
-00010ce0: 6573 222c 0a20 2020 2022 7069 6422 2c0a  es",.    "pid",.
-00010cf0: 2020 2020 2270 696e 222c 0a20 2020 2022      "pin",.    "
-00010d00: 7069 6e67 222c 0a20 2020 2022 7069 6e6b  ping",.    "pink
-00010d10: 222c 0a20 2020 2022 7069 6f6e 6565 7222  ",.    "pioneer"
-00010d20: 2c0a 2020 2020 2270 697a 7a61 222c 0a20  ,.    "pizza",. 
-00010d30: 2020 2022 706b 222c 0a20 2020 2022 706c     "pk",.    "pl
-00010d40: 222c 0a20 2020 2022 706c 6163 6522 2c0a  ",.    "place",.
-00010d50: 2020 2020 2270 6c61 7922 2c0a 2020 2020      "play",.    
-00010d60: 2270 6c61 7973 7461 7469 6f6e 222c 0a20  "playstation",. 
-00010d70: 2020 2022 706c 756d 6269 6e67 222c 0a20     "plumbing",. 
-00010d80: 2020 2022 706c 7573 222c 0a20 2020 2022     "plus",.    "
-00010d90: 706d 222c 0a20 2020 2022 706e 222c 0a20  pm",.    "pn",. 
-00010da0: 2020 2022 706e 6322 2c0a 2020 2020 2270     "pnc",.    "p
-00010db0: 6f68 6c22 2c0a 2020 2020 2270 6f6b 6572  ohl",.    "poker
-00010dc0: 222c 0a20 2020 2022 706f 6c69 7469 6522  ",.    "politie"
-00010dd0: 2c0a 2020 2020 2270 6f72 6e22 2c0a 2020  ,.    "porn",.  
-00010de0: 2020 2270 6f73 7422 2c0a 2020 2020 2270    "post",.    "p
-00010df0: 7222 2c0a 2020 2020 2270 7261 6d65 7269  r",.    "prameri
-00010e00: 6361 222c 0a20 2020 2022 7072 6178 6922  ca",.    "praxi"
-00010e10: 2c0a 2020 2020 2270 7265 7373 222c 0a20  ,.    "press",. 
-00010e20: 2020 2022 7072 696d 6522 2c0a 2020 2020     "prime",.    
-00010e30: 2270 726f 222c 0a20 2020 2022 7072 6f64  "pro",.    "prod
-00010e40: 222c 0a20 2020 2022 7072 6f64 7563 7469  ",.    "producti
-00010e50: 6f6e 7322 2c0a 2020 2020 2270 726f 6622  ons",.    "prof"
-00010e60: 2c0a 2020 2020 2270 726f 6772 6573 7369  ,.    "progressi
-00010e70: 7665 222c 0a20 2020 2022 7072 6f6d 6f22  ve",.    "promo"
-00010e80: 2c0a 2020 2020 2270 726f 7065 7274 6965  ,.    "propertie
-00010e90: 7322 2c0a 2020 2020 2270 726f 7065 7274  s",.    "propert
-00010ea0: 7922 2c0a 2020 2020 2270 726f 7465 6374  y",.    "protect
-00010eb0: 696f 6e22 2c0a 2020 2020 2270 7275 222c  ion",.    "pru",
-00010ec0: 0a20 2020 2022 7072 7564 656e 7469 616c  .    "prudential
-00010ed0: 222c 0a20 2020 2022 7073 222c 0a20 2020  ",.    "ps",.   
-00010ee0: 2022 7074 222c 0a20 2020 2022 7075 6222   "pt",.    "pub"
-00010ef0: 2c0a 2020 2020 2270 7722 2c0a 2020 2020  ,.    "pw",.    
-00010f00: 2270 7763 222c 0a20 2020 2022 7079 222c  "pwc",.    "py",
-00010f10: 0a20 2020 2023 2071 0a20 2020 2022 7161  .    # q.    "qa
-00010f20: 222c 0a20 2020 2022 7170 6f6e 222c 0a20  ",.    "qpon",. 
-00010f30: 2020 2022 7175 6562 6563 222c 0a20 2020     "quebec",.   
-00010f40: 2022 7175 6573 7422 2c0a 2020 2020 2271   "quest",.    "q
-00010f50: 7663 222c 0a20 2020 2023 2072 0a20 2020  vc",.    # r.   
-00010f60: 2022 7261 6369 6e67 222c 0a20 2020 2022   "racing",.    "
-00010f70: 7261 6469 6f22 2c0a 2020 2020 2272 6169  radio",.    "rai
-00010f80: 6422 2c0a 2020 2020 2272 6522 2c0a 2020  d",.    "re",.  
-00010f90: 2020 2272 6561 6422 2c0a 2020 2020 2272    "read",.    "r
-00010fa0: 6561 6c65 7374 6174 6522 2c0a 2020 2020  ealestate",.    
-00010fb0: 2272 6561 6c74 6f72 222c 0a20 2020 2022  "realtor",.    "
-00010fc0: 7265 616c 7479 222c 0a20 2020 2022 7265  realty",.    "re
-00010fd0: 6369 7065 7322 2c0a 2020 2020 2272 6564  cipes",.    "red
-00010fe0: 222c 0a20 2020 2022 7265 6473 746f 6e65  ",.    "redstone
-00010ff0: 222c 0a20 2020 2022 7265 6475 6d62 7265  ",.    "redumbre
-00011000: 6c6c 6122 2c0a 2020 2020 2272 6568 6162  lla",.    "rehab
-00011010: 222c 0a20 2020 2022 7265 6973 6522 2c0a  ",.    "reise",.
-00011020: 2020 2020 2272 6569 7365 6e22 2c0a 2020      "reisen",.  
-00011030: 2020 2272 6569 7422 2c0a 2020 2020 2272    "reit",.    "r
-00011040: 656c 6961 6e63 6522 2c0a 2020 2020 2272  eliance",.    "r
-00011050: 656e 222c 0a20 2020 2022 7265 6e74 222c  en",.    "rent",
-00011060: 0a20 2020 2022 7265 6e74 616c 7322 2c0a  .    "rentals",.
-00011070: 2020 2020 2272 6570 6169 7222 2c0a 2020      "repair",.  
-00011080: 2020 2272 6570 6f72 7422 2c0a 2020 2020    "report",.    
-00011090: 2272 6570 7562 6c69 6361 6e22 2c0a 2020  "republican",.  
-000110a0: 2020 2272 6573 7422 2c0a 2020 2020 2272    "rest",.    "r
-000110b0: 6573 7461 7572 616e 7422 2c0a 2020 2020  estaurant",.    
-000110c0: 2272 6576 6965 7722 2c0a 2020 2020 2272  "review",.    "r
-000110d0: 6576 6965 7773 222c 0a20 2020 2022 7265  eviews",.    "re
-000110e0: 7872 6f74 6822 2c0a 2020 2020 2272 6963  xroth",.    "ric
-000110f0: 6822 2c0a 2020 2020 2272 6963 6861 7264  h",.    "richard
-00011100: 6c69 222c 0a20 2020 2022 7269 636f 6822  li",.    "ricoh"
-00011110: 2c0a 2020 2020 2272 6967 6874 6174 686f  ,.    "rightatho
-00011120: 6d65 222c 0a20 2020 2022 7269 6c22 2c0a  me",.    "ril",.
-00011130: 2020 2020 2272 696f 222c 0a20 2020 2022      "rio",.    "
-00011140: 7269 7022 2c0a 2020 2020 2272 6d69 7422  rip",.    "rmit"
-00011150: 2c0a 2020 2020 2272 6f22 2c0a 2020 2020  ,.    "ro",.    
-00011160: 2272 6f63 6865 7222 2c0a 2020 2020 2272  "rocher",.    "r
-00011170: 6f63 6b73 222c 0a20 2020 2022 726f 6465  ocks",.    "rode
-00011180: 6f22 2c0a 2020 2020 2272 6f67 6572 7322  o",.    "rogers"
-00011190: 2c0a 2020 2020 2272 6f6f 6d22 2c0a 2020  ,.    "room",.  
-000111a0: 2020 2272 7322 2c0a 2020 2020 2272 7376    "rs",.    "rsv
-000111b0: 7022 2c0a 2020 2020 2272 7522 2c0a 2020  p",.    "ru",.  
-000111c0: 2020 2272 7567 6279 222c 0a20 2020 2022    "rugby",.    "
-000111d0: 7275 6872 222c 0a20 2020 2022 7275 6e22  ruhr",.    "run"
-000111e0: 2c0a 2020 2020 2272 7722 2c0a 2020 2020  ,.    "rw",.    
-000111f0: 2272 7765 222c 0a20 2020 2022 7279 756b  "rwe",.    "ryuk
-00011200: 7975 222c 0a20 2020 2023 2073 0a20 2020  yu",.    # s.   
-00011210: 2022 7361 222c 0a20 2020 2022 7361 6172   "sa",.    "saar
-00011220: 6c61 6e64 222c 0a20 2020 2022 7361 6665  land",.    "safe
-00011230: 222c 0a20 2020 2022 7361 6665 7479 222c  ",.    "safety",
-00011240: 0a20 2020 2022 7361 6b75 7261 222c 0a20  .    "sakura",. 
-00011250: 2020 2022 7361 6c65 222c 0a20 2020 2022     "sale",.    "
-00011260: 7361 6c6f 6e22 2c0a 2020 2020 2273 616d  salon",.    "sam
-00011270: 7363 6c75 6222 2c0a 2020 2020 2273 616d  sclub",.    "sam
-00011280: 7375 6e67 222c 0a20 2020 2022 7361 6e64  sung",.    "sand
-00011290: 7669 6b22 2c0a 2020 2020 2273 616e 6476  vik",.    "sandv
-000112a0: 696b 636f 726f 6d61 6e74 222c 0a20 2020  ikcoromant",.   
-000112b0: 2022 7361 6e6f 6669 222c 0a20 2020 2022   "sanofi",.    "
-000112c0: 7361 7022 2c0a 2020 2020 2273 6170 6f22  sap",.    "sapo"
-000112d0: 2c0a 2020 2020 2273 6172 6c22 2c0a 2020  ,.    "sarl",.  
-000112e0: 2020 2273 6173 222c 0a20 2020 2022 7361    "sas",.    "sa
-000112f0: 7665 222c 0a20 2020 2022 7361 786f 222c  ve",.    "saxo",
-00011300: 0a20 2020 2022 7362 222c 0a20 2020 2022  .    "sb",.    "
-00011310: 7362 6922 2c0a 2020 2020 2273 6273 222c  sbi",.    "sbs",
-00011320: 0a20 2020 2022 7363 222c 0a20 2020 2022  .    "sc",.    "
-00011330: 7363 6122 2c0a 2020 2020 2273 6362 222c  sca",.    "scb",
-00011340: 0a20 2020 2022 7363 6861 6566 666c 6572  .    "schaeffler
-00011350: 222c 0a20 2020 2022 7363 686d 6964 7422  ",.    "schmidt"
-00011360: 2c0a 2020 2020 2273 6368 6f6c 6172 7368  ,.    "scholarsh
-00011370: 6970 7322 2c0a 2020 2020 2273 6368 6f6f  ips",.    "schoo
-00011380: 6c22 2c0a 2020 2020 2273 6368 756c 6522  l",.    "schule"
-00011390: 2c0a 2020 2020 2273 6368 7761 727a 222c  ,.    "schwarz",
-000113a0: 0a20 2020 2022 7363 6965 6e63 6522 2c0a  .    "science",.
-000113b0: 2020 2020 2273 636a 6f68 6e73 6f6e 222c      "scjohnson",
-000113c0: 0a20 2020 2022 7363 6f72 222c 0a20 2020  .    "scor",.   
-000113d0: 2022 7363 6f74 222c 0a20 2020 2022 7364   "scot",.    "sd
-000113e0: 222c 0a20 2020 2022 7365 222c 0a20 2020  ",.    "se",.   
-000113f0: 2022 7365 6172 6368 222c 0a20 2020 2022   "search",.    "
-00011400: 7365 6174 222c 0a20 2020 2022 7365 6375  seat",.    "secu
-00011410: 7265 222c 0a20 2020 2022 7365 6375 7269  re",.    "securi
-00011420: 7479 222c 0a20 2020 2022 7365 656b 222c  ty",.    "seek",
-00011430: 0a20 2020 2022 7365 6c65 6374 222c 0a20  .    "select",. 
-00011440: 2020 2022 7365 6e65 7222 2c0a 2020 2020     "sener",.    
-00011450: 2273 6572 7669 6365 7322 2c0a 2020 2020  "services",.    
-00011460: 2273 6573 222c 0a20 2020 2022 7365 7665  "ses",.    "seve
-00011470: 6e22 2c0a 2020 2020 2273 6577 222c 0a20  n",.    "sew",. 
-00011480: 2020 2022 7365 7822 2c0a 2020 2020 2273     "sex",.    "s
-00011490: 6578 7922 2c0a 2020 2020 2273 6672 222c  exy",.    "sfr",
-000114a0: 0a20 2020 2022 7367 222c 0a20 2020 2022  .    "sg",.    "
-000114b0: 7368 222c 0a20 2020 2022 7368 616e 6772  sh",.    "shangr
-000114c0: 696c 6122 2c0a 2020 2020 2273 6861 7270  ila",.    "sharp
-000114d0: 222c 0a20 2020 2022 7368 6177 222c 0a20  ",.    "shaw",. 
-000114e0: 2020 2022 7368 656c 6c22 2c0a 2020 2020     "shell",.    
-000114f0: 2273 6869 6122 2c0a 2020 2020 2273 6869  "shia",.    "shi
-00011500: 6b73 6861 222c 0a20 2020 2022 7368 6f65  ksha",.    "shoe
-00011510: 7322 2c0a 2020 2020 2273 686f 7022 2c0a  s",.    "shop",.
-00011520: 2020 2020 2273 686f 7070 696e 6722 2c0a      "shopping",.
-00011530: 2020 2020 2273 686f 756a 6922 2c0a 2020      "shouji",.  
-00011540: 2020 2273 686f 7722 2c0a 2020 2020 2273    "show",.    "s
-00011550: 686f 7774 696d 6522 2c0a 2020 2020 2273  howtime",.    "s
-00011560: 6872 6972 616d 222c 0a20 2020 2022 7369  hriram",.    "si
-00011570: 222c 0a20 2020 2022 7369 6c6b 222c 0a20  ",.    "silk",. 
-00011580: 2020 2022 7369 6e61 222c 0a20 2020 2022     "sina",.    "
-00011590: 7369 6e67 6c65 7322 2c0a 2020 2020 2273  singles",.    "s
-000115a0: 6974 6522 2c0a 2020 2020 2273 6a22 2c0a  ite",.    "sj",.
-000115b0: 2020 2020 2273 6b22 2c0a 2020 2020 2273      "sk",.    "s
-000115c0: 6b69 222c 0a20 2020 2022 736b 696e 222c  ki",.    "skin",
-000115d0: 0a20 2020 2022 736b 7922 2c0a 2020 2020  .    "sky",.    
-000115e0: 2273 6b79 7065 222c 0a20 2020 2022 736c  "skype",.    "sl
-000115f0: 222c 0a20 2020 2022 736c 696e 6722 2c0a  ",.    "sling",.
-00011600: 2020 2020 2273 6d22 2c0a 2020 2020 2273      "sm",.    "s
-00011610: 6d61 7274 222c 0a20 2020 2022 736d 696c  mart",.    "smil
-00011620: 6522 2c0a 2020 2020 2273 6e22 2c0a 2020  e",.    "sn",.  
-00011630: 2020 2273 6e63 6622 2c0a 2020 2020 2273    "sncf",.    "s
-00011640: 6f22 2c0a 2020 2020 2273 6f63 6365 7222  o",.    "soccer"
-00011650: 2c0a 2020 2020 2273 6f63 6961 6c22 2c0a  ,.    "social",.
-00011660: 2020 2020 2273 6f66 7462 616e 6b22 2c0a      "softbank",.
-00011670: 2020 2020 2273 6f66 7477 6172 6522 2c0a      "software",.
-00011680: 2020 2020 2273 6f68 7522 2c0a 2020 2020      "sohu",.    
-00011690: 2273 6f6c 6172 222c 0a20 2020 2022 736f  "solar",.    "so
-000116a0: 6c75 7469 6f6e 7322 2c0a 2020 2020 2273  lutions",.    "s
-000116b0: 6f6e 6722 2c0a 2020 2020 2273 6f6e 7922  ong",.    "sony"
-000116c0: 2c0a 2020 2020 2273 6f79 222c 0a20 2020  ,.    "soy",.   
-000116d0: 2022 7370 6163 6522 2c0a 2020 2020 2273   "space",.    "s
-000116e0: 7069 6567 656c 222c 0a20 2020 2022 7370  piegel",.    "sp
-000116f0: 6f74 222c 0a20 2020 2022 7370 7265 6164  ot",.    "spread
-00011700: 6265 7474 696e 6722 2c0a 2020 2020 2273  betting",.    "s
-00011710: 7222 2c0a 2020 2020 2273 726c 222c 0a20  r",.    "srl",. 
-00011720: 2020 2022 7372 7422 2c0a 2020 2020 2273     "srt",.    "s
-00011730: 7422 2c0a 2020 2020 2273 7461 6461 222c  t",.    "stada",
-00011740: 0a20 2020 2022 7374 6170 6c65 7322 2c0a  .    "staples",.
-00011750: 2020 2020 2273 7461 7222 2c0a 2020 2020      "star",.    
-00011760: 2273 7461 7268 7562 222c 0a20 2020 2022  "starhub",.    "
-00011770: 7374 6174 6562 616e 6b22 2c0a 2020 2020  statebank",.    
-00011780: 2273 7461 7465 6661 726d 222c 0a20 2020  "statefarm",.   
-00011790: 2022 7374 6174 6f69 6c22 2c0a 2020 2020   "statoil",.    
-000117a0: 2273 7463 222c 0a20 2020 2022 7374 6367  "stc",.    "stcg
-000117b0: 726f 7570 222c 0a20 2020 2022 7374 6f63  roup",.    "stoc
-000117c0: 6b68 6f6c 6d22 2c0a 2020 2020 2273 746f  kholm",.    "sto
-000117d0: 7261 6765 222c 0a20 2020 2022 7374 6f72  rage",.    "stor
-000117e0: 6522 2c0a 2020 2020 2273 7472 6561 6d22  e",.    "stream"
-000117f0: 2c0a 2020 2020 2273 7475 6469 6f22 2c0a  ,.    "studio",.
-00011800: 2020 2020 2273 7475 6479 222c 0a20 2020      "study",.   
-00011810: 2022 7374 796c 6522 2c0a 2020 2020 2273   "style",.    "s
-00011820: 7522 2c0a 2020 2020 2273 7563 6b73 222c  u",.    "sucks",
-00011830: 0a20 2020 2022 7375 7070 6c69 6573 222c  .    "supplies",
-00011840: 0a20 2020 2022 7375 7070 6c79 222c 0a20  .    "supply",. 
-00011850: 2020 2022 7375 7070 6f72 7422 2c0a 2020     "support",.  
-00011860: 2020 2273 7572 6622 2c0a 2020 2020 2273    "surf",.    "s
-00011870: 7572 6765 7279 222c 0a20 2020 2022 7375  urgery",.    "su
-00011880: 7a75 6b69 222c 0a20 2020 2022 7376 222c  zuki",.    "sv",
-00011890: 0a20 2020 2022 7377 6174 6368 222c 0a20  .    "swatch",. 
-000118a0: 2020 2022 7377 6966 7463 6f76 6572 222c     "swiftcover",
-000118b0: 0a20 2020 2022 7377 6973 7322 2c0a 2020  .    "swiss",.  
-000118c0: 2020 2273 7822 2c0a 2020 2020 2273 7922    "sx",.    "sy"
-000118d0: 2c0a 2020 2020 2273 7964 6e65 7922 2c0a  ,.    "sydney",.
-000118e0: 2020 2020 2273 796d 616e 7465 6322 2c0a      "symantec",.
-000118f0: 2020 2020 2273 7973 7465 6d73 222c 0a20      "systems",. 
-00011900: 2020 2022 737a 222c 0a20 2020 2023 2074     "sz",.    # t
-00011910: 0a20 2020 2022 7461 6222 2c0a 2020 2020  .    "tab",.    
-00011920: 2274 6169 7065 6922 2c0a 2020 2020 2274  "taipei",.    "t
-00011930: 616c 6b22 2c0a 2020 2020 2274 616f 6261  alk",.    "taoba
-00011940: 6f22 2c0a 2020 2020 2274 6172 6765 7422  o",.    "target"
-00011950: 2c0a 2020 2020 2274 6174 616d 6f74 6f72  ,.    "tatamotor
-00011960: 7322 2c0a 2020 2020 2274 6174 6172 222c  s",.    "tatar",
-00011970: 0a20 2020 2022 7461 7474 6f6f 222c 0a20  .    "tattoo",. 
-00011980: 2020 2022 7461 7822 2c0a 2020 2020 2274     "tax",.    "t
-00011990: 6178 6922 2c0a 2020 2020 2274 6322 2c0a  axi",.    "tc",.
-000119a0: 2020 2020 2274 6369 222c 0a20 2020 2022      "tci",.    "
-000119b0: 7464 222c 0a20 2020 2022 7464 6b22 2c0a  td",.    "tdk",.
-000119c0: 2020 2020 2274 6561 6d22 2c0a 2020 2020      "team",.    
-000119d0: 2274 6563 6822 2c0a 2020 2020 2274 6563  "tech",.    "tec
-000119e0: 686e 6f6c 6f67 7922 2c0a 2020 2020 2274  hnology",.    "t
-000119f0: 656c 222c 0a20 2020 2022 7465 6c65 6369  el",.    "teleci
-00011a00: 7479 222c 0a20 2020 2022 7465 6c65 666f  ty",.    "telefo
-00011a10: 6e69 6361 222c 0a20 2020 2022 7465 6d61  nica",.    "tema
-00011a20: 7365 6b22 2c0a 2020 2020 2274 656e 6e69  sek",.    "tenni
-00011a30: 7322 2c0a 2020 2020 2274 6576 6122 2c0a  s",.    "teva",.
-00011a40: 2020 2020 2274 6622 2c0a 2020 2020 2274      "tf",.    "t
-00011a50: 6722 2c0a 2020 2020 2274 6822 2c0a 2020  g",.    "th",.  
-00011a60: 2020 2274 6864 222c 0a20 2020 2022 7468    "thd",.    "th
-00011a70: 6561 7465 7222 2c0a 2020 2020 2274 6865  eater",.    "the
-00011a80: 6174 7265 222c 0a20 2020 2022 7469 6161  atre",.    "tiaa
-00011a90: 222c 0a20 2020 2022 7469 636b 6574 7322  ",.    "tickets"
-00011aa0: 2c0a 2020 2020 2274 6965 6e64 6122 2c0a  ,.    "tienda",.
-00011ab0: 2020 2020 2274 6966 6661 6e79 222c 0a20      "tiffany",. 
-00011ac0: 2020 2022 7469 7073 222c 0a20 2020 2022     "tips",.    "
-00011ad0: 7469 7265 7322 2c0a 2020 2020 2274 6972  tires",.    "tir
-00011ae0: 6f6c 222c 0a20 2020 2022 746a 222c 0a20  ol",.    "tj",. 
-00011af0: 2020 2022 746a 6d61 7878 222c 0a20 2020     "tjmaxx",.   
-00011b00: 2022 746a 7822 2c0a 2020 2020 2274 6b22   "tjx",.    "tk"
-00011b10: 2c0a 2020 2020 2274 6b6d 6178 7822 2c0a  ,.    "tkmaxx",.
-00011b20: 2020 2020 2274 6c22 2c0a 2020 2020 2274      "tl",.    "t
-00011b30: 6d22 2c0a 2020 2020 2274 6d61 6c6c 222c  m",.    "tmall",
-00011b40: 0a20 2020 2022 746e 222c 0a20 2020 2022  .    "tn",.    "
-00011b50: 746f 222c 0a20 2020 2022 746f 6461 7922  to",.    "today"
-00011b60: 2c0a 2020 2020 2274 6f6b 796f 222c 0a20  ,.    "tokyo",. 
-00011b70: 2020 2022 746f 6f6c 7322 2c0a 2020 2020     "tools",.    
-00011b80: 2274 6f70 222c 0a20 2020 2022 746f 7261  "top",.    "tora
-00011b90: 7922 2c0a 2020 2020 2274 6f73 6869 6261  y",.    "toshiba
-00011ba0: 222c 0a20 2020 2022 746f 7461 6c22 2c0a  ",.    "total",.
-00011bb0: 2020 2020 2274 6f75 7273 222c 0a20 2020      "tours",.   
-00011bc0: 2022 746f 776e 222c 0a20 2020 2022 746f   "town",.    "to
-00011bd0: 796f 7461 222c 0a20 2020 2022 746f 7973  yota",.    "toys
-00011be0: 222c 0a20 2020 2022 7472 222c 0a20 2020  ",.    "tr",.   
-00011bf0: 2022 7472 6164 6522 2c0a 2020 2020 2274   "trade",.    "t
-00011c00: 7261 6469 6e67 222c 0a20 2020 2022 7472  rading",.    "tr
-00011c10: 6169 6e69 6e67 222c 0a20 2020 2022 7472  aining",.    "tr
-00011c20: 6176 656c 222c 0a20 2020 2022 7472 6176  avel",.    "trav
-00011c30: 656c 6368 616e 6e65 6c22 2c0a 2020 2020  elchannel",.    
-00011c40: 2274 7261 7665 6c65 7273 222c 0a20 2020  "travelers",.   
-00011c50: 2022 7472 6176 656c 6572 7369 6e73 7572   "travelersinsur
-00011c60: 616e 6365 222c 0a20 2020 2022 7472 7573  ance",.    "trus
-00011c70: 7422 2c0a 2020 2020 2274 7276 222c 0a20  t",.    "trv",. 
-00011c80: 2020 2022 7474 222c 0a20 2020 2022 7475     "tt",.    "tu
-00011c90: 6265 222c 0a20 2020 2022 7475 6922 2c0a  be",.    "tui",.
-00011ca0: 2020 2020 2274 756e 6573 222c 0a20 2020      "tunes",.   
-00011cb0: 2022 7475 7368 7522 2c0a 2020 2020 2274   "tushu",.    "t
-00011cc0: 7622 2c0a 2020 2020 2274 7673 222c 0a20  v",.    "tvs",. 
-00011cd0: 2020 2022 7477 222c 0a20 2020 2022 747a     "tw",.    "tz
-00011ce0: 222c 0a20 2020 2023 2075 0a20 2020 2022  ",.    # u.    "
-00011cf0: 7561 222c 0a20 2020 2022 7562 616e 6b22  ua",.    "ubank"
-00011d00: 2c0a 2020 2020 2275 6273 222c 0a20 2020  ,.    "ubs",.   
-00011d10: 2022 7563 6f6e 6e65 6374 222c 0a20 2020   "uconnect",.   
-00011d20: 2022 7567 222c 0a20 2020 2022 756b 222c   "ug",.    "uk",
-00011d30: 0a20 2020 2022 756e 6963 6f6d 222c 0a20  .    "unicom",. 
-00011d40: 2020 2022 756e 6976 6572 7369 7479 222c     "university",
-00011d50: 0a20 2020 2022 756e 6f22 2c0a 2020 2020  .    "uno",.    
-00011d60: 2275 6f6c 222c 0a20 2020 2022 7570 7322  "uol",.    "ups"
-00011d70: 2c0a 2020 2020 2275 7322 2c0a 2020 2020  ,.    "us",.    
-00011d80: 2275 7922 2c0a 2020 2020 2275 7a22 2c0a  "uy",.    "uz",.
-00011d90: 2020 2020 2320 760a 2020 2020 2276 6122      # v.    "va"
-00011da0: 2c0a 2020 2020 2276 6163 6174 696f 6e73  ,.    "vacations
-00011db0: 222c 0a20 2020 2022 7661 6e61 222c 0a20  ",.    "vana",. 
-00011dc0: 2020 2022 7661 6e67 7561 7264 222c 0a20     "vanguard",. 
-00011dd0: 2020 2022 7663 222c 0a20 2020 2022 7665     "vc",.    "ve
-00011de0: 222c 0a20 2020 2022 7665 6761 7322 2c0a  ",.    "vegas",.
-00011df0: 2020 2020 2276 656e 7475 7265 7322 2c0a      "ventures",.
-00011e00: 2020 2020 2276 6572 6973 6967 6e22 2c0a      "verisign",.
-00011e10: 2020 2020 2276 6572 7369 6368 6572 756e      "versicherun
-00011e20: 6722 2c0a 2020 2020 2276 6574 222c 0a20  g",.    "vet",. 
-00011e30: 2020 2022 7667 222c 0a20 2020 2022 7669     "vg",.    "vi
-00011e40: 222c 0a20 2020 2022 7669 616a 6573 222c  ",.    "viajes",
-00011e50: 0a20 2020 2022 7669 6465 6f22 2c0a 2020  .    "video",.  
-00011e60: 2020 2276 6967 222c 0a20 2020 2022 7669    "vig",.    "vi
-00011e70: 6b69 6e67 222c 0a20 2020 2022 7669 6c6c  king",.    "vill
-00011e80: 6173 222c 0a20 2020 2022 7669 6e22 2c0a  as",.    "vin",.
-00011e90: 2020 2020 2276 6970 222c 0a20 2020 2022      "vip",.    "
-00011ea0: 7669 7267 696e 222c 0a20 2020 2022 7669  virgin",.    "vi
-00011eb0: 7361 222c 0a20 2020 2022 7669 7369 6f6e  sa",.    "vision
-00011ec0: 222c 0a20 2020 2022 7669 7374 6122 2c0a  ",.    "vista",.
-00011ed0: 2020 2020 2276 6973 7461 7072 696e 7422      "vistaprint"
-00011ee0: 2c0a 2020 2020 2276 6976 6122 2c0a 2020  ,.    "viva",.  
-00011ef0: 2020 2276 6976 6f22 2c0a 2020 2020 2276    "vivo",.    "v
-00011f00: 6c61 616e 6465 7265 6e22 2c0a 2020 2020  laanderen",.    
-00011f10: 2276 6e22 2c0a 2020 2020 2276 6f64 6b61  "vn",.    "vodka
-00011f20: 222c 0a20 2020 2022 766f 6c6b 7377 6167  ",.    "volkswag
-00011f30: 656e 222c 0a20 2020 2022 766f 6c76 6f22  en",.    "volvo"
-00011f40: 2c0a 2020 2020 2276 6f74 6522 2c0a 2020  ,.    "vote",.  
-00011f50: 2020 2276 6f74 696e 6722 2c0a 2020 2020    "voting",.    
-00011f60: 2276 6f74 6f22 2c0a 2020 2020 2276 6f79  "voto",.    "voy
-00011f70: 6167 6522 2c0a 2020 2020 2276 7522 2c0a  age",.    "vu",.
-00011f80: 2020 2020 2276 7565 6c6f 7322 2c0a 2020      "vuelos",.  
-00011f90: 2020 2320 770a 2020 2020 2277 616c 6573    # w.    "wales
-00011fa0: 222c 0a20 2020 2022 7761 6c6d 6172 7422  ",.    "walmart"
-00011fb0: 2c0a 2020 2020 2277 616c 7465 7222 2c0a  ,.    "walter",.
-00011fc0: 2020 2020 2277 616e 6722 2c0a 2020 2020      "wang",.    
-00011fd0: 2277 616e 6767 6f75 222c 0a20 2020 2022  "wanggou",.    "
-00011fe0: 7761 726d 616e 222c 0a20 2020 2022 7761  warman",.    "wa
-00011ff0: 7463 6822 2c0a 2020 2020 2277 6174 6368  tch",.    "watch
-00012000: 6573 222c 0a20 2020 2022 7765 6174 6865  es",.    "weathe
-00012010: 7222 2c0a 2020 2020 2277 6561 7468 6572  r",.    "weather
-00012020: 6368 616e 6e65 6c22 2c0a 2020 2020 2277  channel",.    "w
-00012030: 6562 6361 6d22 2c0a 2020 2020 2277 6562  ebcam",.    "web
-00012040: 6572 222c 0a20 2020 2022 7765 6273 6974  er",.    "websit
-00012050: 6522 2c0a 2020 2020 2277 6564 222c 0a20  e",.    "wed",. 
-00012060: 2020 2022 7765 6464 696e 6722 2c0a 2020     "wedding",.  
-00012070: 2020 2277 6569 626f 222c 0a20 2020 2022    "weibo",.    "
-00012080: 7765 6972 222c 0a20 2020 2022 7766 222c  weir",.    "wf",
-00012090: 0a20 2020 2022 7768 6f73 7768 6f22 2c0a  .    "whoswho",.
-000120a0: 2020 2020 2277 6965 6e22 2c0a 2020 2020      "wien",.    
-000120b0: 2277 696b 6922 2c0a 2020 2020 2277 696c  "wiki",.    "wil
-000120c0: 6c69 616d 6869 6c6c 222c 0a20 2020 2022  liamhill",.    "
-000120d0: 7769 6e22 2c0a 2020 2020 2277 696e 646f  win",.    "windo
-000120e0: 7773 222c 0a20 2020 2022 7769 6e65 222c  ws",.    "wine",
-000120f0: 0a20 2020 2022 7769 6e6e 6572 7322 2c0a  .    "winners",.
-00012100: 2020 2020 2277 6d65 222c 0a20 2020 2022      "wme",.    "
-00012110: 776f 6c74 6572 736b 6c75 7765 7222 2c0a  wolterskluwer",.
-00012120: 2020 2020 2277 6f6f 6473 6964 6522 2c0a      "woodside",.
-00012130: 2020 2020 2277 6f72 6b22 2c0a 2020 2020      "work",.    
-00012140: 2277 6f72 6b73 222c 0a20 2020 2022 776f  "works",.    "wo
-00012150: 726c 6422 2c0a 2020 2020 2277 6f77 222c  rld",.    "wow",
-00012160: 0a20 2020 2022 7773 222c 0a20 2020 2022  .    "ws",.    "
-00012170: 7774 6322 2c0a 2020 2020 2277 7466 222c  wtc",.    "wtf",
-00012180: 0a20 2020 2023 2078 0a20 2020 2022 7862  .    # x.    "xb
-00012190: 6f78 222c 0a20 2020 2022 7865 726f 7822  ox",.    "xerox"
-000121a0: 2c0a 2020 2020 2278 6669 6e69 7479 222c  ,.    "xfinity",
-000121b0: 0a20 2020 2022 7869 6875 616e 222c 0a20  .    "xihuan",. 
-000121c0: 2020 2022 7869 6e22 2c0a 2020 2020 2278     "xin",.    "x
-000121d0: 6e2d 2d31 3162 3463 3364 222c 0a20 2020  n--11b4c3d",.   
-000121e0: 2022 786e 2d2d 3163 6b32 6531 6222 2c0a   "xn--1ck2e1b",.
-000121f0: 2020 2020 2278 6e2d 2d31 7171 7732 3361      "xn--1qqw23a
-00012200: 222c 0a20 2020 2022 786e 2d2d 3273 6372  ",.    "xn--2scr
-00012210: 6a39 6322 2c0a 2020 2020 2278 6e2d 2d33  j9c",.    "xn--3
-00012220: 3072 7237 7922 2c0a 2020 2020 2278 6e2d  0rr7y",.    "xn-
-00012230: 2d33 6273 7430 306d 222c 0a20 2020 2022  -3bst00m",.    "
-00012240: 786e 2d2d 3364 7334 3433 6722 2c0a 2020  xn--3ds443g",.  
-00012250: 2020 2278 6e2d 2d33 6530 6237 3037 6522    "xn--3e0b707e"
-00012260: 2c0a 2020 2020 2278 6e2d 2d33 6863 726a  ,.    "xn--3hcrj
-00012270: 3963 222c 0a20 2020 2022 786e 2d2d 336f  9c",.    "xn--3o
-00012280: 7131 3876 6c38 706e 3336 6122 2c0a 2020  q18vl8pn36a",.  
-00012290: 2020 2278 6e2d 2d33 7078 7538 6b22 2c0a    "xn--3pxu8k",.
-000122a0: 2020 2020 2278 6e2d 2d34 3263 3264 3961      "xn--42c2d9a
-000122b0: 222c 0a20 2020 2022 786e 2d2d 3435 6272  ",.    "xn--45br
-000122c0: 3563 796c 222c 0a20 2020 2022 786e 2d2d  5cyl",.    "xn--
-000122d0: 3435 6272 6a39 6322 2c0a 2020 2020 2278  45brj9c",.    "x
-000122e0: 6e2d 2d34 3571 3131 6322 2c0a 2020 2020  n--45q11c",.    
-000122f0: 2278 6e2d 2d34 6762 7269 6d22 2c0a 2020  "xn--4gbrim",.  
-00012300: 2020 2278 6e2d 2d35 3462 3766 7461 3063    "xn--54b7fta0c
-00012310: 6322 2c0a 2020 2020 2278 6e2d 2d35 3571  c",.    "xn--55q
-00012320: 7734 3267 222c 0a20 2020 2022 786e 2d2d  w42g",.    "xn--
-00012330: 3535 7178 3564 222c 0a20 2020 2022 786e  55qx5d",.    "xn
-00012340: 2d2d 3573 7533 346a 3933 3662 6773 6722  --5su34j936bgsg"
-00012350: 2c0a 2020 2020 2278 6e2d 2d35 747a 6d35  ,.    "xn--5tzm5
-00012360: 6722 2c0a 2020 2020 2278 6e2d 2d36 6672  g",.    "xn--6fr
-00012370: 7a38 3267 222c 0a20 2020 2022 786e 2d2d  z82g",.    "xn--
-00012380: 3671 7139 3836 6233 786c 222c 0a20 2020  6qq986b3xl",.   
-00012390: 2022 786e 2d2d 3830 6164 7868 6b73 222c   "xn--80adxhks",
-000123a0: 0a20 2020 2022 786e 2d2d 3830 616f 3231  .    "xn--80ao21
-000123b0: 6122 2c0a 2020 2020 2278 6e2d 2d38 3061  a",.    "xn--80a
-000123c0: 7165 6364 7231 6122 2c0a 2020 2020 2278  qecdr1a",.    "x
-000123d0: 6e2d 2d38 3061 7365 6864 6222 2c0a 2020  n--80asehdb",.  
-000123e0: 2020 2278 6e2d 2d38 3061 7377 6722 2c0a    "xn--80aswg",.
-000123f0: 2020 2020 2278 6e2d 2d38 7930 6130 3633      "xn--8y0a063
-00012400: 6122 2c0a 2020 2020 2278 6e2d 2d39 3061  a",.    "xn--90a
-00012410: 3361 6322 2c0a 2020 2020 2278 6e2d 2d39  3ac",.    "xn--9
-00012420: 3061 6522 2c0a 2020 2020 2278 6e2d 2d39  0ae",.    "xn--9
-00012430: 3061 6973 222c 0a20 2020 2022 786e 2d2d  0ais",.    "xn--
-00012440: 3964 6271 3261 222c 0a20 2020 2022 786e  9dbq2a",.    "xn
-00012450: 2d2d 3965 7435 3275 222c 0a20 2020 2022  --9et52u",.    "
-00012460: 786e 2d2d 396b 7274 3030 6122 2c0a 2020  xn--9krt00a",.  
-00012470: 2020 2278 6e2d 2d62 3477 3630 3566 6572    "xn--b4w605fer
-00012480: 6422 2c0a 2020 2020 2278 6e2d 2d62 636b  d",.    "xn--bck
-00012490: 3162 3961 3564 7265 3463 222c 0a20 2020  1b9a5dre4c",.   
-000124a0: 2022 786e 2d2d 6331 6176 6722 2c0a 2020   "xn--c1avg",.  
-000124b0: 2020 2278 6e2d 2d63 3262 7237 6722 2c0a    "xn--c2br7g",.
-000124c0: 2020 2020 2278 6e2d 2d63 636b 3262 3362      "xn--cck2b3b
-000124d0: 222c 0a20 2020 2022 786e 2d2d 6367 3462  ",.    "xn--cg4b
-000124e0: 6b69 222c 0a20 2020 2022 786e 2d2d 636c  ki",.    "xn--cl
-000124f0: 6368 6330 6561 3062 3267 3261 3967 6364  chc0ea0b2g2a9gcd
-00012500: 222c 0a20 2020 2022 786e 2d2d 637a 7236  ",.    "xn--czr6
-00012510: 3934 6222 2c0a 2020 2020 2278 6e2d 2d63  94b",.    "xn--c
-00012520: 7a72 7330 7422 2c0a 2020 2020 2278 6e2d  zrs0t",.    "xn-
-00012530: 2d63 7a72 7532 6422 2c0a 2020 2020 2278  -czru2d",.    "x
-00012540: 6e2d 2d64 3161 636a 3362 222c 0a20 2020  n--d1acj3b",.   
-00012550: 2022 786e 2d2d 6431 616c 6622 2c0a 2020   "xn--d1alf",.  
-00012560: 2020 2278 6e2d 2d65 3161 3463 222c 0a20    "xn--e1a4c",. 
-00012570: 2020 2022 786e 2d2d 6563 6b76 6474 6339     "xn--eckvdtc9
-00012580: 6422 2c0a 2020 2020 2278 6e2d 2d65 6676  d",.    "xn--efv
-00012590: 7938 3868 222c 0a20 2020 2022 786e 2d2d  y88h",.    "xn--
-000125a0: 6573 7476 3735 6722 2c0a 2020 2020 2278  estv75g",.    "x
-000125b0: 6e2d 2d66 6374 3432 396b 222c 0a20 2020  n--fct429k",.   
-000125c0: 2022 786e 2d2d 6668 6265 6922 2c0a 2020   "xn--fhbei",.  
-000125d0: 2020 2278 6e2d 2d66 6971 3232 3863 3568    "xn--fiq228c5h
-000125e0: 7322 2c0a 2020 2020 2278 6e2d 2d66 6971  s",.    "xn--fiq
-000125f0: 3634 6222 2c0a 2020 2020 2278 6e2d 2d66  64b",.    "xn--f
-00012600: 6971 7338 7322 2c0a 2020 2020 2278 6e2d  iqs8s",.    "xn-
-00012610: 2d66 6971 7a39 7322 2c0a 2020 2020 2278  -fiqz9s",.    "x
-00012620: 6e2d 2d66 6a71 3732 3061 222c 0a20 2020  n--fjq720a",.   
-00012630: 2022 786e 2d2d 666c 7733 3531 6522 2c0a   "xn--flw351e",.
-00012640: 2020 2020 2278 6e2d 2d66 7063 726a 3963      "xn--fpcrj9c
-00012650: 3364 222c 0a20 2020 2022 786e 2d2d 667a  3d",.    "xn--fz
-00012660: 6332 6339 6532 6322 2c0a 2020 2020 2278  c2c9e2c",.    "x
-00012670: 6e2d 2d66 7a79 7338 6436 3975 7667 6d22  n--fzys8d69uvgm"
-00012680: 2c0a 2020 2020 2278 6e2d 2d67 3278 7834  ,.    "xn--g2xx4
-00012690: 3863 222c 0a20 2020 2022 786e 2d2d 6763  8c",.    "xn--gc
-000126a0: 6b72 3366 3066 222c 0a20 2020 2022 786e  kr3f0f",.    "xn
-000126b0: 2d2d 6765 6372 6a39 6322 2c0a 2020 2020  --gecrj9c",.    
-000126c0: 2278 6e2d 2d67 6b33 6174 3165 222c 0a20  "xn--gk3at1e",. 
-000126d0: 2020 2022 786e 2d2d 6832 6272 6567 3365     "xn--h2breg3e
-000126e0: 7665 222c 0a20 2020 2022 786e 2d2d 6832  ve",.    "xn--h2
-000126f0: 6272 6a39 6322 2c0a 2020 2020 2278 6e2d  brj9c",.    "xn-
-00012700: 2d68 3262 726a 3963 3863 222c 0a20 2020  -h2brj9c8c",.   
-00012710: 2022 786e 2d2d 6878 7438 3134 6522 2c0a   "xn--hxt814e",.
-00012720: 2020 2020 2278 6e2d 2d69 3162 3662 3161      "xn--i1b6b1a
-00012730: 3661 3265 222c 0a20 2020 2022 786e 2d2d  6a2e",.    "xn--
-00012740: 696d 7235 3133 6e22 2c0a 2020 2020 2278  imr513n",.    "x
-00012750: 6e2d 2d69 6f30 6137 6922 2c0a 2020 2020  n--io0a7i",.    
-00012760: 2278 6e2d 2d6a 3161 6566 222c 0a20 2020  "xn--j1aef",.   
-00012770: 2022 786e 2d2d 6a31 616d 6822 2c0a 2020   "xn--j1amh",.  
-00012780: 2020 2278 6e2d 2d6a 3677 3139 3367 222c    "xn--j6w193g",
-00012790: 0a20 2020 2022 786e 2d2d 6a6c 7136 3175  .    "xn--jlq61u
-000127a0: 3977 3762 222c 0a20 2020 2022 786e 2d2d  9w7b",.    "xn--
-000127b0: 6a76 7231 3839 6d22 2c0a 2020 2020 2278  jvr189m",.    "x
-000127c0: 6e2d 2d6b 6372 7837 3764 3178 3461 222c  n--kcrx77d1x4a",
-000127d0: 0a20 2020 2022 786e 2d2d 6b70 7277 3133  .    "xn--kprw13
-000127e0: 6422 2c0a 2020 2020 2278 6e2d 2d6b 7072  d",.    "xn--kpr
-000127f0: 7935 3764 222c 0a20 2020 2022 786e 2d2d  y57d",.    "xn--
-00012800: 6b70 7537 3136 6622 2c0a 2020 2020 2278  kpu716f",.    "x
-00012810: 6e2d 2d6b 7075 7433 6922 2c0a 2020 2020  n--kput3i",.    
-00012820: 2278 6e2d 2d6c 3161 6363 222c 0a20 2020  "xn--l1acc",.   
-00012830: 2022 786e 2d2d 6c67 6262 6174 3161 6438   "xn--lgbbat1ad8
-00012840: 6a22 2c0a 2020 2020 2278 6e2d 2d6d 6762  j",.    "xn--mgb
-00012850: 3961 7762 6622 2c0a 2020 2020 2278 6e2d  9awbf",.    "xn-
-00012860: 2d6d 6762 6133 6133 656a 7422 2c0a 2020  -mgba3a3ejt",.  
-00012870: 2020 2278 6e2d 2d6d 6762 6133 6134 6631    "xn--mgba3a4f1
-00012880: 3661 222c 0a20 2020 2022 786e 2d2d 6d67  6a",.    "xn--mg
-00012890: 6261 3763 3062 626e 3061 222c 0a20 2020  ba7c0bbn0a",.   
-000128a0: 2022 786e 2d2d 6d67 6261 616b 6337 6476   "xn--mgbaakc7dv
-000128b0: 6622 2c0a 2020 2020 2278 6e2d 2d6d 6762  f",.    "xn--mgb
-000128c0: 6161 6d37 6138 6822 2c0a 2020 2020 2278  aam7a8h",.    "x
-000128d0: 6e2d 2d6d 6762 6162 3262 6422 2c0a 2020  n--mgbab2bd",.  
-000128e0: 2020 2278 6e2d 2d6d 6762 6169 3961 7a67    "xn--mgbai9azg
-000128f0: 7170 366a 222c 0a20 2020 2022 786e 2d2d  qp6j",.    "xn--
-00012900: 6d67 6261 7968 3767 7061 222c 0a20 2020  mgbayh7gpa",.   
-00012910: 2022 786e 2d2d 6d67 6262 3966 6270 6f62   "xn--mgbb9fbpob
-00012920: 222c 0a20 2020 2022 786e 2d2d 6d67 6262  ",.    "xn--mgbb
-00012930: 6831 6122 2c0a 2020 2020 2278 6e2d 2d6d  h1a",.    "xn--m
-00012940: 6762 6268 3161 3731 6522 2c0a 2020 2020  gbbh1a71e",.    
-00012950: 2278 6e2d 2d6d 6762 6330 6139 617a 6367  "xn--mgbc0a9azcg
-00012960: 222c 0a20 2020 2022 786e 2d2d 6d67 6263  ",.    "xn--mgbc
-00012970: 6137 647a 646f 222c 0a20 2020 2022 786e  a7dzdo",.    "xn
-00012980: 2d2d 6d67 6265 7270 3461 3564 3461 7222  --mgberp4a5d4ar"
-00012990: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6775  ,.    "xn--mgbgu
-000129a0: 3832 6122 2c0a 2020 2020 2278 6e2d 2d6d  82a",.    "xn--m
-000129b0: 6762 6934 6563 6578 7022 2c0a 2020 2020  gbi4ecexp",.    
-000129c0: 2278 6e2d 2d6d 6762 706c 3266 6822 2c0a  "xn--mgbpl2fh",.
-000129d0: 2020 2020 2278 6e2d 2d6d 6762 7433 6468      "xn--mgbt3dh
-000129e0: 6422 2c0a 2020 2020 2278 6e2d 2d6d 6762  d",.    "xn--mgb
-000129f0: 7478 3262 222c 0a20 2020 2022 786e 2d2d  tx2b",.    "xn--
-00012a00: 6d67 6278 3463 6430 6162 222c 0a20 2020  mgbx4cd0ab",.   
-00012a10: 2022 786e 2d2d 6d69 7838 3931 6622 2c0a   "xn--mix891f",.
-00012a20: 2020 2020 2278 6e2d 2d6d 6b31 6275 3434      "xn--mk1bu44
-00012a30: 6322 2c0a 2020 2020 2278 6e2d 2d6d 7874  c",.    "xn--mxt
-00012a40: 7131 6d22 2c0a 2020 2020 2278 6e2d 2d6e  q1m",.    "xn--n
-00012a50: 6762 6335 617a 6422 2c0a 2020 2020 2278  gbc5azd",.    "x
-00012a60: 6e2d 2d6e 6762 6539 6530 6122 2c0a 2020  n--ngbe9e0a",.  
-00012a70: 2020 2278 6e2d 2d6e 6762 7278 222c 0a20    "xn--ngbrx",. 
-00012a80: 2020 2022 786e 2d2d 6e6f 6465 222c 0a20     "xn--node",. 
-00012a90: 2020 2022 786e 2d2d 6e71 7637 6622 2c0a     "xn--nqv7f",.
-00012aa0: 2020 2020 2278 6e2d 2d6e 7176 3766 7330      "xn--nqv7fs0
-00012ab0: 3065 6d61 222c 0a20 2020 2022 786e 2d2d  0ema",.    "xn--
-00012ac0: 6e79 7179 3236 6122 2c0a 2020 2020 2278  nyqy26a",.    "x
-00012ad0: 6e2d 2d6f 3363 7734 6822 2c0a 2020 2020  n--o3cw4h",.    
-00012ae0: 2278 6e2d 2d6f 6762 7066 3866 6c22 2c0a  "xn--ogbpf8fl",.
-00012af0: 2020 2020 2278 6e2d 2d70 3161 6366 222c      "xn--p1acf",
-00012b00: 0a20 2020 2022 786e 2d2d 7031 6169 222c  .    "xn--p1ai",
-00012b10: 0a20 2020 2022 786e 2d2d 7062 7439 3737  .    "xn--pbt977
-00012b20: 6322 2c0a 2020 2020 2278 6e2d 2d70 6762  c",.    "xn--pgb
-00012b30: 7330 6468 222c 0a20 2020 2022 786e 2d2d  s0dh",.    "xn--
-00012b40: 7073 7379 3275 222c 0a20 2020 2022 786e  pssy2u",.    "xn
-00012b50: 2d2d 7139 6a79 6234 6322 2c0a 2020 2020  --q9jyb4c",.    
-00012b60: 2278 6e2d 2d71 636b 6131 706d 6322 2c0a  "xn--qcka1pmc",.
-00012b70: 2020 2020 2278 6e2d 2d71 7861 6d22 2c0a      "xn--qxam",.
-00012b80: 2020 2020 2278 6e2d 2d72 6871 7639 3667      "xn--rhqv96g
-00012b90: 222c 0a20 2020 2022 786e 2d2d 726f 7675  ",.    "xn--rovu
-00012ba0: 3838 6222 2c0a 2020 2020 2278 6e2d 2d72  88b",.    "xn--r
-00012bb0: 7663 3165 3061 6d33 6522 2c0a 2020 2020  vc1e0am3e",.    
-00012bc0: 2278 6e2d 2d73 3962 726a 3963 222c 0a20  "xn--s9brj9c",. 
-00012bd0: 2020 2022 786e 2d2d 7365 7335 3534 6722     "xn--ses554g"
-00012be0: 2c0a 2020 2020 2278 6e2d 2d74 3630 6235  ,.    "xn--t60b5
-00012bf0: 3661 222c 0a20 2020 2022 786e 2d2d 7463  6a",.    "xn--tc
-00012c00: 6b77 6522 2c0a 2020 2020 2278 6e2d 2d74  kwe",.    "xn--t
-00012c10: 6971 3439 7871 796a 222c 0a20 2020 2022  iq49xqyj",.    "
-00012c20: 786e 2d2d 756e 7570 3479 222c 0a20 2020  xn--unup4y",.   
-00012c30: 2022 786e 2d2d 7665 726d 6765 6e73 6265   "xn--vermgensbe
-00012c40: 7261 7465 722d 6374 6222 2c0a 2020 2020  rater-ctb",.    
-00012c50: 2278 6e2d 2d76 6572 6d67 656e 7362 6572  "xn--vermgensber
-00012c60: 6174 756e 672d 7077 6222 2c0a 2020 2020  atung-pwb",.    
-00012c70: 2278 6e2d 2d76 6871 7576 222c 0a20 2020  "xn--vhquv",.   
-00012c80: 2022 786e 2d2d 7675 7138 3631 6222 2c0a   "xn--vuq861b",.
-00012c90: 2020 2020 2278 6e2d 2d77 3472 3835 656c      "xn--w4r85el
-00012ca0: 3866 6875 3564 6e72 6122 2c0a 2020 2020  8fhu5dnra",.    
-00012cb0: 2278 6e2d 2d77 3472 7334 306c 222c 0a20  "xn--w4rs40l",. 
-00012cc0: 2020 2022 786e 2d2d 7767 6268 3163 222c     "xn--wgbh1c",
-00012cd0: 0a20 2020 2022 786e 2d2d 7767 626c 3661  .    "xn--wgbl6a
-00012ce0: 222c 0a20 2020 2022 786e 2d2d 7868 7135  ",.    "xn--xhq5
-00012cf0: 3231 6222 2c0a 2020 2020 2278 6e2d 2d78  21b",.    "xn--x
-00012d00: 6b63 3261 6c33 6879 6532 6122 2c0a 2020  kc2al3hye2a",.  
-00012d10: 2020 2278 6e2d 2d78 6b63 3264 6c33 6135    "xn--xkc2dl3a5
-00012d20: 6565 3068 222c 0a20 2020 2022 786e 2d2d  ee0h",.    "xn--
-00012d30: 7939 6133 6171 222c 0a20 2020 2022 786e  y9a3aq",.    "xn
-00012d40: 2d2d 7966 726f 3469 3637 6f22 2c0a 2020  --yfro4i67o",.  
-00012d50: 2020 2278 6e2d 2d79 6762 6932 616d 6d78    "xn--ygbi2ammx
-00012d60: 222c 0a20 2020 2022 786e 2d2d 7a66 7231  ",.    "xn--zfr1
-00012d70: 3634 6222 2c0a 2020 2020 2278 7065 7269  64b",.    "xperi
-00012d80: 6122 2c0a 2020 2020 2278 7878 222c 0a20  a",.    "xxx",. 
-00012d90: 2020 2022 7879 7a22 2c0a 2020 2020 2320     "xyz",.    # 
-00012da0: 790a 2020 2020 2279 6163 6874 7322 2c0a  y.    "yachts",.
-00012db0: 2020 2020 2279 6168 6f6f 222c 0a20 2020      "yahoo",.   
-00012dc0: 2022 7961 6d61 7875 6e22 2c0a 2020 2020   "yamaxun",.    
-00012dd0: 2279 616e 6465 7822 2c0a 2020 2020 2279  "yandex",.    "y
-00012de0: 6522 2c0a 2020 2020 2279 6f64 6f62 6173  e",.    "yodobas
-00012df0: 6869 222c 0a20 2020 2022 796f 6761 222c  hi",.    "yoga",
-00012e00: 0a20 2020 2022 796f 6b6f 6861 6d61 222c  .    "yokohama",
-00012e10: 0a20 2020 2022 796f 7522 2c0a 2020 2020  .    "you",.    
-00012e20: 2279 6f75 7475 6265 222c 0a20 2020 2022  "youtube",.    "
-00012e30: 7974 222c 0a20 2020 2022 7975 6e22 2c0a  yt",.    "yun",.
-00012e40: 2020 2020 2320 7a0a 2020 2020 227a 6122      # z.    "za"
-00012e50: 2c0a 2020 2020 227a 6170 706f 7322 2c0a  ,.    "zappos",.
-00012e60: 2020 2020 227a 6172 6122 2c0a 2020 2020      "zara",.    
-00012e70: 227a 6572 6f22 2c0a 2020 2020 227a 6970  "zero",.    "zip
-00012e80: 222c 0a20 2020 2022 7a69 7070 6f22 2c0a  ",.    "zippo",.
-00012e90: 2020 2020 227a 6d22 2c0a 2020 2020 227a      "zm",.    "z
-00012ea0: 6f6e 6522 2c0a 2020 2020 227a 7565 7269  one",.    "zueri
-00012eb0: 6368 222c 0a20 2020 2022 7a77 222c 0a5d  ch",.    "zw",.]
-00012ec0: 0a0a 0a63 6c61 7373 2049 535f 4854 5450  ...class IS_HTTP
-00012ed0: 5f55 524c 2856 616c 6964 6174 6f72 293a  _URL(Validator):
-00012ee0: 0a20 2020 2022 2222 0a20 2020 2052 656a  .    """.    Rej
-00012ef0: 6563 7473 2061 2055 524c 2073 7472 696e  ects a URL strin
-00012f00: 6720 6966 2061 6e79 206f 6620 7468 6520  g if any of the 
-00012f10: 666f 6c6c 6f77 696e 6720 6973 2074 7275  following is tru
-00012f20: 653a 0a20 2020 2020 2020 2a20 5468 6520  e:.       * The 
-00012f30: 7374 7269 6e67 2069 7320 656d 7074 7920  string is empty 
-00012f40: 6f72 204e 6f6e 650a 2020 2020 2020 202a  or None.       *
-00012f50: 2054 6865 2073 7472 696e 6720 7573 6573   The string uses
-00012f60: 2063 6861 7261 6374 6572 7320 7468 6174   characters that
-00012f70: 2061 7265 206e 6f74 2061 6c6c 6f77 6564   are not allowed
-00012f80: 2069 6e20 6120 5552 4c0a 2020 2020 2020   in a URL.      
-00012f90: 202a 2054 6865 2073 7472 696e 6720 6272   * The string br
-00012fa0: 6561 6b73 2061 6e79 206f 6620 7468 6520  eaks any of the 
-00012fb0: 4854 5450 2073 796e 7461 6374 6963 2072  HTTP syntactic r
-00012fc0: 756c 6573 0a20 2020 2020 2020 2a20 5468  ules.       * Th
-00012fd0: 6520 5552 4c20 7363 6865 6d65 2073 7065  e URL scheme spe
-00012fe0: 6369 6669 6564 2028 6966 206f 6e65 2069  cified (if one i
-00012ff0: 7320 7370 6563 6966 6965 6429 2069 7320  s specified) is 
-00013000: 6e6f 7420 2768 7474 7027 206f 7220 2768  not 'http' or 'h
-00013010: 7474 7073 270a 2020 2020 2020 202a 2054  ttps'.       * T
-00013020: 6865 2074 6f70 2d6c 6576 656c 2064 6f6d  he top-level dom
-00013030: 6169 6e20 2869 6620 6120 686f 7374 206e  ain (if a host n
-00013040: 616d 6520 6973 2073 7065 6369 6669 6564  ame is specified
-00013050: 2920 646f 6573 206e 6f74 2065 7869 7374  ) does not exist
-00013060: 0a0a 2020 2020 4261 7365 6420 6f6e 2052  ..    Based on R
-00013070: 4643 2032 3631 363a 2068 7474 703a 2f2f  FC 2616: http://
-00013080: 7777 772e 6661 7173 2e6f 7267 2f72 6663  www.faqs.org/rfc
-00013090: 732f 7266 6332 3631 362e 6874 6d6c 0a0a  s/rfc2616.html..
-000130a0: 2020 2020 5468 6973 2066 756e 6374 696f      This functio
-000130b0: 6e20 6f6e 6c79 2063 6865 636b 7320 7468  n only checks th
-000130c0: 6520 5552 4c27 7320 7379 6e74 6178 2e20  e URL's syntax. 
-000130d0: 4974 2064 6f65 7320 6e6f 7420 6368 6563  It does not chec
-000130e0: 6b20 7468 6174 2074 6865 2055 524c 0a20  k that the URL. 
-000130f0: 2020 2070 6f69 6e74 7320 746f 2061 2072     points to a r
-00013100: 6561 6c20 646f 6375 6d65 6e74 2c20 666f  eal document, fo
-00013110: 7220 6578 616d 706c 652c 206f 7220 7468  r example, or th
-00013120: 6174 2069 7420 6f74 6865 7277 6973 6520  at it otherwise 
-00013130: 6d61 6b65 7320 7365 6e73 650a 2020 2020  makes sense.    
-00013140: 7365 6d61 6e74 6963 616c 6c79 2e20 5468  semantically. Th
-00013150: 6973 2066 756e 6374 696f 6e20 646f 6573  is function does
-00013160: 2061 7574 6f6d 6174 6963 616c 6c79 2070   automatically p
-00013170: 7265 7065 6e64 2027 6874 7470 3a2f 2f27  repend 'http://'
-00013180: 2069 6e20 6672 6f6e 740a 2020 2020 6f66   in front.    of
-00013190: 2061 2055 524c 2069 6e20 7468 6520 6361   a URL in the ca
-000131a0: 7365 206f 6620 616e 2061 6262 7265 7669  se of an abbrevi
-000131b0: 6174 6564 2055 524c 2028 652e 672e 2027  ated URL (e.g. '
-000131c0: 676f 6f67 6c65 2e63 6127 292e 0a0a 2020  google.ca')...  
-000131d0: 2020 5468 6520 6c69 7374 206f 6620 616c    The list of al
-000131e0: 6c6f 7765 6420 7363 6865 6d65 7320 6973  lowed schemes is
-000131f0: 2063 7573 746f 6d69 7a61 626c 6520 7769   customizable wi
-00013200: 7468 2074 6865 2061 6c6c 6f77 6564 5f73  th the allowed_s
-00013210: 6368 656d 6573 0a20 2020 2070 6172 616d  chemes.    param
-00013220: 6574 6572 2e20 4966 2079 6f75 2065 7863  eter. If you exc
-00013230: 6c75 6465 204e 6f6e 6520 6672 6f6d 2074  lude None from t
-00013240: 6865 206c 6973 742c 2074 6865 6e20 6162  he list, then ab
-00013250: 6272 6576 6961 7465 6420 5552 4c73 0a20  breviated URLs. 
-00013260: 2020 2028 6c61 636b 696e 6720 6120 7363     (lacking a sc
-00013270: 6865 6d65 2073 7563 6820 6173 2027 6874  heme such as 'ht
-00013280: 7470 2729 2077 696c 6c20 6265 2072 656a  tp') will be rej
-00013290: 6563 7465 642e 0a0a 2020 2020 5468 6520  ected...    The 
-000132a0: 6465 6661 756c 7420 7072 6570 656e 6465  default prepende
-000132b0: 6420 7363 6865 6d65 2069 7320 6375 7374  d scheme is cust
-000132c0: 6f6d 697a 6162 6c65 2077 6974 6820 7468  omizable with th
-000132d0: 6520 7072 6570 656e 645f 7363 6865 6d65  e prepend_scheme
-000132e0: 0a20 2020 2070 6172 616d 6574 6572 2e20  .    parameter. 
-000132f0: 4966 2079 6f75 2073 6574 2070 7265 7065  If you set prepe
-00013300: 6e64 5f73 6368 656d 6520 746f 204e 6f6e  nd_scheme to Non
-00013310: 6520 7468 656e 2070 7265 7065 6e64 696e  e then prependin
-00013320: 6720 7769 6c6c 2062 650a 2020 2020 6469  g will be.    di
-00013330: 7361 626c 6564 2e20 5552 4c73 2074 6861  sabled. URLs tha
-00013340: 7420 7265 7175 6972 6520 7072 6570 656e  t require prepen
-00013350: 6469 6e67 2074 6f20 7061 7273 6520 7769  ding to parse wi
-00013360: 6c6c 2073 7469 6c6c 2062 6520 6163 6365  ll still be acce
-00013370: 7074 6564 2c0a 2020 2020 6275 7420 7468  pted,.    but th
-00013380: 6520 7265 7475 726e 2076 616c 7565 2077  e return value w
-00013390: 696c 6c20 6e6f 7420 6265 206d 6f64 6966  ill not be modif
-000133a0: 6965 642e 0a0a 2020 2020 4061 7574 686f  ied...    @autho
-000133b0: 723a 204a 6f6e 6174 6861 6e20 4265 6e6e  r: Jonathan Benn
-000133c0: 0a0a 2020 2020 2020 2020 3e3e 3e20 4953  ..        >>> IS
-000133d0: 5f48 5454 505f 5552 4c28 2928 2768 7474  _HTTP_URL()('htt
-000133e0: 703a 2f2f 312e 322e 332e 3427 290a 2020  p://1.2.3.4').  
-000133f0: 2020 2020 2020 2827 6874 7470 3a2f 2f31        ('http://1
-00013400: 2e32 2e33 2e34 272c 204e 6f6e 6529 0a20  .2.3.4', None). 
-00013410: 2020 2020 2020 203e 3e3e 2049 535f 4854         >>> IS_HT
-00013420: 5450 5f55 524c 2829 2827 6874 7470 3a2f  TP_URL()('http:/
-00013430: 2f61 6263 2e63 6f6d 2729 0a20 2020 2020  /abc.com').     
-00013440: 2020 2028 2768 7474 703a 2f2f 6162 632e     ('http://abc.
-00013450: 636f 6d27 2c20 4e6f 6e65 290a 2020 2020  com', None).    
-00013460: 2020 2020 3e3e 3e20 4953 5f48 5454 505f      >>> IS_HTTP_
-00013470: 5552 4c28 2928 2768 7474 7073 3a2f 2f61  URL()('https://a
-00013480: 6263 2e63 6f6d 2729 0a20 2020 2020 2020  bc.com').       
-00013490: 2028 2768 7474 7073 3a2f 2f61 6263 2e63   ('https://abc.c
-000134a0: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
-000134b0: 2020 203e 3e3e 2049 535f 4854 5450 5f55     >>> IS_HTTP_U
-000134c0: 524c 2829 2827 6874 7470 783a 2f2f 6162  RL()('httpx://ab
-000134d0: 632e 636f 6d27 290a 2020 2020 2020 2020  c.com').        
-000134e0: 2827 6874 7470 783a 2f2f 6162 632e 636f  ('httpx://abc.co
-000134f0: 6d27 2c20 2765 6e74 6572 2061 2076 616c  m', 'enter a val
-00013500: 6964 2055 524c 2729 0a20 2020 2020 2020  id URL').       
-00013510: 203e 3e3e 2049 535f 4854 5450 5f55 524c   >>> IS_HTTP_URL
-00013520: 2829 2827 6874 7470 3a2f 2f61 6263 2e63  ()('http://abc.c
-00013530: 6f6d 3a38 3027 290a 2020 2020 2020 2020  om:80').        
-00013540: 2827 6874 7470 3a2f 2f61 6263 2e63 6f6d  ('http://abc.com
-00013550: 3a38 3027 2c20 4e6f 6e65 290a 2020 2020  :80', None).    
-00013560: 2020 2020 3e3e 3e20 4953 5f48 5454 505f      >>> IS_HTTP_
-00013570: 5552 4c28 2928 2768 7474 703a 2f2f 7573  URL()('http://us
-00013580: 6572 4061 6263 2e63 6f6d 2729 0a20 2020  er@abc.com').   
-00013590: 2020 2020 2028 2768 7474 703a 2f2f 7573       ('http://us
-000135a0: 6572 4061 6263 2e63 6f6d 272c 204e 6f6e  er@abc.com', Non
-000135b0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-000135c0: 535f 4854 5450 5f55 524c 2829 2827 6874  S_HTTP_URL()('ht
-000135d0: 7470 3a2f 2f75 7365 7240 312e 322e 332e  tp://user@1.2.3.
-000135e0: 3427 290a 2020 2020 2020 2020 2827 6874  4').        ('ht
-000135f0: 7470 3a2f 2f75 7365 7240 312e 322e 332e  tp://user@1.2.3.
-00013600: 3427 2c20 4e6f 6e65 290a 0a20 2020 2041  4', None)..    A
-00013610: 7267 733a 0a20 2020 2020 2020 2065 7272  rgs:.        err
-00013620: 6f72 5f6d 6573 7361 6765 3a20 6120 7374  or_message: a st
-00013630: 7269 6e67 2c20 7468 6520 6572 726f 7220  ring, the error 
-00013640: 6d65 7373 6167 6520 746f 2067 6976 6520  message to give 
-00013650: 7468 6520 656e 6420 7573 6572 0a20 2020  the end user.   
-00013660: 2020 2020 2020 2020 2069 6620 7468 6520           if the 
-00013670: 5552 4c20 646f 6573 206e 6f74 2076 616c  URL does not val
-00013680: 6964 6174 650a 2020 2020 2020 2020 616c  idate.        al
-00013690: 6c6f 7765 645f 7363 6865 6d65 733a 2061  lowed_schemes: a
-000136a0: 206c 6973 7420 636f 6e74 6169 6e69 6e67   list containing
-000136b0: 2073 7472 696e 6773 206f 7220 4e6f 6e65   strings or None
-000136c0: 2e20 4561 6368 2065 6c65 6d65 6e74 0a20  . Each element. 
-000136d0: 2020 2020 2020 2020 2020 2069 7320 6120             is a 
-000136e0: 7363 6865 6d65 2074 6865 2069 6e70 7574  scheme the input
-000136f0: 7465 6420 5552 4c20 6973 2061 6c6c 6f77  ted URL is allow
-00013700: 6564 2074 6f20 7573 650a 2020 2020 2020  ed to use.      
-00013710: 2020 7072 6570 656e 645f 7363 6865 6d65    prepend_scheme
-00013720: 3a20 6120 7374 7269 6e67 2c20 7468 6973  : a string, this
-00013730: 2073 6368 656d 6520 6973 2070 7265 7065   scheme is prepe
-00013740: 6e64 6564 2069 6620 6974 2773 0a20 2020  nded if it's.   
-00013750: 2020 2020 2020 2020 206e 6563 6573 7361           necessa
-00013760: 7279 2074 6f20 6d61 6b65 2074 6865 2055  ry to make the U
-00013770: 524c 2076 616c 6964 0a20 2020 2022 2222  RL valid.    """
-00013780: 0a0a 2020 2020 5245 4745 585f 4745 4e45  ..    REGEX_GENE
-00013790: 5249 435f 5641 4c49 445f 4950 203d 2072  RIC_VALID_IP = r
-000137a0: 2228 5b5c 772e 217e 2a27 7c3b 3a26 3d2b  "([\w.!~*'|;:&=+
-000137b0: 242c 2d5d 2b40 293f 5c64 2b5c 2e5c 642b  $,-]+@)?\d+\.\d+
-000137c0: 5c2e 5c64 2b5c 2e5c 642b 283a 5c64 2a29  \.\d+\.\d+(:\d*)
-000137d0: 2a24 220a 2020 2020 5245 4745 585f 4745  *$".    REGEX_GE
-000137e0: 4e45 5249 435f 5641 4c49 445f 444f 4d41  NERIC_VALID_DOMA
-000137f0: 494e 203d 2072 2228 5b5c 772e 217e 2a27  IN = r"([\w.!~*'
-00013800: 7c3b 3a26 3d2b 242c 2d5d 2b40 293f 2828  |;:&=+$,-]+@)?((
-00013810: 5b41 2d5a 612d 7a30 2d39 5d2b 5b41 2d5a  [A-Za-z0-9]+[A-Z
-00013820: 612d 7a30 2d39 5c2d 5d2a 5b41 2d5a 612d  a-z0-9\-]*[A-Za-
-00013830: 7a30 2d39 5d2b 5c2e 292a 285b 412d 5a61  z0-9]+\.)*([A-Za
-00013840: 2d7a 302d 395d 2b5c 2e29 2a29 2a28 5b41  -z0-9]+\.)*)*([A
-00013850: 2d5a 612d 7a5d 2b5b 412d 5a61 2d7a 302d  -Za-z]+[A-Za-z0-
-00013860: 395c 2d5d 2a5b 412d 5a61 2d7a 302d 395d  9\-]*[A-Za-z0-9]
-00013870: 2b29 5c2e 3f28 3a5c 642a 292a 2422 0a0a  +)\.?(:\d*)*$"..
-00013880: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00013890: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-000138a0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-000138b0: 7373 6167 653d 2245 6e74 6572 2061 2076  ssage="Enter a v
-000138c0: 616c 6964 2055 524c 222c 0a20 2020 2020  alid URL",.     
-000138d0: 2020 2061 6c6c 6f77 6564 5f73 6368 656d     allowed_schem
-000138e0: 6573 3d4e 6f6e 652c 0a20 2020 2020 2020  es=None,.       
-000138f0: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
-00013900: 2268 7474 7022 2c0a 2020 2020 2020 2020  "http",.        
-00013910: 616c 6c6f 7765 645f 746c 6473 3d4e 6f6e  allowed_tlds=Non
-00013920: 652c 0a20 2020 2029 3a0a 2020 2020 2020  e,.    ):.      
-00013930: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-00013940: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-00013950: 7361 6765 0a20 2020 2020 2020 2069 6620  sage.        if 
-00013960: 616c 6c6f 7765 645f 7363 6865 6d65 7320  allowed_schemes 
-00013970: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00013980: 2020 2020 2073 656c 662e 616c 6c6f 7765       self.allowe
-00013990: 645f 7363 6865 6d65 7320 3d20 6874 7470  d_schemes = http
-000139a0: 5f73 6368 656d 6573 0a20 2020 2020 2020  _schemes.       
-000139b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000139c0: 2020 2073 656c 662e 616c 6c6f 7765 645f     self.allowed_
-000139d0: 7363 6865 6d65 7320 3d20 616c 6c6f 7765  schemes = allowe
-000139e0: 645f 7363 6865 6d65 730a 2020 2020 2020  d_schemes.      
-000139f0: 2020 6966 2061 6c6c 6f77 6564 5f74 6c64    if allowed_tld
-00013a00: 7320 6973 204e 6f6e 653a 0a20 2020 2020  s is None:.     
-00013a10: 2020 2020 2020 2073 656c 662e 616c 6c6f         self.allo
-00013a20: 7765 645f 746c 6473 203d 206f 6666 6963  wed_tlds = offic
-00013a30: 6961 6c5f 746f 705f 6c65 7665 6c5f 646f  ial_top_level_do
-00013a40: 6d61 696e 730a 2020 2020 2020 2020 656c  mains.        el
-00013a50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00013a60: 7365 6c66 2e61 6c6c 6f77 6564 5f74 6c64  self.allowed_tld
-00013a70: 7320 3d20 616c 6c6f 7765 645f 746c 6473  s = allowed_tlds
-00013a80: 0a20 2020 2020 2020 2073 656c 662e 7072  .        self.pr
-00013a90: 6570 656e 645f 7363 6865 6d65 203d 2070  epend_scheme = p
-00013aa0: 7265 7065 6e64 5f73 6368 656d 650a 0a20  repend_scheme.. 
-00013ab0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00013ac0: 7365 6c66 2e61 6c6c 6f77 6564 5f73 6368  self.allowed_sch
-00013ad0: 656d 6573 3a0a 2020 2020 2020 2020 2020  emes:.          
-00013ae0: 2020 6966 2069 206e 6f74 2069 6e20 6874    if i not in ht
-00013af0: 7470 5f73 6368 656d 6573 3a0a 2020 2020  tp_schemes:.    
-00013b00: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00013b10: 6520 5379 6e74 6178 4572 726f 7228 0a20  e SyntaxError(. 
-00013b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013b30: 2020 2022 616c 6c6f 7765 645f 7363 6865     "allowed_sche
-00013b40: 6d65 2076 616c 7565 2027 2573 2720 6973  me value '%s' is
-00013b50: 206e 6f74 2069 6e20 2573 2220 2520 2869   not in %s" % (i
-00013b60: 2c20 6874 7470 5f73 6368 656d 6573 290a  , http_schemes).
-00013b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013b80: 290a 0a20 2020 2020 2020 2069 6620 7365  )..        if se
-00013b90: 6c66 2e70 7265 7065 6e64 5f73 6368 656d  lf.prepend_schem
-00013ba0: 6520 6e6f 7420 696e 2073 656c 662e 616c  e not in self.al
-00013bb0: 6c6f 7765 645f 7363 6865 6d65 733a 0a20  lowed_schemes:. 
-00013bc0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00013bd0: 2053 796e 7461 7845 7272 6f72 280a 2020   SyntaxError(.  
-00013be0: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-00013bf0: 7265 7065 6e64 5f73 6368 656d 653d 2725  repend_scheme='%
-00013c00: 7327 2069 7320 6e6f 7420 696e 2061 6c6c  s' is not in all
-00013c10: 6f77 6564 5f73 6368 656d 6573 3d25 7322  owed_schemes=%s"
-00013c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013c30: 2025 2028 7365 6c66 2e70 7265 7065 6e64   % (self.prepend
-00013c40: 5f73 6368 656d 652c 2073 656c 662e 616c  _scheme, self.al
-00013c50: 6c6f 7765 645f 7363 6865 6d65 7329 0a20  lowed_schemes). 
-00013c60: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00013c70: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00013c80: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00013c90: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00013ca0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00013cb0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-00013cc0: 2020 2076 616c 7565 3a20 6120 7374 7269     value: a stri
-00013cd0: 6e67 2c20 7468 6520 5552 4c20 746f 2076  ng, the URL to v
-00013ce0: 616c 6964 6174 650a 0a20 2020 2020 2020  alidate..       
-00013cf0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-00013d00: 2020 2020 2020 6120 7475 706c 652c 2077        a tuple, w
-00013d10: 6865 7265 2074 7570 6c65 5b30 5d20 6973  here tuple[0] is
-00013d20: 2074 6865 2069 6e70 7574 7465 6420 7661   the inputted va
-00013d30: 6c75 650a 2020 2020 2020 2020 2020 2020  lue.            
-00013d40: 2870 6f73 7369 626c 6520 7072 6570 656e  (possible prepen
-00013d50: 6465 6420 7769 7468 2070 7265 7065 6e64  ded with prepend
-00013d60: 5f73 6368 656d 6529 2c20 616e 6420 7475  _scheme), and tu
-00013d70: 706c 655b 315d 2069 7320 6569 7468 6572  ple[1] is either
-00013d80: 0a20 2020 2020 2020 2020 2020 204e 6f6e  .            Non
-00013d90: 6520 2873 7563 6365 7373 2129 206f 7220  e (success!) or 
-00013da0: 7468 6520 7374 7269 6e67 2065 7272 6f72  the string error
-00013db0: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
-00013dc0: 2022 2222 0a20 2020 2020 2020 2074 7279   """.        try
-00013dd0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00013de0: 6966 2074 6865 2055 524c 2070 6173 7365  if the URL passe
-00013df0: 7320 6765 6e65 7269 6320 7661 6c69 6461  s generic valida
-00013e00: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-00013e10: 2078 203d 2049 535f 4745 4e45 5249 435f   x = IS_GENERIC_
-00013e20: 5552 4c28 0a20 2020 2020 2020 2020 2020  URL(.           
-00013e30: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
-00013e40: 6765 3d73 656c 662e 6572 726f 725f 6d65  ge=self.error_me
-00013e50: 7373 6167 652c 0a20 2020 2020 2020 2020  ssage,.         
-00013e60: 2020 2020 2020 2061 6c6c 6f77 6564 5f73         allowed_s
-00013e70: 6368 656d 6573 3d73 656c 662e 616c 6c6f  chemes=self.allo
-00013e80: 7765 645f 7363 6865 6d65 732c 0a20 2020  wed_schemes,.   
-00013e90: 2020 2020 2020 2020 2020 2020 2070 7265               pre
-00013ea0: 7065 6e64 5f73 6368 656d 653d 7365 6c66  pend_scheme=self
-00013eb0: 2e70 7265 7065 6e64 5f73 6368 656d 652c  .prepend_scheme,
-00013ec0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00013ed0: 2020 2020 2020 2020 2020 2069 6620 7828             if x(
-00013ee0: 7661 6c75 6529 5b31 5d20 6973 204e 6f6e  value)[1] is Non
-00013ef0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00013f00: 2020 2063 6f6d 706f 6e65 6e74 7320 3d20     components = 
-00013f10: 7572 6c70 6172 7365 2e75 726c 7061 7273  urlparse.urlpars
-00013f20: 6528 7661 6c75 6529 0a20 2020 2020 2020  e(value).       
-00013f30: 2020 2020 2020 2020 2061 7574 686f 7269           authori
-00013f40: 7479 203d 2063 6f6d 706f 6e65 6e74 732e  ty = components.
-00013f50: 6e65 746c 6f63 0a20 2020 2020 2020 2020  netloc.         
-00013f60: 2020 2020 2020 2023 2069 6620 7468 6572         # if ther
-00013f70: 6520 6973 2061 6e20 6175 7468 6f72 6974  e is an authorit
-00013f80: 7920 636f 6d70 6f6e 656e 740a 2020 2020  y component.    
-00013f90: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00013fa0: 7574 686f 7269 7479 3a0a 2020 2020 2020  uthority:.      
-00013fb0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00013fc0: 6966 2061 7574 686f 7269 7479 2069 7320  if authority is 
-00013fd0: 6120 7661 6c69 6420 4950 2061 6464 7265  a valid IP addre
-00013fe0: 7373 0a20 2020 2020 2020 2020 2020 2020  ss.             
-00013ff0: 2020 2020 2020 2069 6620 7265 2e6d 6174         if re.mat
-00014000: 6368 2873 656c 662e 5245 4745 585f 4745  ch(self.REGEX_GE
-00014010: 4e45 5249 435f 5641 4c49 445f 4950 2c20  NERIC_VALID_IP, 
-00014020: 6175 7468 6f72 6974 7929 3a0a 2020 2020  authority):.    
-00014030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014040: 2020 2020 2320 5468 656e 2074 6869 7320      # Then this 
-00014050: 4854 5450 2055 524c 2069 7320 7661 6c69  HTTP URL is vali
-00014060: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-00014070: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00014080: 2076 616c 7565 0a20 2020 2020 2020 2020   value.         
-00014090: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000140a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000140b0: 2020 2020 2020 2020 2023 2065 6c73 6520           # else 
-000140c0: 6966 2061 7574 686f 7269 7479 2069 7320  if authority is 
-000140d0: 6120 7661 6c69 6420 646f 6d61 696e 206e  a valid domain n
-000140e0: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-000140f0: 2020 2020 2020 2020 2020 2020 646f 6d61              doma
-00014100: 696e 4d61 7463 6820 3d20 7265 2e6d 6174  inMatch = re.mat
-00014110: 6368 280a 2020 2020 2020 2020 2020 2020  ch(.            
-00014120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014130: 7365 6c66 2e52 4547 4558 5f47 454e 4552  self.REGEX_GENER
-00014140: 4943 5f56 414c 4944 5f44 4f4d 4149 4e2c  IC_VALID_DOMAIN,
-00014150: 2061 7574 686f 7269 7479 0a20 2020 2020   authority.     
-00014160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014170: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00014180: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00014190: 646f 6d61 696e 4d61 7463 683a 0a20 2020  domainMatch:.   
-000141a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000141b0: 2020 2020 2020 2020 2023 2069 6620 7468           # if th
-000141c0: 6520 746f 702d 6c65 7665 6c20 646f 6d61  e top-level doma
-000141d0: 696e 2072 6561 6c6c 7920 6578 6973 7473  in really exists
-000141e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000141f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00014200: 646f 6d61 696e 4d61 7463 682e 6772 6f75  domainMatch.grou
-00014210: 7028 3529 2e6c 6f77 6572 2829 2069 6e20  p(5).lower() in 
-00014220: 7365 6c66 2e61 6c6c 6f77 6564 5f74 6c64  self.allowed_tld
-00014230: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00014240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014250: 2020 2023 2054 6865 6e20 7468 6973 2048     # Then this H
-00014260: 5454 5020 5552 4c20 6973 2076 616c 6964  TTP URL is valid
-00014270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014290: 2072 6574 7572 6e20 7661 6c75 650a 2020   return value.  
-000142a0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000142b0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000142c0: 2020 2020 2020 2020 2320 656c 7365 2074          # else t
-000142d0: 6869 7320 6973 2061 2072 656c 6174 6976  his is a relativ
-000142e0: 652f 6162 6272 6576 6961 7465 6420 5552  e/abbreviated UR
-000142f0: 4c2c 2077 6869 6368 2077 696c 6c20 7061  L, which will pa
-00014300: 7273 650a 2020 2020 2020 2020 2020 2020  rse.            
-00014310: 2020 2020 2020 2020 2320 696e 746f 2074          # into t
-00014320: 6865 2055 524c 2773 2070 6174 6820 636f  he URL's path co
-00014330: 6d70 6f6e 656e 740a 2020 2020 2020 2020  mponent.        
-00014340: 2020 2020 2020 2020 2020 2020 7061 7468              path
-00014350: 203d 2063 6f6d 706f 6e65 6e74 732e 7061   = components.pa
-00014360: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-00014370: 2020 2020 2020 2023 2072 656c 6174 6976         # relativ
-00014380: 6520 6361 7365 3a20 6966 2074 6869 7320  e case: if this 
-00014390: 6973 2061 2076 616c 6964 2070 6174 6820  is a valid path 
-000143a0: 2869 6620 6974 2073 7461 7274 7320 7769  (if it starts wi
-000143b0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-000143c0: 2020 2020 2020 2023 2061 2073 6c61 7368         # a slash
-000143d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000143e0: 2020 2020 2020 6966 206e 6f74 2070 6174        if not pat
-000143f0: 682e 7374 6172 7473 7769 7468 2822 2f22  h.startswith("/"
-00014400: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00014410: 2020 2020 2020 2020 2020 2023 2061 6262             # abb
-00014420: 7265 7669 6174 6564 2063 6173 653a 2069  reviated case: i
-00014430: 6620 7765 2068 6176 656e 2774 2061 6c72  f we haven't alr
-00014440: 6561 6479 2c20 7072 6570 656e 6420 610a  eady, prepend a.
-00014450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014460: 2020 2020 2020 2020 2320 7363 6865 6d65          # scheme
-00014470: 2061 6e64 2073 6565 2069 6620 6974 2066   and see if it f
-00014480: 6978 6573 2074 6865 2070 726f 626c 656d  ixes the problem
-00014490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000144a0: 2020 2020 2020 2020 2069 6620 223a 2f2f           if "://
-000144b0: 2220 6e6f 7420 696e 2076 616c 7565 2061  " not in value a
-000144c0: 6e64 204e 6f6e 6520 696e 2073 656c 662e  nd None in self.
-000144d0: 616c 6c6f 7765 645f 7363 6865 6d65 733a  allowed_schemes:
-000144e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000144f0: 2020 2020 2020 2020 2020 2020 2073 6368               sch
-00014500: 656d 6554 6f55 7365 203d 2073 656c 662e  emeToUse = self.
-00014510: 7072 6570 656e 645f 7363 6865 6d65 206f  prepend_scheme o
-00014520: 7220 2268 7474 7022 0a20 2020 2020 2020  r "http".       
-00014530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014540: 2020 2020 206e 6577 5f76 616c 7565 203d       new_value =
-00014550: 2073 656c 662e 7661 6c69 6461 7465 2873   self.validate(s
-00014560: 6368 656d 6554 6f55 7365 202b 2022 3a2f  chemeToUse + ":/
-00014570: 2f22 202b 2076 616c 7565 290a 2020 2020  /" + value).    
-00014580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014590: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-000145a0: 6577 5f76 616c 7565 2069 6620 7365 6c66  ew_value if self
-000145b0: 2e70 7265 7065 6e64 5f73 6368 656d 6520  .prepend_scheme 
-000145c0: 656c 7365 2076 616c 7565 0a20 2020 2020  else value.     
-000145d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000145e0: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
-000145f0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-00014600: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
-00014610: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00014620: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00014630: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00014640: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
-00014650: 0a0a 636c 6173 7320 4953 5f55 524c 2856  ..class IS_URL(V
-00014660: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
-00014670: 2222 0a20 2020 2052 656a 6563 7473 2061  "".    Rejects a
-00014680: 2055 524c 2073 7472 696e 6720 6966 2061   URL string if a
-00014690: 6e79 206f 6620 7468 6520 666f 6c6c 6f77  ny of the follow
-000146a0: 696e 6720 6973 2074 7275 653a 0a0a 2020  ing is true:..  
-000146b0: 2020 2020 202a 2054 6865 2073 7472 696e       * The strin
-000146c0: 6720 6973 2065 6d70 7479 206f 7220 4e6f  g is empty or No
-000146d0: 6e65 0a20 2020 2020 2020 2a20 5468 6520  ne.       * The 
-000146e0: 7374 7269 6e67 2075 7365 7320 6368 6172  string uses char
-000146f0: 6163 7465 7273 2074 6861 7420 6172 6520  acters that are 
-00014700: 6e6f 7420 616c 6c6f 7765 6420 696e 2061  not allowed in a
-00014710: 2055 524c 0a20 2020 2020 2020 2a20 5468   URL.       * Th
-00014720: 6520 7374 7269 6e67 2062 7265 616b 7320  e string breaks 
-00014730: 616e 7920 6f66 2074 6865 2048 5454 5020  any of the HTTP 
-00014740: 7379 6e74 6163 7469 6320 7275 6c65 730a  syntactic rules.
-00014750: 2020 2020 2020 202a 2054 6865 2055 524c         * The URL
-00014760: 2073 6368 656d 6520 7370 6563 6966 6965   scheme specifie
-00014770: 6420 2869 6620 6f6e 6520 6973 2073 7065  d (if one is spe
-00014780: 6369 6669 6564 2920 6973 206e 6f74 2027  cified) is not '
-00014790: 6874 7470 2720 6f72 2027 6874 7470 7327  http' or 'https'
-000147a0: 0a20 2020 2020 2020 2a20 5468 6520 746f  .       * The to
-000147b0: 702d 6c65 7665 6c20 646f 6d61 696e 2028  p-level domain (
-000147c0: 6966 2061 2068 6f73 7420 6e61 6d65 2069  if a host name i
-000147d0: 7320 7370 6563 6966 6965 6429 2064 6f65  s specified) doe
-000147e0: 7320 6e6f 7420 6578 6973 740a 0a20 2020  s not exist..   
-000147f0: 2028 5468 6573 6520 7275 6c65 7320 6172   (These rules ar
-00014800: 6520 6261 7365 6420 6f6e 2052 4643 2032  e based on RFC 2
-00014810: 3631 363a 2068 7474 703a 2f2f 7777 772e  616: http://www.
-00014820: 6661 7173 2e6f 7267 2f72 6663 732f 7266  faqs.org/rfcs/rf
-00014830: 6332 3631 362e 6874 6d6c 290a 0a20 2020  c2616.html)..   
-00014840: 2054 6869 7320 6675 6e63 7469 6f6e 206f   This function o
-00014850: 6e6c 7920 6368 6563 6b73 2074 6865 2055  nly checks the U
-00014860: 524c 2773 2073 796e 7461 782e 2049 7420  RL's syntax. It 
-00014870: 646f 6573 206e 6f74 2063 6865 636b 2074  does not check t
-00014880: 6861 7420 7468 6520 5552 4c0a 2020 2020  hat the URL.    
-00014890: 706f 696e 7473 2074 6f20 6120 7265 616c  points to a real
-000148a0: 2064 6f63 756d 656e 742c 2066 6f72 2065   document, for e
-000148b0: 7861 6d70 6c65 2c20 6f72 2074 6861 7420  xample, or that 
-000148c0: 6974 206f 7468 6572 7769 7365 206d 616b  it otherwise mak
-000148d0: 6573 2073 656e 7365 0a20 2020 2073 656d  es sense.    sem
-000148e0: 616e 7469 6361 6c6c 792e 2054 6869 7320  antically. This 
-000148f0: 6675 6e63 7469 6f6e 2064 6f65 7320 6175  function does au
-00014900: 746f 6d61 7469 6361 6c6c 7920 7072 6570  tomatically prep
-00014910: 656e 6420 2768 7474 703a 2f2f 2720 696e  end 'http://' in
-00014920: 2066 726f 6e74 0a20 2020 206f 6620 6120   front.    of a 
-00014930: 5552 4c20 696e 2074 6865 2063 6173 6520  URL in the case 
-00014940: 6f66 2061 6e20 6162 6272 6576 6961 7465  of an abbreviate
-00014950: 6420 5552 4c20 2865 2e67 2e20 2767 6f6f  d URL (e.g. 'goo
-00014960: 676c 652e 6361 2729 2e0a 0a20 2020 2049  gle.ca')...    I
-00014970: 6620 7468 6520 7061 7261 6d65 7465 7220  f the parameter 
-00014980: 6d6f 6465 3d27 6765 6e65 7269 6327 2069  mode='generic' i
-00014990: 7320 7573 6564 2c20 7468 656e 2074 6869  s used, then thi
-000149a0: 7320 6675 6e63 7469 6f6e 2773 2062 6568  s function's beh
-000149b0: 6176 696f 720a 2020 2020 6368 616e 6765  avior.    change
-000149c0: 732e 2049 7420 7468 656e 2072 656a 6563  s. It then rejec
-000149d0: 7473 2061 2055 524c 2073 7472 696e 6720  ts a URL string 
-000149e0: 6966 2061 6e79 206f 6620 7468 6520 666f  if any of the fo
-000149f0: 6c6c 6f77 696e 6720 6973 2074 7275 653a  llowing is true:
-00014a00: 0a0a 2020 2020 2020 202a 2054 6865 2073  ..       * The s
-00014a10: 7472 696e 6720 6973 2065 6d70 7479 206f  tring is empty o
-00014a20: 7220 4e6f 6e65 0a20 2020 2020 2020 2a20  r None.       * 
-00014a30: 5468 6520 7374 7269 6e67 2075 7365 7320  The string uses 
-00014a40: 6368 6172 6163 7465 7273 2074 6861 7420  characters that 
-00014a50: 6172 6520 6e6f 7420 616c 6c6f 7765 6420  are not allowed 
-00014a60: 696e 2061 2055 524c 0a20 2020 2020 2020  in a URL.       
-00014a70: 2a20 5468 6520 5552 4c20 7363 6865 6d65  * The URL scheme
-00014a80: 2073 7065 6369 6669 6564 2028 6966 206f   specified (if o
-00014a90: 6e65 2069 7320 7370 6563 6966 6965 6429  ne is specified)
-00014aa0: 2069 7320 6e6f 7420 7661 6c69 640a 0a20   is not valid.. 
-00014ab0: 2020 2028 5468 6573 6520 7275 6c65 7320     (These rules 
-00014ac0: 6172 6520 6261 7365 6420 6f6e 2052 4643  are based on RFC
-00014ad0: 2032 3339 363a 2068 7474 703a 2f2f 7777   2396: http://ww
-00014ae0: 772e 6661 7173 2e6f 7267 2f72 6663 732f  w.faqs.org/rfcs/
-00014af0: 7266 6332 3339 362e 6874 6d6c 290a 0a20  rfc2396.html).. 
-00014b00: 2020 2054 6865 206c 6973 7420 6f66 2061     The list of a
-00014b10: 6c6c 6f77 6564 2073 6368 656d 6573 2069  llowed schemes i
-00014b20: 7320 6375 7374 6f6d 697a 6162 6c65 2077  s customizable w
-00014b30: 6974 6820 7468 6520 616c 6c6f 7765 645f  ith the allowed_
-00014b40: 7363 6865 6d65 730a 2020 2020 7061 7261  schemes.    para
-00014b50: 6d65 7465 722e 2049 6620 796f 7520 6578  meter. If you ex
-00014b60: 636c 7564 6520 4e6f 6e65 2066 726f 6d20  clude None from 
-00014b70: 7468 6520 6c69 7374 2c20 7468 656e 2061  the list, then a
-00014b80: 6262 7265 7669 6174 6564 2055 524c 730a  bbreviated URLs.
-00014b90: 2020 2020 286c 6163 6b69 6e67 2061 2073      (lacking a s
-00014ba0: 6368 656d 6520 7375 6368 2061 7320 2768  cheme such as 'h
-00014bb0: 7474 7027 2920 7769 6c6c 2062 6520 7265  ttp') will be re
-00014bc0: 6a65 6374 6564 2e0a 0a20 2020 2054 6865  jected...    The
-00014bd0: 2064 6566 6175 6c74 2070 7265 7065 6e64   default prepend
-00014be0: 6564 2073 6368 656d 6520 6973 2063 7573  ed scheme is cus
-00014bf0: 746f 6d69 7a61 626c 6520 7769 7468 2074  tomizable with t
-00014c00: 6865 2070 7265 7065 6e64 5f73 6368 656d  he prepend_schem
-00014c10: 650a 2020 2020 7061 7261 6d65 7465 722e  e.    parameter.
-00014c20: 2049 6620 796f 7520 7365 7420 7072 6570   If you set prep
-00014c30: 656e 645f 7363 6865 6d65 2074 6f20 4e6f  end_scheme to No
-00014c40: 6e65 2074 6865 6e20 7072 6570 656e 6469  ne then prependi
-00014c50: 6e67 2077 696c 6c20 6265 0a20 2020 2064  ng will be.    d
-00014c60: 6973 6162 6c65 642e 2055 524c 7320 7468  isabled. URLs th
-00014c70: 6174 2072 6571 7569 7265 2070 7265 7065  at require prepe
-00014c80: 6e64 696e 6720 746f 2070 6172 7365 2077  nding to parse w
-00014c90: 696c 6c20 7374 696c 6c20 6265 2061 6363  ill still be acc
-00014ca0: 6570 7465 642c 0a20 2020 2062 7574 2074  epted,.    but t
-00014cb0: 6865 2072 6574 7572 6e20 7661 6c75 6520  he return value 
-00014cc0: 7769 6c6c 206e 6f74 2062 6520 6d6f 6469  will not be modi
-00014cd0: 6669 6564 2e0a 0a20 2020 2049 535f 5552  fied...    IS_UR
-00014ce0: 4c20 6973 2063 6f6d 7061 7469 626c 6520  L is compatible 
-00014cf0: 7769 7468 2074 6865 2049 6e74 6572 6e61  with the Interna
-00014d00: 7469 6f6e 616c 697a 6564 2044 6f6d 6169  tionalized Domai
-00014d10: 6e20 4e61 6d65 2028 4944 4e29 2073 7461  n Name (IDN) sta
-00014d20: 6e64 6172 640a 2020 2020 7370 6563 6966  ndard.    specif
-00014d30: 6965 6420 696e 2052 4643 2033 3439 3020  ied in RFC 3490 
-00014d40: 2868 7474 703a 2f2f 746f 6f6c 732e 6965  (http://tools.ie
-00014d50: 7466 2e6f 7267 2f68 746d 6c2f 7266 6333  tf.org/html/rfc3
-00014d60: 3439 3029 2e20 4173 2061 2072 6573 756c  490). As a resul
-00014d70: 742c 0a20 2020 2055 524c 7320 6361 6e20  t,.    URLs can 
-00014d80: 6265 2072 6567 756c 6172 2073 7472 696e  be regular strin
-00014d90: 6773 206f 7220 756e 6963 6f64 6520 7374  gs or unicode st
-00014da0: 7269 6e67 732e 0a20 2020 2049 6620 7468  rings..    If th
-00014db0: 6520 5552 4c27 7320 646f 6d61 696e 2063  e URL's domain c
-00014dc0: 6f6d 706f 6e65 6e74 2028 652e 672e 2067  omponent (e.g. g
-00014dd0: 6f6f 676c 652e 6361 2920 636f 6e74 6169  oogle.ca) contai
-00014de0: 6e73 206e 6f6e 2d55 532d 4153 4349 490a  ns non-US-ASCII.
-00014df0: 2020 2020 6c65 7474 6572 732c 2074 6865      letters, the
-00014e00: 6e20 7468 6520 646f 6d61 696e 2077 696c  n the domain wil
-00014e10: 6c20 6265 2063 6f6e 7665 7274 6564 2069  l be converted i
-00014e20: 6e74 6f20 5075 6e79 636f 6465 2028 6465  nto Punycode (de
-00014e30: 6669 6e65 6420 696e 0a20 2020 2052 4643  fined in.    RFC
-00014e40: 2033 3439 322c 2068 7474 703a 2f2f 746f   3492, http://to
-00014e50: 6f6c 732e 6965 7466 2e6f 7267 2f68 746d  ols.ietf.org/htm
-00014e60: 6c2f 7266 6333 3439 3229 2e20 4953 5f55  l/rfc3492). IS_U
-00014e70: 524c 2067 6f65 7320 6120 6269 7420 6265  RL goes a bit be
-00014e80: 796f 6e64 0a20 2020 2074 6865 2073 7461  yond.    the sta
-00014e90: 6e64 6172 6473 2c20 616e 6420 616c 6c6f  ndards, and allo
-00014ea0: 7773 206e 6f6e 2d55 532d 4153 4349 4920  ws non-US-ASCII 
-00014eb0: 6368 6172 6163 7465 7273 2074 6f20 6265  characters to be
-00014ec0: 2070 7265 7365 6e74 2069 6e20 7468 6520   present in the 
-00014ed0: 7061 7468 0a20 2020 2061 6e64 2071 7565  path.    and que
-00014ee0: 7279 2063 6f6d 706f 6e65 6e74 7320 6f66  ry components of
-00014ef0: 2074 6865 2055 524c 2061 7320 7765 6c6c   the URL as well
-00014f00: 2e20 5468 6573 6520 6e6f 6e2d 5553 2d41  . These non-US-A
-00014f10: 5343 4949 2063 6861 7261 6374 6572 7320  SCII characters 
-00014f20: 7769 6c6c 0a20 2020 2062 6520 6573 6361  will.    be esca
-00014f30: 7065 6420 7573 696e 6720 7468 6520 7374  ped using the st
-00014f40: 616e 6461 7264 2027 2532 3027 2074 7970  andard '%20' typ
-00014f50: 6520 7379 6e74 6178 2e20 652e 672e 2074  e syntax. e.g. t
-00014f60: 6865 2075 6e69 636f 6465 0a20 2020 2063  he unicode.    c
-00014f70: 6861 7261 6374 6572 2077 6974 6820 6865  haracter with he
-00014f80: 7820 636f 6465 2030 7834 6538 3620 7769  x code 0x4e86 wi
-00014f90: 6c6c 2062 6563 6f6d 6520 2725 3465 2538  ll become '%4e%8
-00014fa0: 3627 0a0a 2020 2020 4172 6773 3a0a 2020  6'..    Args:.  
-00014fb0: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-00014fc0: 6167 653a 2061 2073 7472 696e 672c 2074  age: a string, t
-00014fd0: 6865 2065 7272 6f72 206d 6573 7361 6765  he error message
-00014fe0: 2074 6f20 6769 7665 2074 6865 2065 6e64   to give the end
-00014ff0: 2075 7365 720a 2020 2020 2020 2020 2020   user.          
-00015000: 2020 6966 2074 6865 2055 524c 2064 6f65    if the URL doe
-00015010: 7320 6e6f 7420 7661 6c69 6461 7465 0a20  s not validate. 
-00015020: 2020 2020 2020 2061 6c6c 6f77 6564 5f73         allowed_s
-00015030: 6368 656d 6573 3a20 6120 6c69 7374 2063  chemes: a list c
-00015040: 6f6e 7461 696e 696e 6720 7374 7269 6e67  ontaining string
-00015050: 7320 6f72 204e 6f6e 652e 2045 6163 6820  s or None. Each 
-00015060: 656c 656d 656e 740a 2020 2020 2020 2020  element.        
-00015070: 2020 2020 6973 2061 2073 6368 656d 6520      is a scheme 
-00015080: 7468 6520 696e 7075 7474 6564 2055 524c  the inputted URL
-00015090: 2069 7320 616c 6c6f 7765 6420 746f 2075   is allowed to u
-000150a0: 7365 0a20 2020 2020 2020 2070 7265 7065  se.        prepe
-000150b0: 6e64 5f73 6368 656d 653a 2061 2073 7472  nd_scheme: a str
-000150c0: 696e 672c 2074 6869 7320 7363 6865 6d65  ing, this scheme
-000150d0: 2069 7320 7072 6570 656e 6465 6420 6966   is prepended if
-000150e0: 2069 7427 730a 2020 2020 2020 2020 2020   it's.          
-000150f0: 2020 6e65 6365 7373 6172 7920 746f 206d    necessary to m
-00015100: 616b 6520 7468 6520 5552 4c20 7661 6c69  ake the URL vali
-00015110: 640a 0a20 2020 2043 6f64 6520 4578 616d  d..    Code Exam
-00015120: 706c 6573 3a3a 0a0a 2020 2020 2020 2020  ples::..        
-00015130: 494e 5055 5428 5f74 7970 653d 2774 6578  INPUT(_type='tex
-00015140: 7427 2c20 5f6e 616d 653d 276e 616d 6527  t', _name='name'
-00015150: 2c20 7265 7175 6972 6573 3d49 535f 5552  , requires=IS_UR
-00015160: 4c28 2929 0a20 2020 2020 2020 203e 3e3e  L()).        >>>
-00015170: 2049 535f 5552 4c28 2928 2761 6263 2e63   IS_URL()('abc.c
-00015180: 6f6d 2729 0a20 2020 2020 2020 2028 2768  om').        ('h
-00015190: 7474 703a 2f2f 6162 632e 636f 6d27 2c20  ttp://abc.com', 
-000151a0: 4e6f 6e65 290a 0a20 2020 2020 2020 2049  None)..        I
-000151b0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
-000151c0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-000151d0: 2072 6571 7569 7265 733d 4953 5f55 524c   requires=IS_URL
-000151e0: 286d 6f64 653d 2767 656e 6572 6963 2729  (mode='generic')
-000151f0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-00015200: 5f55 524c 286d 6f64 653d 2767 656e 6572  _URL(mode='gener
-00015210: 6963 2729 2827 6162 632e 636f 6d27 290a  ic')('abc.com').
-00015220: 2020 2020 2020 2020 2827 6162 632e 636f          ('abc.co
-00015230: 6d27 2c20 4e6f 6e65 290a 0a20 2020 2020  m', None)..     
-00015240: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-00015250: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
-00015260: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
-00015270: 2072 6571 7569 7265 733d 4953 5f55 524c   requires=IS_URL
-00015280: 2861 6c6c 6f77 6564 5f73 6368 656d 6573  (allowed_schemes
-00015290: 3d5b 2768 7474 7073 275d 2c20 7072 6570  =['https'], prep
-000152a0: 656e 645f 7363 6865 6d65 3d27 6874 7470  end_scheme='http
-000152b0: 7327 2929 0a20 2020 2020 2020 203e 3e3e  s')).        >>>
-000152c0: 2049 535f 5552 4c28 616c 6c6f 7765 645f   IS_URL(allowed_
-000152d0: 7363 6865 6d65 733d 5b27 6874 7470 7327  schemes=['https'
-000152e0: 5d2c 2070 7265 7065 6e64 5f73 6368 656d  ], prepend_schem
-000152f0: 653d 2768 7474 7073 2729 2827 6874 7470  e='https')('http
-00015300: 733a 2f2f 6162 632e 636f 6d27 290a 2020  s://abc.com').  
-00015310: 2020 2020 2020 2827 6874 7470 733a 2f2f        ('https://
-00015320: 6162 632e 636f 6d27 2c20 4e6f 6e65 290a  abc.com', None).
-00015330: 0a20 2020 2020 2020 2049 4e50 5554 285f  .        INPUT(_
-00015340: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
-00015350: 6d65 3d27 6e61 6d65 272c 0a20 2020 2020  me='name',.     
-00015360: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
-00015370: 4953 5f55 524c 2870 7265 7065 6e64 5f73  IS_URL(prepend_s
-00015380: 6368 656d 653d 2768 7474 7073 2729 290a  cheme='https')).
-00015390: 2020 2020 2020 2020 3e3e 3e20 4953 5f55          >>> IS_U
-000153a0: 524c 2870 7265 7065 6e64 5f73 6368 656d  RL(prepend_schem
-000153b0: 653d 2768 7474 7073 2729 2827 6162 632e  e='https')('abc.
-000153c0: 636f 6d27 290a 2020 2020 2020 2020 2827  com').        ('
-000153d0: 6874 7470 733a 2f2f 6162 632e 636f 6d27  https://abc.com'
-000153e0: 2c20 4e6f 6e65 290a 0a20 2020 2020 2020  , None)..       
-000153f0: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
-00015400: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
-00015410: 272c 0a20 2020 2020 2020 2020 2020 2072  ',.            r
-00015420: 6571 7569 7265 733d 4953 5f55 524c 286d  equires=IS_URL(m
-00015430: 6f64 653d 2767 656e 6572 6963 272c 2061  ode='generic', a
-00015440: 6c6c 6f77 6564 5f73 6368 656d 6573 3d5b  llowed_schemes=[
-00015450: 2766 7470 7327 2c20 2768 7474 7073 275d  'ftps', 'https']
-00015460: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00015470: 2020 7072 6570 656e 645f 7363 6865 6d65    prepend_scheme
-00015480: 3d27 6874 7470 7327 2929 0a20 2020 2020  ='https')).     
-00015490: 2020 203e 3e3e 2049 535f 5552 4c28 6d6f     >>> IS_URL(mo
-000154a0: 6465 3d27 6765 6e65 7269 6327 2c20 616c  de='generic', al
-000154b0: 6c6f 7765 645f 7363 6865 6d65 733d 5b27  lowed_schemes=['
-000154c0: 6674 7073 272c 2027 6874 7470 7327 5d2c  ftps', 'https'],
-000154d0: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
-000154e0: 2768 7474 7073 2729 2827 6874 7470 733a  'https')('https:
-000154f0: 2f2f 6162 632e 636f 6d27 290a 2020 2020  //abc.com').    
-00015500: 2020 2020 2827 6874 7470 733a 2f2f 6162      ('https://ab
-00015510: 632e 636f 6d27 2c20 4e6f 6e65 290a 2020  c.com', None).  
-00015520: 2020 2020 2020 3e3e 3e20 4953 5f55 524c        >>> IS_URL
-00015530: 286d 6f64 653d 2767 656e 6572 6963 272c  (mode='generic',
-00015540: 2061 6c6c 6f77 6564 5f73 6368 656d 6573   allowed_schemes
-00015550: 3d5b 2766 7470 7327 2c20 2768 7474 7073  =['ftps', 'https
-00015560: 272c 204e 6f6e 655d 2c20 7072 6570 656e  ', None], prepen
-00015570: 645f 7363 6865 6d65 3d27 6874 7470 7327  d_scheme='https'
-00015580: 2928 2761 6263 2e63 6f6d 2729 0a20 2020  )('abc.com').   
-00015590: 2020 2020 2028 2761 6263 2e63 6f6d 272c       ('abc.com',
-000155a0: 204e 6f6e 6529 0a0a 2020 2020 4061 7574   None)..    @aut
-000155b0: 686f 723a 204a 6f6e 6174 6861 6e20 4265  hor: Jonathan Be
-000155c0: 6e6e 0a20 2020 2022 2222 0a0a 2020 2020  nn.    """..    
-000155d0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-000155e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-000155f0: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
-00015600: 653d 2245 6e74 6572 2061 2076 616c 6964  e="Enter a valid
-00015610: 2055 524c 222c 0a20 2020 2020 2020 206d   URL",.        m
-00015620: 6f64 653d 2268 7474 7022 2c0a 2020 2020  ode="http",.    
-00015630: 2020 2020 616c 6c6f 7765 645f 7363 6865      allowed_sche
-00015640: 6d65 733d 4e6f 6e65 2c0a 2020 2020 2020  mes=None,.      
-00015650: 2020 7072 6570 656e 645f 7363 6865 6d65    prepend_scheme
-00015660: 3d22 6874 7470 222c 0a20 2020 2020 2020  ="http",.       
-00015670: 2061 6c6c 6f77 6564 5f74 6c64 733d 4e6f   allowed_tlds=No
-00015680: 6e65 2c0a 2020 2020 293a 0a20 2020 2020  ne,.    ):.     
-00015690: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
-000156a0: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
-000156b0: 7373 6167 650a 2020 2020 2020 2020 7365  ssage.        se
-000156c0: 6c66 2e6d 6f64 6520 3d20 6d6f 6465 2e6c  lf.mode = mode.l
-000156d0: 6f77 6572 2829 0a20 2020 2020 2020 2069  ower().        i
-000156e0: 6620 7365 6c66 2e6d 6f64 6520 6e6f 7420  f self.mode not 
-000156f0: 696e 205b 2267 656e 6572 6963 222c 2022  in ["generic", "
-00015700: 6874 7470 225d 3a0a 2020 2020 2020 2020  http"]:.        
-00015710: 2020 2020 7261 6973 6520 5379 6e74 6178      raise Syntax
-00015720: 4572 726f 7228 2269 6e76 616c 6964 206d  Error("invalid m
-00015730: 6f64 6520 2725 7327 2069 6e20 4953 5f55  ode '%s' in IS_U
-00015740: 524c 2220 2520 7365 6c66 2e6d 6f64 6529  RL" % self.mode)
-00015750: 0a20 2020 2020 2020 2073 656c 662e 616c  .        self.al
-00015760: 6c6f 7765 645f 7363 6865 6d65 7320 3d20  lowed_schemes = 
-00015770: 616c 6c6f 7765 645f 7363 6865 6d65 730a  allowed_schemes.
-00015780: 2020 2020 2020 2020 6966 2061 6c6c 6f77          if allow
-00015790: 6564 5f74 6c64 7320 6973 204e 6f6e 653a  ed_tlds is None:
-000157a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000157b0: 662e 616c 6c6f 7765 645f 746c 6473 203d  f.allowed_tlds =
-000157c0: 206f 6666 6963 6961 6c5f 746f 705f 6c65   official_top_le
-000157d0: 7665 6c5f 646f 6d61 696e 730a 2020 2020  vel_domains.    
-000157e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000157f0: 2020 2020 2020 7365 6c66 2e61 6c6c 6f77        self.allow
-00015800: 6564 5f74 6c64 7320 3d20 616c 6c6f 7765  ed_tlds = allowe
-00015810: 645f 746c 6473 0a0a 2020 2020 2020 2020  d_tlds..        
-00015820: 6966 2073 656c 662e 616c 6c6f 7765 645f  if self.allowed_
-00015830: 7363 6865 6d65 733a 0a20 2020 2020 2020  schemes:.       
-00015840: 2020 2020 2069 6620 7072 6570 656e 645f       if prepend_
-00015850: 7363 6865 6d65 206e 6f74 2069 6e20 7365  scheme not in se
-00015860: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
-00015870: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00015880: 2020 2020 7261 6973 6520 5379 6e74 6178      raise Syntax
-00015890: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
-000158a0: 2020 2020 2020 2020 2020 2022 7072 6570             "prep
-000158b0: 656e 645f 7363 6865 6d65 3d27 2573 2720  end_scheme='%s' 
-000158c0: 6973 206e 6f74 2069 6e20 616c 6c6f 7765  is not in allowe
-000158d0: 645f 7363 6865 6d65 733d 2573 220a 2020  d_schemes=%s".  
-000158e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158f0: 2020 2520 2870 7265 7065 6e64 5f73 6368    % (prepend_sch
-00015900: 656d 652c 2073 656c 662e 616c 6c6f 7765  eme, self.allowe
-00015910: 645f 7363 6865 6d65 7329 0a20 2020 2020  d_schemes).     
-00015920: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00015930: 2020 2020 2020 2320 6966 2061 6c6c 6f77        # if allow
-00015940: 6564 5f73 6368 656d 6573 2069 7320 4e6f  ed_schemes is No
-00015950: 6e65 2c20 7468 656e 2077 6520 7769 6c6c  ne, then we will
-00015960: 2064 6566 6572 2074 6573 7469 6e67 0a20   defer testing. 
-00015970: 2020 2020 2020 2023 2070 7265 7065 6e64         # prepend
-00015980: 5f73 6368 656d 6527 7320 7661 6c69 6469  _scheme's validi
-00015990: 7479 2074 6f20 6120 7375 622d 6d65 7468  ty to a sub-meth
-000159a0: 6f64 0a0a 2020 2020 2020 2020 7365 6c66  od..        self
-000159b0: 2e70 7265 7065 6e64 5f73 6368 656d 6520  .prepend_scheme 
-000159c0: 3d20 7072 6570 656e 645f 7363 6865 6d65  = prepend_scheme
-000159d0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-000159e0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-000159f0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-00015a00: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00015a10: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00015a20: 2020 2020 2020 2076 616c 7565 3a20 6120         value: a 
-00015a30: 756e 6963 6f64 6520 6f72 2072 6567 756c  unicode or regul
-00015a40: 6172 2073 7472 696e 672c 2074 6865 2055  ar string, the U
-00015a50: 524c 2074 6f20 7661 6c69 6461 7465 0a0a  RL to validate..
-00015a60: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00015a70: 0a20 2020 2020 2020 2020 2020 2061 2028  .            a (
-00015a80: 7374 7269 6e67 2c20 7374 7269 6e67 2920  string, string) 
-00015a90: 7475 706c 652c 2077 6865 7265 2074 7570  tuple, where tup
-00015aa0: 6c65 5b30 5d20 6973 2074 6865 206d 6f64  le[0] is the mod
-00015ab0: 6966 6965 640a 2020 2020 2020 2020 2020  ified.          
-00015ac0: 2020 696e 7075 7420 7661 6c75 6520 616e    input value an
-00015ad0: 6420 7475 706c 655b 315d 2069 7320 6569  d tuple[1] is ei
-00015ae0: 7468 6572 204e 6f6e 6520 2873 7563 6365  ther None (succe
-00015af0: 7373 2129 206f 7220 7468 650a 2020 2020  ss!) or the.    
-00015b00: 2020 2020 2020 2020 7374 7269 6e67 2065          string e
-00015b10: 7272 6f72 5f6d 6573 7361 6765 2e20 5468  rror_message. Th
-00015b20: 6520 696e 7075 7420 7661 6c75 6520 7769  e input value wi
-00015b30: 6c6c 206e 6576 6572 2062 6520 6d6f 6469  ll never be modi
-00015b40: 6669 6564 2069 6e20 7468 650a 2020 2020  fied in the.    
-00015b50: 2020 2020 2020 2020 6361 7365 206f 6620          case of 
-00015b60: 616e 2065 7272 6f72 2e20 486f 7765 7665  an error. Howeve
-00015b70: 722c 2069 6620 7468 6572 6520 6973 2073  r, if there is s
-00015b80: 7563 6365 7373 2074 6865 6e20 7468 6520  uccess then the 
-00015b90: 696e 7075 7420 5552 4c0a 2020 2020 2020  input URL.      
-00015ba0: 2020 2020 2020 6d61 7920 6265 206d 6f64        may be mod
-00015bb0: 6966 6965 6420 746f 2028 3129 2070 7265  ified to (1) pre
-00015bc0: 7065 6e64 2061 2073 6368 656d 652c 2061  pend a scheme, a
-00015bd0: 6e64 2f6f 7220 2832 2920 636f 6e76 6572  nd/or (2) conver
-00015be0: 7420 610a 2020 2020 2020 2020 2020 2020  t a.            
-00015bf0: 6e6f 6e2d 636f 6d70 6c69 616e 7420 756e  non-compliant un
-00015c00: 6963 6f64 6520 5552 4c20 696e 746f 2061  icode URL into a
-00015c10: 2063 6f6d 706c 6961 6e74 2055 532d 4153   compliant US-AS
-00015c20: 4349 4920 7665 7273 696f 6e2e 0a20 2020  CII version..   
-00015c30: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00015c40: 2069 6620 7365 6c66 2e6d 6f64 6520 3d3d   if self.mode ==
-00015c50: 2022 6765 6e65 7269 6322 3a0a 2020 2020   "generic":.    
-00015c60: 2020 2020 2020 2020 7375 624d 6574 686f          subMetho
-00015c70: 6420 3d20 4953 5f47 454e 4552 4943 5f55  d = IS_GENERIC_U
-00015c80: 524c 280a 2020 2020 2020 2020 2020 2020  RL(.            
-00015c90: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
-00015ca0: 653d 7365 6c66 2e65 7272 6f72 5f6d 6573  e=self.error_mes
-00015cb0: 7361 6765 2c0a 2020 2020 2020 2020 2020  sage,.          
-00015cc0: 2020 2020 2020 616c 6c6f 7765 645f 7363        allowed_sc
-00015cd0: 6865 6d65 733d 7365 6c66 2e61 6c6c 6f77  hemes=self.allow
-00015ce0: 6564 5f73 6368 656d 6573 2c0a 2020 2020  ed_schemes,.    
-00015cf0: 2020 2020 2020 2020 2020 2020 7072 6570              prep
-00015d00: 656e 645f 7363 6865 6d65 3d73 656c 662e  end_scheme=self.
-00015d10: 7072 6570 656e 645f 7363 6865 6d65 2c0a  prepend_scheme,.
-00015d20: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00015d30: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-00015d40: 6d6f 6465 203d 3d20 2268 7474 7022 3a0a  mode == "http":.
-00015d50: 2020 2020 2020 2020 2020 2020 7375 624d              subM
-00015d60: 6574 686f 6420 3d20 4953 5f48 5454 505f  ethod = IS_HTTP_
-00015d70: 5552 4c28 0a20 2020 2020 2020 2020 2020  URL(.           
-00015d80: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
-00015d90: 6765 3d73 656c 662e 6572 726f 725f 6d65  ge=self.error_me
-00015da0: 7373 6167 652c 0a20 2020 2020 2020 2020  ssage,.         
-00015db0: 2020 2020 2020 2061 6c6c 6f77 6564 5f73         allowed_s
-00015dc0: 6368 656d 6573 3d73 656c 662e 616c 6c6f  chemes=self.allo
-00015dd0: 7765 645f 7363 6865 6d65 732c 0a20 2020  wed_schemes,.   
-00015de0: 2020 2020 2020 2020 2020 2020 2070 7265               pre
-00015df0: 7065 6e64 5f73 6368 656d 653d 7365 6c66  pend_scheme=self
-00015e00: 2e70 7265 7065 6e64 5f73 6368 656d 652c  .prepend_scheme,
-00015e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015e20: 2061 6c6c 6f77 6564 5f74 6c64 733d 7365   allowed_tlds=se
-00015e30: 6c66 2e61 6c6c 6f77 6564 5f74 6c64 732c  lf.allowed_tlds,
-00015e40: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00015e50: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00015e60: 2020 2020 2020 2020 2072 6169 7365 2053           raise S
-00015e70: 796e 7461 7845 7272 6f72 2822 696e 7661  yntaxError("inva
-00015e80: 6c69 6420 6d6f 6465 2027 2573 2720 696e  lid mode '%s' in
-00015e90: 2049 535f 5552 4c22 2025 2073 656c 662e   IS_URL" % self.
-00015ea0: 6d6f 6465 290a 0a20 2020 2020 2020 2069  mode)..        i
-00015eb0: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-00015ec0: 7565 2c20 756e 6963 6f64 6554 293a 0a20  ue, unicodeT):. 
-00015ed0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00015ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ef0: 7661 6c75 6520 3d20 756e 6963 6f64 655f  value = unicode_
-00015f00: 746f 5f61 7363 6969 5f75 726c 2876 616c  to_ascii_url(val
-00015f10: 7565 2c20 7365 6c66 2e70 7265 7065 6e64  ue, self.prepend
-00015f20: 5f73 6368 656d 6529 0a20 2020 2020 2020  _scheme).       
-00015f30: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00015f40: 7074 696f 6e20 6173 2065 3a0a 2020 2020  ption as e:.    
-00015f50: 2020 2020 2020 2020 2020 2020 2320 4966              # If
-00015f60: 2077 6520 6172 6520 6e6f 7420 6162 6c65   we are not able
-00015f70: 2074 6f20 636f 6e76 6572 7420 7468 6520   to convert the 
-00015f80: 756e 6963 6f64 6520 7572 6c20 696e 746f  unicode url into
-00015f90: 2061 0a20 2020 2020 2020 2020 2020 2020   a.             
-00015fa0: 2020 2023 2055 532d 4153 4349 4920 5552     # US-ASCII UR
-00015fb0: 4c2c 2074 6865 6e20 7468 6520 5552 4c20  L, then the URL 
-00015fc0: 6973 206e 6f74 2076 616c 6964 0a20 2020  is not valid.   
-00015fd0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00015fe0: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
-00015ff0: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
-00016000: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
-00016010: 7373 6167 6529 290a 2020 2020 2020 2020  ssage)).        
-00016020: 7265 7475 726e 2073 7562 4d65 7468 6f64  return subMethod
-00016030: 2e76 616c 6964 6174 6528 7661 6c75 652c  .validate(value,
-00016040: 2072 6563 6f72 645f 6964 290a 0a0a 636c   record_id)...cl
-00016050: 6173 7320 4953 5f54 494d 4528 5661 6c69  ass IS_TIME(Vali
-00016060: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
-00016070: 2020 2020 4578 616d 706c 653a 0a20 2020      Example:.   
-00016080: 2020 2020 2055 7365 2061 733a 3a0a 0a20       Use as::.. 
-00016090: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-000160a0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-000160b0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-000160c0: 7569 7265 733d 4953 5f54 494d 4528 2929  uires=IS_TIME())
-000160d0: 0a0a 2020 2020 756e 6465 7273 7461 6e64  ..    understand
-000160e0: 7320 7468 6520 666f 6c6c 6f77 696e 6720  s the following 
-000160f0: 666f 726d 6174 730a 2020 2020 6868 3a6d  formats.    hh:m
-00016100: 6d3a 7373 205b 616d 2f70 6d5d 0a20 2020  m:ss [am/pm].   
-00016110: 2068 683a 6d6d 205b 616d 2f70 6d5d 0a20   hh:mm [am/pm]. 
-00016120: 2020 2068 6820 5b61 6d2f 706d 5d0a 0a20     hh [am/pm].. 
-00016130: 2020 205b 616d 2f70 6d5d 2069 7320 6f70     [am/pm] is op
-00016140: 7469 6f6e 616c 2c20 273a 2720 6361 6e20  tional, ':' can 
-00016150: 6265 2072 6570 6c61 6365 6420 6279 2061  be replaced by a
-00016160: 6e79 206f 7468 6572 206e 6f6e 2d73 7061  ny other non-spa
-00016170: 6365 206e 6f6e 2d64 6967 6974 3a3a 0a0a  ce non-digit::..
-00016180: 2020 2020 2020 2020 3e3e 3e20 4953 5f54          >>> IS_T
-00016190: 494d 4528 2928 2732 313a 3330 2729 0a20  IME()('21:30'). 
-000161a0: 2020 2020 2020 2028 6461 7465 7469 6d65         (datetime
-000161b0: 2e74 696d 6528 3231 2c20 3330 292c 204e  .time(21, 30), N
-000161c0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-000161d0: 2049 535f 5449 4d45 2829 2827 3231 2d33   IS_TIME()('21-3
-000161e0: 3027 290a 2020 2020 2020 2020 2864 6174  0').        (dat
-000161f0: 6574 696d 652e 7469 6d65 2832 312c 2033  etime.time(21, 3
-00016200: 3029 2c20 4e6f 6e65 290a 2020 2020 2020  0), None).      
-00016210: 2020 3e3e 3e20 4953 5f54 494d 4528 2928    >>> IS_TIME()(
-00016220: 2732 312e 3330 2729 0a20 2020 2020 2020  '21.30').       
-00016230: 2028 6461 7465 7469 6d65 2e74 696d 6528   (datetime.time(
-00016240: 3231 2c20 3330 292c 204e 6f6e 6529 0a20  21, 30), None). 
-00016250: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
-00016260: 4d45 2829 2827 3231 3a33 303a 3539 2729  ME()('21:30:59')
-00016270: 0a20 2020 2020 2020 2028 6461 7465 7469  .        (dateti
-00016280: 6d65 2e74 696d 6528 3231 2c20 3330 2c20  me.time(21, 30, 
-00016290: 3539 292c 204e 6f6e 6529 0a20 2020 2020  59), None).     
-000162a0: 2020 203e 3e3e 2049 535f 5449 4d45 2829     >>> IS_TIME()
-000162b0: 2827 353a 3330 2729 0a20 2020 2020 2020  ('5:30').       
-000162c0: 2028 6461 7465 7469 6d65 2e74 696d 6528   (datetime.time(
-000162d0: 352c 2033 3029 2c20 4e6f 6e65 290a 2020  5, 30), None).  
-000162e0: 2020 2020 2020 3e3e 3e20 4953 5f54 494d        >>> IS_TIM
-000162f0: 4528 2928 2735 3a33 3020 616d 2729 0a20  E()('5:30 am'). 
-00016300: 2020 2020 2020 2028 6461 7465 7469 6d65         (datetime
-00016310: 2e74 696d 6528 352c 2033 3029 2c20 4e6f  .time(5, 30), No
-00016320: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-00016330: 4953 5f54 494d 4528 2928 2735 3a33 3020  IS_TIME()('5:30 
-00016340: 706d 2729 0a20 2020 2020 2020 2028 6461  pm').        (da
-00016350: 7465 7469 6d65 2e74 696d 6528 3137 2c20  tetime.time(17, 
-00016360: 3330 292c 204e 6f6e 6529 0a20 2020 2020  30), None).     
-00016370: 2020 203e 3e3e 2049 535f 5449 4d45 2829     >>> IS_TIME()
-00016380: 2827 353a 3330 2077 6861 7465 7665 7227  ('5:30 whatever'
-00016390: 290a 2020 2020 2020 2020 2827 353a 3330  ).        ('5:30
-000163a0: 2077 6861 7465 7665 7227 2c20 2765 6e74   whatever', 'ent
-000163b0: 6572 2074 696d 6520 6173 2068 683a 6d6d  er time as hh:mm
-000163c0: 3a73 7320 2873 6563 6f6e 6473 2c20 616d  :ss (seconds, am
-000163d0: 2c20 706d 206f 7074 696f 6e61 6c29 2729  , pm optional)')
-000163e0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-000163f0: 5449 4d45 2829 2827 353a 3330 2032 3027  TIME()('5:30 20'
-00016400: 290a 2020 2020 2020 2020 2827 353a 3330  ).        ('5:30
-00016410: 2032 3027 2c20 2765 6e74 6572 2074 696d   20', 'enter tim
-00016420: 6520 6173 2068 683a 6d6d 3a73 7320 2873  e as hh:mm:ss (s
-00016430: 6563 6f6e 6473 2c20 616d 2c20 706d 206f  econds, am, pm o
-00016440: 7074 696f 6e61 6c29 2729 0a20 2020 2020  ptional)').     
-00016450: 2020 203e 3e3e 2049 535f 5449 4d45 2829     >>> IS_TIME()
-00016460: 2827 3234 3a33 3027 290a 2020 2020 2020  ('24:30').      
-00016470: 2020 2827 3234 3a33 3027 2c20 2765 6e74    ('24:30', 'ent
-00016480: 6572 2074 696d 6520 6173 2068 683a 6d6d  er time as hh:mm
-00016490: 3a73 7320 2873 6563 6f6e 6473 2c20 616d  :ss (seconds, am
-000164a0: 2c20 706d 206f 7074 696f 6e61 6c29 2729  , pm optional)')
-000164b0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-000164c0: 5449 4d45 2829 2827 3231 3a36 3027 290a  TIME()('21:60').
-000164d0: 2020 2020 2020 2020 2827 3231 3a36 3027          ('21:60'
-000164e0: 2c20 2765 6e74 6572 2074 696d 6520 6173  , 'enter time as
-000164f0: 2068 683a 6d6d 3a73 7320 2873 6563 6f6e   hh:mm:ss (secon
-00016500: 6473 2c20 616d 2c20 706d 206f 7074 696f  ds, am, pm optio
-00016510: 6e61 6c29 2729 0a20 2020 2020 2020 203e  nal)').        >
-00016520: 3e3e 2049 535f 5449 4d45 2829 2827 3231  >> IS_TIME()('21
-00016530: 3a33 303a 3a27 290a 2020 2020 2020 2020  :30::').        
-00016540: 2827 3231 3a33 303a 3a27 2c20 2765 6e74  ('21:30::', 'ent
-00016550: 6572 2074 696d 6520 6173 2068 683a 6d6d  er time as hh:mm
-00016560: 3a73 7320 2873 6563 6f6e 6473 2c20 616d  :ss (seconds, am
-00016570: 2c20 706d 206f 7074 696f 6e61 6c29 2729  , pm optional)')
-00016580: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00016590: 5449 4d45 2829 2827 2729 0a20 2020 2020  TIME()('').     
-000165a0: 2020 2028 2727 2c20 2765 6e74 6572 2074     ('', 'enter t
-000165b0: 696d 6520 6173 2068 683a 6d6d 3a73 7320  ime as hh:mm:ss 
-000165c0: 2873 6563 6f6e 6473 2c20 616d 2c20 706d  (seconds, am, pm
-000165d0: 206f 7074 696f 6e61 6c29 2729 c3b9 0a0a   optional)')....
-000165e0: 2020 2020 2222 220a 0a20 2020 2052 4547      """..    REG
-000165f0: 4558 5f54 494d 4520 3d20 2228 283f 503c  EX_TIME = "((?P<
-00016600: 683e 5b30 2d39 5d2b 2929 285b 5e30 2d39  h>[0-9]+))([^0-9
-00016610: 205d 2b28 3f50 3c6d 3e5b 302d 3920 5d2b   ]+(?P<m>[0-9 ]+
-00016620: 2929 3f28 5b5e 302d 3961 7020 5d2b 283f  ))?([^0-9ap ]+(?
-00016630: 503c 733e 5b30 2d39 5d2a 2929 3f28 283f  P<s>[0-9]*))?((?
-00016640: 503c 643e 5b61 705d 6d29 293f 220a 0a20  P<d>[ap]m))?".. 
-00016650: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00016660: 0a20 2020 2020 2020 2073 656c 662c 2065  .        self, e
-00016670: 7272 6f72 5f6d 6573 7361 6765 3d22 456e  rror_message="En
-00016680: 7465 7220 7469 6d65 2061 7320 6868 3a6d  ter time as hh:m
-00016690: 6d3a 7373 2028 7365 636f 6e64 732c 2061  m:ss (seconds, a
-000166a0: 6d2c 2070 6d20 6f70 7469 6f6e 616c 2922  m, pm optional)"
-000166b0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-000166c0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-000166d0: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
-000166e0: 6765 0a0a 2020 2020 6465 6620 7661 6c69  ge..    def vali
-000166f0: 6461 7465 2873 656c 662c 2076 616c 7565  date(self, value
-00016700: 2c20 7265 636f 7264 5f69 643d 4e6f 6e65  , record_id=None
-00016710: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
-00016720: 2020 2020 2020 2020 2020 2020 6976 616c              ival
-00016730: 7565 203d 2076 616c 7565 0a20 2020 2020  ue = value.     
-00016740: 2020 2020 2020 2076 616c 7565 203d 2072         value = r
-00016750: 652e 6d61 7463 6828 7365 6c66 2e52 4547  e.match(self.REG
-00016760: 4558 5f54 494d 452c 2076 616c 7565 2e6c  EX_TIME, value.l
-00016770: 6f77 6572 2829 290a 2020 2020 2020 2020  ower()).        
-00016780: 2020 2020 2868 2c20 6d2c 2073 2920 3d20      (h, m, s) = 
-00016790: 2869 6e74 2876 616c 7565 2e67 726f 7570  (int(value.group
-000167a0: 2822 6822 2929 2c20 302c 2030 290a 2020  ("h")), 0, 0).  
-000167b0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-000167c0: 2076 616c 7565 2e67 726f 7570 2822 6d22   value.group("m"
-000167d0: 2920 6973 204e 6f6e 653a 0a20 2020 2020  ) is None:.     
-000167e0: 2020 2020 2020 2020 2020 206d 203d 2069             m = i
-000167f0: 6e74 2876 616c 7565 2e67 726f 7570 2822  nt(value.group("
-00016800: 6d22 2929 0a20 2020 2020 2020 2020 2020  m")).           
-00016810: 2069 6620 6e6f 7420 7661 6c75 652e 6772   if not value.gr
-00016820: 6f75 7028 2273 2229 2069 7320 4e6f 6e65  oup("s") is None
-00016830: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016840: 2020 7320 3d20 696e 7428 7661 6c75 652e    s = int(value.
-00016850: 6772 6f75 7028 2273 2229 290a 2020 2020  group("s")).    
-00016860: 2020 2020 2020 2020 6966 2076 616c 7565          if value
-00016870: 2e67 726f 7570 2822 6422 2920 3d3d 2022  .group("d") == "
-00016880: 706d 2220 616e 6420 3020 3c20 6820 3c20  pm" and 0 < h < 
-00016890: 3132 3a0a 2020 2020 2020 2020 2020 2020  12:.            
-000168a0: 2020 2020 6820 2b3d 2031 320a 2020 2020      h += 12.    
-000168b0: 2020 2020 2020 2020 6966 2076 616c 7565          if value
-000168c0: 2e67 726f 7570 2822 6422 2920 3d3d 2022  .group("d") == "
-000168d0: 616d 2220 616e 6420 6820 3d3d 2031 323a  am" and h == 12:
-000168e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000168f0: 2068 203d 2030 0a20 2020 2020 2020 2020   h = 0.         
-00016900: 2020 2069 6620 6e6f 7420 2868 2069 6e20     if not (h in 
-00016910: 7261 6e67 6528 3234 2920 616e 6420 6d20  range(24) and m 
-00016920: 696e 2072 616e 6765 2836 3029 2061 6e64  in range(60) and
-00016930: 2073 2069 6e20 7261 6e67 6528 3630 2929   s in range(60))
-00016940: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016950: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00016960: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-00016970: 2020 2020 2020 2020 2248 6f75 7273 206f          "Hours o
-00016980: 7220 6d69 6e75 7465 7320 6f72 2073 6563  r minutes or sec
-00016990: 6f6e 6473 2061 7265 206f 7574 7369 6465  onds are outside
-000169a0: 206f 6620 616c 6c6f 7765 6420 7261 6e67   of allowed rang
-000169b0: 6522 0a20 2020 2020 2020 2020 2020 2020  e".             
-000169c0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000169d0: 2076 616c 7565 203d 2064 6174 6574 696d   value = datetim
-000169e0: 652e 7469 6d65 2868 2c20 6d2c 2073 290a  e.time(h, m, s).
-000169f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00016a00: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
-00016a10: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00016a20: 6e3a 0a20 2020 2020 2020 2020 2020 2072  n:.            r
-00016a30: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00016a40: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-00016a50: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00016a60: 6d65 7373 6167 6529 290a 0a0a 2320 4120  message))...# A 
-00016a70: 5554 4320 636c 6173 732e 0a63 6c61 7373  UTC class..class
-00016a80: 2055 5443 2864 6174 6574 696d 652e 747a   UTC(datetime.tz
-00016a90: 696e 666f 293a 0a20 2020 2022 2222 5554  info):.    """UT
-00016aa0: 4322 2222 0a0a 2020 2020 5a45 524f 203d  C"""..    ZERO =
-00016ab0: 2064 6174 6574 696d 652e 7469 6d65 6465   datetime.timede
-00016ac0: 6c74 6128 3029 0a0a 2020 2020 6465 6620  lta(0)..    def 
-00016ad0: 7574 636f 6666 7365 7428 7365 6c66 2c20  utcoffset(self, 
-00016ae0: 6474 293a 0a20 2020 2020 2020 2072 6574  dt):.        ret
-00016af0: 7572 6e20 5554 432e 5a45 524f 0a0a 2020  urn UTC.ZERO..  
-00016b00: 2020 6465 6620 747a 6e61 6d65 2873 656c    def tzname(sel
-00016b10: 662c 2064 7429 3a0a 2020 2020 2020 2020  f, dt):.        
-00016b20: 7265 7475 726e 2022 5554 4322 0a0a 2020  return "UTC"..  
-00016b30: 2020 6465 6620 6473 7428 7365 6c66 2c20    def dst(self, 
-00016b40: 6474 293a 0a20 2020 2020 2020 2072 6574  dt):.        ret
-00016b50: 7572 6e20 5554 432e 5a45 524f 0a0a 0a75  urn UTC.ZERO...u
-00016b60: 7463 203d 2055 5443 2829 0a0a 0a63 6c61  tc = UTC()...cla
-00016b70: 7373 2049 535f 4441 5445 2856 616c 6964  ss IS_DATE(Valid
-00016b80: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
-00016b90: 2020 2045 7861 6d70 6c65 733a 0a20 2020     Examples:.   
-00016ba0: 2020 2020 2055 7365 2061 733a 3a0a 0a20       Use as::.. 
-00016bb0: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-00016bc0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-00016bd0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-00016be0: 7569 7265 733d 4953 5f44 4154 4528 2929  uires=IS_DATE())
-00016bf0: 0a0a 2020 2020 6461 7465 2068 6173 2074  ..    date has t
-00016c00: 6f20 6265 2069 6e20 7468 6520 4953 4f38  o be in the ISO8
-00016c10: 3936 3020 666f 726d 6174 2059 5959 592d  960 format YYYY-
-00016c20: 4d4d 2d44 440a 2020 2020 2222 220a 0a20  MM-DD.    """.. 
-00016c30: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00016c40: 7365 6c66 2c20 666f 726d 6174 3d22 2559  self, format="%Y
-00016c50: 2d25 6d2d 2564 222c 2065 7272 6f72 5f6d  -%m-%d", error_m
-00016c60: 6573 7361 6765 3d22 456e 7465 7220 6461  essage="Enter da
-00016c70: 7465 2061 7320 2528 666f 726d 6174 2973  te as %(format)s
-00016c80: 2229 3a0a 2020 2020 2020 2020 7365 6c66  "):.        self
-00016c90: 2e66 6f72 6d61 7420 3d20 7365 6c66 2e74  .format = self.t
-00016ca0: 7261 6e73 6c61 746f 7228 666f 726d 6174  ranslator(format
-00016cb0: 290a 2020 2020 2020 2020 7365 6c66 2e65  ).        self.e
-00016cc0: 7272 6f72 5f6d 6573 7361 6765 203d 2073  rror_message = s
-00016cd0: 7472 2865 7272 6f72 5f6d 6573 7361 6765  tr(error_message
-00016ce0: 290a 2020 2020 2020 2020 7365 6c66 2e65  ).        self.e
-00016cf0: 7874 7265 6d65 7320 3d20 7b7d 0a0a 2020  xtremes = {}..  
-00016d00: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00016d10: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00016d20: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00016d30: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00016d40: 6365 2876 616c 7565 2c20 6461 7465 7469  ce(value, dateti
-00016d50: 6d65 2e64 6174 6529 3a0a 2020 2020 2020  me.date):.      
-00016d60: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00016d70: 7565 0a20 2020 2020 2020 2074 7279 3a0a  ue.        try:.
-00016d80: 2020 2020 2020 2020 2020 2020 2879 2c20              (y, 
-00016d90: 6d2c 2064 2c20 6868 2c20 6d6d 2c20 7373  m, d, hh, mm, ss
-00016da0: 2c20 7430 2c20 7431 2c20 7432 2920 3d20  , t0, t1, t2) = 
-00016db0: 7469 6d65 2e73 7472 7074 696d 6528 7661  time.strptime(va
-00016dc0: 6c75 652c 2073 7472 2873 656c 662e 666f  lue, str(self.fo
-00016dd0: 726d 6174 2929 0a20 2020 2020 2020 2020  rmat)).         
-00016de0: 2020 2076 616c 7565 203d 2064 6174 6574     value = datet
-00016df0: 696d 652e 6461 7465 2879 2c20 6d2c 2064  ime.date(y, m, d
-00016e00: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00016e10: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
-00016e20: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00016e30: 2020 2020 2020 2073 656c 662e 6578 7472         self.extr
-00016e40: 656d 6573 2e75 7064 6174 6528 4953 5f44  emes.update(IS_D
-00016e50: 4154 4554 494d 452e 6e69 6365 2873 656c  ATETIME.nice(sel
-00016e60: 662e 666f 726d 6174 2929 0a20 2020 2020  f.format)).     
-00016e70: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-00016e80: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
-00016e90: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
-00016ea0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
-00016eb0: 2025 2073 656c 662e 6578 7472 656d 6573   % self.extremes
-00016ec0: 290a 0a20 2020 2064 6566 2066 6f72 6d61  )..    def forma
-00016ed0: 7474 6572 2873 656c 662c 2076 616c 7565  tter(self, value
-00016ee0: 293a 0a20 2020 2020 2020 2069 6620 7661  ):.        if va
-00016ef0: 6c75 6520 6973 204e 6f6e 6520 6f72 2076  lue is None or v
-00016f00: 616c 7565 203d 3d20 2222 3a0a 2020 2020  alue == "":.    
-00016f10: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00016f20: 6f6e 650a 2020 2020 2020 2020 666f 726d  one.        form
-00016f30: 6174 203d 2073 656c 662e 666f 726d 6174  at = self.format
-00016f40: 0a20 2020 2020 2020 2079 6561 7220 3d20  .        year = 
-00016f50: 7661 6c75 652e 7965 6172 0a20 2020 2020  value.year.     
-00016f60: 2020 2079 203d 2022 252e 3469 2220 2520     y = "%.4i" % 
-00016f70: 7965 6172 0a20 2020 2020 2020 2066 6f72  year.        for
-00016f80: 6d61 7420 3d20 666f 726d 6174 2e72 6570  mat = format.rep
-00016f90: 6c61 6365 2822 2579 222c 2079 5b2d 323a  lace("%y", y[-2:
-00016fa0: 5d29 0a20 2020 2020 2020 2066 6f72 6d61  ]).        forma
-00016fb0: 7420 3d20 666f 726d 6174 2e72 6570 6c61  t = format.repla
-00016fc0: 6365 2822 2559 222c 2079 290a 2020 2020  ce("%Y", y).    
-00016fd0: 2020 2020 6966 2079 6561 7220 3c20 3139      if year < 19
-00016fe0: 3030 3a0a 2020 2020 2020 2020 2020 2020  00:.            
-00016ff0: 7965 6172 203d 2032 3030 300a 2020 2020  year = 2000.    
-00017000: 2020 2020 6420 3d20 6461 7465 7469 6d65      d = datetime
-00017010: 2e64 6174 6528 7965 6172 2c20 7661 6c75  .date(year, valu
-00017020: 652e 6d6f 6e74 682c 2076 616c 7565 2e64  e.month, value.d
-00017030: 6179 290a 2020 2020 2020 2020 7265 7475  ay).        retu
-00017040: 726e 2064 2e73 7472 6674 696d 6528 666f  rn d.strftime(fo
-00017050: 726d 6174 290a 0a0a 636c 6173 7320 4953  rmat)...class IS
-00017060: 5f44 4154 4554 494d 4528 5661 6c69 6461  _DATETIME(Valida
-00017070: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
-00017080: 2020 4578 616d 706c 6573 3a0a 2020 2020    Examples:.    
-00017090: 2020 2020 5573 6520 6173 3a3a 0a0a 2020      Use as::..  
-000170a0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
-000170b0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
-000170c0: 616d 653d 276e 616d 6527 2c20 7265 7175  ame='name', requ
-000170d0: 6972 6573 3d49 535f 4441 5445 5449 4d45  ires=IS_DATETIME
-000170e0: 2829 290a 0a20 2020 2064 6174 6574 696d  ())..    datetim
-000170f0: 6520 6861 7320 746f 2062 6520 696e 2074  e has to be in t
-00017100: 6865 2049 534f 3839 3630 2066 6f72 6d61  he ISO8960 forma
-00017110: 7420 5959 5959 2d4d 4d2d 4444 2068 683a  t YYYY-MM-DD hh:
-00017120: 6d6d 3a73 730a 2020 2020 7469 6d65 7a6f  mm:ss.    timezo
-00017130: 6d65 206d 7573 7420 6265 204e 6f6e 6520  me must be None 
-00017140: 6f72 2061 2070 7974 7a2e 7469 6d65 7a6f  or a pytz.timezo
-00017150: 6e65 2822 416d 6572 6963 612f 4368 6963  ne("America/Chic
-00017160: 6167 6f22 2920 6f62 6a65 6374 0a20 2020  ago") object.   
-00017170: 2022 2222 0a0a 2020 2020 6973 6f64 6174   """..    isodat
-00017180: 6574 696d 6520 3d20 2225 592d 256d 2d25  etime = "%Y-%m-%
-00017190: 6420 2548 3a25 4d3a 2553 220a 0a20 2020  d %H:%M:%S"..   
-000171a0: 2040 7374 6174 6963 6d65 7468 6f64 0a20   @staticmethod. 
-000171b0: 2020 2064 6566 206e 6963 6528 666f 726d     def nice(form
-000171c0: 6174 293a 0a20 2020 2020 2020 2063 6f64  at):.        cod
-000171d0: 6520 3d20 280a 2020 2020 2020 2020 2020  e = (.          
-000171e0: 2020 2822 2559 222c 2022 3139 3633 2229    ("%Y", "1963")
-000171f0: 2c0a 2020 2020 2020 2020 2020 2020 2822  ,.            ("
-00017200: 2579 222c 2022 3633 2229 2c0a 2020 2020  %y", "63"),.    
-00017210: 2020 2020 2020 2020 2822 2564 222c 2022          ("%d", "
-00017220: 3238 2229 2c0a 2020 2020 2020 2020 2020  28"),.          
-00017230: 2020 2822 256d 222c 2022 3038 2229 2c0a    ("%m", "08"),.
-00017240: 2020 2020 2020 2020 2020 2020 2822 2562              ("%b
-00017250: 222c 2022 4175 6722 292c 0a20 2020 2020  ", "Aug"),.     
-00017260: 2020 2020 2020 2028 2225 4222 2c20 2241         ("%B", "A
-00017270: 7567 7573 7422 292c 0a20 2020 2020 2020  ugust"),.       
-00017280: 2020 2020 2028 2225 4822 2c20 2231 3422       ("%H", "14"
-00017290: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
-000172a0: 2225 4922 2c20 2230 3222 292c 0a20 2020  "%I", "02"),.   
-000172b0: 2020 2020 2020 2020 2028 2225 7022 2c20           ("%p", 
-000172c0: 2250 4d22 292c 0a20 2020 2020 2020 2020  "PM"),.         
-000172d0: 2020 2028 2225 4d22 2c20 2233 3022 292c     ("%M", "30"),
-000172e0: 0a20 2020 2020 2020 2020 2020 2028 2225  .            ("%
-000172f0: 5322 2c20 2235 3922 292c 0a20 2020 2020  S", "59"),.     
-00017300: 2020 2029 0a20 2020 2020 2020 2066 6f72     ).        for
-00017310: 2061 2c20 6220 696e 2063 6f64 653a 0a20   a, b in code:. 
-00017320: 2020 2020 2020 2020 2020 2066 6f72 6d61             forma
-00017330: 7420 3d20 666f 726d 6174 2e72 6570 6c61  t = format.repla
-00017340: 6365 2861 2c20 6229 0a20 2020 2020 2020  ce(a, b).       
-00017350: 2072 6574 7572 6e20 6469 6374 2866 6f72   return dict(for
-00017360: 6d61 743d 666f 726d 6174 290a 0a20 2020  mat=format)..   
-00017370: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
-00017380: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00017390: 2020 2020 2066 6f72 6d61 743d 2225 592d       format="%Y-
-000173a0: 256d 2d25 6420 2548 3a25 4d3a 2553 222c  %m-%d %H:%M:%S",
-000173b0: 0a20 2020 2020 2020 2065 7272 6f72 5f6d  .        error_m
-000173c0: 6573 7361 6765 3d22 456e 7465 7220 6461  essage="Enter da
-000173d0: 7465 2061 6e64 2074 696d 6520 6173 2025  te and time as %
-000173e0: 2866 6f72 6d61 7429 7322 2c0a 2020 2020  (format)s",.    
-000173f0: 2020 2020 7469 6d65 7a6f 6e65 3d4e 6f6e      timezone=Non
-00017400: 652c 0a20 2020 2029 3a0a 2020 2020 2020  e,.    ):.      
-00017410: 2020 7365 6c66 2e66 6f72 6d61 7420 3d20    self.format = 
-00017420: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-00017430: 666f 726d 6174 290a 2020 2020 2020 2020  format).        
-00017440: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-00017450: 6765 203d 2073 7472 2865 7272 6f72 5f6d  ge = str(error_m
-00017460: 6573 7361 6765 290a 2020 2020 2020 2020  essage).        
-00017470: 7365 6c66 2e65 7874 7265 6d65 7320 3d20  self.extremes = 
-00017480: 7b7d 0a20 2020 2020 2020 2073 656c 662e  {}.        self.
-00017490: 7469 6d65 7a6f 6e65 203d 2074 696d 657a  timezone = timez
-000174a0: 6f6e 650a 0a20 2020 2064 6566 2076 616c  one..    def val
-000174b0: 6964 6174 6528 7365 6c66 2c20 7661 6c75  idate(self, valu
-000174c0: 652c 2072 6563 6f72 645f 6964 3d4e 6f6e  e, record_id=Non
-000174d0: 6529 3a0a 2020 2020 2020 2020 6966 2069  e):.        if i
-000174e0: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
-000174f0: 2064 6174 6574 696d 652e 6461 7465 7469   datetime.dateti
-00017500: 6d65 293a 0a20 2020 2020 2020 2020 2020  me):.           
-00017510: 2072 6574 7572 6e20 7661 6c75 650a 2020   return value.  
-00017520: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00017530: 2020 2020 2020 2069 6620 7365 6c66 2e66         if self.f
-00017540: 6f72 6d61 7420 3d3d 2073 656c 662e 6973  ormat == self.is
-00017550: 6f64 6174 6574 696d 653a 0a20 2020 2020  odatetime:.     
-00017560: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00017570: 203d 2076 616c 7565 2e72 6570 6c61 6365   = value.replace
-00017580: 2822 5422 2c20 2220 2229 0a20 2020 2020  ("T", " ").     
-00017590: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-000175a0: 6e28 7661 6c75 6529 203d 3d20 3136 3a0a  n(value) == 16:.
-000175b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000175c0: 2020 2020 7661 6c75 6520 2b3d 2022 3a30      value += ":0
-000175d0: 3022 0a20 2020 2020 2020 2020 2020 2028  0".            (
-000175e0: 792c 206d 2c20 642c 2068 682c 206d 6d2c  y, m, d, hh, mm,
-000175f0: 2073 732c 2074 302c 2074 312c 2074 3229   ss, t0, t1, t2)
-00017600: 203d 2074 696d 652e 7374 7270 7469 6d65   = time.strptime
-00017610: 2876 616c 7565 2c20 7374 7228 7365 6c66  (value, str(self
-00017620: 2e66 6f72 6d61 7429 290a 2020 2020 2020  .format)).      
-00017630: 2020 2020 2020 7661 6c75 6520 3d20 6461        value = da
-00017640: 7465 7469 6d65 2e64 6174 6574 696d 6528  tetime.datetime(
-00017650: 792c 206d 2c20 642c 2068 682c 206d 6d2c  y, m, d, hh, mm,
-00017660: 2073 7329 0a20 2020 2020 2020 2020 2020   ss).           
-00017670: 2069 6620 7365 6c66 2e74 696d 657a 6f6e   if self.timezon
-00017680: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00017690: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000176a0: 2054 4f44 4f3a 2068 7474 7073 3a2f 2f67   TODO: https://g
-000176b0: 6974 6875 622e 636f 6d2f 7765 6232 7079  ithub.com/web2py
-000176c0: 2f77 6562 3270 792f 6973 7375 6573 2f31  /web2py/issues/1
-000176d0: 3039 3420 2874 656d 706f 7261 7279 2073  094 (temporary s
-000176e0: 6f6c 7574 696f 6e29 0a20 2020 2020 2020  olution).       
-000176f0: 2020 2020 2020 2020 2076 616c 7565 203d           value =
-00017700: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00017710: 2020 2020 2020 2073 656c 662e 7469 6d65         self.time
-00017720: 7a6f 6e65 2e6c 6f63 616c 697a 6528 7661  zone.localize(va
-00017730: 6c75 6529 2e61 7374 696d 657a 6f6e 6528  lue).astimezone(
-00017740: 7574 6329 2e72 6570 6c61 6365 2874 7a69  utc).replace(tzi
-00017750: 6e66 6f3d 4e6f 6e65 290a 2020 2020 2020  nfo=None).      
-00017760: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00017770: 2020 2020 2020 2020 7265 7475 726e 2076          return v
-00017780: 616c 7565 0a20 2020 2020 2020 2065 7863  alue.        exc
-00017790: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-000177a0: 2073 656c 662e 6578 7472 656d 6573 2e75   self.extremes.u
-000177b0: 7064 6174 6528 4953 5f44 4154 4554 494d  pdate(IS_DATETIM
-000177c0: 452e 6e69 6365 2873 656c 662e 666f 726d  E.nice(self.form
-000177d0: 6174 2929 0a20 2020 2020 2020 2020 2020  at)).           
-000177e0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-000177f0: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
-00017800: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
-00017810: 725f 6d65 7373 6167 6529 2025 2073 656c  r_message) % sel
-00017820: 662e 6578 7472 656d 6573 290a 0a20 2020  f.extremes)..   
-00017830: 2064 6566 2066 6f72 6d61 7474 6572 2873   def formatter(s
-00017840: 656c 662c 2076 616c 7565 293a 0a20 2020  elf, value):.   
-00017850: 2020 2020 2069 6620 7661 6c75 6520 6973       if value is
-00017860: 204e 6f6e 6520 6f72 2076 616c 7565 203d   None or value =
-00017870: 3d20 2222 3a0a 2020 2020 2020 2020 2020  = "":.          
-00017880: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
-00017890: 2020 2020 2020 666f 726d 6174 203d 2073        format = s
-000178a0: 656c 662e 666f 726d 6174 0a20 2020 2020  elf.format.     
-000178b0: 2020 2079 6561 7220 3d20 7661 6c75 652e     year = value.
-000178c0: 7965 6172 0a20 2020 2020 2020 2079 203d  year.        y =
-000178d0: 2022 252e 3469 2220 2520 7965 6172 0a20   "%.4i" % year. 
-000178e0: 2020 2020 2020 2066 6f72 6d61 7420 3d20         format = 
-000178f0: 666f 726d 6174 2e72 6570 6c61 6365 2822  format.replace("
-00017900: 2579 222c 2079 5b2d 323a 5d29 0a20 2020  %y", y[-2:]).   
-00017910: 2020 2020 2066 6f72 6d61 7420 3d20 666f       format = fo
-00017920: 726d 6174 2e72 6570 6c61 6365 2822 2559  rmat.replace("%Y
-00017930: 222c 2079 290a 2020 2020 2020 2020 6966  ", y).        if
-00017940: 2079 6561 7220 3c20 3139 3030 3a0a 2020   year < 1900:.  
-00017950: 2020 2020 2020 2020 2020 7965 6172 203d            year =
-00017960: 2032 3030 300a 2020 2020 2020 2020 6420   2000.        d 
-00017970: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
-00017980: 696d 6528 0a20 2020 2020 2020 2020 2020  ime(.           
-00017990: 2079 6561 722c 2076 616c 7565 2e6d 6f6e   year, value.mon
-000179a0: 7468 2c20 7661 6c75 652e 6461 792c 2076  th, value.day, v
-000179b0: 616c 7565 2e68 6f75 722c 2076 616c 7565  alue.hour, value
-000179c0: 2e6d 696e 7574 652c 2076 616c 7565 2e73  .minute, value.s
-000179d0: 6563 6f6e 640a 2020 2020 2020 2020 290a  econd.        ).
-000179e0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000179f0: 7469 6d65 7a6f 6e65 2069 7320 6e6f 7420  timezone is not 
-00017a00: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00017a10: 2020 6420 3d20 642e 7265 706c 6163 6528    d = d.replace(
-00017a20: 747a 696e 666f 3d75 7463 292e 6173 7469  tzinfo=utc).asti
-00017a30: 6d65 7a6f 6e65 2873 656c 662e 7469 6d65  mezone(self.time
-00017a40: 7a6f 6e65 290a 2020 2020 2020 2020 7265  zone).        re
-00017a50: 7475 726e 2064 2e73 7472 6674 696d 6528  turn d.strftime(
-00017a60: 666f 726d 6174 290a 0a0a 636c 6173 7320  format)...class 
-00017a70: 4953 5f44 4154 455f 494e 5f52 414e 4745  IS_DATE_IN_RANGE
-00017a80: 2849 535f 4441 5445 293a 0a20 2020 2022  (IS_DATE):.    "
-00017a90: 2222 0a20 2020 2045 7861 6d70 6c65 733a  "".    Examples:
-00017aa0: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
-00017ab0: 3a0a 0a20 2020 2020 2020 2020 2020 203e  :..            >
-00017ac0: 3e3e 2076 203d 2049 535f 4441 5445 5f49  >> v = IS_DATE_I
-00017ad0: 4e5f 5241 4e47 4528 6d69 6e69 6d75 6d3d  N_RANGE(minimum=
-00017ae0: 6461 7465 7469 6d65 2e64 6174 6528 3230  datetime.date(20
-00017af0: 3038 2c31 2c31 292c 205c 0a20 2020 2020  08,1,1), \.     
-00017b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b20: 6d61 7869 6d75 6d3d 6461 7465 7469 6d65  maximum=datetime
-00017b30: 2e64 6174 6528 3230 3039 2c31 322c 3331  .date(2009,12,31
-00017b40: 292c 205c 0a20 2020 2020 2020 2020 2020  ), \.           
-00017b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b60: 2020 2020 2020 2020 2020 666f 726d 6174            format
-00017b70: 3d22 256d 2f25 642f 2559 222c 6572 726f  ="%m/%d/%Y",erro
-00017b80: 725f 6d65 7373 6167 653d 224f 6f70 7322  r_message="Oops"
-00017b90: 290a 0a20 2020 2020 2020 2020 2020 203e  )..            >
-00017ba0: 3e3e 2076 2827 3033 2f30 332f 3230 3038  >> v('03/03/2008
-00017bb0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00017bc0: 6461 7465 7469 6d65 2e64 6174 6528 3230  datetime.date(20
-00017bd0: 3038 2c20 332c 2033 292c 204e 6f6e 6529  08, 3, 3), None)
-00017be0: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00017bf0: 3e20 7628 2730 332f 3033 2f32 3031 3027  > v('03/03/2010'
-00017c00: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00017c10: 3033 2f30 332f 3230 3130 272c 2027 6f6f  03/03/2010', 'oo
-00017c20: 7073 2729 0a0a 2020 2020 2020 2020 2020  ps')..          
-00017c30: 2020 3e3e 3e20 7628 6461 7465 7469 6d65    >>> v(datetime
-00017c40: 2e64 6174 6528 3230 3038 2c33 2c33 2929  .date(2008,3,3))
-00017c50: 0a20 2020 2020 2020 2020 2020 2028 6461  .            (da
-00017c60: 7465 7469 6d65 2e64 6174 6528 3230 3038  tetime.date(2008
-00017c70: 2c20 332c 2033 292c 204e 6f6e 6529 0a0a  , 3, 3), None)..
-00017c80: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00017c90: 7628 6461 7465 7469 6d65 2e64 6174 6528  v(datetime.date(
-00017ca0: 3230 3130 2c33 2c33 2929 0a20 2020 2020  2010,3,3)).     
-00017cb0: 2020 2020 2020 2028 6461 7465 7469 6d65         (datetime
-00017cc0: 2e64 6174 6528 3230 3130 2c20 332c 2033  .date(2010, 3, 3
-00017cd0: 292c 2027 6f6f 7073 2729 0a0a 2020 2020  ), 'oops')..    
-00017ce0: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
-00017cf0: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-00017d00: 656c 662c 206d 696e 696d 756d 3d4e 6f6e  elf, minimum=Non
-00017d10: 652c 206d 6178 696d 756d 3d4e 6f6e 652c  e, maximum=None,
-00017d20: 2066 6f72 6d61 743d 2225 592d 256d 2d25   format="%Y-%m-%
-00017d30: 6422 2c20 6572 726f 725f 6d65 7373 6167  d", error_messag
-00017d40: 653d 4e6f 6e65 0a20 2020 2029 3a0a 2020  e=None.    ):.  
-00017d50: 2020 2020 2020 7365 6c66 2e6d 696e 696d        self.minim
-00017d60: 756d 203d 206d 696e 696d 756d 0a20 2020  um = minimum.   
-00017d70: 2020 2020 2073 656c 662e 6d61 7869 6d75       self.maximu
-00017d80: 6d20 3d20 6d61 7869 6d75 6d0a 2020 2020  m = maximum.    
-00017d90: 2020 2020 6966 2065 7272 6f72 5f6d 6573      if error_mes
-00017da0: 7361 6765 2069 7320 4e6f 6e65 3a0a 2020  sage is None:.  
-00017db0: 2020 2020 2020 2020 2020 6966 206d 696e            if min
-00017dc0: 696d 756d 2069 7320 4e6f 6e65 3a0a 2020  imum is None:.  
-00017dd0: 2020 2020 2020 2020 2020 2020 2020 6572                er
-00017de0: 726f 725f 6d65 7373 6167 6520 3d20 2245  ror_message = "E
-00017df0: 6e74 6572 2064 6174 6520 6f6e 206f 7220  nter date on or 
-00017e00: 6265 666f 7265 2025 286d 6178 2973 220a  before %(max)s".
-00017e10: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00017e20: 206d 6178 696d 756d 2069 7320 4e6f 6e65   maximum is None
-00017e30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00017e40: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
-00017e50: 3d20 2245 6e74 6572 2064 6174 6520 6f6e  = "Enter date on
-00017e60: 206f 7220 6166 7465 7220 2528 6d69 6e29   or after %(min)
-00017e70: 7322 0a20 2020 2020 2020 2020 2020 2065  s".            e
-00017e80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00017e90: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
-00017ea0: 6765 203d 2022 456e 7465 7220 6461 7465  ge = "Enter date
-00017eb0: 2069 6e20 7261 6e67 6520 2528 6d69 6e29   in range %(min)
-00017ec0: 7320 2528 6d61 7829 7322 0a20 2020 2020  s %(max)s".     
-00017ed0: 2020 2049 535f 4441 5445 2e5f 5f69 6e69     IS_DATE.__ini
-00017ee0: 745f 5f28 7365 6c66 2c20 666f 726d 6174  t__(self, format
-00017ef0: 3d66 6f72 6d61 742c 2065 7272 6f72 5f6d  =format, error_m
-00017f00: 6573 7361 6765 3d65 7272 6f72 5f6d 6573  essage=error_mes
-00017f10: 7361 6765 290a 2020 2020 2020 2020 7365  sage).        se
-00017f20: 6c66 2e65 7874 7265 6d65 7320 3d20 6469  lf.extremes = di
-00017f30: 6374 286d 696e 3d73 656c 662e 666f 726d  ct(min=self.form
-00017f40: 6174 7465 7228 6d69 6e69 6d75 6d29 2c20  atter(minimum), 
-00017f50: 6d61 783d 7365 6c66 2e66 6f72 6d61 7474  max=self.formatt
-00017f60: 6572 286d 6178 696d 756d 2929 0a0a 2020  er(maximum))..  
-00017f70: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00017f80: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00017f90: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00017fa0: 2020 2020 2076 616c 7565 203d 2049 535f       value = IS_
-00017fb0: 4441 5445 2e76 616c 6964 6174 6528 7365  DATE.validate(se
-00017fc0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
-00017fd0: 645f 6964 3d4e 6f6e 6529 0a20 2020 2020  d_id=None).     
-00017fe0: 2020 2069 6620 7365 6c66 2e6d 696e 696d     if self.minim
-00017ff0: 756d 2061 6e64 2073 656c 662e 6d69 6e69  um and self.mini
-00018000: 6d75 6d20 3e20 7661 6c75 653a 0a20 2020  mum > value:.   
-00018010: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00018020: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00018030: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-00018040: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00018050: 6529 2025 2073 656c 662e 6578 7472 656d  e) % self.extrem
-00018060: 6573 290a 2020 2020 2020 2020 6966 2073  es).        if s
-00018070: 656c 662e 6d61 7869 6d75 6d20 616e 6420  elf.maximum and 
-00018080: 7661 6c75 6520 3e20 7365 6c66 2e6d 6178  value > self.max
-00018090: 696d 756d 3a0a 2020 2020 2020 2020 2020  imum:.          
-000180a0: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-000180b0: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
-000180c0: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-000180d0: 6f72 5f6d 6573 7361 6765 2920 2520 7365  or_message) % se
-000180e0: 6c66 2e65 7874 7265 6d65 7329 0a20 2020  lf.extremes).   
-000180f0: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-00018100: 650a 0a0a 636c 6173 7320 4953 5f44 4154  e...class IS_DAT
-00018110: 4554 494d 455f 494e 5f52 414e 4745 2849  ETIME_IN_RANGE(I
-00018120: 535f 4441 5445 5449 4d45 293a 0a20 2020  S_DATETIME):.   
-00018130: 2022 2222 0a20 2020 2045 7861 6d70 6c65   """.    Example
-00018140: 733a 0a20 2020 2020 2020 2055 7365 2061  s:.        Use a
-00018150: 733a 3a0a 2020 2020 2020 2020 2020 2020  s::.            
-00018160: 3e3e 3e20 7620 3d20 4953 5f44 4154 4554  >>> v = IS_DATET
-00018170: 494d 455f 494e 5f52 414e 4745 285c 0a20  IME_IN_RANGE(\. 
-00018180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018190: 2020 206d 696e 696d 756d 3d64 6174 6574     minimum=datet
-000181a0: 696d 652e 6461 7465 7469 6d65 2832 3030  ime.datetime(200
-000181b0: 382c 312c 312c 3132 2c32 3029 2c20 5c0a  8,1,1,12,20), \.
-000181c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181d0: 2020 2020 6d61 7869 6d75 6d3d 6461 7465      maximum=date
-000181e0: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
-000181f0: 3039 2c31 322c 3331 2c31 322c 3230 292c  09,12,31,12,20),
-00018200: 205c 0a20 2020 2020 2020 2020 2020 2020   \.             
-00018210: 2020 2020 2020 2066 6f72 6d61 743d 2225         format="%
-00018220: 6d2f 2564 2f25 5920 2548 3a25 4d22 2c65  m/%d/%Y %H:%M",e
-00018230: 7272 6f72 5f6d 6573 7361 6765 3d22 4f6f  rror_message="Oo
-00018240: 7073 2229 0a20 2020 2020 2020 2020 2020  ps").           
-00018250: 203e 3e3e 2076 2827 3033 2f30 332f 3230   >>> v('03/03/20
-00018260: 3038 2031 323a 3430 2729 0a20 2020 2020  08 12:40').     
-00018270: 2020 2020 2020 2028 6461 7465 7469 6d65         (datetime
-00018280: 2e64 6174 6574 696d 6528 3230 3038 2c20  .datetime(2008, 
-00018290: 332c 2033 2c20 3132 2c20 3430 292c 204e  3, 3, 12, 40), N
-000182a0: 6f6e 6529 0a0a 2020 2020 2020 2020 2020  one)..          
-000182b0: 2020 3e3e 3e20 7628 2730 332f 3033 2f32    >>> v('03/03/2
-000182c0: 3031 3020 3130 3a33 3427 290a 2020 2020  010 10:34').    
-000182d0: 2020 2020 2020 2020 2827 3033 2f30 332f          ('03/03/
-000182e0: 3230 3130 2031 303a 3334 272c 2027 6f6f  2010 10:34', 'oo
-000182f0: 7073 2729 0a0a 2020 2020 2020 2020 2020  ps')..          
-00018300: 2020 3e3e 3e20 7628 6461 7465 7469 6d65    >>> v(datetime
-00018310: 2e64 6174 6574 696d 6528 3230 3038 2c33  .datetime(2008,3
-00018320: 2c33 2c30 2c30 2929 0a20 2020 2020 2020  ,3,0,0)).       
-00018330: 2020 2020 2028 6461 7465 7469 6d65 2e64       (datetime.d
-00018340: 6174 6574 696d 6528 3230 3038 2c20 332c  atetime(2008, 3,
-00018350: 2033 2c20 302c 2030 292c 204e 6f6e 6529   3, 0, 0), None)
-00018360: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
-00018370: 3e20 7628 6461 7465 7469 6d65 2e64 6174  > v(datetime.dat
-00018380: 6574 696d 6528 3230 3130 2c33 2c33 2c30  etime(2010,3,3,0
-00018390: 2c30 2929 0a20 2020 2020 2020 2020 2020  ,0)).           
-000183a0: 2028 6461 7465 7469 6d65 2e64 6174 6574   (datetime.datet
-000183b0: 696d 6528 3230 3130 2c20 332c 2033 2c20  ime(2010, 3, 3, 
-000183c0: 302c 2030 292c 2027 6f6f 7073 2729 0a0a  0, 0), 'oops')..
-000183d0: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-000183e0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-000183f0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00018400: 206d 696e 696d 756d 3d4e 6f6e 652c 0a20   minimum=None,. 
-00018410: 2020 2020 2020 206d 6178 696d 756d 3d4e         maximum=N
-00018420: 6f6e 652c 0a20 2020 2020 2020 2066 6f72  one,.        for
-00018430: 6d61 743d 2225 592d 256d 2d25 6420 2548  mat="%Y-%m-%d %H
-00018440: 3a25 4d3a 2553 222c 0a20 2020 2020 2020  :%M:%S",.       
-00018450: 2065 7272 6f72 5f6d 6573 7361 6765 3d4e   error_message=N
-00018460: 6f6e 652c 0a20 2020 2020 2020 2074 696d  one,.        tim
-00018470: 657a 6f6e 653d 4e6f 6e65 2c0a 2020 2020  ezone=None,.    
-00018480: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-00018490: 6d69 6e69 6d75 6d20 3d20 6d69 6e69 6d75  minimum = minimu
-000184a0: 6d0a 2020 2020 2020 2020 7365 6c66 2e6d  m.        self.m
-000184b0: 6178 696d 756d 203d 206d 6178 696d 756d  aximum = maximum
-000184c0: 0a20 2020 2020 2020 2069 6620 6572 726f  .        if erro
-000184d0: 725f 6d65 7373 6167 6520 6973 204e 6f6e  r_message is Non
-000184e0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-000184f0: 6620 6d69 6e69 6d75 6d20 6973 204e 6f6e  f minimum is Non
-00018500: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00018510: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
-00018520: 203d 2022 456e 7465 7220 6461 7465 2061   = "Enter date a
-00018530: 6e64 2074 696d 6520 6f6e 206f 7220 6265  nd time on or be
-00018540: 666f 7265 2025 286d 6178 2973 220a 2020  fore %(max)s".  
-00018550: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-00018560: 6178 696d 756d 2069 7320 4e6f 6e65 3a0a  aximum is None:.
-00018570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018580: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
-00018590: 2245 6e74 6572 2064 6174 6520 616e 6420  "Enter date and 
-000185a0: 7469 6d65 206f 6e20 6f72 2061 6674 6572  time on or after
-000185b0: 2025 286d 696e 2973 220a 2020 2020 2020   %(min)s".      
-000185c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000185d0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
-000185e0: 725f 6d65 7373 6167 6520 3d20 2245 6e74  r_message = "Ent
-000185f0: 6572 2064 6174 6520 616e 6420 7469 6d65  er date and time
-00018600: 2069 6e20 7261 6e67 6520 2528 6d69 6e29   in range %(min)
-00018610: 7320 2528 6d61 7829 7322 0a20 2020 2020  s %(max)s".     
-00018620: 2020 2049 535f 4441 5445 5449 4d45 2e5f     IS_DATETIME._
-00018630: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00018640: 2020 2020 2073 656c 662c 2066 6f72 6d61       self, forma
-00018650: 743d 666f 726d 6174 2c20 6572 726f 725f  t=format, error_
-00018660: 6d65 7373 6167 653d 6572 726f 725f 6d65  message=error_me
-00018670: 7373 6167 652c 2074 696d 657a 6f6e 653d  ssage, timezone=
-00018680: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
-00018690: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-000186a0: 6578 7472 656d 6573 203d 2064 6963 7428  extremes = dict(
-000186b0: 6d69 6e3d 7365 6c66 2e66 6f72 6d61 7474  min=self.formatt
-000186c0: 6572 286d 696e 696d 756d 292c 206d 6178  er(minimum), max
-000186d0: 3d73 656c 662e 666f 726d 6174 7465 7228  =self.formatter(
-000186e0: 6d61 7869 6d75 6d29 290a 0a20 2020 2064  maximum))..    d
-000186f0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-00018700: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-00018710: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-00018720: 2020 7661 6c75 6520 3d20 4953 5f44 4154    value = IS_DAT
-00018730: 4554 494d 452e 7661 6c69 6461 7465 2873  ETIME.validate(s
-00018740: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00018750: 7264 5f69 643d 4e6f 6e65 290a 2020 2020  rd_id=None).    
-00018760: 2020 2020 6966 2073 656c 662e 6d69 6e69      if self.mini
-00018770: 6d75 6d20 616e 6420 7365 6c66 2e6d 696e  mum and self.min
-00018780: 696d 756d 203e 2076 616c 7565 3a0a 2020  imum > value:.  
-00018790: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000187a0: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
-000187b0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-000187c0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-000187d0: 6765 2920 2520 7365 6c66 2e65 7874 7265  ge) % self.extre
-000187e0: 6d65 7329 0a20 2020 2020 2020 2069 6620  mes).        if 
-000187f0: 7365 6c66 2e6d 6178 696d 756d 2061 6e64  self.maximum and
-00018800: 2076 616c 7565 203e 2073 656c 662e 6d61   value > self.ma
-00018810: 7869 6d75 6d3a 0a20 2020 2020 2020 2020  ximum:.         
-00018820: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
-00018830: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
-00018840: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
-00018850: 726f 725f 6d65 7373 6167 6529 2025 2073  ror_message) % s
-00018860: 656c 662e 6578 7472 656d 6573 290a 2020  elf.extremes).  
-00018870: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00018880: 7565 0a0a 0a63 6c61 7373 2049 535f 4c49  ue...class IS_LI
-00018890: 5354 5f4f 4628 5661 6c69 6461 746f 7229  ST_OF(Validator)
-000188a0: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
-000188b0: 5f5f 2873 656c 662c 206f 7468 6572 3d4e  __(self, other=N
-000188c0: 6f6e 652c 206d 696e 696d 756d 3d4e 6f6e  one, minimum=Non
-000188d0: 652c 206d 6178 696d 756d 3d4e 6f6e 652c  e, maximum=None,
-000188e0: 2065 7272 6f72 5f6d 6573 7361 6765 3d4e   error_message=N
-000188f0: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
-00018900: 6c66 2e6f 7468 6572 203d 206f 7468 6572  lf.other = other
-00018910: 0a20 2020 2020 2020 2073 656c 662e 6d69  .        self.mi
-00018920: 6e69 6d75 6d20 3d20 6d69 6e69 6d75 6d0a  nimum = minimum.
-00018930: 2020 2020 2020 2020 7365 6c66 2e6d 6178          self.max
-00018940: 696d 756d 203d 206d 6178 696d 756d 0a20  imum = maximum. 
-00018950: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-00018960: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
-00018970: 725f 6d65 7373 6167 650a 0a20 2020 2064  r_message..    d
-00018980: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-00018990: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-000189a0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-000189b0: 2020 6976 616c 7565 203d 2076 616c 7565    ivalue = value
-000189c0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000189d0: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
-000189e0: 2c20 6c69 7374 293a 0a20 2020 2020 2020  , list):.       
-000189f0: 2020 2020 2069 7661 6c75 6520 3d20 5b69       ivalue = [i
-00018a00: 7661 6c75 655d 0a20 2020 2020 2020 2069  value].        i
-00018a10: 7661 6c75 6520 3d20 5b69 2066 6f72 2069  value = [i for i
-00018a20: 2069 6e20 6976 616c 7565 2069 6620 7374   in ivalue if st
-00018a30: 7228 6929 2e73 7472 6970 2829 5d0a 2020  r(i).strip()].  
-00018a40: 2020 2020 2020 6966 2073 656c 662e 6d69        if self.mi
-00018a50: 6e69 6d75 6d20 6973 206e 6f74 204e 6f6e  nimum is not Non
-00018a60: 6520 616e 6420 6c65 6e28 6976 616c 7565  e and len(ivalue
-00018a70: 2920 3c20 7365 6c66 2e6d 696e 696d 756d  ) < self.minimum
-00018a80: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00018a90: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-00018aa0: 726f 7228 0a20 2020 2020 2020 2020 2020  ror(.           
-00018ab0: 2020 2020 2073 656c 662e 7472 616e 736c       self.transl
-00018ac0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00018ad0: 6d65 7373 6167 6520 6f72 2022 4d69 6e69  message or "Mini
-00018ae0: 6d75 6d20 6c65 6e67 7468 2069 7320 2528  mum length is %(
-00018af0: 6d69 6e29 7322 290a 2020 2020 2020 2020  min)s").        
-00018b00: 2020 2020 2020 2020 2520 6469 6374 286d          % dict(m
-00018b10: 696e 3d73 656c 662e 6d69 6e69 6d75 6d2c  in=self.minimum,
-00018b20: 206d 6178 3d73 656c 662e 6d61 7869 6d75   max=self.maximu
-00018b30: 6d29 0a20 2020 2020 2020 2020 2020 2029  m).            )
-00018b40: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00018b50: 2e6d 6178 696d 756d 2069 7320 6e6f 7420  .maximum is not 
-00018b60: 4e6f 6e65 2061 6e64 206c 656e 2869 7661  None and len(iva
-00018b70: 6c75 6529 203e 2073 656c 662e 6d61 7869  lue) > self.maxi
-00018b80: 6d75 6d3a 0a20 2020 2020 2020 2020 2020  mum:.           
-00018b90: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-00018ba0: 6e45 7272 6f72 280a 2020 2020 2020 2020  nError(.        
-00018bb0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-00018bc0: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-00018bd0: 6f72 5f6d 6573 7361 6765 206f 7220 224d  or_message or "M
-00018be0: 6178 696d 756d 206c 656e 6774 6820 6973  aximum length is
-00018bf0: 2025 286d 6178 2973 2229 0a20 2020 2020   %(max)s").     
-00018c00: 2020 2020 2020 2020 2020 2025 2064 6963             % dic
-00018c10: 7428 6d69 6e3d 7365 6c66 2e6d 696e 696d  t(min=self.minim
-00018c20: 756d 2c20 6d61 783d 7365 6c66 2e6d 6178  um, max=self.max
-00018c30: 696d 756d 290a 2020 2020 2020 2020 2020  imum).          
-00018c40: 2020 290a 2020 2020 2020 2020 6e65 775f    ).        new_
-00018c50: 7661 6c75 6520 3d20 5b5d 0a20 2020 2020  value = [].     
-00018c60: 2020 206f 7468 6572 203d 2073 656c 662e     other = self.
-00018c70: 6f74 6865 720a 2020 2020 2020 2020 6966  other.        if
-00018c80: 2073 656c 662e 6f74 6865 723a 0a20 2020   self.other:.   
-00018c90: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00018ca0: 6973 696e 7374 616e 6365 286f 7468 6572  isinstance(other
-00018cb0: 2c20 286c 6973 742c 2074 7570 6c65 2929  , (list, tuple))
-00018cc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018cd0: 2020 6f74 6865 7220 3d20 5b6f 7468 6572    other = [other
-00018ce0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-00018cf0: 7220 6974 656d 2069 6e20 6976 616c 7565  r item in ivalue
-00018d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018d10: 2020 7620 3d20 6974 656d 0a20 2020 2020    v = item.     
-00018d20: 2020 2020 2020 2020 2020 2066 6f72 2076             for v
-00018d30: 616c 6964 6174 6f72 2069 6e20 6f74 6865  alidator in othe
-00018d40: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00018d50: 2020 2020 2020 2076 203d 2076 616c 6964         v = valid
-00018d60: 6174 6f72 5f63 616c 6c65 7228 7661 6c69  ator_caller(vali
-00018d70: 6461 746f 722c 2076 2c20 7265 636f 7264  dator, v, record
-00018d80: 5f69 6429 0a20 2020 2020 2020 2020 2020  _id).           
-00018d90: 2020 2020 206e 6577 5f76 616c 7565 2e61       new_value.a
-00018da0: 7070 656e 6428 7629 0a20 2020 2020 2020  ppend(v).       
-00018db0: 2020 2020 2069 7661 6c75 6520 3d20 6e65       ivalue = ne
-00018dc0: 775f 7661 6c75 650a 2020 2020 2020 2020  w_value.        
-00018dd0: 7265 7475 726e 2069 7661 6c75 650a 0a0a  return ivalue...
-00018de0: 636c 6173 7320 4953 5f4c 4f57 4552 2856  class IS_LOWER(V
-00018df0: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
-00018e00: 2222 0a20 2020 2043 6f6e 7665 7274 7320  "".    Converts 
-00018e10: 746f 206c 6f77 6572 6361 7365 3a3a 0a0a  to lowercase::..
-00018e20: 2020 2020 2020 2020 3e3e 3e20 4953 5f4c          >>> IS_L
-00018e30: 4f57 4552 2829 2827 4142 4327 290a 2020  OWER()('ABC').  
-00018e40: 2020 2020 2020 2827 6162 6327 2c20 4e6f        ('abc', No
-00018e50: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-00018e60: 4953 5f4c 4f57 4552 2829 2827 c391 2729  IS_LOWER()('..')
-00018e70: 0a20 2020 2020 2020 2028 275c 5c78 6333  .        ('\\xc3
-00018e80: 5c5c 7862 3127 2c20 4e6f 6e65 290a 0a20  \\xb1', None).. 
-00018e90: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
-00018ea0: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00018eb0: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00018ec0: 4e6f 6e65 293a 0a20 2020 2020 2020 2063  None):.        c
-00018ed0: 6173 745f 6261 636b 203d 206c 616d 6264  ast_back = lambd
-00018ee0: 6120 783a 2078 0a20 2020 2020 2020 2069  a x: x.        i
-00018ef0: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-00018f00: 7565 2c20 7374 7229 3a0a 2020 2020 2020  ue, str):.      
-00018f10: 2020 2020 2020 6361 7374 5f62 6163 6b20        cast_back 
-00018f20: 3d20 746f 5f6e 6174 6976 650a 2020 2020  = to_native.    
-00018f30: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00018f40: 6e63 6528 7661 6c75 652c 2062 7974 6573  nce(value, bytes
-00018f50: 293a 0a20 2020 2020 2020 2020 2020 2063  ):.            c
-00018f60: 6173 745f 6261 636b 203d 2074 6f5f 6279  ast_back = to_by
-00018f70: 7465 730a 2020 2020 2020 2020 7661 6c75  tes.        valu
-00018f80: 6520 3d20 746f 5f75 6e69 636f 6465 2876  e = to_unicode(v
-00018f90: 616c 7565 292e 6c6f 7765 7228 290a 2020  alue).lower().  
-00018fa0: 2020 2020 2020 7265 7475 726e 2063 6173        return cas
-00018fb0: 745f 6261 636b 2876 616c 7565 290a 0a0a  t_back(value)...
-00018fc0: 636c 6173 7320 4953 5f55 5050 4552 2856  class IS_UPPER(V
-00018fd0: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
-00018fe0: 2222 0a20 2020 2043 6f6e 7665 7274 7320  "".    Converts 
-00018ff0: 746f 2075 7070 6572 6361 7365 3a3a 0a0a  to uppercase::..
-00019000: 2020 2020 2020 2020 3e3e 3e20 4953 5f55          >>> IS_U
-00019010: 5050 4552 2829 2827 6162 6327 290a 2020  PPER()('abc').  
-00019020: 2020 2020 2020 2827 4142 4327 2c20 4e6f        ('ABC', No
-00019030: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-00019040: 4953 5f55 5050 4552 2829 2827 c3b1 2729  IS_UPPER()('..')
-00019050: 0a20 2020 2020 2020 2028 275c 5c78 6333  .        ('\\xc3
-00019060: 5c5c 7839 3127 2c20 4e6f 6e65 290a 0a20  \\x91', None).. 
-00019070: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
-00019080: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00019090: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-000190a0: 4e6f 6e65 293a 0a20 2020 2020 2020 2063  None):.        c
-000190b0: 6173 745f 6261 636b 203d 206c 616d 6264  ast_back = lambd
-000190c0: 6120 783a 2078 0a20 2020 2020 2020 2069  a x: x.        i
-000190d0: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-000190e0: 7565 2c20 7374 7229 3a0a 2020 2020 2020  ue, str):.      
-000190f0: 2020 2020 2020 6361 7374 5f62 6163 6b20        cast_back 
-00019100: 3d20 746f 5f6e 6174 6976 650a 2020 2020  = to_native.    
-00019110: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00019120: 6e63 6528 7661 6c75 652c 2062 7974 6573  nce(value, bytes
-00019130: 293a 0a20 2020 2020 2020 2020 2020 2063  ):.            c
-00019140: 6173 745f 6261 636b 203d 2074 6f5f 6279  ast_back = to_by
-00019150: 7465 730a 2020 2020 2020 2020 7661 6c75  tes.        valu
-00019160: 6520 3d20 746f 5f75 6e69 636f 6465 2876  e = to_unicode(v
-00019170: 616c 7565 292e 7570 7065 7228 290a 2020  alue).upper().  
-00019180: 2020 2020 2020 7265 7475 726e 2063 6173        return cas
-00019190: 745f 6261 636b 2876 616c 7565 290a 0a0a  t_back(value)...
-000191a0: 6465 6620 7572 6c69 6679 2873 2c20 6d61  def urlify(s, ma
-000191b0: 786c 656e 3d38 302c 206b 6565 705f 756e  xlen=80, keep_un
-000191c0: 6465 7273 636f 7265 733d 4661 6c73 6529  derscores=False)
-000191d0: 3a0a 2020 2020 2222 220a 2020 2020 436f  :.    """.    Co
-000191e0: 6e76 6572 7473 2069 6e63 6f6d 696e 6720  nverts incoming 
-000191f0: 7374 7269 6e67 2074 6f20 6120 7369 6d70  string to a simp
-00019200: 6c69 6669 6564 2041 5343 4949 2073 7562  lified ASCII sub
-00019210: 7365 742e 0a20 2020 2069 6620 286b 6565  set..    if (kee
-00019220: 705f 756e 6465 7273 636f 7265 7329 3a20  p_underscores): 
-00019230: 756e 6465 7273 636f 7265 7320 6172 6520  underscores are 
-00019240: 7265 7461 696e 6564 2069 6e20 7468 6520  retained in the 
-00019250: 7374 7269 6e67 0a20 2020 2065 6c73 653a  string.    else:
-00019260: 2075 6e64 6572 7363 6f72 6573 2061 7265   underscores are
-00019270: 2074 7261 6e73 6c61 7465 6420 746f 2068   translated to h
-00019280: 7970 6865 6e73 2028 6465 6661 756c 7429  yphens (default)
-00019290: 0a20 2020 2022 2222 0a20 2020 2073 203d  .    """.    s =
-000192a0: 2074 6f5f 756e 6963 6f64 6528 7329 2020   to_unicode(s)  
-000192b0: 2320 746f 2075 6e69 636f 6465 0a20 2020  # to unicode.   
-000192c0: 2073 203d 2073 2e6c 6f77 6572 2829 2020   s = s.lower()  
-000192d0: 2320 746f 206c 6f77 6572 6361 7365 0a20  # to lowercase. 
-000192e0: 2020 2073 203d 2075 6e69 636f 6465 6461     s = unicodeda
-000192f0: 7461 2e6e 6f72 6d61 6c69 7a65 2822 4e46  ta.normalize("NF
-00019300: 4b44 222c 2073 2920 2023 2072 6570 6c61  KD", s)  # repla
-00019310: 6365 2073 7065 6369 616c 2063 6861 7261  ce special chara
-00019320: 6374 6572 730a 2020 2020 7320 3d20 746f  cters.    s = to
-00019330: 5f6e 6174 6976 6528 732c 2063 6861 7273  _native(s, chars
-00019340: 6574 3d22 6173 6369 6922 2c20 6572 726f  et="ascii", erro
-00019350: 7273 3d22 6967 6e6f 7265 2229 2020 2320  rs="ignore")  # 
-00019360: 656e 636f 6465 2061 7320 4153 4349 490a  encode as ASCII.
-00019370: 2020 2020 7320 3d20 7265 2e73 7562 2872      s = re.sub(r
-00019380: 2226 5c77 2b3f 3b22 2c20 2222 2c20 7329  "&\w+?;", "", s)
-00019390: 2020 2320 7374 7269 7020 6874 6d6c 2065    # strip html e
-000193a0: 6e74 6974 6965 730a 2020 2020 6966 206b  ntities.    if k
-000193b0: 6565 705f 756e 6465 7273 636f 7265 733a  eep_underscores:
-000193c0: 0a20 2020 2020 2020 2073 203d 2072 652e  .        s = re.
-000193d0: 7375 6228 7222 5c73 2b22 2c20 222d 222c  sub(r"\s+", "-",
-000193e0: 2073 2920 2023 2077 6869 7465 7370 6163   s)  # whitespac
-000193f0: 6520 746f 2068 7970 6865 6e73 0a20 2020  e to hyphens.   
-00019400: 2020 2020 2073 203d 2072 652e 7375 6228       s = re.sub(
-00019410: 7222 5b5e 5c77 5c2d 5d22 2c20 2222 2c20  r"[^\w\-]", "", 
-00019420: 7329 0a20 2020 2020 2020 2023 2073 7472  s).        # str
-00019430: 6970 2061 6c6c 2062 7574 2061 6c70 6861  ip all but alpha
-00019440: 6e75 6d65 7269 632f 756e 6465 7273 636f  numeric/undersco
-00019450: 7265 2f68 7970 6865 6e0a 2020 2020 656c  re/hyphen.    el
-00019460: 7365 3a0a 2020 2020 2020 2020 7320 3d20  se:.        s = 
-00019470: 7265 2e73 7562 2872 225b 5c73 5f5d 2b22  re.sub(r"[\s_]+"
-00019480: 2c20 222d 222c 2073 2920 2023 2077 6869  , "-", s)  # whi
-00019490: 7465 7370 6163 6520 2620 756e 6465 7273  tespace & unders
-000194a0: 636f 7265 7320 746f 2068 7970 6865 6e73  cores to hyphens
-000194b0: 0a20 2020 2020 2020 2073 203d 2072 652e  .        s = re.
-000194c0: 7375 6228 7222 5b5e 612d 7a30 2d39 5c2d  sub(r"[^a-z0-9\-
-000194d0: 5d22 2c20 2222 2c20 7329 2020 2320 7374  ]", "", s)  # st
-000194e0: 7269 7020 616c 6c20 6275 7420 616c 7068  rip all but alph
-000194f0: 616e 756d 6572 6963 2f68 7970 6865 6e0a  anumeric/hyphen.
-00019500: 2020 2020 7320 3d20 7265 2e73 7562 2872      s = re.sub(r
-00019510: 225b 2d5f 5d5b 2d5f 5d2b 222c 2022 2d22  "[-_][-_]+", "-"
-00019520: 2c20 7329 2020 2320 636f 6c6c 6170 7365  , s)  # collapse
-00019530: 2073 7472 696e 6773 206f 6620 6879 7068   strings of hyph
-00019540: 656e 730a 2020 2020 7320 3d20 732e 7374  ens.    s = s.st
-00019550: 7269 7028 222d 2229 2020 2320 7265 6d6f  rip("-")  # remo
-00019560: 7665 206c 6561 6469 6e67 2061 6e64 2074  ve leading and t
-00019570: 7261 696c 696e 6720 6879 7068 656e 730a  railing hyphens.
-00019580: 2020 2020 7265 7475 726e 2073 5b3a 6d61      return s[:ma
-00019590: 786c 656e 5d20 2023 2065 6e66 6f72 6365  xlen]  # enforce
-000195a0: 206d 6178 696d 756d 206c 656e 6774 680a   maximum length.
-000195b0: 0a0a 636c 6173 7320 4953 5f53 4c55 4728  ..class IS_SLUG(
-000195c0: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
-000195d0: 2222 220a 2020 2020 636f 6e76 6572 7473  """.    converts
-000195e0: 2061 7262 6974 7261 7279 2074 6578 7420   arbitrary text 
-000195f0: 7374 7269 6e67 2074 6f20 6120 736c 7567  string to a slug
-00019600: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
-00019610: 4953 5f53 4c55 4728 2928 2761 6263 3132  IS_SLUG()('abc12
-00019620: 3327 290a 2020 2020 2020 2020 2827 6162  3').        ('ab
-00019630: 6331 3233 272c 204e 6f6e 6529 0a20 2020  c123', None).   
-00019640: 2020 2020 203e 3e3e 2049 535f 534c 5547       >>> IS_SLUG
-00019650: 2829 2827 4142 4331 3233 2729 0a20 2020  ()('ABC123').   
-00019660: 2020 2020 2028 2761 6263 3132 3327 2c20       ('abc123', 
-00019670: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
-00019680: 3e20 4953 5f53 4c55 4728 2928 2761 6263  > IS_SLUG()('abc
-00019690: 2d31 3233 2729 0a20 2020 2020 2020 2028  -123').        (
-000196a0: 2761 6263 2d31 3233 272c 204e 6f6e 6529  'abc-123', None)
-000196b0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-000196c0: 534c 5547 2829 2827 6162 632d 2d31 3233  SLUG()('abc--123
-000196d0: 2729 0a20 2020 2020 2020 2028 2761 6263  ').        ('abc
-000196e0: 2d31 3233 272c 204e 6f6e 6529 0a20 2020  -123', None).   
-000196f0: 2020 2020 203e 3e3e 2049 535f 534c 5547       >>> IS_SLUG
-00019700: 2829 2827 6162 6320 3132 3327 290a 2020  ()('abc 123').  
-00019710: 2020 2020 2020 2827 6162 632d 3132 3327        ('abc-123'
-00019720: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00019730: 3e3e 3e20 4953 5f53 4c55 4728 2928 2761  >>> IS_SLUG()('a
-00019740: 6263 5c74 5f31 3233 2729 0a20 2020 2020  bc\t_123').     
-00019750: 2020 2028 2761 6263 2d31 3233 272c 204e     ('abc-123', N
-00019760: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00019770: 2049 535f 534c 5547 2829 2827 2d61 6263   IS_SLUG()('-abc
-00019780: 2d27 290a 2020 2020 2020 2020 2827 6162  -').        ('ab
-00019790: 6327 2c20 4e6f 6e65 290a 2020 2020 2020  c', None).      
-000197a0: 2020 3e3e 3e20 4953 5f53 4c55 4728 2928    >>> IS_SLUG()(
-000197b0: 272d 2d61 2d2d 622d 2d5f 202d 632d 2d27  '--a--b--_ -c--'
-000197c0: 290a 2020 2020 2020 2020 2827 612d 622d  ).        ('a-b-
-000197d0: 6327 2c20 4e6f 6e65 290a 2020 2020 2020  c', None).      
-000197e0: 2020 3e3e 3e20 4953 5f53 4c55 4728 2928    >>> IS_SLUG()(
-000197f0: 2761 6263 2661 6d70 3b31 3233 2729 0a20  'abc&amp;123'). 
-00019800: 2020 2020 2020 2028 2761 6263 3132 3327         ('abc123'
-00019810: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00019820: 3e3e 3e20 4953 5f53 4c55 4728 2928 2761  >>> IS_SLUG()('a
-00019830: 6263 2661 6d70 3b31 3233 2661 6d70 3b64  bc&amp;123&amp;d
-00019840: 6566 2729 0a20 2020 2020 2020 2028 2761  ef').        ('a
-00019850: 6263 3132 3364 6566 272c 204e 6f6e 6529  bc123def', None)
-00019860: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00019870: 534c 5547 2829 2827 c3b1 2729 0a20 2020  SLUG()('..').   
-00019880: 2020 2020 2028 276e 272c 204e 6f6e 6529       ('n', None)
-00019890: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-000198a0: 534c 5547 286d 6178 6c65 6e3d 3429 2827  SLUG(maxlen=4)('
-000198b0: 6162 6331 3233 2729 0a20 2020 2020 2020  abc123').       
-000198c0: 2028 2761 6263 3127 2c20 4e6f 6e65 290a   ('abc1', None).
-000198d0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
-000198e0: 4c55 4728 2928 2761 6263 5f31 3233 2729  LUG()('abc_123')
-000198f0: 0a20 2020 2020 2020 2028 2761 6263 2d31  .        ('abc-1
-00019900: 3233 272c 204e 6f6e 6529 0a20 2020 2020  23', None).     
-00019910: 2020 203e 3e3e 2049 535f 534c 5547 286b     >>> IS_SLUG(k
-00019920: 6565 705f 756e 6465 7273 636f 7265 733d  eep_underscores=
-00019930: 4661 6c73 6529 2827 6162 635f 3132 3327  False)('abc_123'
+000081c0: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+000081d0: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
+000081e0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+000081f0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+00008200: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00008210: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00008220: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00008230: 7461 6e63 6528 7661 6c75 652c 2064 6563  tance(value, dec
+00008240: 696d 616c 2e44 6563 696d 616c 293a 0a20  imal.Decimal):. 
+00008250: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00008260: 616c 7565 203d 2064 6563 696d 616c 2e44  alue = decimal.D
+00008270: 6563 696d 616c 2873 7472 2876 616c 7565  ecimal(str(value
+00008280: 292e 7265 706c 6163 6528 7365 6c66 2e64  ).replace(self.d
+00008290: 6f74 2c20 222e 2229 290a 2020 2020 2020  ot, ".")).      
+000082a0: 2020 2020 2020 6966 2028 7365 6c66 2e6d        if (self.m
+000082b0: 696e 696d 756d 2069 7320 4e6f 6e65 206f  inimum is None o
+000082c0: 7220 7661 6c75 6520 3e3d 2073 656c 662e  r value >= self.
+000082d0: 6d69 6e69 6d75 6d29 2061 6e64 2028 0a20  minimum) and (. 
+000082e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000082f0: 656c 662e 6d61 7869 6d75 6d20 6973 204e  elf.maximum is N
+00008300: 6f6e 6520 6f72 2076 616c 7565 203c 3d20  one or value <= 
+00008310: 7365 6c66 2e6d 6178 696d 756d 0a20 2020  self.maximum.   
+00008320: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
+00008330: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008340: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
+00008350: 2065 7863 6570 7420 2856 616c 7565 4572   except (ValueEr
+00008360: 726f 722c 2054 7970 6545 7272 6f72 2c20  ror, TypeError, 
+00008370: 6465 6369 6d61 6c2e 496e 7661 6c69 644f  decimal.InvalidO
+00008380: 7065 7261 7469 6f6e 293a 0a20 2020 2020  peration):.     
+00008390: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+000083a0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+000083b0: 7469 6f6e 4572 726f 7228 0a20 2020 2020  tionError(.     
+000083c0: 2020 2020 2020 2072 616e 6765 5f65 7272         range_err
+000083d0: 6f72 5f6d 6573 7361 6765 280a 2020 2020  or_message(.    
+000083e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000083f0: 2e65 7272 6f72 5f6d 6573 7361 6765 2c20  .error_message, 
+00008400: 2261 206e 756d 6265 7222 2c20 7365 6c66  "a number", self
+00008410: 2e6d 696e 696d 756d 2c20 7365 6c66 2e6d  .minimum, self.m
+00008420: 6178 696d 756d 0a20 2020 2020 2020 2020  aximum.         
+00008430: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
+00008440: 2020 2020 6465 6620 666f 726d 6174 7465      def formatte
+00008450: 7228 7365 6c66 2c20 7661 6c75 6529 3a0a  r(self, value):.
+00008460: 2020 2020 2020 2020 6966 2076 616c 7565          if value
+00008470: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00008480: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00008490: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+000084a0: 2073 7472 3264 6563 2876 616c 7565 292e   str2dec(value).
+000084b0: 7265 706c 6163 6528 222e 222c 2073 656c  replace(".", sel
+000084c0: 662e 646f 7429 0a0a 0a64 6566 2069 735f  f.dot)...def is_
+000084d0: 656d 7074 7928 7661 6c75 652c 2065 6d70  empty(value, emp
+000084e0: 7479 5f72 6567 6578 3d4e 6f6e 6529 3a0a  ty_regex=None):.
+000084f0: 2020 2020 5f76 616c 7565 203d 2076 616c      _value = val
+00008500: 7565 0a20 2020 2022 2222 7465 7374 2065  ue.    """test e
+00008510: 6d70 7479 2066 6965 6c64 2222 220a 2020  mpty field""".  
+00008520: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00008530: 7661 6c75 652c 2028 7374 722c 2075 6e69  value, (str, uni
+00008540: 636f 6465 5429 293a 0a20 2020 2020 2020  codeT)):.       
+00008550: 2076 616c 7565 203d 2076 616c 7565 2e73   value = value.s
+00008560: 7472 6970 2829 0a20 2020 2020 2020 2069  trip().        i
+00008570: 6620 656d 7074 795f 7265 6765 7820 6973  f empty_regex is
+00008580: 206e 6f74 204e 6f6e 6520 616e 6420 656d   not None and em
+00008590: 7074 795f 7265 6765 782e 6d61 7463 6828  pty_regex.match(
+000085a0: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+000085b0: 2020 2020 7661 6c75 6520 3d20 2222 0a20      value = "". 
+000085c0: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
+000085d0: 6f6e 6520 6f72 2076 616c 7565 203d 3d20  one or value == 
+000085e0: 2222 206f 7220 7661 6c75 6520 3d3d 2062  "" or value == b
+000085f0: 2222 206f 7220 7661 6c75 6520 3d3d 205b  "" or value == [
+00008600: 5d3a 0a20 2020 2020 2020 2072 6574 7572  ]:.        retur
+00008610: 6e20 285f 7661 6c75 652c 2054 7275 6529  n (_value, True)
+00008620: 0a20 2020 2072 6574 7572 6e20 285f 7661  .    return (_va
+00008630: 6c75 652c 2046 616c 7365 290a 0a0a 636c  lue, False)...cl
+00008640: 6173 7320 4953 5f4e 4f54 5f45 4d50 5459  ass IS_NOT_EMPTY
+00008650: 2856 616c 6964 6174 6f72 293a 0a20 2020  (Validator):.   
+00008660: 2022 2222 0a20 2020 2045 7861 6d70 6c65   """.    Example
+00008670: 3a0a 2020 2020 2020 2020 5573 6564 2061  :.        Used a
+00008680: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
+00008690: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
+000086a0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
+000086b0: 272c 2072 6571 7569 7265 733d 4953 5f4e  ', requires=IS_N
+000086c0: 4f54 5f45 4d50 5459 2829 290a 0a20 2020  OT_EMPTY())..   
+000086d0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+000086e0: 4e4f 545f 454d 5054 5928 2928 3129 0a20  NOT_EMPTY()(1). 
+000086f0: 2020 2020 2020 2020 2020 2028 312c 204e             (1, N
+00008700: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00008710: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
+00008720: 5928 2928 3029 0a20 2020 2020 2020 2020  Y()(0).         
+00008730: 2020 2028 302c 204e 6f6e 6529 0a20 2020     (0, None).   
+00008740: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00008750: 4e4f 545f 454d 5054 5928 2928 2778 2729  NOT_EMPTY()('x')
+00008760: 0a20 2020 2020 2020 2020 2020 2028 2778  .            ('x
+00008770: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00008780: 2020 2020 203e 3e3e 2049 535f 4e4f 545f       >>> IS_NOT_
+00008790: 454d 5054 5928 2928 2720 7820 2729 0a20  EMPTY()(' x '). 
+000087a0: 2020 2020 2020 2020 2020 2028 2778 272c             ('x',
+000087b0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+000087c0: 2020 203e 3e3e 2049 535f 4e4f 545f 454d     >>> IS_NOT_EM
+000087d0: 5054 5928 2928 4e6f 6e65 290a 2020 2020  PTY()(None).    
+000087e0: 2020 2020 2020 2020 284e 6f6e 652c 2027          (None, '
+000087f0: 656e 7465 7220 6120 7661 6c75 6527 290a  enter a value').
+00008800: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00008810: 4953 5f4e 4f54 5f45 4d50 5459 2829 2827  IS_NOT_EMPTY()('
+00008820: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+00008830: 2727 2c20 2765 6e74 6572 2061 2076 616c  '', 'enter a val
+00008840: 7565 2729 0a20 2020 2020 2020 2020 2020  ue').           
+00008850: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
+00008860: 5928 2928 2720 2027 290a 2020 2020 2020  Y()('  ').      
+00008870: 2020 2020 2020 2827 272c 2027 656e 7465        ('', 'ente
+00008880: 7220 6120 7661 6c75 6527 290a 2020 2020  r a value').    
+00008890: 2020 2020 2020 2020 3e3e 3e20 4953 5f4e          >>> IS_N
+000088a0: 4f54 5f45 4d50 5459 2829 2827 205c 5c6e  OT_EMPTY()(' \\n
+000088b0: 5c5c 7427 290a 2020 2020 2020 2020 2020  \\t').          
+000088c0: 2020 2827 272c 2027 656e 7465 7220 6120    ('', 'enter a 
+000088d0: 7661 6c75 6527 290a 2020 2020 2020 2020  value').        
+000088e0: 2020 2020 3e3e 3e20 4953 5f4e 4f54 5f45      >>> IS_NOT_E
+000088f0: 4d50 5459 2829 285b 5d29 0a20 2020 2020  MPTY()([]).     
+00008900: 2020 2020 2020 2028 5b5d 2c20 2765 6e74         ([], 'ent
+00008910: 6572 2061 2076 616c 7565 2729 0a20 2020  er a value').   
+00008920: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00008930: 4e4f 545f 454d 5054 5928 656d 7074 795f  NOT_EMPTY(empty_
+00008940: 7265 6765 783d 2764 6566 2729 2827 6465  regex='def')('de
+00008950: 6627 290a 2020 2020 2020 2020 2020 2020  f').            
+00008960: 2827 272c 2027 656e 7465 7220 6120 7661  ('', 'enter a va
+00008970: 6c75 6527 290a 2020 2020 2020 2020 2020  lue').          
+00008980: 2020 3e3e 3e20 4953 5f4e 4f54 5f45 4d50    >>> IS_NOT_EMP
+00008990: 5459 2865 6d70 7479 5f72 6567 6578 3d27  TY(empty_regex='
+000089a0: 6465 5b66 675d 2729 2827 6465 6727 290a  de[fg]')('deg').
+000089b0: 2020 2020 2020 2020 2020 2020 2827 272c              ('',
+000089c0: 2027 656e 7465 7220 6120 7661 6c75 6527   'enter a value'
+000089d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000089e0: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2865  > IS_NOT_EMPTY(e
+000089f0: 6d70 7479 5f72 6567 6578 3d27 6465 6627  mpty_regex='def'
+00008a00: 2928 2761 6263 2729 0a20 2020 2020 2020  )('abc').       
+00008a10: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
+00008a20: 6529 0a20 2020 2022 2222 0a0a 2020 2020  e).    """..    
+00008a30: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00008a40: 662c 2065 7272 6f72 5f6d 6573 7361 6765  f, error_message
+00008a50: 3d22 456e 7465 7220 6120 7661 6c75 6522  ="Enter a value"
+00008a60: 2c20 656d 7074 795f 7265 6765 783d 4e6f  , empty_regex=No
+00008a70: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
+00008a80: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
+00008a90: 3d20 6572 726f 725f 6d65 7373 6167 650a  = error_message.
+00008aa0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
+00008ab0: 5f72 6567 6578 2069 7320 6e6f 7420 4e6f  _regex is not No
+00008ac0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00008ad0: 7365 6c66 2e65 6d70 7479 5f72 6567 6578  self.empty_regex
+00008ae0: 203d 2072 652e 636f 6d70 696c 6528 656d   = re.compile(em
+00008af0: 7074 795f 7265 6765 7829 0a20 2020 2020  pty_regex).     
+00008b00: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00008b10: 2020 2020 2073 656c 662e 656d 7074 795f       self.empty_
+00008b20: 7265 6765 7820 3d20 4e6f 6e65 0a0a 2020  regex = None..  
+00008b30: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
+00008b40: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
+00008b50: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
+00008b60: 2020 2020 2076 616c 7565 2c20 656d 7074       value, empt
+00008b70: 7920 3d20 6973 5f65 6d70 7479 2876 616c  y = is_empty(val
+00008b80: 7565 2c20 656d 7074 795f 7265 6765 783d  ue, empty_regex=
+00008b90: 7365 6c66 2e65 6d70 7479 5f72 6567 6578  self.empty_regex
+00008ba0: 290a 2020 2020 2020 2020 6966 2065 6d70  ).        if emp
+00008bb0: 7479 3a0a 2020 2020 2020 2020 2020 2020  ty:.            
+00008bc0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+00008bd0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+00008be0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+00008bf0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+00008c00: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
+00008c10: 0a0a 636c 6173 7320 4953 5f41 4c50 4841  ..class IS_ALPHA
+00008c20: 4e55 4d45 5249 4328 4953 5f4d 4154 4348  NUMERIC(IS_MATCH
+00008c30: 293a 0a20 2020 2022 2222 0a20 2020 2045  ):.    """.    E
+00008c40: 7861 6d70 6c65 3a0a 2020 2020 2020 2020  xample:.        
+00008c50: 5573 6564 2061 733a 3a0a 0a20 2020 2020  Used as::..     
+00008c60: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+00008c70: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
+00008c80: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
+00008c90: 733d 4953 5f41 4c50 4841 4e55 4d45 5249  s=IS_ALPHANUMERI
+00008ca0: 4328 2929 0a0a 2020 2020 2020 2020 2020  C())..          
+00008cb0: 2020 3e3e 3e20 4953 5f41 4c50 4841 4e55    >>> IS_ALPHANU
+00008cc0: 4d45 5249 4328 2928 2731 2729 0a20 2020  MERIC()('1').   
+00008cd0: 2020 2020 2020 2020 2028 2731 272c 204e           ('1', N
+00008ce0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00008cf0: 203e 3e3e 2049 535f 414c 5048 414e 554d   >>> IS_ALPHANUM
+00008d00: 4552 4943 2829 2827 2729 0a20 2020 2020  ERIC()('').     
+00008d10: 2020 2020 2020 2028 2727 2c20 4e6f 6e65         ('', None
+00008d20: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00008d30: 3e20 4953 5f41 4c50 4841 4e55 4d45 5249  > IS_ALPHANUMERI
+00008d40: 4328 2928 2741 5f61 2729 0a20 2020 2020  C()('A_a').     
+00008d50: 2020 2020 2020 2028 2741 5f61 272c 204e         ('A_a', N
+00008d60: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00008d70: 203e 3e3e 2049 535f 414c 5048 414e 554d   >>> IS_ALPHANUM
+00008d80: 4552 4943 2829 2827 2127 290a 2020 2020  ERIC()('!').    
+00008d90: 2020 2020 2020 2020 2827 2127 2c20 2765          ('!', 'e
+00008da0: 6e74 6572 206f 6e6c 7920 6c65 7474 6572  nter only letter
+00008db0: 732c 206e 756d 6265 7273 2c20 616e 6420  s, numbers, and 
+00008dc0: 756e 6465 7273 636f 7265 2729 0a20 2020  underscore').   
+00008dd0: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+00008de0: 696e 6974 5f5f 2873 656c 662c 2065 7272  init__(self, err
+00008df0: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
+00008e00: 7220 6f6e 6c79 206c 6574 7465 7273 2c20  r only letters, 
+00008e10: 6e75 6d62 6572 732c 2061 6e64 2075 6e64  numbers, and und
+00008e20: 6572 7363 6f72 6522 293a 0a20 2020 2020  erscore"):.     
+00008e30: 2020 2049 535f 4d41 5443 482e 5f5f 696e     IS_MATCH.__in
+00008e40: 6974 5f5f 2873 656c 662c 2072 225e 5b5c  it__(self, r"^[\
+00008e50: 775d 2a24 222c 2065 7272 6f72 5f6d 6573  w]*$", error_mes
+00008e60: 7361 6765 290a 0a0a 636c 6173 7320 4953  sage)...class IS
+00008e70: 5f45 4d41 494c 2856 616c 6964 6174 6f72  _EMAIL(Validator
+00008e80: 293a 0a0a 2020 2020 2222 220a 2020 2020  ):..    """.    
+00008e90: 4368 6563 6b73 2069 6620 6669 656c 6427  Checks if field'
+00008ea0: 7320 7661 6c75 6520 6973 2061 2076 616c  s value is a val
+00008eb0: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
+00008ec0: 2e20 4361 6e20 6265 2073 6574 2074 6f20  . Can be set to 
+00008ed0: 6469 7361 6c6c 6f77 0a20 2020 206f 7220  disallow.    or 
+00008ee0: 666f 7263 6520 6164 6472 6573 7365 7320  force addresses 
+00008ef0: 6672 6f6d 2063 6572 7461 696e 2064 6f6d  from certain dom
+00008f00: 6169 6e28 7329 2e0a 0a20 2020 2045 6d61  ain(s)...    Ema
+00008f10: 696c 2072 6567 6578 2061 6461 7074 6564  il regex adapted
+00008f20: 2066 726f 6d0a 2020 2020 6874 7470 3a2f   from.    http:/
+00008f30: 2f68 6161 636b 6564 2e63 6f6d 2f61 7263  /haacked.com/arc
+00008f40: 6869 7665 2f32 3030 372f 3038 2f32 312f  hive/2007/08/21/
+00008f50: 692d 6b6e 6577 2d68 6f77 2d74 6f2d 7661  i-knew-how-to-va
+00008f60: 6c69 6461 7465 2d61 6e2d 656d 6169 6c2d  lidate-an-email-
+00008f70: 6164 6472 6573 732d 756e 7469 6c2d 692e  address-until-i.
+00008f80: 6173 7078 2c0a 2020 2020 6765 6e65 7261  aspx,.    genera
+00008f90: 6c6c 7920 666f 6c6c 6f77 696e 6720 7468  lly following th
+00008fa0: 6520 5246 4373 2c20 6578 6365 7074 2074  e RFCs, except t
+00008fb0: 6861 7420 7765 2064 6973 616c 6c6f 7720  hat we disallow 
+00008fc0: 7175 6f74 6564 2073 7472 696e 6773 0a20  quoted strings. 
+00008fd0: 2020 2061 6e64 2070 6572 6d69 7420 756e     and permit un
+00008fe0: 6465 7273 636f 7265 7320 616e 6420 6c65  derscores and le
+00008ff0: 6164 696e 6720 6e75 6d65 7269 6373 2069  ading numerics i
+00009000: 6e20 7375 6264 6f6d 6169 6e20 6c61 6265  n subdomain labe
+00009010: 6c73 0a0a 2020 2020 4172 6773 3a0a 2020  ls..    Args:.  
+00009020: 2020 2020 2020 6261 6e6e 6564 3a20 7265        banned: re
+00009030: 6765 7820 7465 7874 2066 6f72 2064 6973  gex text for dis
+00009040: 616c 6c6f 7765 6420 6164 6472 6573 7320  allowed address 
+00009050: 646f 6d61 696e 730a 2020 2020 2020 2020  domains.        
+00009060: 666f 7263 6564 3a20 7265 6765 7820 7465  forced: regex te
+00009070: 7874 2066 6f72 2072 6571 7569 7265 6420  xt for required 
+00009080: 6164 6472 6573 7320 646f 6d61 696e 730a  address domains.
+00009090: 0a20 2020 2042 6f74 6820 6172 6775 6d65  .    Both argume
+000090a0: 6e74 7320 6361 6e20 616c 736f 2062 6520  nts can also be 
+000090b0: 6375 7374 6f6d 206f 626a 6563 7473 2077  custom objects w
+000090c0: 6974 6820 6120 6d61 7463 6828 7661 6c75  ith a match(valu
+000090d0: 6529 206d 6574 686f 642e 0a0a 2020 2020  e) method...    
+000090e0: 4578 616d 706c 653a 0a20 2020 2020 2020  Example:.       
+000090f0: 2043 6865 636b 2066 6f72 2076 616c 6964   Check for valid
+00009100: 2065 6d61 696c 2061 6464 7265 7373 3a3a   email address::
+00009110: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
+00009120: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
+00009130: 2c20 5f6e 616d 653d 276e 616d 6527 2c0a  , _name='name',.
+00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009150: 7265 7175 6972 6573 3d49 535f 454d 4149  requires=IS_EMAI
+00009160: 4c28 2929 0a0a 2020 2020 2020 2020 4368  L())..        Ch
+00009170: 6563 6b20 666f 7220 7661 6c69 6420 656d  eck for valid em
+00009180: 6169 6c20 6164 6472 6573 7320 7468 6174  ail address that
+00009190: 2063 616e 2774 2062 6520 6672 6f6d 2061   can't be from a
+000091a0: 202e 636f 6d20 646f 6d61 696e 3a3a 0a0a   .com domain::..
+000091b0: 2020 2020 2020 2020 2020 2020 494e 5055              INPU
+000091c0: 5428 5f74 7970 653d 2774 6578 7427 2c20  T(_type='text', 
+000091d0: 5f6e 616d 653d 276e 616d 6527 2c0a 2020  _name='name',.  
+000091e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000091f0: 7175 6972 6573 3d49 535f 454d 4149 4c28  quires=IS_EMAIL(
+00009200: 6261 6e6e 6564 3d27 5e2e 2a5c 5c2e 636f  banned='^.*\\.co
+00009210: 6d28 7c5c 5c2e 2e2a 2924 2729 290a 0a20  m(|\\..*)$')).. 
+00009220: 2020 2020 2020 2043 6865 636b 2066 6f72         Check for
+00009230: 2076 616c 6964 2065 6d61 696c 2061 6464   valid email add
+00009240: 7265 7373 2074 6861 7420 6d75 7374 2062  ress that must b
+00009250: 6520 6672 6f6d 2061 202e 6564 7520 646f  e from a .edu do
+00009260: 6d61 696e 3a3a 0a0a 2020 2020 2020 2020  main::..        
+00009270: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+00009280: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
+00009290: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
+000092a0: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
+000092b0: 535f 454d 4149 4c28 666f 7263 6564 3d27  S_EMAIL(forced='
+000092c0: 5e2e 2a5c 5c2e 6564 7528 7c5c 5c2e 2e2a  ^.*\\.edu(|\\..*
+000092d0: 2924 2729 290a 0a20 2020 2020 2020 2020  )$'))..         
+000092e0: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
+000092f0: 2928 2761 4062 2e63 6f6d 2729 0a20 2020  )('a@b.com').   
+00009300: 2020 2020 2020 2020 2028 2761 4062 2e63           ('a@b.c
+00009310: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00009320: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009330: 4149 4c28 2928 2761 6263 4064 6566 2e63  AIL()('abc@def.c
+00009340: 6f6d 2729 0a20 2020 2020 2020 2020 2020  om').           
+00009350: 2028 2761 6263 4064 6566 2e63 6f6d 272c   ('abc@def.com',
+00009360: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00009370: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
+00009380: 2928 2761 6263 4033 6465 662e 636f 6d27  )('abc@3def.com'
+00009390: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+000093a0: 6162 6340 3364 6566 2e63 6f6d 272c 204e  abc@3def.com', N
+000093b0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+000093c0: 203e 3e3e 2049 535f 454d 4149 4c28 2928   >>> IS_EMAIL()(
+000093d0: 2761 6263 4064 6566 2e75 7327 290a 2020  'abc@def.us').  
+000093e0: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
+000093f0: 6465 662e 7573 272c 204e 6f6e 6529 0a20  def.us', None). 
+00009400: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00009410: 535f 454d 4149 4c28 2928 2761 6263 4064  S_EMAIL()('abc@d
+00009420: 5f2d 662e 7573 2729 0a20 2020 2020 2020  _-f.us').       
+00009430: 2020 2020 2028 2761 6263 4064 5f2d 662e       ('abc@d_-f.
+00009440: 7573 272c 204e 6f6e 6529 0a20 2020 2020  us', None).     
+00009450: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009460: 4149 4c28 2928 2740 6465 662e 636f 6d27  AIL()('@def.com'
+00009470: 2920 2020 2020 2020 2020 2020 2320 6d69  )           # mi
+00009480: 7373 696e 6720 6e61 6d65 0a20 2020 2020  ssing name.     
+00009490: 2020 2020 2020 2028 2740 6465 662e 636f         ('@def.co
+000094a0: 6d27 2c20 2765 6e74 6572 2061 2076 616c  m', 'enter a val
+000094b0: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
+000094c0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+000094d0: 3e3e 2049 535f 454d 4149 4c28 2928 2722  >> IS_EMAIL()('"
+000094e0: 6162 6340 6465 6622 2e63 6f6d 2729 2020  abc@def".com')  
+000094f0: 2020 2020 2320 7175 6f74 6564 206e 616d      # quoted nam
+00009500: 650a 2020 2020 2020 2020 2020 2020 2827  e.            ('
+00009510: 2261 6263 4064 6566 222e 636f 6d27 2c20  "abc@def".com', 
+00009520: 2765 6e74 6572 2061 2076 616c 6964 2065  'enter a valid e
+00009530: 6d61 696c 2061 6464 7265 7373 2729 0a20  mail address'). 
+00009540: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00009550: 535f 454d 4149 4c28 2928 2761 6263 2b64  S_EMAIL()('abc+d
+00009560: 6566 2e63 6f6d 2729 2020 2020 2020 2020  ef.com')        
+00009570: 2320 6e6f 2040 0a20 2020 2020 2020 2020  # no @.         
+00009580: 2020 2028 2761 6263 2b64 6566 2e63 6f6d     ('abc+def.com
+00009590: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
+000095a0: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
+000095b0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000095c0: 3e20 4953 5f45 4d41 494c 2829 2827 6162  > IS_EMAIL()('ab
+000095d0: 6340 6465 662e 7827 2920 2020 2020 2020  c@def.x')       
+000095e0: 2020 2023 206f 6e65 2d63 6861 7220 544c     # one-char TL
+000095f0: 440a 2020 2020 2020 2020 2020 2020 2827  D.            ('
+00009600: 6162 6340 6465 662e 7827 2c20 2765 6e74  abc@def.x', 'ent
+00009610: 6572 2061 2076 616c 6964 2065 6d61 696c  er a valid email
+00009620: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+00009630: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009640: 4149 4c28 2928 2761 6263 4064 6566 2e31  AIL()('abc@def.1
+00009650: 3227 2920 2020 2020 2020 2020 2320 6e75  2')         # nu
+00009660: 6d65 7269 6320 544c 440a 2020 2020 2020  meric TLD.      
+00009670: 2020 2020 2020 2827 6162 6340 6465 662e        ('abc@def.
+00009680: 3132 272c 2027 656e 7465 7220 6120 7661  12', 'enter a va
+00009690: 6c69 6420 656d 6169 6c20 6164 6472 6573  lid email addres
+000096a0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+000096b0: 3e3e 3e20 4953 5f45 4d41 494c 2829 2827  >>> IS_EMAIL()('
+000096c0: 6162 6340 6465 662e 2e63 6f6d 2729 2020  abc@def..com')  
+000096d0: 2020 2020 2023 2064 6f75 626c 652d 646f       # double-do
+000096e0: 7420 696e 2064 6f6d 6169 6e0a 2020 2020  t in domain.    
+000096f0: 2020 2020 2020 2020 2827 6162 6340 6465          ('abc@de
+00009700: 662e 2e63 6f6d 272c 2027 656e 7465 7220  f..com', 'enter 
+00009710: 6120 7661 6c69 6420 656d 6169 6c20 6164  a valid email ad
+00009720: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+00009730: 2020 2020 3e3e 3e20 4953 5f45 4d41 494c      >>> IS_EMAIL
+00009740: 2829 2827 6162 6340 2e64 6566 2e63 6f6d  ()('abc@.def.com
+00009750: 2729 2020 2020 2020 2023 2064 6f74 2073  ')       # dot s
+00009760: 7461 7274 7320 646f 6d61 696e 0a20 2020  tarts domain.   
+00009770: 2020 2020 2020 2020 2028 2761 6263 402e           ('abc@.
+00009780: 6465 662e 636f 6d27 2c20 2765 6e74 6572  def.com', 'enter
+00009790: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
+000097a0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+000097b0: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
+000097c0: 4c28 2928 2761 6263 4064 6566 2e63 5f6d  L()('abc@def.c_m
+000097d0: 2729 2020 2020 2020 2020 2320 756e 6465  ')        # unde
+000097e0: 7273 636f 7265 2069 6e20 544c 440a 2020  rscore in TLD.  
+000097f0: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
+00009800: 6465 662e 635f 6d27 2c20 2765 6e74 6572  def.c_m', 'enter
+00009810: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
+00009820: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+00009830: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
+00009840: 4c28 2928 274e 6f74 416e 456d 6169 6c27  L()('NotAnEmail'
+00009850: 2920 2020 2020 2020 2020 2320 6d69 7373  )         # miss
+00009860: 696e 6720 400a 2020 2020 2020 2020 2020  ing @.          
+00009870: 2020 2827 4e6f 7441 6e45 6d61 696c 272c    ('NotAnEmail',
+00009880: 2027 656e 7465 7220 6120 7661 6c69 6420   'enter a valid 
+00009890: 656d 6169 6c20 6164 6472 6573 7327 290a  email address').
+000098a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000098b0: 4953 5f45 4d41 494c 2829 2827 6162 6340  IS_EMAIL()('abc@
+000098c0: 4e6f 7441 6e45 6d61 696c 2729 2020 2020  NotAnEmail')    
+000098d0: 2023 206d 6973 7369 6e67 2054 4c44 0a20   # missing TLD. 
+000098e0: 2020 2020 2020 2020 2020 2028 2761 6263             ('abc
+000098f0: 404e 6f74 416e 456d 6169 6c27 2c20 2765  @NotAnEmail', 'e
+00009900: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
+00009910: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
+00009920: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00009930: 454d 4149 4c28 2928 2763 7573 746f 6d65  EMAIL()('custome
+00009940: 722f 6465 7061 7274 6d65 6e74 4065 7861  r/department@exa
+00009950: 6d70 6c65 2e63 6f6d 2729 0a20 2020 2020  mple.com').     
+00009960: 2020 2020 2020 2028 2763 7573 746f 6d65         ('custome
+00009970: 722f 6465 7061 7274 6d65 6e74 4065 7861  r/department@exa
+00009980: 6d70 6c65 2e63 6f6d 272c 204e 6f6e 6529  mple.com', None)
+00009990: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000099a0: 2049 535f 454d 4149 4c28 2928 2724 4131   IS_EMAIL()('$A1
+000099b0: 3233 3435 4065 7861 6d70 6c65 2e63 6f6d  2345@example.com
+000099c0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+000099d0: 2724 4131 3233 3435 4065 7861 6d70 6c65  '$A12345@example
+000099e0: 2e63 6f6d 272c 204e 6f6e 6529 0a20 2020  .com', None).   
+000099f0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00009a00: 454d 4149 4c28 2928 2721 6465 6621 7879  EMAIL()('!def!xy
+00009a10: 7a25 6162 6340 6578 616d 706c 652e 636f  z%abc@example.co
+00009a20: 6d27 290a 2020 2020 2020 2020 2020 2020  m').            
+00009a30: 2827 2164 6566 2178 797a 2561 6263 4065  ('!def!xyz%abc@e
+00009a40: 7861 6d70 6c65 2e63 6f6d 272c 204e 6f6e  xample.com', Non
+00009a50: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00009a60: 3e3e 2049 535f 454d 4149 4c28 2928 275f  >> IS_EMAIL()('_
+00009a70: 596f 7365 6d69 7465 2e53 616d 4065 7861  Yosemite.Sam@exa
+00009a80: 6d70 6c65 2e63 6f6d 2729 0a20 2020 2020  mple.com').     
+00009a90: 2020 2020 2020 2028 275f 596f 7365 6d69         ('_Yosemi
+00009aa0: 7465 2e53 616d 4065 7861 6d70 6c65 2e63  te.Sam@example.c
+00009ab0: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00009ac0: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009ad0: 4149 4c28 2928 277e 4065 7861 6d70 6c65  AIL()('~@example
+00009ae0: 2e63 6f6d 2729 0a20 2020 2020 2020 2020  .com').         
+00009af0: 2020 2028 277e 4065 7861 6d70 6c65 2e63     ('~@example.c
+00009b00: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00009b10: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009b20: 4149 4c28 2928 272e 776f 6f6c 7940 6578  AIL()('.wooly@ex
+00009b30: 616d 706c 652e 636f 6d27 2920 2020 2020  ample.com')     
+00009b40: 2020 2320 646f 7420 7374 6172 7473 206e    # dot starts n
+00009b50: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
+00009b60: 2827 2e77 6f6f 6c79 4065 7861 6d70 6c65  ('.wooly@example
+00009b70: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
+00009b80: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
+00009b90: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00009ba0: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
+00009bb0: 2827 776f 2e2e 6f6c 7940 6578 616d 706c  ('wo..oly@exampl
+00009bc0: 652e 636f 6d27 2920 2020 2020 2023 2061  e.com')      # a
+00009bd0: 646a 6163 656e 7420 646f 7473 2069 6e20  djacent dots in 
+00009be0: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
+00009bf0: 2028 2777 6f2e 2e6f 6c79 4065 7861 6d70   ('wo..oly@examp
+00009c00: 6c65 2e63 6f6d 272c 2027 656e 7465 7220  le.com', 'enter 
+00009c10: 6120 7661 6c69 6420 656d 6169 6c20 6164  a valid email ad
+00009c20: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+00009c30: 2020 2020 3e3e 3e20 4953 5f45 4d41 494c      >>> IS_EMAIL
+00009c40: 2829 2827 706f 6f74 6965 7461 6e67 2e40  ()('pootietang.@
+00009c50: 6578 616d 706c 652e 636f 6d27 2920 2023  example.com')  #
+00009c60: 2064 6f74 2065 6e64 7320 6e61 6d65 0a20   dot ends name. 
+00009c70: 2020 2020 2020 2020 2020 2028 2770 6f6f             ('poo
+00009c80: 7469 6574 616e 672e 4065 7861 6d70 6c65  tietang.@example
+00009c90: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
+00009ca0: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
+00009cb0: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00009cc0: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
+00009cd0: 2827 2e40 6578 616d 706c 652e 636f 6d27  ('.@example.com'
+00009ce0: 2920 2020 2020 2020 2020 2020 2023 206e  )            # n
+00009cf0: 616d 6520 6973 2062 6172 6520 646f 740a  ame is bare dot.
+00009d00: 2020 2020 2020 2020 2020 2020 2827 2e40              ('.@
+00009d10: 6578 616d 706c 652e 636f 6d27 2c20 2765  example.com', 'e
+00009d20: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
+00009d30: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
+00009d40: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00009d50: 454d 4149 4c28 2928 2749 6d61 2e46 6f6f  EMAIL()('Ima.Foo
+00009d60: 6c40 6578 616d 706c 652e 636f 6d27 290a  l@example.com').
+00009d70: 2020 2020 2020 2020 2020 2020 2827 496d              ('Im
+00009d80: 612e 466f 6f6c 4065 7861 6d70 6c65 2e63  a.Fool@example.c
+00009d90: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00009da0: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009db0: 4149 4c28 2928 2749 6d61 2046 6f6f 6c40  AIL()('Ima Fool@
+00009dc0: 6578 616d 706c 652e 636f 6d27 2920 2020  example.com')   
+00009dd0: 2020 2320 7370 6163 6520 696e 206e 616d    # space in nam
+00009de0: 650a 2020 2020 2020 2020 2020 2020 2827  e.            ('
+00009df0: 496d 6120 466f 6f6c 4065 7861 6d70 6c65  Ima Fool@example
+00009e00: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
+00009e10: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
+00009e20: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00009e30: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
+00009e40: 2827 6c6f 6361 6c67 7579 406c 6f63 616c  ('localguy@local
+00009e50: 686f 7374 2729 2020 2020 2020 2023 206c  host')       # l
+00009e60: 6f63 616c 686f 7374 2061 7320 646f 6d61  ocalhost as doma
+00009e70: 696e 0a20 2020 2020 2020 2020 2020 2028  in.            (
+00009e80: 276c 6f63 616c 6775 7940 6c6f 6361 6c68  'localguy@localh
+00009e90: 6f73 7427 2c20 4e6f 6e65 290a 0a20 2020  ost', None)..   
+00009ea0: 2022 2222 0a0a 2020 2020 2320 4e4f 5445   """..    # NOTE
+00009eb0: 3a20 7573 6520 7468 6573 6520 7769 7468  : use these with
+00009ec0: 2066 6c61 6773 203d 2072 652e 5645 5242   flags = re.VERB
+00009ed0: 4f53 4520 7c20 7265 2e49 474e 4f52 4543  OSE | re.IGNOREC
+00009ee0: 4153 450a 2020 2020 5245 4745 585f 424f  ASE.    REGEX_BO
+00009ef0: 4459 203d 2072 2222 220a 2020 2020 2020  DY = r""".      
+00009f00: 2020 5e28 3f21 5c2e 2920 2020 2020 2020    ^(?!\.)       
+00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009f20: 2020 2020 2320 6e61 6d65 206d 6179 206e      # name may n
+00009f30: 6f74 2062 6567 696e 2077 6974 6820 6120  ot begin with a 
+00009f40: 646f 740a 2020 2020 2020 2020 280a 2020  dot.        (.  
+00009f50: 2020 2020 2020 2020 5b2d 612d 7a30 2d39          [-a-z0-9
+00009f60: 215c 2324 2526 272a 2b2f 3d3f 5e5f 607b  !\#$%&'*+/=?^_`{
+00009f70: 7c7d 7e5d 2020 2020 2320 616c 6c20 6c65  |}~]    # all le
+00009f80: 6761 6c20 6368 6172 6163 7465 7273 2065  gal characters e
+00009f90: 7863 6570 7420 646f 740a 2020 2020 2020  xcept dot.      
+00009fa0: 2020 2020 7c0a 2020 2020 2020 2020 2020      |.          
+00009fb0: 283f 3c21 5c2e 295c 2e20 2020 2020 2020  (?<!\.)\.       
+00009fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009fd0: 2320 7369 6e67 6c65 2064 6f74 7320 6f6e  # single dots on
+00009fe0: 6c79 0a20 2020 2020 2020 2029 2b0a 2020  ly.        )+.  
+00009ff0: 2020 2020 2020 283f 3c21 5c2e 2924 2020        (?<!\.)$  
+0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a010: 2020 2020 2020 2020 2320 6e61 6d65 206d          # name m
+0000a020: 6179 206e 6f74 2065 6e64 2077 6974 6820  ay not end with 
+0000a030: 6120 646f 740a 2020 2020 2222 220a 2020  a dot.    """.  
+0000a040: 2020 5245 4745 585f 444f 4d41 494e 203d    REGEX_DOMAIN =
+0000a050: 2072 2222 220a 2020 2020 2020 2020 280a   r""".        (.
+0000a060: 2020 2020 2020 2020 2020 6c6f 6361 6c68            localh
+0000a070: 6f73 740a 2020 2020 2020 2020 2020 7c0a  ost.          |.
+0000a080: 2020 2020 2020 2020 2020 280a 2020 2020            (.    
+0000a090: 2020 2020 2020 2020 5b61 2d7a 302d 395d          [a-z0-9]
+0000a0a0: 2020 2020 2020 2320 5b73 7562 5d64 6f6d        # [sub]dom
+0000a0b0: 6169 6e20 6265 6769 6e73 2077 6974 6820  ain begins with 
+0000a0c0: 616c 7068 616e 756d 6572 6963 0a20 2020  alphanumeric.   
+0000a0d0: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
+0000a0e0: 2020 2020 2020 2020 205b 2d5c 775d 2a20           [-\w]* 
+0000a0f0: 2020 2020 2023 2061 6c70 6861 6e75 6d65       # alphanume
+0000a100: 7269 632c 2075 6e64 6572 7363 6f72 652c  ric, underscore,
+0000a110: 2064 6f74 2c20 6879 7068 656e 0a20 2020   dot, hyphen.   
+0000a120: 2020 2020 2020 2020 2020 205b 612d 7a30             [a-z0
+0000a130: 2d39 5d20 2020 2023 2065 6e64 696e 6720  -9]    # ending 
+0000a140: 616c 7068 616e 756d 6572 6963 0a20 2020  alphanumeric.   
+0000a150: 2020 2020 2020 2020 2029 3f0a 2020 2020           )?.    
+0000a160: 2020 2020 2020 5c2e 2020 2020 2020 2020        \.        
+0000a170: 2020 2020 2020 2320 656e 6469 6e67 2064        # ending d
+0000a180: 6f74 0a20 2020 2020 2020 2020 2029 2b0a  ot.          )+.
+0000a190: 2020 2020 2020 2020 2020 5b61 2d7a 5d7b            [a-z]{
+0000a1a0: 322c 7d20 2020 2020 2020 2320 544c 4420  2,}       # TLD 
+0000a1b0: 616c 7068 612d 6f6e 6c79 0a20 2020 2020  alpha-only.     
+0000a1c0: 2020 2924 0a20 2020 2022 2222 0a20 2020    )$.    """.   
+0000a1d0: 2023 2072 6567 6578 5f70 726f 706f 7365   # regex_propose
+0000a1e0: 645f 6275 745f 6661 696c 6564 203d 2072  d_but_failed = r
+0000a1f0: 652e 636f 6d70 696c 6528 7227 5e28 5b5c  e.compile(r'^([\
+0000a200: 775c 215c 2324 5c25 5c26 5c27 5c2a 5c2b  w\!\#$\%\&\'\*\+
+0000a210: 5c2d 5c2f 5c3d 5c3f 5c5e 5c60 7b5c 7c5c  \-\/\=\?\^\`{\|\
+0000a220: 7d5c 7e5d 2b5c 2e29 2a5b 5c77 5c21 5c23  }\~]+\.)*[\w\!\#
+0000a230: 245c 255c 265c 275c 2a5c 2b5c 2d5c 2f5c  $\%\&\'\*\+\-\/\
+0000a240: 3d5c 3f5c 5e5c 607b 5c7c 5c7d 5c7e 5d2b  =\?\^\`{\|\}\~]+
+0000a250: 4028 2828 2828 5b61 2d7a 302d 395d 7b31  @((((([a-z0-9]{1
+0000a260: 7d5b 612d 7a30 2d39 5c2d 5d7b 302c 3632  }[a-z0-9\-]{0,62
+0000a270: 7d5b 612d 7a30 2d39 5d7b 317d 297c 5b61  }[a-z0-9]{1})|[a
+0000a280: 2d7a 5d29 5c2e 292b 5b61 2d7a 5d7b 322c  -z])\.)+[a-z]{2,
+0000a290: 367d 297c 285c 647b 312c 337d 5c2e 297b  6})|(\d{1,3}\.){
+0000a2a0: 337d 5c64 7b31 2c33 7d28 5c3a 5c64 7b31  3}\d{1,3}(\:\d{1
+0000a2b0: 2c35 7d29 3f29 2427 2c20 7265 2e56 4552  ,5})?)$', re.VER
+0000a2c0: 424f 5345 207c 2072 652e 4947 4e4f 5245  BOSE | re.IGNORE
+0000a2d0: 4341 5345 290a 0a20 2020 2064 6566 205f  CASE)..    def _
+0000a2e0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0000a2f0: 2073 656c 662c 2062 616e 6e65 643d 4e6f   self, banned=No
+0000a300: 6e65 2c20 666f 7263 6564 3d4e 6f6e 652c  ne, forced=None,
+0000a310: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+0000a320: 456e 7465 7220 6120 7661 6c69 6420 656d  Enter a valid em
+0000a330: 6169 6c20 6164 6472 6573 7322 0a20 2020  ail address".   
+0000a340: 2029 3a0a 2020 2020 2020 2020 6966 2069   ):.        if i
+0000a350: 7369 6e73 7461 6e63 6528 6261 6e6e 6564  sinstance(banned
+0000a360: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+0000a370: 2020 2020 6261 6e6e 6564 203d 2072 652e      banned = re.
+0000a380: 636f 6d70 696c 6528 6261 6e6e 6564 290a  compile(banned).
+0000a390: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0000a3a0: 7461 6e63 6528 666f 7263 6564 2c20 7374  tance(forced, st
+0000a3b0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000a3c0: 666f 7263 6564 203d 2072 652e 636f 6d70  forced = re.comp
+0000a3d0: 696c 6528 666f 7263 6564 290a 2020 2020  ile(forced).    
+0000a3e0: 2020 2020 7365 6c66 2e62 616e 6e65 6420      self.banned 
+0000a3f0: 3d20 6261 6e6e 6564 0a20 2020 2020 2020  = banned.       
+0000a400: 2073 656c 662e 666f 7263 6564 203d 2066   self.forced = f
+0000a410: 6f72 6365 640a 2020 2020 2020 2020 7365  orced.        se
+0000a420: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+0000a430: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
+0000a440: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
+0000a450: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+0000a460: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
+0000a470: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
+0000a480: 2020 2020 2020 2020 2020 6e6f 7420 2869            not (i
+0000a490: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+0000a4a0: 2028 6261 7365 7374 7269 6e67 2c20 756e   (basestring, un
+0000a4b0: 6963 6f64 6554 2929 290a 2020 2020 2020  icodeT))).      
+0000a4c0: 2020 2020 2020 6f72 206e 6f74 2076 616c        or not val
+0000a4d0: 7565 0a20 2020 2020 2020 2020 2020 206f  ue.            o
+0000a4e0: 7220 2240 2220 6e6f 7420 696e 2076 616c  r "@" not in val
+0000a4f0: 7565 0a20 2020 2020 2020 2029 3a0a 2020  ue.        ):.  
+0000a500: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000a510: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+0000a520: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+0000a530: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+0000a540: 6765 2929 0a0a 2020 2020 2020 2020 626f  ge))..        bo
+0000a550: 6479 2c20 646f 6d61 696e 203d 2076 616c  dy, domain = val
+0000a560: 7565 2e72 7370 6c69 7428 2240 222c 2031  ue.rsplit("@", 1
+0000a570: 290a 0a20 2020 2020 2020 2074 7279 3a0a  )..        try:.
+0000a580: 2020 2020 2020 2020 2020 2020 7265 6765              rege
+0000a590: 785f 666c 6167 7320 3d20 7265 2e56 4552  x_flags = re.VER
+0000a5a0: 424f 5345 207c 2072 652e 4947 4e4f 5245  BOSE | re.IGNORE
+0000a5b0: 4341 5345 0a20 2020 2020 2020 2020 2020  CASE.           
+0000a5c0: 206d 6174 6368 5f62 6f64 7920 3d20 7265   match_body = re
+0000a5d0: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
+0000a5e0: 585f 424f 4459 2c20 626f 6479 2c20 7265  X_BODY, body, re
+0000a5f0: 6765 785f 666c 6167 7329 0a20 2020 2020  gex_flags).     
+0000a600: 2020 2020 2020 206d 6174 6368 5f64 6f6d         match_dom
+0000a610: 6169 6e20 3d20 7265 2e6d 6174 6368 2873  ain = re.match(s
+0000a620: 656c 662e 5245 4745 585f 444f 4d41 494e  elf.REGEX_DOMAIN
+0000a630: 2c20 646f 6d61 696e 2c20 7265 6765 785f  , domain, regex_
+0000a640: 666c 6167 7329 0a0a 2020 2020 2020 2020  flags)..        
+0000a650: 2020 2020 6966 206e 6f74 206d 6174 6368      if not match
+0000a660: 5f64 6f6d 6169 6e3a 0a20 2020 2020 2020  _domain:.       
+0000a670: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+0000a680: 2066 6f72 2049 6e74 6572 6e61 7469 6f6e   for Internation
+0000a690: 616c 697a 6564 2044 6f6d 6169 6e20 4e61  alized Domain Na
+0000a6a0: 6d65 730a 2020 2020 2020 2020 2020 2020  mes.            
+0000a6b0: 2020 2020 2320 7365 6520 6874 7470 733a      # see https:
+0000a6c0: 2f2f 646f 6373 2e70 7974 686f 6e2e 6f72  //docs.python.or
+0000a6d0: 672f 322f 6c69 6272 6172 792f 636f 6465  g/2/library/code
+0000a6e0: 6373 2e68 746d 6c23 6d6f 6475 6c65 2d65  cs.html#module-e
+0000a6f0: 6e63 6f64 696e 6773 2e69 646e 610a 2020  ncodings.idna.  
+0000a700: 2020 2020 2020 2020 2020 2020 2020 646f                do
+0000a710: 6d61 696e 5f65 6e63 6f64 6564 203d 2074  main_encoded = t
+0000a720: 6f5f 756e 6963 6f64 6528 646f 6d61 696e  o_unicode(domain
+0000a730: 292e 656e 636f 6465 2822 6964 6e61 2229  ).encode("idna")
+0000a740: 2e64 6563 6f64 6528 2261 7363 6969 2229  .decode("ascii")
+0000a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a760: 206d 6174 6368 5f64 6f6d 6169 6e20 3d20   match_domain = 
+0000a770: 7265 2e6d 6174 6368 2873 656c 662e 5245  re.match(self.RE
+0000a780: 4745 585f 444f 4d41 494e 2c20 646f 6d61  GEX_DOMAIN, doma
+0000a790: 696e 5f65 6e63 6f64 6564 2c20 7265 6765  in_encoded, rege
+0000a7a0: 785f 666c 6167 7329 0a0a 2020 2020 2020  x_flags)..      
+0000a7b0: 2020 2020 2020 6d61 7463 6820 3d20 286d        match = (m
+0000a7c0: 6174 6368 5f62 6f64 7920 6973 206e 6f74  atch_body is not
+0000a7d0: 204e 6f6e 6529 2061 6e64 2028 6d61 7463   None) and (matc
+0000a7e0: 685f 646f 6d61 696e 2069 7320 6e6f 7420  h_domain is not 
+0000a7f0: 4e6f 6e65 290a 2020 2020 2020 2020 6578  None).        ex
+0000a800: 6365 7074 2028 5479 7065 4572 726f 722c  cept (TypeError,
+0000a810: 2055 6e69 636f 6465 4572 726f 7229 3a0a   UnicodeError):.
+0000a820: 2020 2020 2020 2020 2020 2020 2320 5661              # Va
+0000a830: 6c75 6520 6d61 7920 6e6f 7420 6265 2061  lue may not be a
+0000a840: 2073 7472 696e 6720 7768 6572 6520 7765   string where we
+0000a850: 2063 616e 206c 6f6f 6b20 666f 7220 6d61   can look for ma
+0000a860: 7463 6865 732e 0a20 2020 2020 2020 2020  tches..         
+0000a870: 2020 2023 2045 7861 6d70 6c65 3a20 7765     # Example: we
+0000a880: 2772 6520 6361 6c6c 696e 6720 414e 595f  're calling ANY_
+0000a890: 4f46 2066 6f72 6d61 7474 6572 2061 6e64  OF formatter and
+0000a8a0: 2049 535f 454d 4149 4c20 6973 2061 736b   IS_EMAIL is ask
+0000a8b0: 6564 2074 6f20 7661 6c69 6461 7465 2061  ed to validate a
+0000a8c0: 2064 6174 652e 0a20 2020 2020 2020 2020   date..         
+0000a8d0: 2020 206d 6174 6368 203d 204e 6f6e 650a     match = None.
+0000a8e0: 2020 2020 2020 2020 6966 206d 6174 6368          if match
+0000a8f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0000a900: 2028 6e6f 7420 7365 6c66 2e62 616e 6e65   (not self.banne
+0000a910: 6420 6f72 206e 6f74 2073 656c 662e 6261  d or not self.ba
+0000a920: 6e6e 6564 2e6d 6174 6368 2864 6f6d 6169  nned.match(domai
+0000a930: 6e29 2920 616e 6420 280a 2020 2020 2020  n)) and (.      
+0000a940: 2020 2020 2020 2020 2020 6e6f 7420 7365            not se
+0000a950: 6c66 2e66 6f72 6365 6420 6f72 2073 656c  lf.forced or sel
+0000a960: 662e 666f 7263 6564 2e6d 6174 6368 2864  f.forced.match(d
+0000a970: 6f6d 6169 6e29 0a20 2020 2020 2020 2020  omain).         
+0000a980: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+0000a990: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+0000a9a0: 7565 0a20 2020 2020 2020 2072 6169 7365  ue.        raise
+0000a9b0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+0000a9c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+0000a9d0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+0000a9e0: 6167 6529 290a 0a0a 636c 6173 7320 4953  age))...class IS
+0000a9f0: 5f4c 4953 545f 4f46 5f45 4d41 494c 5328  _LIST_OF_EMAILS(
+0000aa00: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
+0000aa10: 2222 220a 2020 2020 4578 616d 706c 653a  """.    Example:
+0000aa20: 0a20 2020 2020 2020 2055 7365 6420 6173  .        Used as
+0000aa30: 3a3a 0a0a 2020 2020 2020 2020 4669 656c  ::..        Fiel
+0000aa40: 6428 2765 6d61 696c 7327 2c20 276c 6973  d('emails', 'lis
+0000aa50: 743a 7374 7269 6e67 272c 0a20 2020 2020  t:string',.     
+0000aa60: 2020 2020 2020 2020 2077 6964 6765 743d           widget=
+0000aa70: 5351 4c46 4f52 4d2e 7769 6467 6574 732e  SQLFORM.widgets.
+0000aa80: 7465 7874 2e77 6964 6765 742c 0a20 2020  text.widget,.   
+0000aa90: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+0000aaa0: 7265 733d 4953 5f4c 4953 545f 4f46 5f45  res=IS_LIST_OF_E
+0000aab0: 4d41 494c 5328 292c 0a20 2020 2020 2020  MAILS(),.       
+0000aac0: 2020 2020 2020 2072 6570 7265 7365 6e74         represent
+0000aad0: 3d6c 616d 6264 6120 762c 2072 3a20 5c0a  =lambda v, r: \.
+0000aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aaf0: 584d 4c28 272c 2027 2e6a 6f69 6e28 5b41  XML(', '.join([A
+0000ab00: 2878 2c20 5f68 7265 663d 276d 6169 6c74  (x, _href='mailt
+0000ab10: 6f3a 272b 7829 2e78 6d6c 2829 2066 6f72  o:'+x).xml() for
+0000ab20: 2078 2069 6e20 2876 206f 7220 5b5d 295d   x in (v or [])]
+0000ab30: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+0000ab40: 290a 2020 2020 2222 220a 0a20 2020 2052  ).    """..    R
+0000ab50: 4547 4558 5f4e 4f54 5f45 4d41 494c 5f53  EGEX_NOT_EMAIL_S
+0000ab60: 504c 4954 5445 5220 3d20 7222 5b5e 2c3b  PLITTER = r"[^,;
+0000ab70: 5c73 5d2b 220a 0a20 2020 2064 6566 205f  \s]+"..    def _
+0000ab80: 5f69 6e69 745f 5f28 7365 6c66 2c20 6572  _init__(self, er
+0000ab90: 726f 725f 6d65 7373 6167 653d 2249 6e76  ror_message="Inv
+0000aba0: 616c 6964 2065 6d61 696c 733a 2025 7322  alid emails: %s"
+0000abb0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000abc0: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
+0000abd0: 6572 726f 725f 6d65 7373 6167 650a 0a20  error_message.. 
+0000abe0: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+0000abf0: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+0000ac00: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+0000ac10: 2020 2020 2020 6261 645f 656d 6169 6c73        bad_emails
+0000ac20: 203d 205b 5d0a 2020 2020 2020 2020 6620   = [].        f 
+0000ac30: 3d20 4953 5f45 4d41 494c 2829 0a20 2020  = IS_EMAIL().   
+0000ac40: 2020 2020 2066 6f72 2065 6d61 696c 2069       for email i
+0000ac50: 6e20 7265 2e66 696e 6461 6c6c 2873 656c  n re.findall(sel
+0000ac60: 662e 5245 4745 585f 4e4f 545f 454d 4149  f.REGEX_NOT_EMAI
+0000ac70: 4c5f 5350 4c49 5454 4552 2c20 7661 6c75  L_SPLITTER, valu
+0000ac80: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+0000ac90: 6572 726f 7220 3d20 6628 656d 6169 6c29  error = f(email)
+0000aca0: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
+0000acb0: 6966 2065 7272 6f72 2061 6e64 2065 6d61  if error and ema
+0000acc0: 696c 206e 6f74 2069 6e20 6261 645f 656d  il not in bad_em
+0000acd0: 6169 6c73 3a0a 2020 2020 2020 2020 2020  ails:.          
+0000ace0: 2020 2020 2020 6261 645f 656d 6169 6c73        bad_emails
+0000acf0: 2e61 7070 656e 6428 656d 6169 6c29 0a20  .append(email). 
+0000ad00: 2020 2020 2020 2069 6620 6261 645f 656d         if bad_em
+0000ad10: 6169 6c73 3a0a 2020 2020 2020 2020 2020  ails:.          
+0000ad20: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+0000ad30: 6f6e 4572 726f 7228 0a20 2020 2020 2020  onError(.       
+0000ad40: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000ad50: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+0000ad60: 726f 725f 6d65 7373 6167 6529 2025 2022  ror_message) % "
+0000ad70: 2c20 222e 6a6f 696e 2862 6164 5f65 6d61  , ".join(bad_ema
+0000ad80: 696c 7329 0a20 2020 2020 2020 2020 2020  ils).           
+0000ad90: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
+0000ada0: 6e20 7661 6c75 650a 0a20 2020 2064 6566  n value..    def
+0000adb0: 2066 6f72 6d61 7474 6572 2873 656c 662c   formatter(self,
+0000adc0: 2076 616c 7565 2c20 726f 773d 4e6f 6e65   value, row=None
+0000add0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+0000ade0: 6e20 222c 2022 2e6a 6f69 6e28 7661 6c75  n ", ".join(valu
+0000adf0: 6520 6f72 205b 5d29 0a0a 0a23 2055 524c  e or [])...# URL
+0000ae00: 2073 6368 656d 6520 736f 7572 6365 3a0a   scheme source:.
+0000ae10: 2320 3c68 7474 703a 2f2f 656e 2e77 696b  # <http://en.wik
+0000ae20: 6970 6564 6961 2e6f 7267 2f77 696b 692f  ipedia.org/wiki/
+0000ae30: 5552 495f 7363 6865 6d65 3e20 6f62 7461  URI_scheme> obta
+0000ae40: 696e 6564 206f 6e20 3230 3038 2d4e 6f76  ined on 2008-Nov
+0000ae50: 2d31 300a 0a6f 6666 6963 6961 6c5f 7572  -10..official_ur
+0000ae60: 6c5f 7363 6865 6d65 7320 3d20 5b0a 2020  l_schemes = [.  
+0000ae70: 2020 2261 6161 222c 0a20 2020 2022 6161    "aaa",.    "aa
+0000ae80: 6173 222c 0a20 2020 2022 6163 6170 222c  as",.    "acap",
+0000ae90: 0a20 2020 2022 6361 7022 2c0a 2020 2020  .    "cap",.    
+0000aea0: 2263 6964 222c 0a20 2020 2022 6372 6964  "cid",.    "crid
+0000aeb0: 222c 0a20 2020 2022 6461 7461 222c 0a20  ",.    "data",. 
+0000aec0: 2020 2022 6461 7622 2c0a 2020 2020 2264     "dav",.    "d
+0000aed0: 6963 7422 2c0a 2020 2020 2264 6e73 222c  ict",.    "dns",
+0000aee0: 0a20 2020 2022 6661 7822 2c0a 2020 2020  .    "fax",.    
+0000aef0: 2266 696c 6522 2c0a 2020 2020 2266 7470  "file",.    "ftp
+0000af00: 222c 0a20 2020 2022 676f 222c 0a20 2020  ",.    "go",.   
+0000af10: 2022 676f 7068 6572 222c 0a20 2020 2022   "gopher",.    "
+0000af20: 6833 3233 222c 0a20 2020 2022 6874 7470  h323",.    "http
+0000af30: 222c 0a20 2020 2022 6874 7470 7322 2c0a  ",.    "https",.
+0000af40: 2020 2020 2269 6361 7022 2c0a 2020 2020      "icap",.    
+0000af50: 2269 6d22 2c0a 2020 2020 2269 6d61 7022  "im",.    "imap"
+0000af60: 2c0a 2020 2020 2269 6e66 6f22 2c0a 2020  ,.    "info",.  
+0000af70: 2020 2269 7070 222c 0a20 2020 2022 6972    "ipp",.    "ir
+0000af80: 6973 222c 0a20 2020 2022 6972 6973 2e62  is",.    "iris.b
+0000af90: 6565 7022 2c0a 2020 2020 2269 7269 732e  eep",.    "iris.
+0000afa0: 7870 6322 2c0a 2020 2020 2269 7269 732e  xpc",.    "iris.
+0000afb0: 7870 6373 222c 0a20 2020 2022 6972 6973  xpcs",.    "iris
+0000afc0: 2e6c 7773 222c 0a20 2020 2022 6c64 6170  .lws",.    "ldap
+0000afd0: 222c 0a20 2020 2022 6d61 696c 746f 222c  ",.    "mailto",
+0000afe0: 0a20 2020 2022 6d69 6422 2c0a 2020 2020  .    "mid",.    
+0000aff0: 226d 6f64 656d 222c 0a20 2020 2022 6d73  "modem",.    "ms
+0000b000: 7270 222c 0a20 2020 2022 6d73 7270 7322  rp",.    "msrps"
+0000b010: 2c0a 2020 2020 226d 7471 7022 2c0a 2020  ,.    "mtqp",.  
+0000b020: 2020 226d 7570 6461 7465 222c 0a20 2020    "mupdate",.   
+0000b030: 2022 6e65 7773 222c 0a20 2020 2022 6e66   "news",.    "nf
+0000b040: 7322 2c0a 2020 2020 226e 6e74 7022 2c0a  s",.    "nntp",.
+0000b050: 2020 2020 226f 7061 7175 656c 6f63 6b74      "opaquelockt
+0000b060: 6f6b 656e 222c 0a20 2020 2022 706f 7022  oken",.    "pop"
+0000b070: 2c0a 2020 2020 2270 7265 7322 2c0a 2020  ,.    "pres",.  
+0000b080: 2020 2270 726f 7370 6572 6f22 2c0a 2020    "prospero",.  
+0000b090: 2020 2272 7473 7022 2c0a 2020 2020 2273    "rtsp",.    "s
+0000b0a0: 6572 7669 6365 222c 0a20 2020 2022 7368  ervice",.    "sh
+0000b0b0: 7474 7022 2c0a 2020 2020 2273 6970 222c  ttp",.    "sip",
+0000b0c0: 0a20 2020 2022 7369 7073 222c 0a20 2020  .    "sips",.   
+0000b0d0: 2022 736e 6d70 222c 0a20 2020 2022 736f   "snmp",.    "so
+0000b0e0: 6170 2e62 6565 7022 2c0a 2020 2020 2273  ap.beep",.    "s
+0000b0f0: 6f61 702e 6265 6570 7322 2c0a 2020 2020  oap.beeps",.    
+0000b100: 2274 6167 222c 0a20 2020 2022 7465 6c22  "tag",.    "tel"
+0000b110: 2c0a 2020 2020 2274 656c 6e65 7422 2c0a  ,.    "telnet",.
+0000b120: 2020 2020 2274 6674 7022 2c0a 2020 2020      "tftp",.    
+0000b130: 2274 6869 736d 6573 7361 6765 222c 0a20  "thismessage",. 
+0000b140: 2020 2022 7469 7022 2c0a 2020 2020 2274     "tip",.    "t
+0000b150: 7622 2c0a 2020 2020 2275 726e 222c 0a20  v",.    "urn",. 
+0000b160: 2020 2022 7665 6d6d 6922 2c0a 2020 2020     "vemmi",.    
+0000b170: 2277 6169 7322 2c0a 2020 2020 2278 6d6c  "wais",.    "xml
+0000b180: 7270 632e 6265 6570 222c 0a20 2020 2022  rpc.beep",.    "
+0000b190: 786d 6c72 7063 2e62 6565 7022 2c0a 2020  xmlrpc.beep",.  
+0000b1a0: 2020 2278 6d70 7022 2c0a 2020 2020 227a    "xmpp",.    "z
+0000b1b0: 3339 2e35 3072 222c 0a20 2020 2022 7a33  39.50r",.    "z3
+0000b1c0: 392e 3530 7322 2c0a 5d0a 756e 6f66 6669  9.50s",.].unoffi
+0000b1d0: 6369 616c 5f75 726c 5f73 6368 656d 6573  cial_url_schemes
+0000b1e0: 203d 205b 0a20 2020 2022 6162 6f75 7422   = [.    "about"
+0000b1f0: 2c0a 2020 2020 2261 6469 756d 7874 7261  ,.    "adiumxtra
+0000b200: 222c 0a20 2020 2022 6169 6d22 2c0a 2020  ",.    "aim",.  
+0000b210: 2020 2261 6670 222c 0a20 2020 2022 6177    "afp",.    "aw
+0000b220: 222c 0a20 2020 2022 6361 6c6c 746f 222c  ",.    "callto",
+0000b230: 0a20 2020 2022 6368 726f 6d65 222c 0a20  .    "chrome",. 
+0000b240: 2020 2022 6376 7322 2c0a 2020 2020 2265     "cvs",.    "e
+0000b250: 6432 6b22 2c0a 2020 2020 2266 6565 6422  d2k",.    "feed"
+0000b260: 2c0a 2020 2020 2266 6973 6822 2c0a 2020  ,.    "fish",.  
+0000b270: 2020 2267 6722 2c0a 2020 2020 2267 697a    "gg",.    "giz
+0000b280: 6d6f 7072 6f6a 6563 7422 2c0a 2020 2020  moproject",.    
+0000b290: 2269 6178 3222 2c0a 2020 2020 2269 7263  "iax2",.    "irc
+0000b2a0: 222c 0a20 2020 2022 6972 6373 222c 0a20  ",.    "ircs",. 
+0000b2b0: 2020 2022 6974 6d73 222c 0a20 2020 2022     "itms",.    "
+0000b2c0: 6a61 7222 2c0a 2020 2020 226a 6176 6173  jar",.    "javas
+0000b2d0: 6372 6970 7422 2c0a 2020 2020 226b 6579  cript",.    "key
+0000b2e0: 7061 7263 222c 0a20 2020 2022 6c61 7374  parc",.    "last
+0000b2f0: 666d 222c 0a20 2020 2022 6c64 6170 7322  fm",.    "ldaps"
+0000b300: 2c0a 2020 2020 226d 6167 6e65 7422 2c0a  ,.    "magnet",.
+0000b310: 2020 2020 226d 6d73 222c 0a20 2020 2022      "mms",.    "
+0000b320: 6d73 6e69 6d22 2c0a 2020 2020 226d 766e  msnim",.    "mvn
+0000b330: 222c 0a20 2020 2022 6e6f 7465 7322 2c0a  ",.    "notes",.
+0000b340: 2020 2020 226e 7366 7722 2c0a 2020 2020      "nsfw",.    
+0000b350: 2270 7379 6322 2c0a 2020 2020 2270 6170  "psyc",.    "pap
+0000b360: 6172 617a 7a69 3a68 7474 7022 2c0a 2020  arazzi:http",.  
+0000b370: 2020 2272 6d69 222c 0a20 2020 2022 7273    "rmi",.    "rs
+0000b380: 796e 6322 2c0a 2020 2020 2273 6563 6f6e  ync",.    "secon
+0000b390: 646c 6966 6522 2c0a 2020 2020 2273 676e  dlife",.    "sgn
+0000b3a0: 222c 0a20 2020 2022 736b 7970 6522 2c0a  ",.    "skype",.
+0000b3b0: 2020 2020 2273 7368 222c 0a20 2020 2022      "ssh",.    "
+0000b3c0: 7366 7470 222c 0a20 2020 2022 736d 6222  sftp",.    "smb"
+0000b3d0: 2c0a 2020 2020 2273 6d73 222c 0a20 2020  ,.    "sms",.   
+0000b3e0: 2022 736f 6c64 6174 222c 0a20 2020 2022   "soldat",.    "
+0000b3f0: 7374 6561 6d22 2c0a 2020 2020 2273 766e  steam",.    "svn
+0000b400: 222c 0a20 2020 2022 7465 616d 7370 6561  ",.    "teamspea
+0000b410: 6b22 2c0a 2020 2020 2275 6e72 6561 6c22  k",.    "unreal"
+0000b420: 2c0a 2020 2020 2275 7432 3030 3422 2c0a  ,.    "ut2004",.
+0000b430: 2020 2020 2276 656e 7472 696c 6f22 2c0a      "ventrilo",.
+0000b440: 2020 2020 2276 6965 772d 736f 7572 6365      "view-source
+0000b450: 222c 0a20 2020 2022 7765 6263 616c 222c  ",.    "webcal",
+0000b460: 0a20 2020 2022 7779 6369 7779 6722 2c0a  .    "wyciwyg",.
+0000b470: 2020 2020 2278 6669 7265 222c 0a20 2020      "xfire",.   
+0000b480: 2022 7872 6922 2c0a 2020 2020 2279 6d73   "xri",.    "yms
+0000b490: 6772 222c 0a5d 0a61 6c6c 5f75 726c 5f73  gr",.].all_url_s
+0000b4a0: 6368 656d 6573 203d 205b 4e6f 6e65 5d20  chemes = [None] 
+0000b4b0: 2b20 6f66 6669 6369 616c 5f75 726c 5f73  + official_url_s
+0000b4c0: 6368 656d 6573 202b 2075 6e6f 6666 6963  chemes + unoffic
+0000b4d0: 6961 6c5f 7572 6c5f 7363 6865 6d65 730a  ial_url_schemes.
+0000b4e0: 6874 7470 5f73 6368 656d 6573 203d 205b  http_schemes = [
+0000b4f0: 4e6f 6e65 2c20 2268 7474 7022 2c20 2268  None, "http", "h
+0000b500: 7474 7073 225d 0a0a 2320 4465 6669 6e65  ttps"]..# Define
+0000b510: 6420 696e 2052 4643 2033 3439 302c 2053  d in RFC 3490, S
+0000b520: 6563 7469 6f6e 2033 2e31 2c20 5265 7175  ection 3.1, Requ
+0000b530: 6972 656d 656e 7420 2331 0a23 2055 7365  irement #1.# Use
+0000b540: 2074 6869 7320 7265 6765 7820 746f 2073   this regex to s
+0000b550: 706c 6974 2074 6865 2061 7574 686f 7269  plit the authori
+0000b560: 7479 2063 6f6d 706f 6e65 6e74 206f 6620  ty component of 
+0000b570: 6120 756e 6963 6f64 6520 5552 4c20 696e  a unicode URL in
+0000b580: 746f 0a23 2069 7473 2063 6f6d 706f 6e65  to.# its compone
+0000b590: 6e74 206c 6162 656c 730a 5245 4745 585f  nt labels.REGEX_
+0000b5a0: 4155 5448 4f52 4954 595f 5350 4c49 5454  AUTHORITY_SPLITT
+0000b5b0: 4552 203d 2022 5b5c 7530 3032 655c 7533  ER = "[\u002e\u3
+0000b5c0: 3030 325c 7566 6630 655c 7566 6636 315d  002\uff0e\uff61]
+0000b5d0: 220a 0a0a 6465 6620 6573 6361 7065 5f75  "...def escape_u
+0000b5e0: 6e69 636f 6465 2873 7472 696e 6729 3a0a  nicode(string):.
+0000b5f0: 2020 2020 2222 220a 2020 2020 436f 6e76      """.    Conv
+0000b600: 6572 7473 2061 2075 6e69 636f 6465 2073  erts a unicode s
+0000b610: 7472 696e 6720 696e 746f 2055 532d 4153  tring into US-AS
+0000b620: 4349 492c 2075 7369 6e67 2061 2073 696d  CII, using a sim
+0000b630: 706c 6520 636f 6e76 6572 7369 6f6e 2073  ple conversion s
+0000b640: 6368 656d 652e 0a20 2020 2045 6163 6820  cheme..    Each 
+0000b650: 756e 6963 6f64 6520 6368 6172 6163 7465  unicode characte
+0000b660: 7220 7468 6174 2064 6f65 7320 6e6f 7420  r that does not 
+0000b670: 6861 7665 2061 2055 532d 4153 4349 4920  have a US-ASCII 
+0000b680: 6571 7569 7661 6c65 6e74 2069 730a 2020  equivalent is.  
+0000b690: 2020 636f 6e76 6572 7465 6420 696e 746f    converted into
+0000b6a0: 2061 2055 524c 2065 7363 6170 6564 2066   a URL escaped f
+0000b6b0: 6f72 6d20 6261 7365 6420 6f6e 2069 7473  orm based on its
+0000b6c0: 2068 6578 6164 6563 696d 616c 2076 616c   hexadecimal val
+0000b6d0: 7565 2e0a 2020 2020 466f 7220 6578 616d  ue..    For exam
+0000b6e0: 706c 652c 2074 6865 2075 6e69 636f 6465  ple, the unicode
+0000b6f0: 2063 6861 7261 6374 6572 2027 5c5c 7534   character '\\u4
+0000b700: 6538 3627 2077 696c 6c20 6265 636f 6d65  e86' will become
+0000b710: 2074 6865 2073 7472 696e 6720 2725 3465   the string '%4e
+0000b720: 2538 3627 0a0a 2020 2020 4172 6773 3a0a  %86'..    Args:.
+0000b730: 2020 2020 2020 2020 7374 7269 6e67 3a20          string: 
+0000b740: 756e 6963 6f64 6520 7374 7269 6e67 2c20  unicode string, 
+0000b750: 7468 6520 756e 6963 6f64 6520 7374 7269  the unicode stri
+0000b760: 6e67 2074 6f20 636f 6e76 6572 7420 696e  ng to convert in
+0000b770: 746f 2061 6e0a 2020 2020 2020 2020 2020  to an.          
+0000b780: 2020 6573 6361 7065 6420 5553 2d41 5343    escaped US-ASC
+0000b790: 4949 2066 6f72 6d0a 0a20 2020 2052 6574  II form..    Ret
+0000b7a0: 7572 6e73 3a0a 2020 2020 2020 2020 7374  urns:.        st
+0000b7b0: 7269 6e67 3a20 7468 6520 5553 2d41 5343  ring: the US-ASC
+0000b7c0: 4949 2065 7363 6170 6564 2066 6f72 6d20  II escaped form 
+0000b7d0: 6f66 2074 6865 2069 6e70 7574 7465 6420  of the inputted 
+0000b7e0: 7374 7269 6e67 0a0a 2020 2020 4061 7574  string..    @aut
+0000b7f0: 686f 723a 204a 6f6e 6174 6861 6e20 4265  hor: Jonathan Be
+0000b800: 6e6e 0a20 2020 2022 2222 0a20 2020 2072  nn.    """.    r
+0000b810: 6574 7572 6e56 616c 7565 203d 2053 7472  eturnValue = Str
+0000b820: 696e 6749 4f28 290a 0a20 2020 2066 6f72  ingIO()..    for
+0000b830: 2063 6861 7261 6374 6572 2069 6e20 7374   character in st
+0000b840: 7269 6e67 3a0a 2020 2020 2020 2020 636f  ring:.        co
+0000b850: 6465 203d 206f 7264 2863 6861 7261 6374  de = ord(charact
+0000b860: 6572 290a 2020 2020 2020 2020 6966 2063  er).        if c
+0000b870: 6f64 6520 3e20 3078 3746 3a0a 2020 2020  ode > 0x7F:.    
+0000b880: 2020 2020 2020 2020 6865 7843 6f64 6520          hexCode 
+0000b890: 3d20 6865 7828 636f 6465 290a 2020 2020  = hex(code).    
+0000b8a0: 2020 2020 2020 2020 7265 7475 726e 5661          returnVa
+0000b8b0: 6c75 652e 7772 6974 6528 2225 2220 2b20  lue.write("%" + 
+0000b8c0: 6865 7843 6f64 655b 323a 345d 202b 2022  hexCode[2:4] + "
+0000b8d0: 2522 202b 2068 6578 436f 6465 5b34 3a36  %" + hexCode[4:6
+0000b8e0: 5d29 0a20 2020 2020 2020 2065 6c73 653a  ]).        else:
+0000b8f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000b900: 7572 6e56 616c 7565 2e77 7269 7465 2863  urnValue.write(c
+0000b910: 6861 7261 6374 6572 290a 0a20 2020 2072  haracter)..    r
+0000b920: 6574 7572 6e20 7265 7475 726e 5661 6c75  eturn returnValu
+0000b930: 652e 6765 7476 616c 7565 2829 0a0a 0a64  e.getvalue()...d
+0000b940: 6566 2075 6e69 636f 6465 5f74 6f5f 6173  ef unicode_to_as
+0000b950: 6369 695f 6175 7468 6f72 6974 7928 6175  cii_authority(au
+0000b960: 7468 6f72 6974 7929 3a0a 2020 2020 2222  thority):.    ""
+0000b970: 220a 2020 2020 466f 6c6c 6f77 7320 7468  ".    Follows th
+0000b980: 6520 7374 6570 7320 696e 2052 4643 2033  e steps in RFC 3
+0000b990: 3439 302c 2053 6563 7469 6f6e 2034 2074  490, Section 4 t
+0000b9a0: 6f20 636f 6e76 6572 7420 6120 756e 6963  o convert a unic
+0000b9b0: 6f64 6520 6175 7468 6f72 6974 790a 2020  ode authority.  
+0000b9c0: 2020 7374 7269 6e67 2069 6e74 6f20 6974    string into it
+0000b9d0: 7320 4153 4349 4920 6571 7569 7661 6c65  s ASCII equivale
+0000b9e0: 6e74 2e0a 2020 2020 466f 7220 6578 616d  nt..    For exam
+0000b9f0: 706c 652c 2075 2777 7777 2e41 6c6c 6961  ple, u'www.Allia
+0000ba00: 6e63 6566 7261 6e5c 5c78 6537 6169 7365  ncefran\\xe7aise
+0000ba10: 2e6e 7527 2077 696c 6c20 6265 2063 6f6e  .nu' will be con
+0000ba20: 7665 7274 6564 2069 6e74 6f0a 2020 2020  verted into.    
+0000ba30: 2777 7777 2e78 6e2d 2d61 6c6c 6961 6e63  'www.xn--allianc
+0000ba40: 6566 7261 6e61 6973 652d 6e70 622e 6e75  efranaise-npb.nu
+0000ba50: 270a 0a20 2020 2041 7267 733a 0a20 2020  '..    Args:.   
+0000ba60: 2020 2020 2061 7574 686f 7269 7479 3a20       authority: 
+0000ba70: 756e 6963 6f64 6520 7374 7269 6e67 2c20  unicode string, 
+0000ba80: 7468 6520 5552 4c20 6175 7468 6f72 6974  the URL authorit
+0000ba90: 7920 636f 6d70 6f6e 656e 7420 746f 2063  y component to c
+0000baa0: 6f6e 7665 7274 2c0a 2020 2020 2020 2020  onvert,.        
+0000bab0: 2020 2020 652e 672e 2075 2777 7777 2e41      e.g. u'www.A
+0000bac0: 6c6c 6961 6e63 6566 7261 6e5c 5c78 6537  lliancefran\\xe7
+0000bad0: 6169 7365 2e6e 7527 0a0a 2020 2020 5265  aise.nu'..    Re
+0000bae0: 7475 726e 733a 0a20 2020 2020 2020 2073  turns:.        s
+0000baf0: 7472 696e 673a 2074 6865 2055 532d 4153  tring: the US-AS
+0000bb00: 4349 4920 6368 6172 6163 7465 7220 6571  CII character eq
+0000bb10: 7569 7661 6c65 6e74 2074 6f20 7468 6520  uivalent to the 
+0000bb20: 696e 7075 7474 6564 2061 7574 686f 7269  inputted authori
+0000bb30: 7479 2c0a 2020 2020 2020 2020 2020 2020  ty,.            
+0000bb40: 2065 2e67 2e20 2777 7777 2e78 6e2d 2d61   e.g. 'www.xn--a
+0000bb50: 6c6c 6961 6e63 6566 7261 6e61 6973 652d  lliancefranaise-
+0000bb60: 6e70 622e 6e75 270a 0a20 2020 2052 6169  npb.nu'..    Rai
+0000bb70: 7365 733a 0a20 2020 2020 2020 2045 7863  ses:.        Exc
+0000bb80: 6570 7469 6f6e 3a20 6966 2074 6865 2066  eption: if the f
+0000bb90: 756e 6374 696f 6e20 6973 206e 6f74 2061  unction is not a
+0000bba0: 626c 6520 746f 2063 6f6e 7665 7274 2074  ble to convert t
+0000bbb0: 6865 2069 6e70 7574 7465 640a 2020 2020  he inputted.    
+0000bbc0: 2020 2020 2020 2020 6175 7468 6f72 6974          authorit
+0000bbd0: 790a 0a20 2020 2040 6175 7468 6f72 3a20  y..    @author: 
+0000bbe0: 4a6f 6e61 7468 616e 2042 656e 6e0a 2020  Jonathan Benn.  
+0000bbf0: 2020 2222 220a 2020 2020 2320 5246 4320    """.    # RFC 
+0000bc00: 3334 3930 2c20 5365 6374 696f 6e20 342c  3490, Section 4,
+0000bc10: 2053 7465 7020 310a 2020 2020 2320 5468   Step 1.    # Th
+0000bc20: 6520 656e 636f 6469 6e67 732e 6964 6e61  e encodings.idna
+0000bc30: 2050 7974 686f 6e20 6d6f 6475 6c65 2061   Python module a
+0000bc40: 7373 756d 6573 2074 6861 7420 416c 6c6f  ssumes that Allo
+0000bc50: 7755 6e61 7373 6967 6e65 6420 3d3d 2054  wUnassigned == T
+0000bc60: 7275 650a 0a20 2020 2023 2052 4643 2033  rue..    # RFC 3
+0000bc70: 3439 302c 2053 6563 7469 6f6e 2034 2c20  490, Section 4, 
+0000bc80: 5374 6570 2032 0a20 2020 206c 6162 656c  Step 2.    label
+0000bc90: 7320 3d20 7265 2e73 706c 6974 2852 4547  s = re.split(REG
+0000bca0: 4558 5f41 5554 484f 5249 5459 5f53 504c  EX_AUTHORITY_SPL
+0000bcb0: 4954 5445 522c 2061 7574 686f 7269 7479  ITTER, authority
+0000bcc0: 290a 0a20 2020 2023 2052 4643 2033 3439  )..    # RFC 349
+0000bcd0: 302c 2053 6563 7469 6f6e 2034 2c20 5374  0, Section 4, St
+0000bce0: 6570 2033 0a20 2020 2023 2054 6865 2065  ep 3.    # The e
+0000bcf0: 6e63 6f64 696e 6773 2e69 646e 6120 5079  ncodings.idna Py
+0000bd00: 7468 6f6e 206d 6f64 756c 6520 6173 7375  thon module assu
+0000bd10: 6d65 7320 7468 6174 2055 7365 5354 4433  mes that UseSTD3
+0000bd20: 4153 4349 4952 756c 6573 203d 3d20 4661  ASCIIRules == Fa
+0000bd30: 6c73 650a 0a20 2020 2023 2052 4643 2033  lse..    # RFC 3
+0000bd40: 3439 302c 2053 6563 7469 6f6e 2034 2c20  490, Section 4, 
+0000bd50: 5374 6570 2034 0a20 2020 2023 2057 6520  Step 4.    # We 
+0000bd60: 7573 6520 7468 6520 546f 4153 4349 4920  use the ToASCII 
+0000bd70: 6f70 6572 6174 696f 6e20 6265 6361 7573  operation becaus
+0000bd80: 6520 7765 2061 7265 2061 626f 7574 2074  e we are about t
+0000bd90: 6f20 7075 7420 7468 6520 6175 7468 6f72  o put the author
+0000bda0: 6974 790a 2020 2020 2320 696e 746f 2061  ity.    # into a
+0000bdb0: 6e20 4944 4e2d 756e 6177 6172 6520 736c  n IDN-unaware sl
+0000bdc0: 6f74 0a20 2020 2061 7363 6969 4c61 6265  ot.    asciiLabe
+0000bdd0: 6c73 203d 205b 5d0a 2020 2020 666f 7220  ls = [].    for 
+0000bde0: 6c61 6265 6c20 696e 206c 6162 656c 733a  label in labels:
+0000bdf0: 0a20 2020 2020 2020 2069 6620 6c61 6265  .        if labe
+0000be00: 6c3a 0a20 2020 2020 2020 2020 2020 2061  l:.            a
+0000be10: 7363 6969 4c61 6265 6c73 2e61 7070 656e  sciiLabels.appen
+0000be20: 6428 746f 5f6e 6174 6976 6528 656e 636f  d(to_native(enco
+0000be30: 6469 6e67 732e 6964 6e61 2e54 6f41 5343  dings.idna.ToASC
+0000be40: 4949 286c 6162 656c 2929 290a 2020 2020  II(label))).    
+0000be50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000be60: 2020 2020 2020 2320 656e 636f 6469 6e67        # encoding
+0000be70: 732e 6964 6e61 2e54 6f41 5343 4949 2064  s.idna.ToASCII d
+0000be80: 6f65 7320 6e6f 7420 6163 6365 7074 2061  oes not accept a
+0000be90: 6e20 656d 7074 7920 7374 7269 6e67 2c20  n empty string, 
+0000bea0: 6275 740a 2020 2020 2020 2020 2020 2020  but.            
+0000beb0: 2320 6974 2069 7320 6e65 6365 7373 6172  # it is necessar
+0000bec0: 7920 666f 7220 7573 2074 6f20 616c 6c6f  y for us to allo
+0000bed0: 7720 666f 7220 656d 7074 7920 6c61 6265  w for empty labe
+0000bee0: 6c73 2073 6f20 7468 6174 2077 650a 2020  ls so that we.  
+0000bef0: 2020 2020 2020 2020 2020 2320 646f 6e27            # don'
+0000bf00: 7420 6d6f 6469 6679 2074 6865 2055 524c  t modify the URL
+0000bf10: 0a20 2020 2020 2020 2020 2020 2061 7363  .            asc
+0000bf20: 6969 4c61 6265 6c73 2e61 7070 656e 6428  iiLabels.append(
+0000bf30: 2222 290a 2020 2020 2320 5246 4320 3334  "").    # RFC 34
+0000bf40: 3930 2c20 5365 6374 696f 6e20 342c 2053  90, Section 4, S
+0000bf50: 7465 7020 350a 2020 2020 7265 7475 726e  tep 5.    return
+0000bf60: 2073 7472 2872 6564 7563 6528 6c61 6d62   str(reduce(lamb
+0000bf70: 6461 2078 2c20 793a 2078 202b 2075 6e69  da x, y: x + uni
+0000bf80: 6368 7228 3078 3030 3245 2920 2b20 792c  chr(0x002E) + y,
+0000bf90: 2061 7363 6969 4c61 6265 6c73 2929 0a0a   asciiLabels))..
+0000bfa0: 0a64 6566 2075 6e69 636f 6465 5f74 6f5f  .def unicode_to_
+0000bfb0: 6173 6369 695f 7572 6c28 7572 6c2c 2070  ascii_url(url, p
+0000bfc0: 7265 7065 6e64 5f73 6368 656d 6529 3a0a  repend_scheme):.
+0000bfd0: 2020 2020 2222 220a 2020 2020 436f 6e76      """.    Conv
+0000bfe0: 6572 7473 2074 6865 2069 6e70 7574 7465  erts the inputte
+0000bff0: 6420 756e 6963 6f64 6520 7572 6c20 696e  d unicode url in
+0000c000: 746f 2061 2055 532d 4153 4349 4920 6571  to a US-ASCII eq
+0000c010: 7569 7661 6c65 6e74 2e20 5468 6973 2066  uivalent. This f
+0000c020: 756e 6374 696f 6e0a 2020 2020 676f 6573  unction.    goes
+0000c030: 2061 206c 6974 746c 6520 6265 796f 6e64   a little beyond
+0000c040: 2052 4643 2033 3439 302c 2077 6869 6368   RFC 3490, which
+0000c050: 2069 7320 6c69 6d69 7465 6420 696e 2073   is limited in s
+0000c060: 636f 7065 2074 6f20 7468 6520 646f 6d61  cope to the doma
+0000c070: 696e 206e 616d 650a 2020 2020 2861 7574  in name.    (aut
+0000c080: 686f 7269 7479 2920 6f6e 6c79 2e20 4865  hority) only. He
+0000c090: 7265 2c20 7468 6520 6675 6e63 7469 6f6e  re, the function
+0000c0a0: 616c 6974 7920 6973 2065 7870 616e 6465  ality is expande
+0000c0b0: 6420 746f 2077 6861 7420 7761 7320 6f62  d to what was ob
+0000c0c0: 7365 7276 6564 0a20 2020 206f 6e20 5769  served.    on Wi
+0000c0d0: 6b69 7065 6469 6120 6f6e 2032 3030 392d  kipedia on 2009-
+0000c0e0: 4a61 6e2d 3232 3a0a 0a20 2020 2020 2020  Jan-22:..       
+0000c0f0: 436f 6d70 6f6e 656e 7420 2020 2043 616e  Component    Can
+0000c100: 2055 7365 2055 6e69 636f 6465 3f0a 2020   Use Unicode?.  
+0000c110: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2020       ---------  
+0000c120: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    --------------
+0000c130: 2d2d 0a20 2020 2020 2020 7363 6865 6d65  --.       scheme
+0000c140: 2020 2020 2020 204e 6f0a 2020 2020 2020         No.      
+0000c150: 2061 7574 686f 7269 7479 2020 2020 5965   authority    Ye
+0000c160: 730a 2020 2020 2020 2070 6174 6820 2020  s.       path   
+0000c170: 2020 2020 2020 5965 730a 2020 2020 2020        Yes.      
+0000c180: 2071 7565 7279 2020 2020 2020 2020 5965   query        Ye
+0000c190: 730a 2020 2020 2020 2066 7261 676d 656e  s.       fragmen
+0000c1a0: 7420 2020 2020 4e6f 0a0a 2020 2020 5468  t     No..    Th
+0000c1b0: 6520 6175 7468 6f72 6974 7920 636f 6d70  e authority comp
+0000c1c0: 6f6e 656e 7420 6765 7473 2063 6f6e 7665  onent gets conve
+0000c1d0: 7274 6564 2074 6f20 7075 6e79 636f 6465  rted to punycode
+0000c1e0: 2c20 6275 7420 6f63 6375 7272 656e 6365  , but occurrence
+0000c1f0: 7320 6f66 0a20 2020 2075 6e69 636f 6465  s of.    unicode
+0000c200: 2069 6e20 6f74 6865 7220 636f 6d70 6f6e   in other compon
+0000c210: 656e 7473 2067 6574 2063 6f6e 7665 7274  ents get convert
+0000c220: 6564 2069 6e74 6f20 6120 7061 6972 206f  ed into a pair o
+0000c230: 6620 5552 4920 6573 6361 7065 7320 2877  f URI escapes (w
+0000c240: 650a 2020 2020 6173 7375 6d65 2034 2d62  e.    assume 4-b
+0000c250: 7974 6520 756e 6963 6f64 6529 2e20 452e  yte unicode). E.
+0000c260: 672e 2074 6865 2075 6e69 636f 6465 2063  g. the unicode c
+0000c270: 6861 7261 6374 6572 2055 2b34 4532 4420  haracter U+4E2D 
+0000c280: 7769 6c6c 2062 650a 2020 2020 636f 6e76  will be.    conv
+0000c290: 6572 7465 6420 696e 746f 2027 2534 4525  erted into '%4E%
+0000c2a0: 3244 272e 2054 6573 7469 6e67 2077 6974  2D'. Testing wit
+0000c2b0: 6820 4669 7265 666f 7820 7633 2e30 2e35  h Firefox v3.0.5
+0000c2c0: 2068 6173 2073 686f 776e 2074 6861 7420   has shown that 
+0000c2d0: 6974 2063 616e 0a20 2020 2075 6e64 6572  it can.    under
+0000c2e0: 7374 616e 6420 7468 6973 206b 696e 6420  stand this kind 
+0000c2f0: 6f66 2055 5249 2065 6e63 6f64 696e 672e  of URI encoding.
+0000c300: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
+0000c310: 2020 2020 7572 6c3a 2075 6e69 636f 6465      url: unicode
+0000c320: 2073 7472 696e 672c 2074 6865 2055 524c   string, the URL
+0000c330: 2074 6f20 636f 6e76 6572 7420 6672 6f6d   to convert from
+0000c340: 2075 6e69 636f 6465 2069 6e74 6f20 5553   unicode into US
+0000c350: 2d41 5343 4949 0a20 2020 2020 2020 2070  -ASCII.        p
+0000c360: 7265 7065 6e64 5f73 6368 656d 653a 2073  repend_scheme: s
+0000c370: 7472 696e 672c 2061 2070 726f 746f 636f  tring, a protoco
+0000c380: 6c20 7363 6865 6d65 2074 6f20 7072 6570  l scheme to prep
+0000c390: 656e 6420 746f 2074 6865 2055 524c 2069  end to the URL i
+0000c3a0: 660a 2020 2020 2020 2020 2020 2020 7765  f.            we
+0000c3b0: 2772 6520 6861 7669 6e67 2074 726f 7562  're having troub
+0000c3c0: 6c65 2070 6172 7369 6e67 2069 742e 0a20  le parsing it.. 
+0000c3d0: 2020 2020 2020 2020 2020 2065 2e67 2e20             e.g. 
+0000c3e0: 2268 7474 7022 2e20 496e 7075 7420 4e6f  "http". Input No
+0000c3f0: 6e65 2074 6f20 6469 7361 626c 6520 7468  ne to disable th
+0000c400: 6973 2066 756e 6374 696f 6e61 6c69 7479  is functionality
+0000c410: 0a0a 2020 2020 5265 7475 726e 733a 0a20  ..    Returns:. 
+0000c420: 2020 2020 2020 2073 7472 696e 673a 2061         string: a
+0000c430: 2055 532d 4153 4349 4920 6571 7569 7661   US-ASCII equiva
+0000c440: 6c65 6e74 206f 6620 7468 6520 696e 7075  lent of the inpu
+0000c450: 7474 6564 2075 726c 0a0a 2020 2020 4061  tted url..    @a
+0000c460: 7574 686f 723a 204a 6f6e 6174 6861 6e20  uthor: Jonathan 
+0000c470: 4265 6e6e 0a20 2020 2022 2222 0a20 2020  Benn.    """.   
+0000c480: 2023 2063 6f6e 7665 7274 2074 6865 2061   # convert the a
+0000c490: 7574 686f 7269 7479 2063 6f6d 706f 6e65  uthority compone
+0000c4a0: 6e74 206f 6620 7468 6520 5552 4c20 696e  nt of the URL in
+0000c4b0: 746f 2061 6e20 4153 4349 4920 7075 6e79  to an ASCII puny
+0000c4c0: 636f 6465 2073 7472 696e 672c 0a20 2020  code string,.   
+0000c4d0: 2023 2062 7574 2065 6e63 6f64 6520 7468   # but encode th
+0000c4e0: 6520 7265 7374 2075 7369 6e67 2074 6865  e rest using the
+0000c4f0: 2072 6567 756c 6172 2055 5249 2063 6861   regular URI cha
+0000c500: 7261 6374 6572 2065 6e63 6f64 696e 670a  racter encoding.
+0000c510: 2020 2020 636f 6d70 6f6e 656e 7473 203d      components =
+0000c520: 2075 726c 7061 7273 652e 7572 6c70 6172   urlparse.urlpar
+0000c530: 7365 2875 726c 290a 2020 2020 7072 6570  se(url).    prep
+0000c540: 656e 6465 6420 3d20 4661 6c73 650a 2020  ended = False.  
+0000c550: 2020 2320 4966 206e 6f20 6175 7468 6f72    # If no author
+0000c560: 6974 7920 7761 7320 666f 756e 640a 2020  ity was found.  
+0000c570: 2020 6966 206e 6f74 2063 6f6d 706f 6e65    if not compone
+0000c580: 6e74 732e 6e65 746c 6f63 3a0a 2020 2020  nts.netloc:.    
+0000c590: 2020 2020 2320 5472 7920 6170 7065 6e64      # Try append
+0000c5a0: 696e 6720 6120 7363 6865 6d65 2074 6f20  ing a scheme to 
+0000c5b0: 7365 6520 6966 2074 6861 7420 6669 7865  see if that fixe
+0000c5c0: 7320 7468 6520 7072 6f62 6c65 6d0a 2020  s the problem.  
+0000c5d0: 2020 2020 2020 7363 6865 6d65 5f74 6f5f        scheme_to_
+0000c5e0: 7072 6570 656e 6420 3d20 7072 6570 656e  prepend = prepen
+0000c5f0: 645f 7363 6865 6d65 206f 7220 2268 7474  d_scheme or "htt
+0000c600: 7022 0a20 2020 2020 2020 2063 6f6d 706f  p".        compo
+0000c610: 6e65 6e74 7320 3d20 7572 6c70 6172 7365  nents = urlparse
+0000c620: 2e75 726c 7061 7273 6528 746f 5f75 6e69  .urlparse(to_uni
+0000c630: 636f 6465 2873 6368 656d 655f 746f 5f70  code(scheme_to_p
+0000c640: 7265 7065 6e64 2920 2b20 223a 2f2f 2220  repend) + "://" 
+0000c650: 2b20 7572 6c29 0a20 2020 2020 2020 2070  + url).        p
+0000c660: 7265 7065 6e64 6564 203d 2054 7275 650a  repended = True.
+0000c670: 0a20 2020 2023 2069 6620 7765 2073 7469  .    # if we sti
+0000c680: 6c6c 2063 616e 2774 2066 696e 6420 7468  ll can't find th
+0000c690: 6520 6175 7468 6f72 6974 790a 2020 2020  e authority.    
+0000c6a0: 6966 206e 6f74 2063 6f6d 706f 6e65 6e74  if not component
+0000c6b0: 732e 6e65 746c 6f63 3a0a 2020 2020 2020  s.netloc:.      
+0000c6c0: 2020 2320 416e 6420 6974 2773 206e 6f74    # And it's not
+0000c6d0: 2062 6563 6175 7365 2074 6865 2075 726c   because the url
+0000c6e0: 2069 7320 6120 7265 6c61 7469 7665 2075   is a relative u
+0000c6f0: 726c 0a20 2020 2020 2020 2069 6620 6e6f  rl.        if no
+0000c700: 7420 7572 6c2e 7374 6172 7473 7769 7468  t url.startswith
+0000c710: 2822 2f22 293a 0a20 2020 2020 2020 2020  ("/"):.         
+0000c720: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
+0000c730: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0000c740: 2020 2020 224e 6f20 6175 7468 6f72 6974      "No authorit
+0000c750: 7920 636f 6d70 6f6e 656e 7420 666f 756e  y component foun
+0000c760: 642c 2022 0a20 2020 2020 2020 2020 2020  d, ".           
+0000c770: 2020 2020 202b 2022 636f 756c 6420 6e6f       + "could no
+0000c780: 7420 6465 636f 6465 2075 6e69 636f 6465  t decode unicode
+0000c790: 2074 6f20 5553 2d41 5343 4949 220a 2020   to US-ASCII".  
+0000c7a0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+0000c7b0: 2023 2057 6527 7265 2068 6572 6520 6966   # We're here if
+0000c7c0: 2077 6520 666f 756e 6420 616e 2061 7574   we found an aut
+0000c7d0: 686f 7269 7479 2c20 6c65 7427 7320 7265  hority, let's re
+0000c7e0: 6275 696c 6420 7468 6520 5552 4c0a 2020  build the URL.  
+0000c7f0: 2020 7363 6865 6d65 203d 2063 6f6d 706f    scheme = compo
+0000c800: 6e65 6e74 732e 7363 6865 6d65 0a20 2020  nents.scheme.   
+0000c810: 2061 7574 686f 7269 7479 203d 2063 6f6d   authority = com
+0000c820: 706f 6e65 6e74 732e 6e65 746c 6f63 0a20  ponents.netloc. 
+0000c830: 2020 2070 6174 6820 3d20 636f 6d70 6f6e     path = compon
+0000c840: 656e 7473 2e70 6174 680a 2020 2020 7175  ents.path.    qu
+0000c850: 6572 7920 3d20 636f 6d70 6f6e 656e 7473  ery = components
+0000c860: 2e71 7565 7279 0a20 2020 2066 7261 676d  .query.    fragm
+0000c870: 656e 7420 3d20 636f 6d70 6f6e 656e 7473  ent = components
+0000c880: 2e66 7261 676d 656e 740a 0a20 2020 2069  .fragment..    i
+0000c890: 6620 7072 6570 656e 6465 643a 0a20 2020  f prepended:.   
+0000c8a0: 2020 2020 2073 6368 656d 6520 3d20 2222       scheme = ""
+0000c8b0: 0a0a 2020 2020 756e 7061 7273 6564 203d  ..    unparsed =
+0000c8c0: 2075 726c 7061 7273 652e 7572 6c75 6e70   urlparse.urlunp
+0000c8d0: 6172 7365 280a 2020 2020 2020 2020 280a  arse(.        (.
+0000c8e0: 2020 2020 2020 2020 2020 2020 7363 6865              sche
+0000c8f0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+0000c900: 756e 6963 6f64 655f 746f 5f61 7363 6969  unicode_to_ascii
+0000c910: 5f61 7574 686f 7269 7479 2861 7574 686f  _authority(autho
+0000c920: 7269 7479 292c 0a20 2020 2020 2020 2020  rity),.         
+0000c930: 2020 2065 7363 6170 655f 756e 6963 6f64     escape_unicod
+0000c940: 6528 7061 7468 292c 0a20 2020 2020 2020  e(path),.       
+0000c950: 2020 2020 2022 222c 0a20 2020 2020 2020       "",.       
+0000c960: 2020 2020 2065 7363 6170 655f 756e 6963       escape_unic
+0000c970: 6f64 6528 7175 6572 7929 2c0a 2020 2020  ode(query),.    
+0000c980: 2020 2020 2020 2020 7374 7228 6672 6167          str(frag
+0000c990: 6d65 6e74 292c 0a20 2020 2020 2020 2029  ment),.        )
+0000c9a0: 0a20 2020 2029 0a20 2020 2069 6620 756e  .    ).    if un
+0000c9b0: 7061 7273 6564 2e73 7461 7274 7377 6974  parsed.startswit
+0000c9c0: 6828 222f 2f22 293a 0a20 2020 2020 2020  h("//"):.       
+0000c9d0: 2075 6e70 6172 7365 6420 3d20 756e 7061   unparsed = unpa
+0000c9e0: 7273 6564 5b32 3a5d 2020 2320 5265 6d6f  rsed[2:]  # Remo
+0000c9f0: 7665 2074 6865 202f 2f20 7572 6c75 6e70  ve the // urlunp
+0000ca00: 6172 7365 2070 7574 7320 696e 2074 6865  arse puts in the
+0000ca10: 2062 6567 696e 6e69 6e67 0a20 2020 2072   beginning.    r
+0000ca20: 6574 7572 6e20 756e 7061 7273 6564 0a0a  eturn unparsed..
+0000ca30: 0a63 6c61 7373 2049 535f 4745 4e45 5249  .class IS_GENERI
+0000ca40: 435f 5552 4c28 5661 6c69 6461 746f 7229  C_URL(Validator)
+0000ca50: 3a0a 2020 2020 2222 220a 2020 2020 5265  :.    """.    Re
+0000ca60: 6a65 6374 7320 6120 5552 4c20 7374 7269  jects a URL stri
+0000ca70: 6e67 2069 6620 616e 7920 6f66 2074 6865  ng if any of the
+0000ca80: 2066 6f6c 6c6f 7769 6e67 2069 7320 7472   following is tr
+0000ca90: 7565 3a0a 2020 2020 2020 202a 2054 6865  ue:.       * The
+0000caa0: 2073 7472 696e 6720 6973 2065 6d70 7479   string is empty
+0000cab0: 206f 7220 4e6f 6e65 0a20 2020 2020 2020   or None.       
+0000cac0: 2a20 5468 6520 7374 7269 6e67 2075 7365  * The string use
+0000cad0: 7320 6368 6172 6163 7465 7273 2074 6861  s characters tha
+0000cae0: 7420 6172 6520 6e6f 7420 616c 6c6f 7765  t are not allowe
+0000caf0: 6420 696e 2061 2055 524c 0a20 2020 2020  d in a URL.     
+0000cb00: 2020 2a20 5468 6520 5552 4c20 7363 6865    * The URL sche
+0000cb10: 6d65 2073 7065 6369 6669 6564 2028 6966  me specified (if
+0000cb20: 206f 6e65 2069 7320 7370 6563 6966 6965   one is specifie
+0000cb30: 6429 2069 7320 6e6f 7420 7661 6c69 640a  d) is not valid.
+0000cb40: 0a20 2020 2042 6173 6564 206f 6e20 5246  .    Based on RF
+0000cb50: 4320 3233 3936 3a20 6874 7470 3a2f 2f77  C 2396: http://w
+0000cb60: 7777 2e66 6171 732e 6f72 672f 7266 6373  ww.faqs.org/rfcs
+0000cb70: 2f72 6663 3233 3936 2e68 746d 6c0a 0a20  /rfc2396.html.. 
+0000cb80: 2020 2054 6869 7320 6675 6e63 7469 6f6e     This function
+0000cb90: 206f 6e6c 7920 6368 6563 6b73 2074 6865   only checks the
+0000cba0: 2055 524c 2773 2073 796e 7461 782e 2049   URL's syntax. I
+0000cbb0: 7420 646f 6573 206e 6f74 2063 6865 636b  t does not check
+0000cbc0: 2074 6861 7420 7468 6520 5552 4c0a 2020   that the URL.  
+0000cbd0: 2020 706f 696e 7473 2074 6f20 6120 7265    points to a re
+0000cbe0: 616c 2064 6f63 756d 656e 742c 2066 6f72  al document, for
+0000cbf0: 2065 7861 6d70 6c65 2c20 6f72 2074 6861   example, or tha
+0000cc00: 7420 6974 206f 7468 6572 7769 7365 206d  t it otherwise m
+0000cc10: 616b 6573 2073 656e 7365 0a20 2020 2073  akes sense.    s
+0000cc20: 656d 616e 7469 6361 6c6c 792e 2054 6869  emantically. Thi
+0000cc30: 7320 6675 6e63 7469 6f6e 2064 6f65 7320  s function does 
+0000cc40: 6175 746f 6d61 7469 6361 6c6c 7920 7072  automatically pr
+0000cc50: 6570 656e 6420 2768 7474 703a 2f2f 2720  epend 'http://' 
+0000cc60: 696e 2066 726f 6e74 0a20 2020 206f 6620  in front.    of 
+0000cc70: 6120 5552 4c20 6966 2061 6e64 206f 6e6c  a URL if and onl
+0000cc80: 7920 6966 2074 6861 7427 7320 6e65 6365  y if that's nece
+0000cc90: 7373 6172 7920 746f 2073 7563 6365 7373  ssary to success
+0000cca0: 6675 6c6c 7920 7061 7273 6520 7468 6520  fully parse the 
+0000ccb0: 5552 4c2e 0a20 2020 2050 6c65 6173 6520  URL..    Please 
+0000ccc0: 6e6f 7465 2074 6861 7420 6120 7363 6865  note that a sche
+0000ccd0: 6d65 2077 696c 6c20 6265 2070 7265 7065  me will be prepe
+0000cce0: 6e64 6564 206f 6e6c 7920 666f 7220 7261  nded only for ra
+0000ccf0: 7265 2063 6173 6573 0a20 2020 2028 652e  re cases.    (e.
+0000cd00: 672e 2027 676f 6f67 6c65 2e63 613a 3830  g. 'google.ca:80
+0000cd10: 2729 0a0a 2020 2020 5468 6520 6c69 7374  ')..    The list
+0000cd20: 206f 6620 616c 6c6f 7765 6420 7363 6865   of allowed sche
+0000cd30: 6d65 7320 6973 2063 7573 746f 6d69 7a61  mes is customiza
+0000cd40: 626c 6520 7769 7468 2074 6865 2061 6c6c  ble with the all
+0000cd50: 6f77 6564 5f73 6368 656d 6573 0a20 2020  owed_schemes.   
+0000cd60: 2070 6172 616d 6574 6572 2e20 4966 2079   parameter. If y
+0000cd70: 6f75 2065 7863 6c75 6465 204e 6f6e 6520  ou exclude None 
+0000cd80: 6672 6f6d 2074 6865 206c 6973 742c 2074  from the list, t
+0000cd90: 6865 6e20 6162 6272 6576 6961 7465 6420  hen abbreviated 
+0000cda0: 5552 4c73 0a20 2020 2028 6c61 636b 696e  URLs.    (lackin
+0000cdb0: 6720 6120 7363 6865 6d65 2073 7563 6820  g a scheme such 
+0000cdc0: 6173 2027 6874 7470 2729 2077 696c 6c20  as 'http') will 
+0000cdd0: 6265 2072 656a 6563 7465 642e 0a0a 2020  be rejected...  
+0000cde0: 2020 5468 6520 6465 6661 756c 7420 7072    The default pr
+0000cdf0: 6570 656e 6465 6420 7363 6865 6d65 2069  epended scheme i
+0000ce00: 7320 6375 7374 6f6d 697a 6162 6c65 2077  s customizable w
+0000ce10: 6974 6820 7468 6520 7072 6570 656e 645f  ith the prepend_
+0000ce20: 7363 6865 6d65 0a20 2020 2070 6172 616d  scheme.    param
+0000ce30: 6574 6572 2e20 4966 2079 6f75 2073 6574  eter. If you set
+0000ce40: 2070 7265 7065 6e64 5f73 6368 656d 6520   prepend_scheme 
+0000ce50: 746f 204e 6f6e 6520 7468 656e 2070 7265  to None then pre
+0000ce60: 7065 6e64 696e 6720 7769 6c6c 2062 650a  pending will be.
+0000ce70: 2020 2020 6469 7361 626c 6564 2e20 5552      disabled. UR
+0000ce80: 4c73 2074 6861 7420 7265 7175 6972 6520  Ls that require 
+0000ce90: 7072 6570 656e 6469 6e67 2074 6f20 7061  prepending to pa
+0000cea0: 7273 6520 7769 6c6c 2073 7469 6c6c 2062  rse will still b
+0000ceb0: 6520 6163 6365 7074 6564 2c0a 2020 2020  e accepted,.    
+0000cec0: 6275 7420 7468 6520 7265 7475 726e 2076  but the return v
+0000ced0: 616c 7565 2077 696c 6c20 6e6f 7420 6265  alue will not be
+0000cee0: 206d 6f64 6966 6965 642e 0a0a 2020 2020   modified...    
+0000cef0: 4061 7574 686f 723a 204a 6f6e 6174 6861  @author: Jonatha
+0000cf00: 6e20 4265 6e6e 0a0a 2020 2020 2020 2020  n Benn..        
+0000cf10: 3e3e 3e20 4953 5f47 454e 4552 4943 5f55  >>> IS_GENERIC_U
+0000cf20: 524c 2829 2827 6874 7470 3a2f 2f75 7365  RL()('http://use
+0000cf30: 7240 6162 632e 636f 6d27 290a 2020 2020  r@abc.com').    
+0000cf40: 2020 2020 2827 6874 7470 3a2f 2f75 7365      ('http://use
+0000cf50: 7240 6162 632e 636f 6d27 2c20 4e6f 6e65  r@abc.com', None
+0000cf60: 290a 0a20 2020 2041 7267 733a 0a20 2020  )..    Args:.   
+0000cf70: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+0000cf80: 6765 3a20 6120 7374 7269 6e67 2c20 7468  ge: a string, th
+0000cf90: 6520 6572 726f 7220 6d65 7373 6167 6520  e error message 
+0000cfa0: 746f 2067 6976 6520 7468 6520 656e 6420  to give the end 
+0000cfb0: 7573 6572 0a20 2020 2020 2020 2020 2020  user.           
+0000cfc0: 2069 6620 7468 6520 5552 4c20 646f 6573   if the URL does
+0000cfd0: 206e 6f74 2076 616c 6964 6174 650a 2020   not validate.  
+0000cfe0: 2020 2020 2020 616c 6c6f 7765 645f 7363        allowed_sc
+0000cff0: 6865 6d65 733a 2061 206c 6973 7420 636f  hemes: a list co
+0000d000: 6e74 6169 6e69 6e67 2073 7472 696e 6773  ntaining strings
+0000d010: 206f 7220 4e6f 6e65 2e20 4561 6368 2065   or None. Each e
+0000d020: 6c65 6d65 6e74 0a20 2020 2020 2020 2020  lement.         
+0000d030: 2020 2069 7320 6120 7363 6865 6d65 2074     is a scheme t
+0000d040: 6865 2069 6e70 7574 7465 6420 5552 4c20  he inputted URL 
+0000d050: 6973 2061 6c6c 6f77 6564 2074 6f20 7573  is allowed to us
+0000d060: 650a 2020 2020 2020 2020 7072 6570 656e  e.        prepen
+0000d070: 645f 7363 6865 6d65 3a20 6120 7374 7269  d_scheme: a stri
+0000d080: 6e67 2c20 7468 6973 2073 6368 656d 6520  ng, this scheme 
+0000d090: 6973 2070 7265 7065 6e64 6564 2069 6620  is prepended if 
+0000d0a0: 6974 2773 0a20 2020 2020 2020 2020 2020  it's.           
+0000d0b0: 206e 6563 6573 7361 7279 2074 6f20 6d61   necessary to ma
+0000d0c0: 6b65 2074 6865 2055 524c 2076 616c 6964  ke the URL valid
+0000d0d0: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
+0000d0e0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+0000d0f0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000d100: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
+0000d110: 3d22 456e 7465 7220 6120 7661 6c69 6420  ="Enter a valid 
+0000d120: 5552 4c22 2c0a 2020 2020 2020 2020 616c  URL",.        al
+0000d130: 6c6f 7765 645f 7363 6865 6d65 733d 4e6f  lowed_schemes=No
+0000d140: 6e65 2c0a 2020 2020 2020 2020 7072 6570  ne,.        prep
+0000d150: 656e 645f 7363 6865 6d65 3d4e 6f6e 652c  end_scheme=None,
+0000d160: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000d170: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+0000d180: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
+0000d190: 6765 0a20 2020 2020 2020 2069 6620 616c  ge.        if al
+0000d1a0: 6c6f 7765 645f 7363 6865 6d65 7320 6973  lowed_schemes is
+0000d1b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000d1c0: 2020 2073 656c 662e 616c 6c6f 7765 645f     self.allowed_
+0000d1d0: 7363 6865 6d65 7320 3d20 616c 6c5f 7572  schemes = all_ur
+0000d1e0: 6c5f 7363 6865 6d65 730a 2020 2020 2020  l_schemes.      
+0000d1f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000d200: 2020 2020 7365 6c66 2e61 6c6c 6f77 6564      self.allowed
+0000d210: 5f73 6368 656d 6573 203d 2061 6c6c 6f77  _schemes = allow
+0000d220: 6564 5f73 6368 656d 6573 0a20 2020 2020  ed_schemes.     
+0000d230: 2020 2073 656c 662e 7072 6570 656e 645f     self.prepend_
+0000d240: 7363 6865 6d65 203d 2070 7265 7065 6e64  scheme = prepend
+0000d250: 5f73 6368 656d 650a 2020 2020 2020 2020  _scheme.        
+0000d260: 6966 2073 656c 662e 7072 6570 656e 645f  if self.prepend_
+0000d270: 7363 6865 6d65 206e 6f74 2069 6e20 7365  scheme not in se
+0000d280: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
+0000d290: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+0000d2a0: 7261 6973 6520 5379 6e74 6178 4572 726f  raise SyntaxErro
+0000d2b0: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+0000d2c0: 2020 2022 7072 6570 656e 645f 7363 6865     "prepend_sche
+0000d2d0: 6d65 3d27 2573 2720 6973 206e 6f74 2069  me='%s' is not i
+0000d2e0: 6e20 616c 6c6f 7765 645f 7363 6865 6d65  n allowed_scheme
+0000d2f0: 733d 2573 220a 2020 2020 2020 2020 2020  s=%s".          
+0000d300: 2020 2020 2020 2520 2873 656c 662e 7072        % (self.pr
+0000d310: 6570 656e 645f 7363 6865 6d65 2c20 7365  epend_scheme, se
+0000d320: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
+0000d330: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
+0000d340: 290a 0a20 2020 2052 4547 4558 5f47 454e  )..    REGEX_GEN
+0000d350: 4552 4943 5f55 524c 203d 2072 2225 5b5e  ERIC_URL = r"%[^
+0000d360: 302d 3941 2d46 612d 665d 7b32 7d7c 255b  0-9A-Fa-f]{2}|%[
+0000d370: 5e30 2d39 412d 4661 2d66 5d5b 302d 3941  ^0-9A-Fa-f][0-9A
+0000d380: 2d46 612d 665d 7c25 5b30 2d39 412d 4661  -Fa-f]|%[0-9A-Fa
+0000d390: 2d66 5d5b 5e30 2d39 412d 4661 2d66 5d7c  -f][^0-9A-Fa-f]|
+0000d3a0: 2524 7c25 5b30 2d39 412d 4661 2d66 5d24  %$|%[0-9A-Fa-f]$
+0000d3b0: 7c25 5b5e 302d 3941 2d46 612d 665d 2422  |%[^0-9A-Fa-f]$"
+0000d3c0: 0a20 2020 2052 4547 4558 5f47 454e 4552  .    REGEX_GENER
+0000d3d0: 4943 5f55 524c 5f56 414c 4944 203d 2072  IC_URL_VALID = r
+0000d3e0: 225b 412d 5a61 2d7a 302d 393b 2f3f 3a40  "[A-Za-z0-9;/?:@
+0000d3f0: 263d 2b24 2c5c 2d5f 5c2e 217e 2a27 5c28  &=+$,\-_\.!~*'\(
+0000d400: 5c29 255d 2b24 220a 2020 2020 5245 4745  \)%]+$".    REGE
+0000d410: 585f 5552 4c5f 4652 4147 4d45 4e54 5f56  X_URL_FRAGMENT_V
+0000d420: 414c 4944 203d 2072 225b 7c41 2d5a 612d  ALID = r"[|A-Za-
+0000d430: 7a30 2d39 3b2f 3f3a 4026 3d2b 242c 5c2d  z0-9;/?:@&=+$,\-
+0000d440: 5f5c 2e21 7e2a 275c 285c 2925 5d2b 2422  _\.!~*'\(\)%]+$"
+0000d450: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
+0000d460: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+0000d470: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
+0000d480: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0000d490: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+0000d4a0: 2020 2020 2020 2076 616c 7565 3a20 6120         value: a 
+0000d4b0: 7374 7269 6e67 2c20 7468 6520 5552 4c20  string, the URL 
+0000d4c0: 746f 2076 616c 6964 6174 650a 0a20 2020  to validate..   
+0000d4d0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+0000d4e0: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
+0000d4f0: 652c 2077 6865 7265 2074 7570 6c65 5b30  e, where tuple[0
+0000d500: 5d20 6973 2074 6865 2069 6e70 7574 7465  ] is the inputte
+0000d510: 6420 7661 6c75 6520 2870 6f73 7369 626c  d value (possibl
+0000d520: 650a 2020 2020 2020 2020 2020 2020 7072  e.            pr
+0000d530: 6570 656e 6465 6420 7769 7468 2070 7265  epended with pre
+0000d540: 7065 6e64 5f73 6368 656d 6529 2c20 616e  pend_scheme), an
+0000d550: 6420 7475 706c 655b 315d 2069 7320 6569  d tuple[1] is ei
+0000d560: 7468 6572 0a20 2020 2020 2020 2020 2020  ther.           
+0000d570: 204e 6f6e 6520 2873 7563 6365 7373 2129   None (success!)
+0000d580: 206f 7220 7468 6520 7374 7269 6e67 2065   or the string e
+0000d590: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
+0000d5a0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+0000d5b0: 2020 2320 6966 2077 6520 646f 6e74 2068    # if we dont h
+0000d5c0: 6176 6520 616e 7974 6869 6e67 206f 7220  ave anything or 
+0000d5d0: 7468 6520 5552 4c20 6d69 7375 7365 7320  the URL misuses 
+0000d5e0: 7468 6520 2725 2720 6368 6172 6163 7465  the '%' characte
+0000d5f0: 720a 0a20 2020 2020 2020 2069 6620 6e6f  r..        if no
+0000d600: 7420 7661 6c75 6520 6f72 2072 652e 7365  t value or re.se
+0000d610: 6172 6368 2873 656c 662e 5245 4745 585f  arch(self.REGEX_
+0000d620: 4745 4e45 5249 435f 5552 4c2c 2076 616c  GENERIC_URL, val
+0000d630: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
+0000d640: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+0000d650: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
+0000d660: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+0000d670: 725f 6d65 7373 6167 6529 290a 0a20 2020  r_message))..   
+0000d680: 2020 2020 2069 6620 2223 2220 696e 2076       if "#" in v
+0000d690: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
+0000d6a0: 2020 7572 6c2c 2066 7261 676d 656e 745f    url, fragment_
+0000d6b0: 7061 7274 203d 2076 616c 7565 2e73 706c  part = value.spl
+0000d6c0: 6974 2822 2322 290a 2020 2020 2020 2020  it("#").        
+0000d6d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000d6e0: 2020 7572 6c2c 2066 7261 676d 656e 745f    url, fragment_
+0000d6f0: 7061 7274 203d 2076 616c 7565 2c20 2222  part = value, ""
+0000d700: 0a20 2020 2020 2020 2023 2069 6620 7468  .        # if th
+0000d710: 6520 5552 4c20 6973 206f 6e6c 7920 636f  e URL is only co
+0000d720: 6d70 6f73 6564 206f 6620 7661 6c69 6420  mposed of valid 
+0000d730: 6368 6172 6163 7465 7273 0a20 2020 2020  characters.     
+0000d740: 2020 2069 6620 6e6f 7420 7265 2e6d 6174     if not re.mat
+0000d750: 6368 2873 656c 662e 5245 4745 585f 4745  ch(self.REGEX_GE
+0000d760: 4e45 5249 435f 5552 4c5f 5641 4c49 442c  NERIC_URL_VALID,
+0000d770: 2075 726c 2920 6f72 2028 0a20 2020 2020   url) or (.     
+0000d780: 2020 2020 2020 2066 7261 676d 656e 745f         fragment_
+0000d790: 7061 7274 2061 6e64 206e 6f74 2072 652e  part and not re.
+0000d7a0: 6d61 7463 6828 7365 6c66 2e52 4547 4558  match(self.REGEX
+0000d7b0: 5f55 524c 5f46 5241 474d 454e 545f 5641  _URL_FRAGMENT_VA
+0000d7c0: 4c49 442c 2066 7261 676d 656e 745f 7061  LID, fragment_pa
+0000d7d0: 7274 290a 2020 2020 2020 2020 293a 0a20  rt).        ):. 
+0000d7e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000d7f0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+0000d800: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+0000d810: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+0000d820: 6167 6529 290a 2020 2020 2020 2020 2320  age)).        # 
+0000d830: 5468 656e 2070 6172 7365 2074 6865 2055  Then parse the U
+0000d840: 524c 2069 6e74 6f20 6974 7320 636f 6d70  RL into its comp
+0000d850: 6f6e 656e 7473 2061 6e64 2063 6865 636b  onents and check
+0000d860: 206f 6e0a 2020 2020 2020 2020 7472 793a   on.        try:
+0000d870: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0000d880: 706f 6e65 6e74 7320 3d20 7572 6c70 6172  ponents = urlpar
+0000d890: 7365 2e75 726c 7061 7273 6528 7572 6c6c  se.urlparse(urll
+0000d8a0: 6962 5f75 6e71 756f 7465 2876 616c 7565  ib_unquote(value
+0000d8b0: 2929 2e5f 6173 6469 6374 2829 0a20 2020  ))._asdict().   
+0000d8c0: 2020 2020 2065 7863 6570 7420 5661 6c75       except Valu
+0000d8d0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
+0000d8e0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+0000d8f0: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+0000d900: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+0000d910: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
+0000d920: 2020 2020 2020 2020 2320 436c 6561 6e20          # Clean 
+0000d930: 7570 2074 6865 2073 6368 656d 6520 6265  up the scheme be
+0000d940: 666f 7265 2077 6520 6368 6563 6b20 6974  fore we check it
+0000d950: 0a20 2020 2020 2020 2073 6368 656d 6520  .        scheme 
+0000d960: 3d20 636f 6d70 6f6e 656e 7473 5b22 7363  = components["sc
+0000d970: 6865 6d65 225d 0a20 2020 2020 2020 2069  heme"].        i
+0000d980: 6620 6c65 6e28 7363 6865 6d65 2920 3d3d  f len(scheme) ==
+0000d990: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0000d9a0: 7363 6865 6d65 203d 204e 6f6e 650a 2020  scheme = None.  
+0000d9b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000d9c0: 2020 2020 2020 2020 7363 6865 6d65 203d          scheme =
+0000d9d0: 2063 6f6d 706f 6e65 6e74 735b 2273 6368   components["sch
+0000d9e0: 656d 6522 5d2e 6c6f 7765 7228 290a 2020  eme"].lower().  
+0000d9f0: 2020 2020 2020 2320 4966 2074 6865 2073        # If the s
+0000da00: 6368 656d 6520 646f 6573 6e27 7420 7265  cheme doesn't re
+0000da10: 616c 6c79 2065 7869 7374 730a 2020 2020  ally exists.    
+0000da20: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
+0000da30: 2020 2020 2073 6368 656d 6520 6e6f 7420       scheme not 
+0000da40: 696e 2073 656c 662e 616c 6c6f 7765 645f  in self.allowed_
+0000da50: 7363 6865 6d65 730a 2020 2020 2020 2020  schemes.        
+0000da60: 2020 2020 6f72 206e 6f74 2073 6368 656d      or not schem
+0000da70: 650a 2020 2020 2020 2020 2020 2020 616e  e.            an
+0000da80: 6420 223a 2220 696e 2063 6f6d 706f 6e65  d ":" in compone
+0000da90: 6e74 735b 2270 6174 6822 5d0a 2020 2020  nts["path"].    
+0000daa0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+0000dab0: 2020 2023 2066 6f72 2074 6865 2070 6f73     # for the pos
+0000dac0: 7369 626c 6520 6361 7365 206f 6620 6162  sible case of ab
+0000dad0: 6272 6576 6961 7465 6420 5552 4c73 2077  breviated URLs w
+0000dae0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
+0000daf0: 2320 706f 7274 732c 2063 6865 636b 2074  # ports, check t
+0000db00: 6f20 7365 6520 6966 2061 6464 696e 6720  o see if adding 
+0000db10: 6120 7661 6c69 6420 7363 6865 6d65 2066  a valid scheme f
+0000db20: 6978 6573 0a20 2020 2020 2020 2020 2020  ixes.           
+0000db30: 2023 2074 6865 2070 726f 626c 656d 2028   # the problem (
+0000db40: 6275 7420 6f6e 6c79 2064 6f20 7468 6973  but only do this
+0000db50: 2069 6620 6974 2064 6f65 736e 2774 2068   if it doesn't h
+0000db60: 6176 650a 2020 2020 2020 2020 2020 2020  ave.            
+0000db70: 2320 6f6e 6520 616c 7265 6164 7921 290a  # one already!).
+0000db80: 2020 2020 2020 2020 2020 2020 6966 2022              if "
+0000db90: 3a2f 2f22 206e 6f74 2069 6e20 7661 6c75  ://" not in valu
+0000dba0: 6520 616e 6420 4e6f 6e65 2069 6e20 7365  e and None in se
+0000dbb0: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
+0000dbc0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+0000dbd0: 2020 2020 7363 6865 6d65 546f 5573 6520      schemeToUse 
+0000dbe0: 3d20 7365 6c66 2e70 7265 7065 6e64 5f73  = self.prepend_s
+0000dbf0: 6368 656d 6520 6f72 2022 6874 7470 220a  cheme or "http".
+0000dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dc10: 6e65 775f 7661 6c75 6520 3d20 7365 6c66  new_value = self
+0000dc20: 2e76 616c 6964 6174 6528 7363 6865 6d65  .validate(scheme
+0000dc30: 546f 5573 6520 2b20 223a 2f2f 2220 2b20  ToUse + "://" + 
+0000dc40: 7661 6c75 6529 0a20 2020 2020 2020 2020  value).         
+0000dc50: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
+0000dc60: 775f 7661 6c75 6520 6966 2073 656c 662e  w_value if self.
+0000dc70: 7072 6570 656e 645f 7363 6865 6d65 2065  prepend_scheme e
+0000dc80: 6c73 6520 7661 6c75 650a 2020 2020 2020  lse value.      
+0000dc90: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+0000dca0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
+0000dcb0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+0000dcc0: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
+0000dcd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000dce0: 7661 6c75 650a 0a0a 2320 536f 7572 6365  value...# Source
+0000dcf0: 7320 286f 6274 6169 6e65 6420 3230 3137  s (obtained 2017
+0000dd00: 2d4e 6f76 2d31 3129 3a0a 2320 2020 2068  -Nov-11):.#    h
+0000dd10: 7474 703a 2f2f 6461 7461 2e69 616e 612e  ttp://data.iana.
+0000dd20: 6f72 672f 544c 442f 746c 6473 2d61 6c70  org/TLD/tlds-alp
+0000dd30: 6861 2d62 792d 646f 6d61 696e 2e74 7874  ha-by-domain.txt
+0000dd40: 0a23 2073 6565 2073 6372 6970 7473 2f70  .# see scripts/p
+0000dd50: 6172 7365 5f74 6f70 5f6c 6576 656c 5f64  arse_top_level_d
+0000dd60: 6f6d 6169 6e73 2e70 7920 666f 7220 616e  omains.py for an
+0000dd70: 2065 6173 7920 7570 6461 7465 0a0a 6f66   easy update..of
+0000dd80: 6669 6369 616c 5f74 6f70 5f6c 6576 656c  ficial_top_level
+0000dd90: 5f64 6f6d 6169 6e73 203d 205b 0a20 2020  _domains = [.   
+0000dda0: 2023 2061 0a20 2020 2022 6161 6122 2c0a   # a.    "aaa",.
+0000ddb0: 2020 2020 2261 6172 7022 2c0a 2020 2020      "aarp",.    
+0000ddc0: 2261 6261 7274 6822 2c0a 2020 2020 2261  "abarth",.    "a
+0000ddd0: 6262 222c 0a20 2020 2022 6162 626f 7474  bb",.    "abbott
+0000dde0: 222c 0a20 2020 2022 6162 6276 6965 222c  ",.    "abbvie",
+0000ddf0: 0a20 2020 2022 6162 6322 2c0a 2020 2020  .    "abc",.    
+0000de00: 2261 626c 6522 2c0a 2020 2020 2261 626f  "able",.    "abo
+0000de10: 6761 646f 222c 0a20 2020 2022 6162 7564  gado",.    "abud
+0000de20: 6861 6269 222c 0a20 2020 2022 6163 222c  habi",.    "ac",
+0000de30: 0a20 2020 2022 6163 6164 656d 7922 2c0a  .    "academy",.
+0000de40: 2020 2020 2261 6363 656e 7475 7265 222c      "accenture",
+0000de50: 0a20 2020 2022 6163 636f 756e 7461 6e74  .    "accountant
+0000de60: 222c 0a20 2020 2022 6163 636f 756e 7461  ",.    "accounta
+0000de70: 6e74 7322 2c0a 2020 2020 2261 636f 222c  nts",.    "aco",
+0000de80: 0a20 2020 2022 6163 7469 7665 222c 0a20  .    "active",. 
+0000de90: 2020 2022 6163 746f 7222 2c0a 2020 2020     "actor",.    
+0000dea0: 2261 6422 2c0a 2020 2020 2261 6461 6322  "ad",.    "adac"
+0000deb0: 2c0a 2020 2020 2261 6473 222c 0a20 2020  ,.    "ads",.   
+0000dec0: 2022 6164 756c 7422 2c0a 2020 2020 2261   "adult",.    "a
+0000ded0: 6522 2c0a 2020 2020 2261 6567 222c 0a20  e",.    "aeg",. 
+0000dee0: 2020 2022 6165 726f 222c 0a20 2020 2022     "aero",.    "
+0000def0: 6165 746e 6122 2c0a 2020 2020 2261 6622  aetna",.    "af"
+0000df00: 2c0a 2020 2020 2261 6661 6d69 6c79 636f  ,.    "afamilyco
+0000df10: 6d70 616e 7922 2c0a 2020 2020 2261 666c  mpany",.    "afl
+0000df20: 222c 0a20 2020 2022 6166 7269 6361 222c  ",.    "africa",
+0000df30: 0a20 2020 2022 6167 222c 0a20 2020 2022  .    "ag",.    "
+0000df40: 6167 616b 6861 6e22 2c0a 2020 2020 2261  agakhan",.    "a
+0000df50: 6765 6e63 7922 2c0a 2020 2020 2261 6922  gency",.    "ai"
+0000df60: 2c0a 2020 2020 2261 6967 222c 0a20 2020  ,.    "aig",.   
+0000df70: 2022 6169 676f 222c 0a20 2020 2022 6169   "aigo",.    "ai
+0000df80: 7262 7573 222c 0a20 2020 2022 6169 7266  rbus",.    "airf
+0000df90: 6f72 6365 222c 0a20 2020 2022 6169 7274  orce",.    "airt
+0000dfa0: 656c 222c 0a20 2020 2022 616b 646e 222c  el",.    "akdn",
+0000dfb0: 0a20 2020 2022 616c 222c 0a20 2020 2022  .    "al",.    "
+0000dfc0: 616c 6661 726f 6d65 6f22 2c0a 2020 2020  alfaromeo",.    
+0000dfd0: 2261 6c69 6261 6261 222c 0a20 2020 2022  "alibaba",.    "
+0000dfe0: 616c 6970 6179 222c 0a20 2020 2022 616c  alipay",.    "al
+0000dff0: 6c66 696e 616e 7a22 2c0a 2020 2020 2261  lfinanz",.    "a
+0000e000: 6c6c 7374 6174 6522 2c0a 2020 2020 2261  llstate",.    "a
+0000e010: 6c6c 7922 2c0a 2020 2020 2261 6c73 6163  lly",.    "alsac
+0000e020: 6522 2c0a 2020 2020 2261 6c73 746f 6d22  e",.    "alstom"
+0000e030: 2c0a 2020 2020 2261 6d22 2c0a 2020 2020  ,.    "am",.    
+0000e040: 2261 6d65 7269 6361 6e65 7870 7265 7373  "americanexpress
+0000e050: 222c 0a20 2020 2022 616d 6572 6963 616e  ",.    "american
+0000e060: 6661 6d69 6c79 222c 0a20 2020 2022 616d  family",.    "am
+0000e070: 6578 222c 0a20 2020 2022 616d 6661 6d22  ex",.    "amfam"
+0000e080: 2c0a 2020 2020 2261 6d69 6361 222c 0a20  ,.    "amica",. 
+0000e090: 2020 2022 616d 7374 6572 6461 6d22 2c0a     "amsterdam",.
+0000e0a0: 2020 2020 2261 6e61 6c79 7469 6373 222c      "analytics",
+0000e0b0: 0a20 2020 2022 616e 6472 6f69 6422 2c0a  .    "android",.
+0000e0c0: 2020 2020 2261 6e71 7561 6e22 2c0a 2020      "anquan",.  
+0000e0d0: 2020 2261 6e7a 222c 0a20 2020 2022 616f    "anz",.    "ao
+0000e0e0: 222c 0a20 2020 2022 616f 6c22 2c0a 2020  ",.    "aol",.  
+0000e0f0: 2020 2261 7061 7274 6d65 6e74 7322 2c0a    "apartments",.
+0000e100: 2020 2020 2261 7070 222c 0a20 2020 2022      "app",.    "
+0000e110: 6170 706c 6522 2c0a 2020 2020 2261 7122  apple",.    "aq"
+0000e120: 2c0a 2020 2020 2261 7175 6172 656c 6c65  ,.    "aquarelle
+0000e130: 222c 0a20 2020 2022 6172 222c 0a20 2020  ",.    "ar",.   
+0000e140: 2022 6172 6162 222c 0a20 2020 2022 6172   "arab",.    "ar
+0000e150: 616d 636f 222c 0a20 2020 2022 6172 6368  amco",.    "arch
+0000e160: 6922 2c0a 2020 2020 2261 726d 7922 2c0a  i",.    "army",.
+0000e170: 2020 2020 2261 7270 6122 2c0a 2020 2020      "arpa",.    
+0000e180: 2261 7274 222c 0a20 2020 2022 6172 7465  "art",.    "arte
+0000e190: 222c 0a20 2020 2022 6173 222c 0a20 2020  ",.    "as",.   
+0000e1a0: 2022 6173 6461 222c 0a20 2020 2022 6173   "asda",.    "as
+0000e1b0: 6961 222c 0a20 2020 2022 6173 736f 6369  ia",.    "associ
+0000e1c0: 6174 6573 222c 0a20 2020 2022 6174 222c  ates",.    "at",
+0000e1d0: 0a20 2020 2022 6174 686c 6574 6122 2c0a  .    "athleta",.
+0000e1e0: 2020 2020 2261 7474 6f72 6e65 7922 2c0a      "attorney",.
+0000e1f0: 2020 2020 2261 7522 2c0a 2020 2020 2261      "au",.    "a
+0000e200: 7563 7469 6f6e 222c 0a20 2020 2022 6175  uction",.    "au
+0000e210: 6469 222c 0a20 2020 2022 6175 6469 626c  di",.    "audibl
+0000e220: 6522 2c0a 2020 2020 2261 7564 696f 222c  e",.    "audio",
+0000e230: 0a20 2020 2022 6175 7370 6f73 7422 2c0a  .    "auspost",.
+0000e240: 2020 2020 2261 7574 686f 7222 2c0a 2020      "author",.  
+0000e250: 2020 2261 7574 6f22 2c0a 2020 2020 2261    "auto",.    "a
+0000e260: 7574 6f73 222c 0a20 2020 2022 6176 6961  utos",.    "avia
+0000e270: 6e63 6122 2c0a 2020 2020 2261 7722 2c0a  nca",.    "aw",.
+0000e280: 2020 2020 2261 7773 222c 0a20 2020 2022      "aws",.    "
+0000e290: 6178 222c 0a20 2020 2022 6178 6122 2c0a  ax",.    "axa",.
+0000e2a0: 2020 2020 2261 7a22 2c0a 2020 2020 2261      "az",.    "a
+0000e2b0: 7a75 7265 222c 0a20 2020 2023 2062 0a20  zure",.    # b. 
+0000e2c0: 2020 2022 6261 222c 0a20 2020 2022 6261     "ba",.    "ba
+0000e2d0: 6279 222c 0a20 2020 2022 6261 6964 7522  by",.    "baidu"
+0000e2e0: 2c0a 2020 2020 2262 616e 616d 6578 222c  ,.    "banamex",
+0000e2f0: 0a20 2020 2022 6261 6e61 6e61 7265 7075  .    "bananarepu
+0000e300: 626c 6963 222c 0a20 2020 2022 6261 6e64  blic",.    "band
+0000e310: 222c 0a20 2020 2022 6261 6e6b 222c 0a20  ",.    "bank",. 
+0000e320: 2020 2022 6261 7222 2c0a 2020 2020 2262     "bar",.    "b
+0000e330: 6172 6365 6c6f 6e61 222c 0a20 2020 2022  arcelona",.    "
+0000e340: 6261 7263 6c61 7963 6172 6422 2c0a 2020  barclaycard",.  
+0000e350: 2020 2262 6172 636c 6179 7322 2c0a 2020    "barclays",.  
+0000e360: 2020 2262 6172 6566 6f6f 7422 2c0a 2020    "barefoot",.  
+0000e370: 2020 2262 6172 6761 696e 7322 2c0a 2020    "bargains",.  
+0000e380: 2020 2262 6173 6562 616c 6c22 2c0a 2020    "baseball",.  
+0000e390: 2020 2262 6173 6b65 7462 616c 6c22 2c0a    "basketball",.
+0000e3a0: 2020 2020 2262 6175 6861 7573 222c 0a20      "bauhaus",. 
+0000e3b0: 2020 2022 6261 7965 726e 222c 0a20 2020     "bayern",.   
+0000e3c0: 2022 6262 222c 0a20 2020 2022 6262 6322   "bb",.    "bbc"
+0000e3d0: 2c0a 2020 2020 2262 6274 222c 0a20 2020  ,.    "bbt",.   
+0000e3e0: 2022 6262 7661 222c 0a20 2020 2022 6263   "bbva",.    "bc
+0000e3f0: 6722 2c0a 2020 2020 2262 636e 222c 0a20  g",.    "bcn",. 
+0000e400: 2020 2022 6264 222c 0a20 2020 2022 6265     "bd",.    "be
+0000e410: 222c 0a20 2020 2022 6265 6174 7322 2c0a  ",.    "beats",.
+0000e420: 2020 2020 2262 6561 7574 7922 2c0a 2020      "beauty",.  
+0000e430: 2020 2262 6565 7222 2c0a 2020 2020 2262    "beer",.    "b
+0000e440: 656e 746c 6579 222c 0a20 2020 2022 6265  entley",.    "be
+0000e450: 726c 696e 222c 0a20 2020 2022 6265 7374  rlin",.    "best
+0000e460: 222c 0a20 2020 2022 6265 7374 6275 7922  ",.    "bestbuy"
+0000e470: 2c0a 2020 2020 2262 6574 222c 0a20 2020  ,.    "bet",.   
+0000e480: 2022 6266 222c 0a20 2020 2022 6267 222c   "bf",.    "bg",
+0000e490: 0a20 2020 2022 6268 222c 0a20 2020 2022  .    "bh",.    "
+0000e4a0: 6268 6172 7469 222c 0a20 2020 2022 6269  bharti",.    "bi
+0000e4b0: 222c 0a20 2020 2022 6269 626c 6522 2c0a  ",.    "bible",.
+0000e4c0: 2020 2020 2262 6964 222c 0a20 2020 2022      "bid",.    "
+0000e4d0: 6269 6b65 222c 0a20 2020 2022 6269 6e67  bike",.    "bing
+0000e4e0: 222c 0a20 2020 2022 6269 6e67 6f22 2c0a  ",.    "bingo",.
+0000e4f0: 2020 2020 2262 696f 222c 0a20 2020 2022      "bio",.    "
+0000e500: 6269 7a22 2c0a 2020 2020 2262 6a22 2c0a  biz",.    "bj",.
+0000e510: 2020 2020 2262 6c61 636b 222c 0a20 2020      "black",.   
+0000e520: 2022 626c 6163 6b66 7269 6461 7922 2c0a   "blackfriday",.
+0000e530: 2020 2020 2262 6c61 6e63 6f22 2c0a 2020      "blanco",.  
+0000e540: 2020 2262 6c6f 636b 6275 7374 6572 222c    "blockbuster",
+0000e550: 0a20 2020 2022 626c 6f67 222c 0a20 2020  .    "blog",.   
+0000e560: 2022 626c 6f6f 6d62 6572 6722 2c0a 2020   "bloomberg",.  
+0000e570: 2020 2262 6c75 6522 2c0a 2020 2020 2262    "blue",.    "b
+0000e580: 6d22 2c0a 2020 2020 2262 6d73 222c 0a20  m",.    "bms",. 
+0000e590: 2020 2022 626d 7722 2c0a 2020 2020 2262     "bmw",.    "b
+0000e5a0: 6e22 2c0a 2020 2020 2262 6e6c 222c 0a20  n",.    "bnl",. 
+0000e5b0: 2020 2022 626e 7070 6172 6962 6173 222c     "bnpparibas",
+0000e5c0: 0a20 2020 2022 626f 222c 0a20 2020 2022  .    "bo",.    "
+0000e5d0: 626f 6174 7322 2c0a 2020 2020 2262 6f65  boats",.    "boe
+0000e5e0: 6872 696e 6765 7222 2c0a 2020 2020 2262  hringer",.    "b
+0000e5f0: 6f66 6122 2c0a 2020 2020 2262 6f6d 222c  ofa",.    "bom",
+0000e600: 0a20 2020 2022 626f 6e64 222c 0a20 2020  .    "bond",.   
+0000e610: 2022 626f 6f22 2c0a 2020 2020 2262 6f6f   "boo",.    "boo
+0000e620: 6b22 2c0a 2020 2020 2262 6f6f 6b69 6e67  k",.    "booking
+0000e630: 222c 0a20 2020 2022 626f 6f74 7322 2c0a  ",.    "boots",.
+0000e640: 2020 2020 2262 6f73 6368 222c 0a20 2020      "bosch",.   
+0000e650: 2022 626f 7374 696b 222c 0a20 2020 2022   "bostik",.    "
+0000e660: 626f 7374 6f6e 222c 0a20 2020 2022 626f  boston",.    "bo
+0000e670: 7422 2c0a 2020 2020 2262 6f75 7469 7175  t",.    "boutiqu
+0000e680: 6522 2c0a 2020 2020 2262 6f78 222c 0a20  e",.    "box",. 
+0000e690: 2020 2022 6272 222c 0a20 2020 2022 6272     "br",.    "br
+0000e6a0: 6164 6573 636f 222c 0a20 2020 2022 6272  adesco",.    "br
+0000e6b0: 6964 6765 7374 6f6e 6522 2c0a 2020 2020  idgestone",.    
+0000e6c0: 2262 726f 6164 7761 7922 2c0a 2020 2020  "broadway",.    
+0000e6d0: 2262 726f 6b65 7222 2c0a 2020 2020 2262  "broker",.    "b
+0000e6e0: 726f 7468 6572 222c 0a20 2020 2022 6272  rother",.    "br
+0000e6f0: 7573 7365 6c73 222c 0a20 2020 2022 6273  ussels",.    "bs
+0000e700: 222c 0a20 2020 2022 6274 222c 0a20 2020  ",.    "bt",.   
+0000e710: 2022 6275 6461 7065 7374 222c 0a20 2020   "budapest",.   
+0000e720: 2022 6275 6761 7474 6922 2c0a 2020 2020   "bugatti",.    
+0000e730: 2262 7569 6c64 222c 0a20 2020 2022 6275  "build",.    "bu
+0000e740: 696c 6465 7273 222c 0a20 2020 2022 6275  ilders",.    "bu
+0000e750: 7369 6e65 7373 222c 0a20 2020 2022 6275  siness",.    "bu
+0000e760: 7922 2c0a 2020 2020 2262 757a 7a22 2c0a  y",.    "buzz",.
+0000e770: 2020 2020 2262 7622 2c0a 2020 2020 2262      "bv",.    "b
+0000e780: 7722 2c0a 2020 2020 2262 7922 2c0a 2020  w",.    "by",.  
+0000e790: 2020 2262 7a22 2c0a 2020 2020 2262 7a68    "bz",.    "bzh
+0000e7a0: 222c 0a20 2020 2023 2063 0a20 2020 2022  ",.    # c.    "
+0000e7b0: 6361 222c 0a20 2020 2022 6361 6222 2c0a  ca",.    "cab",.
+0000e7c0: 2020 2020 2263 6166 6522 2c0a 2020 2020      "cafe",.    
+0000e7d0: 2263 616c 222c 0a20 2020 2022 6361 6c6c  "cal",.    "call
+0000e7e0: 222c 0a20 2020 2022 6361 6c76 696e 6b6c  ",.    "calvinkl
+0000e7f0: 6569 6e22 2c0a 2020 2020 2263 616d 222c  ein",.    "cam",
+0000e800: 0a20 2020 2022 6361 6d65 7261 222c 0a20  .    "camera",. 
+0000e810: 2020 2022 6361 6d70 222c 0a20 2020 2022     "camp",.    "
+0000e820: 6361 6e63 6572 7265 7365 6172 6368 222c  cancerresearch",
+0000e830: 0a20 2020 2022 6361 6e6f 6e22 2c0a 2020  .    "canon",.  
+0000e840: 2020 2263 6170 6574 6f77 6e22 2c0a 2020    "capetown",.  
+0000e850: 2020 2263 6170 6974 616c 222c 0a20 2020    "capital",.   
+0000e860: 2022 6361 7069 7461 6c6f 6e65 222c 0a20   "capitalone",. 
+0000e870: 2020 2022 6361 7222 2c0a 2020 2020 2263     "car",.    "c
+0000e880: 6172 6176 616e 222c 0a20 2020 2022 6361  aravan",.    "ca
+0000e890: 7264 7322 2c0a 2020 2020 2263 6172 6522  rds",.    "care"
+0000e8a0: 2c0a 2020 2020 2263 6172 6565 7222 2c0a  ,.    "career",.
+0000e8b0: 2020 2020 2263 6172 6565 7273 222c 0a20      "careers",. 
+0000e8c0: 2020 2022 6361 7273 222c 0a20 2020 2022     "cars",.    "
+0000e8d0: 6361 7274 6965 7222 2c0a 2020 2020 2263  cartier",.    "c
+0000e8e0: 6173 6122 2c0a 2020 2020 2263 6173 6522  asa",.    "case"
+0000e8f0: 2c0a 2020 2020 2263 6173 6569 6822 2c0a  ,.    "caseih",.
+0000e900: 2020 2020 2263 6173 6822 2c0a 2020 2020      "cash",.    
+0000e910: 2263 6173 696e 6f22 2c0a 2020 2020 2263  "casino",.    "c
+0000e920: 6174 222c 0a20 2020 2022 6361 7465 7269  at",.    "cateri
+0000e930: 6e67 222c 0a20 2020 2022 6361 7468 6f6c  ng",.    "cathol
+0000e940: 6963 222c 0a20 2020 2022 6362 6122 2c0a  ic",.    "cba",.
+0000e950: 2020 2020 2263 626e 222c 0a20 2020 2022      "cbn",.    "
+0000e960: 6362 7265 222c 0a20 2020 2022 6362 7322  cbre",.    "cbs"
+0000e970: 2c0a 2020 2020 2263 6322 2c0a 2020 2020  ,.    "cc",.    
+0000e980: 2263 6422 2c0a 2020 2020 2263 6562 222c  "cd",.    "ceb",
+0000e990: 0a20 2020 2022 6365 6e74 6572 222c 0a20  .    "center",. 
+0000e9a0: 2020 2022 6365 6f22 2c0a 2020 2020 2263     "ceo",.    "c
+0000e9b0: 6572 6e22 2c0a 2020 2020 2263 6622 2c0a  ern",.    "cf",.
+0000e9c0: 2020 2020 2263 6661 222c 0a20 2020 2022      "cfa",.    "
+0000e9d0: 6366 6422 2c0a 2020 2020 2263 6722 2c0a  cfd",.    "cg",.
+0000e9e0: 2020 2020 2263 6822 2c0a 2020 2020 2263      "ch",.    "c
+0000e9f0: 6861 6e65 6c22 2c0a 2020 2020 2263 6861  hanel",.    "cha
+0000ea00: 6e6e 656c 222c 0a20 2020 2022 6368 6173  nnel",.    "chas
+0000ea10: 6522 2c0a 2020 2020 2263 6861 7422 2c0a  e",.    "chat",.
+0000ea20: 2020 2020 2263 6865 6170 222c 0a20 2020      "cheap",.   
+0000ea30: 2022 6368 696e 7461 6922 2c0a 2020 2020   "chintai",.    
+0000ea40: 2263 6872 6973 746d 6173 222c 0a20 2020  "christmas",.   
+0000ea50: 2022 6368 726f 6d65 222c 0a20 2020 2022   "chrome",.    "
+0000ea60: 6368 7279 736c 6572 222c 0a20 2020 2022  chrysler",.    "
+0000ea70: 6368 7572 6368 222c 0a20 2020 2022 6369  church",.    "ci
+0000ea80: 222c 0a20 2020 2022 6369 7072 6961 6e69  ",.    "cipriani
+0000ea90: 222c 0a20 2020 2022 6369 7263 6c65 222c  ",.    "circle",
+0000eaa0: 0a20 2020 2022 6369 7363 6f22 2c0a 2020  .    "cisco",.  
+0000eab0: 2020 2263 6974 6164 656c 222c 0a20 2020    "citadel",.   
+0000eac0: 2022 6369 7469 222c 0a20 2020 2022 6369   "citi",.    "ci
+0000ead0: 7469 6322 2c0a 2020 2020 2263 6974 7922  tic",.    "city"
+0000eae0: 2c0a 2020 2020 2263 6974 7965 6174 7322  ,.    "cityeats"
+0000eaf0: 2c0a 2020 2020 2263 6b22 2c0a 2020 2020  ,.    "ck",.    
+0000eb00: 2263 6c22 2c0a 2020 2020 2263 6c61 696d  "cl",.    "claim
+0000eb10: 7322 2c0a 2020 2020 2263 6c65 616e 696e  s",.    "cleanin
+0000eb20: 6722 2c0a 2020 2020 2263 6c69 636b 222c  g",.    "click",
+0000eb30: 0a20 2020 2022 636c 696e 6963 222c 0a20  .    "clinic",. 
+0000eb40: 2020 2022 636c 696e 6971 7565 222c 0a20     "clinique",. 
+0000eb50: 2020 2022 636c 6f74 6869 6e67 222c 0a20     "clothing",. 
+0000eb60: 2020 2022 636c 6f75 6422 2c0a 2020 2020     "cloud",.    
+0000eb70: 2263 6c75 6222 2c0a 2020 2020 2263 6c75  "club",.    "clu
+0000eb80: 626d 6564 222c 0a20 2020 2022 636d 222c  bmed",.    "cm",
+0000eb90: 0a20 2020 2022 636e 222c 0a20 2020 2022  .    "cn",.    "
+0000eba0: 636f 222c 0a20 2020 2022 636f 6163 6822  co",.    "coach"
+0000ebb0: 2c0a 2020 2020 2263 6f64 6573 222c 0a20  ,.    "codes",. 
+0000ebc0: 2020 2022 636f 6666 6565 222c 0a20 2020     "coffee",.   
+0000ebd0: 2022 636f 6c6c 6567 6522 2c0a 2020 2020   "college",.    
+0000ebe0: 2263 6f6c 6f67 6e65 222c 0a20 2020 2022  "cologne",.    "
+0000ebf0: 636f 6d22 2c0a 2020 2020 2263 6f6d 6361  com",.    "comca
+0000ec00: 7374 222c 0a20 2020 2022 636f 6d6d 6261  st",.    "commba
+0000ec10: 6e6b 222c 0a20 2020 2022 636f 6d6d 756e  nk",.    "commun
+0000ec20: 6974 7922 2c0a 2020 2020 2263 6f6d 7061  ity",.    "compa
+0000ec30: 6e79 222c 0a20 2020 2022 636f 6d70 6172  ny",.    "compar
+0000ec40: 6522 2c0a 2020 2020 2263 6f6d 7075 7465  e",.    "compute
+0000ec50: 7222 2c0a 2020 2020 2263 6f6d 7365 6322  r",.    "comsec"
+0000ec60: 2c0a 2020 2020 2263 6f6e 646f 7322 2c0a  ,.    "condos",.
+0000ec70: 2020 2020 2263 6f6e 7374 7275 6374 696f      "constructio
+0000ec80: 6e22 2c0a 2020 2020 2263 6f6e 7375 6c74  n",.    "consult
+0000ec90: 696e 6722 2c0a 2020 2020 2263 6f6e 7461  ing",.    "conta
+0000eca0: 6374 222c 0a20 2020 2022 636f 6e74 7261  ct",.    "contra
+0000ecb0: 6374 6f72 7322 2c0a 2020 2020 2263 6f6f  ctors",.    "coo
+0000ecc0: 6b69 6e67 222c 0a20 2020 2022 636f 6f6b  king",.    "cook
+0000ecd0: 696e 6763 6861 6e6e 656c 222c 0a20 2020  ingchannel",.   
+0000ece0: 2022 636f 6f6c 222c 0a20 2020 2022 636f   "cool",.    "co
+0000ecf0: 6f70 222c 0a20 2020 2022 636f 7273 6963  op",.    "corsic
+0000ed00: 6122 2c0a 2020 2020 2263 6f75 6e74 7279  a",.    "country
+0000ed10: 222c 0a20 2020 2022 636f 7570 6f6e 222c  ",.    "coupon",
+0000ed20: 0a20 2020 2022 636f 7570 6f6e 7322 2c0a  .    "coupons",.
+0000ed30: 2020 2020 2263 6f75 7273 6573 222c 0a20      "courses",. 
+0000ed40: 2020 2022 6372 222c 0a20 2020 2022 6372     "cr",.    "cr
+0000ed50: 6564 6974 222c 0a20 2020 2022 6372 6564  edit",.    "cred
+0000ed60: 6974 6361 7264 222c 0a20 2020 2022 6372  itcard",.    "cr
+0000ed70: 6564 6974 756e 696f 6e22 2c0a 2020 2020  editunion",.    
+0000ed80: 2263 7269 636b 6574 222c 0a20 2020 2022  "cricket",.    "
+0000ed90: 6372 6f77 6e22 2c0a 2020 2020 2263 7273  crown",.    "crs
+0000eda0: 222c 0a20 2020 2022 6372 7569 7365 222c  ",.    "cruise",
+0000edb0: 0a20 2020 2022 6372 7569 7365 7322 2c0a  .    "cruises",.
+0000edc0: 2020 2020 2263 7363 222c 0a20 2020 2022      "csc",.    "
+0000edd0: 6375 222c 0a20 2020 2022 6375 6973 696e  cu",.    "cuisin
+0000ede0: 656c 6c61 222c 0a20 2020 2022 6376 222c  ella",.    "cv",
+0000edf0: 0a20 2020 2022 6377 222c 0a20 2020 2022  .    "cw",.    "
+0000ee00: 6378 222c 0a20 2020 2022 6379 222c 0a20  cx",.    "cy",. 
+0000ee10: 2020 2022 6379 6d72 7522 2c0a 2020 2020     "cymru",.    
+0000ee20: 2263 796f 7522 2c0a 2020 2020 2263 7a22  "cyou",.    "cz"
+0000ee30: 2c0a 2020 2020 2320 640a 2020 2020 2264  ,.    # d.    "d
+0000ee40: 6162 7572 222c 0a20 2020 2022 6461 6422  abur",.    "dad"
+0000ee50: 2c0a 2020 2020 2264 616e 6365 222c 0a20  ,.    "dance",. 
+0000ee60: 2020 2022 6461 7461 222c 0a20 2020 2022     "data",.    "
+0000ee70: 6461 7465 222c 0a20 2020 2022 6461 7469  date",.    "dati
+0000ee80: 6e67 222c 0a20 2020 2022 6461 7473 756e  ng",.    "datsun
+0000ee90: 222c 0a20 2020 2022 6461 7922 2c0a 2020  ",.    "day",.  
+0000eea0: 2020 2264 636c 6b22 2c0a 2020 2020 2264    "dclk",.    "d
+0000eeb0: 6473 222c 0a20 2020 2022 6465 222c 0a20  ds",.    "de",. 
+0000eec0: 2020 2022 6465 616c 222c 0a20 2020 2022     "deal",.    "
+0000eed0: 6465 616c 6572 222c 0a20 2020 2022 6465  dealer",.    "de
+0000eee0: 616c 7322 2c0a 2020 2020 2264 6567 7265  als",.    "degre
+0000eef0: 6522 2c0a 2020 2020 2264 656c 6976 6572  e",.    "deliver
+0000ef00: 7922 2c0a 2020 2020 2264 656c 6c22 2c0a  y",.    "dell",.
+0000ef10: 2020 2020 2264 656c 6f69 7474 6522 2c0a      "deloitte",.
+0000ef20: 2020 2020 2264 656c 7461 222c 0a20 2020      "delta",.   
+0000ef30: 2022 6465 6d6f 6372 6174 222c 0a20 2020   "democrat",.   
+0000ef40: 2022 6465 6e74 616c 222c 0a20 2020 2022   "dental",.    "
+0000ef50: 6465 6e74 6973 7422 2c0a 2020 2020 2264  dentist",.    "d
+0000ef60: 6573 6922 2c0a 2020 2020 2264 6573 6967  esi",.    "desig
+0000ef70: 6e22 2c0a 2020 2020 2264 6576 222c 0a20  n",.    "dev",. 
+0000ef80: 2020 2022 6468 6c22 2c0a 2020 2020 2264     "dhl",.    "d
+0000ef90: 6961 6d6f 6e64 7322 2c0a 2020 2020 2264  iamonds",.    "d
+0000efa0: 6965 7422 2c0a 2020 2020 2264 6967 6974  iet",.    "digit
+0000efb0: 616c 222c 0a20 2020 2022 6469 7265 6374  al",.    "direct
+0000efc0: 222c 0a20 2020 2022 6469 7265 6374 6f72  ",.    "director
+0000efd0: 7922 2c0a 2020 2020 2264 6973 636f 756e  y",.    "discoun
+0000efe0: 7422 2c0a 2020 2020 2264 6973 636f 7665  t",.    "discove
+0000eff0: 7222 2c0a 2020 2020 2264 6973 6822 2c0a  r",.    "dish",.
+0000f000: 2020 2020 2264 6979 222c 0a20 2020 2022      "diy",.    "
+0000f010: 646a 222c 0a20 2020 2022 646b 222c 0a20  dj",.    "dk",. 
+0000f020: 2020 2022 646d 222c 0a20 2020 2022 646e     "dm",.    "dn
+0000f030: 7022 2c0a 2020 2020 2264 6f22 2c0a 2020  p",.    "do",.  
+0000f040: 2020 2264 6f63 7322 2c0a 2020 2020 2264    "docs",.    "d
+0000f050: 6f63 746f 7222 2c0a 2020 2020 2264 6f64  octor",.    "dod
+0000f060: 6765 222c 0a20 2020 2022 646f 6722 2c0a  ge",.    "dog",.
+0000f070: 2020 2020 2264 6f68 6122 2c0a 2020 2020      "doha",.    
+0000f080: 2264 6f6d 6169 6e73 222c 0a20 2020 2022  "domains",.    "
+0000f090: 646f 7422 2c0a 2020 2020 2264 6f77 6e6c  dot",.    "downl
+0000f0a0: 6f61 6422 2c0a 2020 2020 2264 7269 7665  oad",.    "drive
+0000f0b0: 222c 0a20 2020 2022 6474 7622 2c0a 2020  ",.    "dtv",.  
+0000f0c0: 2020 2264 7562 6169 222c 0a20 2020 2022    "dubai",.    "
+0000f0d0: 6475 636b 222c 0a20 2020 2022 6475 6e6c  duck",.    "dunl
+0000f0e0: 6f70 222c 0a20 2020 2022 6475 6e73 222c  op",.    "duns",
+0000f0f0: 0a20 2020 2022 6475 706f 6e74 222c 0a20  .    "dupont",. 
+0000f100: 2020 2022 6475 7262 616e 222c 0a20 2020     "durban",.   
+0000f110: 2022 6476 6167 222c 0a20 2020 2022 6476   "dvag",.    "dv
+0000f120: 7222 2c0a 2020 2020 2264 7a22 2c0a 2020  r",.    "dz",.  
+0000f130: 2020 2320 650a 2020 2020 2265 6172 7468    # e.    "earth
+0000f140: 222c 0a20 2020 2022 6561 7422 2c0a 2020  ",.    "eat",.  
+0000f150: 2020 2265 6322 2c0a 2020 2020 2265 636f    "ec",.    "eco
+0000f160: 222c 0a20 2020 2022 6564 656b 6122 2c0a  ",.    "edeka",.
+0000f170: 2020 2020 2265 6475 222c 0a20 2020 2022      "edu",.    "
+0000f180: 6564 7563 6174 696f 6e22 2c0a 2020 2020  education",.    
+0000f190: 2265 6522 2c0a 2020 2020 2265 6722 2c0a  "ee",.    "eg",.
+0000f1a0: 2020 2020 2265 6d61 696c 222c 0a20 2020      "email",.   
+0000f1b0: 2022 656d 6572 636b 222c 0a20 2020 2022   "emerck",.    "
+0000f1c0: 656e 6572 6779 222c 0a20 2020 2022 656e  energy",.    "en
+0000f1d0: 6769 6e65 6572 222c 0a20 2020 2022 656e  gineer",.    "en
+0000f1e0: 6769 6e65 6572 696e 6722 2c0a 2020 2020  gineering",.    
+0000f1f0: 2265 6e74 6572 7072 6973 6573 222c 0a20  "enterprises",. 
+0000f200: 2020 2022 6570 6f73 7422 2c0a 2020 2020     "epost",.    
+0000f210: 2265 7073 6f6e 222c 0a20 2020 2022 6571  "epson",.    "eq
+0000f220: 7569 706d 656e 7422 2c0a 2020 2020 2265  uipment",.    "e
+0000f230: 7222 2c0a 2020 2020 2265 7269 6373 736f  r",.    "ericsso
+0000f240: 6e22 2c0a 2020 2020 2265 726e 6922 2c0a  n",.    "erni",.
+0000f250: 2020 2020 2265 7322 2c0a 2020 2020 2265      "es",.    "e
+0000f260: 7371 222c 0a20 2020 2022 6573 7461 7465  sq",.    "estate
+0000f270: 222c 0a20 2020 2022 6573 7572 616e 6365  ",.    "esurance
+0000f280: 222c 0a20 2020 2022 6574 222c 0a20 2020  ",.    "et",.   
+0000f290: 2022 6574 6973 616c 6174 222c 0a20 2020   "etisalat",.   
+0000f2a0: 2022 6575 222c 0a20 2020 2022 6575 726f   "eu",.    "euro
+0000f2b0: 7669 7369 6f6e 222c 0a20 2020 2022 6575  vision",.    "eu
+0000f2c0: 7322 2c0a 2020 2020 2265 7665 6e74 7322  s",.    "events"
+0000f2d0: 2c0a 2020 2020 2265 7665 7262 616e 6b22  ,.    "everbank"
+0000f2e0: 2c0a 2020 2020 2265 7863 6861 6e67 6522  ,.    "exchange"
+0000f2f0: 2c0a 2020 2020 2265 7870 6572 7422 2c0a  ,.    "expert",.
+0000f300: 2020 2020 2265 7870 6f73 6564 222c 0a20      "exposed",. 
+0000f310: 2020 2022 6578 7072 6573 7322 2c0a 2020     "express",.  
+0000f320: 2020 2265 7874 7261 7370 6163 6522 2c0a    "extraspace",.
+0000f330: 2020 2020 2320 660a 2020 2020 2266 6167      # f.    "fag
+0000f340: 6522 2c0a 2020 2020 2266 6169 6c22 2c0a  e",.    "fail",.
+0000f350: 2020 2020 2266 6169 7277 696e 6473 222c      "fairwinds",
+0000f360: 0a20 2020 2022 6661 6974 6822 2c0a 2020  .    "faith",.  
+0000f370: 2020 2266 616d 696c 7922 2c0a 2020 2020    "family",.    
+0000f380: 2266 616e 222c 0a20 2020 2022 6661 6e73  "fan",.    "fans
+0000f390: 222c 0a20 2020 2022 6661 726d 222c 0a20  ",.    "farm",. 
+0000f3a0: 2020 2022 6661 726d 6572 7322 2c0a 2020     "farmers",.  
+0000f3b0: 2020 2266 6173 6869 6f6e 222c 0a20 2020    "fashion",.   
+0000f3c0: 2022 6661 7374 222c 0a20 2020 2022 6665   "fast",.    "fe
+0000f3d0: 6465 7822 2c0a 2020 2020 2266 6565 6462  dex",.    "feedb
+0000f3e0: 6163 6b22 2c0a 2020 2020 2266 6572 7261  ack",.    "ferra
+0000f3f0: 7269 222c 0a20 2020 2022 6665 7272 6572  ri",.    "ferrer
+0000f400: 6f22 2c0a 2020 2020 2266 6922 2c0a 2020  o",.    "fi",.  
+0000f410: 2020 2266 6961 7422 2c0a 2020 2020 2266    "fiat",.    "f
+0000f420: 6964 656c 6974 7922 2c0a 2020 2020 2266  idelity",.    "f
+0000f430: 6964 6f22 2c0a 2020 2020 2266 696c 6d22  ido",.    "film"
+0000f440: 2c0a 2020 2020 2266 696e 616c 222c 0a20  ,.    "final",. 
+0000f450: 2020 2022 6669 6e61 6e63 6522 2c0a 2020     "finance",.  
+0000f460: 2020 2266 696e 616e 6369 616c 222c 0a20    "financial",. 
+0000f470: 2020 2022 6669 7265 222c 0a20 2020 2022     "fire",.    "
+0000f480: 6669 7265 7374 6f6e 6522 2c0a 2020 2020  firestone",.    
+0000f490: 2266 6972 6d64 616c 6522 2c0a 2020 2020  "firmdale",.    
+0000f4a0: 2266 6973 6822 2c0a 2020 2020 2266 6973  "fish",.    "fis
+0000f4b0: 6869 6e67 222c 0a20 2020 2022 6669 7422  hing",.    "fit"
+0000f4c0: 2c0a 2020 2020 2266 6974 6e65 7373 222c  ,.    "fitness",
+0000f4d0: 0a20 2020 2022 666a 222c 0a20 2020 2022  .    "fj",.    "
+0000f4e0: 666b 222c 0a20 2020 2022 666c 6963 6b72  fk",.    "flickr
+0000f4f0: 222c 0a20 2020 2022 666c 6967 6874 7322  ",.    "flights"
+0000f500: 2c0a 2020 2020 2266 6c69 7222 2c0a 2020  ,.    "flir",.  
+0000f510: 2020 2266 6c6f 7269 7374 222c 0a20 2020    "florist",.   
+0000f520: 2022 666c 6f77 6572 7322 2c0a 2020 2020   "flowers",.    
+0000f530: 2266 6c79 222c 0a20 2020 2022 666d 222c  "fly",.    "fm",
+0000f540: 0a20 2020 2022 666f 222c 0a20 2020 2022  .    "fo",.    "
+0000f550: 666f 6f22 2c0a 2020 2020 2266 6f6f 6422  foo",.    "food"
+0000f560: 2c0a 2020 2020 2266 6f6f 646e 6574 776f  ,.    "foodnetwo
+0000f570: 726b 222c 0a20 2020 2022 666f 6f74 6261  rk",.    "footba
+0000f580: 6c6c 222c 0a20 2020 2022 666f 7264 222c  ll",.    "ford",
+0000f590: 0a20 2020 2022 666f 7265 7822 2c0a 2020  .    "forex",.  
+0000f5a0: 2020 2266 6f72 7361 6c65 222c 0a20 2020    "forsale",.   
+0000f5b0: 2022 666f 7275 6d22 2c0a 2020 2020 2266   "forum",.    "f
+0000f5c0: 6f75 6e64 6174 696f 6e22 2c0a 2020 2020  oundation",.    
+0000f5d0: 2266 6f78 222c 0a20 2020 2022 6672 222c  "fox",.    "fr",
+0000f5e0: 0a20 2020 2022 6672 6565 222c 0a20 2020  .    "free",.   
+0000f5f0: 2022 6672 6573 656e 6975 7322 2c0a 2020   "fresenius",.  
+0000f600: 2020 2266 726c 222c 0a20 2020 2022 6672    "frl",.    "fr
+0000f610: 6f67 616e 7322 2c0a 2020 2020 2266 726f  ogans",.    "fro
+0000f620: 6e74 646f 6f72 222c 0a20 2020 2022 6672  ntdoor",.    "fr
+0000f630: 6f6e 7469 6572 222c 0a20 2020 2022 6674  ontier",.    "ft
+0000f640: 7222 2c0a 2020 2020 2266 756a 6974 7375  r",.    "fujitsu
+0000f650: 222c 0a20 2020 2022 6675 6a69 7865 726f  ",.    "fujixero
+0000f660: 7822 2c0a 2020 2020 2266 756e 222c 0a20  x",.    "fun",. 
+0000f670: 2020 2022 6675 6e64 222c 0a20 2020 2022     "fund",.    "
+0000f680: 6675 726e 6974 7572 6522 2c0a 2020 2020  furniture",.    
+0000f690: 2266 7574 626f 6c22 2c0a 2020 2020 2266  "futbol",.    "f
+0000f6a0: 7969 222c 0a20 2020 2023 2067 0a20 2020  yi",.    # g.   
+0000f6b0: 2022 6761 222c 0a20 2020 2022 6761 6c22   "ga",.    "gal"
+0000f6c0: 2c0a 2020 2020 2267 616c 6c65 7279 222c  ,.    "gallery",
+0000f6d0: 0a20 2020 2022 6761 6c6c 6f22 2c0a 2020  .    "gallo",.  
+0000f6e0: 2020 2267 616c 6c75 7022 2c0a 2020 2020    "gallup",.    
+0000f6f0: 2267 616d 6522 2c0a 2020 2020 2267 616d  "game",.    "gam
+0000f700: 6573 222c 0a20 2020 2022 6761 7022 2c0a  es",.    "gap",.
+0000f710: 2020 2020 2267 6172 6465 6e22 2c0a 2020      "garden",.  
+0000f720: 2020 2267 6222 2c0a 2020 2020 2267 6269    "gb",.    "gbi
+0000f730: 7a22 2c0a 2020 2020 2267 6422 2c0a 2020  z",.    "gd",.  
+0000f740: 2020 2267 646e 222c 0a20 2020 2022 6765    "gdn",.    "ge
+0000f750: 222c 0a20 2020 2022 6765 6122 2c0a 2020  ",.    "gea",.  
+0000f760: 2020 2267 656e 7422 2c0a 2020 2020 2267    "gent",.    "g
+0000f770: 656e 7469 6e67 222c 0a20 2020 2022 6765  enting",.    "ge
+0000f780: 6f72 6765 222c 0a20 2020 2022 6766 222c  orge",.    "gf",
+0000f790: 0a20 2020 2022 6767 222c 0a20 2020 2022  .    "gg",.    "
+0000f7a0: 6767 6565 222c 0a20 2020 2022 6768 222c  ggee",.    "gh",
+0000f7b0: 0a20 2020 2022 6769 222c 0a20 2020 2022  .    "gi",.    "
+0000f7c0: 6769 6674 222c 0a20 2020 2022 6769 6674  gift",.    "gift
+0000f7d0: 7322 2c0a 2020 2020 2267 6976 6573 222c  s",.    "gives",
+0000f7e0: 0a20 2020 2022 6769 7669 6e67 222c 0a20  .    "giving",. 
+0000f7f0: 2020 2022 676c 222c 0a20 2020 2022 676c     "gl",.    "gl
+0000f800: 6164 6522 2c0a 2020 2020 2267 6c61 7373  ade",.    "glass
+0000f810: 222c 0a20 2020 2022 676c 6522 2c0a 2020  ",.    "gle",.  
+0000f820: 2020 2267 6c6f 6261 6c22 2c0a 2020 2020    "global",.    
+0000f830: 2267 6c6f 626f 222c 0a20 2020 2022 676d  "globo",.    "gm
+0000f840: 222c 0a20 2020 2022 676d 6169 6c22 2c0a  ",.    "gmail",.
+0000f850: 2020 2020 2267 6d62 6822 2c0a 2020 2020      "gmbh",.    
+0000f860: 2267 6d6f 222c 0a20 2020 2022 676d 7822  "gmo",.    "gmx"
+0000f870: 2c0a 2020 2020 2267 6e22 2c0a 2020 2020  ,.    "gn",.    
+0000f880: 2267 6f64 6164 6479 222c 0a20 2020 2022  "godaddy",.    "
+0000f890: 676f 6c64 222c 0a20 2020 2022 676f 6c64  gold",.    "gold
+0000f8a0: 706f 696e 7422 2c0a 2020 2020 2267 6f6c  point",.    "gol
+0000f8b0: 6622 2c0a 2020 2020 2267 6f6f 222c 0a20  f",.    "goo",. 
+0000f8c0: 2020 2022 676f 6f64 6861 6e64 7322 2c0a     "goodhands",.
+0000f8d0: 2020 2020 2267 6f6f 6479 6561 7222 2c0a      "goodyear",.
+0000f8e0: 2020 2020 2267 6f6f 6722 2c0a 2020 2020      "goog",.    
+0000f8f0: 2267 6f6f 676c 6522 2c0a 2020 2020 2267  "google",.    "g
+0000f900: 6f70 222c 0a20 2020 2022 676f 7422 2c0a  op",.    "got",.
+0000f910: 2020 2020 2267 6f76 222c 0a20 2020 2022      "gov",.    "
+0000f920: 6770 222c 0a20 2020 2022 6771 222c 0a20  gp",.    "gq",. 
+0000f930: 2020 2022 6772 222c 0a20 2020 2022 6772     "gr",.    "gr
+0000f940: 6169 6e67 6572 222c 0a20 2020 2022 6772  ainger",.    "gr
+0000f950: 6170 6869 6373 222c 0a20 2020 2022 6772  aphics",.    "gr
+0000f960: 6174 6973 222c 0a20 2020 2022 6772 6565  atis",.    "gree
+0000f970: 6e22 2c0a 2020 2020 2267 7269 7065 222c  n",.    "gripe",
+0000f980: 0a20 2020 2022 6772 6f63 6572 7922 2c0a  .    "grocery",.
+0000f990: 2020 2020 2267 726f 7570 222c 0a20 2020      "group",.   
+0000f9a0: 2022 6773 222c 0a20 2020 2022 6774 222c   "gs",.    "gt",
+0000f9b0: 0a20 2020 2022 6775 222c 0a20 2020 2022  .    "gu",.    "
+0000f9c0: 6775 6172 6469 616e 222c 0a20 2020 2022  guardian",.    "
+0000f9d0: 6775 6363 6922 2c0a 2020 2020 2267 7567  gucci",.    "gug
+0000f9e0: 6522 2c0a 2020 2020 2267 7569 6465 222c  e",.    "guide",
+0000f9f0: 0a20 2020 2022 6775 6974 6172 7322 2c0a  .    "guitars",.
+0000fa00: 2020 2020 2267 7572 7522 2c0a 2020 2020      "guru",.    
+0000fa10: 2267 7722 2c0a 2020 2020 2267 7922 2c0a  "gw",.    "gy",.
+0000fa20: 2020 2020 2320 680a 2020 2020 2268 6169      # h.    "hai
+0000fa30: 7222 2c0a 2020 2020 2268 616d 6275 7267  r",.    "hamburg
+0000fa40: 222c 0a20 2020 2022 6861 6e67 6f75 7422  ",.    "hangout"
+0000fa50: 2c0a 2020 2020 2268 6175 7322 2c0a 2020  ,.    "haus",.  
+0000fa60: 2020 2268 626f 222c 0a20 2020 2022 6864    "hbo",.    "hd
+0000fa70: 6663 222c 0a20 2020 2022 6864 6663 6261  fc",.    "hdfcba
+0000fa80: 6e6b 222c 0a20 2020 2022 6865 616c 7468  nk",.    "health
+0000fa90: 222c 0a20 2020 2022 6865 616c 7468 6361  ",.    "healthca
+0000faa0: 7265 222c 0a20 2020 2022 6865 6c70 222c  re",.    "help",
+0000fab0: 0a20 2020 2022 6865 6c73 696e 6b69 222c  .    "helsinki",
+0000fac0: 0a20 2020 2022 6865 7265 222c 0a20 2020  .    "here",.   
+0000fad0: 2022 6865 726d 6573 222c 0a20 2020 2022   "hermes",.    "
+0000fae0: 6867 7476 222c 0a20 2020 2022 6869 7068  hgtv",.    "hiph
+0000faf0: 6f70 222c 0a20 2020 2022 6869 7361 6d69  op",.    "hisami
+0000fb00: 7473 7522 2c0a 2020 2020 2268 6974 6163  tsu",.    "hitac
+0000fb10: 6869 222c 0a20 2020 2022 6869 7622 2c0a  hi",.    "hiv",.
+0000fb20: 2020 2020 2268 6b22 2c0a 2020 2020 2268      "hk",.    "h
+0000fb30: 6b74 222c 0a20 2020 2022 686d 222c 0a20  kt",.    "hm",. 
+0000fb40: 2020 2022 686e 222c 0a20 2020 2022 686f     "hn",.    "ho
+0000fb50: 636b 6579 222c 0a20 2020 2022 686f 6c64  ckey",.    "hold
+0000fb60: 696e 6773 222c 0a20 2020 2022 686f 6c69  ings",.    "holi
+0000fb70: 6461 7922 2c0a 2020 2020 2268 6f6d 6564  day",.    "homed
+0000fb80: 6570 6f74 222c 0a20 2020 2022 686f 6d65  epot",.    "home
+0000fb90: 676f 6f64 7322 2c0a 2020 2020 2268 6f6d  goods",.    "hom
+0000fba0: 6573 222c 0a20 2020 2022 686f 6d65 7365  es",.    "homese
+0000fbb0: 6e73 6522 2c0a 2020 2020 2268 6f6e 6461  nse",.    "honda
+0000fbc0: 222c 0a20 2020 2022 686f 6e65 7977 656c  ",.    "honeywel
+0000fbd0: 6c22 2c0a 2020 2020 2268 6f72 7365 222c  l",.    "horse",
+0000fbe0: 0a20 2020 2022 686f 7370 6974 616c 222c  .    "hospital",
+0000fbf0: 0a20 2020 2022 686f 7374 222c 0a20 2020  .    "host",.   
+0000fc00: 2022 686f 7374 696e 6722 2c0a 2020 2020   "hosting",.    
+0000fc10: 2268 6f74 222c 0a20 2020 2022 686f 7465  "hot",.    "hote
+0000fc20: 6c65 7322 2c0a 2020 2020 2268 6f74 656c  les",.    "hotel
+0000fc30: 7322 2c0a 2020 2020 2268 6f74 6d61 696c  s",.    "hotmail
+0000fc40: 222c 0a20 2020 2022 686f 7573 6522 2c0a  ",.    "house",.
+0000fc50: 2020 2020 2268 6f77 222c 0a20 2020 2022      "how",.    "
+0000fc60: 6872 222c 0a20 2020 2022 6873 6263 222c  hr",.    "hsbc",
+0000fc70: 0a20 2020 2022 6874 222c 0a20 2020 2022  .    "ht",.    "
+0000fc80: 6875 222c 0a20 2020 2022 6875 6768 6573  hu",.    "hughes
+0000fc90: 222c 0a20 2020 2022 6879 6174 7422 2c0a  ",.    "hyatt",.
+0000fca0: 2020 2020 2268 7975 6e64 6169 222c 0a20      "hyundai",. 
+0000fcb0: 2020 2023 2069 0a20 2020 2022 6962 6d22     # i.    "ibm"
+0000fcc0: 2c0a 2020 2020 2269 6362 6322 2c0a 2020  ,.    "icbc",.  
+0000fcd0: 2020 2269 6365 222c 0a20 2020 2022 6963    "ice",.    "ic
+0000fce0: 7522 2c0a 2020 2020 2269 6422 2c0a 2020  u",.    "id",.  
+0000fcf0: 2020 2269 6522 2c0a 2020 2020 2269 6565    "ie",.    "iee
+0000fd00: 6522 2c0a 2020 2020 2269 666d 222c 0a20  e",.    "ifm",. 
+0000fd10: 2020 2022 696b 616e 6f22 2c0a 2020 2020     "ikano",.    
+0000fd20: 2269 6c22 2c0a 2020 2020 2269 6d22 2c0a  "il",.    "im",.
+0000fd30: 2020 2020 2269 6d61 6d61 7422 2c0a 2020      "imamat",.  
+0000fd40: 2020 2269 6d64 6222 2c0a 2020 2020 2269    "imdb",.    "i
+0000fd50: 6d6d 6f22 2c0a 2020 2020 2269 6d6d 6f62  mmo",.    "immob
+0000fd60: 696c 6965 6e22 2c0a 2020 2020 2269 6e22  ilien",.    "in"
+0000fd70: 2c0a 2020 2020 2269 6e64 7573 7472 6965  ,.    "industrie
+0000fd80: 7322 2c0a 2020 2020 2269 6e66 696e 6974  s",.    "infinit
+0000fd90: 6922 2c0a 2020 2020 2269 6e66 6f22 2c0a  i",.    "info",.
+0000fda0: 2020 2020 2269 6e67 222c 0a20 2020 2022      "ing",.    "
+0000fdb0: 696e 6b22 2c0a 2020 2020 2269 6e73 7469  ink",.    "insti
+0000fdc0: 7475 7465 222c 0a20 2020 2022 696e 7375  tute",.    "insu
+0000fdd0: 7261 6e63 6522 2c0a 2020 2020 2269 6e73  rance",.    "ins
+0000fde0: 7572 6522 2c0a 2020 2020 2269 6e74 222c  ure",.    "int",
+0000fdf0: 0a20 2020 2022 696e 7465 6c22 2c0a 2020  .    "intel",.  
+0000fe00: 2020 2269 6e74 6572 6e61 7469 6f6e 616c    "international
+0000fe10: 222c 0a20 2020 2022 696e 7475 6974 222c  ",.    "intuit",
+0000fe20: 0a20 2020 2022 696e 7665 7374 6d65 6e74  .    "investment
+0000fe30: 7322 2c0a 2020 2020 2269 6f22 2c0a 2020  s",.    "io",.  
+0000fe40: 2020 2269 7069 7261 6e67 6122 2c0a 2020    "ipiranga",.  
+0000fe50: 2020 2269 7122 2c0a 2020 2020 2269 7222    "iq",.    "ir"
+0000fe60: 2c0a 2020 2020 2269 7269 7368 222c 0a20  ,.    "irish",. 
+0000fe70: 2020 2022 6973 222c 0a20 2020 2022 6973     "is",.    "is
+0000fe80: 656c 6563 7422 2c0a 2020 2020 2269 736d  elect",.    "ism
+0000fe90: 6169 6c69 222c 0a20 2020 2022 6973 7422  aili",.    "ist"
+0000fea0: 2c0a 2020 2020 2269 7374 616e 6275 6c22  ,.    "istanbul"
+0000feb0: 2c0a 2020 2020 2269 7422 2c0a 2020 2020  ,.    "it",.    
+0000fec0: 2269 7461 7522 2c0a 2020 2020 2269 7476  "itau",.    "itv
+0000fed0: 222c 0a20 2020 2022 6976 6563 6f22 2c0a  ",.    "iveco",.
+0000fee0: 2020 2020 2269 7763 222c 0a20 2020 2023      "iwc",.    #
+0000fef0: 206a 0a20 2020 2022 6a61 6775 6172 222c   j.    "jaguar",
+0000ff00: 0a20 2020 2022 6a61 7661 222c 0a20 2020  .    "java",.   
+0000ff10: 2022 6a63 6222 2c0a 2020 2020 226a 6370   "jcb",.    "jcp
+0000ff20: 222c 0a20 2020 2022 6a65 222c 0a20 2020  ",.    "je",.   
+0000ff30: 2022 6a65 6570 222c 0a20 2020 2022 6a65   "jeep",.    "je
+0000ff40: 747a 7422 2c0a 2020 2020 226a 6577 656c  tzt",.    "jewel
+0000ff50: 7279 222c 0a20 2020 2022 6a69 6f22 2c0a  ry",.    "jio",.
+0000ff60: 2020 2020 226a 6c63 222c 0a20 2020 2022      "jlc",.    "
+0000ff70: 6a6c 6c22 2c0a 2020 2020 226a 6d22 2c0a  jll",.    "jm",.
+0000ff80: 2020 2020 226a 6d70 222c 0a20 2020 2022      "jmp",.    "
+0000ff90: 6a6e 6a22 2c0a 2020 2020 226a 6f22 2c0a  jnj",.    "jo",.
+0000ffa0: 2020 2020 226a 6f62 7322 2c0a 2020 2020      "jobs",.    
+0000ffb0: 226a 6f62 7572 6722 2c0a 2020 2020 226a  "joburg",.    "j
+0000ffc0: 6f74 222c 0a20 2020 2022 6a6f 7922 2c0a  ot",.    "joy",.
+0000ffd0: 2020 2020 226a 7022 2c0a 2020 2020 226a      "jp",.    "j
+0000ffe0: 706d 6f72 6761 6e22 2c0a 2020 2020 226a  pmorgan",.    "j
+0000fff0: 7072 7322 2c0a 2020 2020 226a 7565 676f  prs",.    "juego
+00010000: 7322 2c0a 2020 2020 226a 756e 6970 6572  s",.    "juniper
+00010010: 222c 0a20 2020 2023 206b 0a20 2020 2022  ",.    # k.    "
+00010020: 6b61 7566 656e 222c 0a20 2020 2022 6b64  kaufen",.    "kd
+00010030: 6469 222c 0a20 2020 2022 6b65 222c 0a20  di",.    "ke",. 
+00010040: 2020 2022 6b65 7272 7968 6f74 656c 7322     "kerryhotels"
+00010050: 2c0a 2020 2020 226b 6572 7279 6c6f 6769  ,.    "kerrylogi
+00010060: 7374 6963 7322 2c0a 2020 2020 226b 6572  stics",.    "ker
+00010070: 7279 7072 6f70 6572 7469 6573 222c 0a20  ryproperties",. 
+00010080: 2020 2022 6b66 6822 2c0a 2020 2020 226b     "kfh",.    "k
+00010090: 6722 2c0a 2020 2020 226b 6822 2c0a 2020  g",.    "kh",.  
+000100a0: 2020 226b 6922 2c0a 2020 2020 226b 6961    "ki",.    "kia
+000100b0: 222c 0a20 2020 2022 6b69 6d22 2c0a 2020  ",.    "kim",.  
+000100c0: 2020 226b 696e 6465 7222 2c0a 2020 2020    "kinder",.    
+000100d0: 226b 696e 646c 6522 2c0a 2020 2020 226b  "kindle",.    "k
+000100e0: 6974 6368 656e 222c 0a20 2020 2022 6b69  itchen",.    "ki
+000100f0: 7769 222c 0a20 2020 2022 6b6d 222c 0a20  wi",.    "km",. 
+00010100: 2020 2022 6b6e 222c 0a20 2020 2022 6b6f     "kn",.    "ko
+00010110: 656c 6e22 2c0a 2020 2020 226b 6f6d 6174  eln",.    "komat
+00010120: 7375 222c 0a20 2020 2022 6b6f 7368 6572  su",.    "kosher
+00010130: 222c 0a20 2020 2022 6b70 222c 0a20 2020  ",.    "kp",.   
+00010140: 2022 6b70 6d67 222c 0a20 2020 2022 6b70   "kpmg",.    "kp
+00010150: 6e22 2c0a 2020 2020 226b 7222 2c0a 2020  n",.    "kr",.  
+00010160: 2020 226b 7264 222c 0a20 2020 2022 6b72    "krd",.    "kr
+00010170: 6564 222c 0a20 2020 2022 6b75 6f6b 6772  ed",.    "kuokgr
+00010180: 6f75 7022 2c0a 2020 2020 226b 7722 2c0a  oup",.    "kw",.
+00010190: 2020 2020 226b 7922 2c0a 2020 2020 226b      "ky",.    "k
+000101a0: 796f 746f 222c 0a20 2020 2022 6b7a 222c  yoto",.    "kz",
+000101b0: 0a20 2020 2023 206c 0a20 2020 2022 6c61  .    # l.    "la
+000101c0: 222c 0a20 2020 2022 6c61 6361 6978 6122  ",.    "lacaixa"
+000101d0: 2c0a 2020 2020 226c 6164 6272 6f6b 6573  ,.    "ladbrokes
+000101e0: 222c 0a20 2020 2022 6c61 6d62 6f72 6768  ",.    "lamborgh
+000101f0: 696e 6922 2c0a 2020 2020 226c 616d 6572  ini",.    "lamer
+00010200: 222c 0a20 2020 2022 6c61 6e63 6173 7465  ",.    "lancaste
+00010210: 7222 2c0a 2020 2020 226c 616e 6369 6122  r",.    "lancia"
+00010220: 2c0a 2020 2020 226c 616e 636f 6d65 222c  ,.    "lancome",
+00010230: 0a20 2020 2022 6c61 6e64 222c 0a20 2020  .    "land",.   
+00010240: 2022 6c61 6e64 726f 7665 7222 2c0a 2020   "landrover",.  
+00010250: 2020 226c 616e 7865 7373 222c 0a20 2020    "lanxess",.   
+00010260: 2022 6c61 7361 6c6c 6522 2c0a 2020 2020   "lasalle",.    
+00010270: 226c 6174 222c 0a20 2020 2022 6c61 7469  "lat",.    "lati
+00010280: 6e6f 222c 0a20 2020 2022 6c61 7472 6f62  no",.    "latrob
+00010290: 6522 2c0a 2020 2020 226c 6177 222c 0a20  e",.    "law",. 
+000102a0: 2020 2022 6c61 7779 6572 222c 0a20 2020     "lawyer",.   
+000102b0: 2022 6c62 222c 0a20 2020 2022 6c63 222c   "lb",.    "lc",
+000102c0: 0a20 2020 2022 6c64 7322 2c0a 2020 2020  .    "lds",.    
+000102d0: 226c 6561 7365 222c 0a20 2020 2022 6c65  "lease",.    "le
+000102e0: 636c 6572 6322 2c0a 2020 2020 226c 6566  clerc",.    "lef
+000102f0: 7261 6b22 2c0a 2020 2020 226c 6567 616c  rak",.    "legal
+00010300: 222c 0a20 2020 2022 6c65 676f 222c 0a20  ",.    "lego",. 
+00010310: 2020 2022 6c65 7875 7322 2c0a 2020 2020     "lexus",.    
+00010320: 226c 6762 7422 2c0a 2020 2020 226c 6922  "lgbt",.    "li"
+00010330: 2c0a 2020 2020 226c 6961 6973 6f6e 222c  ,.    "liaison",
+00010340: 0a20 2020 2022 6c69 646c 222c 0a20 2020  .    "lidl",.   
+00010350: 2022 6c69 6665 222c 0a20 2020 2022 6c69   "life",.    "li
+00010360: 6665 696e 7375 7261 6e63 6522 2c0a 2020  feinsurance",.  
+00010370: 2020 226c 6966 6573 7479 6c65 222c 0a20    "lifestyle",. 
+00010380: 2020 2022 6c69 6768 7469 6e67 222c 0a20     "lighting",. 
+00010390: 2020 2022 6c69 6b65 222c 0a20 2020 2022     "like",.    "
+000103a0: 6c69 6c6c 7922 2c0a 2020 2020 226c 696d  lilly",.    "lim
+000103b0: 6974 6564 222c 0a20 2020 2022 6c69 6d6f  ited",.    "limo
+000103c0: 222c 0a20 2020 2022 6c69 6e63 6f6c 6e22  ",.    "lincoln"
+000103d0: 2c0a 2020 2020 226c 696e 6465 222c 0a20  ,.    "linde",. 
+000103e0: 2020 2022 6c69 6e6b 222c 0a20 2020 2022     "link",.    "
+000103f0: 6c69 7073 7922 2c0a 2020 2020 226c 6976  lipsy",.    "liv
+00010400: 6522 2c0a 2020 2020 226c 6976 696e 6722  e",.    "living"
+00010410: 2c0a 2020 2020 226c 6978 696c 222c 0a20  ,.    "lixil",. 
+00010420: 2020 2022 6c6b 222c 0a20 2020 2022 6c6f     "lk",.    "lo
+00010430: 616e 222c 0a20 2020 2022 6c6f 616e 7322  an",.    "loans"
+00010440: 2c0a 2020 2020 226c 6f63 616c 686f 7374  ,.    "localhost
+00010450: 222c 0a20 2020 2022 6c6f 636b 6572 222c  ",.    "locker",
+00010460: 0a20 2020 2022 6c6f 6375 7322 2c0a 2020  .    "locus",.  
+00010470: 2020 226c 6f66 7422 2c0a 2020 2020 226c    "loft",.    "l
+00010480: 6f6c 222c 0a20 2020 2022 6c6f 6e64 6f6e  ol",.    "london
+00010490: 222c 0a20 2020 2022 6c6f 7474 6522 2c0a  ",.    "lotte",.
+000104a0: 2020 2020 226c 6f74 746f 222c 0a20 2020      "lotto",.   
+000104b0: 2022 6c6f 7665 222c 0a20 2020 2022 6c70   "love",.    "lp
+000104c0: 6c22 2c0a 2020 2020 226c 706c 6669 6e61  l",.    "lplfina
+000104d0: 6e63 6961 6c22 2c0a 2020 2020 226c 7222  ncial",.    "lr"
+000104e0: 2c0a 2020 2020 226c 7322 2c0a 2020 2020  ,.    "ls",.    
+000104f0: 226c 7422 2c0a 2020 2020 226c 7464 222c  "lt",.    "ltd",
+00010500: 0a20 2020 2022 6c74 6461 222c 0a20 2020  .    "ltda",.   
+00010510: 2022 6c75 222c 0a20 2020 2022 6c75 6e64   "lu",.    "lund
+00010520: 6265 636b 222c 0a20 2020 2022 6c75 7069  beck",.    "lupi
+00010530: 6e22 2c0a 2020 2020 226c 7578 6522 2c0a  n",.    "luxe",.
+00010540: 2020 2020 226c 7578 7572 7922 2c0a 2020      "luxury",.  
+00010550: 2020 226c 7622 2c0a 2020 2020 226c 7922    "lv",.    "ly"
+00010560: 2c0a 2020 2020 2320 6d0a 2020 2020 226d  ,.    # m.    "m
+00010570: 6122 2c0a 2020 2020 226d 6163 7973 222c  a",.    "macys",
+00010580: 0a20 2020 2022 6d61 6472 6964 222c 0a20  .    "madrid",. 
+00010590: 2020 2022 6d61 6966 222c 0a20 2020 2022     "maif",.    "
+000105a0: 6d61 6973 6f6e 222c 0a20 2020 2022 6d61  maison",.    "ma
+000105b0: 6b65 7570 222c 0a20 2020 2022 6d61 6e22  keup",.    "man"
+000105c0: 2c0a 2020 2020 226d 616e 6167 656d 656e  ,.    "managemen
+000105d0: 7422 2c0a 2020 2020 226d 616e 676f 222c  t",.    "mango",
+000105e0: 0a20 2020 2022 6d61 7022 2c0a 2020 2020  .    "map",.    
+000105f0: 226d 6172 6b65 7422 2c0a 2020 2020 226d  "market",.    "m
+00010600: 6172 6b65 7469 6e67 222c 0a20 2020 2022  arketing",.    "
+00010610: 6d61 726b 6574 7322 2c0a 2020 2020 226d  markets",.    "m
+00010620: 6172 7269 6f74 7422 2c0a 2020 2020 226d  arriott",.    "m
+00010630: 6172 7368 616c 6c73 222c 0a20 2020 2022  arshalls",.    "
+00010640: 6d61 7365 7261 7469 222c 0a20 2020 2022  maserati",.    "
+00010650: 6d61 7474 656c 222c 0a20 2020 2022 6d62  mattel",.    "mb
+00010660: 6122 2c0a 2020 2020 226d 6322 2c0a 2020  a",.    "mc",.  
+00010670: 2020 226d 636b 696e 7365 7922 2c0a 2020    "mckinsey",.  
+00010680: 2020 226d 6422 2c0a 2020 2020 226d 6522    "md",.    "me"
+00010690: 2c0a 2020 2020 226d 6564 222c 0a20 2020  ,.    "med",.   
+000106a0: 2022 6d65 6469 6122 2c0a 2020 2020 226d   "media",.    "m
+000106b0: 6565 7422 2c0a 2020 2020 226d 656c 626f  eet",.    "melbo
+000106c0: 7572 6e65 222c 0a20 2020 2022 6d65 6d65  urne",.    "meme
+000106d0: 222c 0a20 2020 2022 6d65 6d6f 7269 616c  ",.    "memorial
+000106e0: 222c 0a20 2020 2022 6d65 6e22 2c0a 2020  ",.    "men",.  
+000106f0: 2020 226d 656e 7522 2c0a 2020 2020 226d    "menu",.    "m
+00010700: 656f 222c 0a20 2020 2022 6d65 7263 6b6d  eo",.    "merckm
+00010710: 7364 222c 0a20 2020 2022 6d65 746c 6966  sd",.    "metlif
+00010720: 6522 2c0a 2020 2020 226d 6722 2c0a 2020  e",.    "mg",.  
+00010730: 2020 226d 6822 2c0a 2020 2020 226d 6961    "mh",.    "mia
+00010740: 6d69 222c 0a20 2020 2022 6d69 6372 6f73  mi",.    "micros
+00010750: 6f66 7422 2c0a 2020 2020 226d 696c 222c  oft",.    "mil",
+00010760: 0a20 2020 2022 6d69 6e69 222c 0a20 2020  .    "mini",.   
+00010770: 2022 6d69 6e74 222c 0a20 2020 2022 6d69   "mint",.    "mi
+00010780: 7422 2c0a 2020 2020 226d 6974 7375 6269  t",.    "mitsubi
+00010790: 7368 6922 2c0a 2020 2020 226d 6b22 2c0a  shi",.    "mk",.
+000107a0: 2020 2020 226d 6c22 2c0a 2020 2020 226d      "ml",.    "m
+000107b0: 6c62 222c 0a20 2020 2022 6d6c 7322 2c0a  lb",.    "mls",.
+000107c0: 2020 2020 226d 6d22 2c0a 2020 2020 226d      "mm",.    "m
+000107d0: 6d61 222c 0a20 2020 2022 6d6e 222c 0a20  ma",.    "mn",. 
+000107e0: 2020 2022 6d6f 222c 0a20 2020 2022 6d6f     "mo",.    "mo
+000107f0: 6269 222c 0a20 2020 2022 6d6f 6269 6c65  bi",.    "mobile
+00010800: 222c 0a20 2020 2022 6d6f 6269 6c79 222c  ",.    "mobily",
+00010810: 0a20 2020 2022 6d6f 6461 222c 0a20 2020  .    "moda",.   
+00010820: 2022 6d6f 6522 2c0a 2020 2020 226d 6f69   "moe",.    "moi
+00010830: 222c 0a20 2020 2022 6d6f 6d22 2c0a 2020  ",.    "mom",.  
+00010840: 2020 226d 6f6e 6173 6822 2c0a 2020 2020    "monash",.    
+00010850: 226d 6f6e 6579 222c 0a20 2020 2022 6d6f  "money",.    "mo
+00010860: 6e73 7465 7222 2c0a 2020 2020 226d 6f70  nster",.    "mop
+00010870: 6172 222c 0a20 2020 2022 6d6f 726d 6f6e  ar",.    "mormon
+00010880: 222c 0a20 2020 2022 6d6f 7274 6761 6765  ",.    "mortgage
+00010890: 222c 0a20 2020 2022 6d6f 7363 6f77 222c  ",.    "moscow",
+000108a0: 0a20 2020 2022 6d6f 746f 222c 0a20 2020  .    "moto",.   
+000108b0: 2022 6d6f 746f 7263 7963 6c65 7322 2c0a   "motorcycles",.
+000108c0: 2020 2020 226d 6f76 222c 0a20 2020 2022      "mov",.    "
+000108d0: 6d6f 7669 6522 2c0a 2020 2020 226d 6f76  movie",.    "mov
+000108e0: 6973 7461 7222 2c0a 2020 2020 226d 7022  istar",.    "mp"
+000108f0: 2c0a 2020 2020 226d 7122 2c0a 2020 2020  ,.    "mq",.    
+00010900: 226d 7222 2c0a 2020 2020 226d 7322 2c0a  "mr",.    "ms",.
+00010910: 2020 2020 226d 7364 222c 0a20 2020 2022      "msd",.    "
+00010920: 6d74 222c 0a20 2020 2022 6d74 6e22 2c0a  mt",.    "mtn",.
+00010930: 2020 2020 226d 7472 222c 0a20 2020 2022      "mtr",.    "
+00010940: 6d75 222c 0a20 2020 2022 6d75 7365 756d  mu",.    "museum
+00010950: 222c 0a20 2020 2022 6d75 7475 616c 222c  ",.    "mutual",
+00010960: 0a20 2020 2022 6d76 222c 0a20 2020 2022  .    "mv",.    "
+00010970: 6d77 222c 0a20 2020 2022 6d78 222c 0a20  mw",.    "mx",. 
+00010980: 2020 2022 6d79 222c 0a20 2020 2022 6d7a     "my",.    "mz
+00010990: 222c 0a20 2020 2023 206e 0a20 2020 2022  ",.    # n.    "
+000109a0: 6e61 222c 0a20 2020 2022 6e61 6222 2c0a  na",.    "nab",.
+000109b0: 2020 2020 226e 6164 6578 222c 0a20 2020      "nadex",.   
+000109c0: 2022 6e61 676f 7961 222c 0a20 2020 2022   "nagoya",.    "
+000109d0: 6e61 6d65 222c 0a20 2020 2022 6e61 7469  name",.    "nati
+000109e0: 6f6e 7769 6465 222c 0a20 2020 2022 6e61  onwide",.    "na
+000109f0: 7475 7261 222c 0a20 2020 2022 6e61 7679  tura",.    "navy
+00010a00: 222c 0a20 2020 2022 6e62 6122 2c0a 2020  ",.    "nba",.  
+00010a10: 2020 226e 6322 2c0a 2020 2020 226e 6522    "nc",.    "ne"
+00010a20: 2c0a 2020 2020 226e 6563 222c 0a20 2020  ,.    "nec",.   
+00010a30: 2022 6e65 7422 2c0a 2020 2020 226e 6574   "net",.    "net
+00010a40: 6261 6e6b 222c 0a20 2020 2022 6e65 7466  bank",.    "netf
+00010a50: 6c69 7822 2c0a 2020 2020 226e 6574 776f  lix",.    "netwo
+00010a60: 726b 222c 0a20 2020 2022 6e65 7573 7461  rk",.    "neusta
+00010a70: 7222 2c0a 2020 2020 226e 6577 222c 0a20  r",.    "new",. 
+00010a80: 2020 2022 6e65 7768 6f6c 6c61 6e64 222c     "newholland",
+00010a90: 0a20 2020 2022 6e65 7773 222c 0a20 2020  .    "news",.   
+00010aa0: 2022 6e65 7874 222c 0a20 2020 2022 6e65   "next",.    "ne
+00010ab0: 7874 6469 7265 6374 222c 0a20 2020 2022  xtdirect",.    "
+00010ac0: 6e65 7875 7322 2c0a 2020 2020 226e 6622  nexus",.    "nf"
+00010ad0: 2c0a 2020 2020 226e 666c 222c 0a20 2020  ,.    "nfl",.   
+00010ae0: 2022 6e67 222c 0a20 2020 2022 6e67 6f22   "ng",.    "ngo"
+00010af0: 2c0a 2020 2020 226e 686b 222c 0a20 2020  ,.    "nhk",.   
+00010b00: 2022 6e69 222c 0a20 2020 2022 6e69 636f   "ni",.    "nico
+00010b10: 222c 0a20 2020 2022 6e69 6b65 222c 0a20  ",.    "nike",. 
+00010b20: 2020 2022 6e69 6b6f 6e22 2c0a 2020 2020     "nikon",.    
+00010b30: 226e 696e 6a61 222c 0a20 2020 2022 6e69  "ninja",.    "ni
+00010b40: 7373 616e 222c 0a20 2020 2022 6e69 7373  ssan",.    "niss
+00010b50: 6179 222c 0a20 2020 2022 6e6c 222c 0a20  ay",.    "nl",. 
+00010b60: 2020 2022 6e6f 222c 0a20 2020 2022 6e6f     "no",.    "no
+00010b70: 6b69 6122 2c0a 2020 2020 226e 6f72 7468  kia",.    "north
+00010b80: 7765 7374 6572 6e6d 7574 7561 6c22 2c0a  westernmutual",.
+00010b90: 2020 2020 226e 6f72 746f 6e22 2c0a 2020      "norton",.  
+00010ba0: 2020 226e 6f77 222c 0a20 2020 2022 6e6f    "now",.    "no
+00010bb0: 7772 757a 222c 0a20 2020 2022 6e6f 7774  wruz",.    "nowt
+00010bc0: 7622 2c0a 2020 2020 226e 7022 2c0a 2020  v",.    "np",.  
+00010bd0: 2020 226e 7222 2c0a 2020 2020 226e 7261    "nr",.    "nra
+00010be0: 222c 0a20 2020 2022 6e72 7722 2c0a 2020  ",.    "nrw",.  
+00010bf0: 2020 226e 7474 222c 0a20 2020 2022 6e75    "ntt",.    "nu
+00010c00: 222c 0a20 2020 2022 6e79 6322 2c0a 2020  ",.    "nyc",.  
+00010c10: 2020 226e 7a22 2c0a 2020 2020 2320 6f0a    "nz",.    # o.
+00010c20: 2020 2020 226f 6269 222c 0a20 2020 2022      "obi",.    "
+00010c30: 6f62 7365 7276 6572 222c 0a20 2020 2022  observer",.    "
+00010c40: 6f66 6622 2c0a 2020 2020 226f 6666 6963  off",.    "offic
+00010c50: 6522 2c0a 2020 2020 226f 6b69 6e61 7761  e",.    "okinawa
+00010c60: 222c 0a20 2020 2022 6f6c 6179 616e 222c  ",.    "olayan",
+00010c70: 0a20 2020 2022 6f6c 6179 616e 6772 6f75  .    "olayangrou
+00010c80: 7022 2c0a 2020 2020 226f 6c64 6e61 7679  p",.    "oldnavy
+00010c90: 222c 0a20 2020 2022 6f6c 6c6f 222c 0a20  ",.    "ollo",. 
+00010ca0: 2020 2022 6f6d 222c 0a20 2020 2022 6f6d     "om",.    "om
+00010cb0: 6567 6122 2c0a 2020 2020 226f 6e65 222c  ega",.    "one",
+00010cc0: 0a20 2020 2022 6f6e 6722 2c0a 2020 2020  .    "ong",.    
+00010cd0: 226f 6e6c 222c 0a20 2020 2022 6f6e 6c69  "onl",.    "onli
+00010ce0: 6e65 222c 0a20 2020 2022 6f6e 796f 7572  ne",.    "onyour
+00010cf0: 7369 6465 222c 0a20 2020 2022 6f6f 6f22  side",.    "ooo"
+00010d00: 2c0a 2020 2020 226f 7065 6e22 2c0a 2020  ,.    "open",.  
+00010d10: 2020 226f 7261 636c 6522 2c0a 2020 2020    "oracle",.    
+00010d20: 226f 7261 6e67 6522 2c0a 2020 2020 226f  "orange",.    "o
+00010d30: 7267 222c 0a20 2020 2022 6f72 6761 6e69  rg",.    "organi
+00010d40: 6322 2c0a 2020 2020 226f 7269 6769 6e73  c",.    "origins
+00010d50: 222c 0a20 2020 2022 6f73 616b 6122 2c0a  ",.    "osaka",.
+00010d60: 2020 2020 226f 7473 756b 6122 2c0a 2020      "otsuka",.  
+00010d70: 2020 226f 7474 222c 0a20 2020 2022 6f76    "ott",.    "ov
+00010d80: 6822 2c0a 2020 2020 2320 700a 2020 2020  h",.    # p.    
+00010d90: 2270 6122 2c0a 2020 2020 2270 6167 6522  "pa",.    "page"
+00010da0: 2c0a 2020 2020 2270 616e 6173 6f6e 6963  ,.    "panasonic
+00010db0: 222c 0a20 2020 2022 7061 6e65 7261 6922  ",.    "panerai"
+00010dc0: 2c0a 2020 2020 2270 6172 6973 222c 0a20  ,.    "paris",. 
+00010dd0: 2020 2022 7061 7273 222c 0a20 2020 2022     "pars",.    "
+00010de0: 7061 7274 6e65 7273 222c 0a20 2020 2022  partners",.    "
+00010df0: 7061 7274 7322 2c0a 2020 2020 2270 6172  parts",.    "par
+00010e00: 7479 222c 0a20 2020 2022 7061 7373 6167  ty",.    "passag
+00010e10: 656e 7322 2c0a 2020 2020 2270 6179 222c  ens",.    "pay",
+00010e20: 0a20 2020 2022 7063 6377 222c 0a20 2020  .    "pccw",.   
+00010e30: 2022 7065 222c 0a20 2020 2022 7065 7422   "pe",.    "pet"
+00010e40: 2c0a 2020 2020 2270 6622 2c0a 2020 2020  ,.    "pf",.    
+00010e50: 2270 6669 7a65 7222 2c0a 2020 2020 2270  "pfizer",.    "p
+00010e60: 6722 2c0a 2020 2020 2270 6822 2c0a 2020  g",.    "ph",.  
+00010e70: 2020 2270 6861 726d 6163 7922 2c0a 2020    "pharmacy",.  
+00010e80: 2020 2270 6864 222c 0a20 2020 2022 7068    "phd",.    "ph
+00010e90: 696c 6970 7322 2c0a 2020 2020 2270 686f  ilips",.    "pho
+00010ea0: 6e65 222c 0a20 2020 2022 7068 6f74 6f22  ne",.    "photo"
+00010eb0: 2c0a 2020 2020 2270 686f 746f 6772 6170  ,.    "photograp
+00010ec0: 6879 222c 0a20 2020 2022 7068 6f74 6f73  hy",.    "photos
+00010ed0: 222c 0a20 2020 2022 7068 7973 696f 222c  ",.    "physio",
+00010ee0: 0a20 2020 2022 7069 6167 6574 222c 0a20  .    "piaget",. 
+00010ef0: 2020 2022 7069 6373 222c 0a20 2020 2022     "pics",.    "
+00010f00: 7069 6374 6574 222c 0a20 2020 2022 7069  pictet",.    "pi
+00010f10: 6374 7572 6573 222c 0a20 2020 2022 7069  ctures",.    "pi
+00010f20: 6422 2c0a 2020 2020 2270 696e 222c 0a20  d",.    "pin",. 
+00010f30: 2020 2022 7069 6e67 222c 0a20 2020 2022     "ping",.    "
+00010f40: 7069 6e6b 222c 0a20 2020 2022 7069 6f6e  pink",.    "pion
+00010f50: 6565 7222 2c0a 2020 2020 2270 697a 7a61  eer",.    "pizza
+00010f60: 222c 0a20 2020 2022 706b 222c 0a20 2020  ",.    "pk",.   
+00010f70: 2022 706c 222c 0a20 2020 2022 706c 6163   "pl",.    "plac
+00010f80: 6522 2c0a 2020 2020 2270 6c61 7922 2c0a  e",.    "play",.
+00010f90: 2020 2020 2270 6c61 7973 7461 7469 6f6e      "playstation
+00010fa0: 222c 0a20 2020 2022 706c 756d 6269 6e67  ",.    "plumbing
+00010fb0: 222c 0a20 2020 2022 706c 7573 222c 0a20  ",.    "plus",. 
+00010fc0: 2020 2022 706d 222c 0a20 2020 2022 706e     "pm",.    "pn
+00010fd0: 222c 0a20 2020 2022 706e 6322 2c0a 2020  ",.    "pnc",.  
+00010fe0: 2020 2270 6f68 6c22 2c0a 2020 2020 2270    "pohl",.    "p
+00010ff0: 6f6b 6572 222c 0a20 2020 2022 706f 6c69  oker",.    "poli
+00011000: 7469 6522 2c0a 2020 2020 2270 6f72 6e22  tie",.    "porn"
+00011010: 2c0a 2020 2020 2270 6f73 7422 2c0a 2020  ,.    "post",.  
+00011020: 2020 2270 7222 2c0a 2020 2020 2270 7261    "pr",.    "pra
+00011030: 6d65 7269 6361 222c 0a20 2020 2022 7072  merica",.    "pr
+00011040: 6178 6922 2c0a 2020 2020 2270 7265 7373  axi",.    "press
+00011050: 222c 0a20 2020 2022 7072 696d 6522 2c0a  ",.    "prime",.
+00011060: 2020 2020 2270 726f 222c 0a20 2020 2022      "pro",.    "
+00011070: 7072 6f64 222c 0a20 2020 2022 7072 6f64  prod",.    "prod
+00011080: 7563 7469 6f6e 7322 2c0a 2020 2020 2270  uctions",.    "p
+00011090: 726f 6622 2c0a 2020 2020 2270 726f 6772  rof",.    "progr
+000110a0: 6573 7369 7665 222c 0a20 2020 2022 7072  essive",.    "pr
+000110b0: 6f6d 6f22 2c0a 2020 2020 2270 726f 7065  omo",.    "prope
+000110c0: 7274 6965 7322 2c0a 2020 2020 2270 726f  rties",.    "pro
+000110d0: 7065 7274 7922 2c0a 2020 2020 2270 726f  perty",.    "pro
+000110e0: 7465 6374 696f 6e22 2c0a 2020 2020 2270  tection",.    "p
+000110f0: 7275 222c 0a20 2020 2022 7072 7564 656e  ru",.    "pruden
+00011100: 7469 616c 222c 0a20 2020 2022 7073 222c  tial",.    "ps",
+00011110: 0a20 2020 2022 7074 222c 0a20 2020 2022  .    "pt",.    "
+00011120: 7075 6222 2c0a 2020 2020 2270 7722 2c0a  pub",.    "pw",.
+00011130: 2020 2020 2270 7763 222c 0a20 2020 2022      "pwc",.    "
+00011140: 7079 222c 0a20 2020 2023 2071 0a20 2020  py",.    # q.   
+00011150: 2022 7161 222c 0a20 2020 2022 7170 6f6e   "qa",.    "qpon
+00011160: 222c 0a20 2020 2022 7175 6562 6563 222c  ",.    "quebec",
+00011170: 0a20 2020 2022 7175 6573 7422 2c0a 2020  .    "quest",.  
+00011180: 2020 2271 7663 222c 0a20 2020 2023 2072    "qvc",.    # r
+00011190: 0a20 2020 2022 7261 6369 6e67 222c 0a20  .    "racing",. 
+000111a0: 2020 2022 7261 6469 6f22 2c0a 2020 2020     "radio",.    
+000111b0: 2272 6169 6422 2c0a 2020 2020 2272 6522  "raid",.    "re"
+000111c0: 2c0a 2020 2020 2272 6561 6422 2c0a 2020  ,.    "read",.  
+000111d0: 2020 2272 6561 6c65 7374 6174 6522 2c0a    "realestate",.
+000111e0: 2020 2020 2272 6561 6c74 6f72 222c 0a20      "realtor",. 
+000111f0: 2020 2022 7265 616c 7479 222c 0a20 2020     "realty",.   
+00011200: 2022 7265 6369 7065 7322 2c0a 2020 2020   "recipes",.    
+00011210: 2272 6564 222c 0a20 2020 2022 7265 6473  "red",.    "reds
+00011220: 746f 6e65 222c 0a20 2020 2022 7265 6475  tone",.    "redu
+00011230: 6d62 7265 6c6c 6122 2c0a 2020 2020 2272  mbrella",.    "r
+00011240: 6568 6162 222c 0a20 2020 2022 7265 6973  ehab",.    "reis
+00011250: 6522 2c0a 2020 2020 2272 6569 7365 6e22  e",.    "reisen"
+00011260: 2c0a 2020 2020 2272 6569 7422 2c0a 2020  ,.    "reit",.  
+00011270: 2020 2272 656c 6961 6e63 6522 2c0a 2020    "reliance",.  
+00011280: 2020 2272 656e 222c 0a20 2020 2022 7265    "ren",.    "re
+00011290: 6e74 222c 0a20 2020 2022 7265 6e74 616c  nt",.    "rental
+000112a0: 7322 2c0a 2020 2020 2272 6570 6169 7222  s",.    "repair"
+000112b0: 2c0a 2020 2020 2272 6570 6f72 7422 2c0a  ,.    "report",.
+000112c0: 2020 2020 2272 6570 7562 6c69 6361 6e22      "republican"
+000112d0: 2c0a 2020 2020 2272 6573 7422 2c0a 2020  ,.    "rest",.  
+000112e0: 2020 2272 6573 7461 7572 616e 7422 2c0a    "restaurant",.
+000112f0: 2020 2020 2272 6576 6965 7722 2c0a 2020      "review",.  
+00011300: 2020 2272 6576 6965 7773 222c 0a20 2020    "reviews",.   
+00011310: 2022 7265 7872 6f74 6822 2c0a 2020 2020   "rexroth",.    
+00011320: 2272 6963 6822 2c0a 2020 2020 2272 6963  "rich",.    "ric
+00011330: 6861 7264 6c69 222c 0a20 2020 2022 7269  hardli",.    "ri
+00011340: 636f 6822 2c0a 2020 2020 2272 6967 6874  coh",.    "right
+00011350: 6174 686f 6d65 222c 0a20 2020 2022 7269  athome",.    "ri
+00011360: 6c22 2c0a 2020 2020 2272 696f 222c 0a20  l",.    "rio",. 
+00011370: 2020 2022 7269 7022 2c0a 2020 2020 2272     "rip",.    "r
+00011380: 6d69 7422 2c0a 2020 2020 2272 6f22 2c0a  mit",.    "ro",.
+00011390: 2020 2020 2272 6f63 6865 7222 2c0a 2020      "rocher",.  
+000113a0: 2020 2272 6f63 6b73 222c 0a20 2020 2022    "rocks",.    "
+000113b0: 726f 6465 6f22 2c0a 2020 2020 2272 6f67  rodeo",.    "rog
+000113c0: 6572 7322 2c0a 2020 2020 2272 6f6f 6d22  ers",.    "room"
+000113d0: 2c0a 2020 2020 2272 7322 2c0a 2020 2020  ,.    "rs",.    
+000113e0: 2272 7376 7022 2c0a 2020 2020 2272 7522  "rsvp",.    "ru"
+000113f0: 2c0a 2020 2020 2272 7567 6279 222c 0a20  ,.    "rugby",. 
+00011400: 2020 2022 7275 6872 222c 0a20 2020 2022     "ruhr",.    "
+00011410: 7275 6e22 2c0a 2020 2020 2272 7722 2c0a  run",.    "rw",.
+00011420: 2020 2020 2272 7765 222c 0a20 2020 2022      "rwe",.    "
+00011430: 7279 756b 7975 222c 0a20 2020 2023 2073  ryukyu",.    # s
+00011440: 0a20 2020 2022 7361 222c 0a20 2020 2022  .    "sa",.    "
+00011450: 7361 6172 6c61 6e64 222c 0a20 2020 2022  saarland",.    "
+00011460: 7361 6665 222c 0a20 2020 2022 7361 6665  safe",.    "safe
+00011470: 7479 222c 0a20 2020 2022 7361 6b75 7261  ty",.    "sakura
+00011480: 222c 0a20 2020 2022 7361 6c65 222c 0a20  ",.    "sale",. 
+00011490: 2020 2022 7361 6c6f 6e22 2c0a 2020 2020     "salon",.    
+000114a0: 2273 616d 7363 6c75 6222 2c0a 2020 2020  "samsclub",.    
+000114b0: 2273 616d 7375 6e67 222c 0a20 2020 2022  "samsung",.    "
+000114c0: 7361 6e64 7669 6b22 2c0a 2020 2020 2273  sandvik",.    "s
+000114d0: 616e 6476 696b 636f 726f 6d61 6e74 222c  andvikcoromant",
+000114e0: 0a20 2020 2022 7361 6e6f 6669 222c 0a20  .    "sanofi",. 
+000114f0: 2020 2022 7361 7022 2c0a 2020 2020 2273     "sap",.    "s
+00011500: 6170 6f22 2c0a 2020 2020 2273 6172 6c22  apo",.    "sarl"
+00011510: 2c0a 2020 2020 2273 6173 222c 0a20 2020  ,.    "sas",.   
+00011520: 2022 7361 7665 222c 0a20 2020 2022 7361   "save",.    "sa
+00011530: 786f 222c 0a20 2020 2022 7362 222c 0a20  xo",.    "sb",. 
+00011540: 2020 2022 7362 6922 2c0a 2020 2020 2273     "sbi",.    "s
+00011550: 6273 222c 0a20 2020 2022 7363 222c 0a20  bs",.    "sc",. 
+00011560: 2020 2022 7363 6122 2c0a 2020 2020 2273     "sca",.    "s
+00011570: 6362 222c 0a20 2020 2022 7363 6861 6566  cb",.    "schaef
+00011580: 666c 6572 222c 0a20 2020 2022 7363 686d  fler",.    "schm
+00011590: 6964 7422 2c0a 2020 2020 2273 6368 6f6c  idt",.    "schol
+000115a0: 6172 7368 6970 7322 2c0a 2020 2020 2273  arships",.    "s
+000115b0: 6368 6f6f 6c22 2c0a 2020 2020 2273 6368  chool",.    "sch
+000115c0: 756c 6522 2c0a 2020 2020 2273 6368 7761  ule",.    "schwa
+000115d0: 727a 222c 0a20 2020 2022 7363 6965 6e63  rz",.    "scienc
+000115e0: 6522 2c0a 2020 2020 2273 636a 6f68 6e73  e",.    "scjohns
+000115f0: 6f6e 222c 0a20 2020 2022 7363 6f72 222c  on",.    "scor",
+00011600: 0a20 2020 2022 7363 6f74 222c 0a20 2020  .    "scot",.   
+00011610: 2022 7364 222c 0a20 2020 2022 7365 222c   "sd",.    "se",
+00011620: 0a20 2020 2022 7365 6172 6368 222c 0a20  .    "search",. 
+00011630: 2020 2022 7365 6174 222c 0a20 2020 2022     "seat",.    "
+00011640: 7365 6375 7265 222c 0a20 2020 2022 7365  secure",.    "se
+00011650: 6375 7269 7479 222c 0a20 2020 2022 7365  curity",.    "se
+00011660: 656b 222c 0a20 2020 2022 7365 6c65 6374  ek",.    "select
+00011670: 222c 0a20 2020 2022 7365 6e65 7222 2c0a  ",.    "sener",.
+00011680: 2020 2020 2273 6572 7669 6365 7322 2c0a      "services",.
+00011690: 2020 2020 2273 6573 222c 0a20 2020 2022      "ses",.    "
+000116a0: 7365 7665 6e22 2c0a 2020 2020 2273 6577  seven",.    "sew
+000116b0: 222c 0a20 2020 2022 7365 7822 2c0a 2020  ",.    "sex",.  
+000116c0: 2020 2273 6578 7922 2c0a 2020 2020 2273    "sexy",.    "s
+000116d0: 6672 222c 0a20 2020 2022 7367 222c 0a20  fr",.    "sg",. 
+000116e0: 2020 2022 7368 222c 0a20 2020 2022 7368     "sh",.    "sh
+000116f0: 616e 6772 696c 6122 2c0a 2020 2020 2273  angrila",.    "s
+00011700: 6861 7270 222c 0a20 2020 2022 7368 6177  harp",.    "shaw
+00011710: 222c 0a20 2020 2022 7368 656c 6c22 2c0a  ",.    "shell",.
+00011720: 2020 2020 2273 6869 6122 2c0a 2020 2020      "shia",.    
+00011730: 2273 6869 6b73 6861 222c 0a20 2020 2022  "shiksha",.    "
+00011740: 7368 6f65 7322 2c0a 2020 2020 2273 686f  shoes",.    "sho
+00011750: 7022 2c0a 2020 2020 2273 686f 7070 696e  p",.    "shoppin
+00011760: 6722 2c0a 2020 2020 2273 686f 756a 6922  g",.    "shouji"
+00011770: 2c0a 2020 2020 2273 686f 7722 2c0a 2020  ,.    "show",.  
+00011780: 2020 2273 686f 7774 696d 6522 2c0a 2020    "showtime",.  
+00011790: 2020 2273 6872 6972 616d 222c 0a20 2020    "shriram",.   
+000117a0: 2022 7369 222c 0a20 2020 2022 7369 6c6b   "si",.    "silk
+000117b0: 222c 0a20 2020 2022 7369 6e61 222c 0a20  ",.    "sina",. 
+000117c0: 2020 2022 7369 6e67 6c65 7322 2c0a 2020     "singles",.  
+000117d0: 2020 2273 6974 6522 2c0a 2020 2020 2273    "site",.    "s
+000117e0: 6a22 2c0a 2020 2020 2273 6b22 2c0a 2020  j",.    "sk",.  
+000117f0: 2020 2273 6b69 222c 0a20 2020 2022 736b    "ski",.    "sk
+00011800: 696e 222c 0a20 2020 2022 736b 7922 2c0a  in",.    "sky",.
+00011810: 2020 2020 2273 6b79 7065 222c 0a20 2020      "skype",.   
+00011820: 2022 736c 222c 0a20 2020 2022 736c 696e   "sl",.    "slin
+00011830: 6722 2c0a 2020 2020 2273 6d22 2c0a 2020  g",.    "sm",.  
+00011840: 2020 2273 6d61 7274 222c 0a20 2020 2022    "smart",.    "
+00011850: 736d 696c 6522 2c0a 2020 2020 2273 6e22  smile",.    "sn"
+00011860: 2c0a 2020 2020 2273 6e63 6622 2c0a 2020  ,.    "sncf",.  
+00011870: 2020 2273 6f22 2c0a 2020 2020 2273 6f63    "so",.    "soc
+00011880: 6365 7222 2c0a 2020 2020 2273 6f63 6961  cer",.    "socia
+00011890: 6c22 2c0a 2020 2020 2273 6f66 7462 616e  l",.    "softban
+000118a0: 6b22 2c0a 2020 2020 2273 6f66 7477 6172  k",.    "softwar
+000118b0: 6522 2c0a 2020 2020 2273 6f68 7522 2c0a  e",.    "sohu",.
+000118c0: 2020 2020 2273 6f6c 6172 222c 0a20 2020      "solar",.   
+000118d0: 2022 736f 6c75 7469 6f6e 7322 2c0a 2020   "solutions",.  
+000118e0: 2020 2273 6f6e 6722 2c0a 2020 2020 2273    "song",.    "s
+000118f0: 6f6e 7922 2c0a 2020 2020 2273 6f79 222c  ony",.    "soy",
+00011900: 0a20 2020 2022 7370 6163 6522 2c0a 2020  .    "space",.  
+00011910: 2020 2273 7069 6567 656c 222c 0a20 2020    "spiegel",.   
+00011920: 2022 7370 6f74 222c 0a20 2020 2022 7370   "spot",.    "sp
+00011930: 7265 6164 6265 7474 696e 6722 2c0a 2020  readbetting",.  
+00011940: 2020 2273 7222 2c0a 2020 2020 2273 726c    "sr",.    "srl
+00011950: 222c 0a20 2020 2022 7372 7422 2c0a 2020  ",.    "srt",.  
+00011960: 2020 2273 7422 2c0a 2020 2020 2273 7461    "st",.    "sta
+00011970: 6461 222c 0a20 2020 2022 7374 6170 6c65  da",.    "staple
+00011980: 7322 2c0a 2020 2020 2273 7461 7222 2c0a  s",.    "star",.
+00011990: 2020 2020 2273 7461 7268 7562 222c 0a20      "starhub",. 
+000119a0: 2020 2022 7374 6174 6562 616e 6b22 2c0a     "statebank",.
+000119b0: 2020 2020 2273 7461 7465 6661 726d 222c      "statefarm",
+000119c0: 0a20 2020 2022 7374 6174 6f69 6c22 2c0a  .    "statoil",.
+000119d0: 2020 2020 2273 7463 222c 0a20 2020 2022      "stc",.    "
+000119e0: 7374 6367 726f 7570 222c 0a20 2020 2022  stcgroup",.    "
+000119f0: 7374 6f63 6b68 6f6c 6d22 2c0a 2020 2020  stockholm",.    
+00011a00: 2273 746f 7261 6765 222c 0a20 2020 2022  "storage",.    "
+00011a10: 7374 6f72 6522 2c0a 2020 2020 2273 7472  store",.    "str
+00011a20: 6561 6d22 2c0a 2020 2020 2273 7475 6469  eam",.    "studi
+00011a30: 6f22 2c0a 2020 2020 2273 7475 6479 222c  o",.    "study",
+00011a40: 0a20 2020 2022 7374 796c 6522 2c0a 2020  .    "style",.  
+00011a50: 2020 2273 7522 2c0a 2020 2020 2273 7563    "su",.    "suc
+00011a60: 6b73 222c 0a20 2020 2022 7375 7070 6c69  ks",.    "suppli
+00011a70: 6573 222c 0a20 2020 2022 7375 7070 6c79  es",.    "supply
+00011a80: 222c 0a20 2020 2022 7375 7070 6f72 7422  ",.    "support"
+00011a90: 2c0a 2020 2020 2273 7572 6622 2c0a 2020  ,.    "surf",.  
+00011aa0: 2020 2273 7572 6765 7279 222c 0a20 2020    "surgery",.   
+00011ab0: 2022 7375 7a75 6b69 222c 0a20 2020 2022   "suzuki",.    "
+00011ac0: 7376 222c 0a20 2020 2022 7377 6174 6368  sv",.    "swatch
+00011ad0: 222c 0a20 2020 2022 7377 6966 7463 6f76  ",.    "swiftcov
+00011ae0: 6572 222c 0a20 2020 2022 7377 6973 7322  er",.    "swiss"
+00011af0: 2c0a 2020 2020 2273 7822 2c0a 2020 2020  ,.    "sx",.    
+00011b00: 2273 7922 2c0a 2020 2020 2273 7964 6e65  "sy",.    "sydne
+00011b10: 7922 2c0a 2020 2020 2273 796d 616e 7465  y",.    "symante
+00011b20: 6322 2c0a 2020 2020 2273 7973 7465 6d73  c",.    "systems
+00011b30: 222c 0a20 2020 2022 737a 222c 0a20 2020  ",.    "sz",.   
+00011b40: 2023 2074 0a20 2020 2022 7461 6222 2c0a   # t.    "tab",.
+00011b50: 2020 2020 2274 6169 7065 6922 2c0a 2020      "taipei",.  
+00011b60: 2020 2274 616c 6b22 2c0a 2020 2020 2274    "talk",.    "t
+00011b70: 616f 6261 6f22 2c0a 2020 2020 2274 6172  aobao",.    "tar
+00011b80: 6765 7422 2c0a 2020 2020 2274 6174 616d  get",.    "tatam
+00011b90: 6f74 6f72 7322 2c0a 2020 2020 2274 6174  otors",.    "tat
+00011ba0: 6172 222c 0a20 2020 2022 7461 7474 6f6f  ar",.    "tattoo
+00011bb0: 222c 0a20 2020 2022 7461 7822 2c0a 2020  ",.    "tax",.  
+00011bc0: 2020 2274 6178 6922 2c0a 2020 2020 2274    "taxi",.    "t
+00011bd0: 6322 2c0a 2020 2020 2274 6369 222c 0a20  c",.    "tci",. 
+00011be0: 2020 2022 7464 222c 0a20 2020 2022 7464     "td",.    "td
+00011bf0: 6b22 2c0a 2020 2020 2274 6561 6d22 2c0a  k",.    "team",.
+00011c00: 2020 2020 2274 6563 6822 2c0a 2020 2020      "tech",.    
+00011c10: 2274 6563 686e 6f6c 6f67 7922 2c0a 2020  "technology",.  
+00011c20: 2020 2274 656c 222c 0a20 2020 2022 7465    "tel",.    "te
+00011c30: 6c65 6369 7479 222c 0a20 2020 2022 7465  lecity",.    "te
+00011c40: 6c65 666f 6e69 6361 222c 0a20 2020 2022  lefonica",.    "
+00011c50: 7465 6d61 7365 6b22 2c0a 2020 2020 2274  temasek",.    "t
+00011c60: 656e 6e69 7322 2c0a 2020 2020 2274 6576  ennis",.    "tev
+00011c70: 6122 2c0a 2020 2020 2274 6622 2c0a 2020  a",.    "tf",.  
+00011c80: 2020 2274 6722 2c0a 2020 2020 2274 6822    "tg",.    "th"
+00011c90: 2c0a 2020 2020 2274 6864 222c 0a20 2020  ,.    "thd",.   
+00011ca0: 2022 7468 6561 7465 7222 2c0a 2020 2020   "theater",.    
+00011cb0: 2274 6865 6174 7265 222c 0a20 2020 2022  "theatre",.    "
+00011cc0: 7469 6161 222c 0a20 2020 2022 7469 636b  tiaa",.    "tick
+00011cd0: 6574 7322 2c0a 2020 2020 2274 6965 6e64  ets",.    "tiend
+00011ce0: 6122 2c0a 2020 2020 2274 6966 6661 6e79  a",.    "tiffany
+00011cf0: 222c 0a20 2020 2022 7469 7073 222c 0a20  ",.    "tips",. 
+00011d00: 2020 2022 7469 7265 7322 2c0a 2020 2020     "tires",.    
+00011d10: 2274 6972 6f6c 222c 0a20 2020 2022 746a  "tirol",.    "tj
+00011d20: 222c 0a20 2020 2022 746a 6d61 7878 222c  ",.    "tjmaxx",
+00011d30: 0a20 2020 2022 746a 7822 2c0a 2020 2020  .    "tjx",.    
+00011d40: 2274 6b22 2c0a 2020 2020 2274 6b6d 6178  "tk",.    "tkmax
+00011d50: 7822 2c0a 2020 2020 2274 6c22 2c0a 2020  x",.    "tl",.  
+00011d60: 2020 2274 6d22 2c0a 2020 2020 2274 6d61    "tm",.    "tma
+00011d70: 6c6c 222c 0a20 2020 2022 746e 222c 0a20  ll",.    "tn",. 
+00011d80: 2020 2022 746f 222c 0a20 2020 2022 746f     "to",.    "to
+00011d90: 6461 7922 2c0a 2020 2020 2274 6f6b 796f  day",.    "tokyo
+00011da0: 222c 0a20 2020 2022 746f 6f6c 7322 2c0a  ",.    "tools",.
+00011db0: 2020 2020 2274 6f70 222c 0a20 2020 2022      "top",.    "
+00011dc0: 746f 7261 7922 2c0a 2020 2020 2274 6f73  toray",.    "tos
+00011dd0: 6869 6261 222c 0a20 2020 2022 746f 7461  hiba",.    "tota
+00011de0: 6c22 2c0a 2020 2020 2274 6f75 7273 222c  l",.    "tours",
+00011df0: 0a20 2020 2022 746f 776e 222c 0a20 2020  .    "town",.   
+00011e00: 2022 746f 796f 7461 222c 0a20 2020 2022   "toyota",.    "
+00011e10: 746f 7973 222c 0a20 2020 2022 7472 222c  toys",.    "tr",
+00011e20: 0a20 2020 2022 7472 6164 6522 2c0a 2020  .    "trade",.  
+00011e30: 2020 2274 7261 6469 6e67 222c 0a20 2020    "trading",.   
+00011e40: 2022 7472 6169 6e69 6e67 222c 0a20 2020   "training",.   
+00011e50: 2022 7472 6176 656c 222c 0a20 2020 2022   "travel",.    "
+00011e60: 7472 6176 656c 6368 616e 6e65 6c22 2c0a  travelchannel",.
+00011e70: 2020 2020 2274 7261 7665 6c65 7273 222c      "travelers",
+00011e80: 0a20 2020 2022 7472 6176 656c 6572 7369  .    "travelersi
+00011e90: 6e73 7572 616e 6365 222c 0a20 2020 2022  nsurance",.    "
+00011ea0: 7472 7573 7422 2c0a 2020 2020 2274 7276  trust",.    "trv
+00011eb0: 222c 0a20 2020 2022 7474 222c 0a20 2020  ",.    "tt",.   
+00011ec0: 2022 7475 6265 222c 0a20 2020 2022 7475   "tube",.    "tu
+00011ed0: 6922 2c0a 2020 2020 2274 756e 6573 222c  i",.    "tunes",
+00011ee0: 0a20 2020 2022 7475 7368 7522 2c0a 2020  .    "tushu",.  
+00011ef0: 2020 2274 7622 2c0a 2020 2020 2274 7673    "tv",.    "tvs
+00011f00: 222c 0a20 2020 2022 7477 222c 0a20 2020  ",.    "tw",.   
+00011f10: 2022 747a 222c 0a20 2020 2023 2075 0a20   "tz",.    # u. 
+00011f20: 2020 2022 7561 222c 0a20 2020 2022 7562     "ua",.    "ub
+00011f30: 616e 6b22 2c0a 2020 2020 2275 6273 222c  ank",.    "ubs",
+00011f40: 0a20 2020 2022 7563 6f6e 6e65 6374 222c  .    "uconnect",
+00011f50: 0a20 2020 2022 7567 222c 0a20 2020 2022  .    "ug",.    "
+00011f60: 756b 222c 0a20 2020 2022 756e 6963 6f6d  uk",.    "unicom
+00011f70: 222c 0a20 2020 2022 756e 6976 6572 7369  ",.    "universi
+00011f80: 7479 222c 0a20 2020 2022 756e 6f22 2c0a  ty",.    "uno",.
+00011f90: 2020 2020 2275 6f6c 222c 0a20 2020 2022      "uol",.    "
+00011fa0: 7570 7322 2c0a 2020 2020 2275 7322 2c0a  ups",.    "us",.
+00011fb0: 2020 2020 2275 7922 2c0a 2020 2020 2275      "uy",.    "u
+00011fc0: 7a22 2c0a 2020 2020 2320 760a 2020 2020  z",.    # v.    
+00011fd0: 2276 6122 2c0a 2020 2020 2276 6163 6174  "va",.    "vacat
+00011fe0: 696f 6e73 222c 0a20 2020 2022 7661 6e61  ions",.    "vana
+00011ff0: 222c 0a20 2020 2022 7661 6e67 7561 7264  ",.    "vanguard
+00012000: 222c 0a20 2020 2022 7663 222c 0a20 2020  ",.    "vc",.   
+00012010: 2022 7665 222c 0a20 2020 2022 7665 6761   "ve",.    "vega
+00012020: 7322 2c0a 2020 2020 2276 656e 7475 7265  s",.    "venture
+00012030: 7322 2c0a 2020 2020 2276 6572 6973 6967  s",.    "verisig
+00012040: 6e22 2c0a 2020 2020 2276 6572 7369 6368  n",.    "versich
+00012050: 6572 756e 6722 2c0a 2020 2020 2276 6574  erung",.    "vet
+00012060: 222c 0a20 2020 2022 7667 222c 0a20 2020  ",.    "vg",.   
+00012070: 2022 7669 222c 0a20 2020 2022 7669 616a   "vi",.    "viaj
+00012080: 6573 222c 0a20 2020 2022 7669 6465 6f22  es",.    "video"
+00012090: 2c0a 2020 2020 2276 6967 222c 0a20 2020  ,.    "vig",.   
+000120a0: 2022 7669 6b69 6e67 222c 0a20 2020 2022   "viking",.    "
+000120b0: 7669 6c6c 6173 222c 0a20 2020 2022 7669  villas",.    "vi
+000120c0: 6e22 2c0a 2020 2020 2276 6970 222c 0a20  n",.    "vip",. 
+000120d0: 2020 2022 7669 7267 696e 222c 0a20 2020     "virgin",.   
+000120e0: 2022 7669 7361 222c 0a20 2020 2022 7669   "visa",.    "vi
+000120f0: 7369 6f6e 222c 0a20 2020 2022 7669 7374  sion",.    "vist
+00012100: 6122 2c0a 2020 2020 2276 6973 7461 7072  a",.    "vistapr
+00012110: 696e 7422 2c0a 2020 2020 2276 6976 6122  int",.    "viva"
+00012120: 2c0a 2020 2020 2276 6976 6f22 2c0a 2020  ,.    "vivo",.  
+00012130: 2020 2276 6c61 616e 6465 7265 6e22 2c0a    "vlaanderen",.
+00012140: 2020 2020 2276 6e22 2c0a 2020 2020 2276      "vn",.    "v
+00012150: 6f64 6b61 222c 0a20 2020 2022 766f 6c6b  odka",.    "volk
+00012160: 7377 6167 656e 222c 0a20 2020 2022 766f  swagen",.    "vo
+00012170: 6c76 6f22 2c0a 2020 2020 2276 6f74 6522  lvo",.    "vote"
+00012180: 2c0a 2020 2020 2276 6f74 696e 6722 2c0a  ,.    "voting",.
+00012190: 2020 2020 2276 6f74 6f22 2c0a 2020 2020      "voto",.    
+000121a0: 2276 6f79 6167 6522 2c0a 2020 2020 2276  "voyage",.    "v
+000121b0: 7522 2c0a 2020 2020 2276 7565 6c6f 7322  u",.    "vuelos"
+000121c0: 2c0a 2020 2020 2320 770a 2020 2020 2277  ,.    # w.    "w
+000121d0: 616c 6573 222c 0a20 2020 2022 7761 6c6d  ales",.    "walm
+000121e0: 6172 7422 2c0a 2020 2020 2277 616c 7465  art",.    "walte
+000121f0: 7222 2c0a 2020 2020 2277 616e 6722 2c0a  r",.    "wang",.
+00012200: 2020 2020 2277 616e 6767 6f75 222c 0a20      "wanggou",. 
+00012210: 2020 2022 7761 726d 616e 222c 0a20 2020     "warman",.   
+00012220: 2022 7761 7463 6822 2c0a 2020 2020 2277   "watch",.    "w
+00012230: 6174 6368 6573 222c 0a20 2020 2022 7765  atches",.    "we
+00012240: 6174 6865 7222 2c0a 2020 2020 2277 6561  ather",.    "wea
+00012250: 7468 6572 6368 616e 6e65 6c22 2c0a 2020  therchannel",.  
+00012260: 2020 2277 6562 6361 6d22 2c0a 2020 2020    "webcam",.    
+00012270: 2277 6562 6572 222c 0a20 2020 2022 7765  "weber",.    "we
+00012280: 6273 6974 6522 2c0a 2020 2020 2277 6564  bsite",.    "wed
+00012290: 222c 0a20 2020 2022 7765 6464 696e 6722  ",.    "wedding"
+000122a0: 2c0a 2020 2020 2277 6569 626f 222c 0a20  ,.    "weibo",. 
+000122b0: 2020 2022 7765 6972 222c 0a20 2020 2022     "weir",.    "
+000122c0: 7766 222c 0a20 2020 2022 7768 6f73 7768  wf",.    "whoswh
+000122d0: 6f22 2c0a 2020 2020 2277 6965 6e22 2c0a  o",.    "wien",.
+000122e0: 2020 2020 2277 696b 6922 2c0a 2020 2020      "wiki",.    
+000122f0: 2277 696c 6c69 616d 6869 6c6c 222c 0a20  "williamhill",. 
+00012300: 2020 2022 7769 6e22 2c0a 2020 2020 2277     "win",.    "w
+00012310: 696e 646f 7773 222c 0a20 2020 2022 7769  indows",.    "wi
+00012320: 6e65 222c 0a20 2020 2022 7769 6e6e 6572  ne",.    "winner
+00012330: 7322 2c0a 2020 2020 2277 6d65 222c 0a20  s",.    "wme",. 
+00012340: 2020 2022 776f 6c74 6572 736b 6c75 7765     "wolterskluwe
+00012350: 7222 2c0a 2020 2020 2277 6f6f 6473 6964  r",.    "woodsid
+00012360: 6522 2c0a 2020 2020 2277 6f72 6b22 2c0a  e",.    "work",.
+00012370: 2020 2020 2277 6f72 6b73 222c 0a20 2020      "works",.   
+00012380: 2022 776f 726c 6422 2c0a 2020 2020 2277   "world",.    "w
+00012390: 6f77 222c 0a20 2020 2022 7773 222c 0a20  ow",.    "ws",. 
+000123a0: 2020 2022 7774 6322 2c0a 2020 2020 2277     "wtc",.    "w
+000123b0: 7466 222c 0a20 2020 2023 2078 0a20 2020  tf",.    # x.   
+000123c0: 2022 7862 6f78 222c 0a20 2020 2022 7865   "xbox",.    "xe
+000123d0: 726f 7822 2c0a 2020 2020 2278 6669 6e69  rox",.    "xfini
+000123e0: 7479 222c 0a20 2020 2022 7869 6875 616e  ty",.    "xihuan
+000123f0: 222c 0a20 2020 2022 7869 6e22 2c0a 2020  ",.    "xin",.  
+00012400: 2020 2278 6e2d 2d31 3162 3463 3364 222c    "xn--11b4c3d",
+00012410: 0a20 2020 2022 786e 2d2d 3163 6b32 6531  .    "xn--1ck2e1
+00012420: 6222 2c0a 2020 2020 2278 6e2d 2d31 7171  b",.    "xn--1qq
+00012430: 7732 3361 222c 0a20 2020 2022 786e 2d2d  w23a",.    "xn--
+00012440: 3273 6372 6a39 6322 2c0a 2020 2020 2278  2scrj9c",.    "x
+00012450: 6e2d 2d33 3072 7237 7922 2c0a 2020 2020  n--30rr7y",.    
+00012460: 2278 6e2d 2d33 6273 7430 306d 222c 0a20  "xn--3bst00m",. 
+00012470: 2020 2022 786e 2d2d 3364 7334 3433 6722     "xn--3ds443g"
+00012480: 2c0a 2020 2020 2278 6e2d 2d33 6530 6237  ,.    "xn--3e0b7
+00012490: 3037 6522 2c0a 2020 2020 2278 6e2d 2d33  07e",.    "xn--3
+000124a0: 6863 726a 3963 222c 0a20 2020 2022 786e  hcrj9c",.    "xn
+000124b0: 2d2d 336f 7131 3876 6c38 706e 3336 6122  --3oq18vl8pn36a"
+000124c0: 2c0a 2020 2020 2278 6e2d 2d33 7078 7538  ,.    "xn--3pxu8
+000124d0: 6b22 2c0a 2020 2020 2278 6e2d 2d34 3263  k",.    "xn--42c
+000124e0: 3264 3961 222c 0a20 2020 2022 786e 2d2d  2d9a",.    "xn--
+000124f0: 3435 6272 3563 796c 222c 0a20 2020 2022  45br5cyl",.    "
+00012500: 786e 2d2d 3435 6272 6a39 6322 2c0a 2020  xn--45brj9c",.  
+00012510: 2020 2278 6e2d 2d34 3571 3131 6322 2c0a    "xn--45q11c",.
+00012520: 2020 2020 2278 6e2d 2d34 6762 7269 6d22      "xn--4gbrim"
+00012530: 2c0a 2020 2020 2278 6e2d 2d35 3462 3766  ,.    "xn--54b7f
+00012540: 7461 3063 6322 2c0a 2020 2020 2278 6e2d  ta0cc",.    "xn-
+00012550: 2d35 3571 7734 3267 222c 0a20 2020 2022  -55qw42g",.    "
+00012560: 786e 2d2d 3535 7178 3564 222c 0a20 2020  xn--55qx5d",.   
+00012570: 2022 786e 2d2d 3573 7533 346a 3933 3662   "xn--5su34j936b
+00012580: 6773 6722 2c0a 2020 2020 2278 6e2d 2d35  gsg",.    "xn--5
+00012590: 747a 6d35 6722 2c0a 2020 2020 2278 6e2d  tzm5g",.    "xn-
+000125a0: 2d36 6672 7a38 3267 222c 0a20 2020 2022  -6frz82g",.    "
+000125b0: 786e 2d2d 3671 7139 3836 6233 786c 222c  xn--6qq986b3xl",
+000125c0: 0a20 2020 2022 786e 2d2d 3830 6164 7868  .    "xn--80adxh
+000125d0: 6b73 222c 0a20 2020 2022 786e 2d2d 3830  ks",.    "xn--80
+000125e0: 616f 3231 6122 2c0a 2020 2020 2278 6e2d  ao21a",.    "xn-
+000125f0: 2d38 3061 7165 6364 7231 6122 2c0a 2020  -80aqecdr1a",.  
+00012600: 2020 2278 6e2d 2d38 3061 7365 6864 6222    "xn--80asehdb"
+00012610: 2c0a 2020 2020 2278 6e2d 2d38 3061 7377  ,.    "xn--80asw
+00012620: 6722 2c0a 2020 2020 2278 6e2d 2d38 7930  g",.    "xn--8y0
+00012630: 6130 3633 6122 2c0a 2020 2020 2278 6e2d  a063a",.    "xn-
+00012640: 2d39 3061 3361 6322 2c0a 2020 2020 2278  -90a3ac",.    "x
+00012650: 6e2d 2d39 3061 6522 2c0a 2020 2020 2278  n--90ae",.    "x
+00012660: 6e2d 2d39 3061 6973 222c 0a20 2020 2022  n--90ais",.    "
+00012670: 786e 2d2d 3964 6271 3261 222c 0a20 2020  xn--9dbq2a",.   
+00012680: 2022 786e 2d2d 3965 7435 3275 222c 0a20   "xn--9et52u",. 
+00012690: 2020 2022 786e 2d2d 396b 7274 3030 6122     "xn--9krt00a"
+000126a0: 2c0a 2020 2020 2278 6e2d 2d62 3477 3630  ,.    "xn--b4w60
+000126b0: 3566 6572 6422 2c0a 2020 2020 2278 6e2d  5ferd",.    "xn-
+000126c0: 2d62 636b 3162 3961 3564 7265 3463 222c  -bck1b9a5dre4c",
+000126d0: 0a20 2020 2022 786e 2d2d 6331 6176 6722  .    "xn--c1avg"
+000126e0: 2c0a 2020 2020 2278 6e2d 2d63 3262 7237  ,.    "xn--c2br7
+000126f0: 6722 2c0a 2020 2020 2278 6e2d 2d63 636b  g",.    "xn--cck
+00012700: 3262 3362 222c 0a20 2020 2022 786e 2d2d  2b3b",.    "xn--
+00012710: 6367 3462 6b69 222c 0a20 2020 2022 786e  cg4bki",.    "xn
+00012720: 2d2d 636c 6368 6330 6561 3062 3267 3261  --clchc0ea0b2g2a
+00012730: 3967 6364 222c 0a20 2020 2022 786e 2d2d  9gcd",.    "xn--
+00012740: 637a 7236 3934 6222 2c0a 2020 2020 2278  czr694b",.    "x
+00012750: 6e2d 2d63 7a72 7330 7422 2c0a 2020 2020  n--czrs0t",.    
+00012760: 2278 6e2d 2d63 7a72 7532 6422 2c0a 2020  "xn--czru2d",.  
+00012770: 2020 2278 6e2d 2d64 3161 636a 3362 222c    "xn--d1acj3b",
+00012780: 0a20 2020 2022 786e 2d2d 6431 616c 6622  .    "xn--d1alf"
+00012790: 2c0a 2020 2020 2278 6e2d 2d65 3161 3463  ,.    "xn--e1a4c
+000127a0: 222c 0a20 2020 2022 786e 2d2d 6563 6b76  ",.    "xn--eckv
+000127b0: 6474 6339 6422 2c0a 2020 2020 2278 6e2d  dtc9d",.    "xn-
+000127c0: 2d65 6676 7938 3868 222c 0a20 2020 2022  -efvy88h",.    "
+000127d0: 786e 2d2d 6573 7476 3735 6722 2c0a 2020  xn--estv75g",.  
+000127e0: 2020 2278 6e2d 2d66 6374 3432 396b 222c    "xn--fct429k",
+000127f0: 0a20 2020 2022 786e 2d2d 6668 6265 6922  .    "xn--fhbei"
+00012800: 2c0a 2020 2020 2278 6e2d 2d66 6971 3232  ,.    "xn--fiq22
+00012810: 3863 3568 7322 2c0a 2020 2020 2278 6e2d  8c5hs",.    "xn-
+00012820: 2d66 6971 3634 6222 2c0a 2020 2020 2278  -fiq64b",.    "x
+00012830: 6e2d 2d66 6971 7338 7322 2c0a 2020 2020  n--fiqs8s",.    
+00012840: 2278 6e2d 2d66 6971 7a39 7322 2c0a 2020  "xn--fiqz9s",.  
+00012850: 2020 2278 6e2d 2d66 6a71 3732 3061 222c    "xn--fjq720a",
+00012860: 0a20 2020 2022 786e 2d2d 666c 7733 3531  .    "xn--flw351
+00012870: 6522 2c0a 2020 2020 2278 6e2d 2d66 7063  e",.    "xn--fpc
+00012880: 726a 3963 3364 222c 0a20 2020 2022 786e  rj9c3d",.    "xn
+00012890: 2d2d 667a 6332 6339 6532 6322 2c0a 2020  --fzc2c9e2c",.  
+000128a0: 2020 2278 6e2d 2d66 7a79 7338 6436 3975    "xn--fzys8d69u
+000128b0: 7667 6d22 2c0a 2020 2020 2278 6e2d 2d67  vgm",.    "xn--g
+000128c0: 3278 7834 3863 222c 0a20 2020 2022 786e  2xx48c",.    "xn
+000128d0: 2d2d 6763 6b72 3366 3066 222c 0a20 2020  --gckr3f0f",.   
+000128e0: 2022 786e 2d2d 6765 6372 6a39 6322 2c0a   "xn--gecrj9c",.
+000128f0: 2020 2020 2278 6e2d 2d67 6b33 6174 3165      "xn--gk3at1e
+00012900: 222c 0a20 2020 2022 786e 2d2d 6832 6272  ",.    "xn--h2br
+00012910: 6567 3365 7665 222c 0a20 2020 2022 786e  eg3eve",.    "xn
+00012920: 2d2d 6832 6272 6a39 6322 2c0a 2020 2020  --h2brj9c",.    
+00012930: 2278 6e2d 2d68 3262 726a 3963 3863 222c  "xn--h2brj9c8c",
+00012940: 0a20 2020 2022 786e 2d2d 6878 7438 3134  .    "xn--hxt814
+00012950: 6522 2c0a 2020 2020 2278 6e2d 2d69 3162  e",.    "xn--i1b
+00012960: 3662 3161 3661 3265 222c 0a20 2020 2022  6b1a6a2e",.    "
+00012970: 786e 2d2d 696d 7235 3133 6e22 2c0a 2020  xn--imr513n",.  
+00012980: 2020 2278 6e2d 2d69 6f30 6137 6922 2c0a    "xn--io0a7i",.
+00012990: 2020 2020 2278 6e2d 2d6a 3161 6566 222c      "xn--j1aef",
+000129a0: 0a20 2020 2022 786e 2d2d 6a31 616d 6822  .    "xn--j1amh"
+000129b0: 2c0a 2020 2020 2278 6e2d 2d6a 3677 3139  ,.    "xn--j6w19
+000129c0: 3367 222c 0a20 2020 2022 786e 2d2d 6a6c  3g",.    "xn--jl
+000129d0: 7136 3175 3977 3762 222c 0a20 2020 2022  q61u9w7b",.    "
+000129e0: 786e 2d2d 6a76 7231 3839 6d22 2c0a 2020  xn--jvr189m",.  
+000129f0: 2020 2278 6e2d 2d6b 6372 7837 3764 3178    "xn--kcrx77d1x
+00012a00: 3461 222c 0a20 2020 2022 786e 2d2d 6b70  4a",.    "xn--kp
+00012a10: 7277 3133 6422 2c0a 2020 2020 2278 6e2d  rw13d",.    "xn-
+00012a20: 2d6b 7072 7935 3764 222c 0a20 2020 2022  -kpry57d",.    "
+00012a30: 786e 2d2d 6b70 7537 3136 6622 2c0a 2020  xn--kpu716f",.  
+00012a40: 2020 2278 6e2d 2d6b 7075 7433 6922 2c0a    "xn--kput3i",.
+00012a50: 2020 2020 2278 6e2d 2d6c 3161 6363 222c      "xn--l1acc",
+00012a60: 0a20 2020 2022 786e 2d2d 6c67 6262 6174  .    "xn--lgbbat
+00012a70: 3161 6438 6a22 2c0a 2020 2020 2278 6e2d  1ad8j",.    "xn-
+00012a80: 2d6d 6762 3961 7762 6622 2c0a 2020 2020  -mgb9awbf",.    
+00012a90: 2278 6e2d 2d6d 6762 6133 6133 656a 7422  "xn--mgba3a3ejt"
+00012aa0: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6133  ,.    "xn--mgba3
+00012ab0: 6134 6631 3661 222c 0a20 2020 2022 786e  a4f16a",.    "xn
+00012ac0: 2d2d 6d67 6261 3763 3062 626e 3061 222c  --mgba7c0bbn0a",
+00012ad0: 0a20 2020 2022 786e 2d2d 6d67 6261 616b  .    "xn--mgbaak
+00012ae0: 6337 6476 6622 2c0a 2020 2020 2278 6e2d  c7dvf",.    "xn-
+00012af0: 2d6d 6762 6161 6d37 6138 6822 2c0a 2020  -mgbaam7a8h",.  
+00012b00: 2020 2278 6e2d 2d6d 6762 6162 3262 6422    "xn--mgbab2bd"
+00012b10: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6169  ,.    "xn--mgbai
+00012b20: 3961 7a67 7170 366a 222c 0a20 2020 2022  9azgqp6j",.    "
+00012b30: 786e 2d2d 6d67 6261 7968 3767 7061 222c  xn--mgbayh7gpa",
+00012b40: 0a20 2020 2022 786e 2d2d 6d67 6262 3966  .    "xn--mgbb9f
+00012b50: 6270 6f62 222c 0a20 2020 2022 786e 2d2d  bpob",.    "xn--
+00012b60: 6d67 6262 6831 6122 2c0a 2020 2020 2278  mgbbh1a",.    "x
+00012b70: 6e2d 2d6d 6762 6268 3161 3731 6522 2c0a  n--mgbbh1a71e",.
+00012b80: 2020 2020 2278 6e2d 2d6d 6762 6330 6139      "xn--mgbc0a9
+00012b90: 617a 6367 222c 0a20 2020 2022 786e 2d2d  azcg",.    "xn--
+00012ba0: 6d67 6263 6137 647a 646f 222c 0a20 2020  mgbca7dzdo",.   
+00012bb0: 2022 786e 2d2d 6d67 6265 7270 3461 3564   "xn--mgberp4a5d
+00012bc0: 3461 7222 2c0a 2020 2020 2278 6e2d 2d6d  4ar",.    "xn--m
+00012bd0: 6762 6775 3832 6122 2c0a 2020 2020 2278  gbgu82a",.    "x
+00012be0: 6e2d 2d6d 6762 6934 6563 6578 7022 2c0a  n--mgbi4ecexp",.
+00012bf0: 2020 2020 2278 6e2d 2d6d 6762 706c 3266      "xn--mgbpl2f
+00012c00: 6822 2c0a 2020 2020 2278 6e2d 2d6d 6762  h",.    "xn--mgb
+00012c10: 7433 6468 6422 2c0a 2020 2020 2278 6e2d  t3dhd",.    "xn-
+00012c20: 2d6d 6762 7478 3262 222c 0a20 2020 2022  -mgbtx2b",.    "
+00012c30: 786e 2d2d 6d67 6278 3463 6430 6162 222c  xn--mgbx4cd0ab",
+00012c40: 0a20 2020 2022 786e 2d2d 6d69 7838 3931  .    "xn--mix891
+00012c50: 6622 2c0a 2020 2020 2278 6e2d 2d6d 6b31  f",.    "xn--mk1
+00012c60: 6275 3434 6322 2c0a 2020 2020 2278 6e2d  bu44c",.    "xn-
+00012c70: 2d6d 7874 7131 6d22 2c0a 2020 2020 2278  -mxtq1m",.    "x
+00012c80: 6e2d 2d6e 6762 6335 617a 6422 2c0a 2020  n--ngbc5azd",.  
+00012c90: 2020 2278 6e2d 2d6e 6762 6539 6530 6122    "xn--ngbe9e0a"
+00012ca0: 2c0a 2020 2020 2278 6e2d 2d6e 6762 7278  ,.    "xn--ngbrx
+00012cb0: 222c 0a20 2020 2022 786e 2d2d 6e6f 6465  ",.    "xn--node
+00012cc0: 222c 0a20 2020 2022 786e 2d2d 6e71 7637  ",.    "xn--nqv7
+00012cd0: 6622 2c0a 2020 2020 2278 6e2d 2d6e 7176  f",.    "xn--nqv
+00012ce0: 3766 7330 3065 6d61 222c 0a20 2020 2022  7fs00ema",.    "
+00012cf0: 786e 2d2d 6e79 7179 3236 6122 2c0a 2020  xn--nyqy26a",.  
+00012d00: 2020 2278 6e2d 2d6f 3363 7734 6822 2c0a    "xn--o3cw4h",.
+00012d10: 2020 2020 2278 6e2d 2d6f 6762 7066 3866      "xn--ogbpf8f
+00012d20: 6c22 2c0a 2020 2020 2278 6e2d 2d70 3161  l",.    "xn--p1a
+00012d30: 6366 222c 0a20 2020 2022 786e 2d2d 7031  cf",.    "xn--p1
+00012d40: 6169 222c 0a20 2020 2022 786e 2d2d 7062  ai",.    "xn--pb
+00012d50: 7439 3737 6322 2c0a 2020 2020 2278 6e2d  t977c",.    "xn-
+00012d60: 2d70 6762 7330 6468 222c 0a20 2020 2022  -pgbs0dh",.    "
+00012d70: 786e 2d2d 7073 7379 3275 222c 0a20 2020  xn--pssy2u",.   
+00012d80: 2022 786e 2d2d 7139 6a79 6234 6322 2c0a   "xn--q9jyb4c",.
+00012d90: 2020 2020 2278 6e2d 2d71 636b 6131 706d      "xn--qcka1pm
+00012da0: 6322 2c0a 2020 2020 2278 6e2d 2d71 7861  c",.    "xn--qxa
+00012db0: 6d22 2c0a 2020 2020 2278 6e2d 2d72 6871  m",.    "xn--rhq
+00012dc0: 7639 3667 222c 0a20 2020 2022 786e 2d2d  v96g",.    "xn--
+00012dd0: 726f 7675 3838 6222 2c0a 2020 2020 2278  rovu88b",.    "x
+00012de0: 6e2d 2d72 7663 3165 3061 6d33 6522 2c0a  n--rvc1e0am3e",.
+00012df0: 2020 2020 2278 6e2d 2d73 3962 726a 3963      "xn--s9brj9c
+00012e00: 222c 0a20 2020 2022 786e 2d2d 7365 7335  ",.    "xn--ses5
+00012e10: 3534 6722 2c0a 2020 2020 2278 6e2d 2d74  54g",.    "xn--t
+00012e20: 3630 6235 3661 222c 0a20 2020 2022 786e  60b56a",.    "xn
+00012e30: 2d2d 7463 6b77 6522 2c0a 2020 2020 2278  --tckwe",.    "x
+00012e40: 6e2d 2d74 6971 3439 7871 796a 222c 0a20  n--tiq49xqyj",. 
+00012e50: 2020 2022 786e 2d2d 756e 7570 3479 222c     "xn--unup4y",
+00012e60: 0a20 2020 2022 786e 2d2d 7665 726d 6765  .    "xn--vermge
+00012e70: 6e73 6265 7261 7465 722d 6374 6222 2c0a  nsberater-ctb",.
+00012e80: 2020 2020 2278 6e2d 2d76 6572 6d67 656e      "xn--vermgen
+00012e90: 7362 6572 6174 756e 672d 7077 6222 2c0a  sberatung-pwb",.
+00012ea0: 2020 2020 2278 6e2d 2d76 6871 7576 222c      "xn--vhquv",
+00012eb0: 0a20 2020 2022 786e 2d2d 7675 7138 3631  .    "xn--vuq861
+00012ec0: 6222 2c0a 2020 2020 2278 6e2d 2d77 3472  b",.    "xn--w4r
+00012ed0: 3835 656c 3866 6875 3564 6e72 6122 2c0a  85el8fhu5dnra",.
+00012ee0: 2020 2020 2278 6e2d 2d77 3472 7334 306c      "xn--w4rs40l
+00012ef0: 222c 0a20 2020 2022 786e 2d2d 7767 6268  ",.    "xn--wgbh
+00012f00: 3163 222c 0a20 2020 2022 786e 2d2d 7767  1c",.    "xn--wg
+00012f10: 626c 3661 222c 0a20 2020 2022 786e 2d2d  bl6a",.    "xn--
+00012f20: 7868 7135 3231 6222 2c0a 2020 2020 2278  xhq521b",.    "x
+00012f30: 6e2d 2d78 6b63 3261 6c33 6879 6532 6122  n--xkc2al3hye2a"
+00012f40: 2c0a 2020 2020 2278 6e2d 2d78 6b63 3264  ,.    "xn--xkc2d
+00012f50: 6c33 6135 6565 3068 222c 0a20 2020 2022  l3a5ee0h",.    "
+00012f60: 786e 2d2d 7939 6133 6171 222c 0a20 2020  xn--y9a3aq",.   
+00012f70: 2022 786e 2d2d 7966 726f 3469 3637 6f22   "xn--yfro4i67o"
+00012f80: 2c0a 2020 2020 2278 6e2d 2d79 6762 6932  ,.    "xn--ygbi2
+00012f90: 616d 6d78 222c 0a20 2020 2022 786e 2d2d  ammx",.    "xn--
+00012fa0: 7a66 7231 3634 6222 2c0a 2020 2020 2278  zfr164b",.    "x
+00012fb0: 7065 7269 6122 2c0a 2020 2020 2278 7878  peria",.    "xxx
+00012fc0: 222c 0a20 2020 2022 7879 7a22 2c0a 2020  ",.    "xyz",.  
+00012fd0: 2020 2320 790a 2020 2020 2279 6163 6874    # y.    "yacht
+00012fe0: 7322 2c0a 2020 2020 2279 6168 6f6f 222c  s",.    "yahoo",
+00012ff0: 0a20 2020 2022 7961 6d61 7875 6e22 2c0a  .    "yamaxun",.
+00013000: 2020 2020 2279 616e 6465 7822 2c0a 2020      "yandex",.  
+00013010: 2020 2279 6522 2c0a 2020 2020 2279 6f64    "ye",.    "yod
+00013020: 6f62 6173 6869 222c 0a20 2020 2022 796f  obashi",.    "yo
+00013030: 6761 222c 0a20 2020 2022 796f 6b6f 6861  ga",.    "yokoha
+00013040: 6d61 222c 0a20 2020 2022 796f 7522 2c0a  ma",.    "you",.
+00013050: 2020 2020 2279 6f75 7475 6265 222c 0a20      "youtube",. 
+00013060: 2020 2022 7974 222c 0a20 2020 2022 7975     "yt",.    "yu
+00013070: 6e22 2c0a 2020 2020 2320 7a0a 2020 2020  n",.    # z.    
+00013080: 227a 6122 2c0a 2020 2020 227a 6170 706f  "za",.    "zappo
+00013090: 7322 2c0a 2020 2020 227a 6172 6122 2c0a  s",.    "zara",.
+000130a0: 2020 2020 227a 6572 6f22 2c0a 2020 2020      "zero",.    
+000130b0: 227a 6970 222c 0a20 2020 2022 7a69 7070  "zip",.    "zipp
+000130c0: 6f22 2c0a 2020 2020 227a 6d22 2c0a 2020  o",.    "zm",.  
+000130d0: 2020 227a 6f6e 6522 2c0a 2020 2020 227a    "zone",.    "z
+000130e0: 7565 7269 6368 222c 0a20 2020 2022 7a77  uerich",.    "zw
+000130f0: 222c 0a5d 0a0a 0a63 6c61 7373 2049 535f  ",.]...class IS_
+00013100: 4854 5450 5f55 524c 2856 616c 6964 6174  HTTP_URL(Validat
+00013110: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
+00013120: 2052 656a 6563 7473 2061 2055 524c 2073   Rejects a URL s
+00013130: 7472 696e 6720 6966 2061 6e79 206f 6620  tring if any of 
+00013140: 7468 6520 666f 6c6c 6f77 696e 6720 6973  the following is
+00013150: 2074 7275 653a 0a20 2020 2020 2020 2a20   true:.       * 
+00013160: 5468 6520 7374 7269 6e67 2069 7320 656d  The string is em
+00013170: 7074 7920 6f72 204e 6f6e 650a 2020 2020  pty or None.    
+00013180: 2020 202a 2054 6865 2073 7472 696e 6720     * The string 
+00013190: 7573 6573 2063 6861 7261 6374 6572 7320  uses characters 
+000131a0: 7468 6174 2061 7265 206e 6f74 2061 6c6c  that are not all
+000131b0: 6f77 6564 2069 6e20 6120 5552 4c0a 2020  owed in a URL.  
+000131c0: 2020 2020 202a 2054 6865 2073 7472 696e       * The strin
+000131d0: 6720 6272 6561 6b73 2061 6e79 206f 6620  g breaks any of 
+000131e0: 7468 6520 4854 5450 2073 796e 7461 6374  the HTTP syntact
+000131f0: 6963 2072 756c 6573 0a20 2020 2020 2020  ic rules.       
+00013200: 2a20 5468 6520 5552 4c20 7363 6865 6d65  * The URL scheme
+00013210: 2073 7065 6369 6669 6564 2028 6966 206f   specified (if o
+00013220: 6e65 2069 7320 7370 6563 6966 6965 6429  ne is specified)
+00013230: 2069 7320 6e6f 7420 2768 7474 7027 206f   is not 'http' o
+00013240: 7220 2768 7474 7073 270a 2020 2020 2020  r 'https'.      
+00013250: 202a 2054 6865 2074 6f70 2d6c 6576 656c   * The top-level
+00013260: 2064 6f6d 6169 6e20 2869 6620 6120 686f   domain (if a ho
+00013270: 7374 206e 616d 6520 6973 2073 7065 6369  st name is speci
+00013280: 6669 6564 2920 646f 6573 206e 6f74 2065  fied) does not e
+00013290: 7869 7374 0a0a 2020 2020 4261 7365 6420  xist..    Based 
+000132a0: 6f6e 2052 4643 2032 3631 363a 2068 7474  on RFC 2616: htt
+000132b0: 703a 2f2f 7777 772e 6661 7173 2e6f 7267  p://www.faqs.org
+000132c0: 2f72 6663 732f 7266 6332 3631 362e 6874  /rfcs/rfc2616.ht
+000132d0: 6d6c 0a0a 2020 2020 5468 6973 2066 756e  ml..    This fun
+000132e0: 6374 696f 6e20 6f6e 6c79 2063 6865 636b  ction only check
+000132f0: 7320 7468 6520 5552 4c27 7320 7379 6e74  s the URL's synt
+00013300: 6178 2e20 4974 2064 6f65 7320 6e6f 7420  ax. It does not 
+00013310: 6368 6563 6b20 7468 6174 2074 6865 2055  check that the U
+00013320: 524c 0a20 2020 2070 6f69 6e74 7320 746f  RL.    points to
+00013330: 2061 2072 6561 6c20 646f 6375 6d65 6e74   a real document
+00013340: 2c20 666f 7220 6578 616d 706c 652c 206f  , for example, o
+00013350: 7220 7468 6174 2069 7420 6f74 6865 7277  r that it otherw
+00013360: 6973 6520 6d61 6b65 7320 7365 6e73 650a  ise makes sense.
+00013370: 2020 2020 7365 6d61 6e74 6963 616c 6c79      semantically
+00013380: 2e20 5468 6973 2066 756e 6374 696f 6e20  . This function 
+00013390: 646f 6573 2061 7574 6f6d 6174 6963 616c  does automatical
+000133a0: 6c79 2070 7265 7065 6e64 2027 6874 7470  ly prepend 'http
+000133b0: 3a2f 2f27 2069 6e20 6672 6f6e 740a 2020  ://' in front.  
+000133c0: 2020 6f66 2061 2055 524c 2069 6e20 7468    of a URL in th
+000133d0: 6520 6361 7365 206f 6620 616e 2061 6262  e case of an abb
+000133e0: 7265 7669 6174 6564 2055 524c 2028 652e  reviated URL (e.
+000133f0: 672e 2027 676f 6f67 6c65 2e63 6127 292e  g. 'google.ca').
+00013400: 0a0a 2020 2020 5468 6520 6c69 7374 206f  ..    The list o
+00013410: 6620 616c 6c6f 7765 6420 7363 6865 6d65  f allowed scheme
+00013420: 7320 6973 2063 7573 746f 6d69 7a61 626c  s is customizabl
+00013430: 6520 7769 7468 2074 6865 2061 6c6c 6f77  e with the allow
+00013440: 6564 5f73 6368 656d 6573 0a20 2020 2070  ed_schemes.    p
+00013450: 6172 616d 6574 6572 2e20 4966 2079 6f75  arameter. If you
+00013460: 2065 7863 6c75 6465 204e 6f6e 6520 6672   exclude None fr
+00013470: 6f6d 2074 6865 206c 6973 742c 2074 6865  om the list, the
+00013480: 6e20 6162 6272 6576 6961 7465 6420 5552  n abbreviated UR
+00013490: 4c73 0a20 2020 2028 6c61 636b 696e 6720  Ls.    (lacking 
+000134a0: 6120 7363 6865 6d65 2073 7563 6820 6173  a scheme such as
+000134b0: 2027 6874 7470 2729 2077 696c 6c20 6265   'http') will be
+000134c0: 2072 656a 6563 7465 642e 0a0a 2020 2020   rejected...    
+000134d0: 5468 6520 6465 6661 756c 7420 7072 6570  The default prep
+000134e0: 656e 6465 6420 7363 6865 6d65 2069 7320  ended scheme is 
+000134f0: 6375 7374 6f6d 697a 6162 6c65 2077 6974  customizable wit
+00013500: 6820 7468 6520 7072 6570 656e 645f 7363  h the prepend_sc
+00013510: 6865 6d65 0a20 2020 2070 6172 616d 6574  heme.    paramet
+00013520: 6572 2e20 4966 2079 6f75 2073 6574 2070  er. If you set p
+00013530: 7265 7065 6e64 5f73 6368 656d 6520 746f  repend_scheme to
+00013540: 204e 6f6e 6520 7468 656e 2070 7265 7065   None then prepe
+00013550: 6e64 696e 6720 7769 6c6c 2062 650a 2020  nding will be.  
+00013560: 2020 6469 7361 626c 6564 2e20 5552 4c73    disabled. URLs
+00013570: 2074 6861 7420 7265 7175 6972 6520 7072   that require pr
+00013580: 6570 656e 6469 6e67 2074 6f20 7061 7273  epending to pars
+00013590: 6520 7769 6c6c 2073 7469 6c6c 2062 6520  e will still be 
+000135a0: 6163 6365 7074 6564 2c0a 2020 2020 6275  accepted,.    bu
+000135b0: 7420 7468 6520 7265 7475 726e 2076 616c  t the return val
+000135c0: 7565 2077 696c 6c20 6e6f 7420 6265 206d  ue will not be m
+000135d0: 6f64 6966 6965 642e 0a0a 2020 2020 4061  odified...    @a
+000135e0: 7574 686f 723a 204a 6f6e 6174 6861 6e20  uthor: Jonathan 
+000135f0: 4265 6e6e 0a0a 2020 2020 2020 2020 3e3e  Benn..        >>
+00013600: 3e20 4953 5f48 5454 505f 5552 4c28 2928  > IS_HTTP_URL()(
+00013610: 2768 7474 703a 2f2f 312e 322e 332e 3427  'http://1.2.3.4'
+00013620: 290a 2020 2020 2020 2020 2827 6874 7470  ).        ('http
+00013630: 3a2f 2f31 2e32 2e33 2e34 272c 204e 6f6e  ://1.2.3.4', Non
+00013640: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+00013650: 535f 4854 5450 5f55 524c 2829 2827 6874  S_HTTP_URL()('ht
+00013660: 7470 3a2f 2f61 6263 2e63 6f6d 2729 0a20  tp://abc.com'). 
+00013670: 2020 2020 2020 2028 2768 7474 703a 2f2f         ('http://
+00013680: 6162 632e 636f 6d27 2c20 4e6f 6e65 290a  abc.com', None).
+00013690: 2020 2020 2020 2020 3e3e 3e20 4953 5f48          >>> IS_H
+000136a0: 5454 505f 5552 4c28 2928 2768 7474 7073  TTP_URL()('https
+000136b0: 3a2f 2f61 6263 2e63 6f6d 2729 0a20 2020  ://abc.com').   
+000136c0: 2020 2020 2028 2768 7474 7073 3a2f 2f61       ('https://a
+000136d0: 6263 2e63 6f6d 272c 204e 6f6e 6529 0a20  bc.com', None). 
+000136e0: 2020 2020 2020 203e 3e3e 2049 535f 4854         >>> IS_HT
+000136f0: 5450 5f55 524c 2829 2827 6874 7470 783a  TP_URL()('httpx:
+00013700: 2f2f 6162 632e 636f 6d27 290a 2020 2020  //abc.com').    
+00013710: 2020 2020 2827 6874 7470 783a 2f2f 6162      ('httpx://ab
+00013720: 632e 636f 6d27 2c20 2765 6e74 6572 2061  c.com', 'enter a
+00013730: 2076 616c 6964 2055 524c 2729 0a20 2020   valid URL').   
+00013740: 2020 2020 203e 3e3e 2049 535f 4854 5450       >>> IS_HTTP
+00013750: 5f55 524c 2829 2827 6874 7470 3a2f 2f61  _URL()('http://a
+00013760: 6263 2e63 6f6d 3a38 3027 290a 2020 2020  bc.com:80').    
+00013770: 2020 2020 2827 6874 7470 3a2f 2f61 6263      ('http://abc
+00013780: 2e63 6f6d 3a38 3027 2c20 4e6f 6e65 290a  .com:80', None).
+00013790: 2020 2020 2020 2020 3e3e 3e20 4953 5f48          >>> IS_H
+000137a0: 5454 505f 5552 4c28 2928 2768 7474 703a  TTP_URL()('http:
+000137b0: 2f2f 7573 6572 4061 6263 2e63 6f6d 2729  //user@abc.com')
+000137c0: 0a20 2020 2020 2020 2028 2768 7474 703a  .        ('http:
+000137d0: 2f2f 7573 6572 4061 6263 2e63 6f6d 272c  //user@abc.com',
+000137e0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+000137f0: 3e3e 2049 535f 4854 5450 5f55 524c 2829  >> IS_HTTP_URL()
+00013800: 2827 6874 7470 3a2f 2f75 7365 7240 312e  ('http://user@1.
+00013810: 322e 332e 3427 290a 2020 2020 2020 2020  2.3.4').        
+00013820: 2827 6874 7470 3a2f 2f75 7365 7240 312e  ('http://user@1.
+00013830: 322e 332e 3427 2c20 4e6f 6e65 290a 0a20  2.3.4', None).. 
+00013840: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+00013850: 2065 7272 6f72 5f6d 6573 7361 6765 3a20   error_message: 
+00013860: 6120 7374 7269 6e67 2c20 7468 6520 6572  a string, the er
+00013870: 726f 7220 6d65 7373 6167 6520 746f 2067  ror message to g
+00013880: 6976 6520 7468 6520 656e 6420 7573 6572  ive the end user
+00013890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000138a0: 7468 6520 5552 4c20 646f 6573 206e 6f74  the URL does not
+000138b0: 2076 616c 6964 6174 650a 2020 2020 2020   validate.      
+000138c0: 2020 616c 6c6f 7765 645f 7363 6865 6d65    allowed_scheme
+000138d0: 733a 2061 206c 6973 7420 636f 6e74 6169  s: a list contai
+000138e0: 6e69 6e67 2073 7472 696e 6773 206f 7220  ning strings or 
+000138f0: 4e6f 6e65 2e20 4561 6368 2065 6c65 6d65  None. Each eleme
+00013900: 6e74 0a20 2020 2020 2020 2020 2020 2069  nt.            i
+00013910: 7320 6120 7363 6865 6d65 2074 6865 2069  s a scheme the i
+00013920: 6e70 7574 7465 6420 5552 4c20 6973 2061  nputted URL is a
+00013930: 6c6c 6f77 6564 2074 6f20 7573 650a 2020  llowed to use.  
+00013940: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
+00013950: 6865 6d65 3a20 6120 7374 7269 6e67 2c20  heme: a string, 
+00013960: 7468 6973 2073 6368 656d 6520 6973 2070  this scheme is p
+00013970: 7265 7065 6e64 6564 2069 6620 6974 2773  repended if it's
+00013980: 0a20 2020 2020 2020 2020 2020 206e 6563  .            nec
+00013990: 6573 7361 7279 2074 6f20 6d61 6b65 2074  essary to make t
+000139a0: 6865 2055 524c 2076 616c 6964 0a20 2020  he URL valid.   
+000139b0: 2022 2222 0a0a 2020 2020 5245 4745 585f   """..    REGEX_
+000139c0: 4745 4e45 5249 435f 5641 4c49 445f 4950  GENERIC_VALID_IP
+000139d0: 203d 2072 2228 5b5c 772e 217e 2a27 7c3b   = r"([\w.!~*'|;
+000139e0: 3a26 3d2b 242c 2d5d 2b40 293f 5c64 2b5c  :&=+$,-]+@)?\d+\
+000139f0: 2e5c 642b 5c2e 5c64 2b5c 2e5c 642b 283a  .\d+\.\d+\.\d+(:
+00013a00: 5c64 2a29 2a24 220a 2020 2020 5245 4745  \d*)*$".    REGE
+00013a10: 585f 4745 4e45 5249 435f 5641 4c49 445f  X_GENERIC_VALID_
+00013a20: 444f 4d41 494e 203d 2072 2228 5b5c 772e  DOMAIN = r"([\w.
+00013a30: 217e 2a27 7c3b 3a26 3d2b 242c 2d5d 2b40  !~*'|;:&=+$,-]+@
+00013a40: 293f 2828 5b41 2d5a 612d 7a30 2d39 5d2b  )?(([A-Za-z0-9]+
+00013a50: 5b41 2d5a 612d 7a30 2d39 5c2d 5d2a 5b41  [A-Za-z0-9\-]*[A
+00013a60: 2d5a 612d 7a30 2d39 5d2b 5c2e 292a 285b  -Za-z0-9]+\.)*([
+00013a70: 412d 5a61 2d7a 302d 395d 2b5c 2e29 2a29  A-Za-z0-9]+\.)*)
+00013a80: 2a28 5b41 2d5a 612d 7a5d 2b5b 412d 5a61  *([A-Za-z]+[A-Za
+00013a90: 2d7a 302d 395c 2d5d 2a5b 412d 5a61 2d7a  -z0-9\-]*[A-Za-z
+00013aa0: 302d 395d 2b29 5c2e 3f28 3a5c 642a 292a  0-9]+)\.?(:\d*)*
+00013ab0: 2422 0a0a 2020 2020 6465 6620 5f5f 696e  $"..    def __in
+00013ac0: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00013ad0: 6c66 2c0a 2020 2020 2020 2020 6572 726f  lf,.        erro
+00013ae0: 725f 6d65 7373 6167 653d 2245 6e74 6572  r_message="Enter
+00013af0: 2061 2076 616c 6964 2055 524c 222c 0a20   a valid URL",. 
+00013b00: 2020 2020 2020 2061 6c6c 6f77 6564 5f73         allowed_s
+00013b10: 6368 656d 6573 3d4e 6f6e 652c 0a20 2020  chemes=None,.   
+00013b20: 2020 2020 2070 7265 7065 6e64 5f73 6368       prepend_sch
+00013b30: 656d 653d 2268 7474 7022 2c0a 2020 2020  eme="http",.    
+00013b40: 2020 2020 616c 6c6f 7765 645f 746c 6473      allowed_tlds
+00013b50: 3d4e 6f6e 652c 0a20 2020 2029 3a0a 2020  =None,.    ):.  
+00013b60: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+00013b70: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+00013b80: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
+00013b90: 2069 6620 616c 6c6f 7765 645f 7363 6865   if allowed_sche
+00013ba0: 6d65 7320 6973 204e 6f6e 653a 0a20 2020  mes is None:.   
+00013bb0: 2020 2020 2020 2020 2073 656c 662e 616c           self.al
+00013bc0: 6c6f 7765 645f 7363 6865 6d65 7320 3d20  lowed_schemes = 
+00013bd0: 6874 7470 5f73 6368 656d 6573 0a20 2020  http_schemes.   
+00013be0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00013bf0: 2020 2020 2020 2073 656c 662e 616c 6c6f         self.allo
+00013c00: 7765 645f 7363 6865 6d65 7320 3d20 616c  wed_schemes = al
+00013c10: 6c6f 7765 645f 7363 6865 6d65 730a 2020  lowed_schemes.  
+00013c20: 2020 2020 2020 6966 2061 6c6c 6f77 6564        if allowed
+00013c30: 5f74 6c64 7320 6973 204e 6f6e 653a 0a20  _tlds is None:. 
+00013c40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00013c50: 616c 6c6f 7765 645f 746c 6473 203d 206f  allowed_tlds = o
+00013c60: 6666 6963 6961 6c5f 746f 705f 6c65 7665  fficial_top_leve
+00013c70: 6c5f 646f 6d61 696e 730a 2020 2020 2020  l_domains.      
+00013c80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00013c90: 2020 2020 7365 6c66 2e61 6c6c 6f77 6564      self.allowed
+00013ca0: 5f74 6c64 7320 3d20 616c 6c6f 7765 645f  _tlds = allowed_
+00013cb0: 746c 6473 0a20 2020 2020 2020 2073 656c  tlds.        sel
+00013cc0: 662e 7072 6570 656e 645f 7363 6865 6d65  f.prepend_scheme
+00013cd0: 203d 2070 7265 7065 6e64 5f73 6368 656d   = prepend_schem
+00013ce0: 650a 0a20 2020 2020 2020 2066 6f72 2069  e..        for i
+00013cf0: 2069 6e20 7365 6c66 2e61 6c6c 6f77 6564   in self.allowed
+00013d00: 5f73 6368 656d 6573 3a0a 2020 2020 2020  _schemes:.      
+00013d10: 2020 2020 2020 6966 2069 206e 6f74 2069        if i not i
+00013d20: 6e20 6874 7470 5f73 6368 656d 6573 3a0a  n http_schemes:.
+00013d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013d40: 7261 6973 6520 5379 6e74 6178 4572 726f  raise SyntaxErro
+00013d50: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+00013d60: 2020 2020 2020 2022 616c 6c6f 7765 645f         "allowed_
+00013d70: 7363 6865 6d65 2076 616c 7565 2027 2573  scheme value '%s
+00013d80: 2720 6973 206e 6f74 2069 6e20 2573 2220  ' is not in %s" 
+00013d90: 2520 2869 2c20 6874 7470 5f73 6368 656d  % (i, http_schem
+00013da0: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
+00013db0: 2020 2020 290a 0a20 2020 2020 2020 2069      )..        i
+00013dc0: 6620 7365 6c66 2e70 7265 7065 6e64 5f73  f self.prepend_s
+00013dd0: 6368 656d 6520 6e6f 7420 696e 2073 656c  cheme not in sel
+00013de0: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
+00013df0: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+00013e00: 6169 7365 2053 796e 7461 7845 7272 6f72  aise SyntaxError
+00013e10: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00013e20: 2020 2270 7265 7065 6e64 5f73 6368 656d    "prepend_schem
+00013e30: 653d 2725 7327 2069 7320 6e6f 7420 696e  e='%s' is not in
+00013e40: 2061 6c6c 6f77 6564 5f73 6368 656d 6573   allowed_schemes
+00013e50: 3d25 7322 0a20 2020 2020 2020 2020 2020  =%s".           
+00013e60: 2020 2020 2025 2028 7365 6c66 2e70 7265       % (self.pre
+00013e70: 7065 6e64 5f73 6368 656d 652c 2073 656c  pend_scheme, sel
+00013e80: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
+00013e90: 7329 0a20 2020 2020 2020 2020 2020 2029  s).            )
+00013ea0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
+00013eb0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+00013ec0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
+00013ed0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00013ee0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+00013ef0: 2020 2020 2020 2076 616c 7565 3a20 6120         value: a 
+00013f00: 7374 7269 6e67 2c20 7468 6520 5552 4c20  string, the URL 
+00013f10: 746f 2076 616c 6964 6174 650a 0a20 2020  to validate..   
+00013f20: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+00013f30: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
+00013f40: 652c 2077 6865 7265 2074 7570 6c65 5b30  e, where tuple[0
+00013f50: 5d20 6973 2074 6865 2069 6e70 7574 7465  ] is the inputte
+00013f60: 6420 7661 6c75 650a 2020 2020 2020 2020  d value.        
+00013f70: 2020 2020 2870 6f73 7369 626c 6520 7072      (possible pr
+00013f80: 6570 656e 6465 6420 7769 7468 2070 7265  epended with pre
+00013f90: 7065 6e64 5f73 6368 656d 6529 2c20 616e  pend_scheme), an
+00013fa0: 6420 7475 706c 655b 315d 2069 7320 6569  d tuple[1] is ei
+00013fb0: 7468 6572 0a20 2020 2020 2020 2020 2020  ther.           
+00013fc0: 204e 6f6e 6520 2873 7563 6365 7373 2129   None (success!)
+00013fd0: 206f 7220 7468 6520 7374 7269 6e67 2065   or the string e
+00013fe0: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
+00013ff0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00014000: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00014010: 2020 2320 6966 2074 6865 2055 524c 2070    # if the URL p
+00014020: 6173 7365 7320 6765 6e65 7269 6320 7661  asses generic va
+00014030: 6c69 6461 7469 6f6e 0a20 2020 2020 2020  lidation.       
+00014040: 2020 2020 2078 203d 2049 535f 4745 4e45       x = IS_GENE
+00014050: 5249 435f 5552 4c28 0a20 2020 2020 2020  RIC_URL(.       
+00014060: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
+00014070: 6573 7361 6765 3d73 656c 662e 6572 726f  essage=self.erro
+00014080: 725f 6d65 7373 6167 652c 0a20 2020 2020  r_message,.     
+00014090: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
+000140a0: 6564 5f73 6368 656d 6573 3d73 656c 662e  ed_schemes=self.
+000140b0: 616c 6c6f 7765 645f 7363 6865 6d65 732c  allowed_schemes,
+000140c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000140d0: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
+000140e0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
+000140f0: 656d 652c 0a20 2020 2020 2020 2020 2020  eme,.           
+00014100: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
+00014110: 6620 7828 7661 6c75 6529 5b31 5d20 6973  f x(value)[1] is
+00014120: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00014130: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
+00014140: 7320 3d20 7572 6c70 6172 7365 2e75 726c  s = urlparse.url
+00014150: 7061 7273 6528 7661 6c75 6529 0a20 2020  parse(value).   
+00014160: 2020 2020 2020 2020 2020 2020 2061 7574               aut
+00014170: 686f 7269 7479 203d 2063 6f6d 706f 6e65  hority = compone
+00014180: 6e74 732e 6e65 746c 6f63 0a20 2020 2020  nts.netloc.     
+00014190: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
+000141a0: 7468 6572 6520 6973 2061 6e20 6175 7468  there is an auth
+000141b0: 6f72 6974 7920 636f 6d70 6f6e 656e 740a  ority component.
+000141c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000141d0: 6966 2061 7574 686f 7269 7479 3a0a 2020  if authority:.  
+000141e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000141f0: 2020 2320 6966 2061 7574 686f 7269 7479    # if authority
+00014200: 2069 7320 6120 7661 6c69 6420 4950 2061   is a valid IP a
+00014210: 6464 7265 7373 0a20 2020 2020 2020 2020  ddress.         
+00014220: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00014230: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
+00014240: 585f 4745 4e45 5249 435f 5641 4c49 445f  X_GENERIC_VALID_
+00014250: 4950 2c20 6175 7468 6f72 6974 7929 3a0a  IP, authority):.
+00014260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014270: 2020 2020 2020 2020 2320 5468 656e 2074          # Then t
+00014280: 6869 7320 4854 5450 2055 524c 2069 7320  his HTTP URL is 
+00014290: 7661 6c69 640a 2020 2020 2020 2020 2020  valid.          
+000142a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000142b0: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
+000142c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000142d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000142e0: 2020 2020 2020 2020 2020 2020 2023 2065               # e
+000142f0: 6c73 6520 6966 2061 7574 686f 7269 7479  lse if authority
+00014300: 2069 7320 6120 7661 6c69 6420 646f 6d61   is a valid doma
+00014310: 696e 206e 616d 650a 2020 2020 2020 2020  in name.        
+00014320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014330: 646f 6d61 696e 4d61 7463 6820 3d20 7265  domainMatch = re
+00014340: 2e6d 6174 6368 280a 2020 2020 2020 2020  .match(.        
+00014350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014360: 2020 2020 7365 6c66 2e52 4547 4558 5f47      self.REGEX_G
+00014370: 454e 4552 4943 5f56 414c 4944 5f44 4f4d  ENERIC_VALID_DOM
+00014380: 4149 4e2c 2061 7574 686f 7269 7479 0a20  AIN, authority. 
+00014390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000143a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000143b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000143c0: 2069 6620 646f 6d61 696e 4d61 7463 683a   if domainMatch:
+000143d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000143e0: 2020 2020 2020 2020 2020 2020 2023 2069               # i
+000143f0: 6620 7468 6520 746f 702d 6c65 7665 6c20  f the top-level 
+00014400: 646f 6d61 696e 2072 6561 6c6c 7920 6578  domain really ex
+00014410: 6973 7473 0a20 2020 2020 2020 2020 2020  ists.           
+00014420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014430: 2069 6620 646f 6d61 696e 4d61 7463 682e   if domainMatch.
+00014440: 6772 6f75 7028 3529 2e6c 6f77 6572 2829  group(5).lower()
+00014450: 2069 6e20 7365 6c66 2e61 6c6c 6f77 6564   in self.allowed
+00014460: 5f74 6c64 733a 0a20 2020 2020 2020 2020  _tlds:.         
+00014470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014480: 2020 2020 2020 2023 2054 6865 6e20 7468         # Then th
+00014490: 6973 2048 5454 5020 5552 4c20 6973 2076  is HTTP URL is v
+000144a0: 616c 6964 0a20 2020 2020 2020 2020 2020  alid.           
+000144b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144c0: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+000144d0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000144e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000144f0: 2020 2020 2020 2020 2020 2020 2320 656c              # el
+00014500: 7365 2074 6869 7320 6973 2061 2072 656c  se this is a rel
+00014510: 6174 6976 652f 6162 6272 6576 6961 7465  ative/abbreviate
+00014520: 6420 5552 4c2c 2077 6869 6368 2077 696c  d URL, which wil
+00014530: 6c20 7061 7273 650a 2020 2020 2020 2020  l parse.        
+00014540: 2020 2020 2020 2020 2020 2020 2320 696e              # in
+00014550: 746f 2074 6865 2055 524c 2773 2070 6174  to the URL's pat
+00014560: 6820 636f 6d70 6f6e 656e 740a 2020 2020  h component.    
+00014570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014580: 7061 7468 203d 2063 6f6d 706f 6e65 6e74  path = component
+00014590: 732e 7061 7468 0a20 2020 2020 2020 2020  s.path.         
+000145a0: 2020 2020 2020 2020 2020 2023 2072 656c             # rel
+000145b0: 6174 6976 6520 6361 7365 3a20 6966 2074  ative case: if t
+000145c0: 6869 7320 6973 2061 2076 616c 6964 2070  his is a valid p
+000145d0: 6174 6820 2869 6620 6974 2073 7461 7274  ath (if it start
+000145e0: 7320 7769 7468 0a20 2020 2020 2020 2020  s with.         
+000145f0: 2020 2020 2020 2020 2020 2023 2061 2073             # a s
+00014600: 6c61 7368 290a 2020 2020 2020 2020 2020  lash).          
+00014610: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00014620: 2070 6174 682e 7374 6172 7473 7769 7468   path.startswith
+00014630: 2822 2f22 293a 0a20 2020 2020 2020 2020  ("/"):.         
+00014640: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014650: 2061 6262 7265 7669 6174 6564 2063 6173   abbreviated cas
+00014660: 653a 2069 6620 7765 2068 6176 656e 2774  e: if we haven't
+00014670: 2061 6c72 6561 6479 2c20 7072 6570 656e   already, prepen
+00014680: 6420 610a 2020 2020 2020 2020 2020 2020  d a.            
+00014690: 2020 2020 2020 2020 2020 2020 2320 7363              # sc
+000146a0: 6865 6d65 2061 6e64 2073 6565 2069 6620  heme and see if 
+000146b0: 6974 2066 6978 6573 2074 6865 2070 726f  it fixes the pro
+000146c0: 626c 656d 0a20 2020 2020 2020 2020 2020  blem.           
+000146d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000146e0: 223a 2f2f 2220 6e6f 7420 696e 2076 616c  "://" not in val
+000146f0: 7565 2061 6e64 204e 6f6e 6520 696e 2073  ue and None in s
+00014700: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
+00014710: 6d65 733a 0a20 2020 2020 2020 2020 2020  mes:.           
+00014720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014730: 2073 6368 656d 6554 6f55 7365 203d 2073   schemeToUse = s
+00014740: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
+00014750: 6d65 206f 7220 2268 7474 7022 0a20 2020  me or "http".   
+00014760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014770: 2020 2020 2020 2020 206e 6577 5f76 616c           new_val
+00014780: 7565 203d 2073 656c 662e 7661 6c69 6461  ue = self.valida
+00014790: 7465 2873 6368 656d 6554 6f55 7365 202b  te(schemeToUse +
+000147a0: 2022 3a2f 2f22 202b 2076 616c 7565 290a   "://" + value).
+000147b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000147c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000147d0: 726e 206e 6577 5f76 616c 7565 2069 6620  rn new_value if 
+000147e0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
+000147f0: 656d 6520 656c 7365 2076 616c 7565 0a20  eme else value. 
+00014800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014810: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
+00014820: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00014830: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00014840: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
+00014850: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+00014860: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+00014870: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+00014880: 6529 290a 0a0a 636c 6173 7320 4953 5f55  e))...class IS_U
+00014890: 524c 2856 616c 6964 6174 6f72 293a 0a20  RL(Validator):. 
+000148a0: 2020 2022 2222 0a20 2020 2052 656a 6563     """.    Rejec
+000148b0: 7473 2061 2055 524c 2073 7472 696e 6720  ts a URL string 
+000148c0: 6966 2061 6e79 206f 6620 7468 6520 666f  if any of the fo
+000148d0: 6c6c 6f77 696e 6720 6973 2074 7275 653a  llowing is true:
+000148e0: 0a0a 2020 2020 2020 202a 2054 6865 2073  ..       * The s
+000148f0: 7472 696e 6720 6973 2065 6d70 7479 206f  tring is empty o
+00014900: 7220 4e6f 6e65 0a20 2020 2020 2020 2a20  r None.       * 
+00014910: 5468 6520 7374 7269 6e67 2075 7365 7320  The string uses 
+00014920: 6368 6172 6163 7465 7273 2074 6861 7420  characters that 
+00014930: 6172 6520 6e6f 7420 616c 6c6f 7765 6420  are not allowed 
+00014940: 696e 2061 2055 524c 0a20 2020 2020 2020  in a URL.       
+00014950: 2a20 5468 6520 7374 7269 6e67 2062 7265  * The string bre
+00014960: 616b 7320 616e 7920 6f66 2074 6865 2048  aks any of the H
+00014970: 5454 5020 7379 6e74 6163 7469 6320 7275  TTP syntactic ru
+00014980: 6c65 730a 2020 2020 2020 202a 2054 6865  les.       * The
+00014990: 2055 524c 2073 6368 656d 6520 7370 6563   URL scheme spec
+000149a0: 6966 6965 6420 2869 6620 6f6e 6520 6973  ified (if one is
+000149b0: 2073 7065 6369 6669 6564 2920 6973 206e   specified) is n
+000149c0: 6f74 2027 6874 7470 2720 6f72 2027 6874  ot 'http' or 'ht
+000149d0: 7470 7327 0a20 2020 2020 2020 2a20 5468  tps'.       * Th
+000149e0: 6520 746f 702d 6c65 7665 6c20 646f 6d61  e top-level doma
+000149f0: 696e 2028 6966 2061 2068 6f73 7420 6e61  in (if a host na
+00014a00: 6d65 2069 7320 7370 6563 6966 6965 6429  me is specified)
+00014a10: 2064 6f65 7320 6e6f 7420 6578 6973 740a   does not exist.
+00014a20: 0a20 2020 2028 5468 6573 6520 7275 6c65  .    (These rule
+00014a30: 7320 6172 6520 6261 7365 6420 6f6e 2052  s are based on R
+00014a40: 4643 2032 3631 363a 2068 7474 703a 2f2f  FC 2616: http://
+00014a50: 7777 772e 6661 7173 2e6f 7267 2f72 6663  www.faqs.org/rfc
+00014a60: 732f 7266 6332 3631 362e 6874 6d6c 290a  s/rfc2616.html).
+00014a70: 0a20 2020 2054 6869 7320 6675 6e63 7469  .    This functi
+00014a80: 6f6e 206f 6e6c 7920 6368 6563 6b73 2074  on only checks t
+00014a90: 6865 2055 524c 2773 2073 796e 7461 782e  he URL's syntax.
+00014aa0: 2049 7420 646f 6573 206e 6f74 2063 6865   It does not che
+00014ab0: 636b 2074 6861 7420 7468 6520 5552 4c0a  ck that the URL.
+00014ac0: 2020 2020 706f 696e 7473 2074 6f20 6120      points to a 
+00014ad0: 7265 616c 2064 6f63 756d 656e 742c 2066  real document, f
+00014ae0: 6f72 2065 7861 6d70 6c65 2c20 6f72 2074  or example, or t
+00014af0: 6861 7420 6974 206f 7468 6572 7769 7365  hat it otherwise
+00014b00: 206d 616b 6573 2073 656e 7365 0a20 2020   makes sense.   
+00014b10: 2073 656d 616e 7469 6361 6c6c 792e 2054   semantically. T
+00014b20: 6869 7320 6675 6e63 7469 6f6e 2064 6f65  his function doe
+00014b30: 7320 6175 746f 6d61 7469 6361 6c6c 7920  s automatically 
+00014b40: 7072 6570 656e 6420 2768 7474 703a 2f2f  prepend 'http://
+00014b50: 2720 696e 2066 726f 6e74 0a20 2020 206f  ' in front.    o
+00014b60: 6620 6120 5552 4c20 696e 2074 6865 2063  f a URL in the c
+00014b70: 6173 6520 6f66 2061 6e20 6162 6272 6576  ase of an abbrev
+00014b80: 6961 7465 6420 5552 4c20 2865 2e67 2e20  iated URL (e.g. 
+00014b90: 2767 6f6f 676c 652e 6361 2729 2e0a 0a20  'google.ca')... 
+00014ba0: 2020 2049 6620 7468 6520 7061 7261 6d65     If the parame
+00014bb0: 7465 7220 6d6f 6465 3d27 6765 6e65 7269  ter mode='generi
+00014bc0: 6327 2069 7320 7573 6564 2c20 7468 656e  c' is used, then
+00014bd0: 2074 6869 7320 6675 6e63 7469 6f6e 2773   this function's
+00014be0: 2062 6568 6176 696f 720a 2020 2020 6368   behavior.    ch
+00014bf0: 616e 6765 732e 2049 7420 7468 656e 2072  anges. It then r
+00014c00: 656a 6563 7473 2061 2055 524c 2073 7472  ejects a URL str
+00014c10: 696e 6720 6966 2061 6e79 206f 6620 7468  ing if any of th
+00014c20: 6520 666f 6c6c 6f77 696e 6720 6973 2074  e following is t
+00014c30: 7275 653a 0a0a 2020 2020 2020 202a 2054  rue:..       * T
+00014c40: 6865 2073 7472 696e 6720 6973 2065 6d70  he string is emp
+00014c50: 7479 206f 7220 4e6f 6e65 0a20 2020 2020  ty or None.     
+00014c60: 2020 2a20 5468 6520 7374 7269 6e67 2075    * The string u
+00014c70: 7365 7320 6368 6172 6163 7465 7273 2074  ses characters t
+00014c80: 6861 7420 6172 6520 6e6f 7420 616c 6c6f  hat are not allo
+00014c90: 7765 6420 696e 2061 2055 524c 0a20 2020  wed in a URL.   
+00014ca0: 2020 2020 2a20 5468 6520 5552 4c20 7363      * The URL sc
+00014cb0: 6865 6d65 2073 7065 6369 6669 6564 2028  heme specified (
+00014cc0: 6966 206f 6e65 2069 7320 7370 6563 6966  if one is specif
+00014cd0: 6965 6429 2069 7320 6e6f 7420 7661 6c69  ied) is not vali
+00014ce0: 640a 0a20 2020 2028 5468 6573 6520 7275  d..    (These ru
+00014cf0: 6c65 7320 6172 6520 6261 7365 6420 6f6e  les are based on
+00014d00: 2052 4643 2032 3339 363a 2068 7474 703a   RFC 2396: http:
+00014d10: 2f2f 7777 772e 6661 7173 2e6f 7267 2f72  //www.faqs.org/r
+00014d20: 6663 732f 7266 6332 3339 362e 6874 6d6c  fcs/rfc2396.html
+00014d30: 290a 0a20 2020 2054 6865 206c 6973 7420  )..    The list 
+00014d40: 6f66 2061 6c6c 6f77 6564 2073 6368 656d  of allowed schem
+00014d50: 6573 2069 7320 6375 7374 6f6d 697a 6162  es is customizab
+00014d60: 6c65 2077 6974 6820 7468 6520 616c 6c6f  le with the allo
+00014d70: 7765 645f 7363 6865 6d65 730a 2020 2020  wed_schemes.    
+00014d80: 7061 7261 6d65 7465 722e 2049 6620 796f  parameter. If yo
+00014d90: 7520 6578 636c 7564 6520 4e6f 6e65 2066  u exclude None f
+00014da0: 726f 6d20 7468 6520 6c69 7374 2c20 7468  rom the list, th
+00014db0: 656e 2061 6262 7265 7669 6174 6564 2055  en abbreviated U
+00014dc0: 524c 730a 2020 2020 286c 6163 6b69 6e67  RLs.    (lacking
+00014dd0: 2061 2073 6368 656d 6520 7375 6368 2061   a scheme such a
+00014de0: 7320 2768 7474 7027 2920 7769 6c6c 2062  s 'http') will b
+00014df0: 6520 7265 6a65 6374 6564 2e0a 0a20 2020  e rejected...   
+00014e00: 2054 6865 2064 6566 6175 6c74 2070 7265   The default pre
+00014e10: 7065 6e64 6564 2073 6368 656d 6520 6973  pended scheme is
+00014e20: 2063 7573 746f 6d69 7a61 626c 6520 7769   customizable wi
+00014e30: 7468 2074 6865 2070 7265 7065 6e64 5f73  th the prepend_s
+00014e40: 6368 656d 650a 2020 2020 7061 7261 6d65  cheme.    parame
+00014e50: 7465 722e 2049 6620 796f 7520 7365 7420  ter. If you set 
+00014e60: 7072 6570 656e 645f 7363 6865 6d65 2074  prepend_scheme t
+00014e70: 6f20 4e6f 6e65 2074 6865 6e20 7072 6570  o None then prep
+00014e80: 656e 6469 6e67 2077 696c 6c20 6265 0a20  ending will be. 
+00014e90: 2020 2064 6973 6162 6c65 642e 2055 524c     disabled. URL
+00014ea0: 7320 7468 6174 2072 6571 7569 7265 2070  s that require p
+00014eb0: 7265 7065 6e64 696e 6720 746f 2070 6172  repending to par
+00014ec0: 7365 2077 696c 6c20 7374 696c 6c20 6265  se will still be
+00014ed0: 2061 6363 6570 7465 642c 0a20 2020 2062   accepted,.    b
+00014ee0: 7574 2074 6865 2072 6574 7572 6e20 7661  ut the return va
+00014ef0: 6c75 6520 7769 6c6c 206e 6f74 2062 6520  lue will not be 
+00014f00: 6d6f 6469 6669 6564 2e0a 0a20 2020 2049  modified...    I
+00014f10: 535f 5552 4c20 6973 2063 6f6d 7061 7469  S_URL is compati
+00014f20: 626c 6520 7769 7468 2074 6865 2049 6e74  ble with the Int
+00014f30: 6572 6e61 7469 6f6e 616c 697a 6564 2044  ernationalized D
+00014f40: 6f6d 6169 6e20 4e61 6d65 2028 4944 4e29  omain Name (IDN)
+00014f50: 2073 7461 6e64 6172 640a 2020 2020 7370   standard.    sp
+00014f60: 6563 6966 6965 6420 696e 2052 4643 2033  ecified in RFC 3
+00014f70: 3439 3020 2868 7474 703a 2f2f 746f 6f6c  490 (http://tool
+00014f80: 732e 6965 7466 2e6f 7267 2f68 746d 6c2f  s.ietf.org/html/
+00014f90: 7266 6333 3439 3029 2e20 4173 2061 2072  rfc3490). As a r
+00014fa0: 6573 756c 742c 0a20 2020 2055 524c 7320  esult,.    URLs 
+00014fb0: 6361 6e20 6265 2072 6567 756c 6172 2073  can be regular s
+00014fc0: 7472 696e 6773 206f 7220 756e 6963 6f64  trings or unicod
+00014fd0: 6520 7374 7269 6e67 732e 0a20 2020 2049  e strings..    I
+00014fe0: 6620 7468 6520 5552 4c27 7320 646f 6d61  f the URL's doma
+00014ff0: 696e 2063 6f6d 706f 6e65 6e74 2028 652e  in component (e.
+00015000: 672e 2067 6f6f 676c 652e 6361 2920 636f  g. google.ca) co
+00015010: 6e74 6169 6e73 206e 6f6e 2d55 532d 4153  ntains non-US-AS
+00015020: 4349 490a 2020 2020 6c65 7474 6572 732c  CII.    letters,
+00015030: 2074 6865 6e20 7468 6520 646f 6d61 696e   then the domain
+00015040: 2077 696c 6c20 6265 2063 6f6e 7665 7274   will be convert
+00015050: 6564 2069 6e74 6f20 5075 6e79 636f 6465  ed into Punycode
+00015060: 2028 6465 6669 6e65 6420 696e 0a20 2020   (defined in.   
+00015070: 2052 4643 2033 3439 322c 2068 7474 703a   RFC 3492, http:
+00015080: 2f2f 746f 6f6c 732e 6965 7466 2e6f 7267  //tools.ietf.org
+00015090: 2f68 746d 6c2f 7266 6333 3439 3229 2e20  /html/rfc3492). 
+000150a0: 4953 5f55 524c 2067 6f65 7320 6120 6269  IS_URL goes a bi
+000150b0: 7420 6265 796f 6e64 0a20 2020 2074 6865  t beyond.    the
+000150c0: 2073 7461 6e64 6172 6473 2c20 616e 6420   standards, and 
+000150d0: 616c 6c6f 7773 206e 6f6e 2d55 532d 4153  allows non-US-AS
+000150e0: 4349 4920 6368 6172 6163 7465 7273 2074  CII characters t
+000150f0: 6f20 6265 2070 7265 7365 6e74 2069 6e20  o be present in 
+00015100: 7468 6520 7061 7468 0a20 2020 2061 6e64  the path.    and
+00015110: 2071 7565 7279 2063 6f6d 706f 6e65 6e74   query component
+00015120: 7320 6f66 2074 6865 2055 524c 2061 7320  s of the URL as 
+00015130: 7765 6c6c 2e20 5468 6573 6520 6e6f 6e2d  well. These non-
+00015140: 5553 2d41 5343 4949 2063 6861 7261 6374  US-ASCII charact
+00015150: 6572 7320 7769 6c6c 0a20 2020 2062 6520  ers will.    be 
+00015160: 6573 6361 7065 6420 7573 696e 6720 7468  escaped using th
+00015170: 6520 7374 616e 6461 7264 2027 2532 3027  e standard '%20'
+00015180: 2074 7970 6520 7379 6e74 6178 2e20 652e   type syntax. e.
+00015190: 672e 2074 6865 2075 6e69 636f 6465 0a20  g. the unicode. 
+000151a0: 2020 2063 6861 7261 6374 6572 2077 6974     character wit
+000151b0: 6820 6865 7820 636f 6465 2030 7834 6538  h hex code 0x4e8
+000151c0: 3620 7769 6c6c 2062 6563 6f6d 6520 2725  6 will become '%
+000151d0: 3465 2538 3627 0a0a 2020 2020 4172 6773  4e%86'..    Args
+000151e0: 3a0a 2020 2020 2020 2020 6572 726f 725f  :.        error_
+000151f0: 6d65 7373 6167 653a 2061 2073 7472 696e  message: a strin
+00015200: 672c 2074 6865 2065 7272 6f72 206d 6573  g, the error mes
+00015210: 7361 6765 2074 6f20 6769 7665 2074 6865  sage to give the
+00015220: 2065 6e64 2075 7365 720a 2020 2020 2020   end user.      
+00015230: 2020 2020 2020 6966 2074 6865 2055 524c        if the URL
+00015240: 2064 6f65 7320 6e6f 7420 7661 6c69 6461   does not valida
+00015250: 7465 0a20 2020 2020 2020 2061 6c6c 6f77  te.        allow
+00015260: 6564 5f73 6368 656d 6573 3a20 6120 6c69  ed_schemes: a li
+00015270: 7374 2063 6f6e 7461 696e 696e 6720 7374  st containing st
+00015280: 7269 6e67 7320 6f72 204e 6f6e 652e 2045  rings or None. E
+00015290: 6163 6820 656c 656d 656e 740a 2020 2020  ach element.    
+000152a0: 2020 2020 2020 2020 6973 2061 2073 6368          is a sch
+000152b0: 656d 6520 7468 6520 696e 7075 7474 6564  eme the inputted
+000152c0: 2055 524c 2069 7320 616c 6c6f 7765 6420   URL is allowed 
+000152d0: 746f 2075 7365 0a20 2020 2020 2020 2070  to use.        p
+000152e0: 7265 7065 6e64 5f73 6368 656d 653a 2061  repend_scheme: a
+000152f0: 2073 7472 696e 672c 2074 6869 7320 7363   string, this sc
+00015300: 6865 6d65 2069 7320 7072 6570 656e 6465  heme is prepende
+00015310: 6420 6966 2069 7427 730a 2020 2020 2020  d if it's.      
+00015320: 2020 2020 2020 6e65 6365 7373 6172 7920        necessary 
+00015330: 746f 206d 616b 6520 7468 6520 5552 4c20  to make the URL 
+00015340: 7661 6c69 640a 0a20 2020 2043 6f64 6520  valid..    Code 
+00015350: 4578 616d 706c 6573 3a3a 0a0a 2020 2020  Examples::..    
+00015360: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+00015370: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
+00015380: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
+00015390: 535f 5552 4c28 2929 0a20 2020 2020 2020  S_URL()).       
+000153a0: 203e 3e3e 2049 535f 5552 4c28 2928 2761   >>> IS_URL()('a
+000153b0: 6263 2e63 6f6d 2729 0a20 2020 2020 2020  bc.com').       
+000153c0: 2028 2768 7474 703a 2f2f 6162 632e 636f   ('http://abc.co
+000153d0: 6d27 2c20 4e6f 6e65 290a 0a20 2020 2020  m', None)..     
+000153e0: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+000153f0: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
+00015400: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+00015410: 5f55 524c 286d 6f64 653d 2767 656e 6572  _URL(mode='gener
+00015420: 6963 2729 290a 2020 2020 2020 2020 3e3e  ic')).        >>
+00015430: 3e20 4953 5f55 524c 286d 6f64 653d 2767  > IS_URL(mode='g
+00015440: 656e 6572 6963 2729 2827 6162 632e 636f  eneric')('abc.co
+00015450: 6d27 290a 2020 2020 2020 2020 2827 6162  m').        ('ab
+00015460: 632e 636f 6d27 2c20 4e6f 6e65 290a 0a20  c.com', None).. 
+00015470: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+00015480: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
+00015490: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
+000154a0: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
+000154b0: 5f55 524c 2861 6c6c 6f77 6564 5f73 6368  _URL(allowed_sch
+000154c0: 656d 6573 3d5b 2768 7474 7073 275d 2c20  emes=['https'], 
+000154d0: 7072 6570 656e 645f 7363 6865 6d65 3d27  prepend_scheme='
+000154e0: 6874 7470 7327 2929 0a20 2020 2020 2020  https')).       
+000154f0: 203e 3e3e 2049 535f 5552 4c28 616c 6c6f   >>> IS_URL(allo
+00015500: 7765 645f 7363 6865 6d65 733d 5b27 6874  wed_schemes=['ht
+00015510: 7470 7327 5d2c 2070 7265 7065 6e64 5f73  tps'], prepend_s
+00015520: 6368 656d 653d 2768 7474 7073 2729 2827  cheme='https')('
+00015530: 6874 7470 733a 2f2f 6162 632e 636f 6d27  https://abc.com'
+00015540: 290a 2020 2020 2020 2020 2827 6874 7470  ).        ('http
+00015550: 733a 2f2f 6162 632e 636f 6d27 2c20 4e6f  s://abc.com', No
+00015560: 6e65 290a 0a20 2020 2020 2020 2049 4e50  ne)..        INP
+00015570: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
+00015580: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
+00015590: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+000155a0: 7265 733d 4953 5f55 524c 2870 7265 7065  res=IS_URL(prepe
+000155b0: 6e64 5f73 6368 656d 653d 2768 7474 7073  nd_scheme='https
+000155c0: 2729 290a 2020 2020 2020 2020 3e3e 3e20  ')).        >>> 
+000155d0: 4953 5f55 524c 2870 7265 7065 6e64 5f73  IS_URL(prepend_s
+000155e0: 6368 656d 653d 2768 7474 7073 2729 2827  cheme='https')('
+000155f0: 6162 632e 636f 6d27 290a 2020 2020 2020  abc.com').      
+00015600: 2020 2827 6874 7470 733a 2f2f 6162 632e    ('https://abc.
+00015610: 636f 6d27 2c20 4e6f 6e65 290a 0a20 2020  com', None)..   
+00015620: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+00015630: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
+00015640: 6e61 6d65 272c 0a20 2020 2020 2020 2020  name',.         
+00015650: 2020 2072 6571 7569 7265 733d 4953 5f55     requires=IS_U
+00015660: 524c 286d 6f64 653d 2767 656e 6572 6963  RL(mode='generic
+00015670: 272c 2061 6c6c 6f77 6564 5f73 6368 656d  ', allowed_schem
+00015680: 6573 3d5b 2766 7470 7327 2c20 2768 7474  es=['ftps', 'htt
+00015690: 7073 275d 2c0a 2020 2020 2020 2020 2020  ps'],.          
+000156a0: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
+000156b0: 6865 6d65 3d27 6874 7470 7327 2929 0a20  heme='https')). 
+000156c0: 2020 2020 2020 203e 3e3e 2049 535f 5552         >>> IS_UR
+000156d0: 4c28 6d6f 6465 3d27 6765 6e65 7269 6327  L(mode='generic'
+000156e0: 2c20 616c 6c6f 7765 645f 7363 6865 6d65  , allowed_scheme
+000156f0: 733d 5b27 6674 7073 272c 2027 6874 7470  s=['ftps', 'http
+00015700: 7327 5d2c 2070 7265 7065 6e64 5f73 6368  s'], prepend_sch
+00015710: 656d 653d 2768 7474 7073 2729 2827 6874  eme='https')('ht
+00015720: 7470 733a 2f2f 6162 632e 636f 6d27 290a  tps://abc.com').
+00015730: 2020 2020 2020 2020 2827 6874 7470 733a          ('https:
+00015740: 2f2f 6162 632e 636f 6d27 2c20 4e6f 6e65  //abc.com', None
+00015750: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00015760: 5f55 524c 286d 6f64 653d 2767 656e 6572  _URL(mode='gener
+00015770: 6963 272c 2061 6c6c 6f77 6564 5f73 6368  ic', allowed_sch
+00015780: 656d 6573 3d5b 2766 7470 7327 2c20 2768  emes=['ftps', 'h
+00015790: 7474 7073 272c 204e 6f6e 655d 2c20 7072  ttps', None], pr
+000157a0: 6570 656e 645f 7363 6865 6d65 3d27 6874  epend_scheme='ht
+000157b0: 7470 7327 2928 2761 6263 2e63 6f6d 2729  tps')('abc.com')
+000157c0: 0a20 2020 2020 2020 2028 2761 6263 2e63  .        ('abc.c
+000157d0: 6f6d 272c 204e 6f6e 6529 0a0a 2020 2020  om', None)..    
+000157e0: 4061 7574 686f 723a 204a 6f6e 6174 6861  @author: Jonatha
+000157f0: 6e20 4265 6e6e 0a20 2020 2022 2222 0a0a  n Benn.    """..
+00015800: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00015810: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00015820: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
+00015830: 7373 6167 653d 2245 6e74 6572 2061 2076  ssage="Enter a v
+00015840: 616c 6964 2055 524c 222c 0a20 2020 2020  alid URL",.     
+00015850: 2020 206d 6f64 653d 2268 7474 7022 2c0a     mode="http",.
+00015860: 2020 2020 2020 2020 616c 6c6f 7765 645f          allowed_
+00015870: 7363 6865 6d65 733d 4e6f 6e65 2c0a 2020  schemes=None,.  
+00015880: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
+00015890: 6865 6d65 3d22 6874 7470 222c 0a20 2020  heme="http",.   
+000158a0: 2020 2020 2061 6c6c 6f77 6564 5f74 6c64       allowed_tld
+000158b0: 733d 4e6f 6e65 2c0a 2020 2020 293a 0a20  s=None,.    ):. 
+000158c0: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
+000158d0: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
+000158e0: 725f 6d65 7373 6167 650a 2020 2020 2020  r_message.      
+000158f0: 2020 7365 6c66 2e6d 6f64 6520 3d20 6d6f    self.mode = mo
+00015900: 6465 2e6c 6f77 6572 2829 0a20 2020 2020  de.lower().     
+00015910: 2020 2069 6620 7365 6c66 2e6d 6f64 6520     if self.mode 
+00015920: 6e6f 7420 696e 205b 2267 656e 6572 6963  not in ["generic
+00015930: 222c 2022 6874 7470 225d 3a0a 2020 2020  ", "http"]:.    
+00015940: 2020 2020 2020 2020 7261 6973 6520 5379          raise Sy
+00015950: 6e74 6178 4572 726f 7228 2269 6e76 616c  ntaxError("inval
+00015960: 6964 206d 6f64 6520 2725 7327 2069 6e20  id mode '%s' in 
+00015970: 4953 5f55 524c 2220 2520 7365 6c66 2e6d  IS_URL" % self.m
+00015980: 6f64 6529 0a20 2020 2020 2020 2073 656c  ode).        sel
+00015990: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
+000159a0: 7320 3d20 616c 6c6f 7765 645f 7363 6865  s = allowed_sche
+000159b0: 6d65 730a 2020 2020 2020 2020 6966 2061  mes.        if a
+000159c0: 6c6c 6f77 6564 5f74 6c64 7320 6973 204e  llowed_tlds is N
+000159d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000159e0: 2073 656c 662e 616c 6c6f 7765 645f 746c   self.allowed_tl
+000159f0: 6473 203d 206f 6666 6963 6961 6c5f 746f  ds = official_to
+00015a00: 705f 6c65 7665 6c5f 646f 6d61 696e 730a  p_level_domains.
+00015a10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00015a20: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00015a30: 6c6c 6f77 6564 5f74 6c64 7320 3d20 616c  llowed_tlds = al
+00015a40: 6c6f 7765 645f 746c 6473 0a0a 2020 2020  lowed_tlds..    
+00015a50: 2020 2020 6966 2073 656c 662e 616c 6c6f      if self.allo
+00015a60: 7765 645f 7363 6865 6d65 733a 0a20 2020  wed_schemes:.   
+00015a70: 2020 2020 2020 2020 2069 6620 7072 6570           if prep
+00015a80: 656e 645f 7363 6865 6d65 206e 6f74 2069  end_scheme not i
+00015a90: 6e20 7365 6c66 2e61 6c6c 6f77 6564 5f73  n self.allowed_s
+00015aa0: 6368 656d 6573 3a0a 2020 2020 2020 2020  chemes:.        
+00015ab0: 2020 2020 2020 2020 7261 6973 6520 5379          raise Sy
+00015ac0: 6e74 6178 4572 726f 7228 0a20 2020 2020  ntaxError(.     
+00015ad0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00015ae0: 7072 6570 656e 645f 7363 6865 6d65 3d27  prepend_scheme='
+00015af0: 2573 2720 6973 206e 6f74 2069 6e20 616c  %s' is not in al
+00015b00: 6c6f 7765 645f 7363 6865 6d65 733d 2573  lowed_schemes=%s
+00015b10: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00015b20: 2020 2020 2020 2520 2870 7265 7065 6e64        % (prepend
+00015b30: 5f73 6368 656d 652c 2073 656c 662e 616c  _scheme, self.al
+00015b40: 6c6f 7765 645f 7363 6865 6d65 7329 0a20  lowed_schemes). 
+00015b50: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00015b60: 0a0a 2020 2020 2020 2020 2320 6966 2061  ..        # if a
+00015b70: 6c6c 6f77 6564 5f73 6368 656d 6573 2069  llowed_schemes i
+00015b80: 7320 4e6f 6e65 2c20 7468 656e 2077 6520  s None, then we 
+00015b90: 7769 6c6c 2064 6566 6572 2074 6573 7469  will defer testi
+00015ba0: 6e67 0a20 2020 2020 2020 2023 2070 7265  ng.        # pre
+00015bb0: 7065 6e64 5f73 6368 656d 6527 7320 7661  pend_scheme's va
+00015bc0: 6c69 6469 7479 2074 6f20 6120 7375 622d  lidity to a sub-
+00015bd0: 6d65 7468 6f64 0a0a 2020 2020 2020 2020  method..        
+00015be0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
+00015bf0: 656d 6520 3d20 7072 6570 656e 645f 7363  eme = prepend_sc
+00015c00: 6865 6d65 0a0a 2020 2020 6465 6620 7661  heme..    def va
+00015c10: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+00015c20: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+00015c30: 6e65 293a 0a20 2020 2020 2020 2022 2222  ne):.        """
+00015c40: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00015c50: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00015c60: 3a20 6120 756e 6963 6f64 6520 6f72 2072  : a unicode or r
+00015c70: 6567 756c 6172 2073 7472 696e 672c 2074  egular string, t
+00015c80: 6865 2055 524c 2074 6f20 7661 6c69 6461  he URL to valida
+00015c90: 7465 0a0a 2020 2020 2020 2020 5265 7475  te..        Retu
+00015ca0: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00015cb0: 2061 2028 7374 7269 6e67 2c20 7374 7269   a (string, stri
+00015cc0: 6e67 2920 7475 706c 652c 2077 6865 7265  ng) tuple, where
+00015cd0: 2074 7570 6c65 5b30 5d20 6973 2074 6865   tuple[0] is the
+00015ce0: 206d 6f64 6966 6965 640a 2020 2020 2020   modified.      
+00015cf0: 2020 2020 2020 696e 7075 7420 7661 6c75        input valu
+00015d00: 6520 616e 6420 7475 706c 655b 315d 2069  e and tuple[1] i
+00015d10: 7320 6569 7468 6572 204e 6f6e 6520 2873  s either None (s
+00015d20: 7563 6365 7373 2129 206f 7220 7468 650a  uccess!) or the.
+00015d30: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00015d40: 6e67 2065 7272 6f72 5f6d 6573 7361 6765  ng error_message
+00015d50: 2e20 5468 6520 696e 7075 7420 7661 6c75  . The input valu
+00015d60: 6520 7769 6c6c 206e 6576 6572 2062 6520  e will never be 
+00015d70: 6d6f 6469 6669 6564 2069 6e20 7468 650a  modified in the.
+00015d80: 2020 2020 2020 2020 2020 2020 6361 7365              case
+00015d90: 206f 6620 616e 2065 7272 6f72 2e20 486f   of an error. Ho
+00015da0: 7765 7665 722c 2069 6620 7468 6572 6520  wever, if there 
+00015db0: 6973 2073 7563 6365 7373 2074 6865 6e20  is success then 
+00015dc0: 7468 6520 696e 7075 7420 5552 4c0a 2020  the input URL.  
+00015dd0: 2020 2020 2020 2020 2020 6d61 7920 6265            may be
+00015de0: 206d 6f64 6966 6965 6420 746f 2028 3129   modified to (1)
+00015df0: 2070 7265 7065 6e64 2061 2073 6368 656d   prepend a schem
+00015e00: 652c 2061 6e64 2f6f 7220 2832 2920 636f  e, and/or (2) co
+00015e10: 6e76 6572 7420 610a 2020 2020 2020 2020  nvert a.        
+00015e20: 2020 2020 6e6f 6e2d 636f 6d70 6c69 616e      non-complian
+00015e30: 7420 756e 6963 6f64 6520 5552 4c20 696e  t unicode URL in
+00015e40: 746f 2061 2063 6f6d 706c 6961 6e74 2055  to a compliant U
+00015e50: 532d 4153 4349 4920 7665 7273 696f 6e2e  S-ASCII version.
+00015e60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00015e70: 2020 2020 2069 6620 7365 6c66 2e6d 6f64       if self.mod
+00015e80: 6520 3d3d 2022 6765 6e65 7269 6322 3a0a  e == "generic":.
+00015e90: 2020 2020 2020 2020 2020 2020 7375 624d              subM
+00015ea0: 6574 686f 6420 3d20 4953 5f47 454e 4552  ethod = IS_GENER
+00015eb0: 4943 5f55 524c 280a 2020 2020 2020 2020  IC_URL(.        
+00015ec0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
+00015ed0: 7373 6167 653d 7365 6c66 2e65 7272 6f72  ssage=self.error
+00015ee0: 5f6d 6573 7361 6765 2c0a 2020 2020 2020  _message,.      
+00015ef0: 2020 2020 2020 2020 2020 616c 6c6f 7765            allowe
+00015f00: 645f 7363 6865 6d65 733d 7365 6c66 2e61  d_schemes=self.a
+00015f10: 6c6c 6f77 6564 5f73 6368 656d 6573 2c0a  llowed_schemes,.
+00015f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f30: 7072 6570 656e 645f 7363 6865 6d65 3d73  prepend_scheme=s
+00015f40: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
+00015f50: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+00015f60: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
+00015f70: 656c 662e 6d6f 6465 203d 3d20 2268 7474  elf.mode == "htt
+00015f80: 7022 3a0a 2020 2020 2020 2020 2020 2020  p":.            
+00015f90: 7375 624d 6574 686f 6420 3d20 4953 5f48  subMethod = IS_H
+00015fa0: 5454 505f 5552 4c28 0a20 2020 2020 2020  TTP_URL(.       
+00015fb0: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
+00015fc0: 6573 7361 6765 3d73 656c 662e 6572 726f  essage=self.erro
+00015fd0: 725f 6d65 7373 6167 652c 0a20 2020 2020  r_message,.     
+00015fe0: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
+00015ff0: 6564 5f73 6368 656d 6573 3d73 656c 662e  ed_schemes=self.
+00016000: 616c 6c6f 7765 645f 7363 6865 6d65 732c  allowed_schemes,
+00016010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016020: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
+00016030: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
+00016040: 656d 652c 0a20 2020 2020 2020 2020 2020  eme,.           
+00016050: 2020 2020 2061 6c6c 6f77 6564 5f74 6c64       allowed_tld
+00016060: 733d 7365 6c66 2e61 6c6c 6f77 6564 5f74  s=self.allowed_t
+00016070: 6c64 732c 0a20 2020 2020 2020 2020 2020  lds,.           
+00016080: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
+00016090: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+000160a0: 7365 2053 796e 7461 7845 7272 6f72 2822  se SyntaxError("
+000160b0: 696e 7661 6c69 6420 6d6f 6465 2027 2573  invalid mode '%s
+000160c0: 2720 696e 2049 535f 5552 4c22 2025 2073  ' in IS_URL" % s
+000160d0: 656c 662e 6d6f 6465 290a 0a20 2020 2020  elf.mode)..     
+000160e0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000160f0: 2876 616c 7565 2c20 756e 6963 6f64 6554  (value, unicodeT
+00016100: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00016110: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00016120: 2020 2020 7661 6c75 6520 3d20 756e 6963      value = unic
+00016130: 6f64 655f 746f 5f61 7363 6969 5f75 726c  ode_to_ascii_url
+00016140: 2876 616c 7565 2c20 7365 6c66 2e70 7265  (value, self.pre
+00016150: 7065 6e64 5f73 6368 656d 6529 0a20 2020  pend_scheme).   
+00016160: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+00016170: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
+00016180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016190: 2320 4966 2077 6520 6172 6520 6e6f 7420  # If we are not 
+000161a0: 6162 6c65 2074 6f20 636f 6e76 6572 7420  able to convert 
+000161b0: 7468 6520 756e 6963 6f64 6520 7572 6c20  the unicode url 
+000161c0: 696e 746f 2061 0a20 2020 2020 2020 2020  into a.         
+000161d0: 2020 2020 2020 2023 2055 532d 4153 4349         # US-ASCI
+000161e0: 4920 5552 4c2c 2074 6865 6e20 7468 6520  I URL, then the 
+000161f0: 5552 4c20 6973 206e 6f74 2076 616c 6964  URL is not valid
+00016200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016210: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+00016220: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
+00016230: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+00016240: 725f 6d65 7373 6167 6529 290a 2020 2020  r_message)).    
+00016250: 2020 2020 7265 7475 726e 2073 7562 4d65      return subMe
+00016260: 7468 6f64 2e76 616c 6964 6174 6528 7661  thod.validate(va
+00016270: 6c75 652c 2072 6563 6f72 645f 6964 290a  lue, record_id).
+00016280: 0a0a 636c 6173 7320 4953 5f54 494d 4528  ..class IS_TIME(
+00016290: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
+000162a0: 2222 220a 2020 2020 4578 616d 706c 653a  """.    Example:
+000162b0: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
+000162c0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+000162d0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+000162e0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+000162f0: 2072 6571 7569 7265 733d 4953 5f54 494d   requires=IS_TIM
+00016300: 4528 2929 0a0a 2020 2020 756e 6465 7273  E())..    unders
+00016310: 7461 6e64 7320 7468 6520 666f 6c6c 6f77  tands the follow
+00016320: 696e 6720 666f 726d 6174 730a 2020 2020  ing formats.    
+00016330: 6868 3a6d 6d3a 7373 205b 616d 2f70 6d5d  hh:mm:ss [am/pm]
+00016340: 0a20 2020 2068 683a 6d6d 205b 616d 2f70  .    hh:mm [am/p
+00016350: 6d5d 0a20 2020 2068 6820 5b61 6d2f 706d  m].    hh [am/pm
+00016360: 5d0a 0a20 2020 205b 616d 2f70 6d5d 2069  ]..    [am/pm] i
+00016370: 7320 6f70 7469 6f6e 616c 2c20 273a 2720  s optional, ':' 
+00016380: 6361 6e20 6265 2072 6570 6c61 6365 6420  can be replaced 
+00016390: 6279 2061 6e79 206f 7468 6572 206e 6f6e  by any other non
+000163a0: 2d73 7061 6365 206e 6f6e 2d64 6967 6974  -space non-digit
+000163b0: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
+000163c0: 4953 5f54 494d 4528 2928 2732 313a 3330  IS_TIME()('21:30
+000163d0: 2729 0a20 2020 2020 2020 2028 6461 7465  ').        (date
+000163e0: 7469 6d65 2e74 696d 6528 3231 2c20 3330  time.time(21, 30
+000163f0: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
+00016400: 203e 3e3e 2049 535f 5449 4d45 2829 2827   >>> IS_TIME()('
+00016410: 3231 2d33 3027 290a 2020 2020 2020 2020  21-30').        
+00016420: 2864 6174 6574 696d 652e 7469 6d65 2832  (datetime.time(2
+00016430: 312c 2033 3029 2c20 4e6f 6e65 290a 2020  1, 30), None).  
+00016440: 2020 2020 2020 3e3e 3e20 4953 5f54 494d        >>> IS_TIM
+00016450: 4528 2928 2732 312e 3330 2729 0a20 2020  E()('21.30').   
+00016460: 2020 2020 2028 6461 7465 7469 6d65 2e74       (datetime.t
+00016470: 696d 6528 3231 2c20 3330 292c 204e 6f6e  ime(21, 30), Non
+00016480: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+00016490: 535f 5449 4d45 2829 2827 3231 3a33 303a  S_TIME()('21:30:
+000164a0: 3539 2729 0a20 2020 2020 2020 2028 6461  59').        (da
+000164b0: 7465 7469 6d65 2e74 696d 6528 3231 2c20  tetime.time(21, 
+000164c0: 3330 2c20 3539 292c 204e 6f6e 6529 0a20  30, 59), None). 
+000164d0: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
+000164e0: 4d45 2829 2827 353a 3330 2729 0a20 2020  ME()('5:30').   
+000164f0: 2020 2020 2028 6461 7465 7469 6d65 2e74       (datetime.t
+00016500: 696d 6528 352c 2033 3029 2c20 4e6f 6e65  ime(5, 30), None
+00016510: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00016520: 5f54 494d 4528 2928 2735 3a33 3020 616d  _TIME()('5:30 am
+00016530: 2729 0a20 2020 2020 2020 2028 6461 7465  ').        (date
+00016540: 7469 6d65 2e74 696d 6528 352c 2033 3029  time.time(5, 30)
+00016550: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00016560: 3e3e 3e20 4953 5f54 494d 4528 2928 2735  >>> IS_TIME()('5
+00016570: 3a33 3020 706d 2729 0a20 2020 2020 2020  :30 pm').       
+00016580: 2028 6461 7465 7469 6d65 2e74 696d 6528   (datetime.time(
+00016590: 3137 2c20 3330 292c 204e 6f6e 6529 0a20  17, 30), None). 
+000165a0: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
+000165b0: 4d45 2829 2827 353a 3330 2077 6861 7465  ME()('5:30 whate
+000165c0: 7665 7227 290a 2020 2020 2020 2020 2827  ver').        ('
+000165d0: 353a 3330 2077 6861 7465 7665 7227 2c20  5:30 whatever', 
+000165e0: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
+000165f0: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
+00016600: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
+00016610: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
+00016620: 2049 535f 5449 4d45 2829 2827 353a 3330   IS_TIME()('5:30
+00016630: 2032 3027 290a 2020 2020 2020 2020 2827   20').        ('
+00016640: 353a 3330 2032 3027 2c20 2765 6e74 6572  5:30 20', 'enter
+00016650: 2074 696d 6520 6173 2068 683a 6d6d 3a73   time as hh:mm:s
+00016660: 7320 2873 6563 6f6e 6473 2c20 616d 2c20  s (seconds, am, 
+00016670: 706d 206f 7074 696f 6e61 6c29 2729 0a20  pm optional)'). 
+00016680: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
+00016690: 4d45 2829 2827 3234 3a33 3027 290a 2020  ME()('24:30').  
+000166a0: 2020 2020 2020 2827 3234 3a33 3027 2c20        ('24:30', 
+000166b0: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
+000166c0: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
+000166d0: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
+000166e0: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
+000166f0: 2049 535f 5449 4d45 2829 2827 3231 3a36   IS_TIME()('21:6
+00016700: 3027 290a 2020 2020 2020 2020 2827 3231  0').        ('21
+00016710: 3a36 3027 2c20 2765 6e74 6572 2074 696d  :60', 'enter tim
+00016720: 6520 6173 2068 683a 6d6d 3a73 7320 2873  e as hh:mm:ss (s
+00016730: 6563 6f6e 6473 2c20 616d 2c20 706d 206f  econds, am, pm o
+00016740: 7074 696f 6e61 6c29 2729 0a20 2020 2020  ptional)').     
+00016750: 2020 203e 3e3e 2049 535f 5449 4d45 2829     >>> IS_TIME()
+00016760: 2827 3231 3a33 303a 3a27 290a 2020 2020  ('21:30::').    
+00016770: 2020 2020 2827 3231 3a33 303a 3a27 2c20      ('21:30::', 
+00016780: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
+00016790: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
+000167a0: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
+000167b0: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
+000167c0: 2049 535f 5449 4d45 2829 2827 2729 0a20   IS_TIME()(''). 
+000167d0: 2020 2020 2020 2028 2727 2c20 2765 6e74         ('', 'ent
+000167e0: 6572 2074 696d 6520 6173 2068 683a 6d6d  er time as hh:mm
+000167f0: 3a73 7320 2873 6563 6f6e 6473 2c20 616d  :ss (seconds, am
+00016800: 2c20 706d 206f 7074 696f 6e61 6c29 2729  , pm optional)')
+00016810: c3b9 0a0a 2020 2020 2222 220a 0a20 2020  ....    """..   
+00016820: 2052 4547 4558 5f54 494d 4520 3d20 2228   REGEX_TIME = "(
+00016830: 283f 503c 683e 5b30 2d39 5d2b 2929 285b  (?P<h>[0-9]+))([
+00016840: 5e30 2d39 205d 2b28 3f50 3c6d 3e5b 302d  ^0-9 ]+(?P<m>[0-
+00016850: 3920 5d2b 2929 3f28 5b5e 302d 3961 7020  9 ]+))?([^0-9ap 
+00016860: 5d2b 283f 503c 733e 5b30 2d39 5d2a 2929  ]+(?P<s>[0-9]*))
+00016870: 3f28 283f 503c 643e 5b61 705d 6d29 293f  ?((?P<d>[ap]m))?
+00016880: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
+00016890: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+000168a0: 662c 2065 7272 6f72 5f6d 6573 7361 6765  f, error_message
+000168b0: 3d22 456e 7465 7220 7469 6d65 2061 7320  ="Enter time as 
+000168c0: 6868 3a6d 6d3a 7373 2028 7365 636f 6e64  hh:mm:ss (second
+000168d0: 732c 2061 6d2c 2070 6d20 6f70 7469 6f6e  s, am, pm option
+000168e0: 616c 2922 0a20 2020 2029 3a0a 2020 2020  al)".    ):.    
+000168f0: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+00016900: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
+00016910: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
+00016920: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
+00016930: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
+00016940: 4e6f 6e65 293a 0a20 2020 2020 2020 2074  None):.        t
+00016950: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00016960: 6976 616c 7565 203d 2076 616c 7565 0a20  ivalue = value. 
+00016970: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00016980: 203d 2072 652e 6d61 7463 6828 7365 6c66   = re.match(self
+00016990: 2e52 4547 4558 5f54 494d 452c 2076 616c  .REGEX_TIME, val
+000169a0: 7565 2e6c 6f77 6572 2829 290a 2020 2020  ue.lower()).    
+000169b0: 2020 2020 2020 2020 2868 2c20 6d2c 2073          (h, m, s
+000169c0: 2920 3d20 2869 6e74 2876 616c 7565 2e67  ) = (int(value.g
+000169d0: 726f 7570 2822 6822 2929 2c20 302c 2030  roup("h")), 0, 0
+000169e0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000169f0: 206e 6f74 2076 616c 7565 2e67 726f 7570   not value.group
+00016a00: 2822 6d22 2920 6973 204e 6f6e 653a 0a20  ("m") is None:. 
+00016a10: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00016a20: 203d 2069 6e74 2876 616c 7565 2e67 726f   = int(value.gro
+00016a30: 7570 2822 6d22 2929 0a20 2020 2020 2020  up("m")).       
+00016a40: 2020 2020 2069 6620 6e6f 7420 7661 6c75       if not valu
+00016a50: 652e 6772 6f75 7028 2273 2229 2069 7320  e.group("s") is 
+00016a60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00016a70: 2020 2020 2020 7320 3d20 696e 7428 7661        s = int(va
+00016a80: 6c75 652e 6772 6f75 7028 2273 2229 290a  lue.group("s")).
+00016a90: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00016aa0: 616c 7565 2e67 726f 7570 2822 6422 2920  alue.group("d") 
+00016ab0: 3d3d 2022 706d 2220 616e 6420 3020 3c20  == "pm" and 0 < 
+00016ac0: 6820 3c20 3132 3a0a 2020 2020 2020 2020  h < 12:.        
+00016ad0: 2020 2020 2020 2020 6820 2b3d 2031 320a          h += 12.
+00016ae0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00016af0: 616c 7565 2e67 726f 7570 2822 6422 2920  alue.group("d") 
+00016b00: 3d3d 2022 616d 2220 616e 6420 6820 3d3d  == "am" and h ==
+00016b10: 2031 323a 0a20 2020 2020 2020 2020 2020   12:.           
+00016b20: 2020 2020 2068 203d 2030 0a20 2020 2020       h = 0.     
+00016b30: 2020 2020 2020 2069 6620 6e6f 7420 2868         if not (h
+00016b40: 2069 6e20 7261 6e67 6528 3234 2920 616e   in range(24) an
+00016b50: 6420 6d20 696e 2072 616e 6765 2836 3029  d m in range(60)
+00016b60: 2061 6e64 2073 2069 6e20 7261 6e67 6528   and s in range(
+00016b70: 3630 2929 3a0a 2020 2020 2020 2020 2020  60)):.          
+00016b80: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+00016b90: 6545 7272 6f72 280a 2020 2020 2020 2020  eError(.        
+00016ba0: 2020 2020 2020 2020 2020 2020 2248 6f75              "Hou
+00016bb0: 7273 206f 7220 6d69 6e75 7465 7320 6f72  rs or minutes or
+00016bc0: 2073 6563 6f6e 6473 2061 7265 206f 7574   seconds are out
+00016bd0: 7369 6465 206f 6620 616c 6c6f 7765 6420  side of allowed 
+00016be0: 7261 6e67 6522 0a20 2020 2020 2020 2020  range".         
+00016bf0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00016c00: 2020 2020 2076 616c 7565 203d 2064 6174       value = dat
+00016c10: 6574 696d 652e 7469 6d65 2868 2c20 6d2c  etime.time(h, m,
+00016c20: 2073 290a 2020 2020 2020 2020 2020 2020   s).            
+00016c30: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
+00016c40: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00016c50: 7074 696f 6e3a 0a20 2020 2020 2020 2020  ption:.         
+00016c60: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+00016c70: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+00016c80: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+00016c90: 726f 725f 6d65 7373 6167 6529 290a 0a0a  ror_message))...
+00016ca0: 2320 4120 5554 4320 636c 6173 732e 0a63  # A UTC class..c
+00016cb0: 6c61 7373 2055 5443 2864 6174 6574 696d  lass UTC(datetim
+00016cc0: 652e 747a 696e 666f 293a 0a20 2020 2022  e.tzinfo):.    "
+00016cd0: 2222 5554 4322 2222 0a0a 2020 2020 5a45  ""UTC"""..    ZE
+00016ce0: 524f 203d 2064 6174 6574 696d 652e 7469  RO = datetime.ti
+00016cf0: 6d65 6465 6c74 6128 3029 0a0a 2020 2020  medelta(0)..    
+00016d00: 6465 6620 7574 636f 6666 7365 7428 7365  def utcoffset(se
+00016d10: 6c66 2c20 6474 293a 0a20 2020 2020 2020  lf, dt):.       
+00016d20: 2072 6574 7572 6e20 5554 432e 5a45 524f   return UTC.ZERO
+00016d30: 0a0a 2020 2020 6465 6620 747a 6e61 6d65  ..    def tzname
+00016d40: 2873 656c 662c 2064 7429 3a0a 2020 2020  (self, dt):.    
+00016d50: 2020 2020 7265 7475 726e 2022 5554 4322      return "UTC"
+00016d60: 0a0a 2020 2020 6465 6620 6473 7428 7365  ..    def dst(se
+00016d70: 6c66 2c20 6474 293a 0a20 2020 2020 2020  lf, dt):.       
+00016d80: 2072 6574 7572 6e20 5554 432e 5a45 524f   return UTC.ZERO
+00016d90: 0a0a 0a75 7463 203d 2055 5443 2829 0a0a  ...utc = UTC()..
+00016da0: 0a63 6c61 7373 2049 535f 4441 5445 2856  .class IS_DATE(V
+00016db0: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
+00016dc0: 2222 0a20 2020 2045 7861 6d70 6c65 733a  "".    Examples:
+00016dd0: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
+00016de0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+00016df0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+00016e00: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+00016e10: 2072 6571 7569 7265 733d 4953 5f44 4154   requires=IS_DAT
+00016e20: 4528 2929 0a0a 2020 2020 6461 7465 2068  E())..    date h
+00016e30: 6173 2074 6f20 6265 2069 6e20 7468 6520  as to be in the 
+00016e40: 4953 4f38 3936 3020 666f 726d 6174 2059  ISO8960 format Y
+00016e50: 5959 592d 4d4d 2d44 440a 2020 2020 2222  YYY-MM-DD.    ""
+00016e60: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
+00016e70: 745f 5f28 7365 6c66 2c20 666f 726d 6174  t__(self, format
+00016e80: 3d22 2559 2d25 6d2d 2564 222c 2065 7272  ="%Y-%m-%d", err
+00016e90: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
+00016ea0: 7220 6461 7465 2061 7320 2528 666f 726d  r date as %(form
+00016eb0: 6174 2973 2229 3a0a 2020 2020 2020 2020  at)s"):.        
+00016ec0: 7365 6c66 2e66 6f72 6d61 7420 3d20 7365  self.format = se
+00016ed0: 6c66 2e74 7261 6e73 6c61 746f 7228 666f  lf.translator(fo
+00016ee0: 726d 6174 290a 2020 2020 2020 2020 7365  rmat).        se
+00016ef0: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+00016f00: 203d 2073 7472 2865 7272 6f72 5f6d 6573   = str(error_mes
+00016f10: 7361 6765 290a 2020 2020 2020 2020 7365  sage).        se
+00016f20: 6c66 2e65 7874 7265 6d65 7320 3d20 7b7d  lf.extremes = {}
+00016f30: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
+00016f40: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+00016f50: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
+00016f60: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00016f70: 7374 616e 6365 2876 616c 7565 2c20 6461  stance(value, da
+00016f80: 7465 7469 6d65 2e64 6174 6529 3a0a 2020  tetime.date):.  
+00016f90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00016fa0: 2076 616c 7565 0a20 2020 2020 2020 2074   value.        t
+00016fb0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00016fc0: 2879 2c20 6d2c 2064 2c20 6868 2c20 6d6d  (y, m, d, hh, mm
+00016fd0: 2c20 7373 2c20 7430 2c20 7431 2c20 7432  , ss, t0, t1, t2
+00016fe0: 2920 3d20 7469 6d65 2e73 7472 7074 696d  ) = time.strptim
+00016ff0: 6528 7661 6c75 652c 2073 7472 2873 656c  e(value, str(sel
+00017000: 662e 666f 726d 6174 2929 0a20 2020 2020  f.format)).     
+00017010: 2020 2020 2020 2076 616c 7565 203d 2064         value = d
+00017020: 6174 6574 696d 652e 6461 7465 2879 2c20  atetime.date(y, 
+00017030: 6d2c 2064 290a 2020 2020 2020 2020 2020  m, d).          
+00017040: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+00017050: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+00017060: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017070: 6578 7472 656d 6573 2e75 7064 6174 6528  extremes.update(
+00017080: 4953 5f44 4154 4554 494d 452e 6e69 6365  IS_DATETIME.nice
+00017090: 2873 656c 662e 666f 726d 6174 2929 0a20  (self.format)). 
+000170a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000170b0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+000170c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+000170d0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+000170e0: 6167 6529 2025 2073 656c 662e 6578 7472  age) % self.extr
+000170f0: 656d 6573 290a 0a20 2020 2064 6566 2066  emes)..    def f
+00017100: 6f72 6d61 7474 6572 2873 656c 662c 2076  ormatter(self, v
+00017110: 616c 7565 293a 0a20 2020 2020 2020 2069  alue):.        i
+00017120: 6620 7661 6c75 6520 6973 204e 6f6e 6520  f value is None 
+00017130: 6f72 2076 616c 7565 203d 3d20 2222 3a0a  or value == "":.
+00017140: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017150: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+00017160: 666f 726d 6174 203d 2073 656c 662e 666f  format = self.fo
+00017170: 726d 6174 0a20 2020 2020 2020 2079 6561  rmat.        yea
+00017180: 7220 3d20 7661 6c75 652e 7965 6172 0a20  r = value.year. 
+00017190: 2020 2020 2020 2079 203d 2022 252e 3469         y = "%.4i
+000171a0: 2220 2520 7965 6172 0a20 2020 2020 2020  " % year.       
+000171b0: 2066 6f72 6d61 7420 3d20 666f 726d 6174   format = format
+000171c0: 2e72 6570 6c61 6365 2822 2579 222c 2079  .replace("%y", y
+000171d0: 5b2d 323a 5d29 0a20 2020 2020 2020 2066  [-2:]).        f
+000171e0: 6f72 6d61 7420 3d20 666f 726d 6174 2e72  ormat = format.r
+000171f0: 6570 6c61 6365 2822 2559 222c 2079 290a  eplace("%Y", y).
+00017200: 2020 2020 2020 2020 6966 2079 6561 7220          if year 
+00017210: 3c20 3139 3030 3a0a 2020 2020 2020 2020  < 1900:.        
+00017220: 2020 2020 7965 6172 203d 2032 3030 300a      year = 2000.
+00017230: 2020 2020 2020 2020 6420 3d20 6461 7465          d = date
+00017240: 7469 6d65 2e64 6174 6528 7965 6172 2c20  time.date(year, 
+00017250: 7661 6c75 652e 6d6f 6e74 682c 2076 616c  value.month, val
+00017260: 7565 2e64 6179 290a 2020 2020 2020 2020  ue.day).        
+00017270: 7265 7475 726e 2064 2e73 7472 6674 696d  return d.strftim
+00017280: 6528 666f 726d 6174 290a 0a0a 636c 6173  e(format)...clas
+00017290: 7320 4953 5f44 4154 4554 494d 4528 5661  s IS_DATETIME(Va
+000172a0: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
+000172b0: 220a 2020 2020 4578 616d 706c 6573 3a0a  ".    Examples:.
+000172c0: 2020 2020 2020 2020 5573 6520 6173 3a3a          Use as::
+000172d0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
+000172e0: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
+000172f0: 2c20 5f6e 616d 653d 276e 616d 6527 2c20  , _name='name', 
+00017300: 7265 7175 6972 6573 3d49 535f 4441 5445  requires=IS_DATE
+00017310: 5449 4d45 2829 290a 0a20 2020 2064 6174  TIME())..    dat
+00017320: 6574 696d 6520 6861 7320 746f 2062 6520  etime has to be 
+00017330: 696e 2074 6865 2049 534f 3839 3630 2066  in the ISO8960 f
+00017340: 6f72 6d61 7420 5959 5959 2d4d 4d2d 4444  ormat YYYY-MM-DD
+00017350: 2068 683a 6d6d 3a73 730a 2020 2020 7469   hh:mm:ss.    ti
+00017360: 6d65 7a6f 6d65 206d 7573 7420 6265 204e  mezome must be N
+00017370: 6f6e 6520 6f72 2061 2070 7974 7a2e 7469  one or a pytz.ti
+00017380: 6d65 7a6f 6e65 2822 416d 6572 6963 612f  mezone("America/
+00017390: 4368 6963 6167 6f22 2920 6f62 6a65 6374  Chicago") object
+000173a0: 0a20 2020 2022 2222 0a0a 2020 2020 6973  .    """..    is
+000173b0: 6f64 6174 6574 696d 6520 3d20 2225 592d  odatetime = "%Y-
+000173c0: 256d 2d25 6420 2548 3a25 4d3a 2553 220a  %m-%d %H:%M:%S".
+000173d0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+000173e0: 6f64 0a20 2020 2064 6566 206e 6963 6528  od.    def nice(
+000173f0: 666f 726d 6174 293a 0a20 2020 2020 2020  format):.       
+00017400: 2063 6f64 6520 3d20 280a 2020 2020 2020   code = (.      
+00017410: 2020 2020 2020 2822 2559 222c 2022 3139        ("%Y", "19
+00017420: 3633 2229 2c0a 2020 2020 2020 2020 2020  63"),.          
+00017430: 2020 2822 2579 222c 2022 3633 2229 2c0a    ("%y", "63"),.
+00017440: 2020 2020 2020 2020 2020 2020 2822 2564              ("%d
+00017450: 222c 2022 3238 2229 2c0a 2020 2020 2020  ", "28"),.      
+00017460: 2020 2020 2020 2822 256d 222c 2022 3038        ("%m", "08
+00017470: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+00017480: 2822 2562 222c 2022 4175 6722 292c 0a20  ("%b", "Aug"),. 
+00017490: 2020 2020 2020 2020 2020 2028 2225 4222             ("%B"
+000174a0: 2c20 2241 7567 7573 7422 292c 0a20 2020  , "August"),.   
+000174b0: 2020 2020 2020 2020 2028 2225 4822 2c20           ("%H", 
+000174c0: 2231 3422 292c 0a20 2020 2020 2020 2020  "14"),.         
+000174d0: 2020 2028 2225 4922 2c20 2230 3222 292c     ("%I", "02"),
+000174e0: 0a20 2020 2020 2020 2020 2020 2028 2225  .            ("%
+000174f0: 7022 2c20 2250 4d22 292c 0a20 2020 2020  p", "PM"),.     
+00017500: 2020 2020 2020 2028 2225 4d22 2c20 2233         ("%M", "3
+00017510: 3022 292c 0a20 2020 2020 2020 2020 2020  0"),.           
+00017520: 2028 2225 5322 2c20 2235 3922 292c 0a20   ("%S", "59"),. 
+00017530: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00017540: 2066 6f72 2061 2c20 6220 696e 2063 6f64   for a, b in cod
+00017550: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+00017560: 6f72 6d61 7420 3d20 666f 726d 6174 2e72  ormat = format.r
+00017570: 6570 6c61 6365 2861 2c20 6229 0a20 2020  eplace(a, b).   
+00017580: 2020 2020 2072 6574 7572 6e20 6469 6374       return dict
+00017590: 2866 6f72 6d61 743d 666f 726d 6174 290a  (format=format).
+000175a0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+000175b0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+000175c0: 0a20 2020 2020 2020 2066 6f72 6d61 743d  .        format=
+000175d0: 2225 592d 256d 2d25 6420 2548 3a25 4d3a  "%Y-%m-%d %H:%M:
+000175e0: 2553 222c 0a20 2020 2020 2020 2065 7272  %S",.        err
+000175f0: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
+00017600: 7220 6461 7465 2061 6e64 2074 696d 6520  r date and time 
+00017610: 6173 2025 2866 6f72 6d61 7429 7322 2c0a  as %(format)s",.
+00017620: 2020 2020 2020 2020 7469 6d65 7a6f 6e65          timezone
+00017630: 3d4e 6f6e 652c 0a20 2020 2029 3a0a 2020  =None,.    ):.  
+00017640: 2020 2020 2020 7365 6c66 2e66 6f72 6d61        self.forma
+00017650: 7420 3d20 7365 6c66 2e74 7261 6e73 6c61  t = self.transla
+00017660: 746f 7228 666f 726d 6174 290a 2020 2020  tor(format).    
+00017670: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+00017680: 6573 7361 6765 203d 2073 7472 2865 7272  essage = str(err
+00017690: 6f72 5f6d 6573 7361 6765 290a 2020 2020  or_message).    
+000176a0: 2020 2020 7365 6c66 2e65 7874 7265 6d65      self.extreme
+000176b0: 7320 3d20 7b7d 0a20 2020 2020 2020 2073  s = {}.        s
+000176c0: 656c 662e 7469 6d65 7a6f 6e65 203d 2074  elf.timezone = t
+000176d0: 696d 657a 6f6e 650a 0a20 2020 2064 6566  imezone..    def
+000176e0: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
+000176f0: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
+00017700: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00017710: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+00017720: 6c75 652c 2064 6174 6574 696d 652e 6461  lue, datetime.da
+00017730: 7465 7469 6d65 293a 0a20 2020 2020 2020  tetime):.       
+00017740: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+00017750: 650a 2020 2020 2020 2020 7472 793a 0a20  e.        try:. 
+00017760: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00017770: 6c66 2e66 6f72 6d61 7420 3d3d 2073 656c  lf.format == sel
+00017780: 662e 6973 6f64 6174 6574 696d 653a 0a20  f.isodatetime:. 
+00017790: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+000177a0: 616c 7565 203d 2076 616c 7565 2e72 6570  alue = value.rep
+000177b0: 6c61 6365 2822 5422 2c20 2220 2229 0a20  lace("T", " "). 
+000177c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000177d0: 6620 6c65 6e28 7661 6c75 6529 203d 3d20  f len(value) == 
+000177e0: 3136 3a0a 2020 2020 2020 2020 2020 2020  16:.            
+000177f0: 2020 2020 2020 2020 7661 6c75 6520 2b3d          value +=
+00017800: 2022 3a30 3022 0a20 2020 2020 2020 2020   ":00".         
+00017810: 2020 2028 792c 206d 2c20 642c 2068 682c     (y, m, d, hh,
+00017820: 206d 6d2c 2073 732c 2074 302c 2074 312c   mm, ss, t0, t1,
+00017830: 2074 3229 203d 2074 696d 652e 7374 7270   t2) = time.strp
+00017840: 7469 6d65 2876 616c 7565 2c20 7374 7228  time(value, str(
+00017850: 7365 6c66 2e66 6f72 6d61 7429 290a 2020  self.format)).  
+00017860: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
+00017870: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
+00017880: 696d 6528 792c 206d 2c20 642c 2068 682c  ime(y, m, d, hh,
+00017890: 206d 6d2c 2073 7329 0a20 2020 2020 2020   mm, ss).       
+000178a0: 2020 2020 2069 6620 7365 6c66 2e74 696d       if self.tim
+000178b0: 657a 6f6e 6520 6973 206e 6f74 204e 6f6e  ezone is not Non
+000178c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000178d0: 2020 2023 2054 4f44 4f3a 2068 7474 7073     # TODO: https
+000178e0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7765  ://github.com/we
+000178f0: 6232 7079 2f77 6562 3270 792f 6973 7375  b2py/web2py/issu
+00017900: 6573 2f31 3039 3420 2874 656d 706f 7261  es/1094 (tempora
+00017910: 7279 2073 6f6c 7574 696f 6e29 0a20 2020  ry solution).   
+00017920: 2020 2020 2020 2020 2020 2020 2076 616c               val
+00017930: 7565 203d 2028 0a20 2020 2020 2020 2020  ue = (.         
+00017940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017950: 7469 6d65 7a6f 6e65 2e6c 6f63 616c 697a  timezone.localiz
+00017960: 6528 7661 6c75 6529 2e61 7374 696d 657a  e(value).astimez
+00017970: 6f6e 6528 7574 6329 2e72 6570 6c61 6365  one(utc).replace
+00017980: 2874 7a69 6e66 6f3d 4e6f 6e65 290a 2020  (tzinfo=None).  
+00017990: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+000179a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000179b0: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
+000179c0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+000179d0: 2020 2020 2073 656c 662e 6578 7472 656d       self.extrem
+000179e0: 6573 2e75 7064 6174 6528 4953 5f44 4154  es.update(IS_DAT
+000179f0: 4554 494d 452e 6e69 6365 2873 656c 662e  ETIME.nice(self.
+00017a00: 666f 726d 6174 2929 0a20 2020 2020 2020  format)).       
+00017a10: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00017a20: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
+00017a30: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
+00017a40: 6572 726f 725f 6d65 7373 6167 6529 2025  error_message) %
+00017a50: 2073 656c 662e 6578 7472 656d 6573 290a   self.extremes).
+00017a60: 0a20 2020 2064 6566 2066 6f72 6d61 7474  .    def formatt
+00017a70: 6572 2873 656c 662c 2076 616c 7565 293a  er(self, value):
+00017a80: 0a20 2020 2020 2020 2069 6620 7661 6c75  .        if valu
+00017a90: 6520 6973 204e 6f6e 6520 6f72 2076 616c  e is None or val
+00017aa0: 7565 203d 3d20 2222 3a0a 2020 2020 2020  ue == "":.      
+00017ab0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00017ac0: 650a 2020 2020 2020 2020 666f 726d 6174  e.        format
+00017ad0: 203d 2073 656c 662e 666f 726d 6174 0a20   = self.format. 
+00017ae0: 2020 2020 2020 2079 6561 7220 3d20 7661         year = va
+00017af0: 6c75 652e 7965 6172 0a20 2020 2020 2020  lue.year.       
+00017b00: 2079 203d 2022 252e 3469 2220 2520 7965   y = "%.4i" % ye
+00017b10: 6172 0a20 2020 2020 2020 2066 6f72 6d61  ar.        forma
+00017b20: 7420 3d20 666f 726d 6174 2e72 6570 6c61  t = format.repla
+00017b30: 6365 2822 2579 222c 2079 5b2d 323a 5d29  ce("%y", y[-2:])
+00017b40: 0a20 2020 2020 2020 2066 6f72 6d61 7420  .        format 
+00017b50: 3d20 666f 726d 6174 2e72 6570 6c61 6365  = format.replace
+00017b60: 2822 2559 222c 2079 290a 2020 2020 2020  ("%Y", y).      
+00017b70: 2020 6966 2079 6561 7220 3c20 3139 3030    if year < 1900
+00017b80: 3a0a 2020 2020 2020 2020 2020 2020 7965  :.            ye
+00017b90: 6172 203d 2032 3030 300a 2020 2020 2020  ar = 2000.      
+00017ba0: 2020 6420 3d20 6461 7465 7469 6d65 2e64    d = datetime.d
+00017bb0: 6174 6574 696d 6528 0a20 2020 2020 2020  atetime(.       
+00017bc0: 2020 2020 2079 6561 722c 2076 616c 7565       year, value
+00017bd0: 2e6d 6f6e 7468 2c20 7661 6c75 652e 6461  .month, value.da
+00017be0: 792c 2076 616c 7565 2e68 6f75 722c 2076  y, value.hour, v
+00017bf0: 616c 7565 2e6d 696e 7574 652c 2076 616c  alue.minute, val
+00017c00: 7565 2e73 6563 6f6e 640a 2020 2020 2020  ue.second.      
+00017c10: 2020 290a 2020 2020 2020 2020 6966 2073    ).        if s
+00017c20: 656c 662e 7469 6d65 7a6f 6e65 2069 7320  elf.timezone is 
+00017c30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00017c40: 2020 2020 2020 6420 3d20 642e 7265 706c        d = d.repl
+00017c50: 6163 6528 747a 696e 666f 3d75 7463 292e  ace(tzinfo=utc).
+00017c60: 6173 7469 6d65 7a6f 6e65 2873 656c 662e  astimezone(self.
+00017c70: 7469 6d65 7a6f 6e65 290a 2020 2020 2020  timezone).      
+00017c80: 2020 7265 7475 726e 2064 2e73 7472 6674    return d.strft
+00017c90: 696d 6528 666f 726d 6174 290a 0a0a 636c  ime(format)...cl
+00017ca0: 6173 7320 4953 5f44 4154 455f 494e 5f52  ass IS_DATE_IN_R
+00017cb0: 414e 4745 2849 535f 4441 5445 293a 0a20  ANGE(IS_DATE):. 
+00017cc0: 2020 2022 2222 0a20 2020 2045 7861 6d70     """.    Examp
+00017cd0: 6c65 733a 0a20 2020 2020 2020 2055 7365  les:.        Use
+00017ce0: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
+00017cf0: 2020 203e 3e3e 2076 203d 2049 535f 4441     >>> v = IS_DA
+00017d00: 5445 5f49 4e5f 5241 4e47 4528 6d69 6e69  TE_IN_RANGE(mini
+00017d10: 6d75 6d3d 6461 7465 7469 6d65 2e64 6174  mum=datetime.dat
+00017d20: 6528 3230 3038 2c31 2c31 292c 205c 0a20  e(2008,1,1), \. 
+00017d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d50: 2020 2020 6d61 7869 6d75 6d3d 6461 7465      maximum=date
+00017d60: 7469 6d65 2e64 6174 6528 3230 3039 2c31  time.date(2009,1
+00017d70: 322c 3331 292c 205c 0a20 2020 2020 2020  2,31), \.       
+00017d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d90: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00017da0: 726d 6174 3d22 256d 2f25 642f 2559 222c  rmat="%m/%d/%Y",
+00017db0: 6572 726f 725f 6d65 7373 6167 653d 224f  error_message="O
+00017dc0: 6f70 7322 290a 0a20 2020 2020 2020 2020  ops")..         
+00017dd0: 2020 203e 3e3e 2076 2827 3033 2f30 332f     >>> v('03/03/
+00017de0: 3230 3038 2729 0a20 2020 2020 2020 2020  2008').         
+00017df0: 2020 2028 6461 7465 7469 6d65 2e64 6174     (datetime.dat
+00017e00: 6528 3230 3038 2c20 332c 2033 292c 204e  e(2008, 3, 3), N
+00017e10: 6f6e 6529 0a0a 2020 2020 2020 2020 2020  one)..          
+00017e20: 2020 3e3e 3e20 7628 2730 332f 3033 2f32    >>> v('03/03/2
+00017e30: 3031 3027 290a 2020 2020 2020 2020 2020  010').          
+00017e40: 2020 2827 3033 2f30 332f 3230 3130 272c    ('03/03/2010',
+00017e50: 2027 6f6f 7073 2729 0a0a 2020 2020 2020   'oops')..      
+00017e60: 2020 2020 2020 3e3e 3e20 7628 6461 7465        >>> v(date
+00017e70: 7469 6d65 2e64 6174 6528 3230 3038 2c33  time.date(2008,3
+00017e80: 2c33 2929 0a20 2020 2020 2020 2020 2020  ,3)).           
+00017e90: 2028 6461 7465 7469 6d65 2e64 6174 6528   (datetime.date(
+00017ea0: 3230 3038 2c20 332c 2033 292c 204e 6f6e  2008, 3, 3), Non
+00017eb0: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+00017ec0: 3e3e 3e20 7628 6461 7465 7469 6d65 2e64  >>> v(datetime.d
+00017ed0: 6174 6528 3230 3130 2c33 2c33 2929 0a20  ate(2010,3,3)). 
+00017ee0: 2020 2020 2020 2020 2020 2028 6461 7465             (date
+00017ef0: 7469 6d65 2e64 6174 6528 3230 3130 2c20  time.date(2010, 
+00017f00: 332c 2033 292c 2027 6f6f 7073 2729 0a0a  3, 3), 'oops')..
+00017f10: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
+00017f20: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
+00017f30: 2020 2073 656c 662c 206d 696e 696d 756d     self, minimum
+00017f40: 3d4e 6f6e 652c 206d 6178 696d 756d 3d4e  =None, maximum=N
+00017f50: 6f6e 652c 2066 6f72 6d61 743d 2225 592d  one, format="%Y-
+00017f60: 256d 2d25 6422 2c20 6572 726f 725f 6d65  %m-%d", error_me
+00017f70: 7373 6167 653d 4e6f 6e65 0a20 2020 2029  ssage=None.    )
+00017f80: 3a0a 2020 2020 2020 2020 7365 6c66 2e6d  :.        self.m
+00017f90: 696e 696d 756d 203d 206d 696e 696d 756d  inimum = minimum
+00017fa0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00017fb0: 7869 6d75 6d20 3d20 6d61 7869 6d75 6d0a  ximum = maximum.
+00017fc0: 2020 2020 2020 2020 6966 2065 7272 6f72          if error
+00017fd0: 5f6d 6573 7361 6765 2069 7320 4e6f 6e65  _message is None
+00017fe0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00017ff0: 206d 696e 696d 756d 2069 7320 4e6f 6e65   minimum is None
+00018000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018010: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
+00018020: 3d20 2245 6e74 6572 2064 6174 6520 6f6e  = "Enter date on
+00018030: 206f 7220 6265 666f 7265 2025 286d 6178   or before %(max
+00018040: 2973 220a 2020 2020 2020 2020 2020 2020  )s".            
+00018050: 656c 6966 206d 6178 696d 756d 2069 7320  elif maximum is 
+00018060: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00018070: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
+00018080: 6167 6520 3d20 2245 6e74 6572 2064 6174  age = "Enter dat
+00018090: 6520 6f6e 206f 7220 6166 7465 7220 2528  e on or after %(
+000180a0: 6d69 6e29 7322 0a20 2020 2020 2020 2020  min)s".         
+000180b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000180c0: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
+000180d0: 6573 7361 6765 203d 2022 456e 7465 7220  essage = "Enter 
+000180e0: 6461 7465 2069 6e20 7261 6e67 6520 2528  date in range %(
+000180f0: 6d69 6e29 7320 2528 6d61 7829 7322 0a20  min)s %(max)s". 
+00018100: 2020 2020 2020 2049 535f 4441 5445 2e5f         IS_DATE._
+00018110: 5f69 6e69 745f 5f28 7365 6c66 2c20 666f  _init__(self, fo
+00018120: 726d 6174 3d66 6f72 6d61 742c 2065 7272  rmat=format, err
+00018130: 6f72 5f6d 6573 7361 6765 3d65 7272 6f72  or_message=error
+00018140: 5f6d 6573 7361 6765 290a 2020 2020 2020  _message).      
+00018150: 2020 7365 6c66 2e65 7874 7265 6d65 7320    self.extremes 
+00018160: 3d20 6469 6374 286d 696e 3d73 656c 662e  = dict(min=self.
+00018170: 666f 726d 6174 7465 7228 6d69 6e69 6d75  formatter(minimu
+00018180: 6d29 2c20 6d61 783d 7365 6c66 2e66 6f72  m), max=self.for
+00018190: 6d61 7474 6572 286d 6178 696d 756d 2929  matter(maximum))
+000181a0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
+000181b0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+000181c0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
+000181d0: 0a20 2020 2020 2020 2076 616c 7565 203d  .        value =
+000181e0: 2049 535f 4441 5445 2e76 616c 6964 6174   IS_DATE.validat
+000181f0: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00018200: 6563 6f72 645f 6964 3d4e 6f6e 6529 0a20  ecord_id=None). 
+00018210: 2020 2020 2020 2069 6620 7365 6c66 2e6d         if self.m
+00018220: 696e 696d 756d 2061 6e64 2073 656c 662e  inimum and self.
+00018230: 6d69 6e69 6d75 6d20 3e20 7661 6c75 653a  minimum > value:
+00018240: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00018250: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00018260: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+00018270: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+00018280: 7373 6167 6529 2025 2073 656c 662e 6578  ssage) % self.ex
+00018290: 7472 656d 6573 290a 2020 2020 2020 2020  tremes).        
+000182a0: 6966 2073 656c 662e 6d61 7869 6d75 6d20  if self.maximum 
+000182b0: 616e 6420 7661 6c75 6520 3e20 7365 6c66  and value > self
+000182c0: 2e6d 6178 696d 756d 3a0a 2020 2020 2020  .maximum:.      
+000182d0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+000182e0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
+000182f0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+00018300: 2e65 7272 6f72 5f6d 6573 7361 6765 2920  .error_message) 
+00018310: 2520 7365 6c66 2e65 7874 7265 6d65 7329  % self.extremes)
+00018320: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00018330: 7661 6c75 650a 0a0a 636c 6173 7320 4953  value...class IS
+00018340: 5f44 4154 4554 494d 455f 494e 5f52 414e  _DATETIME_IN_RAN
+00018350: 4745 2849 535f 4441 5445 5449 4d45 293a  GE(IS_DATETIME):
+00018360: 0a20 2020 2022 2222 0a20 2020 2045 7861  .    """.    Exa
+00018370: 6d70 6c65 733a 0a20 2020 2020 2020 2055  mples:.        U
+00018380: 7365 2061 733a 3a0a 2020 2020 2020 2020  se as::.        
+00018390: 2020 2020 3e3e 3e20 7620 3d20 4953 5f44      >>> v = IS_D
+000183a0: 4154 4554 494d 455f 494e 5f52 414e 4745  ATETIME_IN_RANGE
+000183b0: 285c 0a20 2020 2020 2020 2020 2020 2020  (\.             
+000183c0: 2020 2020 2020 206d 696e 696d 756d 3d64         minimum=d
+000183d0: 6174 6574 696d 652e 6461 7465 7469 6d65  atetime.datetime
+000183e0: 2832 3030 382c 312c 312c 3132 2c32 3029  (2008,1,1,12,20)
+000183f0: 2c20 5c0a 2020 2020 2020 2020 2020 2020  , \.            
+00018400: 2020 2020 2020 2020 6d61 7869 6d75 6d3d          maximum=
+00018410: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+00018420: 6528 3230 3039 2c31 322c 3331 2c31 322c  e(2009,12,31,12,
+00018430: 3230 292c 205c 0a20 2020 2020 2020 2020  20), \.         
+00018440: 2020 2020 2020 2020 2020 2066 6f72 6d61             forma
+00018450: 743d 2225 6d2f 2564 2f25 5920 2548 3a25  t="%m/%d/%Y %H:%
+00018460: 4d22 2c65 7272 6f72 5f6d 6573 7361 6765  M",error_message
+00018470: 3d22 4f6f 7073 2229 0a20 2020 2020 2020  ="Oops").       
+00018480: 2020 2020 203e 3e3e 2076 2827 3033 2f30       >>> v('03/0
+00018490: 332f 3230 3038 2031 323a 3430 2729 0a20  3/2008 12:40'). 
+000184a0: 2020 2020 2020 2020 2020 2028 6461 7465             (date
+000184b0: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
+000184c0: 3038 2c20 332c 2033 2c20 3132 2c20 3430  08, 3, 3, 12, 40
+000184d0: 292c 204e 6f6e 6529 0a0a 2020 2020 2020  ), None)..      
+000184e0: 2020 2020 2020 3e3e 3e20 7628 2730 332f        >>> v('03/
+000184f0: 3033 2f32 3031 3020 3130 3a33 3427 290a  03/2010 10:34').
+00018500: 2020 2020 2020 2020 2020 2020 2827 3033              ('03
+00018510: 2f30 332f 3230 3130 2031 303a 3334 272c  /03/2010 10:34',
+00018520: 2027 6f6f 7073 2729 0a0a 2020 2020 2020   'oops')..      
+00018530: 2020 2020 2020 3e3e 3e20 7628 6461 7465        >>> v(date
+00018540: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
+00018550: 3038 2c33 2c33 2c30 2c30 2929 0a20 2020  08,3,3,0,0)).   
+00018560: 2020 2020 2020 2020 2028 6461 7465 7469           (dateti
+00018570: 6d65 2e64 6174 6574 696d 6528 3230 3038  me.datetime(2008
+00018580: 2c20 332c 2033 2c20 302c 2030 292c 204e  , 3, 3, 0, 0), N
+00018590: 6f6e 6529 0a0a 2020 2020 2020 2020 2020  one)..          
+000185a0: 2020 3e3e 3e20 7628 6461 7465 7469 6d65    >>> v(datetime
+000185b0: 2e64 6174 6574 696d 6528 3230 3130 2c33  .datetime(2010,3
+000185c0: 2c33 2c30 2c30 2929 0a20 2020 2020 2020  ,3,0,0)).       
+000185d0: 2020 2020 2028 6461 7465 7469 6d65 2e64       (datetime.d
+000185e0: 6174 6574 696d 6528 3230 3130 2c20 332c  atetime(2010, 3,
+000185f0: 2033 2c20 302c 2030 292c 2027 6f6f 7073   3, 0, 0), 'oops
+00018600: 2729 0a0a 2020 2020 2222 220a 0a20 2020  ')..    """..   
+00018610: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+00018620: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00018630: 2020 2020 206d 696e 696d 756d 3d4e 6f6e       minimum=Non
+00018640: 652c 0a20 2020 2020 2020 206d 6178 696d  e,.        maxim
+00018650: 756d 3d4e 6f6e 652c 0a20 2020 2020 2020  um=None,.       
+00018660: 2066 6f72 6d61 743d 2225 592d 256d 2d25   format="%Y-%m-%
+00018670: 6420 2548 3a25 4d3a 2553 222c 0a20 2020  d %H:%M:%S",.   
+00018680: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+00018690: 6765 3d4e 6f6e 652c 0a20 2020 2020 2020  ge=None,.       
+000186a0: 2074 696d 657a 6f6e 653d 4e6f 6e65 2c0a   timezone=None,.
+000186b0: 2020 2020 293a 0a20 2020 2020 2020 2073      ):.        s
+000186c0: 656c 662e 6d69 6e69 6d75 6d20 3d20 6d69  elf.minimum = mi
+000186d0: 6e69 6d75 6d0a 2020 2020 2020 2020 7365  nimum.        se
+000186e0: 6c66 2e6d 6178 696d 756d 203d 206d 6178  lf.maximum = max
+000186f0: 696d 756d 0a20 2020 2020 2020 2069 6620  imum.        if 
+00018700: 6572 726f 725f 6d65 7373 6167 6520 6973  error_message is
+00018710: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00018720: 2020 2069 6620 6d69 6e69 6d75 6d20 6973     if minimum is
+00018730: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00018740: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+00018750: 7361 6765 203d 2022 456e 7465 7220 6461  sage = "Enter da
+00018760: 7465 2061 6e64 2074 696d 6520 6f6e 206f  te and time on o
+00018770: 7220 6265 666f 7265 2025 286d 6178 2973  r before %(max)s
+00018780: 220a 2020 2020 2020 2020 2020 2020 656c  ".            el
+00018790: 6966 206d 6178 696d 756d 2069 7320 4e6f  if maximum is No
+000187a0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000187b0: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
+000187c0: 6520 3d20 2245 6e74 6572 2064 6174 6520  e = "Enter date 
+000187d0: 616e 6420 7469 6d65 206f 6e20 6f72 2061  and time on or a
+000187e0: 6674 6572 2025 286d 696e 2973 220a 2020  fter %(min)s".  
+000187f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00018800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018810: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
+00018820: 2245 6e74 6572 2064 6174 6520 616e 6420  "Enter date and 
+00018830: 7469 6d65 2069 6e20 7261 6e67 6520 2528  time in range %(
+00018840: 6d69 6e29 7320 2528 6d61 7829 7322 0a20  min)s %(max)s". 
+00018850: 2020 2020 2020 2049 535f 4441 5445 5449         IS_DATETI
+00018860: 4d45 2e5f 5f69 6e69 745f 5f28 0a20 2020  ME.__init__(.   
+00018870: 2020 2020 2020 2020 2073 656c 662c 2066           self, f
+00018880: 6f72 6d61 743d 666f 726d 6174 2c20 6572  ormat=format, er
+00018890: 726f 725f 6d65 7373 6167 653d 6572 726f  ror_message=erro
+000188a0: 725f 6d65 7373 6167 652c 2074 696d 657a  r_message, timez
+000188b0: 6f6e 653d 7469 6d65 7a6f 6e65 0a20 2020  one=timezone.   
+000188c0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+000188d0: 656c 662e 6578 7472 656d 6573 203d 2064  elf.extremes = d
+000188e0: 6963 7428 6d69 6e3d 7365 6c66 2e66 6f72  ict(min=self.for
+000188f0: 6d61 7474 6572 286d 696e 696d 756d 292c  matter(minimum),
+00018900: 206d 6178 3d73 656c 662e 666f 726d 6174   max=self.format
+00018910: 7465 7228 6d61 7869 6d75 6d29 290a 0a20  ter(maximum)).. 
+00018920: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+00018930: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+00018940: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+00018950: 2020 2020 2020 7661 6c75 6520 3d20 4953        value = IS
+00018960: 5f44 4154 4554 494d 452e 7661 6c69 6461  _DATETIME.valida
+00018970: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
+00018980: 7265 636f 7264 5f69 643d 4e6f 6e65 290a  record_id=None).
+00018990: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000189a0: 6d69 6e69 6d75 6d20 616e 6420 7365 6c66  minimum and self
+000189b0: 2e6d 696e 696d 756d 203e 2076 616c 7565  .minimum > value
+000189c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+000189d0: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+000189e0: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
+000189f0: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
+00018a00: 6573 7361 6765 2920 2520 7365 6c66 2e65  essage) % self.e
+00018a10: 7874 7265 6d65 7329 0a20 2020 2020 2020  xtremes).       
+00018a20: 2069 6620 7365 6c66 2e6d 6178 696d 756d   if self.maximum
+00018a30: 2061 6e64 2076 616c 7565 203e 2073 656c   and value > sel
+00018a40: 662e 6d61 7869 6d75 6d3a 0a20 2020 2020  f.maximum:.     
+00018a50: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00018a60: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
+00018a70: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+00018a80: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+00018a90: 2025 2073 656c 662e 6578 7472 656d 6573   % self.extremes
+00018aa0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00018ab0: 2076 616c 7565 0a0a 0a63 6c61 7373 2049   value...class I
+00018ac0: 535f 4c49 5354 5f4f 4628 5661 6c69 6461  S_LIST_OF(Valida
+00018ad0: 746f 7229 3a0a 2020 2020 6465 6620 5f5f  tor):.    def __
+00018ae0: 696e 6974 5f5f 2873 656c 662c 206f 7468  init__(self, oth
+00018af0: 6572 3d4e 6f6e 652c 206d 696e 696d 756d  er=None, minimum
+00018b00: 3d4e 6f6e 652c 206d 6178 696d 756d 3d4e  =None, maximum=N
+00018b10: 6f6e 652c 2065 7272 6f72 5f6d 6573 7361  one, error_messa
+00018b20: 6765 3d4e 6f6e 6529 3a0a 2020 2020 2020  ge=None):.      
+00018b30: 2020 7365 6c66 2e6f 7468 6572 203d 206f    self.other = o
+00018b40: 7468 6572 0a20 2020 2020 2020 2073 656c  ther.        sel
+00018b50: 662e 6d69 6e69 6d75 6d20 3d20 6d69 6e69  f.minimum = mini
+00018b60: 6d75 6d0a 2020 2020 2020 2020 7365 6c66  mum.        self
+00018b70: 2e6d 6178 696d 756d 203d 206d 6178 696d  .maximum = maxim
+00018b80: 756d 0a20 2020 2020 2020 2073 656c 662e  um.        self.
+00018b90: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
+00018ba0: 6572 726f 725f 6d65 7373 6167 650a 0a20  error_message.. 
+00018bb0: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+00018bc0: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+00018bd0: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+00018be0: 2020 2020 2020 6976 616c 7565 203d 2076        ivalue = v
+00018bf0: 616c 7565 0a20 2020 2020 2020 2069 6620  alue.        if 
+00018c00: 6e6f 7420 6973 696e 7374 616e 6365 2876  not isinstance(v
+00018c10: 616c 7565 2c20 6c69 7374 293a 0a20 2020  alue, list):.   
+00018c20: 2020 2020 2020 2020 2069 7661 6c75 6520           ivalue 
+00018c30: 3d20 5b69 7661 6c75 655d 0a20 2020 2020  = [ivalue].     
+00018c40: 2020 2069 7661 6c75 6520 3d20 5b69 2066     ivalue = [i f
+00018c50: 6f72 2069 2069 6e20 6976 616c 7565 2069  or i in ivalue i
+00018c60: 6620 7374 7228 6929 2e73 7472 6970 2829  f str(i).strip()
+00018c70: 5d0a 2020 2020 2020 2020 6966 2073 656c  ].        if sel
+00018c80: 662e 6d69 6e69 6d75 6d20 6973 206e 6f74  f.minimum is not
+00018c90: 204e 6f6e 6520 616e 6420 6c65 6e28 6976   None and len(iv
+00018ca0: 616c 7565 2920 3c20 7365 6c66 2e6d 696e  alue) < self.min
+00018cb0: 696d 756d 3a0a 2020 2020 2020 2020 2020  imum:.          
+00018cc0: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+00018cd0: 6f6e 4572 726f 7228 0a20 2020 2020 2020  onError(.       
+00018ce0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+00018cf0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+00018d00: 726f 725f 6d65 7373 6167 6520 6f72 2022  ror_message or "
+00018d10: 4d69 6e69 6d75 6d20 6c65 6e67 7468 2069  Minimum length i
+00018d20: 7320 2528 6d69 6e29 7322 290a 2020 2020  s %(min)s").    
+00018d30: 2020 2020 2020 2020 2020 2020 2520 6469              % di
+00018d40: 6374 286d 696e 3d73 656c 662e 6d69 6e69  ct(min=self.mini
+00018d50: 6d75 6d2c 206d 6178 3d73 656c 662e 6d61  mum, max=self.ma
+00018d60: 7869 6d75 6d29 0a20 2020 2020 2020 2020  ximum).         
+00018d70: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
+00018d80: 7365 6c66 2e6d 6178 696d 756d 2069 7320  self.maximum is 
+00018d90: 6e6f 7420 4e6f 6e65 2061 6e64 206c 656e  not None and len
+00018da0: 2869 7661 6c75 6529 203e 2073 656c 662e  (ivalue) > self.
+00018db0: 6d61 7869 6d75 6d3a 0a20 2020 2020 2020  maximum:.       
+00018dc0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00018dd0: 6174 696f 6e45 7272 6f72 280a 2020 2020  ationError(.    
+00018de0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00018df0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+00018e00: 2e65 7272 6f72 5f6d 6573 7361 6765 206f  .error_message o
+00018e10: 7220 224d 6178 696d 756d 206c 656e 6774  r "Maximum lengt
+00018e20: 6820 6973 2025 286d 6178 2973 2229 0a20  h is %(max)s"). 
+00018e30: 2020 2020 2020 2020 2020 2020 2020 2025                 %
+00018e40: 2064 6963 7428 6d69 6e3d 7365 6c66 2e6d   dict(min=self.m
+00018e50: 696e 696d 756d 2c20 6d61 783d 7365 6c66  inimum, max=self
+00018e60: 2e6d 6178 696d 756d 290a 2020 2020 2020  .maximum).      
+00018e70: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00018e80: 6e65 775f 7661 6c75 6520 3d20 5b5d 0a20  new_value = []. 
+00018e90: 2020 2020 2020 206f 7468 6572 203d 2073         other = s
+00018ea0: 656c 662e 6f74 6865 720a 2020 2020 2020  elf.other.      
+00018eb0: 2020 6966 2073 656c 662e 6f74 6865 723a    if self.other:
+00018ec0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00018ed0: 6e6f 7420 6973 696e 7374 616e 6365 286f  not isinstance(o
+00018ee0: 7468 6572 2c20 286c 6973 742c 2074 7570  ther, (list, tup
+00018ef0: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
+00018f00: 2020 2020 2020 6f74 6865 7220 3d20 5b6f        other = [o
+00018f10: 7468 6572 5d0a 2020 2020 2020 2020 2020  ther].          
+00018f20: 2020 666f 7220 6974 656d 2069 6e20 6976    for item in iv
+00018f30: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
+00018f40: 2020 2020 2020 7620 3d20 6974 656d 0a20        v = item. 
+00018f50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00018f60: 6f72 2076 616c 6964 6174 6f72 2069 6e20  or validator in 
+00018f70: 6f74 6865 723a 0a20 2020 2020 2020 2020  other:.         
+00018f80: 2020 2020 2020 2020 2020 2076 203d 2076             v = v
+00018f90: 616c 6964 6174 6f72 5f63 616c 6c65 7228  alidator_caller(
+00018fa0: 7661 6c69 6461 746f 722c 2076 2c20 7265  validator, v, re
+00018fb0: 636f 7264 5f69 6429 0a20 2020 2020 2020  cord_id).       
+00018fc0: 2020 2020 2020 2020 206e 6577 5f76 616c           new_val
+00018fd0: 7565 2e61 7070 656e 6428 7629 0a20 2020  ue.append(v).   
+00018fe0: 2020 2020 2020 2020 2069 7661 6c75 6520           ivalue 
+00018ff0: 3d20 6e65 775f 7661 6c75 650a 2020 2020  = new_value.    
+00019000: 2020 2020 7265 7475 726e 2069 7661 6c75      return ivalu
+00019010: 650a 0a0a 636c 6173 7320 4953 5f4c 4f57  e...class IS_LOW
+00019020: 4552 2856 616c 6964 6174 6f72 293a 0a20  ER(Validator):. 
+00019030: 2020 2022 2222 0a20 2020 2043 6f6e 7665     """.    Conve
+00019040: 7274 7320 746f 206c 6f77 6572 6361 7365  rts to lowercase
+00019050: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
+00019060: 4953 5f4c 4f57 4552 2829 2827 4142 4327  IS_LOWER()('ABC'
+00019070: 290a 2020 2020 2020 2020 2827 6162 6327  ).        ('abc'
+00019080: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00019090: 3e3e 3e20 4953 5f4c 4f57 4552 2829 2827  >>> IS_LOWER()('
+000190a0: c391 2729 0a20 2020 2020 2020 2028 275c  ..').        ('\
+000190b0: 5c78 6333 5c5c 7862 3127 2c20 4e6f 6e65  \xc3\\xb1', None
+000190c0: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
+000190d0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+000190e0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+000190f0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00019100: 2020 2063 6173 745f 6261 636b 203d 206c     cast_back = l
+00019110: 616d 6264 6120 783a 2078 0a20 2020 2020  ambda x: x.     
+00019120: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00019130: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
+00019140: 2020 2020 2020 2020 2020 6361 7374 5f62            cast_b
+00019150: 6163 6b20 3d20 746f 5f6e 6174 6976 650a  ack = to_native.
+00019160: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+00019170: 6e73 7461 6e63 6528 7661 6c75 652c 2062  nstance(value, b
+00019180: 7974 6573 293a 0a20 2020 2020 2020 2020  ytes):.         
+00019190: 2020 2063 6173 745f 6261 636b 203d 2074     cast_back = t
+000191a0: 6f5f 6279 7465 730a 2020 2020 2020 2020  o_bytes.        
+000191b0: 7661 6c75 6520 3d20 746f 5f75 6e69 636f  value = to_unico
+000191c0: 6465 2876 616c 7565 292e 6c6f 7765 7228  de(value).lower(
+000191d0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000191e0: 2063 6173 745f 6261 636b 2876 616c 7565   cast_back(value
+000191f0: 290a 0a0a 636c 6173 7320 4953 5f55 5050  )...class IS_UPP
+00019200: 4552 2856 616c 6964 6174 6f72 293a 0a20  ER(Validator):. 
+00019210: 2020 2022 2222 0a20 2020 2043 6f6e 7665     """.    Conve
+00019220: 7274 7320 746f 2075 7070 6572 6361 7365  rts to uppercase
+00019230: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
+00019240: 4953 5f55 5050 4552 2829 2827 6162 6327  IS_UPPER()('abc'
+00019250: 290a 2020 2020 2020 2020 2827 4142 4327  ).        ('ABC'
+00019260: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00019270: 3e3e 3e20 4953 5f55 5050 4552 2829 2827  >>> IS_UPPER()('
+00019280: c3b1 2729 0a20 2020 2020 2020 2028 275c  ..').        ('\
+00019290: 5c78 6333 5c5c 7839 3127 2c20 4e6f 6e65  \xc3\\x91', None
+000192a0: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
+000192b0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+000192c0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+000192d0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+000192e0: 2020 2063 6173 745f 6261 636b 203d 206c     cast_back = l
+000192f0: 616d 6264 6120 783a 2078 0a20 2020 2020  ambda x: x.     
+00019300: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00019310: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
+00019320: 2020 2020 2020 2020 2020 6361 7374 5f62            cast_b
+00019330: 6163 6b20 3d20 746f 5f6e 6174 6976 650a  ack = to_native.
+00019340: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+00019350: 6e73 7461 6e63 6528 7661 6c75 652c 2062  nstance(value, b
+00019360: 7974 6573 293a 0a20 2020 2020 2020 2020  ytes):.         
+00019370: 2020 2063 6173 745f 6261 636b 203d 2074     cast_back = t
+00019380: 6f5f 6279 7465 730a 2020 2020 2020 2020  o_bytes.        
+00019390: 7661 6c75 6520 3d20 746f 5f75 6e69 636f  value = to_unico
+000193a0: 6465 2876 616c 7565 292e 7570 7065 7228  de(value).upper(
+000193b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000193c0: 2063 6173 745f 6261 636b 2876 616c 7565   cast_back(value
+000193d0: 290a 0a0a 6465 6620 7572 6c69 6679 2873  )...def urlify(s
+000193e0: 2c20 6d61 786c 656e 3d38 302c 206b 6565  , maxlen=80, kee
+000193f0: 705f 756e 6465 7273 636f 7265 733d 4661  p_underscores=Fa
+00019400: 6c73 6529 3a0a 2020 2020 2222 220a 2020  lse):.    """.  
+00019410: 2020 436f 6e76 6572 7473 2069 6e63 6f6d    Converts incom
+00019420: 696e 6720 7374 7269 6e67 2074 6f20 6120  ing string to a 
+00019430: 7369 6d70 6c69 6669 6564 2041 5343 4949  simplified ASCII
+00019440: 2073 7562 7365 742e 0a20 2020 2069 6620   subset..    if 
+00019450: 286b 6565 705f 756e 6465 7273 636f 7265  (keep_underscore
+00019460: 7329 3a20 756e 6465 7273 636f 7265 7320  s): underscores 
+00019470: 6172 6520 7265 7461 696e 6564 2069 6e20  are retained in 
+00019480: 7468 6520 7374 7269 6e67 0a20 2020 2065  the string.    e
+00019490: 6c73 653a 2075 6e64 6572 7363 6f72 6573  lse: underscores
+000194a0: 2061 7265 2074 7261 6e73 6c61 7465 6420   are translated 
+000194b0: 746f 2068 7970 6865 6e73 2028 6465 6661  to hyphens (defa
+000194c0: 756c 7429 0a20 2020 2022 2222 0a20 2020  ult).    """.   
+000194d0: 2073 203d 2074 6f5f 756e 6963 6f64 6528   s = to_unicode(
+000194e0: 7329 2020 2320 746f 2075 6e69 636f 6465  s)  # to unicode
+000194f0: 0a20 2020 2073 203d 2073 2e6c 6f77 6572  .    s = s.lower
+00019500: 2829 2020 2320 746f 206c 6f77 6572 6361  ()  # to lowerca
+00019510: 7365 0a20 2020 2073 203d 2075 6e69 636f  se.    s = unico
+00019520: 6465 6461 7461 2e6e 6f72 6d61 6c69 7a65  dedata.normalize
+00019530: 2822 4e46 4b44 222c 2073 2920 2023 2072  ("NFKD", s)  # r
+00019540: 6570 6c61 6365 2073 7065 6369 616c 2063  eplace special c
+00019550: 6861 7261 6374 6572 730a 2020 2020 7320  haracters.    s 
+00019560: 3d20 746f 5f6e 6174 6976 6528 732c 2063  = to_native(s, c
+00019570: 6861 7273 6574 3d22 6173 6369 6922 2c20  harset="ascii", 
+00019580: 6572 726f 7273 3d22 6967 6e6f 7265 2229  errors="ignore")
+00019590: 2020 2320 656e 636f 6465 2061 7320 4153    # encode as AS
+000195a0: 4349 490a 2020 2020 7320 3d20 7265 2e73  CII.    s = re.s
+000195b0: 7562 2872 2226 5c77 2b3f 3b22 2c20 2222  ub(r"&\w+?;", ""
+000195c0: 2c20 7329 2020 2320 7374 7269 7020 6874  , s)  # strip ht
+000195d0: 6d6c 2065 6e74 6974 6965 730a 2020 2020  ml entities.    
+000195e0: 6966 206b 6565 705f 756e 6465 7273 636f  if keep_undersco
+000195f0: 7265 733a 0a20 2020 2020 2020 2073 203d  res:.        s =
+00019600: 2072 652e 7375 6228 7222 5c73 2b22 2c20   re.sub(r"\s+", 
+00019610: 222d 222c 2073 2920 2023 2077 6869 7465  "-", s)  # white
+00019620: 7370 6163 6520 746f 2068 7970 6865 6e73  space to hyphens
+00019630: 0a20 2020 2020 2020 2073 203d 2072 652e  .        s = re.
+00019640: 7375 6228 7222 5b5e 5c77 5c2d 5d22 2c20  sub(r"[^\w\-]", 
+00019650: 2222 2c20 7329 0a20 2020 2020 2020 2023  "", s).        #
+00019660: 2073 7472 6970 2061 6c6c 2062 7574 2061   strip all but a
+00019670: 6c70 6861 6e75 6d65 7269 632f 756e 6465  lphanumeric/unde
+00019680: 7273 636f 7265 2f68 7970 6865 6e0a 2020  rscore/hyphen.  
+00019690: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000196a0: 7320 3d20 7265 2e73 7562 2872 225b 5c73  s = re.sub(r"[\s
+000196b0: 5f5d 2b22 2c20 222d 222c 2073 2920 2023  _]+", "-", s)  #
+000196c0: 2077 6869 7465 7370 6163 6520 2620 756e   whitespace & un
+000196d0: 6465 7273 636f 7265 7320 746f 2068 7970  derscores to hyp
+000196e0: 6865 6e73 0a20 2020 2020 2020 2073 203d  hens.        s =
+000196f0: 2072 652e 7375 6228 7222 5b5e 612d 7a30   re.sub(r"[^a-z0
+00019700: 2d39 5c2d 5d22 2c20 2222 2c20 7329 2020  -9\-]", "", s)  
+00019710: 2320 7374 7269 7020 616c 6c20 6275 7420  # strip all but 
+00019720: 616c 7068 616e 756d 6572 6963 2f68 7970  alphanumeric/hyp
+00019730: 6865 6e0a 2020 2020 7320 3d20 7265 2e73  hen.    s = re.s
+00019740: 7562 2872 225b 2d5f 5d5b 2d5f 5d2b 222c  ub(r"[-_][-_]+",
+00019750: 2022 2d22 2c20 7329 2020 2320 636f 6c6c   "-", s)  # coll
+00019760: 6170 7365 2073 7472 696e 6773 206f 6620  apse strings of 
+00019770: 6879 7068 656e 730a 2020 2020 7320 3d20  hyphens.    s = 
+00019780: 732e 7374 7269 7028 222d 2229 2020 2320  s.strip("-")  # 
+00019790: 7265 6d6f 7665 206c 6561 6469 6e67 2061  remove leading a
+000197a0: 6e64 2074 7261 696c 696e 6720 6879 7068  nd trailing hyph
+000197b0: 656e 730a 2020 2020 7265 7475 726e 2073  ens.    return s
+000197c0: 5b3a 6d61 786c 656e 5d20 2023 2065 6e66  [:maxlen]  # enf
+000197d0: 6f72 6365 206d 6178 696d 756d 206c 656e  orce maximum len
+000197e0: 6774 680a 0a0a 636c 6173 7320 4953 5f53  gth...class IS_S
+000197f0: 4c55 4728 5661 6c69 6461 746f 7229 3a0a  LUG(Validator):.
+00019800: 2020 2020 2222 220a 2020 2020 636f 6e76      """.    conv
+00019810: 6572 7473 2061 7262 6974 7261 7279 2074  erts arbitrary t
+00019820: 6578 7420 7374 7269 6e67 2074 6f20 6120  ext string to a 
+00019830: 736c 7567 3a3a 0a0a 2020 2020 2020 2020  slug::..        
+00019840: 3e3e 3e20 4953 5f53 4c55 4728 2928 2761  >>> IS_SLUG()('a
+00019850: 6263 3132 3327 290a 2020 2020 2020 2020  bc123').        
+00019860: 2827 6162 6331 3233 272c 204e 6f6e 6529  ('abc123', None)
+00019870: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00019880: 534c 5547 2829 2827 4142 4331 3233 2729  SLUG()('ABC123')
+00019890: 0a20 2020 2020 2020 2028 2761 6263 3132  .        ('abc12
+000198a0: 3327 2c20 4e6f 6e65 290a 2020 2020 2020  3', None).      
+000198b0: 2020 3e3e 3e20 4953 5f53 4c55 4728 2928    >>> IS_SLUG()(
+000198c0: 2761 6263 2d31 3233 2729 0a20 2020 2020  'abc-123').     
+000198d0: 2020 2028 2761 6263 2d31 3233 272c 204e     ('abc-123', N
+000198e0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+000198f0: 2049 535f 534c 5547 2829 2827 6162 632d   IS_SLUG()('abc-
+00019900: 2d31 3233 2729 0a20 2020 2020 2020 2028  -123').        (
+00019910: 2761 6263 2d31 3233 272c 204e 6f6e 6529  'abc-123', None)
+00019920: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00019930: 534c 5547 2829 2827 6162 6320 3132 3327  SLUG()('abc 123'
 00019940: 290a 2020 2020 2020 2020 2827 6162 632d  ).        ('abc-
 00019950: 3132 3327 2c20 4e6f 6e65 290a 2020 2020  123', None).    
 00019960: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
-00019970: 6b65 6570 5f75 6e64 6572 7363 6f72 6573  keep_underscores
-00019980: 3d54 7275 6529 2827 6162 635f 3132 3327  =True)('abc_123'
-00019990: 290a 2020 2020 2020 2020 2827 6162 635f  ).        ('abc_
-000199a0: 3132 3327 2c20 4e6f 6e65 290a 2020 2020  123', None).    
-000199b0: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
-000199c0: 6368 6563 6b3d 4661 6c73 6529 2827 6162  check=False)('ab
-000199d0: 6327 290a 2020 2020 2020 2020 2827 6162  c').        ('ab
-000199e0: 6327 2c20 4e6f 6e65 290a 2020 2020 2020  c', None).      
-000199f0: 2020 3e3e 3e20 4953 5f53 4c55 4728 6368    >>> IS_SLUG(ch
-00019a00: 6563 6b3d 5472 7565 2928 2761 6263 2729  eck=True)('abc')
-00019a10: 0a20 2020 2020 2020 2028 2761 6263 272c  .        ('abc',
-00019a20: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
-00019a30: 3e3e 2049 535f 534c 5547 2863 6865 636b  >> IS_SLUG(check
-00019a40: 3d46 616c 7365 2928 2761 2062 6327 290a  =False)('a bc').
-00019a50: 2020 2020 2020 2020 2827 612d 6263 272c          ('a-bc',
-00019a60: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
-00019a70: 3e3e 2049 535f 534c 5547 2863 6865 636b  >> IS_SLUG(check
-00019a80: 3d54 7275 6529 2827 6120 6263 2729 0a20  =True)('a bc'). 
-00019a90: 2020 2020 2020 2028 2761 2062 6327 2c20         ('a bc', 
-00019aa0: 276d 7573 7420 6265 2073 6c75 6727 290a  'must be slug').
-00019ab0: 2020 2020 2222 220a 0a20 2020 2040 7374      """..    @st
-00019ac0: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
-00019ad0: 6566 2075 726c 6966 7928 7661 6c75 652c  ef urlify(value,
-00019ae0: 206d 6178 6c65 6e3d 3830 2c20 6b65 6570   maxlen=80, keep
-00019af0: 5f75 6e64 6572 7363 6f72 6573 3d46 616c  _underscores=Fal
-00019b00: 7365 293a 0a20 2020 2020 2020 2072 6574  se):.        ret
-00019b10: 7572 6e20 7572 6c69 6679 2876 616c 7565  urn urlify(value
-00019b20: 2c20 6d61 786c 656e 2c20 6b65 6570 5f75  , maxlen, keep_u
-00019b30: 6e64 6572 7363 6f72 6573 290a 0a20 2020  nderscores)..   
-00019b40: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
-00019b50: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00019b60: 2020 2020 206d 6178 6c65 6e3d 3830 2c0a       maxlen=80,.
-00019b70: 2020 2020 2020 2020 6368 6563 6b3d 4661          check=Fa
-00019b80: 6c73 652c 0a20 2020 2020 2020 2065 7272  lse,.        err
-00019b90: 6f72 5f6d 6573 7361 6765 3d22 4d75 7374  or_message="Must
-00019ba0: 2062 6520 736c 7567 222c 0a20 2020 2020   be slug",.     
-00019bb0: 2020 206b 6565 705f 756e 6465 7273 636f     keep_undersco
-00019bc0: 7265 733d 4661 6c73 652c 0a20 2020 2029  res=False,.    )
-00019bd0: 3a0a 2020 2020 2020 2020 7365 6c66 2e6d  :.        self.m
-00019be0: 6178 6c65 6e20 3d20 6d61 786c 656e 0a20  axlen = maxlen. 
-00019bf0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-00019c00: 6b20 3d20 6368 6563 6b0a 2020 2020 2020  k = check.      
-00019c10: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-00019c20: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-00019c30: 7361 6765 0a20 2020 2020 2020 2073 656c  sage.        sel
-00019c40: 662e 6b65 6570 5f75 6e64 6572 7363 6f72  f.keep_underscor
-00019c50: 6573 203d 206b 6565 705f 756e 6465 7273  es = keep_unders
-00019c60: 636f 7265 730a 0a20 2020 2064 6566 2076  cores..    def v
-00019c70: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
-00019c80: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
-00019c90: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00019ca0: 2073 656c 662e 6368 6563 6b20 616e 6420   self.check and 
-00019cb0: 7661 6c75 6520 213d 2075 726c 6966 7928  value != urlify(
-00019cc0: 7661 6c75 652c 2073 656c 662e 6d61 786c  value, self.maxl
-00019cd0: 656e 2c20 7365 6c66 2e6b 6565 705f 756e  en, self.keep_un
-00019ce0: 6465 7273 636f 7265 7329 3a0a 2020 2020  derscores):.    
-00019cf0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00019d00: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
-00019d10: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
-00019d20: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-00019d30: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-00019d40: 6e20 7572 6c69 6679 2876 616c 7565 2c20  n urlify(value, 
-00019d50: 7365 6c66 2e6d 6178 6c65 6e2c 2073 656c  self.maxlen, sel
-00019d60: 662e 6b65 6570 5f75 6e64 6572 7363 6f72  f.keep_underscor
-00019d70: 6573 290a 0a0a 636c 6173 7320 414e 595f  es)...class ANY_
-00019d80: 4f46 2856 616c 6964 6174 6f72 293a 0a20  OF(Validator):. 
-00019d90: 2020 2022 2222 0a20 2020 2054 6573 7473     """.    Tests
-00019da0: 2069 6620 616e 7920 6f66 2074 6865 2076   if any of the v
-00019db0: 616c 6964 6174 6f72 7320 696e 2061 206c  alidators in a l
-00019dc0: 6973 7420 7265 7475 726e 7320 7375 6363  ist returns succ
-00019dd0: 6573 7366 756c 6c79 3a3a 0a0a 2020 2020  essfully::..    
-00019de0: 2020 2020 3e3e 3e20 414e 595f 4f46 285b      >>> ANY_OF([
-00019df0: 4953 5f45 4d41 494c 2829 2c49 535f 414c  IS_EMAIL(),IS_AL
-00019e00: 5048 414e 554d 4552 4943 2829 5d29 2827  PHANUMERIC()])('
-00019e10: 6140 622e 636f 2729 0a20 2020 2020 2020  a@b.co').       
-00019e20: 2028 2761 4062 2e63 6f27 2c20 4e6f 6e65   ('a@b.co', None
-00019e30: 290a 2020 2020 2020 2020 3e3e 3e20 414e  ).        >>> AN
-00019e40: 595f 4f46 285b 4953 5f45 4d41 494c 2829  Y_OF([IS_EMAIL()
-00019e50: 2c49 535f 414c 5048 414e 554d 4552 4943  ,IS_ALPHANUMERIC
-00019e60: 2829 5d29 2827 6162 636f 2729 0a20 2020  ()])('abco').   
-00019e70: 2020 2020 2028 2761 6263 6f27 2c20 4e6f       ('abco', No
-00019e80: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-00019e90: 414e 595f 4f46 285b 4953 5f45 4d41 494c  ANY_OF([IS_EMAIL
-00019ea0: 2829 2c49 535f 414c 5048 414e 554d 4552  (),IS_ALPHANUMER
-00019eb0: 4943 2829 5d29 2827 4061 622e 636f 2729  IC()])('@ab.co')
-00019ec0: 0a20 2020 2020 2020 2028 2740 6162 2e63  .        ('@ab.c
-00019ed0: 6f27 2c20 2765 6e74 6572 206f 6e6c 7920  o', 'enter only 
-00019ee0: 6c65 7474 6572 732c 206e 756d 6265 7273  letters, numbers
-00019ef0: 2c20 616e 6420 756e 6465 7273 636f 7265  , and underscore
-00019f00: 2729 0a20 2020 2020 2020 203e 3e3e 2041  ').        >>> A
-00019f10: 4e59 5f4f 4628 5b49 535f 414c 5048 414e  NY_OF([IS_ALPHAN
-00019f20: 554d 4552 4943 2829 2c49 535f 454d 4149  UMERIC(),IS_EMAI
-00019f30: 4c28 295d 2928 2740 6162 2e63 6f27 290a  L()])('@ab.co').
-00019f40: 2020 2020 2020 2020 2827 4061 622e 636f          ('@ab.co
-00019f50: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
-00019f60: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
-00019f70: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
-00019f80: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00019f90: 662c 2073 7562 732c 2065 7272 6f72 5f6d  f, subs, error_m
-00019fa0: 6573 7361 6765 3d4e 6f6e 6529 3a0a 2020  essage=None):.  
-00019fb0: 2020 2020 2020 7365 6c66 2e73 7562 7320        self.subs 
-00019fc0: 3d20 7375 6273 0a20 2020 2020 2020 2073  = subs.        s
-00019fd0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00019fe0: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
-00019ff0: 650a 0a20 2020 2064 6566 2076 616c 6964  e..    def valid
-0001a000: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
-0001a010: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
-0001a020: 3a0a 2020 2020 2020 2020 666f 7220 7661  :.        for va
-0001a030: 6c69 6461 746f 7220 696e 2073 656c 662e  lidator in self.
-0001a040: 7375 6273 3a0a 2020 2020 2020 2020 2020  subs:.          
-0001a050: 2020 762c 2065 203d 2076 616c 6964 6174    v, e = validat
-0001a060: 6f72 2876 616c 7565 290a 2020 2020 2020  or(value).      
-0001a070: 2020 2020 2020 6966 206e 6f74 2065 3a0a        if not e:.
-0001a080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a090: 7265 7475 726e 2076 0a20 2020 2020 2020  return v.       
-0001a0a0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-0001a0b0: 6e45 7272 6f72 2865 290a 0a20 2020 2064  nError(e)..    d
-0001a0c0: 6566 2066 6f72 6d61 7474 6572 2873 656c  ef formatter(sel
-0001a0d0: 662c 2076 616c 7565 293a 0a20 2020 2020  f, value):.     
-0001a0e0: 2020 2023 2055 7365 2074 6865 2066 6f72     # Use the for
-0001a0f0: 6d61 7474 6572 206f 6620 7468 6520 6669  matter of the fi
-0001a100: 7273 7420 7375 6276 616c 6964 6174 6f72  rst subvalidator
-0001a110: 0a20 2020 2020 2020 2023 2074 6861 7420  .        # that 
-0001a120: 7661 6c69 6461 7465 7320 7468 6520 7661  validates the va
-0001a130: 6c75 6520 616e 6420 6861 7320 6120 666f  lue and has a fo
-0001a140: 726d 6174 7465 720a 2020 2020 2020 2020  rmatter.        
-0001a150: 666f 7220 7661 6c69 6461 746f 7220 696e  for validator in
-0001a160: 2073 656c 662e 7375 6273 3a0a 2020 2020   self.subs:.    
-0001a170: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-0001a180: 7472 2876 616c 6964 6174 6f72 2c20 2266  tr(validator, "f
-0001a190: 6f72 6d61 7474 6572 2229 2061 6e64 2076  ormatter") and v
-0001a1a0: 616c 6964 6174 6f72 2876 616c 7565 295b  alidator(value)[
-0001a1b0: 315d 2069 7320 4e6f 6e65 3a0a 2020 2020  1] is None:.    
-0001a1c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001a1d0: 726e 2076 616c 6964 6174 6f72 2e66 6f72  rn validator.for
-0001a1e0: 6d61 7474 6572 2876 616c 7565 290a 0a0a  matter(value)...
-0001a1f0: 636c 6173 7320 4953 5f45 4d50 5459 5f4f  class IS_EMPTY_O
-0001a200: 5228 5661 6c69 6461 746f 7229 3a0a 2020  R(Validator):.  
-0001a210: 2020 2222 220a 2020 2020 4475 6d6d 7920    """.    Dummy 
-0001a220: 636c 6173 7320 666f 7220 7465 7374 696e  class for testin
-0001a230: 6720 4953 5f45 4d50 5459 5f4f 523a 3a0a  g IS_EMPTY_OR::.
-0001a240: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-0001a250: 454d 5054 595f 4f52 2849 535f 454d 4149  EMPTY_OR(IS_EMAI
-0001a260: 4c28 2929 2827 6162 6340 6465 662e 636f  L())('abc@def.co
-0001a270: 6d27 290a 2020 2020 2020 2020 2827 6162  m').        ('ab
-0001a280: 6340 6465 662e 636f 6d27 2c20 4e6f 6e65  c@def.com', None
-0001a290: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-0001a2a0: 5f45 4d50 5459 5f4f 5228 4953 5f45 4d41  _EMPTY_OR(IS_EMA
-0001a2b0: 494c 2829 2928 2720 2020 2729 0a20 2020  IL())('   ').   
-0001a2c0: 2020 2020 2028 4e6f 6e65 2c20 4e6f 6e65       (None, None
-0001a2d0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-0001a2e0: 5f45 4d50 5459 5f4f 5228 4953 5f45 4d41  _EMPTY_OR(IS_EMA
-0001a2f0: 494c 2829 2c20 6e75 6c6c 3d27 6162 6327  IL(), null='abc'
-0001a300: 2928 2720 2020 2729 0a20 2020 2020 2020  )('   ').       
-0001a310: 2028 2761 6263 272c 204e 6f6e 6529 0a20   ('abc', None). 
-0001a320: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-0001a330: 5054 595f 4f52 2849 535f 454d 4149 4c28  PTY_OR(IS_EMAIL(
-0001a340: 292c 206e 756c 6c3d 2761 6263 272c 2065  ), null='abc', e
-0001a350: 6d70 7479 5f72 6567 6578 3d27 6465 6627  mpty_regex='def'
-0001a360: 2928 2764 6566 2729 0a20 2020 2020 2020  )('def').       
-0001a370: 2028 2761 6263 272c 204e 6f6e 6529 0a20   ('abc', None). 
-0001a380: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-0001a390: 5054 595f 4f52 2849 535f 454d 4149 4c28  PTY_OR(IS_EMAIL(
-0001a3a0: 2929 2827 6162 6327 290a 2020 2020 2020  ))('abc').      
-0001a3b0: 2020 2827 6162 6327 2c20 2765 6e74 6572    ('abc', 'enter
-0001a3c0: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-0001a3d0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-0001a3e0: 203e 3e3e 2049 535f 454d 5054 595f 4f52   >>> IS_EMPTY_OR
-0001a3f0: 2849 535f 454d 4149 4c28 2929 2827 2061  (IS_EMAIL())(' a
-0001a400: 6263 2027 290a 2020 2020 2020 2020 2827  bc ').        ('
-0001a410: 6162 6327 2c20 2765 6e74 6572 2061 2076  abc', 'enter a v
-0001a420: 616c 6964 2065 6d61 696c 2061 6464 7265  alid email addre
-0001a430: 7373 2729 0a20 2020 2022 2222 0a0a 2020  ss').    """..  
-0001a440: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0001a450: 656c 662c 206f 7468 6572 2c20 6e75 6c6c  elf, other, null
-0001a460: 3d4e 6f6e 652c 2065 6d70 7479 5f72 6567  =None, empty_reg
-0001a470: 6578 3d4e 6f6e 6529 3a0a 2020 2020 2020  ex=None):.      
-0001a480: 2020 2873 656c 662e 6f74 6865 722c 2073    (self.other, s
-0001a490: 656c 662e 6e75 6c6c 2920 3d20 286f 7468  elf.null) = (oth
-0001a4a0: 6572 2c20 6e75 6c6c 290a 2020 2020 2020  er, null).      
-0001a4b0: 2020 6966 2065 6d70 7479 5f72 6567 6578    if empty_regex
-0001a4c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0001a4d0: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
-0001a4e0: 6d70 7479 5f72 6567 6578 203d 2072 652e  mpty_regex = re.
-0001a4f0: 636f 6d70 696c 6528 656d 7074 795f 7265  compile(empty_re
-0001a500: 6765 7829 0a20 2020 2020 2020 2065 6c73  gex).        els
-0001a510: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-0001a520: 656c 662e 656d 7074 795f 7265 6765 7820  elf.empty_regex 
-0001a530: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
-0001a540: 6620 6861 7361 7474 7228 6f74 6865 722c  f hasattr(other,
-0001a550: 2022 6d75 6c74 6970 6c65 2229 3a0a 2020   "multiple"):.  
-0001a560: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-0001a570: 756c 7469 706c 6520 3d20 6f74 6865 722e  ultiple = other.
-0001a580: 6d75 6c74 6970 6c65 0a20 2020 2020 2020  multiple.       
-0001a590: 2069 6620 6861 7361 7474 7228 6f74 6865   if hasattr(othe
-0001a5a0: 722c 2022 6f70 7469 6f6e 7322 293a 0a20  r, "options"):. 
-0001a5b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001a5c0: 6f70 7469 6f6e 7320 3d20 7365 6c66 2e5f  options = self._
-0001a5d0: 6f70 7469 6f6e 730a 0a20 2020 2064 6566  options..    def
-0001a5e0: 205f 6f70 7469 6f6e 7328 7365 6c66 2c20   _options(self, 
-0001a5f0: 2a61 7267 732c 202a 2a6b 7761 7267 7329  *args, **kwargs)
-0001a600: 3a0a 2020 2020 2020 2020 6f70 7469 6f6e  :.        option
-0001a610: 7320 3d20 7365 6c66 2e6f 7468 6572 2e6f  s = self.other.o
-0001a620: 7074 696f 6e73 282a 6172 6773 2c20 2a2a  ptions(*args, **
-0001a630: 6b77 6172 6773 290a 2020 2020 2020 2020  kwargs).        
-0001a640: 6966 2028 6e6f 7420 6f70 7469 6f6e 7320  if (not options 
-0001a650: 6f72 206f 7074 696f 6e73 5b30 5d5b 305d  or options[0][0]
-0001a660: 2021 3d20 2222 2920 616e 6420 6e6f 7420   != "") and not 
-0001a670: 7365 6c66 2e6d 756c 7469 706c 653a 0a20  self.multiple:. 
-0001a680: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-0001a690: 6e73 2e69 6e73 6572 7428 302c 2028 2222  ns.insert(0, (""
-0001a6a0: 2c20 2222 2929 0a20 2020 2020 2020 2072  , "")).        r
-0001a6b0: 6574 7572 6e20 6f70 7469 6f6e 730a 0a20  eturn options.. 
-0001a6c0: 2020 2064 6566 2073 6574 5f73 656c 665f     def set_self_
-0001a6d0: 6964 2873 656c 662c 2069 6429 3a0a 2020  id(self, id):.  
-0001a6e0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0001a6f0: 6e63 6528 7365 6c66 2e6f 7468 6572 2c20  nce(self.other, 
-0001a700: 286c 6973 742c 2074 7570 6c65 2929 3a0a  (list, tuple)):.
-0001a710: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a720: 6974 656d 2069 6e20 7365 6c66 2e6f 7468  item in self.oth
-0001a730: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-0001a740: 2020 2020 6966 2068 6173 6174 7472 2869      if hasattr(i
-0001a750: 7465 6d2c 2022 7365 745f 7365 6c66 5f69  tem, "set_self_i
-0001a760: 6422 293a 0a20 2020 2020 2020 2020 2020  d"):.           
-0001a770: 2020 2020 2020 2020 2069 7465 6d2e 7365           item.se
-0001a780: 745f 7365 6c66 5f69 6428 6964 290a 2020  t_self_id(id).  
-0001a790: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001a7a0: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-0001a7b0: 7472 2873 656c 662e 6f74 6865 722c 2022  tr(self.other, "
-0001a7c0: 7365 745f 7365 6c66 5f69 6422 293a 0a20  set_self_id"):. 
-0001a7d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001a7e0: 656c 662e 6f74 6865 722e 7365 745f 7365  elf.other.set_se
-0001a7f0: 6c66 5f69 6428 6964 290a 0a20 2020 2064  lf_id(id)..    d
-0001a800: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-0001a810: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-0001a820: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-0001a830: 2020 7661 6c75 652c 2065 6d70 7479 203d    value, empty =
-0001a840: 2069 735f 656d 7074 7928 7661 6c75 652c   is_empty(value,
-0001a850: 2065 6d70 7479 5f72 6567 6578 3d73 656c   empty_regex=sel
-0001a860: 662e 656d 7074 795f 7265 6765 7829 0a20  f.empty_regex). 
-0001a870: 2020 2020 2020 2069 6620 656d 7074 793a         if empty:
-0001a880: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001a890: 7572 6e20 7365 6c66 2e6e 756c 6c0a 2020  urn self.null.  
-0001a8a0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0001a8b0: 6e63 6528 7365 6c66 2e6f 7468 6572 2c20  nce(self.other, 
-0001a8c0: 286c 6973 742c 2074 7570 6c65 2929 3a0a  (list, tuple)):.
-0001a8d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001a8e0: 6974 656d 2069 6e20 7365 6c66 2e6f 7468  item in self.oth
-0001a8f0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-0001a900: 2020 2020 7661 6c75 6520 3d20 7661 6c69      value = vali
-0001a910: 6461 746f 725f 6361 6c6c 6572 2869 7465  dator_caller(ite
-0001a920: 6d2c 2076 616c 7565 2c20 7265 636f 7264  m, value, record
-0001a930: 5f69 6429 0a20 2020 2020 2020 2020 2020  _id).           
-0001a940: 2072 6574 7572 6e20 7661 6c75 650a 2020   return value.  
-0001a950: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-0001a960: 6964 6174 6f72 5f63 616c 6c65 7228 7365  idator_caller(se
-0001a970: 6c66 2e6f 7468 6572 2c20 7661 6c75 652c  lf.other, value,
-0001a980: 2072 6563 6f72 645f 6964 290a 0a20 2020   record_id)..   
-0001a990: 2064 6566 2066 6f72 6d61 7474 6572 2873   def formatter(s
-0001a9a0: 656c 662c 2076 616c 7565 293a 0a20 2020  elf, value):.   
-0001a9b0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
-0001a9c0: 7365 6c66 2e6f 7468 6572 2c20 2266 6f72  self.other, "for
-0001a9d0: 6d61 7474 6572 2229 3a0a 2020 2020 2020  matter"):.      
-0001a9e0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0001a9f0: 662e 6f74 6865 722e 666f 726d 6174 7465  f.other.formatte
-0001aa00: 7228 7661 6c75 6529 0a20 2020 2020 2020  r(value).       
-0001aa10: 2072 6574 7572 6e20 7661 6c75 650a 0a0a   return value...
-0001aa20: 4953 5f4e 554c 4c5f 4f52 203d 2049 535f  IS_NULL_OR = IS_
-0001aa30: 454d 5054 595f 4f52 2020 2320 666f 7220  EMPTY_OR  # for 
-0001aa40: 6261 636b 7761 7264 2063 6f6d 7061 7469  backward compati
-0001aa50: 6269 6c69 7479 0a0a 0a63 6c61 7373 2043  bility...class C
-0001aa60: 4c45 414e 5550 2856 616c 6964 6174 6f72  LEANUP(Validator
-0001aa70: 293a 0a20 2020 2022 2222 0a20 2020 2045  ):.    """.    E
-0001aa80: 7861 6d70 6c65 733a 0a20 2020 2020 2020  xamples:.       
-0001aa90: 2055 7365 2061 733a 3a0a 0a20 2020 2020   Use as::..     
-0001aaa0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-0001aab0: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
-0001aac0: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
-0001aad0: 733d 434c 4541 4e55 5028 2929 0a0a 2020  s=CLEANUP())..  
-0001aae0: 2020 7265 6d6f 7665 7320 7370 6563 6961    removes specia
-0001aaf0: 6c20 6368 6172 6163 7465 7273 206f 6e20  l characters on 
-0001ab00: 7661 6c69 6461 7469 6f6e 0a20 2020 2022  validation.    "
-0001ab10: 2222 0a0a 2020 2020 5245 4745 585f 434c  ""..    REGEX_CL
-0001ab20: 4541 4e55 5020 3d20 225b 5e5c 7830 395c  EANUP = "[^\x09\
-0001ab30: 7830 615c 7830 645c 7832 302d 5c78 3765  x0a\x0d\x20-\x7e
-0001ab40: 5d22 0a0a 2020 2020 6465 6620 5f5f 696e  ]"..    def __in
-0001ab50: 6974 5f5f 2873 656c 662c 2072 6567 6578  it__(self, regex
-0001ab60: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0001ab70: 7365 6c66 2e72 6567 6578 203d 2028 0a20  self.regex = (. 
-0001ab80: 2020 2020 2020 2020 2020 2072 652e 636f             re.co
-0001ab90: 6d70 696c 6528 7365 6c66 2e52 4547 4558  mpile(self.REGEX
-0001aba0: 5f43 4c45 414e 5550 2920 6966 2072 6567  _CLEANUP) if reg
-0001abb0: 6578 2069 7320 4e6f 6e65 2065 6c73 6520  ex is None else 
-0001abc0: 7265 2e63 6f6d 7069 6c65 2872 6567 6578  re.compile(regex
-0001abd0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-0001abe0: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
-0001abf0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
-0001ac00: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-0001ac10: 2020 2020 7620 3d20 7365 6c66 2e72 6567      v = self.reg
-0001ac20: 6578 2e73 7562 2822 222c 2073 7472 2876  ex.sub("", str(v
-0001ac30: 616c 7565 292e 7374 7269 7028 2929 0a20  alue).strip()). 
-0001ac40: 2020 2020 2020 2072 6574 7572 6e20 760a         return v.
-0001ac50: 0a0a 6465 6620 7062 6b64 6632 5f68 6578  ..def pbkdf2_hex
-0001ac60: 2864 6174 612c 2073 616c 742c 2069 7465  (data, salt, ite
-0001ac70: 7261 7469 6f6e 733d 3130 3030 2c20 6b65  rations=1000, ke
-0001ac80: 796c 656e 3d32 342c 2068 6173 6866 756e  ylen=24, hashfun
-0001ac90: 633d 4e6f 6e65 293a 0a20 2020 2068 6173  c=None):.    has
-0001aca0: 6866 756e 6320 3d20 6861 7368 6675 6e63  hfunc = hashfunc
-0001acb0: 206f 7220 6861 7368 6c69 622e 7368 6131   or hashlib.sha1
-0001acc0: 0a20 2020 2068 6d61 6320 3d20 6861 7368  .    hmac = hash
-0001acd0: 6c69 622e 7062 6b64 6632 5f68 6d61 6328  lib.pbkdf2_hmac(
-0001ace0: 0a20 2020 2020 2020 2068 6173 6866 756e  .        hashfun
-0001acf0: 6328 292e 6e61 6d65 2c20 746f 5f62 7974  c().name, to_byt
-0001ad00: 6573 2864 6174 6129 2c20 746f 5f62 7974  es(data), to_byt
-0001ad10: 6573 2873 616c 7429 2c20 6974 6572 6174  es(salt), iterat
-0001ad20: 696f 6e73 2c20 6b65 796c 656e 0a20 2020  ions, keylen.   
-0001ad30: 2029 0a20 2020 2072 6574 7572 6e20 6269   ).    return bi
-0001ad40: 6e61 7363 6969 2e68 6578 6c69 6679 2868  nascii.hexlify(h
-0001ad50: 6d61 6329 0a0a 0a64 6566 2073 696d 706c  mac)...def simpl
-0001ad60: 655f 6861 7368 2874 6578 742c 206b 6579  e_hash(text, key
-0001ad70: 3d22 222c 2073 616c 743d 2222 2c20 6469  ="", salt="", di
-0001ad80: 6765 7374 5f61 6c67 3d22 6d64 3522 293a  gest_alg="md5"):
-0001ad90: 0a20 2020 2022 2222 4765 6e65 7261 7465  .    """Generate
-0001ada0: 2068 6173 6820 7769 7468 2074 6865 2067   hash with the g
-0001adb0: 6976 656e 2074 6578 7420 7573 696e 6720  iven text using 
-0001adc0: 7468 6520 7370 6563 6966 6965 6420 6469  the specified di
-0001add0: 6765 7374 2061 6c67 6f72 6974 686d 2e22  gest algorithm."
-0001ade0: 2222 0a20 2020 2074 6578 7420 3d20 746f  "".    text = to
-0001adf0: 5f62 7974 6573 2874 6578 7429 0a20 2020  _bytes(text).   
-0001ae00: 206b 6579 203d 2074 6f5f 6279 7465 7328   key = to_bytes(
-0001ae10: 6b65 7929 0a20 2020 2073 616c 7420 3d20  key).    salt = 
-0001ae20: 746f 5f62 7974 6573 2873 616c 7429 0a20  to_bytes(salt). 
-0001ae30: 2020 2069 6620 6e6f 7420 6469 6765 7374     if not digest
-0001ae40: 5f61 6c67 3a0a 2020 2020 2020 2020 7261  _alg:.        ra
-0001ae50: 6973 6520 5275 6e74 696d 6545 7272 6f72  ise RuntimeError
-0001ae60: 2822 7369 6d70 6c65 5f68 6173 6820 7769  ("simple_hash wi
-0001ae70: 7468 2064 6967 6573 745f 616c 673d 4e6f  th digest_alg=No
-0001ae80: 6e65 2229 0a20 2020 2065 6c69 6620 6e6f  ne").    elif no
-0001ae90: 7420 6973 696e 7374 616e 6365 2864 6967  t isinstance(dig
-0001aea0: 6573 745f 616c 672c 2073 7472 293a 2020  est_alg, str):  
-0001aeb0: 2320 6d61 6e75 616c 2061 7070 726f 6163  # manual approac
-0001aec0: 680a 2020 2020 2020 2020 6820 3d20 6469  h.        h = di
-0001aed0: 6765 7374 5f61 6c67 2874 6578 7420 2b20  gest_alg(text + 
-0001aee0: 6b65 7920 2b20 7361 6c74 290a 2020 2020  key + salt).    
-0001aef0: 656c 6966 2064 6967 6573 745f 616c 672e  elif digest_alg.
-0001af00: 7374 6172 7473 7769 7468 2822 7062 6b64  startswith("pbkd
-0001af10: 6632 2229 3a20 2023 206c 6174 6573 7420  f2"):  # latest 
-0001af20: 616e 6420 636f 6f6c 6573 7421 0a20 2020  and coolest!.   
-0001af30: 2020 2020 2069 7465 7261 7469 6f6e 732c       iterations,
-0001af40: 206b 6579 6c65 6e2c 2061 6c67 203d 2064   keylen, alg = d
-0001af50: 6967 6573 745f 616c 675b 373a 2d31 5d2e  igest_alg[7:-1].
-0001af60: 7370 6c69 7428 222c 2229 0a20 2020 2020  split(",").     
-0001af70: 2020 2072 6574 7572 6e20 746f 5f6e 6174     return to_nat
-0001af80: 6976 6528 0a20 2020 2020 2020 2020 2020  ive(.           
-0001af90: 2070 626b 6466 325f 6865 7828 7465 7874   pbkdf2_hex(text
-0001afa0: 2c20 7361 6c74 2c20 696e 7428 6974 6572  , salt, int(iter
-0001afb0: 6174 696f 6e73 292c 2069 6e74 286b 6579  ations), int(key
-0001afc0: 6c65 6e29 2c20 6765 745f 6469 6765 7374  len), get_digest
-0001afd0: 2861 6c67 2929 0a20 2020 2020 2020 2029  (alg)).        )
-0001afe0: 0a20 2020 2065 6c69 6620 6b65 793a 2020  .    elif key:  
-0001aff0: 2320 7573 6520 686d 6163 0a20 2020 2020  # use hmac.     
-0001b000: 2020 2064 6967 6573 745f 616c 6720 3d20     digest_alg = 
-0001b010: 6765 745f 6469 6765 7374 2864 6967 6573  get_digest(diges
-0001b020: 745f 616c 6729 0a20 2020 2020 2020 2068  t_alg).        h
-0001b030: 203d 2068 6d61 632e 6e65 7728 6b65 7920   = hmac.new(key 
-0001b040: 2b20 7361 6c74 2c20 7465 7874 2c20 6469  + salt, text, di
-0001b050: 6765 7374 5f61 6c67 290a 2020 2020 656c  gest_alg).    el
-0001b060: 7365 3a20 2023 2063 6f6d 7061 7469 626c  se:  # compatibl
-0001b070: 6520 7769 7468 2074 6869 7264 2070 6172  e with third par
-0001b080: 7479 2073 7973 7465 6d73 0a20 2020 2020  ty systems.     
-0001b090: 2020 2068 203d 2067 6574 5f64 6967 6573     h = get_diges
-0001b0a0: 7428 6469 6765 7374 5f61 6c67 2928 290a  t(digest_alg)().
-0001b0b0: 2020 2020 2020 2020 682e 7570 6461 7465          h.update
-0001b0c0: 2874 6578 7420 2b20 7361 6c74 290a 2020  (text + salt).  
-0001b0d0: 2020 7265 7475 726e 2068 2e68 6578 6469    return h.hexdi
-0001b0e0: 6765 7374 2829 0a0a 0a64 6566 2067 6574  gest()...def get
-0001b0f0: 5f64 6967 6573 7428 7661 6c75 6529 3a0a  _digest(value):.
-0001b100: 2020 2020 2222 2252 6574 7572 6e20 6120      """Return a 
-0001b110: 6861 7368 6c69 6220 6469 6765 7374 2061  hashlib digest a
-0001b120: 6c67 6f72 6974 686d 2066 726f 6d20 6120  lgorithm from a 
-0001b130: 7374 7269 6e67 2e22 2222 0a20 2020 2069  string.""".    i
-0001b140: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-0001b150: 7565 2c20 7374 7229 3a0a 2020 2020 2020  ue, str):.      
-0001b160: 2020 7661 6c75 6520 3d20 7661 6c75 652e    value = value.
-0001b170: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
-0001b180: 6966 2076 616c 7565 206e 6f74 2069 6e20  if value not in 
-0001b190: 2822 6d64 3522 2c20 2273 6861 3122 2c20  ("md5", "sha1", 
-0001b1a0: 2273 6861 3232 3422 2c20 2273 6861 3235  "sha224", "sha25
-0001b1b0: 3622 2c20 2273 6861 3338 3422 2c20 2273  6", "sha384", "s
-0001b1c0: 6861 3531 3222 293a 0a20 2020 2020 2020  ha512"):.       
-0001b1d0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-0001b1e0: 4572 726f 7228 2249 6e76 616c 6964 2064  Error("Invalid d
-0001b1f0: 6967 6573 7420 616c 676f 7269 7468 6d3a  igest algorithm:
-0001b200: 2025 7322 2025 2076 616c 7565 290a 2020   %s" % value).  
-0001b210: 2020 2020 2020 7661 6c75 6520 3d20 6765        value = ge
-0001b220: 7461 7474 7228 6861 7368 6c69 622c 2076  tattr(hashlib, v
-0001b230: 616c 7565 290a 2020 2020 7265 7475 726e  alue).    return
-0001b240: 2076 616c 7565 0a0a 0a44 4947 4553 545f   value...DIGEST_
-0001b250: 414c 475f 4259 5f53 495a 4520 3d20 7b0a  ALG_BY_SIZE = {.
-0001b260: 2020 2020 3132 3820 2f2f 2034 3a20 226d      128 // 4: "m
-0001b270: 6435 222c 0a20 2020 2031 3630 202f 2f20  d5",.    160 // 
-0001b280: 343a 2022 7368 6131 222c 0a20 2020 2032  4: "sha1",.    2
-0001b290: 3234 202f 2f20 343a 2022 7368 6132 3234  24 // 4: "sha224
-0001b2a0: 222c 0a20 2020 2032 3536 202f 2f20 343a  ",.    256 // 4:
-0001b2b0: 2022 7368 6132 3536 222c 0a20 2020 2033   "sha256",.    3
-0001b2c0: 3834 202f 2f20 343a 2022 7368 6133 3834  84 // 4: "sha384
-0001b2d0: 222c 0a20 2020 2035 3132 202f 2f20 343a  ",.    512 // 4:
-0001b2e0: 2022 7368 6135 3132 222c 0a7d 0a0a 0a63   "sha512",.}...c
-0001b2f0: 6c61 7373 204c 617a 7943 7279 7074 286f  lass LazyCrypt(o
-0001b300: 626a 6563 7429 3a0a 2020 2020 2222 220a  bject):.    """.
-0001b310: 2020 2020 5374 6f72 6573 2061 206c 617a      Stores a laz
-0001b320: 7920 7061 7373 776f 7264 2068 6173 680a  y password hash.
-0001b330: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-0001b340: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-0001b350: 6372 7970 742c 2070 6173 7377 6f72 6429  crypt, password)
-0001b360: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0001b370: 2020 2020 2020 6372 7970 7420 6973 2061        crypt is a
-0001b380: 6e20 696e 7374 616e 6365 206f 6620 7468  n instance of th
-0001b390: 6520 4352 5950 5420 7661 6c69 6461 746f  e CRYPT validato
-0001b3a0: 722c 0a20 2020 2020 2020 2070 6173 7377  r,.        passw
-0001b3b0: 6f72 6420 6973 2074 6865 2070 6173 7377  ord is the passw
-0001b3c0: 6f72 6420 6173 2069 6e73 6572 7465 6420  ord as inserted 
-0001b3d0: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
-0001b3e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001b3f0: 7365 6c66 2e63 7279 7074 203d 2063 7279  self.crypt = cry
-0001b400: 7074 0a20 2020 2020 2020 2073 656c 662e  pt.        self.
-0001b410: 7061 7373 776f 7264 203d 2070 6173 7377  password = passw
-0001b420: 6f72 640a 2020 2020 2020 2020 7365 6c66  ord.        self
-0001b430: 2e63 7279 7074 6564 203d 204e 6f6e 650a  .crypted = None.
-0001b440: 0a20 2020 2064 6566 205f 5f73 7472 5f5f  .    def __str__
-0001b450: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0001b460: 2222 220a 2020 2020 2020 2020 456e 6372  """.        Encr
-0001b470: 7970 7465 6420 7365 6c66 2e70 6173 7377  ypted self.passw
-0001b480: 6f72 6420 616e 6420 6361 6368 6573 2069  ord and caches i
-0001b490: 7420 696e 2073 656c 662e 6372 7970 7465  t in self.crypte
-0001b4a0: 642e 0a20 2020 2020 2020 2049 6620 7365  d..        If se
-0001b4b0: 6c66 2e63 7279 7074 2e73 616c 7420 7468  lf.crypt.salt th
-0001b4c0: 6520 6f75 7470 7574 2069 7320 696e 2074  e output is in t
-0001b4d0: 6865 2066 6f72 6d61 7420 3c61 6c67 6f72  he format <algor
-0001b4e0: 6974 686d 3e24 3c73 616c 743e 243c 6861  ithm>$<salt>$<ha
-0001b4f0: 7368 3e0a 0a20 2020 2020 2020 2054 7279  sh>..        Try
-0001b500: 2067 6574 2074 6865 2064 6967 6573 745f   get the digest_
-0001b510: 616c 6720 6672 6f6d 2074 6865 206b 6579  alg from the key
-0001b520: 2028 6966 2069 7420 6578 6973 7473 290a   (if it exists).
-0001b530: 2020 2020 2020 2020 656c 7365 2061 7373          else ass
-0001b540: 756d 6520 7468 6520 6465 6661 756c 7420  ume the default 
-0001b550: 6469 6765 7374 5f61 6c67 2e20 4966 206e  digest_alg. If n
-0001b560: 6f74 206b 6579 2061 7420 616c 6c2c 2073  ot key at all, s
-0001b570: 6574 206b 6579 3d27 270a 0a20 2020 2020  et key=''..     
-0001b580: 2020 2049 6620 6120 7361 6c74 2069 7320     If a salt is 
-0001b590: 7370 6563 6966 6965 6420 7573 6520 6974  specified use it
-0001b5a0: 2c20 6966 2073 616c 7420 6973 2054 7275  , if salt is Tru
-0001b5b0: 652c 2073 6574 2073 616c 7420 746f 2075  e, set salt to u
-0001b5c0: 7569 640a 2020 2020 2020 2020 2874 6869  uid.        (thi
-0001b5d0: 7320 7368 6f75 6c64 2061 6c6c 2062 6520  s should all be 
-0001b5e0: 6261 636b 7761 7264 2063 6f6d 7061 7469  backward compati
-0001b5f0: 626c 6529 0a0a 2020 2020 2020 2020 4f70  ble)..        Op
-0001b600: 7469 6f6e 733a 0a20 2020 2020 2020 206b  tions:.        k
-0001b610: 6579 203d 2027 7575 6964 270a 2020 2020  ey = 'uuid'.    
-0001b620: 2020 2020 6b65 7920 3d20 276d 6435 3a75      key = 'md5:u
-0001b630: 7569 6427 0a20 2020 2020 2020 206b 6579  uid'.        key
-0001b640: 203d 2027 7368 6135 3132 3a75 7569 6427   = 'sha512:uuid'
-0001b650: 0a20 2020 2020 2020 202e 2e2e 0a20 2020  .        ....   
-0001b660: 2020 2020 206b 6579 203d 2027 7062 6b64       key = 'pbkd
-0001b670: 6632 2831 3030 302c 3634 2c73 6861 3531  f2(1000,64,sha51
-0001b680: 3229 3a75 7569 6427 2031 3030 3020 6974  2):uuid' 1000 it
-0001b690: 6572 6174 696f 6e73 2061 6e64 2036 3420  erations and 64 
-0001b6a0: 6368 6172 7320 6c65 6e67 7468 0a20 2020  chars length.   
-0001b6b0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001b6c0: 2069 6620 7365 6c66 2e63 7279 7074 6564   if self.crypted
-0001b6d0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001b6e0: 7475 726e 2073 656c 662e 6372 7970 7465  turn self.crypte
-0001b6f0: 640a 2020 2020 2020 2020 6966 2073 656c  d.        if sel
-0001b700: 662e 6372 7970 742e 6b65 793a 0a20 2020  f.crypt.key:.   
-0001b710: 2020 2020 2020 2020 2069 6620 223a 2220           if ":" 
-0001b720: 696e 2073 656c 662e 6372 7970 742e 6b65  in self.crypt.ke
-0001b730: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-0001b740: 2020 2064 6967 6573 745f 616c 672c 206b     digest_alg, k
-0001b750: 6579 203d 2073 656c 662e 6372 7970 742e  ey = self.crypt.
-0001b760: 6b65 792e 7370 6c69 7428 223a 222c 2031  key.split(":", 1
-0001b770: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0001b780: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001b790: 2020 2020 6469 6765 7374 5f61 6c67 2c20      digest_alg, 
-0001b7a0: 6b65 7920 3d20 7365 6c66 2e63 7279 7074  key = self.crypt
-0001b7b0: 2e64 6967 6573 745f 616c 672c 2073 656c  .digest_alg, sel
-0001b7c0: 662e 6372 7970 742e 6b65 790a 2020 2020  f.crypt.key.    
-0001b7d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001b7e0: 2020 2020 2020 6469 6765 7374 5f61 6c67        digest_alg
-0001b7f0: 2c20 6b65 7920 3d20 7365 6c66 2e63 7279  , key = self.cry
-0001b800: 7074 2e64 6967 6573 745f 616c 672c 2022  pt.digest_alg, "
-0001b810: 220a 2020 2020 2020 2020 6966 2073 656c  ".        if sel
-0001b820: 662e 6372 7970 742e 7361 6c74 3a0a 2020  f.crypt.salt:.  
-0001b830: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001b840: 662e 6372 7970 742e 7361 6c74 2069 7320  f.crypt.salt is 
-0001b850: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-0001b860: 2020 2020 2020 7361 6c74 203d 2073 7472        salt = str
-0001b870: 2875 7569 642e 7575 6964 3428 2929 2e72  (uuid.uuid4()).r
-0001b880: 6570 6c61 6365 2822 2d22 2c20 2222 295b  eplace("-", "")[
-0001b890: 2d31 363a 5d0a 2020 2020 2020 2020 2020  -16:].          
-0001b8a0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001b8b0: 2020 2020 2020 2020 7361 6c74 203d 2073          salt = s
-0001b8c0: 656c 662e 6372 7970 742e 7361 6c74 0a20  elf.crypt.salt. 
-0001b8d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0001b8e0: 2020 2020 2020 2020 2073 616c 7420 3d20           salt = 
-0001b8f0: 2222 0a20 2020 2020 2020 2068 6173 6865  "".        hashe
-0001b900: 6420 3d20 7369 6d70 6c65 5f68 6173 6828  d = simple_hash(
-0001b910: 7365 6c66 2e70 6173 7377 6f72 642c 206b  self.password, k
-0001b920: 6579 2c20 7361 6c74 2c20 6469 6765 7374  ey, salt, digest
-0001b930: 5f61 6c67 290a 2020 2020 2020 2020 7365  _alg).        se
-0001b940: 6c66 2e63 7279 7074 6564 203d 2022 2573  lf.crypted = "%s
-0001b950: 2425 7324 2573 2220 2520 2864 6967 6573  $%s$%s" % (diges
-0001b960: 745f 616c 672c 2073 616c 742c 2068 6173  t_alg, salt, has
-0001b970: 6865 6429 0a20 2020 2020 2020 2072 6574  hed).        ret
-0001b980: 7572 6e20 7365 6c66 2e63 7279 7074 6564  urn self.crypted
-0001b990: 0a0a 2020 2020 6465 6620 5f5f 6571 5f5f  ..    def __eq__
-0001b9a0: 2873 656c 662c 2073 746f 7265 645f 7061  (self, stored_pa
-0001b9b0: 7373 776f 7264 293a 0a20 2020 2020 2020  ssword):.       
-0001b9c0: 2022 2222 0a20 2020 2020 2020 2063 6f6d   """.        com
-0001b9d0: 7061 7265 7320 7468 6520 6375 7272 656e  pares the curren
-0001b9e0: 7420 6c61 7a79 2063 7279 7074 6564 2070  t lazy crypted p
-0001b9f0: 6173 7377 6f72 6420 7769 7468 2061 2073  assword with a s
-0001ba00: 746f 7265 6420 7061 7373 776f 7264 0a20  tored password. 
-0001ba10: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-0001ba20: 2020 2020 2320 4c61 7a79 4372 7970 7420      # LazyCrypt 
-0001ba30: 6f62 6a65 6374 7320 636f 6d70 6172 6973  objects comparis
-0001ba40: 6f6e 0a20 2020 2020 2020 2069 6620 6973  on.        if is
-0001ba50: 696e 7374 616e 6365 2873 746f 7265 645f  instance(stored_
-0001ba60: 7061 7373 776f 7264 2c20 7365 6c66 2e5f  password, self._
-0001ba70: 5f63 6c61 7373 5f5f 293a 0a20 2020 2020  _class__):.     
-0001ba80: 2020 2020 2020 2072 6574 7572 6e20 2873         return (s
-0001ba90: 656c 6620 6973 2073 746f 7265 645f 7061  elf is stored_pa
-0001baa0: 7373 776f 7264 2920 6f72 2028 0a20 2020  ssword) or (.   
-0001bab0: 2020 2020 2020 2020 2020 2020 2028 7365               (se
-0001bac0: 6c66 2e63 7279 7074 2e6b 6579 203d 3d20  lf.crypt.key == 
-0001bad0: 7374 6f72 6564 5f70 6173 7377 6f72 642e  stored_password.
-0001bae0: 6372 7970 742e 6b65 7929 0a20 2020 2020  crypt.key).     
-0001baf0: 2020 2020 2020 2020 2020 2061 6e64 2028             and (
-0001bb00: 7365 6c66 2e70 6173 7377 6f72 6420 3d3d  self.password ==
-0001bb10: 2073 746f 7265 645f 7061 7373 776f 7264   stored_password
-0001bb20: 2e70 6173 7377 6f72 6429 0a20 2020 2020  .password).     
-0001bb30: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0001bb40: 2020 6966 2073 656c 662e 6372 7970 742e    if self.crypt.
-0001bb50: 6b65 793a 0a20 2020 2020 2020 2020 2020  key:.           
-0001bb60: 2069 6620 223a 2220 696e 2073 656c 662e   if ":" in self.
-0001bb70: 6372 7970 742e 6b65 793a 0a20 2020 2020  crypt.key:.     
-0001bb80: 2020 2020 2020 2020 2020 206b 6579 203d             key =
-0001bb90: 2073 656c 662e 6372 7970 742e 6b65 792e   self.crypt.key.
-0001bba0: 7370 6c69 7428 223a 2229 5b31 5d0a 2020  split(":")[1].  
-0001bbb0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bbd0: 6b65 7920 3d20 7365 6c66 2e63 7279 7074  key = self.crypt
-0001bbe0: 2e6b 6579 0a20 2020 2020 2020 2065 6c73  .key.        els
-0001bbf0: 653a 0a20 2020 2020 2020 2020 2020 206b  e:.            k
-0001bc00: 6579 203d 2022 220a 2020 2020 2020 2020  ey = "".        
-0001bc10: 6966 2073 746f 7265 645f 7061 7373 776f  if stored_passwo
-0001bc20: 7264 2069 7320 4e6f 6e65 3a0a 2020 2020  rd is None:.    
-0001bc30: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0001bc40: 616c 7365 0a20 2020 2020 2020 2065 6c69  alse.        eli
-0001bc50: 6620 7374 6f72 6564 5f70 6173 7377 6f72  f stored_passwor
-0001bc60: 642e 636f 756e 7428 2224 2229 203d 3d20  d.count("$") == 
-0001bc70: 323a 0a20 2020 2020 2020 2020 2020 2028  2:.            (
-0001bc80: 6469 6765 7374 5f61 6c67 2c20 7361 6c74  digest_alg, salt
-0001bc90: 2c20 6861 7368 2920 3d20 7374 6f72 6564  , hash) = stored
-0001bca0: 5f70 6173 7377 6f72 642e 7370 6c69 7428  _password.split(
-0001bcb0: 2224 2229 0a20 2020 2020 2020 2020 2020  "$").           
-0001bcc0: 2068 203d 2073 696d 706c 655f 6861 7368   h = simple_hash
-0001bcd0: 2873 656c 662e 7061 7373 776f 7264 2c20  (self.password, 
-0001bce0: 6b65 792c 2073 616c 742c 2064 6967 6573  key, salt, diges
-0001bcf0: 745f 616c 6729 0a20 2020 2020 2020 2020  t_alg).         
-0001bd00: 2020 2074 656d 705f 7061 7373 203d 2022     temp_pass = "
-0001bd10: 2573 2425 7324 2573 2220 2520 2864 6967  %s$%s$%s" % (dig
-0001bd20: 6573 745f 616c 672c 2073 616c 742c 2068  est_alg, salt, h
-0001bd30: 290a 2020 2020 2020 2020 656c 7365 3a20  ).        else: 
-0001bd40: 2023 206e 6f20 7361 6c74 696e 670a 2020   # no salting.  
-0001bd50: 2020 2020 2020 2020 2020 2320 6775 6573            # gues
-0001bd60: 7320 6469 6765 7374 5f61 6c67 0a20 2020  s digest_alg.   
-0001bd70: 2020 2020 2020 2020 2064 6967 6573 745f           digest_
-0001bd80: 616c 6720 3d20 4449 4745 5354 5f41 4c47  alg = DIGEST_ALG
-0001bd90: 5f42 595f 5349 5a45 2e67 6574 286c 656e  _BY_SIZE.get(len
-0001bda0: 2873 746f 7265 645f 7061 7373 776f 7264  (stored_password
-0001bdb0: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
-0001bdc0: 2020 2020 2069 6620 6e6f 7420 6469 6765       if not dige
-0001bdd0: 7374 5f61 6c67 3a0a 2020 2020 2020 2020  st_alg:.        
-0001bde0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0001bdf0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-0001be00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001be10: 2020 2020 2020 2074 656d 705f 7061 7373         temp_pass
-0001be20: 203d 2073 696d 706c 655f 6861 7368 2873   = simple_hash(s
-0001be30: 656c 662e 7061 7373 776f 7264 2c20 6b65  elf.password, ke
-0001be40: 792c 2022 222c 2064 6967 6573 745f 616c  y, "", digest_al
-0001be50: 6729 0a20 2020 2020 2020 2072 6574 7572  g).        retur
-0001be60: 6e20 7465 6d70 5f70 6173 7320 3d3d 2073  n temp_pass == s
-0001be70: 746f 7265 645f 7061 7373 776f 7264 0a0a  tored_password..
-0001be80: 2020 2020 6465 6620 5f5f 6e65 5f5f 2873      def __ne__(s
-0001be90: 656c 662c 206f 7468 6572 293a 0a20 2020  elf, other):.   
-0001bea0: 2020 2020 2072 6574 7572 6e20 6e6f 7420       return not 
-0001beb0: 7365 6c66 2e5f 5f65 715f 5f28 6f74 6865  self.__eq__(othe
-0001bec0: 7229 0a0a 0a63 6c61 7373 2043 5259 5054  r)...class CRYPT
-0001bed0: 2856 616c 6964 6174 6f72 293a 0a20 2020  (Validator):.   
-0001bee0: 2022 2222 0a20 2020 2045 7861 6d70 6c65   """.    Example
-0001bef0: 733a 0a20 2020 2020 2020 2055 7365 2061  s:.        Use a
-0001bf00: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-0001bf10: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
-0001bf20: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
-0001bf30: 272c 2072 6571 7569 7265 733d 4352 5950  ', requires=CRYP
-0001bf40: 5428 2929 0a0a 2020 2020 656e 636f 6465  T())..    encode
-0001bf50: 7320 7468 6520 7661 6c75 6520 6f6e 2076  s the value on v
-0001bf60: 616c 6964 6174 696f 6e20 7769 7468 2061  alidation with a
-0001bf70: 2064 6967 6573 742e 0a0a 2020 2020 4966   digest...    If
-0001bf80: 206e 6f20 6172 6775 6d65 6e74 7320 6172   no arguments ar
-0001bf90: 6520 7072 6f76 6964 6564 2043 5259 5054  e provided CRYPT
-0001bfa0: 2075 7365 7320 7468 6520 4d44 3520 616c   uses the MD5 al
-0001bfb0: 676f 7269 7468 6d2e 0a20 2020 2049 6620  gorithm..    If 
-0001bfc0: 7468 6520 6b65 7920 6172 6775 6d65 6e74  the key argument
-0001bfd0: 2069 7320 7072 6f76 6964 6564 2074 6865   is provided the
-0001bfe0: 2048 4d41 432b 4d44 3520 616c 676f 7269   HMAC+MD5 algori
-0001bff0: 7468 6d20 6973 2075 7365 642e 0a20 2020  thm is used..   
-0001c000: 2049 6620 7468 6520 6469 6765 7374 5f61   If the digest_a
-0001c010: 6c67 2069 7320 7370 6563 6966 6965 6420  lg is specified 
-0001c020: 7468 6973 2069 7320 7573 6564 2074 6f20  this is used to 
-0001c030: 7265 706c 6163 6520 7468 650a 2020 2020  replace the.    
-0001c040: 4d44 3520 7769 7468 2c20 666f 7220 6578  MD5 with, for ex
-0001c050: 616d 706c 652c 2053 4841 3531 322e 2054  ample, SHA512. T
-0001c060: 6865 2064 6967 6573 745f 616c 6720 6361  he digest_alg ca
-0001c070: 6e20 6265 0a20 2020 2074 6865 206e 616d  n be.    the nam
-0001c080: 6520 6f66 2061 2068 6173 686c 6962 2061  e of a hashlib a
-0001c090: 6c67 6f72 6974 686d 2061 7320 6120 7374  lgorithm as a st
-0001c0a0: 7269 6e67 206f 7220 7468 6520 616c 676f  ring or the algo
-0001c0b0: 7269 7468 6d20 6974 7365 6c66 2e0a 0a20  rithm itself... 
-0001c0c0: 2020 206d 696e 5f6c 656e 6774 6820 6973     min_length is
-0001c0d0: 2074 6865 206d 696e 696d 616c 2070 6173   the minimal pas
-0001c0e0: 7377 6f72 6420 6c65 6e67 7468 2028 6465  sword length (de
-0001c0f0: 6661 756c 7420 3429 202d 2049 535f 5354  fault 4) - IS_ST
-0001c100: 524f 4e47 2066 6f72 2073 6572 696f 7573  RONG for serious
-0001c110: 2073 6563 7572 6974 790a 2020 2020 6572   security.    er
-0001c120: 726f 725f 6d65 7373 6167 6520 6973 2074  ror_message is t
-0001c130: 6865 206d 6573 7361 6765 2069 6620 7061  he message if pa
-0001c140: 7373 776f 7264 2069 7320 746f 6f20 7368  ssword is too sh
-0001c150: 6f72 740a 0a20 2020 204e 6f74 6963 6520  ort..    Notice 
-0001c160: 7468 6174 2061 6e20 656d 7074 7920 7061  that an empty pa
-0001c170: 7373 776f 7264 2069 7320 6163 6365 7074  ssword is accept
-0001c180: 6564 2062 7574 2069 6e76 616c 6964 2e20  ed but invalid. 
-0001c190: 4974 2077 696c 6c20 6e6f 7420 616c 6c6f  It will not allo
-0001c1a0: 7720 6c6f 6769 6e20 6261 636b 2e0a 2020  w login back..  
-0001c1b0: 2020 5374 6f72 6573 206a 756e 6b20 6173    Stores junk as
-0001c1c0: 2068 6173 6865 6420 7061 7373 776f 7264   hashed password
-0001c1d0: 2e0a 0a20 2020 2053 7065 6369 6679 2061  ...    Specify a
-0001c1e0: 6e20 616c 676f 7269 7468 6d20 6f72 2062  n algorithm or b
-0001c1f0: 7920 6465 6661 756c 7420 7765 2077 696c  y default we wil
-0001c200: 6c20 7573 6520 7368 6135 3132 2e0a 0a20  l use sha512... 
-0001c210: 2020 2054 7970 6963 616c 2061 7661 696c     Typical avail
-0001c220: 6162 6c65 2061 6c67 6f72 6974 686d 733a  able algorithms:
-0001c230: 0a20 2020 2020 206d 6435 2c20 7368 6131  .      md5, sha1
-0001c240: 2c20 7368 6132 3234 2c20 7368 6132 3536  , sha224, sha256
-0001c250: 2c20 7368 6133 3834 2c20 7368 6135 3132  , sha384, sha512
-0001c260: 0a0a 2020 2020 4966 2073 616c 742c 2069  ..    If salt, i
-0001c270: 7420 6861 7368 6573 2061 2070 6173 7377  t hashes a passw
-0001c280: 6f72 6420 7769 7468 2061 2073 616c 742e  ord with a salt.
-0001c290: 0a20 2020 2049 6620 7361 6c74 2069 7320  .    If salt is 
-0001c2a0: 5472 7565 2c20 7468 6973 206d 6574 686f  True, this metho
-0001c2b0: 6420 7769 6c6c 2061 7574 6f6d 6174 6963  d will automatic
-0001c2c0: 616c 6c79 2067 656e 6572 6174 6520 6f6e  ally generate on
-0001c2d0: 652e 0a20 2020 2045 6974 6865 7220 6361  e..    Either ca
-0001c2e0: 7365 2069 7420 7265 7475 726e 7320 616e  se it returns an
-0001c2f0: 2065 6e63 7279 7074 6564 2070 6173 7377   encrypted passw
-0001c300: 6f72 6420 7374 7269 6e67 2069 6e20 7468  ord string in th
-0001c310: 6520 666f 6c6c 6f77 696e 6720 666f 726d  e following form
-0001c320: 6174 3a0a 0a20 2020 2020 203c 616c 676f  at:..      <algo
-0001c330: 7269 7468 6d3e 243c 7361 6c74 3e24 3c68  rithm>$<salt>$<h
-0001c340: 6173 683e 0a0a 2020 2020 496d 706f 7274  ash>..    Import
-0001c350: 616e 743a 2068 6173 6865 6420 7061 7373  ant: hashed pass
-0001c360: 776f 7264 2069 7320 7265 7475 726e 6564  word is returned
-0001c370: 2061 7320 6120 4c61 7a79 4372 7970 7420   as a LazyCrypt 
-0001c380: 6f62 6a65 6374 2061 6e64 2063 6f6d 7075  object and compu
-0001c390: 7465 6420 6f6e 6c79 2069 6620 6e65 6564  ted only if need
-0001c3a0: 6564 2e0a 2020 2020 5468 6520 4c61 7379  ed..    The Lasy
-0001c3b0: 4372 7970 7420 6f62 6a65 6374 2061 6c73  Crypt object als
-0001c3c0: 6f20 6b6e 6f77 7320 686f 7720 746f 2063  o knows how to c
-0001c3d0: 6f6d 7061 7265 2069 7473 656c 6620 7769  ompare itself wi
-0001c3e0: 7468 2061 6e20 6578 6973 7469 6e67 2073  th an existing s
-0001c3f0: 616c 7465 6420 7061 7373 776f 7264 0a0a  alted password..
-0001c400: 2020 2020 5375 7070 6f72 7473 2073 7461      Supports sta
-0001c410: 6e64 6172 6420 616c 676f 7269 7468 6d73  ndard algorithms
-0001c420: 0a0a 2020 2020 2020 2020 3e3e 3e20 666f  ..        >>> fo
-0001c430: 7220 616c 6720 696e 2028 276d 6435 272c  r alg in ('md5',
-0001c440: 2773 6861 3127 2c27 7368 6132 3536 272c  'sha1','sha256',
-0001c450: 2773 6861 3338 3427 2c27 7368 6135 3132  'sha384','sha512
-0001c460: 2729 3a0a 2020 2020 2020 2020 2e2e 2e20  '):.        ... 
-0001c470: 2020 2020 7072 696e 7428 7374 7228 4352      print(str(CR
-0001c480: 5950 5428 6469 6765 7374 5f61 6c67 3d61  YPT(digest_alg=a
-0001c490: 6c67 2c73 616c 743d 5472 7565 2928 2774  lg,salt=True)('t
-0001c4a0: 6573 7427 295b 305d 2929 0a20 2020 2020  est')[0])).     
-0001c4b0: 2020 206d 6435 242e 2e2e 242e 2e2e 0a20     md5$...$.... 
-0001c4c0: 2020 2020 2020 2073 6861 3124 2e2e 2e24         sha1$...$
-0001c4d0: 2e2e 2e0a 2020 2020 2020 2020 7368 6132  ....        sha2
-0001c4e0: 3536 242e 2e2e 242e 2e2e 0a20 2020 2020  56$...$....     
-0001c4f0: 2020 2073 6861 3338 3424 2e2e 2e24 2e2e     sha384$...$..
-0001c500: 2e0a 2020 2020 2020 2020 7368 6135 3132  ..        sha512
-0001c510: 242e 2e2e 242e 2e2e 0a0a 2020 2020 5468  $...$.....    Th
-0001c520: 6520 7379 6e74 6178 2069 7320 616c 7761  e syntax is alwa
-0001c530: 7973 2061 6c67 2473 616c 7424 6861 7368  ys alg$salt$hash
-0001c540: 0a0a 2020 2020 5375 7070 6f72 7473 2066  ..    Supports f
-0001c550: 6f72 2070 626b 6466 320a 0a20 2020 2020  or pbkdf2..     
-0001c560: 2020 203e 3e3e 2061 6c67 203d 2027 7062     >>> alg = 'pb
-0001c570: 6b64 6632 2831 3030 302c 3230 2c73 6861  kdf2(1000,20,sha
-0001c580: 3531 3229 270a 2020 2020 2020 2020 3e3e  512)'.        >>
-0001c590: 3e20 7072 696e 7428 7374 7228 4352 5950  > print(str(CRYP
-0001c5a0: 5428 6469 6765 7374 5f61 6c67 3d61 6c67  T(digest_alg=alg
-0001c5b0: 2c73 616c 743d 5472 7565 2928 2774 6573  ,salt=True)('tes
-0001c5c0: 7427 295b 305d 2929 0a20 2020 2020 2020  t')[0])).       
-0001c5d0: 2070 626b 6466 3228 3130 3030 2c32 302c   pbkdf2(1000,20,
-0001c5e0: 7368 6135 3132 2924 2e2e 2e24 2e2e 2e0a  sha512)$...$....
-0001c5f0: 0a20 2020 2041 6e20 6f70 7469 6f6e 616c  .    An optional
-0001c600: 2068 6d61 635f 6b65 7920 6361 6e20 6265   hmac_key can be
-0001c610: 2073 7065 6369 6669 6564 2061 6e64 2069   specified and i
-0001c620: 7420 6973 2075 7365 6420 6173 2073 616c  t is used as sal
-0001c630: 7420 7072 6566 6978 0a0a 2020 2020 2020  t prefix..      
-0001c640: 2020 3e3e 3e20 6120 3d20 7374 7228 4352    >>> a = str(CR
-0001c650: 5950 5428 6469 6765 7374 5f61 6c67 3d27  YPT(digest_alg='
-0001c660: 6d64 3527 2c6b 6579 3d27 6d79 6b65 7927  md5',key='mykey'
-0001c670: 2c73 616c 743d 5472 7565 2928 2774 6573  ,salt=True)('tes
-0001c680: 7427 295b 305d 290a 2020 2020 2020 2020  t')[0]).        
-0001c690: 3e3e 3e20 7072 696e 7428 6129 0a20 2020  >>> print(a).   
-0001c6a0: 2020 2020 206d 6435 242e 2e2e 242e 2e2e       md5$...$...
-0001c6b0: 0a0a 2020 2020 4576 656e 2069 6620 7468  ..    Even if th
-0001c6c0: 6520 616c 676f 7269 7468 6d20 6368 616e  e algorithm chan
-0001c6d0: 6765 7320 7468 6520 6861 7368 2063 616e  ges the hash can
-0001c6e0: 2073 7469 6c6c 2062 6520 7661 6c69 6461   still be valida
-0001c6f0: 7465 640a 0a20 2020 2020 2020 203e 3e3e  ted..        >>>
-0001c700: 2043 5259 5054 2864 6967 6573 745f 616c   CRYPT(digest_al
-0001c710: 673d 2773 6861 3127 2c6b 6579 3d27 6d79  g='sha1',key='my
-0001c720: 6b65 7927 2c73 616c 743d 5472 7565 2928  key',salt=True)(
-0001c730: 2774 6573 7427 295b 305d 203d 3d20 610a  'test')[0] == a.
-0001c740: 2020 2020 2020 2020 5472 7565 0a0a 2020          True..  
-0001c750: 2020 4966 206e 6f20 7361 6c74 2069 7320    If no salt is 
-0001c760: 7370 6563 6966 6965 6420 4352 5950 5420  specified CRYPT 
-0001c770: 6361 6e20 6775 6573 7320 7468 6520 616c  can guess the al
-0001c780: 676f 7269 7468 6d73 2066 726f 6d20 6c65  gorithms from le
-0001c790: 6e67 7468 3a0a 0a20 2020 2020 2020 203e  ngth:..        >
-0001c7a0: 3e3e 2061 203d 2073 7472 2843 5259 5054  >> a = str(CRYPT
-0001c7b0: 2864 6967 6573 745f 616c 673d 2773 6861  (digest_alg='sha
-0001c7c0: 3127 2c73 616c 743d 4661 6c73 6529 2827  1',salt=False)('
-0001c7d0: 7465 7374 2729 5b30 5d29 0a20 2020 2020  test')[0]).     
-0001c7e0: 2020 203e 3e3e 2061 0a20 2020 2020 2020     >>> a.       
-0001c7f0: 2027 7368 6131 2424 6139 3461 3866 6535   'sha1$$a94a8fe5
-0001c800: 6363 6231 3962 6136 3163 3463 3038 3733  ccb19ba61c4c0873
-0001c810: 6433 3931 6539 3837 3938 3266 6262 6433  d391e987982fbbd3
-0001c820: 270a 2020 2020 2020 2020 3e3e 3e20 4352  '.        >>> CR
-0001c830: 5950 5428 6469 6765 7374 5f61 6c67 3d27  YPT(digest_alg='
-0001c840: 7368 6131 272c 7361 6c74 3d46 616c 7365  sha1',salt=False
-0001c850: 2928 2774 6573 7427 295b 305d 203d 3d20  )('test')[0] == 
-0001c860: 610a 2020 2020 2020 2020 5472 7565 0a20  a.        True. 
-0001c870: 2020 2020 2020 203e 3e3e 2043 5259 5054         >>> CRYPT
-0001c880: 2864 6967 6573 745f 616c 673d 2773 6861  (digest_alg='sha
-0001c890: 3127 2c73 616c 743d 4661 6c73 6529 2827  1',salt=False)('
-0001c8a0: 7465 7374 2729 5b30 5d20 3d3d 2061 5b36  test')[0] == a[6
-0001c8b0: 3a5d 0a20 2020 2020 2020 2054 7275 650a  :].        True.
-0001c8c0: 2020 2020 2020 2020 3e3e 3e20 4352 5950          >>> CRYP
-0001c8d0: 5428 6469 6765 7374 5f61 6c67 3d27 6d64  T(digest_alg='md
-0001c8e0: 3527 2c73 616c 743d 4661 6c73 6529 2827  5',salt=False)('
-0001c8f0: 7465 7374 2729 5b30 5d20 3d3d 2061 0a20  test')[0] == a. 
-0001c900: 2020 2020 2020 2054 7275 650a 2020 2020         True.    
-0001c910: 2020 2020 3e3e 3e20 4352 5950 5428 6469      >>> CRYPT(di
-0001c920: 6765 7374 5f61 6c67 3d27 6d64 3527 2c73  gest_alg='md5',s
-0001c930: 616c 743d 4661 6c73 6529 2827 7465 7374  alt=False)('test
-0001c940: 2729 5b30 5d20 3d3d 2061 5b36 3a5d 0a20  ')[0] == a[6:]. 
-0001c950: 2020 2020 2020 2054 7275 650a 2020 2020         True.    
-0001c960: 2222 220a 0a20 2020 2053 5441 5253 203d  """..    STARS =
-0001c970: 2022 2a2a 2a2a 2a2a 220a 0a20 2020 2064   "******"..    d
-0001c980: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-0001c990: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0001c9a0: 2020 206b 6579 3d4e 6f6e 652c 0a20 2020     key=None,.   
-0001c9b0: 2020 2020 2064 6967 6573 745f 616c 673d       digest_alg=
-0001c9c0: 2270 626b 6466 3228 3130 3030 2c32 302c  "pbkdf2(1000,20,
-0001c9d0: 7368 6135 3132 2922 2c0a 2020 2020 2020  sha512)",.      
-0001c9e0: 2020 6d69 6e5f 6c65 6e67 7468 3d30 2c0a    min_length=0,.
-0001c9f0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-0001ca00: 7373 6167 653d 2254 6f6f 2073 686f 7274  ssage="Too short
-0001ca10: 222c 0a20 2020 2020 2020 2073 616c 743d  ",.        salt=
-0001ca20: 5472 7565 2c0a 2020 2020 2020 2020 6d61  True,.        ma
-0001ca30: 785f 6c65 6e67 7468 3d31 3032 342c 0a20  x_length=1024,. 
-0001ca40: 2020 2029 3a0a 2020 2020 2020 2020 2222     ):.        ""
-0001ca50: 220a 2020 2020 2020 2020 696d 706f 7274  ".        import
-0001ca60: 616e 742c 2064 6967 6573 745f 616c 673d  ant, digest_alg=
-0001ca70: 276d 6435 2720 6973 206e 6f74 2074 6865  'md5' is not the
-0001ca80: 2064 6566 6175 6c74 2068 6173 6869 6e67   default hashing
-0001ca90: 2061 6c67 6f72 6974 686d 2066 6f72 0a20   algorithm for. 
-0001caa0: 2020 2020 2020 2077 6562 3270 792e 2054         web2py. T
-0001cab0: 6869 7320 6973 206f 6e6c 7920 616e 2065  his is only an e
-0001cac0: 7861 6d70 6c65 206f 6620 7573 6167 6520  xample of usage 
-0001cad0: 6f66 2074 6869 7320 6675 6e63 7469 6f6e  of this function
-0001cae0: 2e0a 0a20 2020 2020 2020 2054 6865 2061  ...        The a
-0001caf0: 6374 7561 6c20 6861 7368 2061 6c67 6f72  ctual hash algor
-0001cb00: 6974 686d 2069 7320 6465 7465 726d 696e  ithm is determin
-0001cb10: 6564 2066 726f 6d20 7468 6520 6b65 7920  ed from the key 
-0001cb20: 7768 6963 6820 6973 0a20 2020 2020 2020  which is.       
-0001cb30: 2067 656e 6572 6174 6564 2062 7920 7765   generated by we
-0001cb40: 6232 7079 2069 6e20 746f 6f6c 732e 7079  b2py in tools.py
-0001cb50: 2e20 5468 6973 2064 6566 6175 6c74 7320  . This defaults 
-0001cb60: 746f 2068 6d61 632b 7368 6135 3132 2e0a  to hmac+sha512..
-0001cb70: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001cb80: 2020 2020 7365 6c66 2e6b 6579 203d 206b      self.key = k
-0001cb90: 6579 0a20 2020 2020 2020 2073 656c 662e  ey.        self.
-0001cba0: 6469 6765 7374 5f61 6c67 203d 2064 6967  digest_alg = dig
-0001cbb0: 6573 745f 616c 670a 2020 2020 2020 2020  est_alg.        
-0001cbc0: 7365 6c66 2e6d 696e 5f6c 656e 6774 6820  self.min_length 
-0001cbd0: 3d20 6d69 6e5f 6c65 6e67 7468 0a20 2020  = min_length.   
-0001cbe0: 2020 2020 2073 656c 662e 6d61 785f 6c65       self.max_le
-0001cbf0: 6e67 7468 203d 206d 6178 5f6c 656e 6774  ngth = max_lengt
-0001cc00: 680a 2020 2020 2020 2020 7365 6c66 2e65  h.        self.e
-0001cc10: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
-0001cc20: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
-0001cc30: 2020 2020 2073 656c 662e 7361 6c74 203d       self.salt =
-0001cc40: 2073 616c 740a 0a20 2020 2064 6566 2076   salt..    def v
-0001cc50: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
-0001cc60: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
-0001cc70: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-0001cc80: 2076 616c 7565 203d 3d20 7365 6c66 2e53   value == self.S
-0001cc90: 5441 5253 3a0a 2020 2020 2020 2020 2020  TARS:.          
-0001cca0: 2020 7265 7475 726e 204e 6f6e 650a 2020    return None.  
-0001ccb0: 2020 2020 2020 7620 3d20 7661 6c75 6520        v = value 
-0001ccc0: 616e 6420 7374 7228 7661 6c75 6529 5b3a  and str(value)[:
-0001ccd0: 2073 656c 662e 6d61 785f 6c65 6e67 7468   self.max_length
-0001cce0: 5d0a 2020 2020 2020 2020 6966 206e 6f74  ].        if not
-0001ccf0: 2076 206f 7220 6c65 6e28 7629 203c 2073   v or len(v) < s
-0001cd00: 656c 662e 6d69 6e5f 6c65 6e67 7468 3a0a  elf.min_length:.
-0001cd10: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001cd20: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-0001cd30: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-0001cd40: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-0001cd50: 7361 6765 2929 0a20 2020 2020 2020 2069  sage)).        i
-0001cd60: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-0001cd70: 7565 2c20 4c61 7a79 4372 7970 7429 3a0a  ue, LazyCrypt):.
-0001cd80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001cd90: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
-0001cda0: 2072 6574 7572 6e20 4c61 7a79 4372 7970   return LazyCryp
-0001cdb0: 7428 7365 6c66 2c20 7661 6c75 6529 0a0a  t(self, value)..
-0001cdc0: 2020 2020 6465 6620 666f 726d 6174 7465      def formatte
-0001cdd0: 7228 7365 6c66 2c20 7661 6c75 6529 3a0a  r(self, value):.
-0001cde0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001cdf0: 656c 662e 5354 4152 530a 0a0a 2320 2065  elf.STARS...#  e
-0001ce00: 6e74 726f 7079 2063 616c 6375 6c61 746f  ntropy calculato
-0001ce10: 7220 666f 7220 4953 5f53 5452 4f4e 470a  r for IS_STRONG.
-0001ce20: 230a 6c6f 7765 7273 6574 203d 2066 726f  #.lowerset = fro
-0001ce30: 7a65 6e73 6574 2862 2261 6263 6465 6667  zenset(b"abcdefg
-0001ce40: 6869 6a6b 6c6d 6e6f 7071 7273 7475 7677  hijklmnopqrstuvw
-0001ce50: 7879 7a22 290a 7570 7065 7273 6574 203d  xyz").upperset =
-0001ce60: 2066 726f 7a65 6e73 6574 2862 2241 4243   frozenset(b"ABC
-0001ce70: 4445 4647 4849 4a4b 4c4d 4e4f 5051 5253  DEFGHIJKLMNOPQRS
-0001ce80: 5455 5657 5859 5a22 290a 6e75 6d62 6572  TUVWXYZ").number
-0001ce90: 7365 7420 3d20 6672 6f7a 656e 7365 7428  set = frozenset(
-0001cea0: 6222 3031 3233 3435 3637 3839 2229 0a73  b"0123456789").s
-0001ceb0: 796d 3173 6574 203d 2066 726f 7a65 6e73  ym1set = frozens
-0001cec0: 6574 2862 2221 4023 2425 5e26 2a28 2920  et(b"!@#$%^&*() 
-0001ced0: 2229 0a73 796d 3273 6574 203d 2066 726f  ").sym2set = fro
-0001cee0: 7a65 6e73 6574 2862 227e 602d 5f3d 2b5b  zenset(b"~`-_=+[
-0001cef0: 5d7b 7d5c 5c7c 3b3a 275c 222c 2e3c 3e3f  ]{}\\|;:'\",.<>?
-0001cf00: 2f22 290a 6f74 6865 7273 6574 203d 2066  /").otherset = f
-0001cf10: 726f 7a65 6e73 6574 2862 2222 2e6a 6f69  rozenset(b"".joi
-0001cf20: 6e28 6368 7228 7829 2069 6620 5059 3220  n(chr(x) if PY2 
-0001cf30: 656c 7365 2063 6872 2878 292e 656e 636f  else chr(x).enco
-0001cf40: 6465 2829 2066 6f72 2078 2069 6e20 7261  de() for x in ra
-0001cf50: 6e67 6528 3235 3629 2929 0a0a 0a64 6566  nge(256)))...def
-0001cf60: 2063 616c 635f 656e 7472 6f70 7928 7374   calc_entropy(st
-0001cf70: 7269 6e67 293a 0a20 2020 2022 2222 6361  ring):.    """ca
-0001cf80: 6c63 756c 6174 6573 2061 2073 696d 706c  lculates a simpl
-0001cf90: 6520 656e 7472 6f70 7920 666f 7220 6120  e entropy for a 
-0001cfa0: 6769 7665 6e20 7374 7269 6e67 2222 220a  given string""".
-0001cfb0: 2020 2020 616c 7068 6162 6574 203d 2030      alphabet = 0
-0001cfc0: 2020 2320 616c 7068 6162 6574 2073 697a    # alphabet siz
-0001cfd0: 650a 2020 2020 6f74 6865 7220 3d20 7365  e.    other = se
-0001cfe0: 7428 290a 2020 2020 7365 656e 203d 2073  t().    seen = s
-0001cff0: 6574 2829 0a20 2020 206c 6173 7473 6574  et().    lastset
-0001d000: 203d 204e 6f6e 650a 2020 2020 7374 7269   = None.    stri
-0001d010: 6e67 203d 2074 6f5f 6279 7465 7328 7374  ng = to_bytes(st
-0001d020: 7269 6e67 206f 7220 2222 290a 2020 2020  ring or "").    
-0001d030: 666f 7220 6320 696e 2073 7472 696e 673a  for c in string:
-0001d040: 0a20 2020 2020 2020 2023 2063 6c61 7373  .        # class
-0001d050: 6966 7920 7468 6973 2063 6861 7261 6374  ify this charact
-0001d060: 6572 0a20 2020 2020 2020 2069 6e73 6574  er.        inset
-0001d070: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0001d080: 666f 7220 6373 6574 2069 6e20 286c 6f77  for cset in (low
-0001d090: 6572 7365 742c 2075 7070 6572 7365 742c  erset, upperset,
-0001d0a0: 206e 756d 6265 7273 6574 2c20 7379 6d31   numberset, sym1
-0001d0b0: 7365 742c 2073 796d 3273 6574 2c20 6f74  set, sym2set, ot
-0001d0c0: 6865 7273 6574 293a 0a20 2020 2020 2020  herset):.       
-0001d0d0: 2020 2020 2069 6620 6320 696e 2063 7365       if c in cse
-0001d0e0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0001d0f0: 2020 2069 6e73 6574 203d 2063 7365 740a     inset = cset.
-0001d100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d110: 6272 6561 6b0a 2020 2020 2020 2020 6173  break.        as
-0001d120: 7365 7274 2069 6e73 6574 2069 7320 6e6f  sert inset is no
-0001d130: 7420 4e6f 6e65 0a20 2020 2020 2020 2023  t None.        #
-0001d140: 2063 616c 6375 6c61 7465 2065 6666 6563   calculate effec
-0001d150: 7420 6f66 2063 6861 7261 6374 6572 206f  t of character o
-0001d160: 6e20 616c 7068 6162 6574 2073 697a 650a  n alphabet size.
-0001d170: 2020 2020 2020 2020 6966 2069 6e73 6574          if inset
-0001d180: 206e 6f74 2069 6e20 7365 656e 3a0a 2020   not in seen:.  
-0001d190: 2020 2020 2020 2020 2020 7365 656e 2e61            seen.a
-0001d1a0: 6464 2869 6e73 6574 290a 2020 2020 2020  dd(inset).      
-0001d1b0: 2020 2020 2020 616c 7068 6162 6574 202b        alphabet +
-0001d1c0: 3d20 6c65 6e28 696e 7365 7429 2020 2320  = len(inset)  # 
-0001d1d0: 6372 6564 6974 2066 6f72 2061 206e 6577  credit for a new
-0001d1e0: 2063 6861 7261 6374 6572 2073 6574 0a20   character set. 
-0001d1f0: 2020 2020 2020 2065 6c69 6620 6320 6e6f         elif c no
-0001d200: 7420 696e 206f 7468 6572 3a0a 2020 2020  t in other:.    
-0001d210: 2020 2020 2020 2020 616c 7068 6162 6574          alphabet
-0001d220: 202b 3d20 3120 2023 2063 7265 6469 7420   += 1  # credit 
-0001d230: 666f 7220 756e 6971 7565 2063 6861 7261  for unique chara
-0001d240: 6374 6572 730a 2020 2020 2020 2020 2020  cters.          
-0001d250: 2020 6f74 6865 722e 6164 6428 6329 0a20    other.add(c). 
-0001d260: 2020 2020 2020 2069 6620 696e 7365 7420         if inset 
-0001d270: 6973 206e 6f74 206c 6173 7473 6574 3a0a  is not lastset:.
-0001d280: 2020 2020 2020 2020 2020 2020 616c 7068              alph
-0001d290: 6162 6574 202b 3d20 3120 2023 2063 7265  abet += 1  # cre
-0001d2a0: 6469 7420 666f 7220 7365 7420 7472 616e  dit for set tran
-0001d2b0: 7369 7469 6f6e 730a 2020 2020 2020 2020  sitions.        
-0001d2c0: 2020 2020 6c61 7374 7365 7420 3d20 6373      lastset = cs
-0001d2d0: 6574 0a20 2020 2065 6e74 726f 7079 203d  et.    entropy =
-0001d2e0: 206c 656e 2873 7472 696e 6729 202a 206d   len(string) * m
-0001d2f0: 6174 682e 6c6f 6728 616c 7068 6162 6574  ath.log(alphabet
-0001d300: 206f 7220 3129 202f 2030 2e36 3933 3134   or 1) / 0.69314
-0001d310: 3731 3830 3535 3939 3435 3320 2023 206d  71805599453  # m
-0001d320: 6174 682e 6c6f 6728 3229 0a20 2020 2072  ath.log(2).    r
-0001d330: 6574 7572 6e20 726f 756e 6428 656e 7472  eturn round(entr
-0001d340: 6f70 792c 2032 290a 0a0a 636c 6173 7320  opy, 2)...class 
-0001d350: 4953 5f53 5452 4f4e 4728 5661 6c69 6461  IS_STRONG(Valida
-0001d360: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
-0001d370: 2020 4578 616d 706c 6573 3a0a 2020 2020    Examples:.    
-0001d380: 2020 2020 5573 6520 6173 3a3a 0a0a 2020      Use as::..  
-0001d390: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
-0001d3a0: 5f74 7970 653d 2770 6173 7377 6f72 6427  _type='password'
-0001d3b0: 2c20 5f6e 616d 653d 2770 6173 7377 6427  , _name='passwd'
-0001d3c0: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
-0001d3d0: 7175 6972 6573 3d49 535f 5354 524f 4e47  quires=IS_STRONG
-0001d3e0: 286d 696e 3d31 302c 2073 7065 6369 616c  (min=10, special
-0001d3f0: 3d32 2c20 7570 7065 723d 3229 290a 0a20  =2, upper=2)).. 
-0001d400: 2020 2065 6e66 6f72 6365 7320 636f 6d70     enforces comp
-0001d410: 6c65 7869 7479 2072 6571 7569 7265 6d65  lexity requireme
-0001d420: 6e74 7320 6f6e 2061 2066 6965 6c64 0a0a  nts on a field..
-0001d430: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
-0001d440: 5452 4f4e 4728 6573 3d54 7275 6529 2827  TRONG(es=True)('
-0001d450: 4162 6364 3132 3334 2729 0a20 2020 2020  Abcd1234').     
-0001d460: 2020 2028 2741 6263 6431 3233 3427 2c0a     ('Abcd1234',.
-0001d470: 2020 2020 2020 2020 2027 4d75 7374 2069           'Must i
-0001d480: 6e63 6c75 6465 2061 7420 6c65 6173 7420  nclude at least 
-0001d490: 3120 6f66 2074 6865 2066 6f6c 6c6f 7769  1 of the followi
-0001d4a0: 6e67 3a20 7e21 4023 2425 5e26 2a28 295f  ng: ~!@#$%^&*()_
-0001d4b0: 2b2d 3d3f 3c3e 2c2e 3a3b 7b7d 5b5d 7c27  +-=?<>,.:;{}[]|'
-0001d4c0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-0001d4d0: 5f53 5452 4f4e 4728 6573 3d54 7275 6529  _STRONG(es=True)
-0001d4e0: 2827 4162 6364 3132 3334 2127 290a 2020  ('Abcd1234!').  
-0001d4f0: 2020 2020 2020 2827 4162 6364 3132 3334        ('Abcd1234
-0001d500: 2127 2c20 4e6f 6e65 290a 2020 2020 2020  !', None).      
-0001d510: 2020 3e3e 3e20 4953 5f53 5452 4f4e 4728    >>> IS_STRONG(
-0001d520: 6573 3d54 7275 652c 2065 6e74 726f 7079  es=True, entropy
-0001d530: 3d31 2928 2761 2729 0a20 2020 2020 2020  =1)('a').       
-0001d540: 2028 2761 272c 204e 6f6e 6529 0a20 2020   ('a', None).   
-0001d550: 2020 2020 203e 3e3e 2049 535f 5354 524f       >>> IS_STRO
-0001d560: 4e47 2865 733d 5472 7565 2c20 656e 7472  NG(es=True, entr
-0001d570: 6f70 793d 312c 206d 696e 3d32 2928 2761  opy=1, min=2)('a
-0001d580: 2729 0a20 2020 2020 2020 2028 2761 272c  ').        ('a',
-0001d590: 2027 4d69 6e69 6d75 6d20 6c65 6e67 7468   'Minimum length
-0001d5a0: 2069 7320 3227 290a 2020 2020 2020 2020   is 2').        
-0001d5b0: 3e3e 3e20 4953 5f53 5452 4f4e 4728 6573  >>> IS_STRONG(es
-0001d5c0: 3d54 7275 652c 2065 6e74 726f 7079 3d31  =True, entropy=1
-0001d5d0: 3030 2928 2761 6263 3132 3327 290a 2020  00)('abc123').  
-0001d5e0: 2020 2020 2020 2827 6162 6331 3233 272c        ('abc123',
-0001d5f0: 2027 5061 7373 776f 7264 2074 6f6f 2073   'Password too s
-0001d600: 696d 706c 6520 2833 322e 3335 2f31 3030  imple (32.35/100
-0001d610: 2927 290a 2020 2020 2020 2020 3e3e 3e20  )').        >>> 
-0001d620: 4953 5f53 5452 4f4e 4728 6573 3d54 7275  IS_STRONG(es=Tru
-0001d630: 652c 2065 6e74 726f 7079 3d31 3030 2928  e, entropy=100)(
-0001d640: 2761 6e64 2729 0a20 2020 2020 2020 2028  'and').        (
-0001d650: 2761 6e64 272c 2027 5061 7373 776f 7264  'and', 'Password
-0001d660: 2074 6f6f 2073 696d 706c 6520 2831 342e   too simple (14.
-0001d670: 3537 2f31 3030 2927 290a 2020 2020 2020  57/100)').      
-0001d680: 2020 3e3e 3e20 4953 5f53 5452 4f4e 4728    >>> IS_STRONG(
-0001d690: 6573 3d54 7275 652c 2065 6e74 726f 7079  es=True, entropy
-0001d6a0: 3d31 3030 2928 2761 6161 2729 0a20 2020  =100)('aaa').   
-0001d6b0: 2020 2020 2028 2761 6161 272c 2027 5061       ('aaa', 'Pa
-0001d6c0: 7373 776f 7264 2074 6f6f 2073 696d 706c  ssword too simpl
-0001d6d0: 6520 2831 342e 3432 2f31 3030 2927 290a  e (14.42/100)').
-0001d6e0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
-0001d6f0: 5452 4f4e 4728 6573 3d54 7275 652c 2065  TRONG(es=True, e
-0001d700: 6e74 726f 7079 3d31 3030 2928 2761 3164  ntropy=100)('a1d
-0001d710: 2729 0a20 2020 2020 2020 2028 2761 3164  ').        ('a1d
-0001d720: 272c 2027 5061 7373 776f 7264 2074 6f6f  ', 'Password too
-0001d730: 2073 696d 706c 6520 2831 352e 3937 2f31   simple (15.97/1
-0001d740: 3030 2927 290a 2020 2020 2020 2020 3e3e  00)').        >>
-0001d750: 3e20 4953 5f53 5452 4f4e 4728 6573 3d54  > IS_STRONG(es=T
-0001d760: 7275 652c 2065 6e74 726f 7079 3d31 3030  rue, entropy=100
-0001d770: 2928 2761 c3b1 6427 290a 2020 2020 2020  )('a..d').      
-0001d780: 2020 2827 615c 5c78 6333 5c5c 7862 3164    ('a\\xc3\\xb1d
-0001d790: 272c 2027 5061 7373 776f 7264 2074 6f6f  ', 'Password too
-0001d7a0: 2073 696d 706c 6520 2833 312e 3236 2f31   simple (31.26/1
-0001d7b0: 3029 2729 0a0a 2020 2020 2222 220a 0a20  0)')..    """.. 
-0001d7c0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-0001d7d0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0001d7e0: 2020 2020 2020 206d 696e 3d4e 6f6e 652c         min=None,
-0001d7f0: 0a20 2020 2020 2020 206d 6178 3d4e 6f6e  .        max=Non
-0001d800: 652c 0a20 2020 2020 2020 2075 7070 6572  e,.        upper
-0001d810: 3d4e 6f6e 652c 0a20 2020 2020 2020 206c  =None,.        l
-0001d820: 6f77 6572 3d4e 6f6e 652c 0a20 2020 2020  ower=None,.     
-0001d830: 2020 206e 756d 6265 723d 4e6f 6e65 2c0a     number=None,.
-0001d840: 2020 2020 2020 2020 656e 7472 6f70 793d          entropy=
-0001d850: 4e6f 6e65 2c0a 2020 2020 2020 2020 7370  None,.        sp
-0001d860: 6563 6961 6c3d 4e6f 6e65 2c0a 2020 2020  ecial=None,.    
-0001d870: 2020 2020 7370 6563 6961 6c73 3d72 227e      specials=r"~
-0001d880: 2140 2324 255e 262a 2829 5f2b 2d3d 3f3c  !@#$%^&*()_+-=?<
-0001d890: 3e2c 2e3a 3b7b 7d5b 5d7c 222c 0a20 2020  >,.:;{}[]|",.   
-0001d8a0: 2020 2020 2069 6e76 616c 6964 3d27 2022       invalid=' "
-0001d8b0: 272c 0a20 2020 2020 2020 2065 7272 6f72  ',.        error
-0001d8c0: 5f6d 6573 7361 6765 3d4e 6f6e 652c 0a20  _message=None,. 
-0001d8d0: 2020 2020 2020 2065 733d 4661 6c73 652c         es=False,
-0001d8e0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-0001d8f0: 7365 6c66 2e65 6e74 726f 7079 203d 2065  self.entropy = e
-0001d900: 6e74 726f 7079 0a20 2020 2020 2020 2069  ntropy.        i
-0001d910: 6620 656e 7472 6f70 7920 6973 204e 6f6e  f entropy is Non
-0001d920: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-0001d930: 2065 6e66 6f72 6365 2064 6566 6175 6c74   enforce default
-0001d940: 2072 6571 7569 7265 6d65 6e74 730a 2020   requirements.  
-0001d950: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-0001d960: 696e 203d 2038 2069 6620 6d69 6e20 6973  in = 8 if min is
-0001d970: 204e 6f6e 6520 656c 7365 206d 696e 0a20   None else min. 
-0001d980: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001d990: 6d61 7820 3d20 6d61 7820 2023 2077 6173  max = max  # was
-0001d9a0: 2032 302c 2062 7574 2074 6861 7420 646f   20, but that do
-0001d9b0: 6573 6e27 7420 6d61 6b65 2073 656e 7365  esn't make sense
-0001d9c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0001d9d0: 662e 7570 7065 7220 3d20 3120 6966 2075  f.upper = 1 if u
-0001d9e0: 7070 6572 2069 7320 4e6f 6e65 2065 6c73  pper is None els
-0001d9f0: 6520 7570 7065 720a 2020 2020 2020 2020  e upper.        
-0001da00: 2020 2020 7365 6c66 2e6c 6f77 6572 203d      self.lower =
-0001da10: 2031 2069 6620 6c6f 7765 7220 6973 204e   1 if lower is N
-0001da20: 6f6e 6520 656c 7365 206c 6f77 6572 0a20  one else lower. 
-0001da30: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001da40: 6e75 6d62 6572 203d 2031 2069 6620 6e75  number = 1 if nu
-0001da50: 6d62 6572 2069 7320 4e6f 6e65 2065 6c73  mber is None els
-0001da60: 6520 6e75 6d62 6572 0a20 2020 2020 2020  e number.       
-0001da70: 2020 2020 2073 656c 662e 7370 6563 6961       self.specia
-0001da80: 6c20 3d20 3120 6966 2073 7065 6369 616c  l = 1 if special
-0001da90: 2069 7320 4e6f 6e65 2065 6c73 6520 7370   is None else sp
-0001daa0: 6563 6961 6c0a 2020 2020 2020 2020 656c  ecial.        el
-0001dab0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001dac0: 2320 6279 2064 6566 6175 6c74 2c20 616e  # by default, an
-0001dad0: 2065 6e74 726f 7079 2073 7065 6320 6973   entropy spec is
-0001dae0: 2065 7863 6c75 7369 7665 0a20 2020 2020   exclusive.     
-0001daf0: 2020 2020 2020 2073 656c 662e 6d69 6e20         self.min 
-0001db00: 3d20 6d69 6e0a 2020 2020 2020 2020 2020  = min.          
-0001db10: 2020 7365 6c66 2e6d 6178 203d 206d 6178    self.max = max
-0001db20: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0001db30: 662e 7570 7065 7220 3d20 7570 7065 720a  f.upper = upper.
-0001db40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001db50: 2e6c 6f77 6572 203d 206c 6f77 6572 0a20  .lower = lower. 
-0001db60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001db70: 6e75 6d62 6572 203d 206e 756d 6265 720a  number = number.
-0001db80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001db90: 2e73 7065 6369 616c 203d 2073 7065 6369  .special = speci
-0001dba0: 616c 0a20 2020 2020 2020 2073 656c 662e  al.        self.
-0001dbb0: 7370 6563 6961 6c73 203d 2073 7065 6369  specials = speci
-0001dbc0: 616c 730a 2020 2020 2020 2020 7365 6c66  als.        self
-0001dbd0: 2e69 6e76 616c 6964 203d 2069 6e76 616c  .invalid = inval
-0001dbe0: 6964 0a20 2020 2020 2020 2073 656c 662e  id.        self.
-0001dbf0: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
-0001dc00: 6572 726f 725f 6d65 7373 6167 650a 2020  error_message.  
-0001dc10: 2020 2020 2020 7365 6c66 2e65 7374 7269        self.estri
-0001dc20: 6e67 203d 2065 7320 2023 2072 6574 7572  ng = es  # retur
-0001dc30: 6e20 6572 726f 7220 6d65 7373 6167 6520  n error message 
-0001dc40: 6173 2073 7472 696e 6720 2866 6f72 2064  as string (for d
-0001dc50: 6f63 7465 7374 290a 0a20 2020 2064 6566  octest)..    def
-0001dc60: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
-0001dc70: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-0001dc80: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-0001dc90: 6661 696c 7572 6573 203d 205b 5d0a 2020  failures = [].  
-0001dca0: 2020 2020 2020 6966 2076 616c 7565 2069        if value i
-0001dcb0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0001dcc0: 2020 2020 7661 6c75 6520 3d20 2222 0a20      value = "". 
-0001dcd0: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
-0001dce0: 616e 6420 6c65 6e28 7661 6c75 6529 203d  and len(value) =
-0001dcf0: 3d20 7661 6c75 652e 636f 756e 7428 222a  = value.count("*
-0001dd00: 2229 203e 2034 3a0a 2020 2020 2020 2020  ") > 4:.        
-0001dd10: 2020 2020 7265 7475 726e 2076 616c 7565      return value
-0001dd20: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0001dd30: 2e65 6e74 726f 7079 2069 7320 6e6f 7420  .entropy is not 
-0001dd40: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0001dd50: 2020 656e 7472 6f70 7920 3d20 6361 6c63    entropy = calc
-0001dd60: 5f65 6e74 726f 7079 2876 616c 7565 290a  _entropy(value).
-0001dd70: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-0001dd80: 6e74 726f 7079 203c 2073 656c 662e 656e  ntropy < self.en
-0001dd90: 7472 6f70 793a 0a20 2020 2020 2020 2020  tropy:.         
-0001dda0: 2020 2020 2020 2066 6169 6c75 7265 732e         failures.
-0001ddb0: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
-0001ddc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001ddd0: 2e74 7261 6e73 6c61 746f 7228 2250 6173  .translator("Pas
-0001dde0: 7377 6f72 6420 746f 6f20 7369 6d70 6c65  sword too simple
-0001ddf0: 2028 2528 6861 7665 2973 2f25 286e 6565   (%(have)s/%(nee
-0001de00: 6429 7329 2229 0a20 2020 2020 2020 2020  d)s)").         
-0001de10: 2020 2020 2020 2020 2020 2025 2064 6963             % dic
-0001de20: 7428 6861 7665 3d65 6e74 726f 7079 2c20  t(have=entropy, 
-0001de30: 6e65 6564 3d73 656c 662e 656e 7472 6f70  need=self.entrop
-0001de40: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-0001de50: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001de60: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
-0001de70: 6d69 6e2c 2069 6e74 2920 616e 6420 7365  min, int) and se
-0001de80: 6c66 2e6d 696e 203e 2030 3a0a 2020 2020  lf.min > 0:.    
-0001de90: 2020 2020 2020 2020 6966 206e 6f74 206c          if not l
-0001dea0: 656e 2876 616c 7565 2920 3e3d 2073 656c  en(value) >= sel
-0001deb0: 662e 6d69 6e3a 0a20 2020 2020 2020 2020  f.min:.         
-0001dec0: 2020 2020 2020 2066 6169 6c75 7265 732e         failures.
-0001ded0: 6170 7065 6e64 2873 656c 662e 7472 616e  append(self.tran
-0001dee0: 736c 6174 6f72 2822 4d69 6e69 6d75 6d20  slator("Minimum 
-0001def0: 6c65 6e67 7468 2069 7320 2573 2229 2025  length is %s") %
-0001df00: 2073 656c 662e 6d69 6e29 0a20 2020 2020   self.min).     
-0001df10: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001df20: 2873 656c 662e 6d61 782c 2069 6e74 2920  (self.max, int) 
-0001df30: 616e 6420 7365 6c66 2e6d 6178 203e 2030  and self.max > 0
-0001df40: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001df50: 206e 6f74 206c 656e 2876 616c 7565 2920   not len(value) 
-0001df60: 3c3d 2073 656c 662e 6d61 783a 0a20 2020  <= self.max:.   
-0001df70: 2020 2020 2020 2020 2020 2020 2066 6169               fai
-0001df80: 6c75 7265 732e 6170 7065 6e64 2873 656c  lures.append(sel
-0001df90: 662e 7472 616e 736c 6174 6f72 2822 4d61  f.translator("Ma
-0001dfa0: 7869 6d75 6d20 6c65 6e67 7468 2069 7320  ximum length is 
-0001dfb0: 2573 2229 2025 2073 656c 662e 6d61 7829  %s") % self.max)
-0001dfc0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001dfd0: 7374 616e 6365 2873 656c 662e 7370 6563  stance(self.spec
-0001dfe0: 6961 6c2c 2069 6e74 293a 0a20 2020 2020  ial, int):.     
-0001dff0: 2020 2020 2020 2061 6c6c 5f73 7065 6369         all_speci
-0001e000: 616c 203d 205b 6368 2069 6e20 7661 6c75  al = [ch in valu
-0001e010: 6520 666f 7220 6368 2069 6e20 7365 6c66  e for ch in self
-0001e020: 2e73 7065 6369 616c 735d 0a20 2020 2020  .specials].     
-0001e030: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
-0001e040: 7065 6369 616c 203e 2030 3a0a 2020 2020  pecial > 0:.    
-0001e050: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e060: 6f74 2061 6c6c 5f73 7065 6369 616c 2e63  ot all_special.c
-0001e070: 6f75 6e74 2854 7275 6529 203e 3d20 7365  ount(True) >= se
-0001e080: 6c66 2e73 7065 6369 616c 3a0a 2020 2020  lf.special:.    
-0001e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e0a0: 6661 696c 7572 6573 2e61 7070 656e 6428  failures.append(
-0001e0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e0c0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0001e0d0: 616e 736c 6174 6f72 2822 4d75 7374 2069  anslator("Must i
-0001e0e0: 6e63 6c75 6465 2061 7420 6c65 6173 7420  nclude at least 
-0001e0f0: 2573 206f 6620 7468 6520 666f 6c6c 6f77  %s of the follow
-0001e100: 696e 673a 2025 7322 290a 2020 2020 2020  ing: %s").      
-0001e110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e120: 2020 2520 2873 656c 662e 7370 6563 6961    % (self.specia
-0001e130: 6c2c 2073 656c 662e 7370 6563 6961 6c73  l, self.specials
-0001e140: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001e150: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001e160: 2020 2020 656c 6966 2073 656c 662e 7370      elif self.sp
-0001e170: 6563 6961 6c20 3d3d 2030 2061 6e64 2073  ecial == 0 and s
-0001e180: 656c 662e 7370 6563 6961 6c20 6973 206e  elf.special is n
-0001e190: 6f74 2046 616c 7365 3a0a 2020 2020 2020  ot False:.      
-0001e1a0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0001e1b0: 285b 6974 656d 2066 6f72 2069 7465 6d20  ([item for item 
-0001e1c0: 696e 2061 6c6c 5f73 7065 6369 616c 2069  in all_special i
-0001e1d0: 6620 6974 656d 5d29 203e 2030 3a0a 2020  f item]) > 0:.  
-0001e1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1f0: 2020 6661 696c 7572 6573 2e61 7070 656e    failures.appen
-0001e200: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
-0001e210: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001e220: 7472 616e 736c 6174 6f72 2822 4d61 7920  translator("May 
-0001e230: 6e6f 7420 636f 6e74 6169 6e20 616e 7920  not contain any 
-0001e240: 6f66 2074 6865 2066 6f6c 6c6f 7769 6e67  of the following
-0001e250: 3a20 2573 2229 0a20 2020 2020 2020 2020  : %s").         
-0001e260: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-0001e270: 2073 656c 662e 7370 6563 6961 6c73 0a20   self.specials. 
+00019970: 2928 2761 6263 5c74 5f31 3233 2729 0a20  )('abc\t_123'). 
+00019980: 2020 2020 2020 2028 2761 6263 2d31 3233         ('abc-123
+00019990: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+000199a0: 203e 3e3e 2049 535f 534c 5547 2829 2827   >>> IS_SLUG()('
+000199b0: 2d61 6263 2d27 290a 2020 2020 2020 2020  -abc-').        
+000199c0: 2827 6162 6327 2c20 4e6f 6e65 290a 2020  ('abc', None).  
+000199d0: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
+000199e0: 4728 2928 272d 2d61 2d2d 622d 2d5f 202d  G()('--a--b--_ -
+000199f0: 632d 2d27 290a 2020 2020 2020 2020 2827  c--').        ('
+00019a00: 612d 622d 6327 2c20 4e6f 6e65 290a 2020  a-b-c', None).  
+00019a10: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
+00019a20: 4728 2928 2761 6263 2661 6d70 3b31 3233  G()('abc&amp;123
+00019a30: 2729 0a20 2020 2020 2020 2028 2761 6263  ').        ('abc
+00019a40: 3132 3327 2c20 4e6f 6e65 290a 2020 2020  123', None).    
+00019a50: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
+00019a60: 2928 2761 6263 2661 6d70 3b31 3233 2661  )('abc&amp;123&a
+00019a70: 6d70 3b64 6566 2729 0a20 2020 2020 2020  mp;def').       
+00019a80: 2028 2761 6263 3132 3364 6566 272c 204e   ('abc123def', N
+00019a90: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00019aa0: 2049 535f 534c 5547 2829 2827 c3b1 2729   IS_SLUG()('..')
+00019ab0: 0a20 2020 2020 2020 2028 276e 272c 204e  .        ('n', N
+00019ac0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00019ad0: 2049 535f 534c 5547 286d 6178 6c65 6e3d   IS_SLUG(maxlen=
+00019ae0: 3429 2827 6162 6331 3233 2729 0a20 2020  4)('abc123').   
+00019af0: 2020 2020 2028 2761 6263 3127 2c20 4e6f       ('abc1', No
+00019b00: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+00019b10: 4953 5f53 4c55 4728 2928 2761 6263 5f31  IS_SLUG()('abc_1
+00019b20: 3233 2729 0a20 2020 2020 2020 2028 2761  23').        ('a
+00019b30: 6263 2d31 3233 272c 204e 6f6e 6529 0a20  bc-123', None). 
+00019b40: 2020 2020 2020 203e 3e3e 2049 535f 534c         >>> IS_SL
+00019b50: 5547 286b 6565 705f 756e 6465 7273 636f  UG(keep_undersco
+00019b60: 7265 733d 4661 6c73 6529 2827 6162 635f  res=False)('abc_
+00019b70: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
+00019b80: 6162 632d 3132 3327 2c20 4e6f 6e65 290a  abc-123', None).
+00019b90: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
+00019ba0: 4c55 4728 6b65 6570 5f75 6e64 6572 7363  LUG(keep_undersc
+00019bb0: 6f72 6573 3d54 7275 6529 2827 6162 635f  ores=True)('abc_
+00019bc0: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
+00019bd0: 6162 635f 3132 3327 2c20 4e6f 6e65 290a  abc_123', None).
+00019be0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
+00019bf0: 4c55 4728 6368 6563 6b3d 4661 6c73 6529  LUG(check=False)
+00019c00: 2827 6162 6327 290a 2020 2020 2020 2020  ('abc').        
+00019c10: 2827 6162 6327 2c20 4e6f 6e65 290a 2020  ('abc', None).  
+00019c20: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
+00019c30: 4728 6368 6563 6b3d 5472 7565 2928 2761  G(check=True)('a
+00019c40: 6263 2729 0a20 2020 2020 2020 2028 2761  bc').        ('a
+00019c50: 6263 272c 204e 6f6e 6529 0a20 2020 2020  bc', None).     
+00019c60: 2020 203e 3e3e 2049 535f 534c 5547 2863     >>> IS_SLUG(c
+00019c70: 6865 636b 3d46 616c 7365 2928 2761 2062  heck=False)('a b
+00019c80: 6327 290a 2020 2020 2020 2020 2827 612d  c').        ('a-
+00019c90: 6263 272c 204e 6f6e 6529 0a20 2020 2020  bc', None).     
+00019ca0: 2020 203e 3e3e 2049 535f 534c 5547 2863     >>> IS_SLUG(c
+00019cb0: 6865 636b 3d54 7275 6529 2827 6120 6263  heck=True)('a bc
+00019cc0: 2729 0a20 2020 2020 2020 2028 2761 2062  ').        ('a b
+00019cd0: 6327 2c20 276d 7573 7420 6265 2073 6c75  c', 'must be slu
+00019ce0: 6727 290a 2020 2020 2222 220a 0a20 2020  g').    """..   
+00019cf0: 2040 7374 6174 6963 6d65 7468 6f64 0a20   @staticmethod. 
+00019d00: 2020 2064 6566 2075 726c 6966 7928 7661     def urlify(va
+00019d10: 6c75 652c 206d 6178 6c65 6e3d 3830 2c20  lue, maxlen=80, 
+00019d20: 6b65 6570 5f75 6e64 6572 7363 6f72 6573  keep_underscores
+00019d30: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+00019d40: 2072 6574 7572 6e20 7572 6c69 6679 2876   return urlify(v
+00019d50: 616c 7565 2c20 6d61 786c 656e 2c20 6b65  alue, maxlen, ke
+00019d60: 6570 5f75 6e64 6572 7363 6f72 6573 290a  ep_underscores).
+00019d70: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00019d80: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+00019d90: 0a20 2020 2020 2020 206d 6178 6c65 6e3d  .        maxlen=
+00019da0: 3830 2c0a 2020 2020 2020 2020 6368 6563  80,.        chec
+00019db0: 6b3d 4661 6c73 652c 0a20 2020 2020 2020  k=False,.       
+00019dc0: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+00019dd0: 4d75 7374 2062 6520 736c 7567 222c 0a20  Must be slug",. 
+00019de0: 2020 2020 2020 206b 6565 705f 756e 6465         keep_unde
+00019df0: 7273 636f 7265 733d 4661 6c73 652c 0a20  rscores=False,. 
+00019e00: 2020 2029 3a0a 2020 2020 2020 2020 7365     ):.        se
+00019e10: 6c66 2e6d 6178 6c65 6e20 3d20 6d61 786c  lf.maxlen = maxl
+00019e20: 656e 0a20 2020 2020 2020 2073 656c 662e  en.        self.
+00019e30: 6368 6563 6b20 3d20 6368 6563 6b0a 2020  check = check.  
+00019e40: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+00019e50: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+00019e60: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
+00019e70: 2073 656c 662e 6b65 6570 5f75 6e64 6572   self.keep_under
+00019e80: 7363 6f72 6573 203d 206b 6565 705f 756e  scores = keep_un
+00019e90: 6465 7273 636f 7265 730a 0a20 2020 2064  derscores..    d
+00019ea0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
+00019eb0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
+00019ec0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
+00019ed0: 2020 6966 2073 656c 662e 6368 6563 6b20    if self.check 
+00019ee0: 616e 6420 7661 6c75 6520 213d 2075 726c  and value != url
+00019ef0: 6966 7928 7661 6c75 652c 2073 656c 662e  ify(value, self.
+00019f00: 6d61 786c 656e 2c20 7365 6c66 2e6b 6565  maxlen, self.kee
+00019f10: 705f 756e 6465 7273 636f 7265 7329 3a0a  p_underscores):.
+00019f20: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00019f30: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
+00019f40: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
+00019f50: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
+00019f60: 7361 6765 2929 0a20 2020 2020 2020 2072  sage)).        r
+00019f70: 6574 7572 6e20 7572 6c69 6679 2876 616c  eturn urlify(val
+00019f80: 7565 2c20 7365 6c66 2e6d 6178 6c65 6e2c  ue, self.maxlen,
+00019f90: 2073 656c 662e 6b65 6570 5f75 6e64 6572   self.keep_under
+00019fa0: 7363 6f72 6573 290a 0a0a 636c 6173 7320  scores)...class 
+00019fb0: 414e 595f 4f46 2856 616c 6964 6174 6f72  ANY_OF(Validator
+00019fc0: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
+00019fd0: 6573 7473 2069 6620 616e 7920 6f66 2074  ests if any of t
+00019fe0: 6865 2076 616c 6964 6174 6f72 7320 696e  he validators in
+00019ff0: 2061 206c 6973 7420 7265 7475 726e 7320   a list returns 
+0001a000: 7375 6363 6573 7366 756c 6c79 3a3a 0a0a  successfully::..
+0001a010: 2020 2020 2020 2020 3e3e 3e20 414e 595f          >>> ANY_
+0001a020: 4f46 285b 4953 5f45 4d41 494c 2829 2c49  OF([IS_EMAIL(),I
+0001a030: 535f 414c 5048 414e 554d 4552 4943 2829  S_ALPHANUMERIC()
+0001a040: 5d29 2827 6140 622e 636f 2729 0a20 2020  ])('a@b.co').   
+0001a050: 2020 2020 2028 2761 4062 2e63 6f27 2c20       ('a@b.co', 
+0001a060: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+0001a070: 3e20 414e 595f 4f46 285b 4953 5f45 4d41  > ANY_OF([IS_EMA
+0001a080: 494c 2829 2c49 535f 414c 5048 414e 554d  IL(),IS_ALPHANUM
+0001a090: 4552 4943 2829 5d29 2827 6162 636f 2729  ERIC()])('abco')
+0001a0a0: 0a20 2020 2020 2020 2028 2761 6263 6f27  .        ('abco'
+0001a0b0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+0001a0c0: 3e3e 3e20 414e 595f 4f46 285b 4953 5f45  >>> ANY_OF([IS_E
+0001a0d0: 4d41 494c 2829 2c49 535f 414c 5048 414e  MAIL(),IS_ALPHAN
+0001a0e0: 554d 4552 4943 2829 5d29 2827 4061 622e  UMERIC()])('@ab.
+0001a0f0: 636f 2729 0a20 2020 2020 2020 2028 2740  co').        ('@
+0001a100: 6162 2e63 6f27 2c20 2765 6e74 6572 206f  ab.co', 'enter o
+0001a110: 6e6c 7920 6c65 7474 6572 732c 206e 756d  nly letters, num
+0001a120: 6265 7273 2c20 616e 6420 756e 6465 7273  bers, and unders
+0001a130: 636f 7265 2729 0a20 2020 2020 2020 203e  core').        >
+0001a140: 3e3e 2041 4e59 5f4f 4628 5b49 535f 414c  >> ANY_OF([IS_AL
+0001a150: 5048 414e 554d 4552 4943 2829 2c49 535f  PHANUMERIC(),IS_
+0001a160: 454d 4149 4c28 295d 2928 2740 6162 2e63  EMAIL()])('@ab.c
+0001a170: 6f27 290a 2020 2020 2020 2020 2827 4061  o').        ('@a
+0001a180: 622e 636f 272c 2027 656e 7465 7220 6120  b.co', 'enter a 
+0001a190: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
+0001a1a0: 6573 7327 290a 0a20 2020 2022 2222 0a0a  ess')..    """..
+0001a1b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0001a1c0: 2873 656c 662c 2073 7562 732c 2065 7272  (self, subs, err
+0001a1d0: 6f72 5f6d 6573 7361 6765 3d4e 6f6e 6529  or_message=None)
+0001a1e0: 3a0a 2020 2020 2020 2020 7365 6c66 2e73  :.        self.s
+0001a1f0: 7562 7320 3d20 7375 6273 0a20 2020 2020  ubs = subs.     
+0001a200: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
+0001a210: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
+0001a220: 7373 6167 650a 0a20 2020 2064 6566 2076  ssage..    def v
+0001a230: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
+0001a240: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
+0001a250: 6f6e 6529 3a0a 2020 2020 2020 2020 666f  one):.        fo
+0001a260: 7220 7661 6c69 6461 746f 7220 696e 2073  r validator in s
+0001a270: 656c 662e 7375 6273 3a0a 2020 2020 2020  elf.subs:.      
+0001a280: 2020 2020 2020 762c 2065 203d 2076 616c        v, e = val
+0001a290: 6964 6174 6f72 2876 616c 7565 290a 2020  idator(value).  
+0001a2a0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0001a2b0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0001a2c0: 2020 2020 7265 7475 726e 2076 0a20 2020      return v.   
+0001a2d0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+0001a2e0: 6174 696f 6e45 7272 6f72 2865 290a 0a20  ationError(e).. 
+0001a2f0: 2020 2064 6566 2066 6f72 6d61 7474 6572     def formatter
+0001a300: 2873 656c 662c 2076 616c 7565 293a 0a20  (self, value):. 
+0001a310: 2020 2020 2020 2023 2055 7365 2074 6865         # Use the
+0001a320: 2066 6f72 6d61 7474 6572 206f 6620 7468   formatter of th
+0001a330: 6520 6669 7273 7420 7375 6276 616c 6964  e first subvalid
+0001a340: 6174 6f72 0a20 2020 2020 2020 2023 2074  ator.        # t
+0001a350: 6861 7420 7661 6c69 6461 7465 7320 7468  hat validates th
+0001a360: 6520 7661 6c75 6520 616e 6420 6861 7320  e value and has 
+0001a370: 6120 666f 726d 6174 7465 720a 2020 2020  a formatter.    
+0001a380: 2020 2020 666f 7220 7661 6c69 6461 746f      for validato
+0001a390: 7220 696e 2073 656c 662e 7375 6273 3a0a  r in self.subs:.
+0001a3a0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+0001a3b0: 6173 6174 7472 2876 616c 6964 6174 6f72  asattr(validator
+0001a3c0: 2c20 2266 6f72 6d61 7474 6572 2229 2061  , "formatter") a
+0001a3d0: 6e64 2076 616c 6964 6174 6f72 2876 616c  nd validator(val
+0001a3e0: 7565 295b 315d 2069 7320 4e6f 6e65 3a0a  ue)[1] is None:.
+0001a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a400: 7265 7475 726e 2076 616c 6964 6174 6f72  return validator
+0001a410: 2e66 6f72 6d61 7474 6572 2876 616c 7565  .formatter(value
+0001a420: 290a 0a0a 636c 6173 7320 4953 5f45 4d50  )...class IS_EMP
+0001a430: 5459 5f4f 5228 5661 6c69 6461 746f 7229  TY_OR(Validator)
+0001a440: 3a0a 2020 2020 2222 220a 2020 2020 4475  :.    """.    Du
+0001a450: 6d6d 7920 636c 6173 7320 666f 7220 7465  mmy class for te
+0001a460: 7374 696e 6720 4953 5f45 4d50 5459 5f4f  sting IS_EMPTY_O
+0001a470: 523a 3a0a 0a20 2020 2020 2020 203e 3e3e  R::..        >>>
+0001a480: 2049 535f 454d 5054 595f 4f52 2849 535f   IS_EMPTY_OR(IS_
+0001a490: 454d 4149 4c28 2929 2827 6162 6340 6465  EMAIL())('abc@de
+0001a4a0: 662e 636f 6d27 290a 2020 2020 2020 2020  f.com').        
+0001a4b0: 2827 6162 6340 6465 662e 636f 6d27 2c20  ('abc@def.com', 
+0001a4c0: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+0001a4d0: 3e20 4953 5f45 4d50 5459 5f4f 5228 4953  > IS_EMPTY_OR(IS
+0001a4e0: 5f45 4d41 494c 2829 2928 2720 2020 2729  _EMAIL())('   ')
+0001a4f0: 0a20 2020 2020 2020 2028 4e6f 6e65 2c20  .        (None, 
+0001a500: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+0001a510: 3e20 4953 5f45 4d50 5459 5f4f 5228 4953  > IS_EMPTY_OR(IS
+0001a520: 5f45 4d41 494c 2829 2c20 6e75 6c6c 3d27  _EMAIL(), null='
+0001a530: 6162 6327 2928 2720 2020 2729 0a20 2020  abc')('   ').   
+0001a540: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
+0001a550: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+0001a560: 535f 454d 5054 595f 4f52 2849 535f 454d  S_EMPTY_OR(IS_EM
+0001a570: 4149 4c28 292c 206e 756c 6c3d 2761 6263  AIL(), null='abc
+0001a580: 272c 2065 6d70 7479 5f72 6567 6578 3d27  ', empty_regex='
+0001a590: 6465 6627 2928 2764 6566 2729 0a20 2020  def')('def').   
+0001a5a0: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
+0001a5b0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+0001a5c0: 535f 454d 5054 595f 4f52 2849 535f 454d  S_EMPTY_OR(IS_EM
+0001a5d0: 4149 4c28 2929 2827 6162 6327 290a 2020  AIL())('abc').  
+0001a5e0: 2020 2020 2020 2827 6162 6327 2c20 2765        ('abc', 'e
+0001a5f0: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
+0001a600: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
+0001a610: 2020 2020 203e 3e3e 2049 535f 454d 5054       >>> IS_EMPT
+0001a620: 595f 4f52 2849 535f 454d 4149 4c28 2929  Y_OR(IS_EMAIL())
+0001a630: 2827 2061 6263 2027 290a 2020 2020 2020  (' abc ').      
+0001a640: 2020 2827 6162 6327 2c20 2765 6e74 6572    ('abc', 'enter
+0001a650: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
+0001a660: 6464 7265 7373 2729 0a20 2020 2022 2222  ddress').    """
+0001a670: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0001a680: 5f5f 2873 656c 662c 206f 7468 6572 2c20  __(self, other, 
+0001a690: 6e75 6c6c 3d4e 6f6e 652c 2065 6d70 7479  null=None, empty
+0001a6a0: 5f72 6567 6578 3d4e 6f6e 6529 3a0a 2020  _regex=None):.  
+0001a6b0: 2020 2020 2020 2873 656c 662e 6f74 6865        (self.othe
+0001a6c0: 722c 2073 656c 662e 6e75 6c6c 2920 3d20  r, self.null) = 
+0001a6d0: 286f 7468 6572 2c20 6e75 6c6c 290a 2020  (other, null).  
+0001a6e0: 2020 2020 2020 6966 2065 6d70 7479 5f72        if empty_r
+0001a6f0: 6567 6578 2069 7320 6e6f 7420 4e6f 6e65  egex is not None
+0001a700: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0001a710: 6c66 2e65 6d70 7479 5f72 6567 6578 203d  lf.empty_regex =
+0001a720: 2072 652e 636f 6d70 696c 6528 656d 7074   re.compile(empt
+0001a730: 795f 7265 6765 7829 0a20 2020 2020 2020  y_regex).       
+0001a740: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001a750: 2020 2073 656c 662e 656d 7074 795f 7265     self.empty_re
+0001a760: 6765 7820 3d20 4e6f 6e65 0a20 2020 2020  gex = None.     
+0001a770: 2020 2069 6620 6861 7361 7474 7228 6f74     if hasattr(ot
+0001a780: 6865 722c 2022 6d75 6c74 6970 6c65 2229  her, "multiple")
+0001a790: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0001a7a0: 6c66 2e6d 756c 7469 706c 6520 3d20 6f74  lf.multiple = ot
+0001a7b0: 6865 722e 6d75 6c74 6970 6c65 0a20 2020  her.multiple.   
+0001a7c0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
+0001a7d0: 6f74 6865 722c 2022 6f70 7469 6f6e 7322  other, "options"
+0001a7e0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+0001a7f0: 656c 662e 6f70 7469 6f6e 7320 3d20 7365  elf.options = se
+0001a800: 6c66 2e5f 6f70 7469 6f6e 730a 0a20 2020  lf._options..   
+0001a810: 2064 6566 205f 6f70 7469 6f6e 7328 7365   def _options(se
+0001a820: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
+0001a830: 7267 7329 3a0a 2020 2020 2020 2020 6f70  rgs):.        op
+0001a840: 7469 6f6e 7320 3d20 7365 6c66 2e6f 7468  tions = self.oth
+0001a850: 6572 2e6f 7074 696f 6e73 282a 6172 6773  er.options(*args
+0001a860: 2c20 2a2a 6b77 6172 6773 290a 2020 2020  , **kwargs).    
+0001a870: 2020 2020 6966 2028 6e6f 7420 6f70 7469      if (not opti
+0001a880: 6f6e 7320 6f72 206f 7074 696f 6e73 5b30  ons or options[0
+0001a890: 5d5b 305d 2021 3d20 2222 2920 616e 6420  ][0] != "") and 
+0001a8a0: 6e6f 7420 7365 6c66 2e6d 756c 7469 706c  not self.multipl
+0001a8b0: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
+0001a8c0: 7074 696f 6e73 2e69 6e73 6572 7428 302c  ptions.insert(0,
+0001a8d0: 2028 2222 2c20 2222 2929 0a20 2020 2020   ("", "")).     
+0001a8e0: 2020 2072 6574 7572 6e20 6f70 7469 6f6e     return option
+0001a8f0: 730a 0a20 2020 2064 6566 2073 6574 5f73  s..    def set_s
+0001a900: 656c 665f 6964 2873 656c 662c 2069 6429  elf_id(self, id)
+0001a910: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+0001a920: 6e73 7461 6e63 6528 7365 6c66 2e6f 7468  nstance(self.oth
+0001a930: 6572 2c20 286c 6973 742c 2074 7570 6c65  er, (list, tuple
+0001a940: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0001a950: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
+0001a960: 2e6f 7468 6572 3a0a 2020 2020 2020 2020  .other:.        
+0001a970: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
+0001a980: 7472 2869 7465 6d2c 2022 7365 745f 7365  tr(item, "set_se
+0001a990: 6c66 5f69 6422 293a 0a20 2020 2020 2020  lf_id"):.       
+0001a9a0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
+0001a9b0: 6d2e 7365 745f 7365 6c66 5f69 6428 6964  m.set_self_id(id
+0001a9c0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0001a9d0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+0001a9e0: 6173 6174 7472 2873 656c 662e 6f74 6865  asattr(self.othe
+0001a9f0: 722c 2022 7365 745f 7365 6c66 5f69 6422  r, "set_self_id"
+0001aa00: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001aa10: 2020 2073 656c 662e 6f74 6865 722e 7365     self.other.se
+0001aa20: 745f 7365 6c66 5f69 6428 6964 290a 0a20  t_self_id(id).. 
+0001aa30: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+0001aa40: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+0001aa50: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+0001aa60: 2020 2020 2020 7661 6c75 652c 2065 6d70        value, emp
+0001aa70: 7479 203d 2069 735f 656d 7074 7928 7661  ty = is_empty(va
+0001aa80: 6c75 652c 2065 6d70 7479 5f72 6567 6578  lue, empty_regex
+0001aa90: 3d73 656c 662e 656d 7074 795f 7265 6765  =self.empty_rege
+0001aaa0: 7829 0a20 2020 2020 2020 2069 6620 656d  x).        if em
+0001aab0: 7074 793a 0a20 2020 2020 2020 2020 2020  pty:.           
+0001aac0: 2072 6574 7572 6e20 7365 6c66 2e6e 756c   return self.nul
+0001aad0: 6c0a 2020 2020 2020 2020 6966 2069 7369  l.        if isi
+0001aae0: 6e73 7461 6e63 6528 7365 6c66 2e6f 7468  nstance(self.oth
+0001aaf0: 6572 2c20 286c 6973 742c 2074 7570 6c65  er, (list, tuple
+0001ab00: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0001ab10: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
+0001ab20: 2e6f 7468 6572 3a0a 2020 2020 2020 2020  .other:.        
+0001ab30: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+0001ab40: 7661 6c69 6461 746f 725f 6361 6c6c 6572  validator_caller
+0001ab50: 2869 7465 6d2c 2076 616c 7565 2c20 7265  (item, value, re
+0001ab60: 636f 7264 5f69 6429 0a20 2020 2020 2020  cord_id).       
+0001ab70: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+0001ab80: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+0001ab90: 2076 616c 6964 6174 6f72 5f63 616c 6c65   validator_calle
+0001aba0: 7228 7365 6c66 2e6f 7468 6572 2c20 7661  r(self.other, va
+0001abb0: 6c75 652c 2072 6563 6f72 645f 6964 290a  lue, record_id).
+0001abc0: 0a20 2020 2064 6566 2066 6f72 6d61 7474  .    def formatt
+0001abd0: 6572 2873 656c 662c 2076 616c 7565 293a  er(self, value):
+0001abe0: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
+0001abf0: 7474 7228 7365 6c66 2e6f 7468 6572 2c20  ttr(self.other, 
+0001ac00: 2266 6f72 6d61 7474 6572 2229 3a0a 2020  "formatter"):.  
+0001ac10: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001ac20: 2073 656c 662e 6f74 6865 722e 666f 726d   self.other.form
+0001ac30: 6174 7465 7228 7661 6c75 6529 0a20 2020  atter(value).   
+0001ac40: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+0001ac50: 650a 0a0a 4953 5f4e 554c 4c5f 4f52 203d  e...IS_NULL_OR =
+0001ac60: 2049 535f 454d 5054 595f 4f52 2020 2320   IS_EMPTY_OR  # 
+0001ac70: 666f 7220 6261 636b 7761 7264 2063 6f6d  for backward com
+0001ac80: 7061 7469 6269 6c69 7479 0a0a 0a63 6c61  patibility...cla
+0001ac90: 7373 2043 4c45 414e 5550 2856 616c 6964  ss CLEANUP(Valid
+0001aca0: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
+0001acb0: 2020 2045 7861 6d70 6c65 733a 0a20 2020     Examples:.   
+0001acc0: 2020 2020 2055 7365 2061 733a 3a0a 0a20       Use as::.. 
+0001acd0: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
+0001ace0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
+0001acf0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
+0001ad00: 7569 7265 733d 434c 4541 4e55 5028 2929  uires=CLEANUP())
+0001ad10: 0a0a 2020 2020 7265 6d6f 7665 7320 7370  ..    removes sp
+0001ad20: 6563 6961 6c20 6368 6172 6163 7465 7273  ecial characters
+0001ad30: 206f 6e20 7661 6c69 6461 7469 6f6e 0a20   on validation. 
+0001ad40: 2020 2022 2222 0a0a 2020 2020 5245 4745     """..    REGE
+0001ad50: 585f 434c 4541 4e55 5020 3d20 225b 5e5c  X_CLEANUP = "[^\
+0001ad60: 7830 395c 7830 615c 7830 645c 7832 302d  x09\x0a\x0d\x20-
+0001ad70: 5c78 3765 5d22 0a0a 2020 2020 6465 6620  \x7e]"..    def 
+0001ad80: 5f5f 696e 6974 5f5f 2873 656c 662c 2072  __init__(self, r
+0001ad90: 6567 6578 3d4e 6f6e 6529 3a0a 2020 2020  egex=None):.    
+0001ada0: 2020 2020 7365 6c66 2e72 6567 6578 203d      self.regex =
+0001adb0: 2028 0a20 2020 2020 2020 2020 2020 2072   (.            r
+0001adc0: 652e 636f 6d70 696c 6528 7365 6c66 2e52  e.compile(self.R
+0001add0: 4547 4558 5f43 4c45 414e 5550 2920 6966  EGEX_CLEANUP) if
+0001ade0: 2072 6567 6578 2069 7320 4e6f 6e65 2065   regex is None e
+0001adf0: 6c73 6520 7265 2e63 6f6d 7069 6c65 2872  lse re.compile(r
+0001ae00: 6567 6578 290a 2020 2020 2020 2020 290a  egex).        ).
+0001ae10: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+0001ae20: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+0001ae30: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+0001ae40: 2020 2020 2020 2020 7620 3d20 7365 6c66          v = self
+0001ae50: 2e72 6567 6578 2e73 7562 2822 222c 2073  .regex.sub("", s
+0001ae60: 7472 2876 616c 7565 292e 7374 7269 7028  tr(value).strip(
+0001ae70: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+0001ae80: 6e20 760a 0a0a 6465 6620 7062 6b64 6632  n v...def pbkdf2
+0001ae90: 5f68 6578 2864 6174 612c 2073 616c 742c  _hex(data, salt,
+0001aea0: 2069 7465 7261 7469 6f6e 733d 3130 3030   iterations=1000
+0001aeb0: 2c20 6b65 796c 656e 3d32 342c 2068 6173  , keylen=24, has
+0001aec0: 6866 756e 633d 4e6f 6e65 293a 0a20 2020  hfunc=None):.   
+0001aed0: 2068 6173 6866 756e 6320 3d20 6861 7368   hashfunc = hash
+0001aee0: 6675 6e63 206f 7220 6861 7368 6c69 622e  func or hashlib.
+0001aef0: 7368 6131 0a20 2020 2068 6d61 6320 3d20  sha1.    hmac = 
+0001af00: 6861 7368 6c69 622e 7062 6b64 6632 5f68  hashlib.pbkdf2_h
+0001af10: 6d61 6328 0a20 2020 2020 2020 2068 6173  mac(.        has
+0001af20: 6866 756e 6328 292e 6e61 6d65 2c20 746f  hfunc().name, to
+0001af30: 5f62 7974 6573 2864 6174 6129 2c20 746f  _bytes(data), to
+0001af40: 5f62 7974 6573 2873 616c 7429 2c20 6974  _bytes(salt), it
+0001af50: 6572 6174 696f 6e73 2c20 6b65 796c 656e  erations, keylen
+0001af60: 0a20 2020 2029 0a20 2020 2072 6574 7572  .    ).    retur
+0001af70: 6e20 6269 6e61 7363 6969 2e68 6578 6c69  n binascii.hexli
+0001af80: 6679 2868 6d61 6329 0a0a 0a64 6566 2073  fy(hmac)...def s
+0001af90: 696d 706c 655f 6861 7368 2874 6578 742c  imple_hash(text,
+0001afa0: 206b 6579 3d22 222c 2073 616c 743d 2222   key="", salt=""
+0001afb0: 2c20 6469 6765 7374 5f61 6c67 3d22 6d64  , digest_alg="md
+0001afc0: 3522 293a 0a20 2020 2022 2222 4765 6e65  5"):.    """Gene
+0001afd0: 7261 7465 2068 6173 6820 7769 7468 2074  rate hash with t
+0001afe0: 6865 2067 6976 656e 2074 6578 7420 7573  he given text us
+0001aff0: 696e 6720 7468 6520 7370 6563 6966 6965  ing the specifie
+0001b000: 6420 6469 6765 7374 2061 6c67 6f72 6974  d digest algorit
+0001b010: 686d 2e22 2222 0a20 2020 2074 6578 7420  hm.""".    text 
+0001b020: 3d20 746f 5f62 7974 6573 2874 6578 7429  = to_bytes(text)
+0001b030: 0a20 2020 206b 6579 203d 2074 6f5f 6279  .    key = to_by
+0001b040: 7465 7328 6b65 7929 0a20 2020 2073 616c  tes(key).    sal
+0001b050: 7420 3d20 746f 5f62 7974 6573 2873 616c  t = to_bytes(sal
+0001b060: 7429 0a20 2020 2069 6620 6e6f 7420 6469  t).    if not di
+0001b070: 6765 7374 5f61 6c67 3a0a 2020 2020 2020  gest_alg:.      
+0001b080: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
+0001b090: 7272 6f72 2822 7369 6d70 6c65 5f68 6173  rror("simple_has
+0001b0a0: 6820 7769 7468 2064 6967 6573 745f 616c  h with digest_al
+0001b0b0: 673d 4e6f 6e65 2229 0a20 2020 2065 6c69  g=None").    eli
+0001b0c0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0001b0d0: 2864 6967 6573 745f 616c 672c 2073 7472  (digest_alg, str
+0001b0e0: 293a 2020 2320 6d61 6e75 616c 2061 7070  ):  # manual app
+0001b0f0: 726f 6163 680a 2020 2020 2020 2020 6820  roach.        h 
+0001b100: 3d20 6469 6765 7374 5f61 6c67 2874 6578  = digest_alg(tex
+0001b110: 7420 2b20 6b65 7920 2b20 7361 6c74 290a  t + key + salt).
+0001b120: 2020 2020 656c 6966 2064 6967 6573 745f      elif digest_
+0001b130: 616c 672e 7374 6172 7473 7769 7468 2822  alg.startswith("
+0001b140: 7062 6b64 6632 2229 3a20 2023 206c 6174  pbkdf2"):  # lat
+0001b150: 6573 7420 616e 6420 636f 6f6c 6573 7421  est and coolest!
+0001b160: 0a20 2020 2020 2020 2069 7465 7261 7469  .        iterati
+0001b170: 6f6e 732c 206b 6579 6c65 6e2c 2061 6c67  ons, keylen, alg
+0001b180: 203d 2064 6967 6573 745f 616c 675b 373a   = digest_alg[7:
+0001b190: 2d31 5d2e 7370 6c69 7428 222c 2229 0a20  -1].split(","). 
+0001b1a0: 2020 2020 2020 2072 6574 7572 6e20 746f         return to
+0001b1b0: 5f6e 6174 6976 6528 0a20 2020 2020 2020  _native(.       
+0001b1c0: 2020 2020 2070 626b 6466 325f 6865 7828       pbkdf2_hex(
+0001b1d0: 7465 7874 2c20 7361 6c74 2c20 696e 7428  text, salt, int(
+0001b1e0: 6974 6572 6174 696f 6e73 292c 2069 6e74  iterations), int
+0001b1f0: 286b 6579 6c65 6e29 2c20 6765 745f 6469  (keylen), get_di
+0001b200: 6765 7374 2861 6c67 2929 0a20 2020 2020  gest(alg)).     
+0001b210: 2020 2029 0a20 2020 2065 6c69 6620 6b65     ).    elif ke
+0001b220: 793a 2020 2320 7573 6520 686d 6163 0a20  y:  # use hmac. 
+0001b230: 2020 2020 2020 2064 6967 6573 745f 616c         digest_al
+0001b240: 6720 3d20 6765 745f 6469 6765 7374 2864  g = get_digest(d
+0001b250: 6967 6573 745f 616c 6729 0a20 2020 2020  igest_alg).     
+0001b260: 2020 2068 203d 2068 6d61 632e 6e65 7728     h = hmac.new(
+0001b270: 6b65 7920 2b20 7361 6c74 2c20 7465 7874  key + salt, text
+0001b280: 2c20 6469 6765 7374 5f61 6c67 290a 2020  , digest_alg).  
+0001b290: 2020 656c 7365 3a20 2023 2063 6f6d 7061    else:  # compa
+0001b2a0: 7469 626c 6520 7769 7468 2074 6869 7264  tible with third
+0001b2b0: 2070 6172 7479 2073 7973 7465 6d73 0a20   party systems. 
+0001b2c0: 2020 2020 2020 2068 203d 2067 6574 5f64         h = get_d
+0001b2d0: 6967 6573 7428 6469 6765 7374 5f61 6c67  igest(digest_alg
+0001b2e0: 2928 290a 2020 2020 2020 2020 682e 7570  )().        h.up
+0001b2f0: 6461 7465 2874 6578 7420 2b20 7361 6c74  date(text + salt
+0001b300: 290a 2020 2020 7265 7475 726e 2068 2e68  ).    return h.h
+0001b310: 6578 6469 6765 7374 2829 0a0a 0a64 6566  exdigest()...def
+0001b320: 2067 6574 5f64 6967 6573 7428 7661 6c75   get_digest(valu
+0001b330: 6529 3a0a 2020 2020 2222 2252 6574 7572  e):.    """Retur
+0001b340: 6e20 6120 6861 7368 6c69 6220 6469 6765  n a hashlib dige
+0001b350: 7374 2061 6c67 6f72 6974 686d 2066 726f  st algorithm fro
+0001b360: 6d20 6120 7374 7269 6e67 2e22 2222 0a20  m a string.""". 
+0001b370: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0001b380: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
+0001b390: 2020 2020 2020 7661 6c75 6520 3d20 7661        value = va
+0001b3a0: 6c75 652e 6c6f 7765 7228 290a 2020 2020  lue.lower().    
+0001b3b0: 2020 2020 6966 2076 616c 7565 206e 6f74      if value not
+0001b3c0: 2069 6e20 2822 6d64 3522 2c20 2273 6861   in ("md5", "sha
+0001b3d0: 3122 2c20 2273 6861 3232 3422 2c20 2273  1", "sha224", "s
+0001b3e0: 6861 3235 3622 2c20 2273 6861 3338 3422  ha256", "sha384"
+0001b3f0: 2c20 2273 6861 3531 3222 293a 0a20 2020  , "sha512"):.   
+0001b400: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+0001b410: 616c 7565 4572 726f 7228 2249 6e76 616c  alueError("Inval
+0001b420: 6964 2064 6967 6573 7420 616c 676f 7269  id digest algori
+0001b430: 7468 6d3a 2025 7322 2025 2076 616c 7565  thm: %s" % value
+0001b440: 290a 2020 2020 2020 2020 7661 6c75 6520  ).        value 
+0001b450: 3d20 6765 7461 7474 7228 6861 7368 6c69  = getattr(hashli
+0001b460: 622c 2076 616c 7565 290a 2020 2020 7265  b, value).    re
+0001b470: 7475 726e 2076 616c 7565 0a0a 0a44 4947  turn value...DIG
+0001b480: 4553 545f 414c 475f 4259 5f53 495a 4520  EST_ALG_BY_SIZE 
+0001b490: 3d20 7b0a 2020 2020 3132 3820 2f2f 2034  = {.    128 // 4
+0001b4a0: 3a20 226d 6435 222c 0a20 2020 2031 3630  : "md5",.    160
+0001b4b0: 202f 2f20 343a 2022 7368 6131 222c 0a20   // 4: "sha1",. 
+0001b4c0: 2020 2032 3234 202f 2f20 343a 2022 7368     224 // 4: "sh
+0001b4d0: 6132 3234 222c 0a20 2020 2032 3536 202f  a224",.    256 /
+0001b4e0: 2f20 343a 2022 7368 6132 3536 222c 0a20  / 4: "sha256",. 
+0001b4f0: 2020 2033 3834 202f 2f20 343a 2022 7368     384 // 4: "sh
+0001b500: 6133 3834 222c 0a20 2020 2035 3132 202f  a384",.    512 /
+0001b510: 2f20 343a 2022 7368 6135 3132 222c 0a7d  / 4: "sha512",.}
+0001b520: 0a0a 0a63 6c61 7373 204c 617a 7943 7279  ...class LazyCry
+0001b530: 7074 286f 626a 6563 7429 3a0a 2020 2020  pt(object):.    
+0001b540: 2222 220a 2020 2020 5374 6f72 6573 2061  """.    Stores a
+0001b550: 206c 617a 7920 7061 7373 776f 7264 2068   lazy password h
+0001b560: 6173 680a 2020 2020 2222 220a 0a20 2020  ash.    """..   
+0001b570: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0001b580: 6c66 2c20 6372 7970 742c 2070 6173 7377  lf, crypt, passw
+0001b590: 6f72 6429 3a0a 2020 2020 2020 2020 2222  ord):.        ""
+0001b5a0: 220a 2020 2020 2020 2020 6372 7970 7420  ".        crypt 
+0001b5b0: 6973 2061 6e20 696e 7374 616e 6365 206f  is an instance o
+0001b5c0: 6620 7468 6520 4352 5950 5420 7661 6c69  f the CRYPT vali
+0001b5d0: 6461 746f 722c 0a20 2020 2020 2020 2070  dator,.        p
+0001b5e0: 6173 7377 6f72 6420 6973 2074 6865 2070  assword is the p
+0001b5f0: 6173 7377 6f72 6420 6173 2069 6e73 6572  assword as inser
+0001b600: 7465 6420 6279 2074 6865 2075 7365 720a  ted by the user.
+0001b610: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001b620: 2020 2020 7365 6c66 2e63 7279 7074 203d      self.crypt =
+0001b630: 2063 7279 7074 0a20 2020 2020 2020 2073   crypt.        s
+0001b640: 656c 662e 7061 7373 776f 7264 203d 2070  elf.password = p
+0001b650: 6173 7377 6f72 640a 2020 2020 2020 2020  assword.        
+0001b660: 7365 6c66 2e63 7279 7074 6564 203d 204e  self.crypted = N
+0001b670: 6f6e 650a 0a20 2020 2064 6566 205f 5f73  one..    def __s
+0001b680: 7472 5f5f 2873 656c 6629 3a0a 2020 2020  tr__(self):.    
+0001b690: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0001b6a0: 456e 6372 7970 7465 6420 7365 6c66 2e70  Encrypted self.p
+0001b6b0: 6173 7377 6f72 6420 616e 6420 6361 6368  assword and cach
+0001b6c0: 6573 2069 7420 696e 2073 656c 662e 6372  es it in self.cr
+0001b6d0: 7970 7465 642e 0a20 2020 2020 2020 2049  ypted..        I
+0001b6e0: 6620 7365 6c66 2e63 7279 7074 2e73 616c  f self.crypt.sal
+0001b6f0: 7420 7468 6520 6f75 7470 7574 2069 7320  t the output is 
+0001b700: 696e 2074 6865 2066 6f72 6d61 7420 3c61  in the format <a
+0001b710: 6c67 6f72 6974 686d 3e24 3c73 616c 743e  lgorithm>$<salt>
+0001b720: 243c 6861 7368 3e0a 0a20 2020 2020 2020  $<hash>..       
+0001b730: 2054 7279 2067 6574 2074 6865 2064 6967   Try get the dig
+0001b740: 6573 745f 616c 6720 6672 6f6d 2074 6865  est_alg from the
+0001b750: 206b 6579 2028 6966 2069 7420 6578 6973   key (if it exis
+0001b760: 7473 290a 2020 2020 2020 2020 656c 7365  ts).        else
+0001b770: 2061 7373 756d 6520 7468 6520 6465 6661   assume the defa
+0001b780: 756c 7420 6469 6765 7374 5f61 6c67 2e20  ult digest_alg. 
+0001b790: 4966 206e 6f74 206b 6579 2061 7420 616c  If not key at al
+0001b7a0: 6c2c 2073 6574 206b 6579 3d27 270a 0a20  l, set key=''.. 
+0001b7b0: 2020 2020 2020 2049 6620 6120 7361 6c74         If a salt
+0001b7c0: 2069 7320 7370 6563 6966 6965 6420 7573   is specified us
+0001b7d0: 6520 6974 2c20 6966 2073 616c 7420 6973  e it, if salt is
+0001b7e0: 2054 7275 652c 2073 6574 2073 616c 7420   True, set salt 
+0001b7f0: 746f 2075 7569 640a 2020 2020 2020 2020  to uuid.        
+0001b800: 2874 6869 7320 7368 6f75 6c64 2061 6c6c  (this should all
+0001b810: 2062 6520 6261 636b 7761 7264 2063 6f6d   be backward com
+0001b820: 7061 7469 626c 6529 0a0a 2020 2020 2020  patible)..      
+0001b830: 2020 4f70 7469 6f6e 733a 0a20 2020 2020    Options:.     
+0001b840: 2020 206b 6579 203d 2027 7575 6964 270a     key = 'uuid'.
+0001b850: 2020 2020 2020 2020 6b65 7920 3d20 276d          key = 'm
+0001b860: 6435 3a75 7569 6427 0a20 2020 2020 2020  d5:uuid'.       
+0001b870: 206b 6579 203d 2027 7368 6135 3132 3a75   key = 'sha512:u
+0001b880: 7569 6427 0a20 2020 2020 2020 202e 2e2e  uid'.        ...
+0001b890: 0a20 2020 2020 2020 206b 6579 203d 2027  .        key = '
+0001b8a0: 7062 6b64 6632 2831 3030 302c 3634 2c73  pbkdf2(1000,64,s
+0001b8b0: 6861 3531 3229 3a75 7569 6427 2031 3030  ha512):uuid' 100
+0001b8c0: 3020 6974 6572 6174 696f 6e73 2061 6e64  0 iterations and
+0001b8d0: 2036 3420 6368 6172 7320 6c65 6e67 7468   64 chars length
+0001b8e0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0001b8f0: 2020 2020 2069 6620 7365 6c66 2e63 7279       if self.cry
+0001b900: 7074 6564 3a0a 2020 2020 2020 2020 2020  pted:.          
+0001b910: 2020 7265 7475 726e 2073 656c 662e 6372    return self.cr
+0001b920: 7970 7465 640a 2020 2020 2020 2020 6966  ypted.        if
+0001b930: 2073 656c 662e 6372 7970 742e 6b65 793a   self.crypt.key:
+0001b940: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001b950: 223a 2220 696e 2073 656c 662e 6372 7970  ":" in self.cryp
+0001b960: 742e 6b65 793a 0a20 2020 2020 2020 2020  t.key:.         
+0001b970: 2020 2020 2020 2064 6967 6573 745f 616c         digest_al
+0001b980: 672c 206b 6579 203d 2073 656c 662e 6372  g, key = self.cr
+0001b990: 7970 742e 6b65 792e 7370 6c69 7428 223a  ypt.key.split(":
+0001b9a0: 222c 2031 290a 2020 2020 2020 2020 2020  ", 1).          
+0001b9b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001b9c0: 2020 2020 2020 2020 6469 6765 7374 5f61          digest_a
+0001b9d0: 6c67 2c20 6b65 7920 3d20 7365 6c66 2e63  lg, key = self.c
+0001b9e0: 7279 7074 2e64 6967 6573 745f 616c 672c  rypt.digest_alg,
+0001b9f0: 2073 656c 662e 6372 7970 742e 6b65 790a   self.crypt.key.
+0001ba00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001ba10: 2020 2020 2020 2020 2020 6469 6765 7374            digest
+0001ba20: 5f61 6c67 2c20 6b65 7920 3d20 7365 6c66  _alg, key = self
+0001ba30: 2e63 7279 7074 2e64 6967 6573 745f 616c  .crypt.digest_al
+0001ba40: 672c 2022 220a 2020 2020 2020 2020 6966  g, "".        if
+0001ba50: 2073 656c 662e 6372 7970 742e 7361 6c74   self.crypt.salt
+0001ba60: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001ba70: 2073 656c 662e 6372 7970 742e 7361 6c74   self.crypt.salt
+0001ba80: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
+0001ba90: 2020 2020 2020 2020 2020 7361 6c74 203d            salt =
+0001baa0: 2073 7472 2875 7569 642e 7575 6964 3428   str(uuid.uuid4(
+0001bab0: 2929 2e72 6570 6c61 6365 2822 2d22 2c20  )).replace("-", 
+0001bac0: 2222 295b 2d31 363a 5d0a 2020 2020 2020  "")[-16:].      
+0001bad0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001bae0: 2020 2020 2020 2020 2020 2020 7361 6c74              salt
+0001baf0: 203d 2073 656c 662e 6372 7970 742e 7361   = self.crypt.sa
+0001bb00: 6c74 0a20 2020 2020 2020 2065 6c73 653a  lt.        else:
+0001bb10: 0a20 2020 2020 2020 2020 2020 2073 616c  .            sal
+0001bb20: 7420 3d20 2222 0a20 2020 2020 2020 2068  t = "".        h
+0001bb30: 6173 6865 6420 3d20 7369 6d70 6c65 5f68  ashed = simple_h
+0001bb40: 6173 6828 7365 6c66 2e70 6173 7377 6f72  ash(self.passwor
+0001bb50: 642c 206b 6579 2c20 7361 6c74 2c20 6469  d, key, salt, di
+0001bb60: 6765 7374 5f61 6c67 290a 2020 2020 2020  gest_alg).      
+0001bb70: 2020 7365 6c66 2e63 7279 7074 6564 203d    self.crypted =
+0001bb80: 2022 2573 2425 7324 2573 2220 2520 2864   "%s$%s$%s" % (d
+0001bb90: 6967 6573 745f 616c 672c 2073 616c 742c  igest_alg, salt,
+0001bba0: 2068 6173 6865 6429 0a20 2020 2020 2020   hashed).       
+0001bbb0: 2072 6574 7572 6e20 7365 6c66 2e63 7279   return self.cry
+0001bbc0: 7074 6564 0a0a 2020 2020 6465 6620 5f5f  pted..    def __
+0001bbd0: 6571 5f5f 2873 656c 662c 2073 746f 7265  eq__(self, store
+0001bbe0: 645f 7061 7373 776f 7264 293a 0a20 2020  d_password):.   
+0001bbf0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001bc00: 2063 6f6d 7061 7265 7320 7468 6520 6375   compares the cu
+0001bc10: 7272 656e 7420 6c61 7a79 2063 7279 7074  rrent lazy crypt
+0001bc20: 6564 2070 6173 7377 6f72 6420 7769 7468  ed password with
+0001bc30: 2061 2073 746f 7265 6420 7061 7373 776f   a stored passwo
+0001bc40: 7264 0a20 2020 2020 2020 2022 2222 0a0a  rd.        """..
+0001bc50: 2020 2020 2020 2020 2320 4c61 7a79 4372          # LazyCr
+0001bc60: 7970 7420 6f62 6a65 6374 7320 636f 6d70  ypt objects comp
+0001bc70: 6172 6973 6f6e 0a20 2020 2020 2020 2069  arison.        i
+0001bc80: 6620 6973 696e 7374 616e 6365 2873 746f  f isinstance(sto
+0001bc90: 7265 645f 7061 7373 776f 7264 2c20 7365  red_password, se
+0001bca0: 6c66 2e5f 5f63 6c61 7373 5f5f 293a 0a20  lf.__class__):. 
+0001bcb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001bcc0: 6e20 2873 656c 6620 6973 2073 746f 7265  n (self is store
+0001bcd0: 645f 7061 7373 776f 7264 2920 6f72 2028  d_password) or (
+0001bce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001bcf0: 2028 7365 6c66 2e63 7279 7074 2e6b 6579   (self.crypt.key
+0001bd00: 203d 3d20 7374 6f72 6564 5f70 6173 7377   == stored_passw
+0001bd10: 6f72 642e 6372 7970 742e 6b65 7929 0a20  ord.crypt.key). 
+0001bd20: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001bd30: 6e64 2028 7365 6c66 2e70 6173 7377 6f72  nd (self.passwor
+0001bd40: 6420 3d3d 2073 746f 7265 645f 7061 7373  d == stored_pass
+0001bd50: 776f 7264 2e70 6173 7377 6f72 6429 0a20  word.password). 
+0001bd60: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+0001bd70: 2020 2020 2020 6966 2073 656c 662e 6372        if self.cr
+0001bd80: 7970 742e 6b65 793a 0a20 2020 2020 2020  ypt.key:.       
+0001bd90: 2020 2020 2069 6620 223a 2220 696e 2073       if ":" in s
+0001bda0: 656c 662e 6372 7970 742e 6b65 793a 0a20  elf.crypt.key:. 
+0001bdb0: 2020 2020 2020 2020 2020 2020 2020 206b                 k
+0001bdc0: 6579 203d 2073 656c 662e 6372 7970 742e  ey = self.crypt.
+0001bdd0: 6b65 792e 7370 6c69 7428 223a 2229 5b31  key.split(":")[1
+0001bde0: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
+0001bdf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001be00: 2020 2020 6b65 7920 3d20 7365 6c66 2e63      key = self.c
+0001be10: 7279 7074 2e6b 6579 0a20 2020 2020 2020  rypt.key.       
+0001be20: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001be30: 2020 206b 6579 203d 2022 220a 2020 2020     key = "".    
+0001be40: 2020 2020 6966 2073 746f 7265 645f 7061      if stored_pa
+0001be50: 7373 776f 7264 2069 7320 4e6f 6e65 3a0a  ssword is None:.
+0001be60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001be70: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+0001be80: 2065 6c69 6620 7374 6f72 6564 5f70 6173   elif stored_pas
+0001be90: 7377 6f72 642e 636f 756e 7428 2224 2229  sword.count("$")
+0001bea0: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
+0001beb0: 2020 2028 6469 6765 7374 5f61 6c67 2c20     (digest_alg, 
+0001bec0: 7361 6c74 2c20 6861 7368 2920 3d20 7374  salt, hash) = st
+0001bed0: 6f72 6564 5f70 6173 7377 6f72 642e 7370  ored_password.sp
+0001bee0: 6c69 7428 2224 2229 0a20 2020 2020 2020  lit("$").       
+0001bef0: 2020 2020 2068 203d 2073 696d 706c 655f       h = simple_
+0001bf00: 6861 7368 2873 656c 662e 7061 7373 776f  hash(self.passwo
+0001bf10: 7264 2c20 6b65 792c 2073 616c 742c 2064  rd, key, salt, d
+0001bf20: 6967 6573 745f 616c 6729 0a20 2020 2020  igest_alg).     
+0001bf30: 2020 2020 2020 2074 656d 705f 7061 7373         temp_pass
+0001bf40: 203d 2022 2573 2425 7324 2573 2220 2520   = "%s$%s$%s" % 
+0001bf50: 2864 6967 6573 745f 616c 672c 2073 616c  (digest_alg, sal
+0001bf60: 742c 2068 290a 2020 2020 2020 2020 656c  t, h).        el
+0001bf70: 7365 3a20 2023 206e 6f20 7361 6c74 696e  se:  # no saltin
+0001bf80: 670a 2020 2020 2020 2020 2020 2020 2320  g.            # 
+0001bf90: 6775 6573 7320 6469 6765 7374 5f61 6c67  guess digest_alg
+0001bfa0: 0a20 2020 2020 2020 2020 2020 2064 6967  .            dig
+0001bfb0: 6573 745f 616c 6720 3d20 4449 4745 5354  est_alg = DIGEST
+0001bfc0: 5f41 4c47 5f42 595f 5349 5a45 2e67 6574  _ALG_BY_SIZE.get
+0001bfd0: 286c 656e 2873 746f 7265 645f 7061 7373  (len(stored_pass
+0001bfe0: 776f 7264 292c 204e 6f6e 6529 0a20 2020  word), None).   
+0001bff0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0001c000: 6469 6765 7374 5f61 6c67 3a0a 2020 2020  digest_alg:.    
+0001c010: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001c020: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+0001c030: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001c040: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
+0001c050: 7061 7373 203d 2073 696d 706c 655f 6861  pass = simple_ha
+0001c060: 7368 2873 656c 662e 7061 7373 776f 7264  sh(self.password
+0001c070: 2c20 6b65 792c 2022 222c 2064 6967 6573  , key, "", diges
+0001c080: 745f 616c 6729 0a20 2020 2020 2020 2072  t_alg).        r
+0001c090: 6574 7572 6e20 7465 6d70 5f70 6173 7320  eturn temp_pass 
+0001c0a0: 3d3d 2073 746f 7265 645f 7061 7373 776f  == stored_passwo
+0001c0b0: 7264 0a0a 2020 2020 6465 6620 5f5f 6e65  rd..    def __ne
+0001c0c0: 5f5f 2873 656c 662c 206f 7468 6572 293a  __(self, other):
+0001c0d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001c0e0: 6e6f 7420 7365 6c66 2e5f 5f65 715f 5f28  not self.__eq__(
+0001c0f0: 6f74 6865 7229 0a0a 0a63 6c61 7373 2043  other)...class C
+0001c100: 5259 5054 2856 616c 6964 6174 6f72 293a  RYPT(Validator):
+0001c110: 0a20 2020 2022 2222 0a20 2020 2045 7861  .    """.    Exa
+0001c120: 6d70 6c65 733a 0a20 2020 2020 2020 2055  mples:.        U
+0001c130: 7365 2061 733a 3a0a 0a20 2020 2020 2020  se as::..       
+0001c140: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+0001c150: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
+0001c160: 6e61 6d65 272c 2072 6571 7569 7265 733d  name', requires=
+0001c170: 4352 5950 5428 2929 0a0a 2020 2020 656e  CRYPT())..    en
+0001c180: 636f 6465 7320 7468 6520 7661 6c75 6520  codes the value 
+0001c190: 6f6e 2076 616c 6964 6174 696f 6e20 7769  on validation wi
+0001c1a0: 7468 2061 2064 6967 6573 742e 0a0a 2020  th a digest...  
+0001c1b0: 2020 4966 206e 6f20 6172 6775 6d65 6e74    If no argument
+0001c1c0: 7320 6172 6520 7072 6f76 6964 6564 2043  s are provided C
+0001c1d0: 5259 5054 2075 7365 7320 7468 6520 4d44  RYPT uses the MD
+0001c1e0: 3520 616c 676f 7269 7468 6d2e 0a20 2020  5 algorithm..   
+0001c1f0: 2049 6620 7468 6520 6b65 7920 6172 6775   If the key argu
+0001c200: 6d65 6e74 2069 7320 7072 6f76 6964 6564  ment is provided
+0001c210: 2074 6865 2048 4d41 432b 4d44 3520 616c   the HMAC+MD5 al
+0001c220: 676f 7269 7468 6d20 6973 2075 7365 642e  gorithm is used.
+0001c230: 0a20 2020 2049 6620 7468 6520 6469 6765  .    If the dige
+0001c240: 7374 5f61 6c67 2069 7320 7370 6563 6966  st_alg is specif
+0001c250: 6965 6420 7468 6973 2069 7320 7573 6564  ied this is used
+0001c260: 2074 6f20 7265 706c 6163 6520 7468 650a   to replace the.
+0001c270: 2020 2020 4d44 3520 7769 7468 2c20 666f      MD5 with, fo
+0001c280: 7220 6578 616d 706c 652c 2053 4841 3531  r example, SHA51
+0001c290: 322e 2054 6865 2064 6967 6573 745f 616c  2. The digest_al
+0001c2a0: 6720 6361 6e20 6265 0a20 2020 2074 6865  g can be.    the
+0001c2b0: 206e 616d 6520 6f66 2061 2068 6173 686c   name of a hashl
+0001c2c0: 6962 2061 6c67 6f72 6974 686d 2061 7320  ib algorithm as 
+0001c2d0: 6120 7374 7269 6e67 206f 7220 7468 6520  a string or the 
+0001c2e0: 616c 676f 7269 7468 6d20 6974 7365 6c66  algorithm itself
+0001c2f0: 2e0a 0a20 2020 206d 696e 5f6c 656e 6774  ...    min_lengt
+0001c300: 6820 6973 2074 6865 206d 696e 696d 616c  h is the minimal
+0001c310: 2070 6173 7377 6f72 6420 6c65 6e67 7468   password length
+0001c320: 2028 6465 6661 756c 7420 3429 202d 2049   (default 4) - I
+0001c330: 535f 5354 524f 4e47 2066 6f72 2073 6572  S_STRONG for ser
+0001c340: 696f 7573 2073 6563 7572 6974 790a 2020  ious security.  
+0001c350: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
+0001c360: 6973 2074 6865 206d 6573 7361 6765 2069  is the message i
+0001c370: 6620 7061 7373 776f 7264 2069 7320 746f  f password is to
+0001c380: 6f20 7368 6f72 740a 0a20 2020 204e 6f74  o short..    Not
+0001c390: 6963 6520 7468 6174 2061 6e20 656d 7074  ice that an empt
+0001c3a0: 7920 7061 7373 776f 7264 2069 7320 6163  y password is ac
+0001c3b0: 6365 7074 6564 2062 7574 2069 6e76 616c  cepted but inval
+0001c3c0: 6964 2e20 4974 2077 696c 6c20 6e6f 7420  id. It will not 
+0001c3d0: 616c 6c6f 7720 6c6f 6769 6e20 6261 636b  allow login back
+0001c3e0: 2e0a 2020 2020 5374 6f72 6573 206a 756e  ..    Stores jun
+0001c3f0: 6b20 6173 2068 6173 6865 6420 7061 7373  k as hashed pass
+0001c400: 776f 7264 2e0a 0a20 2020 2053 7065 6369  word...    Speci
+0001c410: 6679 2061 6e20 616c 676f 7269 7468 6d20  fy an algorithm 
+0001c420: 6f72 2062 7920 6465 6661 756c 7420 7765  or by default we
+0001c430: 2077 696c 6c20 7573 6520 7368 6135 3132   will use sha512
+0001c440: 2e0a 0a20 2020 2054 7970 6963 616c 2061  ...    Typical a
+0001c450: 7661 696c 6162 6c65 2061 6c67 6f72 6974  vailable algorit
+0001c460: 686d 733a 0a20 2020 2020 206d 6435 2c20  hms:.      md5, 
+0001c470: 7368 6131 2c20 7368 6132 3234 2c20 7368  sha1, sha224, sh
+0001c480: 6132 3536 2c20 7368 6133 3834 2c20 7368  a256, sha384, sh
+0001c490: 6135 3132 0a0a 2020 2020 4966 2073 616c  a512..    If sal
+0001c4a0: 742c 2069 7420 6861 7368 6573 2061 2070  t, it hashes a p
+0001c4b0: 6173 7377 6f72 6420 7769 7468 2061 2073  assword with a s
+0001c4c0: 616c 742e 0a20 2020 2049 6620 7361 6c74  alt..    If salt
+0001c4d0: 2069 7320 5472 7565 2c20 7468 6973 206d   is True, this m
+0001c4e0: 6574 686f 6420 7769 6c6c 2061 7574 6f6d  ethod will autom
+0001c4f0: 6174 6963 616c 6c79 2067 656e 6572 6174  atically generat
+0001c500: 6520 6f6e 652e 0a20 2020 2045 6974 6865  e one..    Eithe
+0001c510: 7220 6361 7365 2069 7420 7265 7475 726e  r case it return
+0001c520: 7320 616e 2065 6e63 7279 7074 6564 2070  s an encrypted p
+0001c530: 6173 7377 6f72 6420 7374 7269 6e67 2069  assword string i
+0001c540: 6e20 7468 6520 666f 6c6c 6f77 696e 6720  n the following 
+0001c550: 666f 726d 6174 3a0a 0a20 2020 2020 203c  format:..      <
+0001c560: 616c 676f 7269 7468 6d3e 243c 7361 6c74  algorithm>$<salt
+0001c570: 3e24 3c68 6173 683e 0a0a 2020 2020 496d  >$<hash>..    Im
+0001c580: 706f 7274 616e 743a 2068 6173 6865 6420  portant: hashed 
+0001c590: 7061 7373 776f 7264 2069 7320 7265 7475  password is retu
+0001c5a0: 726e 6564 2061 7320 6120 4c61 7a79 4372  rned as a LazyCr
+0001c5b0: 7970 7420 6f62 6a65 6374 2061 6e64 2063  ypt object and c
+0001c5c0: 6f6d 7075 7465 6420 6f6e 6c79 2069 6620  omputed only if 
+0001c5d0: 6e65 6564 6564 2e0a 2020 2020 5468 6520  needed..    The 
+0001c5e0: 4c61 7379 4372 7970 7420 6f62 6a65 6374  LasyCrypt object
+0001c5f0: 2061 6c73 6f20 6b6e 6f77 7320 686f 7720   also knows how 
+0001c600: 746f 2063 6f6d 7061 7265 2069 7473 656c  to compare itsel
+0001c610: 6620 7769 7468 2061 6e20 6578 6973 7469  f with an existi
+0001c620: 6e67 2073 616c 7465 6420 7061 7373 776f  ng salted passwo
+0001c630: 7264 0a0a 2020 2020 5375 7070 6f72 7473  rd..    Supports
+0001c640: 2073 7461 6e64 6172 6420 616c 676f 7269   standard algori
+0001c650: 7468 6d73 0a0a 2020 2020 2020 2020 3e3e  thms..        >>
+0001c660: 3e20 666f 7220 616c 6720 696e 2028 276d  > for alg in ('m
+0001c670: 6435 272c 2773 6861 3127 2c27 7368 6132  d5','sha1','sha2
+0001c680: 3536 272c 2773 6861 3338 3427 2c27 7368  56','sha384','sh
+0001c690: 6135 3132 2729 3a0a 2020 2020 2020 2020  a512'):.        
+0001c6a0: 2e2e 2e20 2020 2020 7072 696e 7428 7374  ...     print(st
+0001c6b0: 7228 4352 5950 5428 6469 6765 7374 5f61  r(CRYPT(digest_a
+0001c6c0: 6c67 3d61 6c67 2c73 616c 743d 5472 7565  lg=alg,salt=True
+0001c6d0: 2928 2774 6573 7427 295b 305d 2929 0a20  )('test')[0])). 
+0001c6e0: 2020 2020 2020 206d 6435 242e 2e2e 242e         md5$...$.
+0001c6f0: 2e2e 0a20 2020 2020 2020 2073 6861 3124  ...        sha1$
+0001c700: 2e2e 2e24 2e2e 2e0a 2020 2020 2020 2020  ...$....        
+0001c710: 7368 6132 3536 242e 2e2e 242e 2e2e 0a20  sha256$...$.... 
+0001c720: 2020 2020 2020 2073 6861 3338 3424 2e2e         sha384$..
+0001c730: 2e24 2e2e 2e0a 2020 2020 2020 2020 7368  .$....        sh
+0001c740: 6135 3132 242e 2e2e 242e 2e2e 0a0a 2020  a512$...$.....  
+0001c750: 2020 5468 6520 7379 6e74 6178 2069 7320    The syntax is 
+0001c760: 616c 7761 7973 2061 6c67 2473 616c 7424  always alg$salt$
+0001c770: 6861 7368 0a0a 2020 2020 5375 7070 6f72  hash..    Suppor
+0001c780: 7473 2066 6f72 2070 626b 6466 320a 0a20  ts for pbkdf2.. 
+0001c790: 2020 2020 2020 203e 3e3e 2061 6c67 203d         >>> alg =
+0001c7a0: 2027 7062 6b64 6632 2831 3030 302c 3230   'pbkdf2(1000,20
+0001c7b0: 2c73 6861 3531 3229 270a 2020 2020 2020  ,sha512)'.      
+0001c7c0: 2020 3e3e 3e20 7072 696e 7428 7374 7228    >>> print(str(
+0001c7d0: 4352 5950 5428 6469 6765 7374 5f61 6c67  CRYPT(digest_alg
+0001c7e0: 3d61 6c67 2c73 616c 743d 5472 7565 2928  =alg,salt=True)(
+0001c7f0: 2774 6573 7427 295b 305d 2929 0a20 2020  'test')[0])).   
+0001c800: 2020 2020 2070 626b 6466 3228 3130 3030       pbkdf2(1000
+0001c810: 2c32 302c 7368 6135 3132 2924 2e2e 2e24  ,20,sha512)$...$
+0001c820: 2e2e 2e0a 0a20 2020 2041 6e20 6f70 7469  .....    An opti
+0001c830: 6f6e 616c 2068 6d61 635f 6b65 7920 6361  onal hmac_key ca
+0001c840: 6e20 6265 2073 7065 6369 6669 6564 2061  n be specified a
+0001c850: 6e64 2069 7420 6973 2075 7365 6420 6173  nd it is used as
+0001c860: 2073 616c 7420 7072 6566 6978 0a0a 2020   salt prefix..  
+0001c870: 2020 2020 2020 3e3e 3e20 6120 3d20 7374        >>> a = st
+0001c880: 7228 4352 5950 5428 6469 6765 7374 5f61  r(CRYPT(digest_a
+0001c890: 6c67 3d27 6d64 3527 2c6b 6579 3d27 6d79  lg='md5',key='my
+0001c8a0: 6b65 7927 2c73 616c 743d 5472 7565 2928  key',salt=True)(
+0001c8b0: 2774 6573 7427 295b 305d 290a 2020 2020  'test')[0]).    
+0001c8c0: 2020 2020 3e3e 3e20 7072 696e 7428 6129      >>> print(a)
+0001c8d0: 0a20 2020 2020 2020 206d 6435 242e 2e2e  .        md5$...
+0001c8e0: 242e 2e2e 0a0a 2020 2020 4576 656e 2069  $.....    Even i
+0001c8f0: 6620 7468 6520 616c 676f 7269 7468 6d20  f the algorithm 
+0001c900: 6368 616e 6765 7320 7468 6520 6861 7368  changes the hash
+0001c910: 2063 616e 2073 7469 6c6c 2062 6520 7661   can still be va
+0001c920: 6c69 6461 7465 640a 0a20 2020 2020 2020  lidated..       
+0001c930: 203e 3e3e 2043 5259 5054 2864 6967 6573   >>> CRYPT(diges
+0001c940: 745f 616c 673d 2773 6861 3127 2c6b 6579  t_alg='sha1',key
+0001c950: 3d27 6d79 6b65 7927 2c73 616c 743d 5472  ='mykey',salt=Tr
+0001c960: 7565 2928 2774 6573 7427 295b 305d 203d  ue)('test')[0] =
+0001c970: 3d20 610a 2020 2020 2020 2020 5472 7565  = a.        True
+0001c980: 0a0a 2020 2020 4966 206e 6f20 7361 6c74  ..    If no salt
+0001c990: 2069 7320 7370 6563 6966 6965 6420 4352   is specified CR
+0001c9a0: 5950 5420 6361 6e20 6775 6573 7320 7468  YPT can guess th
+0001c9b0: 6520 616c 676f 7269 7468 6d73 2066 726f  e algorithms fro
+0001c9c0: 6d20 6c65 6e67 7468 3a0a 0a20 2020 2020  m length:..     
+0001c9d0: 2020 203e 3e3e 2061 203d 2073 7472 2843     >>> a = str(C
+0001c9e0: 5259 5054 2864 6967 6573 745f 616c 673d  RYPT(digest_alg=
+0001c9f0: 2773 6861 3127 2c73 616c 743d 4661 6c73  'sha1',salt=Fals
+0001ca00: 6529 2827 7465 7374 2729 5b30 5d29 0a20  e)('test')[0]). 
+0001ca10: 2020 2020 2020 203e 3e3e 2061 0a20 2020         >>> a.   
+0001ca20: 2020 2020 2027 7368 6131 2424 6139 3461       'sha1$$a94a
+0001ca30: 3866 6535 6363 6231 3962 6136 3163 3463  8fe5ccb19ba61c4c
+0001ca40: 3038 3733 6433 3931 6539 3837 3938 3266  0873d391e987982f
+0001ca50: 6262 6433 270a 2020 2020 2020 2020 3e3e  bbd3'.        >>
+0001ca60: 3e20 4352 5950 5428 6469 6765 7374 5f61  > CRYPT(digest_a
+0001ca70: 6c67 3d27 7368 6131 272c 7361 6c74 3d46  lg='sha1',salt=F
+0001ca80: 616c 7365 2928 2774 6573 7427 295b 305d  alse)('test')[0]
+0001ca90: 203d 3d20 610a 2020 2020 2020 2020 5472   == a.        Tr
+0001caa0: 7565 0a20 2020 2020 2020 203e 3e3e 2043  ue.        >>> C
+0001cab0: 5259 5054 2864 6967 6573 745f 616c 673d  RYPT(digest_alg=
+0001cac0: 2773 6861 3127 2c73 616c 743d 4661 6c73  'sha1',salt=Fals
+0001cad0: 6529 2827 7465 7374 2729 5b30 5d20 3d3d  e)('test')[0] ==
+0001cae0: 2061 5b36 3a5d 0a20 2020 2020 2020 2054   a[6:].        T
+0001caf0: 7275 650a 2020 2020 2020 2020 3e3e 3e20  rue.        >>> 
+0001cb00: 4352 5950 5428 6469 6765 7374 5f61 6c67  CRYPT(digest_alg
+0001cb10: 3d27 6d64 3527 2c73 616c 743d 4661 6c73  ='md5',salt=Fals
+0001cb20: 6529 2827 7465 7374 2729 5b30 5d20 3d3d  e)('test')[0] ==
+0001cb30: 2061 0a20 2020 2020 2020 2054 7275 650a   a.        True.
+0001cb40: 2020 2020 2020 2020 3e3e 3e20 4352 5950          >>> CRYP
+0001cb50: 5428 6469 6765 7374 5f61 6c67 3d27 6d64  T(digest_alg='md
+0001cb60: 3527 2c73 616c 743d 4661 6c73 6529 2827  5',salt=False)('
+0001cb70: 7465 7374 2729 5b30 5d20 3d3d 2061 5b36  test')[0] == a[6
+0001cb80: 3a5d 0a20 2020 2020 2020 2054 7275 650a  :].        True.
+0001cb90: 2020 2020 2222 220a 0a20 2020 2053 5441      """..    STA
+0001cba0: 5253 203d 2022 2a2a 2a2a 2a2a 220a 0a20  RS = "******".. 
+0001cbb0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0001cbc0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+0001cbd0: 2020 2020 2020 206b 6579 3d4e 6f6e 652c         key=None,
+0001cbe0: 0a20 2020 2020 2020 2064 6967 6573 745f  .        digest_
+0001cbf0: 616c 673d 2270 626b 6466 3228 3130 3030  alg="pbkdf2(1000
+0001cc00: 2c32 302c 7368 6135 3132 2922 2c0a 2020  ,20,sha512)",.  
+0001cc10: 2020 2020 2020 6d69 6e5f 6c65 6e67 7468        min_length
+0001cc20: 3d30 2c0a 2020 2020 2020 2020 6572 726f  =0,.        erro
+0001cc30: 725f 6d65 7373 6167 653d 2254 6f6f 2073  r_message="Too s
+0001cc40: 686f 7274 222c 0a20 2020 2020 2020 2073  hort",.        s
+0001cc50: 616c 743d 5472 7565 2c0a 2020 2020 2020  alt=True,.      
+0001cc60: 2020 6d61 785f 6c65 6e67 7468 3d31 3032    max_length=102
+0001cc70: 342c 0a20 2020 2029 3a0a 2020 2020 2020  4,.    ):.      
+0001cc80: 2020 2222 220a 2020 2020 2020 2020 696d    """.        im
+0001cc90: 706f 7274 616e 742c 2064 6967 6573 745f  portant, digest_
+0001cca0: 616c 673d 276d 6435 2720 6973 206e 6f74  alg='md5' is not
+0001ccb0: 2074 6865 2064 6566 6175 6c74 2068 6173   the default has
+0001ccc0: 6869 6e67 2061 6c67 6f72 6974 686d 2066  hing algorithm f
+0001ccd0: 6f72 0a20 2020 2020 2020 2077 6562 3270  or.        web2p
+0001cce0: 792e 2054 6869 7320 6973 206f 6e6c 7920  y. This is only 
+0001ccf0: 616e 2065 7861 6d70 6c65 206f 6620 7573  an example of us
+0001cd00: 6167 6520 6f66 2074 6869 7320 6675 6e63  age of this func
+0001cd10: 7469 6f6e 2e0a 0a20 2020 2020 2020 2054  tion...        T
+0001cd20: 6865 2061 6374 7561 6c20 6861 7368 2061  he actual hash a
+0001cd30: 6c67 6f72 6974 686d 2069 7320 6465 7465  lgorithm is dete
+0001cd40: 726d 696e 6564 2066 726f 6d20 7468 6520  rmined from the 
+0001cd50: 6b65 7920 7768 6963 6820 6973 0a20 2020  key which is.   
+0001cd60: 2020 2020 2067 656e 6572 6174 6564 2062       generated b
+0001cd70: 7920 7765 6232 7079 2069 6e20 746f 6f6c  y web2py in tool
+0001cd80: 732e 7079 2e20 5468 6973 2064 6566 6175  s.py. This defau
+0001cd90: 6c74 7320 746f 2068 6d61 632b 7368 6135  lts to hmac+sha5
+0001cda0: 3132 2e0a 2020 2020 2020 2020 2222 220a  12..        """.
+0001cdb0: 2020 2020 2020 2020 7365 6c66 2e6b 6579          self.key
+0001cdc0: 203d 206b 6579 0a20 2020 2020 2020 2073   = key.        s
+0001cdd0: 656c 662e 6469 6765 7374 5f61 6c67 203d  elf.digest_alg =
+0001cde0: 2064 6967 6573 745f 616c 670a 2020 2020   digest_alg.    
+0001cdf0: 2020 2020 7365 6c66 2e6d 696e 5f6c 656e      self.min_len
+0001ce00: 6774 6820 3d20 6d69 6e5f 6c65 6e67 7468  gth = min_length
+0001ce10: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0001ce20: 785f 6c65 6e67 7468 203d 206d 6178 5f6c  x_length = max_l
+0001ce30: 656e 6774 680a 2020 2020 2020 2020 7365  ength.        se
+0001ce40: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+0001ce50: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
+0001ce60: 0a20 2020 2020 2020 2073 656c 662e 7361  .        self.sa
+0001ce70: 6c74 203d 2073 616c 740a 0a20 2020 2064  lt = salt..    d
+0001ce80: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
+0001ce90: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
+0001cea0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
+0001ceb0: 2020 6966 2076 616c 7565 203d 3d20 7365    if value == se
+0001cec0: 6c66 2e53 5441 5253 3a0a 2020 2020 2020  lf.STARS:.      
+0001ced0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+0001cee0: 650a 2020 2020 2020 2020 7620 3d20 7661  e.        v = va
+0001cef0: 6c75 6520 616e 6420 7374 7228 7661 6c75  lue and str(valu
+0001cf00: 6529 5b3a 2073 656c 662e 6d61 785f 6c65  e)[: self.max_le
+0001cf10: 6e67 7468 5d0a 2020 2020 2020 2020 6966  ngth].        if
+0001cf20: 206e 6f74 2076 206f 7220 6c65 6e28 7629   not v or len(v)
+0001cf30: 203c 2073 656c 662e 6d69 6e5f 6c65 6e67   < self.min_leng
+0001cf40: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+0001cf50: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+0001cf60: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+0001cf70: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+0001cf80: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+0001cf90: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0001cfa0: 2876 616c 7565 2c20 4c61 7a79 4372 7970  (value, LazyCryp
+0001cfb0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+0001cfc0: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
+0001cfd0: 2020 2020 2072 6574 7572 6e20 4c61 7a79       return Lazy
+0001cfe0: 4372 7970 7428 7365 6c66 2c20 7661 6c75  Crypt(self, valu
+0001cff0: 6529 0a0a 2020 2020 6465 6620 666f 726d  e)..    def form
+0001d000: 6174 7465 7228 7365 6c66 2c20 7661 6c75  atter(self, valu
+0001d010: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
+0001d020: 726e 2073 656c 662e 5354 4152 530a 0a0a  rn self.STARS...
+0001d030: 2320 2065 6e74 726f 7079 2063 616c 6375  #  entropy calcu
+0001d040: 6c61 746f 7220 666f 7220 4953 5f53 5452  lator for IS_STR
+0001d050: 4f4e 470a 230a 6c6f 7765 7273 6574 203d  ONG.#.lowerset =
+0001d060: 2066 726f 7a65 6e73 6574 2862 2261 6263   frozenset(b"abc
+0001d070: 6465 6667 6869 6a6b 6c6d 6e6f 7071 7273  defghijklmnopqrs
+0001d080: 7475 7677 7879 7a22 290a 7570 7065 7273  tuvwxyz").uppers
+0001d090: 6574 203d 2066 726f 7a65 6e73 6574 2862  et = frozenset(b
+0001d0a0: 2241 4243 4445 4647 4849 4a4b 4c4d 4e4f  "ABCDEFGHIJKLMNO
+0001d0b0: 5051 5253 5455 5657 5859 5a22 290a 6e75  PQRSTUVWXYZ").nu
+0001d0c0: 6d62 6572 7365 7420 3d20 6672 6f7a 656e  mberset = frozen
+0001d0d0: 7365 7428 6222 3031 3233 3435 3637 3839  set(b"0123456789
+0001d0e0: 2229 0a73 796d 3173 6574 203d 2066 726f  ").sym1set = fro
+0001d0f0: 7a65 6e73 6574 2862 2221 4023 2425 5e26  zenset(b"!@#$%^&
+0001d100: 2a28 2920 2229 0a73 796d 3273 6574 203d  *() ").sym2set =
+0001d110: 2066 726f 7a65 6e73 6574 2862 227e 602d   frozenset(b"~`-
+0001d120: 5f3d 2b5b 5d7b 7d5c 5c7c 3b3a 275c 222c  _=+[]{}\\|;:'\",
+0001d130: 2e3c 3e3f 2f22 290a 6f74 6865 7273 6574  .<>?/").otherset
+0001d140: 203d 2066 726f 7a65 6e73 6574 2862 2222   = frozenset(b""
+0001d150: 2e6a 6f69 6e28 6368 7228 7829 2069 6620  .join(chr(x) if 
+0001d160: 5059 3220 656c 7365 2063 6872 2878 292e  PY2 else chr(x).
+0001d170: 656e 636f 6465 2829 2066 6f72 2078 2069  encode() for x i
+0001d180: 6e20 7261 6e67 6528 3235 3629 2929 0a0a  n range(256)))..
+0001d190: 0a64 6566 2063 616c 635f 656e 7472 6f70  .def calc_entrop
+0001d1a0: 7928 7374 7269 6e67 293a 0a20 2020 2022  y(string):.    "
+0001d1b0: 2222 6361 6c63 756c 6174 6573 2061 2073  ""calculates a s
+0001d1c0: 696d 706c 6520 656e 7472 6f70 7920 666f  imple entropy fo
+0001d1d0: 7220 6120 6769 7665 6e20 7374 7269 6e67  r a given string
+0001d1e0: 2222 220a 2020 2020 616c 7068 6162 6574  """.    alphabet
+0001d1f0: 203d 2030 2020 2320 616c 7068 6162 6574   = 0  # alphabet
+0001d200: 2073 697a 650a 2020 2020 6f74 6865 7220   size.    other 
+0001d210: 3d20 7365 7428 290a 2020 2020 7365 656e  = set().    seen
+0001d220: 203d 2073 6574 2829 0a20 2020 206c 6173   = set().    las
+0001d230: 7473 6574 203d 204e 6f6e 650a 2020 2020  tset = None.    
+0001d240: 7374 7269 6e67 203d 2074 6f5f 6279 7465  string = to_byte
+0001d250: 7328 7374 7269 6e67 206f 7220 2222 290a  s(string or "").
+0001d260: 2020 2020 666f 7220 6320 696e 2073 7472      for c in str
+0001d270: 696e 673a 0a20 2020 2020 2020 2023 2063  ing:.        # c
+0001d280: 6c61 7373 6966 7920 7468 6973 2063 6861  lassify this cha
+0001d290: 7261 6374 6572 0a20 2020 2020 2020 2069  racter.        i
+0001d2a0: 6e73 6574 203d 204e 6f6e 650a 2020 2020  nset = None.    
+0001d2b0: 2020 2020 666f 7220 6373 6574 2069 6e20      for cset in 
+0001d2c0: 286c 6f77 6572 7365 742c 2075 7070 6572  (lowerset, upper
+0001d2d0: 7365 742c 206e 756d 6265 7273 6574 2c20  set, numberset, 
+0001d2e0: 7379 6d31 7365 742c 2073 796d 3273 6574  sym1set, sym2set
+0001d2f0: 2c20 6f74 6865 7273 6574 293a 0a20 2020  , otherset):.   
+0001d300: 2020 2020 2020 2020 2069 6620 6320 696e           if c in
+0001d310: 2063 7365 743a 0a20 2020 2020 2020 2020   cset:.         
+0001d320: 2020 2020 2020 2069 6e73 6574 203d 2063         inset = c
+0001d330: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
+0001d340: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+0001d350: 2020 6173 7365 7274 2069 6e73 6574 2069    assert inset i
+0001d360: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+0001d370: 2020 2023 2063 616c 6375 6c61 7465 2065     # calculate e
+0001d380: 6666 6563 7420 6f66 2063 6861 7261 6374  ffect of charact
+0001d390: 6572 206f 6e20 616c 7068 6162 6574 2073  er on alphabet s
+0001d3a0: 697a 650a 2020 2020 2020 2020 6966 2069  ize.        if i
+0001d3b0: 6e73 6574 206e 6f74 2069 6e20 7365 656e  nset not in seen
+0001d3c0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0001d3d0: 656e 2e61 6464 2869 6e73 6574 290a 2020  en.add(inset).  
+0001d3e0: 2020 2020 2020 2020 2020 616c 7068 6162            alphab
+0001d3f0: 6574 202b 3d20 6c65 6e28 696e 7365 7429  et += len(inset)
+0001d400: 2020 2320 6372 6564 6974 2066 6f72 2061    # credit for a
+0001d410: 206e 6577 2063 6861 7261 6374 6572 2073   new character s
+0001d420: 6574 0a20 2020 2020 2020 2065 6c69 6620  et.        elif 
+0001d430: 6320 6e6f 7420 696e 206f 7468 6572 3a0a  c not in other:.
+0001d440: 2020 2020 2020 2020 2020 2020 616c 7068              alph
+0001d450: 6162 6574 202b 3d20 3120 2023 2063 7265  abet += 1  # cre
+0001d460: 6469 7420 666f 7220 756e 6971 7565 2063  dit for unique c
+0001d470: 6861 7261 6374 6572 730a 2020 2020 2020  haracters.      
+0001d480: 2020 2020 2020 6f74 6865 722e 6164 6428        other.add(
+0001d490: 6329 0a20 2020 2020 2020 2069 6620 696e  c).        if in
+0001d4a0: 7365 7420 6973 206e 6f74 206c 6173 7473  set is not lasts
+0001d4b0: 6574 3a0a 2020 2020 2020 2020 2020 2020  et:.            
+0001d4c0: 616c 7068 6162 6574 202b 3d20 3120 2023  alphabet += 1  #
+0001d4d0: 2063 7265 6469 7420 666f 7220 7365 7420   credit for set 
+0001d4e0: 7472 616e 7369 7469 6f6e 730a 2020 2020  transitions.    
+0001d4f0: 2020 2020 2020 2020 6c61 7374 7365 7420          lastset 
+0001d500: 3d20 6373 6574 0a20 2020 2065 6e74 726f  = cset.    entro
+0001d510: 7079 203d 206c 656e 2873 7472 696e 6729  py = len(string)
+0001d520: 202a 206d 6174 682e 6c6f 6728 616c 7068   * math.log(alph
+0001d530: 6162 6574 206f 7220 3129 202f 2030 2e36  abet or 1) / 0.6
+0001d540: 3933 3134 3731 3830 3535 3939 3435 3320  931471805599453 
+0001d550: 2023 206d 6174 682e 6c6f 6728 3229 0a20   # math.log(2). 
+0001d560: 2020 2072 6574 7572 6e20 726f 756e 6428     return round(
+0001d570: 656e 7472 6f70 792c 2032 290a 0a0a 636c  entropy, 2)...cl
+0001d580: 6173 7320 4953 5f53 5452 4f4e 4728 5661  ass IS_STRONG(Va
+0001d590: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
+0001d5a0: 220a 2020 2020 4578 616d 706c 6573 3a0a  ".    Examples:.
+0001d5b0: 2020 2020 2020 2020 5573 6520 6173 3a3a          Use as::
+0001d5c0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
+0001d5d0: 5055 5428 5f74 7970 653d 2770 6173 7377  PUT(_type='passw
+0001d5e0: 6f72 6427 2c20 5f6e 616d 653d 2770 6173  ord', _name='pas
+0001d5f0: 7377 6427 2c0a 2020 2020 2020 2020 2020  swd',.          
+0001d600: 2020 7265 7175 6972 6573 3d49 535f 5354    requires=IS_ST
+0001d610: 524f 4e47 286d 696e 3d31 302c 2073 7065  RONG(min=10, spe
+0001d620: 6369 616c 3d32 2c20 7570 7065 723d 3229  cial=2, upper=2)
+0001d630: 290a 0a20 2020 2065 6e66 6f72 6365 7320  )..    enforces 
+0001d640: 636f 6d70 6c65 7869 7479 2072 6571 7569  complexity requi
+0001d650: 7265 6d65 6e74 7320 6f6e 2061 2066 6965  rements on a fie
+0001d660: 6c64 0a0a 2020 2020 2020 2020 3e3e 3e20  ld..        >>> 
+0001d670: 4953 5f53 5452 4f4e 4728 6573 3d54 7275  IS_STRONG(es=Tru
+0001d680: 6529 2827 4162 6364 3132 3334 2729 0a20  e)('Abcd1234'). 
+0001d690: 2020 2020 2020 2028 2741 6263 6431 3233         ('Abcd123
+0001d6a0: 3427 2c0a 2020 2020 2020 2020 2027 4d75  4',.         'Mu
+0001d6b0: 7374 2069 6e63 6c75 6465 2061 7420 6c65  st include at le
+0001d6c0: 6173 7420 3120 6f66 2074 6865 2066 6f6c  ast 1 of the fol
+0001d6d0: 6c6f 7769 6e67 3a20 7e21 4023 2425 5e26  lowing: ~!@#$%^&
+0001d6e0: 2a28 295f 2b2d 3d3f 3c3e 2c2e 3a3b 7b7d  *()_+-=?<>,.:;{}
+0001d6f0: 5b5d 7c27 290a 2020 2020 2020 2020 3e3e  []|').        >>
+0001d700: 3e20 4953 5f53 5452 4f4e 4728 6573 3d54  > IS_STRONG(es=T
+0001d710: 7275 6529 2827 4162 6364 3132 3334 2127  rue)('Abcd1234!'
+0001d720: 290a 2020 2020 2020 2020 2827 4162 6364  ).        ('Abcd
+0001d730: 3132 3334 2127 2c20 4e6f 6e65 290a 2020  1234!', None).  
+0001d740: 2020 2020 2020 3e3e 3e20 4953 5f53 5452        >>> IS_STR
+0001d750: 4f4e 4728 6573 3d54 7275 652c 2065 6e74  ONG(es=True, ent
+0001d760: 726f 7079 3d31 2928 2761 2729 0a20 2020  ropy=1)('a').   
+0001d770: 2020 2020 2028 2761 272c 204e 6f6e 6529       ('a', None)
+0001d780: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+0001d790: 5354 524f 4e47 2865 733d 5472 7565 2c20  STRONG(es=True, 
+0001d7a0: 656e 7472 6f70 793d 312c 206d 696e 3d32  entropy=1, min=2
+0001d7b0: 2928 2761 2729 0a20 2020 2020 2020 2028  )('a').        (
+0001d7c0: 2761 272c 2027 4d69 6e69 6d75 6d20 6c65  'a', 'Minimum le
+0001d7d0: 6e67 7468 2069 7320 3227 290a 2020 2020  ngth is 2').    
+0001d7e0: 2020 2020 3e3e 3e20 4953 5f53 5452 4f4e      >>> IS_STRON
+0001d7f0: 4728 6573 3d54 7275 652c 2065 6e74 726f  G(es=True, entro
+0001d800: 7079 3d31 3030 2928 2761 6263 3132 3327  py=100)('abc123'
+0001d810: 290a 2020 2020 2020 2020 2827 6162 6331  ).        ('abc1
+0001d820: 3233 272c 2027 5061 7373 776f 7264 2074  23', 'Password t
+0001d830: 6f6f 2073 696d 706c 6520 2833 322e 3335  oo simple (32.35
+0001d840: 2f31 3030 2927 290a 2020 2020 2020 2020  /100)').        
+0001d850: 3e3e 3e20 4953 5f53 5452 4f4e 4728 6573  >>> IS_STRONG(es
+0001d860: 3d54 7275 652c 2065 6e74 726f 7079 3d31  =True, entropy=1
+0001d870: 3030 2928 2761 6e64 2729 0a20 2020 2020  00)('and').     
+0001d880: 2020 2028 2761 6e64 272c 2027 5061 7373     ('and', 'Pass
+0001d890: 776f 7264 2074 6f6f 2073 696d 706c 6520  word too simple 
+0001d8a0: 2831 342e 3537 2f31 3030 2927 290a 2020  (14.57/100)').  
+0001d8b0: 2020 2020 2020 3e3e 3e20 4953 5f53 5452        >>> IS_STR
+0001d8c0: 4f4e 4728 6573 3d54 7275 652c 2065 6e74  ONG(es=True, ent
+0001d8d0: 726f 7079 3d31 3030 2928 2761 6161 2729  ropy=100)('aaa')
+0001d8e0: 0a20 2020 2020 2020 2028 2761 6161 272c  .        ('aaa',
+0001d8f0: 2027 5061 7373 776f 7264 2074 6f6f 2073   'Password too s
+0001d900: 696d 706c 6520 2831 342e 3432 2f31 3030  imple (14.42/100
+0001d910: 2927 290a 2020 2020 2020 2020 3e3e 3e20  )').        >>> 
+0001d920: 4953 5f53 5452 4f4e 4728 6573 3d54 7275  IS_STRONG(es=Tru
+0001d930: 652c 2065 6e74 726f 7079 3d31 3030 2928  e, entropy=100)(
+0001d940: 2761 3164 2729 0a20 2020 2020 2020 2028  'a1d').        (
+0001d950: 2761 3164 272c 2027 5061 7373 776f 7264  'a1d', 'Password
+0001d960: 2074 6f6f 2073 696d 706c 6520 2831 352e   too simple (15.
+0001d970: 3937 2f31 3030 2927 290a 2020 2020 2020  97/100)').      
+0001d980: 2020 3e3e 3e20 4953 5f53 5452 4f4e 4728    >>> IS_STRONG(
+0001d990: 6573 3d54 7275 652c 2065 6e74 726f 7079  es=True, entropy
+0001d9a0: 3d31 3030 2928 2761 c3b1 6427 290a 2020  =100)('a..d').  
+0001d9b0: 2020 2020 2020 2827 615c 5c78 6333 5c5c        ('a\\xc3\\
+0001d9c0: 7862 3164 272c 2027 5061 7373 776f 7264  xb1d', 'Password
+0001d9d0: 2074 6f6f 2073 696d 706c 6520 2833 312e   too simple (31.
+0001d9e0: 3236 2f31 3029 2729 0a0a 2020 2020 2222  26/10)')..    ""
+0001d9f0: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
+0001da00: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+0001da10: 662c 0a20 2020 2020 2020 206d 696e 3d4e  f,.        min=N
+0001da20: 6f6e 652c 0a20 2020 2020 2020 206d 6178  one,.        max
+0001da30: 3d4e 6f6e 652c 0a20 2020 2020 2020 2075  =None,.        u
+0001da40: 7070 6572 3d4e 6f6e 652c 0a20 2020 2020  pper=None,.     
+0001da50: 2020 206c 6f77 6572 3d4e 6f6e 652c 0a20     lower=None,. 
+0001da60: 2020 2020 2020 206e 756d 6265 723d 4e6f         number=No
+0001da70: 6e65 2c0a 2020 2020 2020 2020 656e 7472  ne,.        entr
+0001da80: 6f70 793d 4e6f 6e65 2c0a 2020 2020 2020  opy=None,.      
+0001da90: 2020 7370 6563 6961 6c3d 4e6f 6e65 2c0a    special=None,.
+0001daa0: 2020 2020 2020 2020 7370 6563 6961 6c73          specials
+0001dab0: 3d72 227e 2140 2324 255e 262a 2829 5f2b  =r"~!@#$%^&*()_+
+0001dac0: 2d3d 3f3c 3e2c 2e3a 3b7b 7d5b 5d7c 222c  -=?<>,.:;{}[]|",
+0001dad0: 0a20 2020 2020 2020 2069 6e76 616c 6964  .        invalid
+0001dae0: 3d27 2022 272c 0a20 2020 2020 2020 2065  =' "',.        e
+0001daf0: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
+0001db00: 652c 0a20 2020 2020 2020 2065 733d 4661  e,.        es=Fa
+0001db10: 6c73 652c 0a20 2020 2029 3a0a 2020 2020  lse,.    ):.    
+0001db20: 2020 2020 7365 6c66 2e65 6e74 726f 7079      self.entropy
+0001db30: 203d 2065 6e74 726f 7079 0a20 2020 2020   = entropy.     
+0001db40: 2020 2069 6620 656e 7472 6f70 7920 6973     if entropy is
+0001db50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0001db60: 2020 2023 2065 6e66 6f72 6365 2064 6566     # enforce def
+0001db70: 6175 6c74 2072 6571 7569 7265 6d65 6e74  ault requirement
+0001db80: 730a 2020 2020 2020 2020 2020 2020 7365  s.            se
+0001db90: 6c66 2e6d 696e 203d 2038 2069 6620 6d69  lf.min = 8 if mi
+0001dba0: 6e20 6973 204e 6f6e 6520 656c 7365 206d  n is None else m
+0001dbb0: 696e 0a20 2020 2020 2020 2020 2020 2073  in.            s
+0001dbc0: 656c 662e 6d61 7820 3d20 6d61 7820 2023  elf.max = max  #
+0001dbd0: 2077 6173 2032 302c 2062 7574 2074 6861   was 20, but tha
+0001dbe0: 7420 646f 6573 6e27 7420 6d61 6b65 2073  t doesn't make s
+0001dbf0: 656e 7365 0a20 2020 2020 2020 2020 2020  ense.           
+0001dc00: 2073 656c 662e 7570 7065 7220 3d20 3120   self.upper = 1 
+0001dc10: 6966 2075 7070 6572 2069 7320 4e6f 6e65  if upper is None
+0001dc20: 2065 6c73 6520 7570 7065 720a 2020 2020   else upper.    
+0001dc30: 2020 2020 2020 2020 7365 6c66 2e6c 6f77          self.low
+0001dc40: 6572 203d 2031 2069 6620 6c6f 7765 7220  er = 1 if lower 
+0001dc50: 6973 204e 6f6e 6520 656c 7365 206c 6f77  is None else low
+0001dc60: 6572 0a20 2020 2020 2020 2020 2020 2073  er.            s
+0001dc70: 656c 662e 6e75 6d62 6572 203d 2031 2069  elf.number = 1 i
+0001dc80: 6620 6e75 6d62 6572 2069 7320 4e6f 6e65  f number is None
+0001dc90: 2065 6c73 6520 6e75 6d62 6572 0a20 2020   else number.   
+0001dca0: 2020 2020 2020 2020 2073 656c 662e 7370           self.sp
+0001dcb0: 6563 6961 6c20 3d20 3120 6966 2073 7065  ecial = 1 if spe
+0001dcc0: 6369 616c 2069 7320 4e6f 6e65 2065 6c73  cial is None els
+0001dcd0: 6520 7370 6563 6961 6c0a 2020 2020 2020  e special.      
+0001dce0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001dcf0: 2020 2020 2320 6279 2064 6566 6175 6c74      # by default
+0001dd00: 2c20 616e 2065 6e74 726f 7079 2073 7065  , an entropy spe
+0001dd10: 6320 6973 2065 7863 6c75 7369 7665 0a20  c is exclusive. 
+0001dd20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001dd30: 6d69 6e20 3d20 6d69 6e0a 2020 2020 2020  min = min.      
+0001dd40: 2020 2020 2020 7365 6c66 2e6d 6178 203d        self.max =
+0001dd50: 206d 6178 0a20 2020 2020 2020 2020 2020   max.           
+0001dd60: 2073 656c 662e 7570 7065 7220 3d20 7570   self.upper = up
+0001dd70: 7065 720a 2020 2020 2020 2020 2020 2020  per.            
+0001dd80: 7365 6c66 2e6c 6f77 6572 203d 206c 6f77  self.lower = low
+0001dd90: 6572 0a20 2020 2020 2020 2020 2020 2073  er.            s
+0001dda0: 656c 662e 6e75 6d62 6572 203d 206e 756d  elf.number = num
+0001ddb0: 6265 720a 2020 2020 2020 2020 2020 2020  ber.            
+0001ddc0: 7365 6c66 2e73 7065 6369 616c 203d 2073  self.special = s
+0001ddd0: 7065 6369 616c 0a20 2020 2020 2020 2073  pecial.        s
+0001dde0: 656c 662e 7370 6563 6961 6c73 203d 2073  elf.specials = s
+0001ddf0: 7065 6369 616c 730a 2020 2020 2020 2020  pecials.        
+0001de00: 7365 6c66 2e69 6e76 616c 6964 203d 2069  self.invalid = i
+0001de10: 6e76 616c 6964 0a20 2020 2020 2020 2073  nvalid.        s
+0001de20: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+0001de30: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
+0001de40: 650a 2020 2020 2020 2020 7365 6c66 2e65  e.        self.e
+0001de50: 7374 7269 6e67 203d 2065 7320 2023 2072  string = es  # r
+0001de60: 6574 7572 6e20 6572 726f 7220 6d65 7373  eturn error mess
+0001de70: 6167 6520 6173 2073 7472 696e 6720 2866  age as string (f
+0001de80: 6f72 2064 6f63 7465 7374 290a 0a20 2020  or doctest)..   
+0001de90: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
+0001dea0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
+0001deb0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+0001dec0: 2020 2020 6661 696c 7572 6573 203d 205b      failures = [
+0001ded0: 5d0a 2020 2020 2020 2020 6966 2076 616c  ].        if val
+0001dee0: 7565 2069 7320 4e6f 6e65 3a0a 2020 2020  ue is None:.    
+0001def0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+0001df00: 2222 0a20 2020 2020 2020 2069 6620 7661  "".        if va
+0001df10: 6c75 6520 616e 6420 6c65 6e28 7661 6c75  lue and len(valu
+0001df20: 6529 203d 3d20 7661 6c75 652e 636f 756e  e) == value.coun
+0001df30: 7428 222a 2229 203e 2034 3a0a 2020 2020  t("*") > 4:.    
+0001df40: 2020 2020 2020 2020 7265 7475 726e 2076          return v
+0001df50: 616c 7565 0a20 2020 2020 2020 2069 6620  alue.        if 
+0001df60: 7365 6c66 2e65 6e74 726f 7079 2069 7320  self.entropy is 
+0001df70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0001df80: 2020 2020 2020 656e 7472 6f70 7920 3d20        entropy = 
+0001df90: 6361 6c63 5f65 6e74 726f 7079 2876 616c  calc_entropy(val
+0001dfa0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+0001dfb0: 6966 2065 6e74 726f 7079 203c 2073 656c  if entropy < sel
+0001dfc0: 662e 656e 7472 6f70 793a 0a20 2020 2020  f.entropy:.     
+0001dfd0: 2020 2020 2020 2020 2020 2066 6169 6c75             failu
+0001dfe0: 7265 732e 6170 7065 6e64 280a 2020 2020  res.append(.    
+0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e000: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+0001e010: 2250 6173 7377 6f72 6420 746f 6f20 7369  "Password too si
+0001e020: 6d70 6c65 2028 2528 6861 7665 2973 2f25  mple (%(have)s/%
+0001e030: 286e 6565 6429 7329 2229 0a20 2020 2020  (need)s)").     
+0001e040: 2020 2020 2020 2020 2020 2020 2020 2025                 %
+0001e050: 2064 6963 7428 6861 7665 3d65 6e74 726f   dict(have=entro
+0001e060: 7079 2c20 6e65 6564 3d73 656c 662e 656e  py, need=self.en
+0001e070: 7472 6f70 7929 0a20 2020 2020 2020 2020  tropy).         
+0001e080: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001e090: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0001e0a0: 656c 662e 6d69 6e2c 2069 6e74 2920 616e  elf.min, int) an
+0001e0b0: 6420 7365 6c66 2e6d 696e 203e 2030 3a0a  d self.min > 0:.
+0001e0c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001e0d0: 6f74 206c 656e 2876 616c 7565 2920 3e3d  ot len(value) >=
+0001e0e0: 2073 656c 662e 6d69 6e3a 0a20 2020 2020   self.min:.     
+0001e0f0: 2020 2020 2020 2020 2020 2066 6169 6c75             failu
+0001e100: 7265 732e 6170 7065 6e64 2873 656c 662e  res.append(self.
+0001e110: 7472 616e 736c 6174 6f72 2822 4d69 6e69  translator("Mini
+0001e120: 6d75 6d20 6c65 6e67 7468 2069 7320 2573  mum length is %s
+0001e130: 2229 2025 2073 656c 662e 6d69 6e29 0a20  ") % self.min). 
+0001e140: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001e150: 616e 6365 2873 656c 662e 6d61 782c 2069  ance(self.max, i
+0001e160: 6e74 2920 616e 6420 7365 6c66 2e6d 6178  nt) and self.max
+0001e170: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
+0001e180: 2020 6966 206e 6f74 206c 656e 2876 616c    if not len(val
+0001e190: 7565 2920 3c3d 2073 656c 662e 6d61 783a  ue) <= self.max:
+0001e1a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e1b0: 2066 6169 6c75 7265 732e 6170 7065 6e64   failures.append
+0001e1c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+0001e1d0: 2822 4d61 7869 6d75 6d20 6c65 6e67 7468  ("Maximum length
+0001e1e0: 2069 7320 2573 2229 2025 2073 656c 662e   is %s") % self.
+0001e1f0: 6d61 7829 0a20 2020 2020 2020 2069 6620  max).        if 
+0001e200: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
+0001e210: 7370 6563 6961 6c2c 2069 6e74 293a 0a20  special, int):. 
+0001e220: 2020 2020 2020 2020 2020 2061 6c6c 5f73             all_s
+0001e230: 7065 6369 616c 203d 205b 6368 2069 6e20  pecial = [ch in 
+0001e240: 7661 6c75 6520 666f 7220 6368 2069 6e20  value for ch in 
+0001e250: 7365 6c66 2e73 7065 6369 616c 735d 0a20  self.specials]. 
+0001e260: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+0001e270: 6c66 2e73 7065 6369 616c 203e 2030 3a0a  lf.special > 0:.
 0001e280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e290: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001e2a0: 7365 6c66 2e69 6e76 616c 6964 3a0a 2020  self.invalid:.  
-0001e2b0: 2020 2020 2020 2020 2020 616c 6c5f 696e            all_in
-0001e2c0: 7661 6c69 6420 3d20 5b63 6820 696e 2076  valid = [ch in v
-0001e2d0: 616c 7565 2066 6f72 2063 6820 696e 2073  alue for ch in s
-0001e2e0: 656c 662e 696e 7661 6c69 645d 0a20 2020  elf.invalid].   
-0001e2f0: 2020 2020 2020 2020 2069 6620 616c 6c5f           if all_
-0001e300: 696e 7661 6c69 642e 636f 756e 7428 5472  invalid.count(Tr
-0001e310: 7565 2920 3e20 303a 0a20 2020 2020 2020  ue) > 0:.       
-0001e320: 2020 2020 2020 2020 2066 6169 6c75 7265           failure
-0001e330: 732e 6170 7065 6e64 280a 2020 2020 2020  s.append(.      
-0001e340: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001e350: 6c66 2e74 7261 6e73 6c61 746f 7228 224d  lf.translator("M
-0001e360: 6179 206e 6f74 2063 6f6e 7461 696e 2061  ay not contain a
-0001e370: 6e79 206f 6620 7468 6520 666f 6c6c 6f77  ny of the follow
-0001e380: 696e 673a 2025 7322 290a 2020 2020 2020  ing: %s").      
-0001e390: 2020 2020 2020 2020 2020 2020 2020 2520                % 
-0001e3a0: 7365 6c66 2e69 6e76 616c 6964 0a20 2020  self.invalid.   
-0001e3b0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0001e3c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0001e3d0: 616e 6365 2873 656c 662e 7570 7065 722c  ance(self.upper,
-0001e3e0: 2069 6e74 293a 0a20 2020 2020 2020 2020   int):.         
-0001e3f0: 2020 2061 6c6c 5f75 7070 6572 203d 2072     all_upper = r
-0001e400: 652e 6669 6e64 616c 6c28 225b 412d 5a5d  e.findall("[A-Z]
-0001e410: 222c 2076 616c 7565 290a 2020 2020 2020  ", value).      
-0001e420: 2020 2020 2020 6966 2073 656c 662e 7570        if self.up
-0001e430: 7065 7220 3e20 303a 0a20 2020 2020 2020  per > 0:.       
-0001e440: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0001e450: 6c65 6e28 616c 6c5f 7570 7065 7229 203e  len(all_upper) >
-0001e460: 3d20 7365 6c66 2e75 7070 6572 3a0a 2020  = self.upper:.  
-0001e470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e480: 2020 6661 696c 7572 6573 2e61 7070 656e    failures.appen
-0001e490: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
-0001e4a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001e4b0: 7472 616e 736c 6174 6f72 2822 4d75 7374  translator("Must
-0001e4c0: 2069 6e63 6c75 6465 2061 7420 6c65 6173   include at leas
-0001e4d0: 7420 2573 2075 7070 6572 6361 7365 2229  t %s uppercase")
-0001e4e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e4f0: 2020 2020 2020 2020 2025 2073 7472 2873           % str(s
-0001e500: 656c 662e 7570 7065 7229 0a20 2020 2020  elf.upper).     
-0001e510: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0001e520: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0001e530: 6620 7365 6c66 2e75 7070 6572 203d 3d20  f self.upper == 
-0001e540: 3020 616e 6420 7365 6c66 2e75 7070 6572  0 and self.upper
-0001e550: 2069 7320 6e6f 7420 4661 6c73 653a 0a20   is not False:. 
-0001e560: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001e570: 6620 6c65 6e28 616c 6c5f 7570 7065 7229  f len(all_upper)
-0001e580: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
-0001e590: 2020 2020 2020 2020 2020 6661 696c 7572            failur
-0001e5a0: 6573 2e61 7070 656e 6428 0a20 2020 2020  es.append(.     
-0001e5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e5c0: 2020 2073 656c 662e 7472 616e 736c 6174     self.translat
-0001e5d0: 6f72 2822 4d61 7920 6e6f 7420 696e 636c  or("May not incl
-0001e5e0: 7564 6520 616e 7920 7570 7065 7263 6173  ude any uppercas
-0001e5f0: 6520 6c65 7474 6572 7322 290a 2020 2020  e letters").    
-0001e600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e610: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
-0001e620: 6e73 7461 6e63 6528 7365 6c66 2e6c 6f77  nstance(self.low
-0001e630: 6572 2c20 696e 7429 3a0a 2020 2020 2020  er, int):.      
-0001e640: 2020 2020 2020 616c 6c5f 6c6f 7765 7220        all_lower 
-0001e650: 3d20 7265 2e66 696e 6461 6c6c 2822 5b61  = re.findall("[a
-0001e660: 2d7a 5d22 2c20 7661 6c75 6529 0a20 2020  -z]", value).   
-0001e670: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-0001e680: 2e6c 6f77 6572 203e 2030 3a0a 2020 2020  .lower > 0:.    
-0001e690: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e6a0: 6f74 206c 656e 2861 6c6c 5f6c 6f77 6572  ot len(all_lower
-0001e6b0: 2920 3e3d 2073 656c 662e 6c6f 7765 723a  ) >= self.lower:
-0001e6c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e6d0: 2020 2020 2066 6169 6c75 7265 732e 6170       failures.ap
-0001e6e0: 7065 6e64 280a 2020 2020 2020 2020 2020  pend(.          
-0001e6f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001e700: 6c66 2e74 7261 6e73 6c61 746f 7228 224d  lf.translator("M
-0001e710: 7573 7420 696e 636c 7564 6520 6174 206c  ust include at l
-0001e720: 6561 7374 2025 7320 6c6f 7765 7263 6173  east %s lowercas
-0001e730: 6522 290a 2020 2020 2020 2020 2020 2020  e").            
-0001e740: 2020 2020 2020 2020 2020 2020 2520 7374              % st
-0001e750: 7228 7365 6c66 2e6c 6f77 6572 290a 2020  r(self.lower).  
-0001e760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e770: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-0001e780: 656c 6966 2073 656c 662e 6c6f 7765 7220  elif self.lower 
-0001e790: 3d3d 2030 2061 6e64 2073 656c 662e 6c6f  == 0 and self.lo
-0001e7a0: 7765 7220 6973 206e 6f74 2046 616c 7365  wer is not False
-0001e7b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e7c0: 2020 6966 206c 656e 2861 6c6c 5f6c 6f77    if len(all_low
-0001e7d0: 6572 2920 3e20 303a 0a20 2020 2020 2020  er) > 0:.       
-0001e7e0: 2020 2020 2020 2020 2020 2020 2066 6169               fai
-0001e7f0: 6c75 7265 732e 6170 7065 6e64 280a 2020  lures.append(.  
-0001e800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e810: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0001e820: 6c61 746f 7228 224d 6179 206e 6f74 2069  lator("May not i
-0001e830: 6e63 6c75 6465 2061 6e79 206c 6f77 6572  nclude any lower
-0001e840: 6361 7365 206c 6574 7465 7273 2229 0a20  case letters"). 
-0001e850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e860: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001e870: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
-0001e880: 6e75 6d62 6572 2c20 696e 7429 3a0a 2020  number, int):.  
-0001e890: 2020 2020 2020 2020 2020 616c 6c5f 6e75            all_nu
-0001e8a0: 6d62 6572 203d 2072 652e 6669 6e64 616c  mber = re.findal
-0001e8b0: 6c28 225b 302d 395d 222c 2076 616c 7565  l("[0-9]", value
-0001e8c0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001e8d0: 2073 656c 662e 6e75 6d62 6572 203e 2030   self.number > 0
-0001e8e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e8f0: 2020 6e75 6d62 6572 7320 3d20 226e 756d    numbers = "num
-0001e900: 6265 7222 0a20 2020 2020 2020 2020 2020  ber".           
-0001e910: 2020 2020 2069 6620 7365 6c66 2e6e 756d       if self.num
-0001e920: 6265 7220 3e20 313a 0a20 2020 2020 2020  ber > 1:.       
-0001e930: 2020 2020 2020 2020 2020 2020 206e 756d               num
-0001e940: 6265 7273 203d 2022 6e75 6d62 6572 7322  bers = "numbers"
-0001e950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e960: 206e 756d 6265 7273 203d 2073 656c 662e   numbers = self.
-0001e970: 7472 616e 736c 6174 6f72 286e 756d 6265  translator(numbe
-0001e980: 7273 290a 2020 2020 2020 2020 2020 2020  rs).            
-0001e990: 2020 2020 6966 206e 6f74 206c 656e 2861      if not len(a
-0001e9a0: 6c6c 5f6e 756d 6265 7229 203e 3d20 7365  ll_number) >= se
-0001e9b0: 6c66 2e6e 756d 6265 723a 0a20 2020 2020  lf.number:.     
-0001e9c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001e9d0: 6169 6c75 7265 732e 6170 7065 6e64 280a  ailures.append(.
-0001e9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e9f0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0001ea00: 6e73 6c61 746f 7228 224d 7573 7420 696e  nslator("Must in
-0001ea10: 636c 7564 6520 6174 206c 6561 7374 2025  clude at least %
-0001ea20: 7320 2573 2229 0a20 2020 2020 2020 2020  s %s").         
-0001ea30: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-0001ea40: 2028 7374 7228 7365 6c66 2e6e 756d 6265   (str(self.numbe
-0001ea50: 7229 2c20 6e75 6d62 6572 7329 0a20 2020  r), numbers).   
-0001ea60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea70: 2029 0a20 2020 2020 2020 2020 2020 2065   ).            e
-0001ea80: 6c69 6620 7365 6c66 2e6e 756d 6265 7220  lif self.number 
-0001ea90: 3d3d 2030 2061 6e64 2073 656c 662e 6e75  == 0 and self.nu
-0001eaa0: 6d62 6572 2069 7320 6e6f 7420 4661 6c73  mber is not Fals
-0001eab0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001eac0: 2020 2069 6620 6c65 6e28 616c 6c5f 6e75     if len(all_nu
-0001ead0: 6d62 6572 2920 3e20 303a 0a20 2020 2020  mber) > 0:.     
-0001eae0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001eaf0: 6169 6c75 7265 732e 6170 7065 6e64 2873  ailures.append(s
-0001eb00: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
-0001eb10: 4d61 7920 6e6f 7420 696e 636c 7564 6520  May not include 
-0001eb20: 616e 7920 6e75 6d62 6572 7322 2929 0a20  any numbers")). 
-0001eb30: 2020 2020 2020 2069 6620 6c65 6e28 6661         if len(fa
-0001eb40: 696c 7572 6573 2920 3d3d 2030 3a0a 2020  ilures) == 0:.  
-0001eb50: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001eb60: 2076 616c 7565 0a20 2020 2020 2020 2069   value.        i
-0001eb70: 6620 6e6f 7420 7365 6c66 2e65 7272 6f72  f not self.error
-0001eb80: 5f6d 6573 7361 6765 3a0a 2020 2020 2020  _message:.      
-0001eb90: 2020 2020 2020 6966 2073 656c 662e 6573        if self.es
-0001eba0: 7472 696e 673a 0a20 2020 2020 2020 2020  tring:.         
-0001ebb0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0001ebc0: 6964 6174 696f 6e45 7272 6f72 2822 7c22  idationError("|"
-0001ebd0: 2e6a 6f69 6e28 6d61 7028 7374 722c 2066  .join(map(str, f
-0001ebe0: 6169 6c75 7265 7329 2929 0a20 2020 2020  ailures))).     
-0001ebf0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0001ec00: 6964 6174 696f 6e45 7272 6f72 2822 2c20  idationError(", 
-0001ec10: 222e 6a6f 696e 2866 6169 6c75 7265 7329  ".join(failures)
-0001ec20: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0001ec30: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001ec40: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-0001ec50: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-0001ec60: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-0001ec70: 7361 6765 2929 0a0a 0a63 6c61 7373 2049  sage))...class I
-0001ec80: 535f 494d 4147 4528 5661 6c69 6461 746f  S_IMAGE(Validato
-0001ec90: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
-0001eca0: 4368 6563 6b73 2069 6620 6669 6c65 2075  Checks if file u
-0001ecb0: 706c 6f61 6465 6420 7468 726f 7567 6820  ploaded through 
-0001ecc0: 6669 6c65 2069 6e70 7574 2077 6173 2073  file input was s
-0001ecd0: 6176 6564 2069 6e20 6f6e 6520 6f66 2073  aved in one of s
-0001ece0: 656c 6563 7465 640a 2020 2020 696d 6167  elected.    imag
-0001ecf0: 6520 666f 726d 6174 7320 616e 6420 6861  e formats and ha
-0001ed00: 7320 6469 6d65 6e73 696f 6e73 2028 7769  s dimensions (wi
-0001ed10: 6474 6820 616e 6420 6865 6967 6874 2920  dth and height) 
-0001ed20: 7769 7468 696e 2067 6976 656e 2062 6f75  within given bou
-0001ed30: 6e64 6172 6965 732e 0a0a 2020 2020 446f  ndaries...    Do
-0001ed40: 6573 202a 6e6f 742a 2063 6865 636b 2066  es *not* check f
-0001ed50: 6f72 206d 6178 696d 756d 2066 696c 6520  or maximum file 
-0001ed60: 7369 7a65 2028 7573 6520 4953 5f4c 454e  size (use IS_LEN
-0001ed70: 4754 4820 666f 7220 7468 6174 292e 2052  GTH for that). R
-0001ed80: 6574 7572 6e73 0a20 2020 2076 616c 6964  eturns.    valid
-0001ed90: 6174 696f 6e20 6661 696c 7572 6520 6966  ation failure if
-0001eda0: 206e 6f20 6461 7461 2077 6173 2075 706c   no data was upl
-0001edb0: 6f61 6465 642e 0a0a 2020 2020 5375 7070  oaded...    Supp
-0001edc0: 6f72 7465 6420 6669 6c65 2066 6f72 6d61  orted file forma
-0001edd0: 7473 3a20 424d 502c 2047 4946 2c20 4a50  ts: BMP, GIF, JP
-0001ede0: 4547 2c20 504e 472e 0a0a 2020 2020 436f  EG, PNG...    Co
-0001edf0: 6465 2070 6172 7473 2074 616b 656e 2066  de parts taken f
-0001ee00: 726f 6d0a 2020 2020 6874 7470 3a2f 2f6d  rom.    http://m
-0001ee10: 6169 6c2e 7079 7468 6f6e 2e6f 7267 2f70  ail.python.org/p
-0001ee20: 6970 6572 6d61 696c 2f70 7974 686f 6e2d  ipermail/python-
-0001ee30: 6c69 7374 2f32 3030 372d 4a75 6e65 2f36  list/2007-June/6
-0001ee40: 3137 3132 362e 6874 6d6c 0a0a 2020 2020  17126.html..    
-0001ee50: 4172 6773 3a0a 2020 2020 2020 2020 6578  Args:.        ex
-0001ee60: 7465 6e73 696f 6e73 3a20 6974 6572 6162  tensions: iterab
-0001ee70: 6c65 2063 6f6e 7461 696e 696e 6720 616c  le containing al
-0001ee80: 6c6f 7765 6420 2a6c 6f77 6572 6361 7365  lowed *lowercase
-0001ee90: 2a20 696d 6167 6520 6669 6c65 2065 7874  * image file ext
-0001eea0: 656e 7369 6f6e 730a 2020 2020 2020 2020  ensions.        
-0001eeb0: 2827 6a70 6727 2065 7874 656e 7369 6f6e  ('jpg' extension
-0001eec0: 206f 6620 7570 6c6f 6164 6564 2066 696c   of uploaded fil
-0001eed0: 6520 636f 756e 7473 2061 7320 276a 7065  e counts as 'jpe
-0001eee0: 6727 290a 2020 2020 2020 2020 6d61 7873  g').        maxs
-0001eef0: 697a 653a 2069 7465 7261 626c 6520 636f  ize: iterable co
-0001ef00: 6e74 6169 6e69 6e67 206d 6178 696d 756d  ntaining maximum
-0001ef10: 2077 6964 7468 2061 6e64 2068 6569 6768   width and heigh
-0001ef20: 7420 6f66 2074 6865 2069 6d61 6765 0a20  t of the image. 
-0001ef30: 2020 2020 2020 206d 696e 7369 7a65 3a20         minsize: 
-0001ef40: 6974 6572 6162 6c65 2063 6f6e 7461 696e  iterable contain
-0001ef50: 696e 6720 6d69 6e69 6d75 6d20 7769 6474  ing minimum widt
-0001ef60: 6820 616e 6420 6865 6967 6874 206f 6620  h and height of 
-0001ef70: 7468 6520 696d 6167 650a 2020 2020 2020  the image.      
-0001ef80: 2020 6173 7065 6374 7261 7469 6f3a 2069    aspectratio: i
-0001ef90: 7465 7261 626c 6520 636f 6e74 6169 6e69  terable containi
-0001efa0: 6e67 2074 6172 6765 7420 6173 7065 6374  ng target aspect
-0001efb0: 2072 6174 696f 0a0a 2020 2020 5573 6520   ratio..    Use 
-0001efc0: 282d 312c 202d 3129 2061 7320 6d69 6e73  (-1, -1) as mins
-0001efd0: 697a 6520 746f 2070 6173 7320 696d 6167  ize to pass imag
-0001efe0: 6520 7369 7a65 2063 6865 636b 2e0a 2020  e size check..  
-0001eff0: 2020 5573 6520 282d 312c 202d 3129 2061    Use (-1, -1) a
-0001f000: 7320 6173 7065 6374 7261 7469 6f20 746f  s aspectratio to
-0001f010: 2070 6173 7320 6173 7065 6374 2072 6174   pass aspect rat
-0001f020: 696f 2063 6865 636b 2e0a 0a20 2020 2045  io check...    E
-0001f030: 7861 6d70 6c65 733a 0a20 2020 2020 2020  xamples:.       
-0001f040: 2043 6865 636b 2069 6620 7570 6c6f 6164   Check if upload
-0001f050: 6564 2066 696c 6520 6973 2069 6e20 616e  ed file is in an
-0001f060: 7920 6f66 2073 7570 706f 7274 6564 2069  y of supported i
-0001f070: 6d61 6765 2066 6f72 6d61 7473 3a0a 0a20  mage formats:.. 
-0001f080: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-0001f090: 285f 7479 7065 3d27 6669 6c65 272c 205f  (_type='file', _
-0001f0a0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-0001f0b0: 7569 7265 733d 4953 5f49 4d41 4745 2829  uires=IS_IMAGE()
-0001f0c0: 290a 0a20 2020 2020 2020 2043 6865 636b  )..        Check
-0001f0d0: 2069 6620 7570 6c6f 6164 6564 2066 696c   if uploaded fil
-0001f0e0: 6520 6973 2065 6974 6865 7220 4a50 4547  e is either JPEG
-0001f0f0: 206f 7220 504e 473a 0a0a 2020 2020 2020   or PNG:..      
-0001f100: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
-0001f110: 653d 2766 696c 6527 2c20 5f6e 616d 653d  e='file', _name=
-0001f120: 276e 616d 6527 2c0a 2020 2020 2020 2020  'name',.        
-0001f130: 2020 2020 2020 2020 7265 7175 6972 6573          requires
-0001f140: 3d49 535f 494d 4147 4528 6578 7465 6e73  =IS_IMAGE(extens
-0001f150: 696f 6e73 3d28 276a 7065 6727 2c20 2770  ions=('jpeg', 'p
-0001f160: 6e67 2729 2929 0a0a 2020 2020 2020 2020  ng')))..        
-0001f170: 4368 6563 6b20 6966 2075 706c 6f61 6465  Check if uploade
-0001f180: 6420 6669 6c65 2069 7320 504e 4720 7769  d file is PNG wi
-0001f190: 7468 206d 6178 696d 756d 2073 697a 6520  th maximum size 
-0001f1a0: 6f66 2032 3030 7832 3030 2070 6978 656c  of 200x200 pixel
-0001f1b0: 733a 0a0a 2020 2020 2020 2020 2020 2020  s:..            
-0001f1c0: 494e 5055 5428 5f74 7970 653d 2766 696c  INPUT(_type='fil
-0001f1d0: 6527 2c20 5f6e 616d 653d 276e 616d 6527  e', _name='name'
-0001f1e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001f1f0: 2020 7265 7175 6972 6573 3d49 535f 494d    requires=IS_IM
-0001f200: 4147 4528 6578 7465 6e73 696f 6e73 3d28  AGE(extensions=(
-0001f210: 2770 6e67 2729 2c20 6d61 7873 697a 653d  'png'), maxsize=
-0001f220: 2832 3030 2c20 3230 3029 2929 0a0a 2020  (200, 200)))..  
-0001f230: 2020 2020 2020 4368 6563 6b20 6966 2075        Check if u
-0001f240: 706c 6f61 6465 6420 6669 6c65 2068 6173  ploaded file has
-0001f250: 2061 2031 363a 3920 6173 7065 6374 2072   a 16:9 aspect r
-0001f260: 6174 696f 3a0a 0a20 2020 2020 2020 2020  atio:..         
-0001f270: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-0001f280: 6669 6c65 272c 205f 6e61 6d65 3d27 6e61  file', _name='na
-0001f290: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
-0001f2a0: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
-0001f2b0: 5f49 4d41 4745 2861 7370 6563 7472 6174  _IMAGE(aspectrat
-0001f2c0: 696f 3d28 3136 2c20 3929 2929 0a20 2020  io=(16, 9))).   
-0001f2d0: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
-0001f2e0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0001f2f0: 7365 6c66 2c0a 2020 2020 2020 2020 6578  self,.        ex
-0001f300: 7465 6e73 696f 6e73 3d28 2262 6d70 222c  tensions=("bmp",
-0001f310: 2022 6769 6622 2c20 226a 7065 6722 2c20   "gif", "jpeg", 
-0001f320: 2270 6e67 2229 2c0a 2020 2020 2020 2020  "png"),.        
-0001f330: 6d61 7873 697a 653d 2831 3030 3030 2c20  maxsize=(10000, 
-0001f340: 3130 3030 3029 2c0a 2020 2020 2020 2020  10000),.        
-0001f350: 6d69 6e73 697a 653d 2830 2c20 3029 2c0a  minsize=(0, 0),.
-0001f360: 2020 2020 2020 2020 6173 7065 6374 7261          aspectra
-0001f370: 7469 6f3d 282d 312c 202d 3129 2c0a 2020  tio=(-1, -1),.  
-0001f380: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-0001f390: 6167 653d 2249 6e76 616c 6964 2069 6d61  age="Invalid ima
-0001f3a0: 6765 222c 0a20 2020 2029 3a0a 2020 2020  ge",.    ):.    
-0001f3b0: 2020 2020 7365 6c66 2e65 7874 656e 7369      self.extensi
-0001f3c0: 6f6e 7320 3d20 6578 7465 6e73 696f 6e73  ons = extensions
-0001f3d0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0001f3e0: 7873 697a 6520 3d20 6d61 7873 697a 650a  xsize = maxsize.
-0001f3f0: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
-0001f400: 7369 7a65 203d 206d 696e 7369 7a65 0a20  size = minsize. 
-0001f410: 2020 2020 2020 2073 656c 662e 6173 7065         self.aspe
-0001f420: 6374 7261 7469 6f20 3d20 6173 7065 6374  ctratio = aspect
-0001f430: 7261 7469 6f0a 2020 2020 2020 2020 7365  ratio.        se
-0001f440: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-0001f450: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
-0001f460: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-0001f470: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-0001f480: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-0001f490: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-0001f4a0: 2020 2020 2020 2020 2020 6578 7465 6e73            extens
-0001f4b0: 696f 6e20 3d20 7661 6c75 652e 6669 6c65  ion = value.file
-0001f4c0: 6e61 6d65 2e72 6669 6e64 2822 2e22 290a  name.rfind(".").
-0001f4d0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-0001f4e0: 7274 2065 7874 656e 7369 6f6e 203e 3d20  rt extension >= 
-0001f4f0: 300a 2020 2020 2020 2020 2020 2020 6578  0.            ex
-0001f500: 7465 6e73 696f 6e20 3d20 7661 6c75 652e  tension = value.
-0001f510: 6669 6c65 6e61 6d65 5b65 7874 656e 7369  filename[extensi
-0001f520: 6f6e 202b 2031 203a 5d2e 6c6f 7765 7228  on + 1 :].lower(
-0001f530: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001f540: 2065 7874 656e 7369 6f6e 203d 3d20 226a   extension == "j
-0001f550: 7067 223a 0a20 2020 2020 2020 2020 2020  pg":.           
-0001f560: 2020 2020 2065 7874 656e 7369 6f6e 203d       extension =
-0001f570: 2022 6a70 6567 220a 2020 2020 2020 2020   "jpeg".        
-0001f580: 2020 2020 6173 7365 7274 2065 7874 656e      assert exten
-0001f590: 7369 6f6e 2069 6e20 7365 6c66 2e65 7874  sion in self.ext
-0001f5a0: 656e 7369 6f6e 730a 2020 2020 2020 2020  ensions.        
-0001f5b0: 2020 2020 6966 2065 7874 656e 7369 6f6e      if extension
-0001f5c0: 203d 3d20 2262 6d70 223a 0a20 2020 2020   == "bmp":.     
-0001f5d0: 2020 2020 2020 2020 2020 2077 6964 7468             width
-0001f5e0: 2c20 6865 6967 6874 203d 2073 656c 662e  , height = self.
-0001f5f0: 5f5f 626d 7028 7661 6c75 652e 6669 6c65  __bmp(value.file
-0001f600: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0001f610: 6966 2065 7874 656e 7369 6f6e 203d 3d20  if extension == 
-0001f620: 2267 6966 223a 0a20 2020 2020 2020 2020  "gif":.         
-0001f630: 2020 2020 2020 2077 6964 7468 2c20 6865         width, he
-0001f640: 6967 6874 203d 2073 656c 662e 5f5f 6769  ight = self.__gi
-0001f650: 6628 7661 6c75 652e 6669 6c65 290a 2020  f(value.file).  
-0001f660: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
-0001f670: 7874 656e 7369 6f6e 203d 3d20 226a 7065  xtension == "jpe
-0001f680: 6722 3a0a 2020 2020 2020 2020 2020 2020  g":.            
-0001f690: 2020 2020 7769 6474 682c 2068 6569 6768      width, heigh
-0001f6a0: 7420 3d20 7365 6c66 2e5f 5f6a 7065 6728  t = self.__jpeg(
-0001f6b0: 7661 6c75 652e 6669 6c65 290a 2020 2020  value.file).    
-0001f6c0: 2020 2020 2020 2020 656c 6966 2065 7874          elif ext
-0001f6d0: 656e 7369 6f6e 203d 3d20 2270 6e67 223a  ension == "png":
-0001f6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f6f0: 2077 6964 7468 2c20 6865 6967 6874 203d   width, height =
-0001f700: 2073 656c 662e 5f5f 706e 6728 7661 6c75   self.__png(valu
-0001f710: 652e 6669 6c65 290a 2020 2020 2020 2020  e.file).        
-0001f720: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001f730: 2020 2020 2020 2020 2020 7769 6474 6820            width 
-0001f740: 3d20 2d31 0a20 2020 2020 2020 2020 2020  = -1.           
-0001f750: 2020 2020 2068 6569 6768 7420 3d20 2d31       height = -1
-0001f760: 0a0a 2020 2020 2020 2020 2020 2020 6173  ..            as
-0001f770: 7365 7274 2028 0a20 2020 2020 2020 2020  sert (.         
-0001f780: 2020 2020 2020 2073 656c 662e 6d69 6e73         self.mins
-0001f790: 697a 655b 305d 203c 3d20 7769 6474 6820  ize[0] <= width 
-0001f7a0: 3c3d 2073 656c 662e 6d61 7873 697a 655b  <= self.maxsize[
-0001f7b0: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
-0001f7c0: 2020 2061 6e64 2073 656c 662e 6d69 6e73     and self.mins
-0001f7d0: 697a 655b 315d 203c 3d20 6865 6967 6874  ize[1] <= height
-0001f7e0: 203c 3d20 7365 6c66 2e6d 6178 7369 7a65   <= self.maxsize
-0001f7f0: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-0001f800: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0001f810: 6620 7365 6c66 2e61 7370 6563 7472 6174  f self.aspectrat
-0001f820: 696f 203e 2028 2d31 2c20 2d31 293a 0a20  io > (-1, -1):. 
-0001f830: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001f840: 6172 6765 745f 7261 7469 6f20 3d20 2831  arget_ratio = (1
-0001f850: 2e30 202a 2073 656c 662e 6173 7065 6374  .0 * self.aspect
-0001f860: 7261 7469 6f5b 315d 2920 2f20 7365 6c66  ratio[1]) / self
-0001f870: 2e61 7370 6563 7472 6174 696f 5b30 5d0a  .aspectratio[0].
-0001f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f890: 6163 7475 616c 5f72 6174 696f 203d 2028  actual_ratio = (
-0001f8a0: 312e 3020 2a20 6865 6967 6874 2920 2f20  1.0 * height) / 
-0001f8b0: 7769 6474 680a 0a20 2020 2020 2020 2020  width..         
-0001f8c0: 2020 2020 2020 2061 7373 6572 7420 6163         assert ac
-0001f8d0: 7475 616c 5f72 6174 696f 203d 3d20 7461  tual_ratio == ta
-0001f8e0: 7267 6574 5f72 6174 696f 0a0a 2020 2020  rget_ratio..    
-0001f8f0: 2020 2020 2020 2020 7661 6c75 652e 6669          value.fi
-0001f900: 6c65 2e73 6565 6b28 3029 0a20 2020 2020  le.seek(0).     
-0001f910: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
-0001f920: 6c75 650a 2020 2020 2020 2020 6578 6365  lue.        exce
-0001f930: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0001f940: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0001f950: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-0001f960: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-0001f970: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-0001f980: 6d65 7373 6167 6529 290a 0a20 2020 2064  message))..    d
-0001f990: 6566 205f 5f62 6d70 2873 656c 662c 2073  ef __bmp(self, s
-0001f9a0: 7472 6561 6d29 3a0a 2020 2020 2020 2020  tream):.        
-0001f9b0: 6966 2073 7472 6561 6d2e 7265 6164 2832  if stream.read(2
-0001f9c0: 2920 3d3d 2062 2242 4d22 3a0a 2020 2020  ) == b"BM":.    
-0001f9d0: 2020 2020 2020 2020 7374 7265 616d 2e72          stream.r
-0001f9e0: 6561 6428 3136 290a 2020 2020 2020 2020  ead(16).        
-0001f9f0: 2020 2020 7265 7475 726e 2073 7472 7563      return struc
-0001fa00: 742e 756e 7061 636b 2822 3c4c 4c22 2c20  t.unpack("<LL", 
-0001fa10: 7374 7265 616d 2e72 6561 6428 3829 290a  stream.read(8)).
-0001fa20: 2020 2020 2020 2020 7265 7475 726e 2028          return (
-0001fa30: 2d31 2c20 2d31 290a 0a20 2020 2064 6566  -1, -1)..    def
-0001fa40: 205f 5f67 6966 2873 656c 662c 2073 7472   __gif(self, str
-0001fa50: 6561 6d29 3a0a 2020 2020 2020 2020 6966  eam):.        if
-0001fa60: 2073 7472 6561 6d2e 7265 6164 2836 2920   stream.read(6) 
-0001fa70: 696e 2028 6222 4749 4638 3761 222c 2062  in (b"GIF87a", b
-0001fa80: 2247 4946 3839 6122 293a 0a20 2020 2020  "GIF89a"):.     
-0001fa90: 2020 2020 2020 2073 7472 6561 6d20 3d20         stream = 
-0001faa0: 7374 7265 616d 2e72 6561 6428 3529 0a20  stream.read(5). 
-0001fab0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0001fac0: 6e28 7374 7265 616d 2920 3d3d 2035 3a0a  n(stream) == 5:.
-0001fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fae0: 7265 7475 726e 2074 7570 6c65 2873 7472  return tuple(str
-0001faf0: 7563 742e 756e 7061 636b 2822 3c48 4842  uct.unpack("<HHB
-0001fb00: 222c 2073 7472 6561 6d29 5b3a 2d31 5d29  ", stream)[:-1])
-0001fb10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001fb20: 282d 312c 202d 3129 0a0a 2020 2020 6465  (-1, -1)..    de
-0001fb30: 6620 5f5f 6a70 6567 2873 656c 662c 2073  f __jpeg(self, s
-0001fb40: 7472 6561 6d29 3a0a 2020 2020 2020 2020  tream):.        
-0001fb50: 6966 2073 7472 6561 6d2e 7265 6164 2832  if stream.read(2
-0001fb60: 2920 3d3d 2062 225c 7846 465c 7844 3822  ) == b"\xFF\xD8"
-0001fb70: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
-0001fb80: 696c 6520 5472 7565 3a0a 2020 2020 2020  ile True:.      
-0001fb90: 2020 2020 2020 2020 2020 286d 6172 6b65            (marke
-0001fba0: 722c 2063 6f64 652c 206c 656e 6774 6829  r, code, length)
-0001fbb0: 203d 2073 7472 7563 742e 756e 7061 636b   = struct.unpack
-0001fbc0: 2822 2142 4248 222c 2073 7472 6561 6d2e  ("!BBH", stream.
-0001fbd0: 7265 6164 2834 2929 0a20 2020 2020 2020  read(4)).       
-0001fbe0: 2020 2020 2020 2020 2069 6620 6d61 726b           if mark
-0001fbf0: 6572 2021 3d20 3078 4646 3a0a 2020 2020  er != 0xFF:.    
-0001fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fc10: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0001fc20: 2020 2020 2020 656c 6966 2063 6f64 6520        elif code 
-0001fc30: 3e3d 2030 7843 3020 616e 6420 636f 6465  >= 0xC0 and code
-0001fc40: 203c 3d20 3078 4333 3a0a 2020 2020 2020   <= 0xC3:.      
-0001fc50: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001fc60: 7475 726e 2074 7570 6c65 2872 6576 6572  turn tuple(rever
-0001fc70: 7365 6428 7374 7275 6374 2e75 6e70 6163  sed(struct.unpac
-0001fc80: 6b28 2221 7848 4822 2c20 7374 7265 616d  k("!xHH", stream
-0001fc90: 2e72 6561 6428 3529 2929 290a 2020 2020  .read(5)))).    
-0001fca0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001fcb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001fcc0: 2020 2020 2020 7374 7265 616d 2e72 6561        stream.rea
-0001fcd0: 6428 6c65 6e67 7468 202d 2032 290a 2020  d(length - 2).  
-0001fce0: 2020 2020 2020 7265 7475 726e 2028 2d31        return (-1
-0001fcf0: 2c20 2d31 290a 0a20 2020 2064 6566 205f  , -1)..    def _
-0001fd00: 5f70 6e67 2873 656c 662c 2073 7472 6561  _png(self, strea
-0001fd10: 6d29 3a0a 2020 2020 2020 2020 6966 2073  m):.        if s
-0001fd20: 7472 6561 6d2e 7265 6164 2838 2920 3d3d  tream.read(8) ==
-0001fd30: 2062 225c 3231 3150 4e47 5c72 5c6e 5c30   b"\211PNG\r\n\0
-0001fd40: 3332 5c6e 223a 0a20 2020 2020 2020 2020  32\n":.         
-0001fd50: 2020 2073 7472 6561 6d2e 7265 6164 2834     stream.read(4
-0001fd60: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001fd70: 2073 7472 6561 6d2e 7265 6164 2834 2920   stream.read(4) 
-0001fd80: 3d3d 2062 2249 4844 5222 3a0a 2020 2020  == b"IHDR":.    
-0001fd90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001fda0: 726e 2073 7472 7563 742e 756e 7061 636b  rn struct.unpack
-0001fdb0: 2822 214c 4c22 2c20 7374 7265 616d 2e72  ("!LL", stream.r
-0001fdc0: 6561 6428 3829 290a 2020 2020 2020 2020  ead(8)).        
-0001fdd0: 7265 7475 726e 2028 2d31 2c20 2d31 290a  return (-1, -1).
-0001fde0: 0a0a 636c 6173 7320 4953 5f46 494c 4528  ..class IS_FILE(
-0001fdf0: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
-0001fe00: 2222 220a 2020 2020 4368 6563 6b73 2069  """.    Checks i
-0001fe10: 6620 6e61 6d65 2061 6e64 2065 7874 656e  f name and exten
-0001fe20: 7369 6f6e 206f 6620 6669 6c65 2075 706c  sion of file upl
-0001fe30: 6f61 6465 6420 7468 726f 7567 6820 6669  oaded through fi
-0001fe40: 6c65 2069 6e70 7574 206d 6174 6368 6573  le input matches
-0001fe50: 0a20 2020 2067 6976 656e 2063 7269 7465  .    given crite
-0001fe60: 7269 612e 0a0a 2020 2020 446f 6573 202a  ria...    Does *
-0001fe70: 6e6f 742a 2065 6e73 7572 6520 7468 6520  not* ensure the 
-0001fe80: 6669 6c65 2074 7970 6520 696e 2061 6e79  file type in any
-0001fe90: 2077 6179 2e20 5265 7475 726e 7320 7661   way. Returns va
-0001fea0: 6c69 6461 7469 6f6e 2066 6169 6c75 7265  lidation failure
-0001feb0: 0a20 2020 2069 6620 6e6f 2064 6174 6120  .    if no data 
-0001fec0: 7761 7320 7570 6c6f 6164 6564 2e0a 0a20  was uploaded... 
-0001fed0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0001fee0: 2066 696c 656e 616d 653a 2073 7472 696e   filename: strin
-0001fef0: 672f 636f 6d70 696c 6564 2072 6567 6578  g/compiled regex
-0001ff00: 206f 7220 6120 6c69 7374 206f 6620 7374   or a list of st
-0001ff10: 7269 6e67 732f 7265 6765 7820 6f66 2076  rings/regex of v
-0001ff20: 616c 6964 2066 696c 656e 616d 6573 0a20  alid filenames. 
-0001ff30: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
-0001ff40: 3a20 7374 7269 6e67 2f63 6f6d 7069 6c65  : string/compile
-0001ff50: 6420 7265 6765 7820 6f72 2061 206c 6973  d regex or a lis
-0001ff60: 7420 6f66 2073 7472 696e 6773 2f72 6567  t of strings/reg
-0001ff70: 6578 206f 6620 7661 6c69 6420 6578 7465  ex of valid exte
-0001ff80: 6e73 696f 6e73 0a20 2020 2020 2020 206c  nsions.        l
-0001ff90: 6173 7464 6f74 3a20 7768 6963 6820 646f  astdot: which do
-0001ffa0: 7420 7368 6f75 6c64 2062 6520 7573 6564  t should be used
-0001ffb0: 2061 7320 6120 6669 6c65 6e61 6d65 202f   as a filename /
-0001ffc0: 2065 7874 656e 7369 6f6e 2073 6570 6172   extension separ
-0001ffd0: 6174 6f72 3a0a 2020 2020 2020 2020 2020  ator:.          
-0001ffe0: 2020 5472 7565 206d 6561 6e73 206c 6173    True means las
-0001fff0: 7420 646f 742c 2065 672e 2066 696c 652e  t dot, eg. file.
-00020000: 6a70 672e 706e 6720 2d3e 2066 696c 652e  jpg.png -> file.
-00020010: 6a70 6720 2f20 706e 670a 2020 2020 2020  jpg / png.      
-00020020: 2020 2020 2020 4661 6c73 6520 6d65 616e        False mean
-00020030: 7320 6669 7273 7420 646f 742c 2065 672e  s first dot, eg.
-00020040: 2066 696c 652e 7461 722e 677a 202d 3e20   file.tar.gz -> 
-00020050: 6669 6c65 202f 2074 6172 2e67 7a0a 2020  file / tar.gz.  
-00020060: 2020 2020 2020 6361 7365 3a20 3020 2d20        case: 0 - 
-00020070: 6b65 6570 2074 6865 2063 6173 652c 2031  keep the case, 1
-00020080: 202d 2074 7261 6e73 666f 726d 2074 6865   - transform the
-00020090: 2073 7472 696e 6720 696e 746f 206c 6f77   string into low
-000200a0: 6572 6361 7365 2028 6465 6661 756c 7429  ercase (default)
-000200b0: 2c0a 2020 2020 2020 2020 2020 2020 3220  ,.            2 
-000200c0: 2d20 7472 616e 7366 6f72 6d20 7468 6520  - transform the 
-000200d0: 7374 7269 6e67 2069 6e74 6f20 7570 7065  string into uppe
-000200e0: 7263 6173 650a 0a20 2020 2049 6620 7468  rcase..    If th
-000200f0: 6572 6520 6973 206e 6f20 646f 7420 7072  ere is no dot pr
-00020100: 6573 656e 742c 2065 7874 656e 7369 6f6e  esent, extension
-00020110: 2063 6865 636b 7320 7769 6c6c 2062 6520   checks will be 
-00020120: 646f 6e65 2061 6761 696e 7374 2065 6d70  done against emp
-00020130: 7479 0a20 2020 2073 7472 696e 6720 616e  ty.    string an
-00020140: 6420 6669 6c65 6e61 6d65 2063 6865 636b  d filename check
-00020150: 7320 6167 6169 6e73 7420 7768 6f6c 6520  s against whole 
-00020160: 7661 6c75 652e 0a0a 2020 2020 4578 616d  value...    Exam
-00020170: 706c 6573 3a0a 2020 2020 2020 2020 4368  ples:.        Ch
-00020180: 6563 6b20 6966 2066 696c 6520 6861 7320  eck if file has 
-00020190: 6120 7064 6620 6578 7465 6e73 696f 6e20  a pdf extension 
-000201a0: 2863 6173 6520 696e 7365 6e73 6974 6976  (case insensitiv
-000201b0: 6529 3a0a 0a20 2020 2020 2020 2049 4e50  e):..        INP
-000201c0: 5554 285f 7479 7065 3d27 6669 6c65 272c  UT(_type='file',
-000201d0: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
-000201e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000201f0: 6571 7569 7265 733d 4953 5f46 494c 4528  equires=IS_FILE(
-00020200: 6578 7465 6e73 696f 6e3d 2770 6466 2729  extension='pdf')
-00020210: 290a 0a20 2020 2020 2020 2043 6865 636b  )..        Check
-00020220: 2069 6620 6669 6c65 2069 7320 6361 6c6c   if file is call
-00020230: 6564 2027 7468 756d 626e 6169 6c27 2061  ed 'thumbnail' a
-00020240: 6e64 2068 6173 2061 206a 7067 206f 7220  nd has a jpg or 
-00020250: 706e 6720 6578 7465 6e73 696f 6e0a 2020  png extension.  
-00020260: 2020 2020 2020 2863 6173 6520 696e 7365        (case inse
-00020270: 6e73 6974 6976 6529 3a0a 0a20 2020 2020  nsitive):..     
-00020280: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-00020290: 6669 6c65 272c 205f 6e61 6d65 3d27 6e61  file', _name='na
-000202a0: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
-000202b0: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
-000202c0: 5f46 494c 4528 6669 6c65 6e61 6d65 3d27  _FILE(filename='
-000202d0: 7468 756d 626e 6169 6c27 2c0a 2020 2020  thumbnail',.    
-000202e0: 2020 2020 2020 2020 2020 2020 6578 7465              exte
-000202f0: 6e73 696f 6e3d 5b27 6a70 6727 2c20 2770  nsion=['jpg', 'p
-00020300: 6e67 275d 2929 0a0a 2020 2020 2020 2020  ng']))..        
-00020310: 4368 6563 6b20 6966 2066 696c 6520 6861  Check if file ha
-00020320: 7320 6120 7461 722e 677a 2065 7874 656e  s a tar.gz exten
-00020330: 7369 6f6e 2061 6e64 206e 616d 6520 7374  sion and name st
-00020340: 6172 7469 6e67 2077 6974 6820 6261 636b  arting with back
-00020350: 7570 3a0a 0a20 2020 2020 2020 2049 4e50  up:..        INP
-00020360: 5554 285f 7479 7065 3d27 6669 6c65 272c  UT(_type='file',
-00020370: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
-00020380: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00020390: 6571 7569 7265 733d 4953 5f46 494c 4528  equires=IS_FILE(
-000203a0: 6669 6c65 6e61 6d65 3d72 652e 636f 6d70  filename=re.comp
-000203b0: 696c 6528 2762 6163 6b75 702e 2a27 292c  ile('backup.*'),
-000203c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000203d0: 2065 7874 656e 7369 6f6e 3d27 7461 722e   extension='tar.
-000203e0: 677a 272c 206c 6173 7464 6f74 3d46 616c  gz', lastdot=Fal
-000203f0: 7365 2929 0a0a 2020 2020 2020 2020 4368  se))..        Ch
-00020400: 6563 6b20 6966 2066 696c 6520 6861 7320  eck if file has 
-00020410: 6e6f 2065 7874 656e 7369 6f6e 2061 6e64  no extension and
-00020420: 206e 616d 6520 6d61 7463 6869 6e67 2052   name matching R
-00020430: 4541 444d 450a 2020 2020 2020 2020 2863  EADME.        (c
-00020440: 6173 6520 7365 6e73 6974 6976 6529 3a0a  ase sensitive):.
-00020450: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-00020460: 5554 285f 7479 7065 3d27 6669 6c65 272c  UT(_type='file',
-00020470: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
-00020480: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00020490: 6571 7569 7265 733d 4953 5f46 494c 4528  equires=IS_FILE(
-000204a0: 6669 6c65 6e61 6d65 3d27 5245 4144 4d45  filename='README
-000204b0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-000204c0: 2020 2065 7874 656e 7369 6f6e 3d27 272c     extension='',
-000204d0: 2063 6173 653d 3029 0a0a 2020 2020 2222   case=0)..    ""
-000204e0: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-000204f0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-00020500: 662c 0a20 2020 2020 2020 2066 696c 656e  f,.        filen
-00020510: 616d 653d 4e6f 6e65 2c0a 2020 2020 2020  ame=None,.      
-00020520: 2020 6578 7465 6e73 696f 6e3d 4e6f 6e65    extension=None
-00020530: 2c0a 2020 2020 2020 2020 6c61 7374 646f  ,.        lastdo
-00020540: 743d 5472 7565 2c0a 2020 2020 2020 2020  t=True,.        
-00020550: 6361 7365 3d31 2c0a 2020 2020 2020 2020  case=1,.        
-00020560: 6572 726f 725f 6d65 7373 6167 653d 2245  error_message="E
-00020570: 6e74 6572 2076 616c 6964 2066 696c 656e  nter valid filen
-00020580: 616d 6522 2c0a 2020 2020 293a 0a20 2020  ame",.    ):.   
-00020590: 2020 2020 2073 656c 662e 6669 6c65 6e61       self.filena
-000205a0: 6d65 203d 2066 696c 656e 616d 650a 2020  me = filename.  
-000205b0: 2020 2020 2020 7365 6c66 2e65 7874 656e        self.exten
-000205c0: 7369 6f6e 203d 2065 7874 656e 7369 6f6e  sion = extension
-000205d0: 0a20 2020 2020 2020 2073 656c 662e 6c61  .        self.la
-000205e0: 7374 646f 7420 3d20 6c61 7374 646f 740a  stdot = lastdot.
-000205f0: 2020 2020 2020 2020 7365 6c66 2e63 6173          self.cas
-00020600: 6520 3d20 6361 7365 0a20 2020 2020 2020  e = case.       
-00020610: 2073 656c 662e 6572 726f 725f 6d65 7373   self.error_mess
-00020620: 6167 6520 3d20 6572 726f 725f 6d65 7373  age = error_mess
-00020630: 6167 650a 0a20 2020 2064 6566 206d 6174  age..    def mat
-00020640: 6368 2873 656c 662c 2076 616c 7565 312c  ch(self, value1,
-00020650: 2076 616c 7565 3229 3a0a 2020 2020 2020   value2):.      
-00020660: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00020670: 7661 6c75 6531 2c20 286c 6973 742c 2074  value1, (list, t
-00020680: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
-00020690: 2020 2020 666f 7220 7620 696e 2076 616c      for v in val
-000206a0: 7565 313a 0a20 2020 2020 2020 2020 2020  ue1:.           
-000206b0: 2020 2020 2069 6620 7365 6c66 2e6d 6174       if self.mat
-000206c0: 6368 2876 2c20 7661 6c75 6532 293a 0a20  ch(v, value2):. 
-000206d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206e0: 2020 2072 6574 7572 6e20 5472 7565 0a20     return True. 
-000206f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00020700: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-00020710: 656c 6966 2063 616c 6c61 626c 6528 6765  elif callable(ge
-00020720: 7461 7474 7228 7661 6c75 6531 2c20 226d  tattr(value1, "m
-00020730: 6174 6368 222c 204e 6f6e 6529 293a 0a20  atch", None)):. 
-00020740: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00020750: 6e20 7661 6c75 6531 2e6d 6174 6368 2876  n value1.match(v
-00020760: 616c 7565 3229 0a20 2020 2020 2020 2065  alue2).        e
-00020770: 6c69 6620 6973 696e 7374 616e 6365 2876  lif isinstance(v
-00020780: 616c 7565 312c 2073 7472 293a 0a20 2020  alue1, str):.   
-00020790: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000207a0: 7661 6c75 6531 203d 3d20 7661 6c75 6532  value1 == value2
-000207b0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-000207c0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-000207d0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-000207e0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-000207f0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00020800: 203d 2076 616c 7565 2e66 696c 656e 616d   = value.filenam
-00020810: 650a 2020 2020 2020 2020 6578 6365 7074  e.        except
-00020820: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00020830: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-00020840: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
-00020850: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
-00020860: 6573 7361 6765 2929 0a20 2020 2020 2020  essage)).       
-00020870: 2069 6620 7365 6c66 2e63 6173 6520 3d3d   if self.case ==
-00020880: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-00020890: 7374 7269 6e67 203d 2073 7472 696e 672e  string = string.
-000208a0: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
-000208b0: 656c 6966 2073 656c 662e 6361 7365 203d  elif self.case =
-000208c0: 3d20 323a 0a20 2020 2020 2020 2020 2020  = 2:.           
-000208d0: 2073 7472 696e 6720 3d20 7374 7269 6e67   string = string
-000208e0: 2e75 7070 6572 2829 0a20 2020 2020 2020  .upper().       
-000208f0: 2069 6620 7365 6c66 2e6c 6173 7464 6f74   if self.lastdot
-00020900: 3a0a 2020 2020 2020 2020 2020 2020 646f  :.            do
-00020910: 7420 3d20 7374 7269 6e67 2e72 6669 6e64  t = string.rfind
-00020920: 2822 2e22 290a 2020 2020 2020 2020 656c  (".").        el
-00020930: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00020940: 646f 7420 3d20 7374 7269 6e67 2e66 696e  dot = string.fin
-00020950: 6428 222e 2229 0a20 2020 2020 2020 2069  d(".").        i
-00020960: 6620 646f 7420 3d3d 202d 313a 0a20 2020  f dot == -1:.   
-00020970: 2020 2020 2020 2020 2064 6f74 203d 206c           dot = l
-00020980: 656e 2873 7472 696e 6729 0a20 2020 2020  en(string).     
-00020990: 2020 2069 6620 7365 6c66 2e66 696c 656e     if self.filen
-000209a0: 616d 6520 616e 6420 6e6f 7420 7365 6c66  ame and not self
-000209b0: 2e6d 6174 6368 2873 656c 662e 6669 6c65  .match(self.file
-000209c0: 6e61 6d65 2c20 7374 7269 6e67 5b3a 646f  name, string[:do
-000209d0: 745d 293a 0a20 2020 2020 2020 2020 2020  t]):.           
-000209e0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-000209f0: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
-00020a00: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
-00020a10: 725f 6d65 7373 6167 6529 290a 2020 2020  r_message)).    
-00020a20: 2020 2020 656c 6966 2073 656c 662e 6578      elif self.ex
-00020a30: 7465 6e73 696f 6e20 616e 6420 6e6f 7420  tension and not 
-00020a40: 7365 6c66 2e6d 6174 6368 2873 656c 662e  self.match(self.
-00020a50: 6578 7465 6e73 696f 6e2c 2073 7472 696e  extension, strin
-00020a60: 675b 646f 7420 2b20 3120 3a5d 293a 0a20  g[dot + 1 :]):. 
-00020a70: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00020a80: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00020a90: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-00020aa0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00020ab0: 6167 6529 290a 2020 2020 2020 2020 656c  age)).        el
-00020ac0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00020ad0: 7265 7475 726e 2076 616c 7565 0a0a 0a63  return value...c
-00020ae0: 6c61 7373 2049 535f 5550 4c4f 4144 5f46  lass IS_UPLOAD_F
-00020af0: 494c 454e 414d 4528 5661 6c69 6461 746f  ILENAME(Validato
-00020b00: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
-00020b10: 466f 7220 6e65 7720 6170 706c 6963 6174  For new applicat
-00020b20: 696f 6e73 2c20 7573 6520 4953 5f46 494c  ions, use IS_FIL
-00020b30: 4528 292e 0a0a 2020 2020 4368 6563 6b73  E()...    Checks
-00020b40: 2069 6620 6e61 6d65 2061 6e64 2065 7874   if name and ext
-00020b50: 656e 7369 6f6e 206f 6620 6669 6c65 2075  ension of file u
-00020b60: 706c 6f61 6465 6420 7468 726f 7567 6820  ploaded through 
-00020b70: 6669 6c65 2069 6e70 7574 206d 6174 6368  file input match
-00020b80: 6573 0a20 2020 2067 6976 656e 2063 7269  es.    given cri
-00020b90: 7465 7269 612e 0a0a 2020 2020 446f 6573  teria...    Does
-00020ba0: 202a 6e6f 742a 2065 6e73 7572 6520 7468   *not* ensure th
-00020bb0: 6520 6669 6c65 2074 7970 6520 696e 2061  e file type in a
-00020bc0: 6e79 2077 6179 2e20 5265 7475 726e 7320  ny way. Returns 
-00020bd0: 7661 6c69 6461 7469 6f6e 2066 6169 6c75  validation failu
-00020be0: 7265 0a20 2020 2069 6620 6e6f 2064 6174  re.    if no dat
-00020bf0: 6120 7761 7320 7570 6c6f 6164 6564 2e0a  a was uploaded..
-00020c00: 0a20 2020 2041 7267 733a 0a20 2020 2020  .    Args:.     
-00020c10: 2020 2066 696c 656e 616d 653a 2066 696c     filename: fil
-00020c20: 656e 616d 6520 2862 6566 6f72 6520 646f  ename (before do
-00020c30: 7429 2072 6567 6578 0a20 2020 2020 2020  t) regex.       
-00020c40: 2065 7874 656e 7369 6f6e 3a20 6578 7465   extension: exte
-00020c50: 6e73 696f 6e20 2861 6674 6572 2064 6f74  nsion (after dot
-00020c60: 2920 7265 6765 780a 2020 2020 2020 2020  ) regex.        
-00020c70: 6c61 7374 646f 743a 2077 6869 6368 2064  lastdot: which d
-00020c80: 6f74 2073 686f 756c 6420 6265 2075 7365  ot should be use
-00020c90: 6420 6173 2061 2066 696c 656e 616d 6520  d as a filename 
-00020ca0: 2f20 6578 7465 6e73 696f 6e20 7365 7061  / extension sepa
-00020cb0: 7261 746f 723a 0a20 2020 2020 2020 2020  rator:.         
-00020cc0: 2020 2054 7275 6520 6d65 616e 7320 6c61     True means la
-00020cd0: 7374 2064 6f74 2c20 6567 2e20 6669 6c65  st dot, eg. file
-00020ce0: 2e70 6e67 202d 3e20 6669 6c65 202f 2070  .png -> file / p
-00020cf0: 6e67 0a20 2020 2020 2020 2020 2020 2046  ng.            F
-00020d00: 616c 7365 206d 6561 6e73 2066 6972 7374  alse means first
-00020d10: 2064 6f74 2c20 6567 2e20 6669 6c65 2e74   dot, eg. file.t
-00020d20: 6172 2e67 7a20 2d3e 2066 696c 6520 2f20  ar.gz -> file / 
-00020d30: 7461 722e 677a 0a20 2020 2020 2020 2063  tar.gz.        c
-00020d40: 6173 653a 2030 202d 206b 6565 7020 7468  ase: 0 - keep th
-00020d50: 6520 6361 7365 2c20 3120 2d20 7472 616e  e case, 1 - tran
-00020d60: 7366 6f72 6d20 7468 6520 7374 7269 6e67  sform the string
-00020d70: 2069 6e74 6f20 6c6f 7765 7263 6173 6520   into lowercase 
-00020d80: 2864 6566 6175 6c74 292c 0a20 2020 2020  (default),.     
-00020d90: 2020 2020 2020 2032 202d 2074 7261 6e73         2 - trans
-00020da0: 666f 726d 2074 6865 2073 7472 696e 6720  form the string 
-00020db0: 696e 746f 2075 7070 6572 6361 7365 0a0a  into uppercase..
-00020dc0: 2020 2020 4966 2074 6865 7265 2069 7320      If there is 
-00020dd0: 6e6f 2064 6f74 2070 7265 7365 6e74 2c20  no dot present, 
-00020de0: 6578 7465 6e73 696f 6e20 6368 6563 6b73  extension checks
-00020df0: 2077 696c 6c20 6265 2064 6f6e 6520 6167   will be done ag
-00020e00: 6169 6e73 7420 656d 7074 790a 2020 2020  ainst empty.    
-00020e10: 7374 7269 6e67 2061 6e64 2066 696c 656e  string and filen
-00020e20: 616d 6520 6368 6563 6b73 2061 6761 696e  ame checks again
-00020e30: 7374 2077 686f 6c65 2076 616c 7565 2e0a  st whole value..
-00020e40: 0a20 2020 2045 7861 6d70 6c65 733a 0a20  .    Examples:. 
-00020e50: 2020 2020 2020 2043 6865 636b 2069 6620         Check if 
-00020e60: 6669 6c65 2068 6173 2061 2070 6466 2065  file has a pdf e
-00020e70: 7874 656e 7369 6f6e 2028 6361 7365 2069  xtension (case i
-00020e80: 6e73 656e 7369 7469 7665 293a 0a0a 2020  nsensitive):..  
-00020e90: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
-00020ea0: 653d 2766 696c 6527 2c20 5f6e 616d 653d  e='file', _name=
-00020eb0: 276e 616d 6527 2c0a 2020 2020 2020 2020  'name',.        
-00020ec0: 2020 2020 2020 2020 7265 7175 6972 6573          requires
-00020ed0: 3d49 535f 5550 4c4f 4144 5f46 494c 454e  =IS_UPLOAD_FILEN
-00020ee0: 414d 4528 6578 7465 6e73 696f 6e3d 2770  AME(extension='p
-00020ef0: 6466 2729 290a 0a20 2020 2020 2020 2043  df'))..        C
-00020f00: 6865 636b 2069 6620 6669 6c65 2068 6173  heck if file has
-00020f10: 2061 2074 6172 2e67 7a20 6578 7465 6e73   a tar.gz extens
-00020f20: 696f 6e20 616e 6420 6e61 6d65 2073 7461  ion and name sta
-00020f30: 7274 696e 6720 7769 7468 2062 6163 6b75  rting with backu
-00020f40: 703a 0a0a 2020 2020 2020 2020 494e 5055  p:..        INPU
-00020f50: 5428 5f74 7970 653d 2766 696c 6527 2c20  T(_type='file', 
-00020f60: 5f6e 616d 653d 276e 616d 6527 2c0a 2020  _name='name',.  
-00020f70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00020f80: 7175 6972 6573 3d49 535f 5550 4c4f 4144  quires=IS_UPLOAD
-00020f90: 5f46 494c 454e 414d 4528 6669 6c65 6e61  _FILENAME(filena
-00020fa0: 6d65 3d27 6261 636b 7570 2e2a 272c 0a20  me='backup.*',. 
-00020fb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00020fc0: 7874 656e 7369 6f6e 3d27 7461 722e 677a  xtension='tar.gz
-00020fd0: 272c 206c 6173 7464 6f74 3d46 616c 7365  ', lastdot=False
-00020fe0: 2929 0a0a 2020 2020 2020 2020 4368 6563  ))..        Chec
-00020ff0: 6b20 6966 2066 696c 6520 6861 7320 6e6f  k if file has no
-00021000: 2065 7874 656e 7369 6f6e 2061 6e64 206e   extension and n
-00021010: 616d 6520 6d61 7463 6869 6e67 2052 4541  ame matching REA
-00021020: 444d 450a 2020 2020 2020 2020 2863 6173  DME.        (cas
-00021030: 6520 7365 6e73 6974 6976 6529 3a0a 0a20  e sensitive):.. 
-00021040: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-00021050: 285f 7479 7065 3d27 6669 6c65 272c 205f  (_type='file', _
-00021060: 6e61 6d65 3d27 6e61 6d65 272c 0a20 2020  name='name',.   
-00021070: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00021080: 7569 7265 733d 4953 5f55 504c 4f41 445f  uires=IS_UPLOAD_
-00021090: 4649 4c45 4e41 4d45 2866 696c 656e 616d  FILENAME(filenam
-000210a0: 653d 275e 5245 4144 4d45 2427 2c0a 2020  e='^README$',.  
-000210b0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000210c0: 7465 6e73 696f 6e3d 275e 2427 2c20 6361  tension='^$', ca
-000210d0: 7365 3d30 290a 0a20 2020 2022 2222 0a0a  se=0)..    """..
-000210e0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000210f0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00021100: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-00021110: 3d4e 6f6e 652c 0a20 2020 2020 2020 2065  =None,.        e
-00021120: 7874 656e 7369 6f6e 3d4e 6f6e 652c 0a20  xtension=None,. 
-00021130: 2020 2020 2020 206c 6173 7464 6f74 3d54         lastdot=T
-00021140: 7275 652c 0a20 2020 2020 2020 2063 6173  rue,.        cas
-00021150: 653d 312c 0a20 2020 2020 2020 2065 7272  e=1,.        err
-00021160: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-00021170: 7220 7661 6c69 6420 6669 6c65 6e61 6d65  r valid filename
-00021180: 222c 0a20 2020 2029 3a0a 2020 2020 2020  ",.    ):.      
-00021190: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000211a0: 6669 6c65 6e61 6d65 2c20 7374 7229 3a0a  filename, str):.
-000211b0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-000211c0: 6e61 6d65 203d 2072 652e 636f 6d70 696c  name = re.compil
-000211d0: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
-000211e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000211f0: 6528 6578 7465 6e73 696f 6e2c 2073 7472  e(extension, str
-00021200: 293a 0a20 2020 2020 2020 2020 2020 2065  ):.            e
-00021210: 7874 656e 7369 6f6e 203d 2072 652e 636f  xtension = re.co
-00021220: 6d70 696c 6528 6578 7465 6e73 696f 6e29  mpile(extension)
-00021230: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-00021240: 6c65 6e61 6d65 203d 2066 696c 656e 616d  lename = filenam
-00021250: 650a 2020 2020 2020 2020 7365 6c66 2e65  e.        self.e
-00021260: 7874 656e 7369 6f6e 203d 2065 7874 656e  xtension = exten
-00021270: 7369 6f6e 0a20 2020 2020 2020 2073 656c  sion.        sel
-00021280: 662e 6c61 7374 646f 7420 3d20 6c61 7374  f.lastdot = last
-00021290: 646f 740a 2020 2020 2020 2020 7365 6c66  dot.        self
-000212a0: 2e63 6173 6520 3d20 6361 7365 0a20 2020  .case = case.   
-000212b0: 2020 2020 2073 656c 662e 6572 726f 725f       self.error_
-000212c0: 6d65 7373 6167 6520 3d20 6572 726f 725f  message = error_
-000212d0: 6d65 7373 6167 650a 0a20 2020 2064 6566  message..    def
-000212e0: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
-000212f0: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-00021300: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00021310: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00021320: 2073 7472 696e 6720 3d20 7661 6c75 652e   string = value.
-00021330: 6669 6c65 6e61 6d65 0a20 2020 2020 2020  filename.       
-00021340: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00021350: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00021360: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00021370: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00021380: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
-00021390: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000213a0: 6361 7365 203d 3d20 313a 0a20 2020 2020  case == 1:.     
-000213b0: 2020 2020 2020 2073 7472 696e 6720 3d20         string = 
-000213c0: 7374 7269 6e67 2e6c 6f77 6572 2829 0a20  string.lower(). 
-000213d0: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
-000213e0: 2e63 6173 6520 3d3d 2032 3a0a 2020 2020  .case == 2:.    
-000213f0: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
-00021400: 2073 7472 696e 672e 7570 7065 7228 290a   string.upper().
-00021410: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00021420: 6c61 7374 646f 743a 0a20 2020 2020 2020  lastdot:.       
-00021430: 2020 2020 2064 6f74 203d 2073 7472 696e       dot = strin
-00021440: 672e 7266 696e 6428 222e 2229 0a20 2020  g.rfind(".").   
-00021450: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00021460: 2020 2020 2020 2064 6f74 203d 2073 7472         dot = str
-00021470: 696e 672e 6669 6e64 2822 2e22 290a 2020  ing.find(".").  
-00021480: 2020 2020 2020 6966 2064 6f74 203d 3d20        if dot == 
-00021490: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
-000214a0: 646f 7420 3d20 6c65 6e28 7374 7269 6e67  dot = len(string
-000214b0: 290a 2020 2020 2020 2020 6966 2073 656c  ).        if sel
-000214c0: 662e 6669 6c65 6e61 6d65 2061 6e64 206e  f.filename and n
-000214d0: 6f74 2073 656c 662e 6669 6c65 6e61 6d65  ot self.filename
-000214e0: 2e6d 6174 6368 2873 7472 696e 675b 3a64  .match(string[:d
-000214f0: 6f74 5d29 3a0a 2020 2020 2020 2020 2020  ot]):.          
-00021500: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-00021510: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
-00021520: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-00021530: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
-00021540: 2020 2020 2065 6c69 6620 7365 6c66 2e65       elif self.e
-00021550: 7874 656e 7369 6f6e 2061 6e64 206e 6f74  xtension and not
-00021560: 2073 656c 662e 6578 7465 6e73 696f 6e2e   self.extension.
-00021570: 6d61 7463 6828 7374 7269 6e67 5b64 6f74  match(string[dot
-00021580: 202b 2031 203a 5d29 3a0a 2020 2020 2020   + 1 :]):.      
-00021590: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-000215a0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
-000215b0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-000215c0: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
-000215d0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-000215e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000215f0: 6e20 7661 6c75 650a 0a0a 636c 6173 7320  n value...class 
-00021600: 4953 5f49 5056 3428 5661 6c69 6461 746f  IS_IPV4(Validato
-00021610: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
-00021620: 4368 6563 6b73 2069 6620 6669 656c 6427  Checks if field'
-00021630: 7320 7661 6c75 6520 6973 2061 6e20 4950  s value is an IP
-00021640: 2076 6572 7369 6f6e 2034 2061 6464 7265   version 4 addre
-00021650: 7373 2069 6e20 6465 6369 6d61 6c20 666f  ss in decimal fo
-00021660: 726d 2e20 4361 6e0a 2020 2020 6265 2073  rm. Can.    be s
-00021670: 6574 2074 6f20 666f 7263 6520 6164 6472  et to force addr
-00021680: 6573 7365 7320 6672 6f6d 2063 6572 7461  esses from certa
-00021690: 696e 2072 616e 6765 2e0a 0a20 2020 2049  in range...    I
-000216a0: 5076 3420 7265 6765 7820 7461 6b65 6e20  Pv4 regex taken 
-000216b0: 6672 6f6d 3a20 6874 7470 3a2f 2f72 6567  from: http://reg
-000216c0: 6578 6c69 622e 636f 6d2f 5245 4465 7461  exlib.com/REDeta
-000216d0: 696c 732e 6173 7078 3f72 6567 6578 705f  ils.aspx?regexp_
-000216e0: 6964 3d31 3431 310a 0a20 2020 2041 7267  id=1411..    Arg
-000216f0: 733a 0a0a 2020 2020 2020 2020 6d69 6e69  s:..        mini
-00021700: 703a 206c 6f77 6573 7420 616c 6c6f 7765  p: lowest allowe
-00021710: 6420 6164 6472 6573 733b 2061 6363 6570  d address; accep
-00021720: 7473 3a0a 0a20 2020 2020 2020 2020 2020  ts:..           
-00021730: 202d 2073 7472 2c20 6567 2e20 3139 322e   - str, eg. 192.
-00021740: 3136 382e 302e 310a 2020 2020 2020 2020  168.0.1.        
-00021750: 2020 2020 2d20 6c69 7374 206f 7220 7475      - list or tu
-00021760: 706c 6520 6f66 206f 6374 6574 732c 2065  ple of octets, e
-00021770: 672e 205b 3139 322c 2031 3638 2c20 302c  g. [192, 168, 0,
-00021780: 2031 5d0a 2020 2020 2020 2020 6d61 7869   1].        maxi
-00021790: 703a 2068 6967 6865 7374 2061 6c6c 6f77  p: highest allow
-000217a0: 6564 2061 6464 7265 7373 3b20 7361 6d65  ed address; same
-000217b0: 2061 7320 6162 6f76 650a 2020 2020 2020   as above.      
-000217c0: 2020 696e 7665 7274 3a20 5472 7565 2074    invert: True t
-000217d0: 6f20 616c 6c6f 7720 6164 6472 6573 7365  o allow addresse
-000217e0: 7320 6f6e 6c79 2066 726f 6d20 6f75 7473  s only from outs
-000217f0: 6964 6520 6f66 2067 6976 656e 2072 616e  ide of given ran
-00021800: 6765 3b20 6e6f 7465 0a20 2020 2020 2020  ge; note.       
-00021810: 2020 2020 2074 6861 7420 7261 6e67 6520       that range 
-00021820: 626f 756e 6461 7269 6573 2061 7265 206e  boundaries are n
-00021830: 6f74 206d 6174 6368 6564 2074 6869 7320  ot matched this 
-00021840: 7761 790a 2020 2020 2020 2020 6973 5f6c  way.        is_l
-00021850: 6f63 616c 686f 7374 3a20 6c6f 6361 6c68  ocalhost: localh
-00021860: 6f73 7420 6164 6472 6573 7320 7472 6561  ost address trea
-00021870: 746d 656e 743a 0a0a 2020 2020 2020 2020  tment:..        
-00021880: 2020 2020 2d20 4e6f 6e65 2028 6465 6661      - None (defa
-00021890: 756c 7429 3a20 696e 6469 6666 6572 656e  ult): indifferen
-000218a0: 740a 2020 2020 2020 2020 2020 2020 2d20  t.            - 
-000218b0: 5472 7565 2028 656e 666f 7263 6529 3a20  True (enforce): 
-000218c0: 7175 6572 7920 6164 6472 6573 7320 6d75  query address mu
-000218d0: 7374 206d 6174 6368 206c 6f63 616c 686f  st match localho
-000218e0: 7374 2061 6464 7265 7373 2028 3132 372e  st address (127.
-000218f0: 302e 302e 3129 0a20 2020 2020 2020 2020  0.0.1).         
-00021900: 2020 202d 2046 616c 7365 2028 666f 7262     - False (forb
-00021910: 6964 293a 2071 7565 7279 2061 6464 7265  id): query addre
-00021920: 7373 206d 7573 7420 6e6f 7420 6d61 7463  ss must not matc
-00021930: 6820 6c6f 6361 6c68 6f73 7420 6164 6472  h localhost addr
-00021940: 6573 730a 2020 2020 2020 2020 6973 5f70  ess.        is_p
-00021950: 7269 7661 7465 3a20 7361 6d65 2061 7320  rivate: same as 
-00021960: 6162 6f76 652c 2065 7863 6570 7420 7468  above, except th
-00021970: 6174 2071 7565 7279 2061 6464 7265 7373  at query address
-00021980: 2069 7320 6368 6563 6b65 6420 6167 6169   is checked agai
-00021990: 6e73 740a 2020 2020 2020 2020 2020 2020  nst.            
-000219a0: 7477 6f20 6164 6472 6573 7320 7261 6e67  two address rang
-000219b0: 6573 3a20 3137 322e 3136 2e30 2e30 202d  es: 172.16.0.0 -
-000219c0: 2031 3732 2e33 312e 3235 352e 3235 3520   172.31.255.255 
-000219d0: 616e 640a 2020 2020 2020 2020 2020 2020  and.            
-000219e0: 3139 322e 3136 382e 302e 3020 2d20 3139  192.168.0.0 - 19
-000219f0: 322e 3136 382e 3235 352e 3235 350a 2020  2.168.255.255.  
-00021a00: 2020 2020 2020 6973 5f61 7574 6f6d 6174        is_automat
-00021a10: 6963 3a20 7361 6d65 2061 7320 6162 6f76  ic: same as abov
-00021a20: 652c 2065 7863 6570 7420 7468 6174 2071  e, except that q
-00021a30: 7565 7279 2061 6464 7265 7373 2069 7320  uery address is 
-00021a40: 6368 6563 6b65 6420 6167 6169 6e73 740a  checked against.
-00021a50: 2020 2020 2020 2020 2020 2020 6f6e 6520              one 
-00021a60: 6164 6472 6573 7320 7261 6e67 653a 2031  address range: 1
-00021a70: 3639 2e32 3534 2e30 2e30 202d 2031 3639  69.254.0.0 - 169
-00021a80: 2e32 3534 2e32 3535 2e32 3535 0a0a 2020  .254.255.255..  
-00021a90: 2020 4d69 6e69 7020 616e 6420 6d61 7869    Minip and maxi
-00021aa0: 7020 6d61 7920 616c 736f 2062 6520 6c69  p may also be li
-00021ab0: 7374 7320 6f72 2074 7570 6c65 7320 6f66  sts or tuples of
-00021ac0: 2061 6464 7265 7373 6573 2069 6e20 616c   addresses in al
-00021ad0: 6c20 6162 6f76 650a 2020 2020 666f 726d  l above.    form
-00021ae0: 7320 2873 7472 2c20 696e 742c 206c 6973  s (str, int, lis
-00021af0: 7420 2f20 7475 706c 6529 2c20 616c 6c6f  t / tuple), allo
-00021b00: 7769 6e67 2073 6574 7570 206f 6620 6d75  wing setup of mu
-00021b10: 6c74 6970 6c65 2061 6464 7265 7373 2072  ltiple address r
-00021b20: 616e 6765 733a 3a0a 0a20 2020 2020 2020  anges::..       
-00021b30: 206d 696e 6970 203d 2028 6d69 6e69 7031   minip = (minip1
-00021b40: 2c20 6d69 6e69 7032 2c20 2e2e 2e20 6d69  , minip2, ... mi
-00021b50: 6e69 704e 290a 2020 2020 2020 2020 2020  nipN).          
-00021b60: 2020 2020 2020 2020 207c 2020 2020 2020           |      
-00021b70: 207c 2020 2020 2020 2020 2020 207c 0a20   |           |. 
-00021b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021b90: 2020 7c20 2020 2020 2020 7c20 2020 2020    |       |     
-00021ba0: 2020 2020 2020 7c0a 2020 2020 2020 2020        |.        
-00021bb0: 6d61 7869 7020 3d20 286d 6178 6970 312c  maxip = (maxip1,
-00021bc0: 206d 6178 6970 322c 202e 2e2e 206d 6178   maxip2, ... max
-00021bd0: 6970 4e29 0a0a 2020 2020 4c6f 6e67 6572  ipN)..    Longer
-00021be0: 2069 7465 7261 626c 6520 7769 6c6c 2062   iterable will b
-00021bf0: 6520 7472 756e 6361 7465 6420 746f 206d  e truncated to m
-00021c00: 6174 6368 206c 656e 6774 6820 6f66 2073  atch length of s
-00021c10: 686f 7274 6572 206f 6e65 2e0a 0a20 2020  horter one...   
-00021c20: 2045 7861 6d70 6c65 733a 0a20 2020 2020   Examples:.     
-00021c30: 2020 2043 6865 636b 2066 6f72 2076 616c     Check for val
-00021c40: 6964 2049 5076 3420 6164 6472 6573 733a  id IPv4 address:
-00021c50: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-00021c60: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
-00021c70: 2c20 5f6e 616d 653d 276e 616d 6527 2c20  , _name='name', 
-00021c80: 7265 7175 6972 6573 3d49 535f 4950 5634  requires=IS_IPV4
-00021c90: 2829 290a 0a20 2020 2020 2020 2043 6865  ())..        Che
-00021ca0: 636b 2066 6f72 2076 616c 6964 2049 5076  ck for valid IPv
-00021cb0: 3420 6164 6472 6573 7320 6265 6c6f 6e67  4 address belong
-00021cc0: 696e 6720 746f 2073 7065 6369 6669 6320  ing to specific 
-00021cd0: 7261 6e67 653a 0a0a 2020 2020 2020 2020  range:..        
-00021ce0: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-00021cf0: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
-00021d00: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
-00021d10: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
-00021d20: 535f 4950 5634 286d 696e 6970 3d27 3130  S_IPV4(minip='10
-00021d30: 302e 3230 302e 302e 3027 2c20 6d61 7869  0.200.0.0', maxi
-00021d40: 703d 2731 3030 2e32 3030 2e32 3535 2e32  p='100.200.255.2
-00021d50: 3535 2729 290a 0a20 2020 2020 2020 2043  55'))..        C
-00021d60: 6865 636b 2066 6f72 2076 616c 6964 2049  heck for valid I
-00021d70: 5076 3420 6164 6472 6573 7320 6265 6c6f  Pv4 address belo
-00021d80: 6e67 696e 6720 746f 2065 6974 6865 7220  nging to either 
-00021d90: 3130 302e 3131 302e 302e 3020 2d0a 2020  100.110.0.0 -.  
-00021da0: 2020 2020 2020 3130 302e 3131 302e 3235        100.110.25
-00021db0: 352e 3235 3520 6f72 2032 3030 2e35 302e  5.255 or 200.50.
-00021dc0: 302e 3020 2d20 3230 302e 3530 2e30 2e32  0.0 - 200.50.0.2
-00021dd0: 3535 2061 6464 7265 7373 2072 616e 6765  55 address range
-00021de0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-00021df0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
-00021e00: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-00021e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021e20: 2072 6571 7569 7265 733d 4953 5f49 5056   requires=IS_IPV
-00021e30: 3428 6d69 6e69 703d 2827 3130 302e 3131  4(minip=('100.11
-00021e40: 302e 302e 3027 2c20 2732 3030 2e35 302e  0.0.0', '200.50.
-00021e50: 302e 3027 292c 0a20 2020 2020 2020 2020  0.0'),.         
-00021e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021e70: 2020 2020 6d61 7869 703d 2827 3130 302e      maxip=('100.
-00021e80: 3131 302e 3235 352e 3235 3527 2c20 2732  110.255.255', '2
-00021e90: 3030 2e35 302e 302e 3235 3527 2929 290a  00.50.0.255'))).
-00021ea0: 0a20 2020 2020 2020 2043 6865 636b 2066  .        Check f
-00021eb0: 6f72 2076 616c 6964 2049 5076 3420 6164  or valid IPv4 ad
-00021ec0: 6472 6573 7320 6265 6c6f 6e67 696e 6720  dress belonging 
-00021ed0: 746f 2070 7269 7661 7465 2061 6464 7265  to private addre
-00021ee0: 7373 2073 7061 6365 3a0a 0a20 2020 2020  ss space:..     
-00021ef0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-00021f00: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
-00021f10: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
-00021f20: 733d 4953 5f49 5056 3428 6973 5f70 7269  s=IS_IPV4(is_pri
-00021f30: 7661 7465 3d54 7275 6529 290a 0a20 2020  vate=True))..   
-00021f40: 2020 2020 2043 6865 636b 2066 6f72 2076       Check for v
-00021f50: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
-00021f60: 7320 7468 6174 2069 7320 6e6f 7420 6120  s that is not a 
-00021f70: 6c6f 6361 6c68 6f73 7420 6164 6472 6573  localhost addres
-00021f80: 733a 0a0a 2020 2020 2020 2020 2020 2020  s:..            
-00021f90: 494e 5055 5428 5f74 7970 653d 2774 6578  INPUT(_type='tex
-00021fa0: 7427 2c20 5f6e 616d 653d 276e 616d 6527  t', _name='name'
-00021fb0: 2c20 7265 7175 6972 6573 3d49 535f 4950  , requires=IS_IP
-00021fc0: 5634 2869 735f 6c6f 6361 6c68 6f73 743d  V4(is_localhost=
-00021fd0: 4661 6c73 6529 290a 0a20 2020 2020 2020  False))..       
-00021fe0: 2020 2020 203e 3e3e 2049 535f 4950 5634       >>> IS_IPV4
-00021ff0: 2829 2827 312e 322e 332e 3427 290a 2020  ()('1.2.3.4').  
-00022000: 2020 2020 2020 2020 2020 2827 312e 322e            ('1.2.
-00022010: 332e 3427 2c20 4e6f 6e65 290a 2020 2020  3.4', None).    
-00022020: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00022030: 5056 3428 2928 2732 3535 2e32 3535 2e32  PV4()('255.255.2
-00022040: 3535 2e32 3535 2729 0a20 2020 2020 2020  55.255').       
-00022050: 2020 2020 2028 2732 3535 2e32 3535 2e32       ('255.255.2
-00022060: 3535 2e32 3535 272c 204e 6f6e 6529 0a20  55.255', None). 
-00022070: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00022080: 535f 4950 5634 2829 2827 312e 322e 332e  S_IPV4()('1.2.3.
-00022090: 3420 2729 0a20 2020 2020 2020 2020 2020  4 ').           
-000220a0: 2028 2731 2e32 2e33 2e34 2027 2c20 2765   ('1.2.3.4 ', 'e
-000220b0: 6e74 6572 2076 616c 6964 2049 5076 3420  nter valid IPv4 
-000220c0: 6164 6472 6573 7327 290a 2020 2020 2020  address').      
-000220d0: 2020 2020 2020 3e3e 3e20 4953 5f49 5056        >>> IS_IPV
-000220e0: 3428 2928 2731 2e32 2e33 2e34 2e35 2729  4()('1.2.3.4.5')
-000220f0: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
-00022100: 2e32 2e33 2e34 2e35 272c 2027 656e 7465  .2.3.4.5', 'ente
-00022110: 7220 7661 6c69 6420 4950 7634 2061 6464  r valid IPv4 add
-00022120: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
-00022130: 2020 203e 3e3e 2049 535f 4950 5634 2829     >>> IS_IPV4()
-00022140: 2827 3132 332e 3132 3327 290a 2020 2020  ('123.123').    
-00022150: 2020 2020 2020 2020 2827 3132 332e 3132          ('123.12
-00022160: 3327 2c20 2765 6e74 6572 2076 616c 6964  3', 'enter valid
-00022170: 2049 5076 3420 6164 6472 6573 7327 290a   IPv4 address').
-00022180: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00022190: 4953 5f49 5056 3428 2928 2731 3131 312e  IS_IPV4()('1111.
-000221a0: 322e 332e 3427 290a 2020 2020 2020 2020  2.3.4').        
-000221b0: 2020 2020 2827 3131 3131 2e32 2e33 2e34      ('1111.2.3.4
-000221c0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-000221d0: 4950 7634 2061 6464 7265 7373 2729 0a20  IPv4 address'). 
-000221e0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-000221f0: 535f 4950 5634 2829 2827 3031 3131 2e32  S_IPV4()('0111.2
-00022200: 2e33 2e34 2729 0a20 2020 2020 2020 2020  .3.4').         
-00022210: 2020 2028 2730 3131 312e 322e 332e 3427     ('0111.2.3.4'
-00022220: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
-00022230: 5076 3420 6164 6472 6573 7327 290a 2020  Pv4 address').  
-00022240: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00022250: 5f49 5056 3428 2928 2732 3536 2e32 2e33  _IPV4()('256.2.3
-00022260: 2e34 2729 0a20 2020 2020 2020 2020 2020  .4').           
-00022270: 2028 2732 3536 2e32 2e33 2e34 272c 2027   ('256.2.3.4', '
-00022280: 656e 7465 7220 7661 6c69 6420 4950 7634  enter valid IPv4
-00022290: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-000222a0: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-000222b0: 5634 2829 2827 3330 302e 322e 332e 3427  V4()('300.2.3.4'
-000222c0: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-000222d0: 3330 302e 322e 332e 3427 2c20 2765 6e74  300.2.3.4', 'ent
-000222e0: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
-000222f0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-00022300: 2020 2020 3e3e 3e20 4953 5f49 5056 3428      >>> IS_IPV4(
-00022310: 6d69 6e69 703d 2731 2e32 2e33 2e34 272c  minip='1.2.3.4',
-00022320: 206d 6178 6970 3d27 312e 322e 332e 3427   maxip='1.2.3.4'
-00022330: 2928 2731 2e32 2e33 2e34 2729 0a20 2020  )('1.2.3.4').   
-00022340: 2020 2020 2020 2020 2028 2731 2e32 2e33           ('1.2.3
-00022350: 2e34 272c 204e 6f6e 6529 0a20 2020 2020  .4', None).     
+0001e290: 6966 206e 6f74 2061 6c6c 5f73 7065 6369  if not all_speci
+0001e2a0: 616c 2e63 6f75 6e74 2854 7275 6529 203e  al.count(True) >
+0001e2b0: 3d20 7365 6c66 2e73 7065 6369 616c 3a0a  = self.special:.
+0001e2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e2d0: 2020 2020 6661 696c 7572 6573 2e61 7070      failures.app
+0001e2e0: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
+0001e2f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0001e300: 662e 7472 616e 736c 6174 6f72 2822 4d75  f.translator("Mu
+0001e310: 7374 2069 6e63 6c75 6465 2061 7420 6c65  st include at le
+0001e320: 6173 7420 2573 206f 6620 7468 6520 666f  ast %s of the fo
+0001e330: 6c6c 6f77 696e 673a 2025 7322 290a 2020  llowing: %s").  
+0001e340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e350: 2020 2020 2020 2520 2873 656c 662e 7370        % (self.sp
+0001e360: 6563 6961 6c2c 2073 656c 662e 7370 6563  ecial, self.spec
+0001e370: 6961 6c73 290a 2020 2020 2020 2020 2020  ials).          
+0001e380: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001e390: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+0001e3a0: 662e 7370 6563 6961 6c20 3d3d 2030 2061  f.special == 0 a
+0001e3b0: 6e64 2073 656c 662e 7370 6563 6961 6c20  nd self.special 
+0001e3c0: 6973 206e 6f74 2046 616c 7365 3a0a 2020  is not False:.  
+0001e3d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001e3e0: 206c 656e 285b 6974 656d 2066 6f72 2069   len([item for i
+0001e3f0: 7465 6d20 696e 2061 6c6c 5f73 7065 6369  tem in all_speci
+0001e400: 616c 2069 6620 6974 656d 5d29 203e 2030  al if item]) > 0
+0001e410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001e420: 2020 2020 2020 6661 696c 7572 6573 2e61        failures.a
+0001e430: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
+0001e440: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e450: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
+0001e460: 4d61 7920 6e6f 7420 636f 6e74 6169 6e20  May not contain 
+0001e470: 616e 7920 6f66 2074 6865 2066 6f6c 6c6f  any of the follo
+0001e480: 7769 6e67 3a20 2573 2229 0a20 2020 2020  wing: %s").     
+0001e490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e4a0: 2020 2025 2073 656c 662e 7370 6563 6961     % self.specia
+0001e4b0: 6c73 0a20 2020 2020 2020 2020 2020 2020  ls.             
+0001e4c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001e4d0: 2069 6620 7365 6c66 2e69 6e76 616c 6964   if self.invalid
+0001e4e0: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
+0001e4f0: 6c5f 696e 7661 6c69 6420 3d20 5b63 6820  l_invalid = [ch 
+0001e500: 696e 2076 616c 7565 2066 6f72 2063 6820  in value for ch 
+0001e510: 696e 2073 656c 662e 696e 7661 6c69 645d  in self.invalid]
+0001e520: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001e530: 616c 6c5f 696e 7661 6c69 642e 636f 756e  all_invalid.coun
+0001e540: 7428 5472 7565 2920 3e20 303a 0a20 2020  t(True) > 0:.   
+0001e550: 2020 2020 2020 2020 2020 2020 2066 6169               fai
+0001e560: 6c75 7265 732e 6170 7065 6e64 280a 2020  lures.append(.  
+0001e570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e580: 2020 7365 6c66 2e74 7261 6e73 6c61 746f    self.translato
+0001e590: 7228 224d 6179 206e 6f74 2063 6f6e 7461  r("May not conta
+0001e5a0: 696e 2061 6e79 206f 6620 7468 6520 666f  in any of the fo
+0001e5b0: 6c6c 6f77 696e 673a 2025 7322 290a 2020  llowing: %s").  
+0001e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e5d0: 2020 2520 7365 6c66 2e69 6e76 616c 6964    % self.invalid
+0001e5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e5f0: 2029 0a20 2020 2020 2020 2069 6620 6973   ).        if is
+0001e600: 696e 7374 616e 6365 2873 656c 662e 7570  instance(self.up
+0001e610: 7065 722c 2069 6e74 293a 0a20 2020 2020  per, int):.     
+0001e620: 2020 2020 2020 2061 6c6c 5f75 7070 6572         all_upper
+0001e630: 203d 2072 652e 6669 6e64 616c 6c28 225b   = re.findall("[
+0001e640: 412d 5a5d 222c 2076 616c 7565 290a 2020  A-Z]", value).  
+0001e650: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0001e660: 662e 7570 7065 7220 3e20 303a 0a20 2020  f.upper > 0:.   
+0001e670: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001e680: 6e6f 7420 6c65 6e28 616c 6c5f 7570 7065  not len(all_uppe
+0001e690: 7229 203e 3d20 7365 6c66 2e75 7070 6572  r) >= self.upper
+0001e6a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001e6b0: 2020 2020 2020 6661 696c 7572 6573 2e61        failures.a
+0001e6c0: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
+0001e6d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001e6e0: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
+0001e6f0: 4d75 7374 2069 6e63 6c75 6465 2061 7420  Must include at 
+0001e700: 6c65 6173 7420 2573 2075 7070 6572 6361  least %s upperca
+0001e710: 7365 2229 0a20 2020 2020 2020 2020 2020  se").           
+0001e720: 2020 2020 2020 2020 2020 2020 2025 2073               % s
+0001e730: 7472 2873 656c 662e 7570 7065 7229 0a20  tr(self.upper). 
+0001e740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e750: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0001e760: 2065 6c69 6620 7365 6c66 2e75 7070 6572   elif self.upper
+0001e770: 203d 3d20 3020 616e 6420 7365 6c66 2e75   == 0 and self.u
+0001e780: 7070 6572 2069 7320 6e6f 7420 4661 6c73  pper is not Fals
+0001e790: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001e7a0: 2020 2069 6620 6c65 6e28 616c 6c5f 7570     if len(all_up
+0001e7b0: 7065 7229 203e 2030 3a0a 2020 2020 2020  per) > 0:.      
+0001e7c0: 2020 2020 2020 2020 2020 2020 2020 6661                fa
+0001e7d0: 696c 7572 6573 2e61 7070 656e 6428 0a20  ilures.append(. 
+0001e7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e7f0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0001e800: 736c 6174 6f72 2822 4d61 7920 6e6f 7420  slator("May not 
+0001e810: 696e 636c 7564 6520 616e 7920 7570 7065  include any uppe
+0001e820: 7263 6173 6520 6c65 7474 6572 7322 290a  rcase letters").
+0001e830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e840: 2020 2020 290a 2020 2020 2020 2020 6966      ).        if
+0001e850: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+0001e860: 2e6c 6f77 6572 2c20 696e 7429 3a0a 2020  .lower, int):.  
+0001e870: 2020 2020 2020 2020 2020 616c 6c5f 6c6f            all_lo
+0001e880: 7765 7220 3d20 7265 2e66 696e 6461 6c6c  wer = re.findall
+0001e890: 2822 5b61 2d7a 5d22 2c20 7661 6c75 6529  ("[a-z]", value)
+0001e8a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001e8b0: 7365 6c66 2e6c 6f77 6572 203e 2030 3a0a  self.lower > 0:.
+0001e8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e8d0: 6966 206e 6f74 206c 656e 2861 6c6c 5f6c  if not len(all_l
+0001e8e0: 6f77 6572 2920 3e3d 2073 656c 662e 6c6f  ower) >= self.lo
+0001e8f0: 7765 723a 0a20 2020 2020 2020 2020 2020  wer:.           
+0001e900: 2020 2020 2020 2020 2066 6169 6c75 7265           failure
+0001e910: 732e 6170 7065 6e64 280a 2020 2020 2020  s.append(.      
+0001e920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e930: 2020 7365 6c66 2e74 7261 6e73 6c61 746f    self.translato
+0001e940: 7228 224d 7573 7420 696e 636c 7564 6520  r("Must include 
+0001e950: 6174 206c 6561 7374 2025 7320 6c6f 7765  at least %s lowe
+0001e960: 7263 6173 6522 290a 2020 2020 2020 2020  rcase").        
+0001e970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e980: 2520 7374 7228 7365 6c66 2e6c 6f77 6572  % str(self.lower
+0001e990: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001e9a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001e9b0: 2020 2020 656c 6966 2073 656c 662e 6c6f      elif self.lo
+0001e9c0: 7765 7220 3d3d 2030 2061 6e64 2073 656c  wer == 0 and sel
+0001e9d0: 662e 6c6f 7765 7220 6973 206e 6f74 2046  f.lower is not F
+0001e9e0: 616c 7365 3a0a 2020 2020 2020 2020 2020  alse:.          
+0001e9f0: 2020 2020 2020 6966 206c 656e 2861 6c6c        if len(all
+0001ea00: 5f6c 6f77 6572 2920 3e20 303a 0a20 2020  _lower) > 0:.   
+0001ea10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea20: 2066 6169 6c75 7265 732e 6170 7065 6e64   failures.append
+0001ea30: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001ea40: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0001ea50: 7261 6e73 6c61 746f 7228 224d 6179 206e  ranslator("May n
+0001ea60: 6f74 2069 6e63 6c75 6465 2061 6e79 206c  ot include any l
+0001ea70: 6f77 6572 6361 7365 206c 6574 7465 7273  owercase letters
+0001ea80: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+0001ea90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001eaa0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0001eab0: 656c 662e 6e75 6d62 6572 2c20 696e 7429  elf.number, int)
+0001eac0: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
+0001ead0: 6c5f 6e75 6d62 6572 203d 2072 652e 6669  l_number = re.fi
+0001eae0: 6e64 616c 6c28 225b 302d 395d 222c 2076  ndall("[0-9]", v
+0001eaf0: 616c 7565 290a 2020 2020 2020 2020 2020  alue).          
+0001eb00: 2020 6966 2073 656c 662e 6e75 6d62 6572    if self.number
+0001eb10: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
+0001eb20: 2020 2020 2020 6e75 6d62 6572 7320 3d20        numbers = 
+0001eb30: 226e 756d 6265 7222 0a20 2020 2020 2020  "number".       
+0001eb40: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+0001eb50: 2e6e 756d 6265 7220 3e20 313a 0a20 2020  .number > 1:.   
+0001eb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eb70: 206e 756d 6265 7273 203d 2022 6e75 6d62   numbers = "numb
+0001eb80: 6572 7322 0a20 2020 2020 2020 2020 2020  ers".           
+0001eb90: 2020 2020 206e 756d 6265 7273 203d 2073       numbers = s
+0001eba0: 656c 662e 7472 616e 736c 6174 6f72 286e  elf.translator(n
+0001ebb0: 756d 6265 7273 290a 2020 2020 2020 2020  umbers).        
+0001ebc0: 2020 2020 2020 2020 6966 206e 6f74 206c          if not l
+0001ebd0: 656e 2861 6c6c 5f6e 756d 6265 7229 203e  en(all_number) >
+0001ebe0: 3d20 7365 6c66 2e6e 756d 6265 723a 0a20  = self.number:. 
+0001ebf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ec00: 2020 2066 6169 6c75 7265 732e 6170 7065     failures.appe
+0001ec10: 6e64 280a 2020 2020 2020 2020 2020 2020  nd(.            
+0001ec20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001ec30: 2e74 7261 6e73 6c61 746f 7228 224d 7573  .translator("Mus
+0001ec40: 7420 696e 636c 7564 6520 6174 206c 6561  t include at lea
+0001ec50: 7374 2025 7320 2573 2229 0a20 2020 2020  st %s %s").     
+0001ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ec70: 2020 2025 2028 7374 7228 7365 6c66 2e6e     % (str(self.n
+0001ec80: 756d 6265 7229 2c20 6e75 6d62 6572 7329  umber), numbers)
+0001ec90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001eca0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001ecb0: 2020 2065 6c69 6620 7365 6c66 2e6e 756d     elif self.num
+0001ecc0: 6265 7220 3d3d 2030 2061 6e64 2073 656c  ber == 0 and sel
+0001ecd0: 662e 6e75 6d62 6572 2069 7320 6e6f 7420  f.number is not 
+0001ece0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+0001ecf0: 2020 2020 2020 2069 6620 6c65 6e28 616c         if len(al
+0001ed00: 6c5f 6e75 6d62 6572 2920 3e20 303a 0a20  l_number) > 0:. 
+0001ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed20: 2020 2066 6169 6c75 7265 732e 6170 7065     failures.appe
+0001ed30: 6e64 2873 656c 662e 7472 616e 736c 6174  nd(self.translat
+0001ed40: 6f72 2822 4d61 7920 6e6f 7420 696e 636c  or("May not incl
+0001ed50: 7564 6520 616e 7920 6e75 6d62 6572 7322  ude any numbers"
+0001ed60: 2929 0a20 2020 2020 2020 2069 6620 6c65  )).        if le
+0001ed70: 6e28 6661 696c 7572 6573 2920 3d3d 2030  n(failures) == 0
+0001ed80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0001ed90: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
+0001eda0: 2020 2069 6620 6e6f 7420 7365 6c66 2e65     if not self.e
+0001edb0: 7272 6f72 5f6d 6573 7361 6765 3a0a 2020  rror_message:.  
+0001edc0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+0001edd0: 662e 6573 7472 696e 673a 0a20 2020 2020  f.estring:.     
+0001ede0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001edf0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+0001ee00: 2822 7c22 2e6a 6f69 6e28 6d61 7028 7374  ("|".join(map(st
+0001ee10: 722c 2066 6169 6c75 7265 7329 2929 0a20  r, failures))). 
+0001ee20: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001ee30: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+0001ee40: 2822 2c20 222e 6a6f 696e 2866 6169 6c75  (", ".join(failu
+0001ee50: 7265 7329 290a 2020 2020 2020 2020 656c  res)).        el
+0001ee60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001ee70: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+0001ee80: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+0001ee90: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+0001eea0: 5f6d 6573 7361 6765 2929 0a0a 0a63 6c61  _message))...cla
+0001eeb0: 7373 2049 535f 494d 4147 4528 5661 6c69  ss IS_IMAGE(Vali
+0001eec0: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
+0001eed0: 2020 2020 4368 6563 6b73 2069 6620 6669      Checks if fi
+0001eee0: 6c65 2075 706c 6f61 6465 6420 7468 726f  le uploaded thro
+0001eef0: 7567 6820 6669 6c65 2069 6e70 7574 2077  ugh file input w
+0001ef00: 6173 2073 6176 6564 2069 6e20 6f6e 6520  as saved in one 
+0001ef10: 6f66 2073 656c 6563 7465 640a 2020 2020  of selected.    
+0001ef20: 696d 6167 6520 666f 726d 6174 7320 616e  image formats an
+0001ef30: 6420 6861 7320 6469 6d65 6e73 696f 6e73  d has dimensions
+0001ef40: 2028 7769 6474 6820 616e 6420 6865 6967   (width and heig
+0001ef50: 6874 2920 7769 7468 696e 2067 6976 656e  ht) within given
+0001ef60: 2062 6f75 6e64 6172 6965 732e 0a0a 2020   boundaries...  
+0001ef70: 2020 446f 6573 202a 6e6f 742a 2063 6865    Does *not* che
+0001ef80: 636b 2066 6f72 206d 6178 696d 756d 2066  ck for maximum f
+0001ef90: 696c 6520 7369 7a65 2028 7573 6520 4953  ile size (use IS
+0001efa0: 5f4c 454e 4754 4820 666f 7220 7468 6174  _LENGTH for that
+0001efb0: 292e 2052 6574 7572 6e73 0a20 2020 2076  ). Returns.    v
+0001efc0: 616c 6964 6174 696f 6e20 6661 696c 7572  alidation failur
+0001efd0: 6520 6966 206e 6f20 6461 7461 2077 6173  e if no data was
+0001efe0: 2075 706c 6f61 6465 642e 0a0a 2020 2020   uploaded...    
+0001eff0: 5375 7070 6f72 7465 6420 6669 6c65 2066  Supported file f
+0001f000: 6f72 6d61 7473 3a20 424d 502c 2047 4946  ormats: BMP, GIF
+0001f010: 2c20 4a50 4547 2c20 504e 472e 0a0a 2020  , JPEG, PNG...  
+0001f020: 2020 436f 6465 2070 6172 7473 2074 616b    Code parts tak
+0001f030: 656e 2066 726f 6d0a 2020 2020 6874 7470  en from.    http
+0001f040: 3a2f 2f6d 6169 6c2e 7079 7468 6f6e 2e6f  ://mail.python.o
+0001f050: 7267 2f70 6970 6572 6d61 696c 2f70 7974  rg/pipermail/pyt
+0001f060: 686f 6e2d 6c69 7374 2f32 3030 372d 4a75  hon-list/2007-Ju
+0001f070: 6e65 2f36 3137 3132 362e 6874 6d6c 0a0a  ne/617126.html..
+0001f080: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+0001f090: 2020 6578 7465 6e73 696f 6e73 3a20 6974    extensions: it
+0001f0a0: 6572 6162 6c65 2063 6f6e 7461 696e 696e  erable containin
+0001f0b0: 6720 616c 6c6f 7765 6420 2a6c 6f77 6572  g allowed *lower
+0001f0c0: 6361 7365 2a20 696d 6167 6520 6669 6c65  case* image file
+0001f0d0: 2065 7874 656e 7369 6f6e 730a 2020 2020   extensions.    
+0001f0e0: 2020 2020 2827 6a70 6727 2065 7874 656e      ('jpg' exten
+0001f0f0: 7369 6f6e 206f 6620 7570 6c6f 6164 6564  sion of uploaded
+0001f100: 2066 696c 6520 636f 756e 7473 2061 7320   file counts as 
+0001f110: 276a 7065 6727 290a 2020 2020 2020 2020  'jpeg').        
+0001f120: 6d61 7873 697a 653a 2069 7465 7261 626c  maxsize: iterabl
+0001f130: 6520 636f 6e74 6169 6e69 6e67 206d 6178  e containing max
+0001f140: 696d 756d 2077 6964 7468 2061 6e64 2068  imum width and h
+0001f150: 6569 6768 7420 6f66 2074 6865 2069 6d61  eight of the ima
+0001f160: 6765 0a20 2020 2020 2020 206d 696e 7369  ge.        minsi
+0001f170: 7a65 3a20 6974 6572 6162 6c65 2063 6f6e  ze: iterable con
+0001f180: 7461 696e 696e 6720 6d69 6e69 6d75 6d20  taining minimum 
+0001f190: 7769 6474 6820 616e 6420 6865 6967 6874  width and height
+0001f1a0: 206f 6620 7468 6520 696d 6167 650a 2020   of the image.  
+0001f1b0: 2020 2020 2020 6173 7065 6374 7261 7469        aspectrati
+0001f1c0: 6f3a 2069 7465 7261 626c 6520 636f 6e74  o: iterable cont
+0001f1d0: 6169 6e69 6e67 2074 6172 6765 7420 6173  aining target as
+0001f1e0: 7065 6374 2072 6174 696f 0a0a 2020 2020  pect ratio..    
+0001f1f0: 5573 6520 282d 312c 202d 3129 2061 7320  Use (-1, -1) as 
+0001f200: 6d69 6e73 697a 6520 746f 2070 6173 7320  minsize to pass 
+0001f210: 696d 6167 6520 7369 7a65 2063 6865 636b  image size check
+0001f220: 2e0a 2020 2020 5573 6520 282d 312c 202d  ..    Use (-1, -
+0001f230: 3129 2061 7320 6173 7065 6374 7261 7469  1) as aspectrati
+0001f240: 6f20 746f 2070 6173 7320 6173 7065 6374  o to pass aspect
+0001f250: 2072 6174 696f 2063 6865 636b 2e0a 0a20   ratio check... 
+0001f260: 2020 2045 7861 6d70 6c65 733a 0a20 2020     Examples:.   
+0001f270: 2020 2020 2043 6865 636b 2069 6620 7570       Check if up
+0001f280: 6c6f 6164 6564 2066 696c 6520 6973 2069  loaded file is i
+0001f290: 6e20 616e 7920 6f66 2073 7570 706f 7274  n any of support
+0001f2a0: 6564 2069 6d61 6765 2066 6f72 6d61 7473  ed image formats
+0001f2b0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+0001f2c0: 4e50 5554 285f 7479 7065 3d27 6669 6c65  NPUT(_type='file
+0001f2d0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+0001f2e0: 2072 6571 7569 7265 733d 4953 5f49 4d41   requires=IS_IMA
+0001f2f0: 4745 2829 290a 0a20 2020 2020 2020 2043  GE())..        C
+0001f300: 6865 636b 2069 6620 7570 6c6f 6164 6564  heck if uploaded
+0001f310: 2066 696c 6520 6973 2065 6974 6865 7220   file is either 
+0001f320: 4a50 4547 206f 7220 504e 473a 0a0a 2020  JPEG or PNG:..  
+0001f330: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
+0001f340: 5f74 7970 653d 2766 696c 6527 2c20 5f6e  _type='file', _n
+0001f350: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
+0001f360: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0001f370: 6972 6573 3d49 535f 494d 4147 4528 6578  ires=IS_IMAGE(ex
+0001f380: 7465 6e73 696f 6e73 3d28 276a 7065 6727  tensions=('jpeg'
+0001f390: 2c20 2770 6e67 2729 2929 0a0a 2020 2020  , 'png')))..    
+0001f3a0: 2020 2020 4368 6563 6b20 6966 2075 706c      Check if upl
+0001f3b0: 6f61 6465 6420 6669 6c65 2069 7320 504e  oaded file is PN
+0001f3c0: 4720 7769 7468 206d 6178 696d 756d 2073  G with maximum s
+0001f3d0: 697a 6520 6f66 2032 3030 7832 3030 2070  ize of 200x200 p
+0001f3e0: 6978 656c 733a 0a0a 2020 2020 2020 2020  ixels:..        
+0001f3f0: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+0001f400: 2766 696c 6527 2c20 5f6e 616d 653d 276e  'file', _name='n
+0001f410: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
+0001f420: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
+0001f430: 535f 494d 4147 4528 6578 7465 6e73 696f  S_IMAGE(extensio
+0001f440: 6e73 3d28 2770 6e67 2729 2c20 6d61 7873  ns=('png'), maxs
+0001f450: 697a 653d 2832 3030 2c20 3230 3029 2929  ize=(200, 200)))
+0001f460: 0a0a 2020 2020 2020 2020 4368 6563 6b20  ..        Check 
+0001f470: 6966 2075 706c 6f61 6465 6420 6669 6c65  if uploaded file
+0001f480: 2068 6173 2061 2031 363a 3920 6173 7065   has a 16:9 aspe
+0001f490: 6374 2072 6174 696f 3a0a 0a20 2020 2020  ct ratio:..     
+0001f4a0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+0001f4b0: 7065 3d27 6669 6c65 272c 205f 6e61 6d65  pe='file', _name
+0001f4c0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
+0001f4d0: 2020 2020 2020 2020 2072 6571 7569 7265           require
+0001f4e0: 733d 4953 5f49 4d41 4745 2861 7370 6563  s=IS_IMAGE(aspec
+0001f4f0: 7472 6174 696f 3d28 3136 2c20 3929 2929  tratio=(16, 9)))
+0001f500: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+0001f510: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+0001f520: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0001f530: 2020 6578 7465 6e73 696f 6e73 3d28 2262    extensions=("b
+0001f540: 6d70 222c 2022 6769 6622 2c20 226a 7065  mp", "gif", "jpe
+0001f550: 6722 2c20 2270 6e67 2229 2c0a 2020 2020  g", "png"),.    
+0001f560: 2020 2020 6d61 7873 697a 653d 2831 3030      maxsize=(100
+0001f570: 3030 2c20 3130 3030 3029 2c0a 2020 2020  00, 10000),.    
+0001f580: 2020 2020 6d69 6e73 697a 653d 2830 2c20      minsize=(0, 
+0001f590: 3029 2c0a 2020 2020 2020 2020 6173 7065  0),.        aspe
+0001f5a0: 6374 7261 7469 6f3d 282d 312c 202d 3129  ctratio=(-1, -1)
+0001f5b0: 2c0a 2020 2020 2020 2020 6572 726f 725f  ,.        error_
+0001f5c0: 6d65 7373 6167 653d 2249 6e76 616c 6964  message="Invalid
+0001f5d0: 2069 6d61 6765 222c 0a20 2020 2029 3a0a   image",.    ):.
+0001f5e0: 2020 2020 2020 2020 7365 6c66 2e65 7874          self.ext
+0001f5f0: 656e 7369 6f6e 7320 3d20 6578 7465 6e73  ensions = extens
+0001f600: 696f 6e73 0a20 2020 2020 2020 2073 656c  ions.        sel
+0001f610: 662e 6d61 7873 697a 6520 3d20 6d61 7873  f.maxsize = maxs
+0001f620: 697a 650a 2020 2020 2020 2020 7365 6c66  ize.        self
+0001f630: 2e6d 696e 7369 7a65 203d 206d 696e 7369  .minsize = minsi
+0001f640: 7a65 0a20 2020 2020 2020 2073 656c 662e  ze.        self.
+0001f650: 6173 7065 6374 7261 7469 6f20 3d20 6173  aspectratio = as
+0001f660: 7065 6374 7261 7469 6f0a 2020 2020 2020  pectratio.      
+0001f670: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
+0001f680: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
+0001f690: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
+0001f6a0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+0001f6b0: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+0001f6c0: 6e65 293a 0a20 2020 2020 2020 2074 7279  ne):.        try
+0001f6d0: 3a0a 2020 2020 2020 2020 2020 2020 6578  :.            ex
+0001f6e0: 7465 6e73 696f 6e20 3d20 7661 6c75 652e  tension = value.
+0001f6f0: 6669 6c65 6e61 6d65 2e72 6669 6e64 2822  filename.rfind("
+0001f700: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
+0001f710: 6173 7365 7274 2065 7874 656e 7369 6f6e  assert extension
+0001f720: 203e 3d20 300a 2020 2020 2020 2020 2020   >= 0.          
+0001f730: 2020 6578 7465 6e73 696f 6e20 3d20 7661    extension = va
+0001f740: 6c75 652e 6669 6c65 6e61 6d65 5b65 7874  lue.filename[ext
+0001f750: 656e 7369 6f6e 202b 2031 203a 5d2e 6c6f  ension + 1 :].lo
+0001f760: 7765 7228 290a 2020 2020 2020 2020 2020  wer().          
+0001f770: 2020 6966 2065 7874 656e 7369 6f6e 203d    if extension =
+0001f780: 3d20 226a 7067 223a 0a20 2020 2020 2020  = "jpg":.       
+0001f790: 2020 2020 2020 2020 2065 7874 656e 7369           extensi
+0001f7a0: 6f6e 203d 2022 6a70 6567 220a 2020 2020  on = "jpeg".    
+0001f7b0: 2020 2020 2020 2020 6173 7365 7274 2065          assert e
+0001f7c0: 7874 656e 7369 6f6e 2069 6e20 7365 6c66  xtension in self
+0001f7d0: 2e65 7874 656e 7369 6f6e 730a 2020 2020  .extensions.    
+0001f7e0: 2020 2020 2020 2020 6966 2065 7874 656e          if exten
+0001f7f0: 7369 6f6e 203d 3d20 2262 6d70 223a 0a20  sion == "bmp":. 
+0001f800: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0001f810: 6964 7468 2c20 6865 6967 6874 203d 2073  idth, height = s
+0001f820: 656c 662e 5f5f 626d 7028 7661 6c75 652e  elf.__bmp(value.
+0001f830: 6669 6c65 290a 2020 2020 2020 2020 2020  file).          
+0001f840: 2020 656c 6966 2065 7874 656e 7369 6f6e    elif extension
+0001f850: 203d 3d20 2267 6966 223a 0a20 2020 2020   == "gif":.     
+0001f860: 2020 2020 2020 2020 2020 2077 6964 7468             width
+0001f870: 2c20 6865 6967 6874 203d 2073 656c 662e  , height = self.
+0001f880: 5f5f 6769 6628 7661 6c75 652e 6669 6c65  __gif(value.file
+0001f890: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0001f8a0: 6966 2065 7874 656e 7369 6f6e 203d 3d20  if extension == 
+0001f8b0: 226a 7065 6722 3a0a 2020 2020 2020 2020  "jpeg":.        
+0001f8c0: 2020 2020 2020 2020 7769 6474 682c 2068          width, h
+0001f8d0: 6569 6768 7420 3d20 7365 6c66 2e5f 5f6a  eight = self.__j
+0001f8e0: 7065 6728 7661 6c75 652e 6669 6c65 290a  peg(value.file).
+0001f8f0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001f900: 2065 7874 656e 7369 6f6e 203d 3d20 2270   extension == "p
+0001f910: 6e67 223a 0a20 2020 2020 2020 2020 2020  ng":.           
+0001f920: 2020 2020 2077 6964 7468 2c20 6865 6967       width, heig
+0001f930: 6874 203d 2073 656c 662e 5f5f 706e 6728  ht = self.__png(
+0001f940: 7661 6c75 652e 6669 6c65 290a 2020 2020  value.file).    
+0001f950: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001f960: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+0001f970: 6474 6820 3d20 2d31 0a20 2020 2020 2020  dth = -1.       
+0001f980: 2020 2020 2020 2020 2068 6569 6768 7420           height 
+0001f990: 3d20 2d31 0a0a 2020 2020 2020 2020 2020  = -1..          
+0001f9a0: 2020 6173 7365 7274 2028 0a20 2020 2020    assert (.     
+0001f9b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001f9c0: 6d69 6e73 697a 655b 305d 203c 3d20 7769  minsize[0] <= wi
+0001f9d0: 6474 6820 3c3d 2073 656c 662e 6d61 7873  dth <= self.maxs
+0001f9e0: 697a 655b 305d 0a20 2020 2020 2020 2020  ize[0].         
+0001f9f0: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
+0001fa00: 6d69 6e73 697a 655b 315d 203c 3d20 6865  minsize[1] <= he
+0001fa10: 6967 6874 203c 3d20 7365 6c66 2e6d 6178  ight <= self.max
+0001fa20: 7369 7a65 5b31 5d0a 2020 2020 2020 2020  size[1].        
+0001fa30: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
+0001fa40: 2020 2069 6620 7365 6c66 2e61 7370 6563     if self.aspec
+0001fa50: 7472 6174 696f 203e 2028 2d31 2c20 2d31  tratio > (-1, -1
+0001fa60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001fa70: 2020 2074 6172 6765 745f 7261 7469 6f20     target_ratio 
+0001fa80: 3d20 2831 2e30 202a 2073 656c 662e 6173  = (1.0 * self.as
+0001fa90: 7065 6374 7261 7469 6f5b 315d 2920 2f20  pectratio[1]) / 
+0001faa0: 7365 6c66 2e61 7370 6563 7472 6174 696f  self.aspectratio
+0001fab0: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+0001fac0: 2020 2020 6163 7475 616c 5f72 6174 696f      actual_ratio
+0001fad0: 203d 2028 312e 3020 2a20 6865 6967 6874   = (1.0 * height
+0001fae0: 2920 2f20 7769 6474 680a 0a20 2020 2020  ) / width..     
+0001faf0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+0001fb00: 7420 6163 7475 616c 5f72 6174 696f 203d  t actual_ratio =
+0001fb10: 3d20 7461 7267 6574 5f72 6174 696f 0a0a  = target_ratio..
+0001fb20: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+0001fb30: 652e 6669 6c65 2e73 6565 6b28 3029 0a20  e.file.seek(0). 
+0001fb40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001fb50: 6e20 7661 6c75 650a 2020 2020 2020 2020  n value.        
+0001fb60: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0001fb70: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
+0001fb80: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+0001fb90: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+0001fba0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+0001fbb0: 726f 725f 6d65 7373 6167 6529 290a 0a20  ror_message)).. 
+0001fbc0: 2020 2064 6566 205f 5f62 6d70 2873 656c     def __bmp(sel
+0001fbd0: 662c 2073 7472 6561 6d29 3a0a 2020 2020  f, stream):.    
+0001fbe0: 2020 2020 6966 2073 7472 6561 6d2e 7265      if stream.re
+0001fbf0: 6164 2832 2920 3d3d 2062 2242 4d22 3a0a  ad(2) == b"BM":.
+0001fc00: 2020 2020 2020 2020 2020 2020 7374 7265              stre
+0001fc10: 616d 2e72 6561 6428 3136 290a 2020 2020  am.read(16).    
+0001fc20: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001fc30: 7472 7563 742e 756e 7061 636b 2822 3c4c  truct.unpack("<L
+0001fc40: 4c22 2c20 7374 7265 616d 2e72 6561 6428  L", stream.read(
+0001fc50: 3829 290a 2020 2020 2020 2020 7265 7475  8)).        retu
+0001fc60: 726e 2028 2d31 2c20 2d31 290a 0a20 2020  rn (-1, -1)..   
+0001fc70: 2064 6566 205f 5f67 6966 2873 656c 662c   def __gif(self,
+0001fc80: 2073 7472 6561 6d29 3a0a 2020 2020 2020   stream):.      
+0001fc90: 2020 6966 2073 7472 6561 6d2e 7265 6164    if stream.read
+0001fca0: 2836 2920 696e 2028 6222 4749 4638 3761  (6) in (b"GIF87a
+0001fcb0: 222c 2062 2247 4946 3839 6122 293a 0a20  ", b"GIF89a"):. 
+0001fcc0: 2020 2020 2020 2020 2020 2073 7472 6561             strea
+0001fcd0: 6d20 3d20 7374 7265 616d 2e72 6561 6428  m = stream.read(
+0001fce0: 3529 0a20 2020 2020 2020 2020 2020 2069  5).            i
+0001fcf0: 6620 6c65 6e28 7374 7265 616d 2920 3d3d  f len(stream) ==
+0001fd00: 2035 3a0a 2020 2020 2020 2020 2020 2020   5:.            
+0001fd10: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
+0001fd20: 2873 7472 7563 742e 756e 7061 636b 2822  (struct.unpack("
+0001fd30: 3c48 4842 222c 2073 7472 6561 6d29 5b3a  <HHB", stream)[:
+0001fd40: 2d31 5d29 0a20 2020 2020 2020 2072 6574  -1]).        ret
+0001fd50: 7572 6e20 282d 312c 202d 3129 0a0a 2020  urn (-1, -1)..  
+0001fd60: 2020 6465 6620 5f5f 6a70 6567 2873 656c    def __jpeg(sel
+0001fd70: 662c 2073 7472 6561 6d29 3a0a 2020 2020  f, stream):.    
+0001fd80: 2020 2020 6966 2073 7472 6561 6d2e 7265      if stream.re
+0001fd90: 6164 2832 2920 3d3d 2062 225c 7846 465c  ad(2) == b"\xFF\
+0001fda0: 7844 3822 3a0a 2020 2020 2020 2020 2020  xD8":.          
+0001fdb0: 2020 7768 696c 6520 5472 7565 3a0a 2020    while True:.  
+0001fdc0: 2020 2020 2020 2020 2020 2020 2020 286d                (m
+0001fdd0: 6172 6b65 722c 2063 6f64 652c 206c 656e  arker, code, len
+0001fde0: 6774 6829 203d 2073 7472 7563 742e 756e  gth) = struct.un
+0001fdf0: 7061 636b 2822 2142 4248 222c 2073 7472  pack("!BBH", str
+0001fe00: 6561 6d2e 7265 6164 2834 2929 0a20 2020  eam.read(4)).   
+0001fe10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001fe20: 6d61 726b 6572 2021 3d20 3078 4646 3a0a  marker != 0xFF:.
+0001fe30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe40: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+0001fe50: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+0001fe60: 6f64 6520 3e3d 2030 7843 3020 616e 6420  ode >= 0xC0 and 
+0001fe70: 636f 6465 203c 3d20 3078 4333 3a0a 2020  code <= 0xC3:.  
+0001fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe90: 2020 7265 7475 726e 2074 7570 6c65 2872    return tuple(r
+0001fea0: 6576 6572 7365 6428 7374 7275 6374 2e75  eversed(struct.u
+0001feb0: 6e70 6163 6b28 2221 7848 4822 2c20 7374  npack("!xHH", st
+0001fec0: 7265 616d 2e72 6561 6428 3529 2929 290a  ream.read(5)))).
+0001fed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fee0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001fef0: 2020 2020 2020 2020 2020 7374 7265 616d            stream
+0001ff00: 2e72 6561 6428 6c65 6e67 7468 202d 2032  .read(length - 2
+0001ff10: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0001ff20: 2028 2d31 2c20 2d31 290a 0a20 2020 2064   (-1, -1)..    d
+0001ff30: 6566 205f 5f70 6e67 2873 656c 662c 2073  ef __png(self, s
+0001ff40: 7472 6561 6d29 3a0a 2020 2020 2020 2020  tream):.        
+0001ff50: 6966 2073 7472 6561 6d2e 7265 6164 2838  if stream.read(8
+0001ff60: 2920 3d3d 2062 225c 3231 3150 4e47 5c72  ) == b"\211PNG\r
+0001ff70: 5c6e 5c30 3332 5c6e 223a 0a20 2020 2020  \n\032\n":.     
+0001ff80: 2020 2020 2020 2073 7472 6561 6d2e 7265         stream.re
+0001ff90: 6164 2834 290a 2020 2020 2020 2020 2020  ad(4).          
+0001ffa0: 2020 6966 2073 7472 6561 6d2e 7265 6164    if stream.read
+0001ffb0: 2834 2920 3d3d 2062 2249 4844 5222 3a0a  (4) == b"IHDR":.
+0001ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ffd0: 7265 7475 726e 2073 7472 7563 742e 756e  return struct.un
+0001ffe0: 7061 636b 2822 214c 4c22 2c20 7374 7265  pack("!LL", stre
+0001fff0: 616d 2e72 6561 6428 3829 290a 2020 2020  am.read(8)).    
+00020000: 2020 2020 7265 7475 726e 2028 2d31 2c20      return (-1, 
+00020010: 2d31 290a 0a0a 636c 6173 7320 4953 5f46  -1)...class IS_F
+00020020: 494c 4528 5661 6c69 6461 746f 7229 3a0a  ILE(Validator):.
+00020030: 2020 2020 2222 220a 2020 2020 4368 6563      """.    Chec
+00020040: 6b73 2069 6620 6e61 6d65 2061 6e64 2065  ks if name and e
+00020050: 7874 656e 7369 6f6e 206f 6620 6669 6c65  xtension of file
+00020060: 2075 706c 6f61 6465 6420 7468 726f 7567   uploaded throug
+00020070: 6820 6669 6c65 2069 6e70 7574 206d 6174  h file input mat
+00020080: 6368 6573 0a20 2020 2067 6976 656e 2063  ches.    given c
+00020090: 7269 7465 7269 612e 0a0a 2020 2020 446f  riteria...    Do
+000200a0: 6573 202a 6e6f 742a 2065 6e73 7572 6520  es *not* ensure 
+000200b0: 7468 6520 6669 6c65 2074 7970 6520 696e  the file type in
+000200c0: 2061 6e79 2077 6179 2e20 5265 7475 726e   any way. Return
+000200d0: 7320 7661 6c69 6461 7469 6f6e 2066 6169  s validation fai
+000200e0: 6c75 7265 0a20 2020 2069 6620 6e6f 2064  lure.    if no d
+000200f0: 6174 6120 7761 7320 7570 6c6f 6164 6564  ata was uploaded
+00020100: 2e0a 0a20 2020 2041 7267 733a 0a20 2020  ...    Args:.   
+00020110: 2020 2020 2066 696c 656e 616d 653a 2073       filename: s
+00020120: 7472 696e 672f 636f 6d70 696c 6564 2072  tring/compiled r
+00020130: 6567 6578 206f 7220 6120 6c69 7374 206f  egex or a list o
+00020140: 6620 7374 7269 6e67 732f 7265 6765 7820  f strings/regex 
+00020150: 6f66 2076 616c 6964 2066 696c 656e 616d  of valid filenam
+00020160: 6573 0a20 2020 2020 2020 2065 7874 656e  es.        exten
+00020170: 7369 6f6e 3a20 7374 7269 6e67 2f63 6f6d  sion: string/com
+00020180: 7069 6c65 6420 7265 6765 7820 6f72 2061  piled regex or a
+00020190: 206c 6973 7420 6f66 2073 7472 696e 6773   list of strings
+000201a0: 2f72 6567 6578 206f 6620 7661 6c69 6420  /regex of valid 
+000201b0: 6578 7465 6e73 696f 6e73 0a20 2020 2020  extensions.     
+000201c0: 2020 206c 6173 7464 6f74 3a20 7768 6963     lastdot: whic
+000201d0: 6820 646f 7420 7368 6f75 6c64 2062 6520  h dot should be 
+000201e0: 7573 6564 2061 7320 6120 6669 6c65 6e61  used as a filena
+000201f0: 6d65 202f 2065 7874 656e 7369 6f6e 2073  me / extension s
+00020200: 6570 6172 6174 6f72 3a0a 2020 2020 2020  eparator:.      
+00020210: 2020 2020 2020 5472 7565 206d 6561 6e73        True means
+00020220: 206c 6173 7420 646f 742c 2065 672e 2066   last dot, eg. f
+00020230: 696c 652e 6a70 672e 706e 6720 2d3e 2066  ile.jpg.png -> f
+00020240: 696c 652e 6a70 6720 2f20 706e 670a 2020  ile.jpg / png.  
+00020250: 2020 2020 2020 2020 2020 4661 6c73 6520            False 
+00020260: 6d65 616e 7320 6669 7273 7420 646f 742c  means first dot,
+00020270: 2065 672e 2066 696c 652e 7461 722e 677a   eg. file.tar.gz
+00020280: 202d 3e20 6669 6c65 202f 2074 6172 2e67   -> file / tar.g
+00020290: 7a0a 2020 2020 2020 2020 6361 7365 3a20  z.        case: 
+000202a0: 3020 2d20 6b65 6570 2074 6865 2063 6173  0 - keep the cas
+000202b0: 652c 2031 202d 2074 7261 6e73 666f 726d  e, 1 - transform
+000202c0: 2074 6865 2073 7472 696e 6720 696e 746f   the string into
+000202d0: 206c 6f77 6572 6361 7365 2028 6465 6661   lowercase (defa
+000202e0: 756c 7429 2c0a 2020 2020 2020 2020 2020  ult),.          
+000202f0: 2020 3220 2d20 7472 616e 7366 6f72 6d20    2 - transform 
+00020300: 7468 6520 7374 7269 6e67 2069 6e74 6f20  the string into 
+00020310: 7570 7065 7263 6173 650a 0a20 2020 2049  uppercase..    I
+00020320: 6620 7468 6572 6520 6973 206e 6f20 646f  f there is no do
+00020330: 7420 7072 6573 656e 742c 2065 7874 656e  t present, exten
+00020340: 7369 6f6e 2063 6865 636b 7320 7769 6c6c  sion checks will
+00020350: 2062 6520 646f 6e65 2061 6761 696e 7374   be done against
+00020360: 2065 6d70 7479 0a20 2020 2073 7472 696e   empty.    strin
+00020370: 6720 616e 6420 6669 6c65 6e61 6d65 2063  g and filename c
+00020380: 6865 636b 7320 6167 6169 6e73 7420 7768  hecks against wh
+00020390: 6f6c 6520 7661 6c75 652e 0a0a 2020 2020  ole value...    
+000203a0: 4578 616d 706c 6573 3a0a 2020 2020 2020  Examples:.      
+000203b0: 2020 4368 6563 6b20 6966 2066 696c 6520    Check if file 
+000203c0: 6861 7320 6120 7064 6620 6578 7465 6e73  has a pdf extens
+000203d0: 696f 6e20 2863 6173 6520 696e 7365 6e73  ion (case insens
+000203e0: 6974 6976 6529 3a0a 0a20 2020 2020 2020  itive):..       
+000203f0: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
+00020400: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
+00020410: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00020420: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
+00020430: 494c 4528 6578 7465 6e73 696f 6e3d 2770  ILE(extension='p
+00020440: 6466 2729 290a 0a20 2020 2020 2020 2043  df'))..        C
+00020450: 6865 636b 2069 6620 6669 6c65 2069 7320  heck if file is 
+00020460: 6361 6c6c 6564 2027 7468 756d 626e 6169  called 'thumbnai
+00020470: 6c27 2061 6e64 2068 6173 2061 206a 7067  l' and has a jpg
+00020480: 206f 7220 706e 6720 6578 7465 6e73 696f   or png extensio
+00020490: 6e0a 2020 2020 2020 2020 2863 6173 6520  n.        (case 
+000204a0: 696e 7365 6e73 6974 6976 6529 3a0a 0a20  insensitive):.. 
+000204b0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+000204c0: 7065 3d27 6669 6c65 272c 205f 6e61 6d65  pe='file', _name
+000204d0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
+000204e0: 2020 2020 2020 2020 2072 6571 7569 7265           require
+000204f0: 733d 4953 5f46 494c 4528 6669 6c65 6e61  s=IS_FILE(filena
+00020500: 6d65 3d27 7468 756d 626e 6169 6c27 2c0a  me='thumbnail',.
+00020510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020520: 6578 7465 6e73 696f 6e3d 5b27 6a70 6727  extension=['jpg'
+00020530: 2c20 2770 6e67 275d 2929 0a0a 2020 2020  , 'png']))..    
+00020540: 2020 2020 4368 6563 6b20 6966 2066 696c      Check if fil
+00020550: 6520 6861 7320 6120 7461 722e 677a 2065  e has a tar.gz e
+00020560: 7874 656e 7369 6f6e 2061 6e64 206e 616d  xtension and nam
+00020570: 6520 7374 6172 7469 6e67 2077 6974 6820  e starting with 
+00020580: 6261 636b 7570 3a0a 0a20 2020 2020 2020  backup:..       
+00020590: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
+000205a0: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
+000205b0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+000205c0: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
+000205d0: 494c 4528 6669 6c65 6e61 6d65 3d72 652e  ILE(filename=re.
+000205e0: 636f 6d70 696c 6528 2762 6163 6b75 702e  compile('backup.
+000205f0: 2a27 292c 0a20 2020 2020 2020 2020 2020  *'),.           
+00020600: 2020 2020 2065 7874 656e 7369 6f6e 3d27       extension='
+00020610: 7461 722e 677a 272c 206c 6173 7464 6f74  tar.gz', lastdot
+00020620: 3d46 616c 7365 2929 0a0a 2020 2020 2020  =False))..      
+00020630: 2020 4368 6563 6b20 6966 2066 696c 6520    Check if file 
+00020640: 6861 7320 6e6f 2065 7874 656e 7369 6f6e  has no extension
+00020650: 2061 6e64 206e 616d 6520 6d61 7463 6869   and name matchi
+00020660: 6e67 2052 4541 444d 450a 2020 2020 2020  ng README.      
+00020670: 2020 2863 6173 6520 7365 6e73 6974 6976    (case sensitiv
+00020680: 6529 3a0a 0a20 2020 2020 2020 2020 2020  e):..           
+00020690: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
+000206a0: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
+000206b0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+000206c0: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
+000206d0: 494c 4528 6669 6c65 6e61 6d65 3d27 5245  ILE(filename='RE
+000206e0: 4144 4d45 272c 0a20 2020 2020 2020 2020  ADME',.         
+000206f0: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
+00020700: 3d27 272c 2063 6173 653d 3029 0a0a 2020  ='', case=0)..  
+00020710: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
+00020720: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+00020730: 2073 656c 662c 0a20 2020 2020 2020 2066   self,.        f
+00020740: 696c 656e 616d 653d 4e6f 6e65 2c0a 2020  ilename=None,.  
+00020750: 2020 2020 2020 6578 7465 6e73 696f 6e3d        extension=
+00020760: 4e6f 6e65 2c0a 2020 2020 2020 2020 6c61  None,.        la
+00020770: 7374 646f 743d 5472 7565 2c0a 2020 2020  stdot=True,.    
+00020780: 2020 2020 6361 7365 3d31 2c0a 2020 2020      case=1,.    
+00020790: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
+000207a0: 653d 2245 6e74 6572 2076 616c 6964 2066  e="Enter valid f
+000207b0: 696c 656e 616d 6522 2c0a 2020 2020 293a  ilename",.    ):
+000207c0: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
+000207d0: 6c65 6e61 6d65 203d 2066 696c 656e 616d  lename = filenam
+000207e0: 650a 2020 2020 2020 2020 7365 6c66 2e65  e.        self.e
+000207f0: 7874 656e 7369 6f6e 203d 2065 7874 656e  xtension = exten
+00020800: 7369 6f6e 0a20 2020 2020 2020 2073 656c  sion.        sel
+00020810: 662e 6c61 7374 646f 7420 3d20 6c61 7374  f.lastdot = last
+00020820: 646f 740a 2020 2020 2020 2020 7365 6c66  dot.        self
+00020830: 2e63 6173 6520 3d20 6361 7365 0a20 2020  .case = case.   
+00020840: 2020 2020 2073 656c 662e 6572 726f 725f       self.error_
+00020850: 6d65 7373 6167 6520 3d20 6572 726f 725f  message = error_
+00020860: 6d65 7373 6167 650a 0a20 2020 2064 6566  message..    def
+00020870: 206d 6174 6368 2873 656c 662c 2076 616c   match(self, val
+00020880: 7565 312c 2076 616c 7565 3229 3a0a 2020  ue1, value2):.  
+00020890: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000208a0: 6e63 6528 7661 6c75 6531 2c20 286c 6973  nce(value1, (lis
+000208b0: 742c 2074 7570 6c65 2929 3a0a 2020 2020  t, tuple)):.    
+000208c0: 2020 2020 2020 2020 666f 7220 7620 696e          for v in
+000208d0: 2076 616c 7565 313a 0a20 2020 2020 2020   value1:.       
+000208e0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000208f0: 2e6d 6174 6368 2876 2c20 7661 6c75 6532  .match(v, value2
+00020900: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00020910: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+00020920: 7565 0a20 2020 2020 2020 2020 2020 2072  ue.            r
+00020930: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
+00020940: 2020 2020 656c 6966 2063 616c 6c61 626c      elif callabl
+00020950: 6528 6765 7461 7474 7228 7661 6c75 6531  e(getattr(value1
+00020960: 2c20 226d 6174 6368 222c 204e 6f6e 6529  , "match", None)
+00020970: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00020980: 6574 7572 6e20 7661 6c75 6531 2e6d 6174  eturn value1.mat
+00020990: 6368 2876 616c 7565 3229 0a20 2020 2020  ch(value2).     
+000209a0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+000209b0: 6365 2876 616c 7565 312c 2073 7472 293a  ce(value1, str):
+000209c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000209d0: 7572 6e20 7661 6c75 6531 203d 3d20 7661  urn value1 == va
+000209e0: 6c75 6532 0a0a 2020 2020 6465 6620 7661  lue2..    def va
+000209f0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+00020a00: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+00020a10: 6e65 293a 0a20 2020 2020 2020 2074 7279  ne):.        try
+00020a20: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00020a30: 7269 6e67 203d 2076 616c 7565 2e66 696c  ring = value.fil
+00020a40: 656e 616d 650a 2020 2020 2020 2020 6578  ename.        ex
+00020a50: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+00020a60: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+00020a70: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
+00020a80: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
+00020a90: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
+00020aa0: 2020 2020 2069 6620 7365 6c66 2e63 6173       if self.cas
+00020ab0: 6520 3d3d 2031 3a0a 2020 2020 2020 2020  e == 1:.        
+00020ac0: 2020 2020 7374 7269 6e67 203d 2073 7472      string = str
+00020ad0: 696e 672e 6c6f 7765 7228 290a 2020 2020  ing.lower().    
+00020ae0: 2020 2020 656c 6966 2073 656c 662e 6361      elif self.ca
+00020af0: 7365 203d 3d20 323a 0a20 2020 2020 2020  se == 2:.       
+00020b00: 2020 2020 2073 7472 696e 6720 3d20 7374       string = st
+00020b10: 7269 6e67 2e75 7070 6572 2829 0a20 2020  ring.upper().   
+00020b20: 2020 2020 2069 6620 7365 6c66 2e6c 6173       if self.las
+00020b30: 7464 6f74 3a0a 2020 2020 2020 2020 2020  tdot:.          
+00020b40: 2020 646f 7420 3d20 7374 7269 6e67 2e72    dot = string.r
+00020b50: 6669 6e64 2822 2e22 290a 2020 2020 2020  find(".").      
+00020b60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00020b70: 2020 2020 646f 7420 3d20 7374 7269 6e67      dot = string
+00020b80: 2e66 696e 6428 222e 2229 0a20 2020 2020  .find(".").     
+00020b90: 2020 2069 6620 646f 7420 3d3d 202d 313a     if dot == -1:
+00020ba0: 0a20 2020 2020 2020 2020 2020 2064 6f74  .            dot
+00020bb0: 203d 206c 656e 2873 7472 696e 6729 0a20   = len(string). 
+00020bc0: 2020 2020 2020 2069 6620 7365 6c66 2e66         if self.f
+00020bd0: 696c 656e 616d 6520 616e 6420 6e6f 7420  ilename and not 
+00020be0: 7365 6c66 2e6d 6174 6368 2873 656c 662e  self.match(self.
+00020bf0: 6669 6c65 6e61 6d65 2c20 7374 7269 6e67  filename, string
+00020c00: 5b3a 646f 745d 293a 0a20 2020 2020 2020  [:dot]):.       
+00020c10: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00020c20: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
+00020c30: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
+00020c40: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
+00020c50: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+00020c60: 662e 6578 7465 6e73 696f 6e20 616e 6420  f.extension and 
+00020c70: 6e6f 7420 7365 6c66 2e6d 6174 6368 2873  not self.match(s
+00020c80: 656c 662e 6578 7465 6e73 696f 6e2c 2073  elf.extension, s
+00020c90: 7472 696e 675b 646f 7420 2b20 3120 3a5d  tring[dot + 1 :]
+00020ca0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00020cb0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00020cc0: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+00020cd0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00020ce0: 6d65 7373 6167 6529 290a 2020 2020 2020  message)).      
+00020cf0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00020d00: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+00020d10: 0a0a 0a63 6c61 7373 2049 535f 5550 4c4f  ...class IS_UPLO
+00020d20: 4144 5f46 494c 454e 414d 4528 5661 6c69  AD_FILENAME(Vali
+00020d30: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
+00020d40: 2020 2020 466f 7220 6e65 7720 6170 706c      For new appl
+00020d50: 6963 6174 696f 6e73 2c20 7573 6520 4953  ications, use IS
+00020d60: 5f46 494c 4528 292e 0a0a 2020 2020 4368  _FILE()...    Ch
+00020d70: 6563 6b73 2069 6620 6e61 6d65 2061 6e64  ecks if name and
+00020d80: 2065 7874 656e 7369 6f6e 206f 6620 6669   extension of fi
+00020d90: 6c65 2075 706c 6f61 6465 6420 7468 726f  le uploaded thro
+00020da0: 7567 6820 6669 6c65 2069 6e70 7574 206d  ugh file input m
+00020db0: 6174 6368 6573 0a20 2020 2067 6976 656e  atches.    given
+00020dc0: 2063 7269 7465 7269 612e 0a0a 2020 2020   criteria...    
+00020dd0: 446f 6573 202a 6e6f 742a 2065 6e73 7572  Does *not* ensur
+00020de0: 6520 7468 6520 6669 6c65 2074 7970 6520  e the file type 
+00020df0: 696e 2061 6e79 2077 6179 2e20 5265 7475  in any way. Retu
+00020e00: 726e 7320 7661 6c69 6461 7469 6f6e 2066  rns validation f
+00020e10: 6169 6c75 7265 0a20 2020 2069 6620 6e6f  ailure.    if no
+00020e20: 2064 6174 6120 7761 7320 7570 6c6f 6164   data was upload
+00020e30: 6564 2e0a 0a20 2020 2041 7267 733a 0a20  ed...    Args:. 
+00020e40: 2020 2020 2020 2066 696c 656e 616d 653a         filename:
+00020e50: 2066 696c 656e 616d 6520 2862 6566 6f72   filename (befor
+00020e60: 6520 646f 7429 2072 6567 6578 0a20 2020  e dot) regex.   
+00020e70: 2020 2020 2065 7874 656e 7369 6f6e 3a20       extension: 
+00020e80: 6578 7465 6e73 696f 6e20 2861 6674 6572  extension (after
+00020e90: 2064 6f74 2920 7265 6765 780a 2020 2020   dot) regex.    
+00020ea0: 2020 2020 6c61 7374 646f 743a 2077 6869      lastdot: whi
+00020eb0: 6368 2064 6f74 2073 686f 756c 6420 6265  ch dot should be
+00020ec0: 2075 7365 6420 6173 2061 2066 696c 656e   used as a filen
+00020ed0: 616d 6520 2f20 6578 7465 6e73 696f 6e20  ame / extension 
+00020ee0: 7365 7061 7261 746f 723a 0a20 2020 2020  separator:.     
+00020ef0: 2020 2020 2020 2054 7275 6520 6d65 616e         True mean
+00020f00: 7320 6c61 7374 2064 6f74 2c20 6567 2e20  s last dot, eg. 
+00020f10: 6669 6c65 2e70 6e67 202d 3e20 6669 6c65  file.png -> file
+00020f20: 202f 2070 6e67 0a20 2020 2020 2020 2020   / png.         
+00020f30: 2020 2046 616c 7365 206d 6561 6e73 2066     False means f
+00020f40: 6972 7374 2064 6f74 2c20 6567 2e20 6669  irst dot, eg. fi
+00020f50: 6c65 2e74 6172 2e67 7a20 2d3e 2066 696c  le.tar.gz -> fil
+00020f60: 6520 2f20 7461 722e 677a 0a20 2020 2020  e / tar.gz.     
+00020f70: 2020 2063 6173 653a 2030 202d 206b 6565     case: 0 - kee
+00020f80: 7020 7468 6520 6361 7365 2c20 3120 2d20  p the case, 1 - 
+00020f90: 7472 616e 7366 6f72 6d20 7468 6520 7374  transform the st
+00020fa0: 7269 6e67 2069 6e74 6f20 6c6f 7765 7263  ring into lowerc
+00020fb0: 6173 6520 2864 6566 6175 6c74 292c 0a20  ase (default),. 
+00020fc0: 2020 2020 2020 2020 2020 2032 202d 2074             2 - t
+00020fd0: 7261 6e73 666f 726d 2074 6865 2073 7472  ransform the str
+00020fe0: 696e 6720 696e 746f 2075 7070 6572 6361  ing into upperca
+00020ff0: 7365 0a0a 2020 2020 4966 2074 6865 7265  se..    If there
+00021000: 2069 7320 6e6f 2064 6f74 2070 7265 7365   is no dot prese
+00021010: 6e74 2c20 6578 7465 6e73 696f 6e20 6368  nt, extension ch
+00021020: 6563 6b73 2077 696c 6c20 6265 2064 6f6e  ecks will be don
+00021030: 6520 6167 6169 6e73 7420 656d 7074 790a  e against empty.
+00021040: 2020 2020 7374 7269 6e67 2061 6e64 2066      string and f
+00021050: 696c 656e 616d 6520 6368 6563 6b73 2061  ilename checks a
+00021060: 6761 696e 7374 2077 686f 6c65 2076 616c  gainst whole val
+00021070: 7565 2e0a 0a20 2020 2045 7861 6d70 6c65  ue...    Example
+00021080: 733a 0a20 2020 2020 2020 2043 6865 636b  s:.        Check
+00021090: 2069 6620 6669 6c65 2068 6173 2061 2070   if file has a p
+000210a0: 6466 2065 7874 656e 7369 6f6e 2028 6361  df extension (ca
+000210b0: 7365 2069 6e73 656e 7369 7469 7665 293a  se insensitive):
+000210c0: 0a0a 2020 2020 2020 2020 494e 5055 5428  ..        INPUT(
+000210d0: 5f74 7970 653d 2766 696c 6527 2c20 5f6e  _type='file', _n
+000210e0: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
+000210f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00021100: 6972 6573 3d49 535f 5550 4c4f 4144 5f46  ires=IS_UPLOAD_F
+00021110: 494c 454e 414d 4528 6578 7465 6e73 696f  ILENAME(extensio
+00021120: 6e3d 2770 6466 2729 290a 0a20 2020 2020  n='pdf'))..     
+00021130: 2020 2043 6865 636b 2069 6620 6669 6c65     Check if file
+00021140: 2068 6173 2061 2074 6172 2e67 7a20 6578   has a tar.gz ex
+00021150: 7465 6e73 696f 6e20 616e 6420 6e61 6d65  tension and name
+00021160: 2073 7461 7274 696e 6720 7769 7468 2062   starting with b
+00021170: 6163 6b75 703a 0a0a 2020 2020 2020 2020  ackup:..        
+00021180: 494e 5055 5428 5f74 7970 653d 2766 696c  INPUT(_type='fil
+00021190: 6527 2c20 5f6e 616d 653d 276e 616d 6527  e', _name='name'
+000211a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000211b0: 2020 7265 7175 6972 6573 3d49 535f 5550    requires=IS_UP
+000211c0: 4c4f 4144 5f46 494c 454e 414d 4528 6669  LOAD_FILENAME(fi
+000211d0: 6c65 6e61 6d65 3d27 6261 636b 7570 2e2a  lename='backup.*
+000211e0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+000211f0: 2020 2065 7874 656e 7369 6f6e 3d27 7461     extension='ta
+00021200: 722e 677a 272c 206c 6173 7464 6f74 3d46  r.gz', lastdot=F
+00021210: 616c 7365 2929 0a0a 2020 2020 2020 2020  alse))..        
+00021220: 4368 6563 6b20 6966 2066 696c 6520 6861  Check if file ha
+00021230: 7320 6e6f 2065 7874 656e 7369 6f6e 2061  s no extension a
+00021240: 6e64 206e 616d 6520 6d61 7463 6869 6e67  nd name matching
+00021250: 2052 4541 444d 450a 2020 2020 2020 2020   README.        
+00021260: 2863 6173 6520 7365 6e73 6974 6976 6529  (case sensitive)
+00021270: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+00021280: 4e50 5554 285f 7479 7065 3d27 6669 6c65  NPUT(_type='file
+00021290: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+000212a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000212b0: 2072 6571 7569 7265 733d 4953 5f55 504c   requires=IS_UPL
+000212c0: 4f41 445f 4649 4c45 4e41 4d45 2866 696c  OAD_FILENAME(fil
+000212d0: 656e 616d 653d 275e 5245 4144 4d45 2427  ename='^README$'
+000212e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000212f0: 2020 6578 7465 6e73 696f 6e3d 275e 2427    extension='^$'
+00021300: 2c20 6361 7365 3d30 290a 0a20 2020 2022  , case=0)..    "
+00021310: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00021320: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00021330: 6c66 2c0a 2020 2020 2020 2020 6669 6c65  lf,.        file
+00021340: 6e61 6d65 3d4e 6f6e 652c 0a20 2020 2020  name=None,.     
+00021350: 2020 2065 7874 656e 7369 6f6e 3d4e 6f6e     extension=Non
+00021360: 652c 0a20 2020 2020 2020 206c 6173 7464  e,.        lastd
+00021370: 6f74 3d54 7275 652c 0a20 2020 2020 2020  ot=True,.       
+00021380: 2063 6173 653d 312c 0a20 2020 2020 2020   case=1,.       
+00021390: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+000213a0: 456e 7465 7220 7661 6c69 6420 6669 6c65  Enter valid file
+000213b0: 6e61 6d65 222c 0a20 2020 2029 3a0a 2020  name",.    ):.  
+000213c0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000213d0: 6e63 6528 6669 6c65 6e61 6d65 2c20 7374  nce(filename, st
+000213e0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+000213f0: 6669 6c65 6e61 6d65 203d 2072 652e 636f  filename = re.co
+00021400: 6d70 696c 6528 6669 6c65 6e61 6d65 290a  mpile(filename).
+00021410: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00021420: 7461 6e63 6528 6578 7465 6e73 696f 6e2c  tance(extension,
+00021430: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
+00021440: 2020 2065 7874 656e 7369 6f6e 203d 2072     extension = r
+00021450: 652e 636f 6d70 696c 6528 6578 7465 6e73  e.compile(extens
+00021460: 696f 6e29 0a20 2020 2020 2020 2073 656c  ion).        sel
+00021470: 662e 6669 6c65 6e61 6d65 203d 2066 696c  f.filename = fil
+00021480: 656e 616d 650a 2020 2020 2020 2020 7365  ename.        se
+00021490: 6c66 2e65 7874 656e 7369 6f6e 203d 2065  lf.extension = e
+000214a0: 7874 656e 7369 6f6e 0a20 2020 2020 2020  xtension.       
+000214b0: 2073 656c 662e 6c61 7374 646f 7420 3d20   self.lastdot = 
+000214c0: 6c61 7374 646f 740a 2020 2020 2020 2020  lastdot.        
+000214d0: 7365 6c66 2e63 6173 6520 3d20 6361 7365  self.case = case
+000214e0: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
+000214f0: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
+00021500: 726f 725f 6d65 7373 6167 650a 0a20 2020  ror_message..   
+00021510: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
+00021520: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
+00021530: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+00021540: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00021550: 2020 2020 2073 7472 696e 6720 3d20 7661       string = va
+00021560: 6c75 652e 6669 6c65 6e61 6d65 0a20 2020  lue.filename.   
+00021570: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+00021580: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00021590: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+000215a0: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+000215b0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+000215c0: 6529 290a 2020 2020 2020 2020 6966 2073  e)).        if s
+000215d0: 656c 662e 6361 7365 203d 3d20 313a 0a20  elf.case == 1:. 
+000215e0: 2020 2020 2020 2020 2020 2073 7472 696e             strin
+000215f0: 6720 3d20 7374 7269 6e67 2e6c 6f77 6572  g = string.lower
+00021600: 2829 0a20 2020 2020 2020 2065 6c69 6620  ().        elif 
+00021610: 7365 6c66 2e63 6173 6520 3d3d 2032 3a0a  self.case == 2:.
+00021620: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00021630: 6e67 203d 2073 7472 696e 672e 7570 7065  ng = string.uppe
+00021640: 7228 290a 2020 2020 2020 2020 6966 2073  r().        if s
+00021650: 656c 662e 6c61 7374 646f 743a 0a20 2020  elf.lastdot:.   
+00021660: 2020 2020 2020 2020 2064 6f74 203d 2073           dot = s
+00021670: 7472 696e 672e 7266 696e 6428 222e 2229  tring.rfind(".")
+00021680: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00021690: 2020 2020 2020 2020 2020 2064 6f74 203d             dot =
+000216a0: 2073 7472 696e 672e 6669 6e64 2822 2e22   string.find("."
+000216b0: 290a 2020 2020 2020 2020 6966 2064 6f74  ).        if dot
+000216c0: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
+000216d0: 2020 2020 646f 7420 3d20 6c65 6e28 7374      dot = len(st
+000216e0: 7269 6e67 290a 2020 2020 2020 2020 6966  ring).        if
+000216f0: 2073 656c 662e 6669 6c65 6e61 6d65 2061   self.filename a
+00021700: 6e64 206e 6f74 2073 656c 662e 6669 6c65  nd not self.file
+00021710: 6e61 6d65 2e6d 6174 6368 2873 7472 696e  name.match(strin
+00021720: 675b 3a64 6f74 5d29 3a0a 2020 2020 2020  g[:dot]):.      
+00021730: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+00021740: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
+00021750: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+00021760: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
+00021770: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
+00021780: 6c66 2e65 7874 656e 7369 6f6e 2061 6e64  lf.extension and
+00021790: 206e 6f74 2073 656c 662e 6578 7465 6e73   not self.extens
+000217a0: 696f 6e2e 6d61 7463 6828 7374 7269 6e67  ion.match(string
+000217b0: 5b64 6f74 202b 2031 203a 5d29 3a0a 2020  [dot + 1 :]):.  
+000217c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000217d0: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+000217e0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+000217f0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+00021800: 6765 2929 0a20 2020 2020 2020 2065 6c73  ge)).        els
+00021810: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00021820: 6574 7572 6e20 7661 6c75 650a 0a0a 636c  eturn value...cl
+00021830: 6173 7320 4953 5f49 5056 3428 5661 6c69  ass IS_IPV4(Vali
+00021840: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
+00021850: 2020 2020 4368 6563 6b73 2069 6620 6669      Checks if fi
+00021860: 656c 6427 7320 7661 6c75 6520 6973 2061  eld's value is a
+00021870: 6e20 4950 2076 6572 7369 6f6e 2034 2061  n IP version 4 a
+00021880: 6464 7265 7373 2069 6e20 6465 6369 6d61  ddress in decima
+00021890: 6c20 666f 726d 2e20 4361 6e0a 2020 2020  l form. Can.    
+000218a0: 6265 2073 6574 2074 6f20 666f 7263 6520  be set to force 
+000218b0: 6164 6472 6573 7365 7320 6672 6f6d 2063  addresses from c
+000218c0: 6572 7461 696e 2072 616e 6765 2e0a 0a20  ertain range... 
+000218d0: 2020 2049 5076 3420 7265 6765 7820 7461     IPv4 regex ta
+000218e0: 6b65 6e20 6672 6f6d 3a20 6874 7470 3a2f  ken from: http:/
+000218f0: 2f72 6567 6578 6c69 622e 636f 6d2f 5245  /regexlib.com/RE
+00021900: 4465 7461 696c 732e 6173 7078 3f72 6567  Details.aspx?reg
+00021910: 6578 705f 6964 3d31 3431 310a 0a20 2020  exp_id=1411..   
+00021920: 2041 7267 733a 0a0a 2020 2020 2020 2020   Args:..        
+00021930: 6d69 6e69 703a 206c 6f77 6573 7420 616c  minip: lowest al
+00021940: 6c6f 7765 6420 6164 6472 6573 733b 2061  lowed address; a
+00021950: 6363 6570 7473 3a0a 0a20 2020 2020 2020  ccepts:..       
+00021960: 2020 2020 202d 2073 7472 2c20 6567 2e20       - str, eg. 
+00021970: 3139 322e 3136 382e 302e 310a 2020 2020  192.168.0.1.    
+00021980: 2020 2020 2020 2020 2d20 6c69 7374 206f          - list o
+00021990: 7220 7475 706c 6520 6f66 206f 6374 6574  r tuple of octet
+000219a0: 732c 2065 672e 205b 3139 322c 2031 3638  s, eg. [192, 168
+000219b0: 2c20 302c 2031 5d0a 2020 2020 2020 2020  , 0, 1].        
+000219c0: 6d61 7869 703a 2068 6967 6865 7374 2061  maxip: highest a
+000219d0: 6c6c 6f77 6564 2061 6464 7265 7373 3b20  llowed address; 
+000219e0: 7361 6d65 2061 7320 6162 6f76 650a 2020  same as above.  
+000219f0: 2020 2020 2020 696e 7665 7274 3a20 5472        invert: Tr
+00021a00: 7565 2074 6f20 616c 6c6f 7720 6164 6472  ue to allow addr
+00021a10: 6573 7365 7320 6f6e 6c79 2066 726f 6d20  esses only from 
+00021a20: 6f75 7473 6964 6520 6f66 2067 6976 656e  outside of given
+00021a30: 2072 616e 6765 3b20 6e6f 7465 0a20 2020   range; note.   
+00021a40: 2020 2020 2020 2020 2074 6861 7420 7261           that ra
+00021a50: 6e67 6520 626f 756e 6461 7269 6573 2061  nge boundaries a
+00021a60: 7265 206e 6f74 206d 6174 6368 6564 2074  re not matched t
+00021a70: 6869 7320 7761 790a 2020 2020 2020 2020  his way.        
+00021a80: 6973 5f6c 6f63 616c 686f 7374 3a20 6c6f  is_localhost: lo
+00021a90: 6361 6c68 6f73 7420 6164 6472 6573 7320  calhost address 
+00021aa0: 7472 6561 746d 656e 743a 0a0a 2020 2020  treatment:..    
+00021ab0: 2020 2020 2020 2020 2d20 4e6f 6e65 2028          - None (
+00021ac0: 6465 6661 756c 7429 3a20 696e 6469 6666  default): indiff
+00021ad0: 6572 656e 740a 2020 2020 2020 2020 2020  erent.          
+00021ae0: 2020 2d20 5472 7565 2028 656e 666f 7263    - True (enforc
+00021af0: 6529 3a20 7175 6572 7920 6164 6472 6573  e): query addres
+00021b00: 7320 6d75 7374 206d 6174 6368 206c 6f63  s must match loc
+00021b10: 616c 686f 7374 2061 6464 7265 7373 2028  alhost address (
+00021b20: 3132 372e 302e 302e 3129 0a20 2020 2020  127.0.0.1).     
+00021b30: 2020 2020 2020 202d 2046 616c 7365 2028         - False (
+00021b40: 666f 7262 6964 293a 2071 7565 7279 2061  forbid): query a
+00021b50: 6464 7265 7373 206d 7573 7420 6e6f 7420  ddress must not 
+00021b60: 6d61 7463 6820 6c6f 6361 6c68 6f73 7420  match localhost 
+00021b70: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
+00021b80: 6973 5f70 7269 7661 7465 3a20 7361 6d65  is_private: same
+00021b90: 2061 7320 6162 6f76 652c 2065 7863 6570   as above, excep
+00021ba0: 7420 7468 6174 2071 7565 7279 2061 6464  t that query add
+00021bb0: 7265 7373 2069 7320 6368 6563 6b65 6420  ress is checked 
+00021bc0: 6167 6169 6e73 740a 2020 2020 2020 2020  against.        
+00021bd0: 2020 2020 7477 6f20 6164 6472 6573 7320      two address 
+00021be0: 7261 6e67 6573 3a20 3137 322e 3136 2e30  ranges: 172.16.0
+00021bf0: 2e30 202d 2031 3732 2e33 312e 3235 352e  .0 - 172.31.255.
+00021c00: 3235 3520 616e 640a 2020 2020 2020 2020  255 and.        
+00021c10: 2020 2020 3139 322e 3136 382e 302e 3020      192.168.0.0 
+00021c20: 2d20 3139 322e 3136 382e 3235 352e 3235  - 192.168.255.25
+00021c30: 350a 2020 2020 2020 2020 6973 5f61 7574  5.        is_aut
+00021c40: 6f6d 6174 6963 3a20 7361 6d65 2061 7320  omatic: same as 
+00021c50: 6162 6f76 652c 2065 7863 6570 7420 7468  above, except th
+00021c60: 6174 2071 7565 7279 2061 6464 7265 7373  at query address
+00021c70: 2069 7320 6368 6563 6b65 6420 6167 6169   is checked agai
+00021c80: 6e73 740a 2020 2020 2020 2020 2020 2020  nst.            
+00021c90: 6f6e 6520 6164 6472 6573 7320 7261 6e67  one address rang
+00021ca0: 653a 2031 3639 2e32 3534 2e30 2e30 202d  e: 169.254.0.0 -
+00021cb0: 2031 3639 2e32 3534 2e32 3535 2e32 3535   169.254.255.255
+00021cc0: 0a0a 2020 2020 4d69 6e69 7020 616e 6420  ..    Minip and 
+00021cd0: 6d61 7869 7020 6d61 7920 616c 736f 2062  maxip may also b
+00021ce0: 6520 6c69 7374 7320 6f72 2074 7570 6c65  e lists or tuple
+00021cf0: 7320 6f66 2061 6464 7265 7373 6573 2069  s of addresses i
+00021d00: 6e20 616c 6c20 6162 6f76 650a 2020 2020  n all above.    
+00021d10: 666f 726d 7320 2873 7472 2c20 696e 742c  forms (str, int,
+00021d20: 206c 6973 7420 2f20 7475 706c 6529 2c20   list / tuple), 
+00021d30: 616c 6c6f 7769 6e67 2073 6574 7570 206f  allowing setup o
+00021d40: 6620 6d75 6c74 6970 6c65 2061 6464 7265  f multiple addre
+00021d50: 7373 2072 616e 6765 733a 3a0a 0a20 2020  ss ranges::..   
+00021d60: 2020 2020 206d 696e 6970 203d 2028 6d69       minip = (mi
+00021d70: 6e69 7031 2c20 6d69 6e69 7032 2c20 2e2e  nip1, minip2, ..
+00021d80: 2e20 6d69 6e69 704e 290a 2020 2020 2020  . minipN).      
+00021d90: 2020 2020 2020 2020 2020 2020 207c 2020               |  
+00021da0: 2020 2020 207c 2020 2020 2020 2020 2020       |          
+00021db0: 207c 0a20 2020 2020 2020 2020 2020 2020   |.             
+00021dc0: 2020 2020 2020 7c20 2020 2020 2020 7c20        |       | 
+00021dd0: 2020 2020 2020 2020 2020 7c0a 2020 2020            |.    
+00021de0: 2020 2020 6d61 7869 7020 3d20 286d 6178      maxip = (max
+00021df0: 6970 312c 206d 6178 6970 322c 202e 2e2e  ip1, maxip2, ...
+00021e00: 206d 6178 6970 4e29 0a0a 2020 2020 4c6f   maxipN)..    Lo
+00021e10: 6e67 6572 2069 7465 7261 626c 6520 7769  nger iterable wi
+00021e20: 6c6c 2062 6520 7472 756e 6361 7465 6420  ll be truncated 
+00021e30: 746f 206d 6174 6368 206c 656e 6774 6820  to match length 
+00021e40: 6f66 2073 686f 7274 6572 206f 6e65 2e0a  of shorter one..
+00021e50: 0a20 2020 2045 7861 6d70 6c65 733a 0a20  .    Examples:. 
+00021e60: 2020 2020 2020 2043 6865 636b 2066 6f72         Check for
+00021e70: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
+00021e80: 6573 733a 0a0a 2020 2020 2020 2020 2020  ess:..          
+00021e90: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
+00021ea0: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
+00021eb0: 6527 2c20 7265 7175 6972 6573 3d49 535f  e', requires=IS_
+00021ec0: 4950 5634 2829 290a 0a20 2020 2020 2020  IPV4())..       
+00021ed0: 2043 6865 636b 2066 6f72 2076 616c 6964   Check for valid
+00021ee0: 2049 5076 3420 6164 6472 6573 7320 6265   IPv4 address be
+00021ef0: 6c6f 6e67 696e 6720 746f 2073 7065 6369  longing to speci
+00021f00: 6669 6320 7261 6e67 653a 0a0a 2020 2020  fic range:..    
+00021f10: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00021f20: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00021f30: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
+00021f40: 2020 2020 2020 2020 2020 7265 7175 6972            requir
+00021f50: 6573 3d49 535f 4950 5634 286d 696e 6970  es=IS_IPV4(minip
+00021f60: 3d27 3130 302e 3230 302e 302e 3027 2c20  ='100.200.0.0', 
+00021f70: 6d61 7869 703d 2731 3030 2e32 3030 2e32  maxip='100.200.2
+00021f80: 3535 2e32 3535 2729 290a 0a20 2020 2020  55.255'))..     
+00021f90: 2020 2043 6865 636b 2066 6f72 2076 616c     Check for val
+00021fa0: 6964 2049 5076 3420 6164 6472 6573 7320  id IPv4 address 
+00021fb0: 6265 6c6f 6e67 696e 6720 746f 2065 6974  belonging to eit
+00021fc0: 6865 7220 3130 302e 3131 302e 302e 3020  her 100.110.0.0 
+00021fd0: 2d0a 2020 2020 2020 2020 3130 302e 3131  -.        100.11
+00021fe0: 302e 3235 352e 3235 3520 6f72 2032 3030  0.255.255 or 200
+00021ff0: 2e35 302e 302e 3020 2d20 3230 302e 3530  .50.0.0 - 200.50
+00022000: 2e30 2e32 3535 2061 6464 7265 7373 2072  .0.255 address r
+00022010: 616e 6765 3a0a 0a20 2020 2020 2020 2020  ange:..         
+00022020: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+00022030: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
+00022040: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
+00022050: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
+00022060: 5f49 5056 3428 6d69 6e69 703d 2827 3130  _IPV4(minip=('10
+00022070: 302e 3131 302e 302e 3027 2c20 2732 3030  0.110.0.0', '200
+00022080: 2e35 302e 302e 3027 292c 0a20 2020 2020  .50.0.0'),.     
+00022090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000220a0: 2020 2020 2020 2020 6d61 7869 703d 2827          maxip=('
+000220b0: 3130 302e 3131 302e 3235 352e 3235 3527  100.110.255.255'
+000220c0: 2c20 2732 3030 2e35 302e 302e 3235 3527  , '200.50.0.255'
+000220d0: 2929 290a 0a20 2020 2020 2020 2043 6865  )))..        Che
+000220e0: 636b 2066 6f72 2076 616c 6964 2049 5076  ck for valid IPv
+000220f0: 3420 6164 6472 6573 7320 6265 6c6f 6e67  4 address belong
+00022100: 696e 6720 746f 2070 7269 7661 7465 2061  ing to private a
+00022110: 6464 7265 7373 2073 7061 6365 3a0a 0a20  ddress space:.. 
+00022120: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
+00022130: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
+00022140: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
+00022150: 7569 7265 733d 4953 5f49 5056 3428 6973  uires=IS_IPV4(is
+00022160: 5f70 7269 7661 7465 3d54 7275 6529 290a  _private=True)).
+00022170: 0a20 2020 2020 2020 2043 6865 636b 2066  .        Check f
+00022180: 6f72 2076 616c 6964 2049 5076 3420 6164  or valid IPv4 ad
+00022190: 6472 6573 7320 7468 6174 2069 7320 6e6f  dress that is no
+000221a0: 7420 6120 6c6f 6361 6c68 6f73 7420 6164  t a localhost ad
+000221b0: 6472 6573 733a 0a0a 2020 2020 2020 2020  dress:..        
+000221c0: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+000221d0: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
+000221e0: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
+000221f0: 535f 4950 5634 2869 735f 6c6f 6361 6c68  S_IPV4(is_localh
+00022200: 6f73 743d 4661 6c73 6529 290a 0a20 2020  ost=False))..   
+00022210: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00022220: 4950 5634 2829 2827 312e 322e 332e 3427  IPV4()('1.2.3.4'
+00022230: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00022240: 312e 322e 332e 3427 2c20 4e6f 6e65 290a  1.2.3.4', None).
+00022250: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00022260: 4953 5f49 5056 3428 2928 2732 3535 2e32  IS_IPV4()('255.2
+00022270: 3535 2e32 3535 2e32 3535 2729 0a20 2020  55.255.255').   
+00022280: 2020 2020 2020 2020 2028 2732 3535 2e32           ('255.2
+00022290: 3535 2e32 3535 2e32 3535 272c 204e 6f6e  55.255.255', Non
+000222a0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+000222b0: 3e3e 2049 535f 4950 5634 2829 2827 312e  >> IS_IPV4()('1.
+000222c0: 322e 332e 3420 2729 0a20 2020 2020 2020  2.3.4 ').       
+000222d0: 2020 2020 2028 2731 2e32 2e33 2e34 2027       ('1.2.3.4 '
+000222e0: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
+000222f0: 5076 3420 6164 6472 6573 7327 290a 2020  Pv4 address').  
+00022300: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00022310: 5f49 5056 3428 2928 2731 2e32 2e33 2e34  _IPV4()('1.2.3.4
+00022320: 2e35 2729 0a20 2020 2020 2020 2020 2020  .5').           
+00022330: 2028 2731 2e32 2e33 2e34 2e35 272c 2027   ('1.2.3.4.5', '
+00022340: 656e 7465 7220 7661 6c69 6420 4950 7634  enter valid IPv4
+00022350: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
 00022360: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00022370: 5634 286d 696e 6970 3d27 312e 322e 332e  V4(minip='1.2.3.
-00022380: 3527 2c20 6d61 7869 703d 2731 2e32 2e33  5', maxip='1.2.3
-00022390: 2e39 272c 2065 7272 6f72 5f6d 6573 7361  .9', error_messa
-000223a0: 6765 3d27 4261 6420 6970 2729 2827 312e  ge='Bad ip')('1.
-000223b0: 322e 332e 3427 290a 2020 2020 2020 2020  2.3.4').        
-000223c0: 2020 2020 2827 312e 322e 332e 3427 2c20      ('1.2.3.4', 
-000223d0: 2762 6164 2069 7027 290a 2020 2020 2020  'bad ip').      
-000223e0: 2020 2020 2020 3e3e 3e20 4953 5f49 5056        >>> IS_IPV
-000223f0: 3428 6d61 7869 703d 2731 2e32 2e33 2e34  4(maxip='1.2.3.4
-00022400: 272c 2069 6e76 6572 743d 5472 7565 2928  ', invert=True)(
-00022410: 2731 3237 2e30 2e30 2e31 2729 0a20 2020  '127.0.0.1').   
-00022420: 2020 2020 2020 2020 2028 2731 3237 2e30           ('127.0
-00022430: 2e30 2e31 272c 204e 6f6e 6529 0a20 2020  .0.1', None).   
-00022440: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00022450: 4950 5634 286d 6178 6970 3d27 312e 322e  IPV4(maxip='1.2.
-00022460: 332e 3427 2c20 696e 7665 7274 3d54 7275  3.4', invert=Tru
-00022470: 6529 2827 312e 322e 332e 3427 290a 2020  e)('1.2.3.4').  
-00022480: 2020 2020 2020 2020 2020 2827 312e 322e            ('1.2.
-00022490: 332e 3427 2c20 2765 6e74 6572 2076 616c  3.4', 'enter val
-000224a0: 6964 2049 5076 3420 6164 6472 6573 7327  id IPv4 address'
-000224b0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-000224c0: 3e20 4953 5f49 5056 3428 6973 5f6c 6f63  > IS_IPV4(is_loc
-000224d0: 616c 686f 7374 3d54 7275 6529 2827 3132  alhost=True)('12
-000224e0: 372e 302e 302e 3127 290a 2020 2020 2020  7.0.0.1').      
-000224f0: 2020 2020 2020 2827 3132 372e 302e 302e        ('127.0.0.
-00022500: 3127 2c20 4e6f 6e65 290a 2020 2020 2020  1', None).      
-00022510: 2020 2020 2020 3e3e 3e20 4953 5f49 5056        >>> IS_IPV
-00022520: 3428 6973 5f6c 6f63 616c 686f 7374 3d54  4(is_localhost=T
-00022530: 7275 6529 2827 312e 322e 332e 3427 290a  rue)('1.2.3.4').
-00022540: 2020 2020 2020 2020 2020 2020 2827 312e              ('1.
-00022550: 322e 332e 3427 2c20 2765 6e74 6572 2076  2.3.4', 'enter v
-00022560: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
-00022570: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-00022580: 3e3e 3e20 4953 5f49 5056 3428 6973 5f6c  >>> IS_IPV4(is_l
-00022590: 6f63 616c 686f 7374 3d46 616c 7365 2928  ocalhost=False)(
-000225a0: 2731 3237 2e30 2e30 2e31 2729 0a20 2020  '127.0.0.1').   
-000225b0: 2020 2020 2020 2020 2028 2731 3237 2e30           ('127.0
-000225c0: 2e30 2e31 272c 2027 656e 7465 7220 7661  .0.1', 'enter va
-000225d0: 6c69 6420 4950 7634 2061 6464 7265 7373  lid IPv4 address
-000225e0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-000225f0: 3e3e 2049 535f 4950 5634 286d 6178 6970  >> IS_IPV4(maxip
-00022600: 3d27 3130 302e 302e 302e 3027 2c20 6973  ='100.0.0.0', is
-00022610: 5f6c 6f63 616c 686f 7374 3d54 7275 6529  _localhost=True)
-00022620: 2827 3132 372e 302e 302e 3127 290a 2020  ('127.0.0.1').  
-00022630: 2020 2020 2020 2020 2020 2827 3132 372e            ('127.
-00022640: 302e 302e 3127 2c20 2765 6e74 6572 2076  0.0.1', 'enter v
-00022650: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
-00022660: 7327 290a 0a20 2020 2022 2222 0a0a 2020  s')..    """..  
-00022670: 2020 5245 4745 585f 4950 5634 203d 2072    REGEX_IPV4 = r
-00022680: 652e 636f 6d70 696c 6528 0a20 2020 2020  e.compile(.     
-00022690: 2020 2072 225e 2828 5b31 2d39 5d3f 5c64     r"^(([1-9]?\d
-000226a0: 7c31 5c64 5c64 7c32 5b30 2d34 5d5c 647c  |1\d\d|2[0-4]\d|
-000226b0: 3235 5b30 2d35 5d29 5c2e 297b 337d 285b  25[0-5])\.){3}([
-000226c0: 312d 395d 3f5c 647c 315c 645c 647c 325b  1-9]?\d|1\d\d|2[
-000226d0: 302d 345d 5c64 7c32 355b 302d 355d 2924  0-4]\d|25[0-5])$
-000226e0: 220a 2020 2020 290a 2020 2020 6e75 6d62  ".    ).    numb
-000226f0: 6572 7320 3d20 2831 3637 3737 3231 362c  ers = (16777216,
-00022700: 2036 3535 3336 2c20 3235 362c 2031 290a   65536, 256, 1).
-00022710: 2020 2020 6c6f 6361 6c68 6f73 7420 3d20      localhost = 
-00022720: 3231 3330 3730 3634 3333 0a20 2020 2070  2130706433.    p
-00022730: 7269 7661 7465 203d 2028 2832 3838 3637  rivate = ((28867
-00022740: 3239 3732 382c 2032 3838 3637 3935 3236  29728, 288679526
-00022750: 3329 2c20 2833 3233 3232 3335 3532 302c  3), (3232235520,
-00022760: 2033 3233 3233 3031 3035 3529 290a 2020   3232301055)).  
-00022770: 2020 6175 746f 6d61 7469 6320 3d20 2832    automatic = (2
-00022780: 3835 3139 3935 3634 382c 2032 3835 3230  851995648, 28520
-00022790: 3631 3138 3329 0a0a 2020 2020 6465 6620  61183)..    def 
-000227a0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-000227b0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-000227c0: 6d69 6e69 703d 2230 2e30 2e30 2e30 222c  minip="0.0.0.0",
-000227d0: 0a20 2020 2020 2020 206d 6178 6970 3d22  .        maxip="
-000227e0: 3235 352e 3235 352e 3235 352e 3235 3522  255.255.255.255"
-000227f0: 2c0a 2020 2020 2020 2020 696e 7665 7274  ,.        invert
-00022800: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00022810: 6973 5f6c 6f63 616c 686f 7374 3d4e 6f6e  is_localhost=Non
-00022820: 652c 0a20 2020 2020 2020 2069 735f 7072  e,.        is_pr
-00022830: 6976 6174 653d 4e6f 6e65 2c0a 2020 2020  ivate=None,.    
-00022840: 2020 2020 6973 5f61 7574 6f6d 6174 6963      is_automatic
-00022850: 3d4e 6f6e 652c 0a20 2020 2020 2020 2065  =None,.        e
-00022860: 7272 6f72 5f6d 6573 7361 6765 3d22 456e  rror_message="En
-00022870: 7465 7220 7661 6c69 6420 4950 7634 2061  ter valid IPv4 a
-00022880: 6464 7265 7373 222c 0a20 2020 2029 3a0a  ddress",.    ):.
-00022890: 2020 2020 2020 2020 666f 7220 6e2c 2076          for n, v
-000228a0: 616c 7565 2069 6e20 656e 756d 6572 6174  alue in enumerat
-000228b0: 6528 286d 696e 6970 2c20 6d61 7869 7029  e((minip, maxip)
-000228c0: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
-000228d0: 656d 7020 3d20 5b5d 0a20 2020 2020 2020  emp = [].       
-000228e0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-000228f0: 6365 2876 616c 7565 2c20 7374 7229 3a0a  ce(value, str):.
-00022900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022910: 7465 6d70 2e61 7070 656e 6428 7661 6c75  temp.append(valu
-00022920: 652e 7370 6c69 7428 222e 2229 290a 2020  e.split(".")).  
-00022930: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00022940: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
-00022950: 2028 6c69 7374 2c20 7475 706c 6529 293a   (list, tuple)):
-00022960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022970: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
-00022980: 2020 2020 2020 2020 2020 6c65 6e28 7661            len(va
-00022990: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
-000229a0: 2020 2020 2020 2020 203d 3d20 6c65 6e28           == len(
-000229b0: 5b69 7465 6d20 666f 7220 6974 656d 2069  [item for item i
-000229c0: 6e20 7661 6c75 6520 6966 2069 7369 6e73  n value if isins
-000229d0: 7461 6e63 6528 6974 656d 2c20 696e 7429  tance(item, int)
-000229e0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-000229f0: 2020 2020 2020 203d 3d20 340a 2020 2020         == 4.    
-00022a00: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
-00022a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022a20: 2020 2074 656d 702e 6170 7065 6e64 2876     temp.append(v
-00022a30: 616c 7565 290a 2020 2020 2020 2020 2020  alue).          
-00022a40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00022a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022a60: 666f 7220 6974 656d 2069 6e20 7661 6c75  for item in valu
-00022a70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00022a80: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00022a90: 696e 7374 616e 6365 2869 7465 6d2c 2073  instance(item, s
-00022aa0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00022ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ac0: 2074 656d 702e 6170 7065 6e64 2869 7465   temp.append(ite
-00022ad0: 6d2e 7370 6c69 7428 222e 2229 290a 2020  m.split(".")).  
-00022ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022af0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-00022b00: 7461 6e63 6528 6974 656d 2c20 286c 6973  tance(item, (lis
-00022b10: 742c 2074 7570 6c65 2929 3a0a 2020 2020  t, tuple)):.    
-00022b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022b30: 2020 2020 2020 2020 7465 6d70 2e61 7070          temp.app
-00022b40: 656e 6428 6974 656d 290a 2020 2020 2020  end(item).      
-00022b50: 2020 2020 2020 6e75 6d62 6572 7320 3d20        numbers = 
-00022b60: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
-00022b70: 6f72 2069 7465 6d20 696e 2074 656d 703a  or item in temp:
-00022b80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022b90: 206e 756d 6265 7220 3d20 300a 2020 2020   number = 0.    
-00022ba0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00022bb0: 692c 206a 2069 6e20 7a69 7028 7365 6c66  i, j in zip(self
-00022bc0: 2e6e 756d 6265 7273 2c20 6974 656d 293a  .numbers, item):
-00022bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022be0: 2020 2020 206e 756d 6265 7220 2b3d 2069       number += i
-00022bf0: 202a 2069 6e74 286a 290a 2020 2020 2020   * int(j).      
-00022c00: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
-00022c10: 732e 6170 7065 6e64 286e 756d 6265 7229  s.append(number)
-00022c20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00022c30: 6e20 3d3d 2030 3a0a 2020 2020 2020 2020  n == 0:.        
-00022c40: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
-00022c50: 6970 203d 206e 756d 6265 7273 0a20 2020  ip = numbers.   
-00022c60: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00022c70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00022c80: 656c 662e 6d61 7869 7020 3d20 6e75 6d62  elf.maxip = numb
-00022c90: 6572 730a 2020 2020 2020 2020 7365 6c66  ers.        self
-00022ca0: 2e69 6e76 6572 7420 3d20 696e 7665 7274  .invert = invert
-00022cb0: 0a20 2020 2020 2020 2073 656c 662e 6973  .        self.is
-00022cc0: 5f6c 6f63 616c 686f 7374 203d 2069 735f  _localhost = is_
-00022cd0: 6c6f 6361 6c68 6f73 740a 2020 2020 2020  localhost.      
-00022ce0: 2020 7365 6c66 2e69 735f 7072 6976 6174    self.is_privat
-00022cf0: 6520 3d20 6973 5f70 7269 7661 7465 0a20  e = is_private. 
-00022d00: 2020 2020 2020 2073 656c 662e 6973 5f61         self.is_a
-00022d10: 7574 6f6d 6174 6963 203d 2069 735f 6175  utomatic = is_au
-00022d20: 746f 6d61 7469 630a 2020 2020 2020 2020  tomatic.        
-00022d30: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-00022d40: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
-00022d50: 6765 0a0a 2020 2020 6465 6620 7661 6c69  ge..    def vali
-00022d60: 6461 7465 2873 656c 662c 2076 616c 7565  date(self, value
-00022d70: 2c20 7265 636f 7264 5f69 643d 4e6f 6e65  , record_id=None
-00022d80: 293a 0a20 2020 2020 2020 2069 6620 7265  ):.        if re
-00022d90: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
-00022da0: 585f 4950 5634 2c20 7661 6c75 6529 3a0a  X_IPV4, value):.
-00022db0: 2020 2020 2020 2020 2020 2020 6e75 6d62              numb
-00022dc0: 6572 203d 2030 0a20 2020 2020 2020 2020  er = 0.         
-00022dd0: 2020 2066 6f72 2069 2c20 6a20 696e 207a     for i, j in z
-00022de0: 6970 2873 656c 662e 6e75 6d62 6572 732c  ip(self.numbers,
-00022df0: 2076 616c 7565 2e73 706c 6974 2822 2e22   value.split("."
-00022e00: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00022e10: 2020 2020 6e75 6d62 6572 202b 3d20 6920      number += i 
-00022e20: 2a20 696e 7428 6a29 0a20 2020 2020 2020  * int(j).       
-00022e30: 2020 2020 206f 6b20 3d20 4661 6c73 650a       ok = False.
-00022e40: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00022e50: 2062 6f74 746f 6d2c 2074 6f70 2069 6e20   bottom, top in 
-00022e60: 7a69 7028 7365 6c66 2e6d 696e 6970 2c20  zip(self.minip, 
-00022e70: 7365 6c66 2e6d 6178 6970 293a 0a20 2020  self.maxip):.   
-00022e80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00022e90: 7365 6c66 2e69 6e76 6572 7420 213d 2028  self.invert != (
-00022ea0: 626f 7474 6f6d 203c 3d20 6e75 6d62 6572  bottom <= number
-00022eb0: 203c 3d20 746f 7029 3a0a 2020 2020 2020   <= top):.      
-00022ec0: 2020 2020 2020 2020 2020 2020 2020 6f6b                ok
-00022ed0: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
-00022ee0: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
-00022ef0: 2020 2020 2020 2020 2020 6f6b 0a20 2020            ok.   
-00022f00: 2020 2020 2020 2020 2020 2020 2061 6e64               and
-00022f10: 2073 656c 662e 6973 5f6c 6f63 616c 686f   self.is_localho
-00022f20: 7374 2069 7320 6e6f 7420 4e6f 6e65 0a20  st is not None. 
-00022f30: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00022f40: 6e64 2073 656c 662e 6973 5f6c 6f63 616c  nd self.is_local
-00022f50: 686f 7374 2021 3d20 286e 756d 6265 7220  host != (number 
-00022f60: 3d3d 2073 656c 662e 6c6f 6361 6c68 6f73  == self.localhos
-00022f70: 7429 0a20 2020 2020 2020 2020 2020 2029  t).            )
-00022f80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00022f90: 2020 6f6b 203d 2046 616c 7365 0a0a 2020    ok = False..  
-00022fa0: 2020 2020 2020 2020 2020 7072 6976 6174            privat
-00022fb0: 6520 3d20 616e 7928 0a20 2020 2020 2020  e = any(.       
-00022fc0: 2020 2020 2020 2020 205b 0a20 2020 2020           [.     
-00022fd0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00022fe0: 7269 7661 7465 5f6e 756d 6265 725b 305d  rivate_number[0]
-00022ff0: 203c 3d20 6e75 6d62 6572 203c 3d20 7072   <= number <= pr
-00023000: 6976 6174 655f 6e75 6d62 6572 5b31 5d0a  ivate_number[1].
-00023010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023020: 2020 2020 666f 7220 7072 6976 6174 655f      for private_
-00023030: 6e75 6d62 6572 2069 6e20 7365 6c66 2e70  number in self.p
-00023040: 7269 7661 7465 0a20 2020 2020 2020 2020  rivate.         
-00023050: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-00023060: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00023070: 2020 2069 6620 6f6b 2061 6e64 2073 656c     if ok and sel
-00023080: 662e 6973 5f70 7269 7661 7465 2069 7320  f.is_private is 
-00023090: 6e6f 7420 4e6f 6e65 2061 6e64 2073 656c  not None and sel
-000230a0: 662e 6973 5f70 7269 7661 7465 2021 3d20  f.is_private != 
-000230b0: 7072 6976 6174 653a 0a20 2020 2020 2020  private:.       
-000230c0: 2020 2020 2020 2020 206f 6b20 3d20 4661           ok = Fa
-000230d0: 6c73 650a 0a20 2020 2020 2020 2020 2020  lse..           
-000230e0: 2061 7574 6f6d 6174 6963 203d 2073 656c   automatic = sel
-000230f0: 662e 6175 746f 6d61 7469 635b 305d 203c  f.automatic[0] <
-00023100: 3d20 6e75 6d62 6572 203c 3d20 7365 6c66  = number <= self
-00023110: 2e61 7574 6f6d 6174 6963 5b31 5d0a 2020  .automatic[1].  
-00023120: 2020 2020 2020 2020 2020 6966 206f 6b20            if ok 
-00023130: 616e 6420 7365 6c66 2e69 735f 6175 746f  and self.is_auto
-00023140: 6d61 7469 6320 6973 206e 6f74 204e 6f6e  matic is not Non
-00023150: 6520 616e 6420 7365 6c66 2e69 735f 6175  e and self.is_au
-00023160: 746f 6d61 7469 6320 213d 2061 7574 6f6d  tomatic != autom
-00023170: 6174 6963 3a0a 2020 2020 2020 2020 2020  atic:.          
-00023180: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
-00023190: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000231a0: 206f 6b3a 0a20 2020 2020 2020 2020 2020   ok:.           
-000231b0: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-000231c0: 650a 0a20 2020 2020 2020 2072 6169 7365  e..        raise
-000231d0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-000231e0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-000231f0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00023200: 6167 6529 290a 0a0a 636c 6173 7320 4953  age))...class IS
-00023210: 5f49 5056 3628 5661 6c69 6461 746f 7229  _IPV6(Validator)
-00023220: 3a0a 2020 2020 2222 220a 2020 2020 4368  :.    """.    Ch
-00023230: 6563 6b73 2069 6620 6669 656c 6427 7320  ecks if field's 
-00023240: 7661 6c75 6520 6973 2061 6e20 4950 2076  value is an IP v
-00023250: 6572 7369 6f6e 2036 2061 6464 7265 7373  ersion 6 address
-00023260: 2e0a 0a20 2020 2055 7365 7320 7468 6520  ...    Uses the 
-00023270: 6970 6164 6472 6573 7320 6672 6f6d 2074  ipaddress from t
-00023280: 6865 2050 7974 686f 6e20 3320 7374 616e  he Python 3 stan
-00023290: 6461 7264 206c 6962 7261 7279 0a20 2020  dard library.   
-000232a0: 2061 6e64 2069 7473 2050 7974 686f 6e20   and its Python 
-000232b0: 3220 6261 636b 706f 7274 2028 696e 2063  2 backport (in c
-000232c0: 6f6e 7472 6962 2f69 7061 6464 7265 7373  ontrib/ipaddress
-000232d0: 2e70 7929 2e0a 0a20 2020 2041 7267 733a  .py)...    Args:
-000232e0: 0a20 2020 2020 2020 2069 735f 7072 6976  .        is_priv
-000232f0: 6174 653a 204e 6f6e 6520 2864 6566 6175  ate: None (defau
-00023300: 6c74 293a 2069 6e64 6966 6665 7265 6e74  lt): indifferent
-00023310: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023320: 2020 2020 2054 7275 6520 2865 6e66 6f72       True (enfor
-00023330: 6365 293a 2061 6464 7265 7373 206d 7573  ce): address mus
-00023340: 7420 6265 2069 6e20 6663 3030 3a3a 2f37  t be in fc00::/7
-00023350: 2072 616e 6765 0a20 2020 2020 2020 2020   range.         
-00023360: 2020 2020 2020 2020 2020 2046 616c 7365             False
-00023370: 2028 666f 7262 6964 293a 2061 6464 7265   (forbid): addre
-00023380: 7373 206d 7573 7420 4e4f 5420 6265 2069  ss must NOT be i
-00023390: 6e20 6663 3030 3a3a 2f37 2072 616e 6765  n fc00::/7 range
-000233a0: 0a20 2020 2020 2020 2069 735f 6c69 6e6b  .        is_link
-000233b0: 5f6c 6f63 616c 3a20 5361 6d65 2061 7320  _local: Same as 
-000233c0: 6162 6f76 6520 6275 7420 7573 6573 2066  above but uses f
-000233d0: 6538 303a 3a2f 3130 2072 616e 6765 0a20  e80::/10 range. 
-000233e0: 2020 2020 2020 2069 735f 7265 7365 7276         is_reserv
-000233f0: 6564 3a20 5361 6d65 2061 7320 6162 6f76  ed: Same as abov
-00023400: 6520 6275 7420 7573 6573 2049 4554 4620  e but uses IETF 
-00023410: 7265 7365 7276 6564 2072 616e 6765 0a20  reserved range. 
-00023420: 2020 2020 2020 2069 735f 6d75 6c74 6963         is_multic
-00023430: 6173 743a 2053 616d 6520 6173 2061 626f  ast: Same as abo
-00023440: 7665 2062 7574 2075 7365 7320 6666 3030  ve but uses ff00
-00023450: 3a3a 2f38 2072 616e 6765 0a20 2020 2020  ::/8 range.     
-00023460: 2020 2069 735f 726f 7574 6561 626c 653a     is_routeable:
-00023470: 2053 696d 696c 6172 2074 6f20 6162 6f76   Similar to abov
-00023480: 6520 6275 7420 656e 666f 7263 6573 206e  e but enforces n
-00023490: 6f74 2070 7269 7661 7465 2c20 6c69 6e6b  ot private, link
-000234a0: 5f6c 6f63 616c 2c0a 2020 2020 2020 2020  _local,.        
-000234b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000234c0: 7365 7276 6564 206f 7220 6d75 6c74 6963  served or multic
-000234d0: 6173 740a 2020 2020 2020 2020 6973 5f36  ast.        is_6
-000234e0: 746f 343a 2053 616d 6520 6173 2061 626f  to4: Same as abo
-000234f0: 7665 2062 7574 2075 7365 7320 3230 3032  ve but uses 2002
-00023500: 3a3a 2f31 3620 7261 6e67 650a 2020 2020  ::/16 range.    
-00023510: 2020 2020 6973 5f74 6572 6564 6f3a 2053      is_teredo: S
-00023520: 616d 6520 6173 2061 626f 7665 2062 7574  ame as above but
-00023530: 2075 7365 7320 3230 3031 3a3a 2f33 3220   uses 2001::/32 
-00023540: 7261 6e67 650a 2020 2020 2020 2020 7375  range.        su
-00023550: 626e 6574 733a 2076 616c 7565 206d 7573  bnets: value mus
-00023560: 7420 6265 2061 206d 656d 6265 7220 6f66  t be a member of
-00023570: 2061 7420 6c65 6173 7420 6f6e 6520 6672   at least one fr
-00023580: 6f6d 206c 6973 7420 6f66 2073 7562 6e65  om list of subne
-00023590: 7473 0a0a 2020 2020 4578 616d 706c 6573  ts..    Examples
-000235a0: 3a0a 2020 2020 2020 2020 4368 6563 6b20  :.        Check 
-000235b0: 666f 7220 7661 6c69 6420 4950 7636 2061  for valid IPv6 a
-000235c0: 6464 7265 7373 3a0a 0a20 2020 2020 2020  ddress:..       
-000235d0: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
-000235e0: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
-000235f0: 6e61 6d65 272c 2072 6571 7569 7265 733d  name', requires=
-00023600: 4953 5f49 5056 3628 2929 0a0a 2020 2020  IS_IPV6())..    
-00023610: 2020 2020 4368 6563 6b20 666f 7220 7661      Check for va
-00023620: 6c69 6420 4950 7636 2061 6464 7265 7373  lid IPv6 address
-00023630: 2069 7320 6120 6c69 6e6b 5f6c 6f63 616c   is a link_local
-00023640: 2061 6464 7265 7373 3a0a 0a20 2020 2020   address:..     
-00023650: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-00023660: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
-00023670: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
-00023680: 733d 4953 5f49 5056 3628 6973 5f6c 696e  s=IS_IPV6(is_lin
-00023690: 6b5f 6c6f 6361 6c3d 5472 7565 2929 0a0a  k_local=True))..
-000236a0: 2020 2020 2020 2020 4368 6563 6b20 666f          Check fo
-000236b0: 7220 7661 6c69 6420 4950 7636 2061 6464  r valid IPv6 add
-000236c0: 7265 7373 2074 6861 7420 6973 2049 6e74  ress that is Int
-000236d0: 6572 6e65 7420 726f 7574 6561 626c 653a  ernet routeable:
-000236e0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-000236f0: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
-00023700: 2c20 5f6e 616d 653d 276e 616d 6527 2c20  , _name='name', 
-00023710: 7265 7175 6972 6573 3d49 535f 4950 5636  requires=IS_IPV6
-00023720: 2869 735f 726f 7574 6561 626c 653d 5472  (is_routeable=Tr
-00023730: 7565 2929 0a0a 2020 2020 2020 2020 4368  ue))..        Ch
-00023740: 6563 6b20 666f 7220 7661 6c69 6420 4950  eck for valid IP
-00023750: 7636 2061 6464 7265 7373 2069 6e20 7370  v6 address in sp
-00023760: 6563 6966 6965 6420 7375 626e 6574 3a0a  ecified subnet:.
-00023770: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-00023780: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-00023790: 205f 6e61 6d65 3d27 6e61 6d65 272c 2072   _name='name', r
-000237a0: 6571 7569 7265 733d 4953 5f49 5056 3628  equires=IS_IPV6(
-000237b0: 7375 626e 6574 733d 5b27 3230 3031 3a3a  subnets=['2001::
-000237c0: 2f33 3227 5d29 0a0a 2020 2020 2020 2020  /32'])..        
-000237d0: 2020 2020 3e3e 3e20 4953 5f49 5056 3628      >>> IS_IPV6(
-000237e0: 2928 2766 6538 303a 3a31 3236 633a 3866  )('fe80::126c:8f
-000237f0: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
-00023800: 2020 2020 2020 2020 2020 2028 2766 6538             ('fe8
-00023810: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
-00023820: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
-00023830: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00023840: 535f 4950 5636 2829 2827 3139 322e 3136  S_IPV6()('192.16
-00023850: 382e 312e 3127 290a 2020 2020 2020 2020  8.1.1').        
-00023860: 2020 2020 2827 3139 322e 3136 382e 312e      ('192.168.1.
-00023870: 3127 2c20 2765 6e74 6572 2076 616c 6964  1', 'enter valid
-00023880: 2049 5076 3620 6164 6472 6573 7327 290a   IPv6 address').
-00023890: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000238a0: 4953 5f49 5056 3628 6572 726f 725f 6d65  IS_IPV6(error_me
-000238b0: 7373 6167 653d 2742 6164 2069 7027 2928  ssage='Bad ip')(
-000238c0: 2731 3932 2e31 3638 2e31 2e31 2729 0a20  '192.168.1.1'). 
-000238d0: 2020 2020 2020 2020 2020 2028 2731 3932             ('192
-000238e0: 2e31 3638 2e31 2e31 272c 2027 6261 6420  .168.1.1', 'bad 
-000238f0: 6970 2729 0a20 2020 2020 2020 2020 2020  ip').           
-00023900: 203e 3e3e 2049 535f 4950 5636 2869 735f   >>> IS_IPV6(is_
-00023910: 6c69 6e6b 5f6c 6f63 616c 3d54 7275 6529  link_local=True)
-00023920: 2827 6665 3830 3a3a 3132 3663 3a38 6666  ('fe80::126c:8ff
-00023930: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
-00023940: 2020 2020 2020 2020 2020 2827 6665 3830            ('fe80
-00023950: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-00023960: 3a62 3361 6627 2c20 4e6f 6e65 290a 2020  :b3af', None).  
-00023970: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00023980: 5f49 5056 3628 6973 5f6c 696e 6b5f 6c6f  _IPV6(is_link_lo
-00023990: 6361 6c3d 4661 6c73 6529 2827 6665 3830  cal=False)('fe80
-000239a0: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-000239b0: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-000239c0: 2020 2020 2827 6665 3830 3a3a 3132 3663      ('fe80::126c
-000239d0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-000239e0: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
-000239f0: 5076 3620 6164 6472 6573 7327 290a 2020  Pv6 address').  
-00023a00: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00023a10: 5f49 5056 3628 6973 5f6c 696e 6b5f 6c6f  _IPV6(is_link_lo
-00023a20: 6361 6c3d 5472 7565 2928 2732 3030 313a  cal=True)('2001:
-00023a30: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
-00023a40: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
-00023a50: 2020 2028 2732 3030 313a 3a31 3236 633a     ('2001::126c:
-00023a60: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
-00023a70: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
-00023a80: 7636 2061 6464 7265 7373 2729 0a20 2020  v6 address').   
-00023a90: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00023aa0: 4950 5636 2869 735f 6d75 6c74 6963 6173  IPV6(is_multicas
-00023ab0: 743d 5472 7565 2928 2732 3030 313a 3a31  t=True)('2001::1
-00023ac0: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00023ad0: 6166 2729 0a20 2020 2020 2020 2020 2020  af').           
-00023ae0: 2028 2732 3030 313a 3a31 3236 633a 3866   ('2001::126c:8f
-00023af0: 6661 3a66 6532 323a 6233 6166 272c 2027  fa:fe22:b3af', '
-00023b00: 656e 7465 7220 7661 6c69 6420 4950 7636  enter valid IPv6
-00023b10: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00023b20: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00023b30: 5636 2869 735f 6d75 6c74 6963 6173 743d  V6(is_multicast=
-00023b40: 5472 7565 2928 2766 6630 303a 3a31 3236  True)('ff00::126
-00023b50: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00023b60: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00023b70: 2766 6630 303a 3a31 3236 633a 3866 6661  'ff00::126c:8ffa
-00023b80: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
-00023b90: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00023ba0: 3e3e 2049 535f 4950 5636 2869 735f 726f  >> IS_IPV6(is_ro
-00023bb0: 7574 6561 626c 653d 5472 7565 2928 2732  uteable=True)('2
-00023bc0: 3030 313a 3a31 3236 633a 3866 6661 3a66  001::126c:8ffa:f
-00023bd0: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
-00023be0: 2020 2020 2020 2028 2732 3030 313a 3a31         ('2001::1
-00023bf0: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00023c00: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
-00023c10: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00023c20: 5636 2869 735f 726f 7574 6561 626c 653d  V6(is_routeable=
-00023c30: 5472 7565 2928 2766 6630 303a 3a31 3236  True)('ff00::126
-00023c40: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00023c50: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00023c60: 2766 6630 303a 3a31 3236 633a 3866 6661  'ff00::126c:8ffa
-00023c70: 3a66 6532 323a 6233 6166 272c 2027 656e  :fe22:b3af', 'en
-00023c80: 7465 7220 7661 6c69 6420 4950 7636 2061  ter valid IPv6 a
-00023c90: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-00023ca0: 2020 2020 203e 3e3e 2049 535f 4950 5636       >>> IS_IPV6
-00023cb0: 2873 7562 6e65 7473 3d27 3230 3031 3a3a  (subnets='2001::
-00023cc0: 2f33 3227 2928 2732 3030 313a 3a38 6666  /32')('2001::8ff
-00023cd0: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
-00023ce0: 2020 2020 2020 2020 2020 2827 3230 3031            ('2001
-00023cf0: 3a3a 3866 6661 3a66 6532 323a 6233 6166  ::8ffa:fe22:b3af
-00023d00: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-00023d10: 2020 2020 203e 3e3e 2049 535f 4950 5636       >>> IS_IPV6
-00023d20: 2873 7562 6e65 7473 3d27 6662 3030 3a3a  (subnets='fb00::
-00023d30: 2f38 2729 2827 3230 3031 3a3a 3866 6661  /8')('2001::8ffa
-00023d40: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
-00023d50: 2020 2020 2020 2020 2028 2732 3030 313a           ('2001:
-00023d60: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00023d70: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
-00023d80: 5076 3620 6164 6472 6573 7327 290a 2020  Pv6 address').  
-00023d90: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00023da0: 5f49 5056 3628 7375 626e 6574 733d 5b27  _IPV6(subnets=['
-00023db0: 6663 3030 3a3a 2f38 272c 2732 3030 313a  fc00::/8','2001:
-00023dc0: 3a2f 3332 275d 2928 2732 3030 313a 3a38  :/32'])('2001::8
-00023dd0: 6666 613a 6665 3232 3a62 3361 6627 290a  ffa:fe22:b3af').
-00023de0: 2020 2020 2020 2020 2020 2020 2827 3230              ('20
-00023df0: 3031 3a3a 3866 6661 3a66 6532 323a 6233  01::8ffa:fe22:b3
-00023e00: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
-00023e10: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00023e20: 5636 2873 7562 6e65 7473 3d27 696e 7661  V6(subnets='inva
-00023e30: 6c69 6473 7562 6e65 7427 2928 2732 3030  lidsubnet')('200
-00023e40: 313a 3a38 6666 613a 6665 3232 3a62 3361  1::8ffa:fe22:b3a
-00023e50: 6627 290a 2020 2020 2020 2020 2020 2020  f').            
-00023e60: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
-00023e70: 323a 6233 6166 272c 2027 696e 7661 6c69  2:b3af', 'invali
-00023e80: 6420 7375 626e 6574 2070 726f 7669 6465  d subnet provide
-00023e90: 6427 290a 0a20 2020 2022 2222 0a0a 2020  d')..    """..  
-00023ea0: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
-00023eb0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00023ec0: 2020 2020 2020 6973 5f70 7269 7661 7465        is_private
-00023ed0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
-00023ee0: 735f 6c69 6e6b 5f6c 6f63 616c 3d4e 6f6e  s_link_local=Non
-00023ef0: 652c 0a20 2020 2020 2020 2069 735f 7265  e,.        is_re
-00023f00: 7365 7276 6564 3d4e 6f6e 652c 0a20 2020  served=None,.   
-00023f10: 2020 2020 2069 735f 6d75 6c74 6963 6173       is_multicas
-00023f20: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00023f30: 6973 5f72 6f75 7465 6162 6c65 3d4e 6f6e  is_routeable=Non
-00023f40: 652c 0a20 2020 2020 2020 2069 735f 3674  e,.        is_6t
-00023f50: 6f34 3d4e 6f6e 652c 0a20 2020 2020 2020  o4=None,.       
-00023f60: 2069 735f 7465 7265 646f 3d4e 6f6e 652c   is_teredo=None,
-00023f70: 0a20 2020 2020 2020 2073 7562 6e65 7473  .        subnets
-00023f80: 3d4e 6f6e 652c 0a20 2020 2020 2020 2065  =None,.        e
-00023f90: 7272 6f72 5f6d 6573 7361 6765 3d22 456e  rror_message="En
-00023fa0: 7465 7220 7661 6c69 6420 4950 7636 2061  ter valid IPv6 a
-00023fb0: 6464 7265 7373 222c 0a20 2020 2029 3a0a  ddress",.    ):.
-00023fc0: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
-00023fd0: 7072 6976 6174 6520 3d20 6973 5f70 7269  private = is_pri
-00023fe0: 7661 7465 0a20 2020 2020 2020 2073 656c  vate.        sel
-00023ff0: 662e 6973 5f6c 696e 6b5f 6c6f 6361 6c20  f.is_link_local 
-00024000: 3d20 6973 5f6c 696e 6b5f 6c6f 6361 6c0a  = is_link_local.
-00024010: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
-00024020: 7265 7365 7276 6564 203d 2069 735f 7265  reserved = is_re
-00024030: 7365 7276 6564 0a20 2020 2020 2020 2073  served.        s
-00024040: 656c 662e 6973 5f6d 756c 7469 6361 7374  elf.is_multicast
-00024050: 203d 2069 735f 6d75 6c74 6963 6173 740a   = is_multicast.
-00024060: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
-00024070: 726f 7574 6561 626c 6520 3d20 6973 5f72  routeable = is_r
-00024080: 6f75 7465 6162 6c65 0a20 2020 2020 2020  outeable.       
-00024090: 2073 656c 662e 6973 5f36 746f 3420 3d20   self.is_6to4 = 
-000240a0: 6973 5f36 746f 340a 2020 2020 2020 2020  is_6to4.        
-000240b0: 7365 6c66 2e69 735f 7465 7265 646f 203d  self.is_teredo =
-000240c0: 2069 735f 7465 7265 646f 0a20 2020 2020   is_teredo.     
-000240d0: 2020 2073 656c 662e 7375 626e 6574 7320     self.subnets 
-000240e0: 3d20 7375 626e 6574 730a 2020 2020 2020  = subnets.      
-000240f0: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-00024100: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-00024110: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
-00024120: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-00024130: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-00024140: 6e65 293a 0a20 2020 2020 2020 2074 7279  ne):.        try
-00024150: 3a0a 2020 2020 2020 2020 2020 2020 6970  :.            ip
-00024160: 203d 2069 7061 6464 7265 7373 2e49 5076   = ipaddress.IPv
-00024170: 3641 6464 7265 7373 2874 6f5f 756e 6963  6Address(to_unic
-00024180: 6f64 6528 7661 6c75 6529 290a 2020 2020  ode(value)).    
-00024190: 2020 2020 2020 2020 6f6b 203d 2054 7275          ok = Tru
-000241a0: 650a 2020 2020 2020 2020 6578 6365 7074  e.        except
-000241b0: 2069 7061 6464 7265 7373 2e41 6464 7265   ipaddress.Addre
-000241c0: 7373 5661 6c75 6545 7272 6f72 3a0a 2020  ssValueError:.  
-000241d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000241e0: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
-000241f0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-00024200: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-00024210: 6765 2929 0a0a 2020 2020 2020 2020 6966  ge))..        if
-00024220: 2073 656c 662e 7375 626e 6574 733a 0a20   self.subnets:. 
-00024230: 2020 2020 2020 2020 2020 2023 2069 7465             # ite
-00024240: 7261 7465 2074 6872 6f75 6768 2073 656c  rate through sel
-00024250: 662e 7375 626e 6574 7320 746f 2073 6565  f.subnets to see
-00024260: 2069 6620 7661 6c75 6520 6973 2061 206d   if value is a m
-00024270: 656d 6265 720a 2020 2020 2020 2020 2020  ember.          
-00024280: 2020 6f6b 203d 2046 616c 7365 0a20 2020    ok = False.   
-00024290: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-000242a0: 7374 616e 6365 2873 656c 662e 7375 626e  stance(self.subn
-000242b0: 6574 732c 2073 7472 293a 0a20 2020 2020  ets, str):.     
-000242c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000242d0: 7375 626e 6574 7320 3d20 5b73 656c 662e  subnets = [self.
-000242e0: 7375 626e 6574 735d 0a20 2020 2020 2020  subnets].       
-000242f0: 2020 2020 2066 6f72 206e 6574 776f 726b       for network
-00024300: 2069 6e20 7365 6c66 2e73 7562 6e65 7473   in self.subnets
-00024310: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00024320: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00024330: 2020 2020 2020 2020 2020 2069 706e 6574             ipnet
-00024340: 203d 2069 7061 6464 7265 7373 2e49 5076   = ipaddress.IPv
-00024350: 364e 6574 776f 726b 2874 6f5f 756e 6963  6Network(to_unic
-00024360: 6f64 6528 6e65 7477 6f72 6b29 290a 2020  ode(network)).  
-00024370: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00024380: 6365 7074 2028 6970 6164 6472 6573 732e  cept (ipaddress.
-00024390: 4e65 746d 6173 6b56 616c 7565 4572 726f  NetmaskValueErro
-000243a0: 722c 2069 7061 6464 7265 7373 2e41 6464  r, ipaddress.Add
-000243b0: 7265 7373 5661 6c75 6545 7272 6f72 293a  ressValueError):
-000243c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000243d0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-000243e0: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-000243f0: 7472 616e 736c 6174 6f72 2822 696e 7661  translator("inva
-00024400: 6c69 6420 7375 626e 6574 2070 726f 7669  lid subnet provi
-00024410: 6465 6422 2929 0a20 2020 2020 2020 2020  ded")).         
-00024420: 2020 2020 2020 2069 6620 6970 2069 6e20         if ip in 
-00024430: 6970 6e65 743a 0a20 2020 2020 2020 2020  ipnet:.         
-00024440: 2020 2020 2020 2020 2020 206f 6b20 3d20             ok = 
-00024450: 5472 7565 0a0a 2020 2020 2020 2020 6966  True..        if
-00024460: 2073 656c 662e 6973 5f72 6f75 7465 6162   self.is_routeab
-00024470: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-00024480: 7365 6c66 2e69 735f 7072 6976 6174 6520  self.is_private 
-00024490: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-000244a0: 2020 2020 7365 6c66 2e69 735f 7265 7365      self.is_rese
-000244b0: 7276 6564 203d 2046 616c 7365 0a20 2020  rved = False.   
-000244c0: 2020 2020 2020 2020 2073 656c 662e 6973           self.is
-000244d0: 5f6d 756c 7469 6361 7374 203d 2046 616c  _multicast = Fal
-000244e0: 7365 0a0a 2020 2020 2020 2020 6966 206f  se..        if o
-000244f0: 6b20 616e 6420 7365 6c66 2e69 735f 7072  k and self.is_pr
-00024500: 6976 6174 6520 6973 206e 6f74 204e 6f6e  ivate is not Non
-00024510: 6520 616e 6420 7365 6c66 2e69 735f 7072  e and self.is_pr
-00024520: 6976 6174 6520 213d 2069 702e 6973 5f70  ivate != ip.is_p
-00024530: 7269 7661 7465 3a0a 2020 2020 2020 2020  rivate:.        
-00024540: 2020 2020 6f6b 203d 2046 616c 7365 0a20      ok = False. 
-00024550: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
-00024560: 2020 2020 2020 2020 6f6b 0a20 2020 2020          ok.     
-00024570: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
-00024580: 6973 5f6c 696e 6b5f 6c6f 6361 6c20 6973  is_link_local is
-00024590: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-000245a0: 2020 2020 2020 616e 6420 7365 6c66 2e69        and self.i
-000245b0: 735f 6c69 6e6b 5f6c 6f63 616c 2021 3d20  s_link_local != 
-000245c0: 6970 2e69 735f 6c69 6e6b 5f6c 6f63 616c  ip.is_link_local
-000245d0: 0a20 2020 2020 2020 2029 3a0a 2020 2020  .        ):.    
-000245e0: 2020 2020 2020 2020 6f6b 203d 2046 616c          ok = Fal
-000245f0: 7365 0a20 2020 2020 2020 2069 6620 6f6b  se.        if ok
-00024600: 2061 6e64 2073 656c 662e 6973 5f72 6573   and self.is_res
-00024610: 6572 7665 6420 6973 206e 6f74 204e 6f6e  erved is not Non
-00024620: 6520 616e 6420 7365 6c66 2e69 735f 7265  e and self.is_re
-00024630: 7365 7276 6564 2021 3d20 6970 2e69 735f  served != ip.is_
-00024640: 7265 7365 7276 6564 3a0a 2020 2020 2020  reserved:.      
-00024650: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
-00024660: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
-00024670: 2020 2020 2020 2020 2020 6f6b 0a20 2020            ok.   
-00024680: 2020 2020 2020 2020 2061 6e64 2073 656c           and sel
-00024690: 662e 6973 5f6d 756c 7469 6361 7374 2069  f.is_multicast i
-000246a0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-000246b0: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
-000246c0: 6973 5f6d 756c 7469 6361 7374 2021 3d20  is_multicast != 
-000246d0: 6970 2e69 735f 6d75 6c74 6963 6173 740a  ip.is_multicast.
-000246e0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
-000246f0: 2020 2020 2020 206f 6b20 3d20 4661 6c73         ok = Fals
-00024700: 650a 2020 2020 2020 2020 6966 206f 6b20  e.        if ok 
-00024710: 616e 6420 7365 6c66 2e69 735f 3674 6f34  and self.is_6to4
-00024720: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-00024730: 2073 656c 662e 6973 5f36 746f 3420 213d   self.is_6to4 !=
-00024740: 2062 6f6f 6c28 6970 2e73 6978 746f 666f   bool(ip.sixtofo
-00024750: 7572 293a 0a20 2020 2020 2020 2020 2020  ur):.           
-00024760: 206f 6b20 3d20 4661 6c73 650a 2020 2020   ok = False.    
-00024770: 2020 2020 6966 206f 6b20 616e 6420 7365      if ok and se
-00024780: 6c66 2e69 735f 7465 7265 646f 2069 7320  lf.is_teredo is 
-00024790: 6e6f 7420 4e6f 6e65 2061 6e64 2073 656c  not None and sel
-000247a0: 662e 6973 5f74 6572 6564 6f20 213d 2062  f.is_teredo != b
-000247b0: 6f6f 6c28 6970 2e74 6572 6564 6f29 3a0a  ool(ip.teredo):.
-000247c0: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
-000247d0: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-000247e0: 6966 206f 6b3a 0a20 2020 2020 2020 2020  if ok:.         
-000247f0: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
-00024800: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
-00024810: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00024820: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-00024830: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00024840: 6529 290a 0a0a 636c 6173 7320 4953 5f49  e))...class IS_I
-00024850: 5041 4444 5245 5353 2856 616c 6964 6174  PADDRESS(Validat
-00024860: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
-00024870: 2043 6865 636b 7320 6966 2066 6965 6c64   Checks if field
-00024880: 2773 2076 616c 7565 2069 7320 616e 2049  's value is an I
-00024890: 5020 4164 6472 6573 7320 2876 3420 6f72  P Address (v4 or
-000248a0: 2076 3629 2e20 4361 6e20 6265 2073 6574   v6). Can be set
-000248b0: 2074 6f20 666f 7263 650a 2020 2020 6164   to force.    ad
-000248c0: 6472 6573 7365 7320 6672 6f6d 2077 6974  dresses from wit
-000248d0: 6869 6e20 6120 7370 6563 6966 6963 2072  hin a specific r
-000248e0: 616e 6765 2e20 4368 6563 6b73 2061 7265  ange. Checks are
-000248f0: 2064 6f6e 6520 7769 7468 2074 6865 2063   done with the c
-00024900: 6f72 7265 6374 0a20 2020 2049 535f 4950  orrect.    IS_IP
-00024910: 5634 2061 6e64 2049 535f 4950 5636 2076  V4 and IS_IPV6 v
-00024920: 616c 6964 6174 6f72 732e 0a0a 2020 2020  alidators...    
-00024930: 5573 6573 2074 6865 2069 7061 6464 7265  Uses the ipaddre
-00024940: 7373 2066 726f 6d20 7468 6520 5079 7468  ss from the Pyth
-00024950: 6f6e 2033 2073 7461 6e64 6172 6420 6c69  on 3 standard li
-00024960: 6272 6172 790a 2020 2020 616e 6420 6974  brary.    and it
-00024970: 7320 5079 7468 6f6e 2032 2062 6163 6b70  s Python 2 backp
-00024980: 6f72 7420 2869 6e20 636f 6e74 7269 622f  ort (in contrib/
-00024990: 6970 6164 6472 6573 732e 7079 292e 0a0a  ipaddress.py)...
-000249a0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-000249b0: 2020 6d69 6e69 703a 206c 6f77 6573 7420    minip: lowest 
-000249c0: 616c 6c6f 7765 6420 6164 6472 6573 733b  allowed address;
-000249d0: 2061 6363 6570 7473 3a0a 2020 2020 2020   accepts:.      
-000249e0: 2020 2020 2020 2020 2073 7472 2c20 6567           str, eg
-000249f0: 2e20 3139 322e 3136 382e 302e 310a 2020  . 192.168.0.1.  
-00024a00: 2020 2020 2020 2020 2020 2020 206c 6973               lis
-00024a10: 7420 6f72 2074 7570 6c65 206f 6620 6f63  t or tuple of oc
-00024a20: 7465 7473 2c20 6567 2e20 5b31 3932 2c20  tets, eg. [192, 
-00024a30: 3136 382c 2030 2c20 315d 0a20 2020 2020  168, 0, 1].     
-00024a40: 2020 206d 6178 6970 3a20 6869 6768 6573     maxip: highes
-00024a50: 7420 616c 6c6f 7765 6420 6164 6472 6573  t allowed addres
-00024a60: 733b 2073 616d 6520 6173 2061 626f 7665  s; same as above
-00024a70: 0a20 2020 2020 2020 2069 6e76 6572 743a  .        invert:
-00024a80: 2054 7275 6520 746f 2061 6c6c 6f77 2061   True to allow a
-00024a90: 6464 7265 7373 6573 206f 6e6c 7920 6672  ddresses only fr
-00024aa0: 6f6d 206f 7574 7369 6465 206f 6620 6769  om outside of gi
-00024ab0: 7665 6e20 7261 6e67 653b 206e 6f74 650a  ven range; note.
-00024ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024ad0: 7468 6174 2072 616e 6765 2062 6f75 6e64  that range bound
-00024ae0: 6172 6965 7320 6172 6520 6e6f 7420 6d61  aries are not ma
-00024af0: 7463 6865 6420 7468 6973 2077 6179 0a0a  tched this way..
-00024b00: 2020 2020 4950 7634 2073 7065 6369 6669      IPv4 specifi
-00024b10: 6320 6172 6775 6d65 6e74 733a 0a0a 2020  c arguments:..  
-00024b20: 2020 2020 2020 2d20 6973 5f6c 6f63 616c        - is_local
-00024b30: 686f 7374 3a20 6c6f 6361 6c68 6f73 7420  host: localhost 
-00024b40: 6164 6472 6573 7320 7472 6561 746d 656e  address treatmen
-00024b50: 743a 0a0a 2020 2020 2020 2020 2020 2020  t:..            
-00024b60: 2d20 4e6f 6e65 2028 6465 6661 756c 7429  - None (default)
-00024b70: 3a20 696e 6469 6666 6572 656e 740a 2020  : indifferent.  
-00024b80: 2020 2020 2020 2020 2020 2d20 5472 7565            - True
-00024b90: 2028 656e 666f 7263 6529 3a20 7175 6572   (enforce): quer
-00024ba0: 7920 6164 6472 6573 7320 6d75 7374 206d  y address must m
-00024bb0: 6174 6368 206c 6f63 616c 686f 7374 2061  atch localhost a
-00024bc0: 6464 7265 7373 0a20 2020 2020 2020 2020  ddress.         
-00024bd0: 2020 2020 2028 3132 372e 302e 302e 3129       (127.0.0.1)
-00024be0: 0a20 2020 2020 2020 2020 2020 202d 2046  .            - F
-00024bf0: 616c 7365 2028 666f 7262 6964 293a 2071  alse (forbid): q
-00024c00: 7565 7279 2061 6464 7265 7373 206d 7573  uery address mus
-00024c10: 7420 6e6f 7420 6d61 7463 6820 6c6f 6361  t not match loca
-00024c20: 6c68 6f73 7420 6164 6472 6573 730a 2020  lhost address.  
-00024c30: 2020 2020 2020 2d20 6973 5f70 7269 7661        - is_priva
-00024c40: 7465 3a20 7361 6d65 2061 7320 6162 6f76  te: same as abov
-00024c50: 652c 2065 7863 6570 7420 7468 6174 2071  e, except that q
-00024c60: 7565 7279 2061 6464 7265 7373 2069 7320  uery address is 
-00024c70: 6368 6563 6b65 6420 6167 6169 6e73 740a  checked against.
-00024c80: 2020 2020 2020 2020 2020 7477 6f20 6164            two ad
-00024c90: 6472 6573 7320 7261 6e67 6573 3a20 3137  dress ranges: 17
-00024ca0: 322e 3136 2e30 2e30 202d 2031 3732 2e33  2.16.0.0 - 172.3
-00024cb0: 312e 3235 352e 3235 3520 616e 640a 2020  1.255.255 and.  
-00024cc0: 2020 2020 2020 2020 3139 322e 3136 382e          192.168.
-00024cd0: 302e 3020 2d20 3139 322e 3136 382e 3235  0.0 - 192.168.25
-00024ce0: 352e 3235 350a 2020 2020 2020 2020 2d20  5.255.        - 
-00024cf0: 6973 5f61 7574 6f6d 6174 6963 3a20 7361  is_automatic: sa
-00024d00: 6d65 2061 7320 6162 6f76 652c 2065 7863  me as above, exc
-00024d10: 6570 7420 7468 6174 2071 7565 7279 2061  ept that query a
-00024d20: 6464 7265 7373 2069 7320 6368 6563 6b65  ddress is checke
-00024d30: 6420 6167 6169 6e73 740a 2020 2020 2020  d against.      
-00024d40: 2020 2020 6f6e 6520 6164 6472 6573 7320      one address 
-00024d50: 7261 6e67 653a 2031 3639 2e32 3534 2e30  range: 169.254.0
-00024d60: 2e30 202d 2031 3639 2e32 3534 2e32 3535  .0 - 169.254.255
-00024d70: 2e32 3535 0a20 2020 2020 2020 202d 2069  .255.        - i
-00024d80: 735f 6970 7634 3a20 6569 7468 6572 3a0a  s_ipv4: either:.
-00024d90: 0a20 2020 2020 2020 2020 2020 202d 204e  .            - N
-00024da0: 6f6e 6520 2864 6566 6175 6c74 293a 2069  one (default): i
-00024db0: 6e64 6966 6665 7265 6e74 0a20 2020 2020  ndifferent.     
-00024dc0: 2020 2020 2020 202d 2054 7275 6520 2865         - True (e
-00024dd0: 6e66 6f72 6365 293a 206d 7573 7420 6265  nforce): must be
-00024de0: 2061 6e20 4950 7634 2061 6464 7265 7373   an IPv4 address
-00024df0: 0a20 2020 2020 2020 2020 2020 202d 2046  .            - F
-00024e00: 616c 7365 2028 666f 7262 6964 293a 206d  alse (forbid): m
-00024e10: 7573 7420 4e4f 5420 6265 2061 6e20 4950  ust NOT be an IP
-00024e20: 7634 2061 6464 7265 7373 0a0a 2020 2020  v4 address..    
-00024e30: 4950 7636 2073 7065 6369 6669 6320 6172  IPv6 specific ar
-00024e40: 6775 6d65 6e74 733a 0a0a 2020 2020 2020  guments:..      
-00024e50: 2020 2d20 6973 5f6c 696e 6b5f 6c6f 6361    - is_link_loca
-00024e60: 6c3a 2053 616d 6520 6173 2061 626f 7665  l: Same as above
-00024e70: 2062 7574 2075 7365 7320 6665 3830 3a3a   but uses fe80::
-00024e80: 2f31 3020 7261 6e67 650a 2020 2020 2020  /10 range.      
-00024e90: 2020 2d20 6973 5f72 6573 6572 7665 643a    - is_reserved:
-00024ea0: 2053 616d 6520 6173 2061 626f 7665 2062   Same as above b
-00024eb0: 7574 2075 7365 7320 4945 5446 2072 6573  ut uses IETF res
-00024ec0: 6572 7665 6420 7261 6e67 650a 2020 2020  erved range.    
-00024ed0: 2020 2020 2d20 6973 5f6d 756c 7469 6361      - is_multica
-00024ee0: 7374 3a20 5361 6d65 2061 7320 6162 6f76  st: Same as abov
-00024ef0: 6520 6275 7420 7573 6573 2066 6630 303a  e but uses ff00:
-00024f00: 3a2f 3820 7261 6e67 650a 2020 2020 2020  :/8 range.      
-00024f10: 2020 2d20 6973 5f72 6f75 7465 6162 6c65    - is_routeable
-00024f20: 3a20 5369 6d69 6c61 7220 746f 2061 626f  : Similar to abo
-00024f30: 7665 2062 7574 2065 6e66 6f72 6365 7320  ve but enforces 
-00024f40: 6e6f 7420 7072 6976 6174 652c 206c 696e  not private, lin
-00024f50: 6b5f 6c6f 6361 6c2c 0a20 2020 2020 2020  k_local,.       
-00024f60: 2020 2072 6573 6572 7665 6420 6f72 206d     reserved or m
-00024f70: 756c 7469 6361 7374 0a20 2020 2020 2020  ulticast.       
-00024f80: 202d 2069 735f 3674 6f34 3a20 5361 6d65   - is_6to4: Same
-00024f90: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
-00024fa0: 6573 2032 3030 323a 3a2f 3136 2072 616e  es 2002::/16 ran
-00024fb0: 6765 0a20 2020 2020 2020 202d 2069 735f  ge.        - is_
-00024fc0: 7465 7265 646f 3a20 5361 6d65 2061 7320  teredo: Same as 
-00024fd0: 6162 6f76 6520 6275 7420 7573 6573 2032  above but uses 2
-00024fe0: 3030 313a 3a2f 3332 2072 616e 6765 0a20  001::/32 range. 
-00024ff0: 2020 2020 2020 202d 2073 7562 6e65 7473         - subnets
-00025000: 3a20 7661 6c75 6520 6d75 7374 2062 6520  : value must be 
-00025010: 6120 6d65 6d62 6572 206f 6620 6174 206c  a member of at l
-00025020: 6561 7374 206f 6e65 2066 726f 6d20 6c69  east one from li
-00025030: 7374 206f 6620 7375 626e 6574 730a 2020  st of subnets.  
-00025040: 2020 2020 2020 2d20 6973 5f69 7076 363a        - is_ipv6:
-00025050: 2065 6974 6865 723a 0a0a 2020 2020 2020   either:..      
-00025060: 2020 2020 2020 2d20 4e6f 6e65 2028 6465        - None (de
-00025070: 6661 756c 7429 3a20 696e 6469 6666 6572  fault): indiffer
-00025080: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
-00025090: 2d20 5472 7565 2028 656e 666f 7263 6529  - True (enforce)
-000250a0: 3a20 6d75 7374 2062 6520 616e 2049 5076  : must be an IPv
-000250b0: 3620 6164 6472 6573 730a 2020 2020 2020  6 address.      
-000250c0: 2020 2020 2020 2d20 4661 6c73 6520 2866        - False (f
-000250d0: 6f72 6269 6429 3a20 6d75 7374 204e 4f54  orbid): must NOT
-000250e0: 2062 6520 616e 2049 5076 3620 6164 6472   be an IPv6 addr
-000250f0: 6573 730a 0a20 2020 204d 696e 6970 2061  ess..    Minip a
-00025100: 6e64 206d 6178 6970 206d 6179 2061 6c73  nd maxip may als
-00025110: 6f20 6265 206c 6973 7473 206f 7220 7475  o be lists or tu
-00025120: 706c 6573 206f 6620 6164 6472 6573 7365  ples of addresse
-00025130: 7320 696e 2061 6c6c 2061 626f 7665 0a20  s in all above. 
-00025140: 2020 2066 6f72 6d73 2028 7374 722c 2069     forms (str, i
-00025150: 6e74 2c20 6c69 7374 202f 2074 7570 6c65  nt, list / tuple
-00025160: 292c 2061 6c6c 6f77 696e 6720 7365 7475  ), allowing setu
-00025170: 7020 6f66 206d 756c 7469 706c 6520 6164  p of multiple ad
-00025180: 6472 6573 7320 7261 6e67 6573 3a3a 0a0a  dress ranges::..
-00025190: 2020 2020 2020 2020 6d69 6e69 7020 3d20          minip = 
-000251a0: 286d 696e 6970 312c 206d 696e 6970 322c  (minip1, minip2,
-000251b0: 202e 2e2e 206d 696e 6970 4e29 0a20 2020   ... minipN).   
-000251c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000251d0: 7c20 2020 2020 2020 7c20 2020 2020 2020  |       |       
-000251e0: 2020 2020 7c0a 2020 2020 2020 2020 2020      |.          
-000251f0: 2020 2020 2020 2020 207c 2020 2020 2020           |      
-00025200: 207c 2020 2020 2020 2020 2020 207c 0a20   |           |. 
-00025210: 2020 2020 2020 206d 6178 6970 203d 2028         maxip = (
-00025220: 6d61 7869 7031 2c20 6d61 7869 7032 2c20  maxip1, maxip2, 
-00025230: 2e2e 2e20 6d61 7869 704e 290a 0a20 2020  ... maxipN)..   
-00025240: 204c 6f6e 6765 7220 6974 6572 6162 6c65   Longer iterable
-00025250: 2077 696c 6c20 6265 2074 7275 6e63 6174   will be truncat
-00025260: 6564 2074 6f20 6d61 7463 6820 6c65 6e67  ed to match leng
-00025270: 7468 206f 6620 7368 6f72 7465 7220 6f6e  th of shorter on
-00025280: 652e 0a0a 2020 2020 2020 2020 3e3e 3e20  e...        >>> 
-00025290: 4953 5f49 5041 4444 5245 5353 2829 2827  IS_IPADDRESS()('
-000252a0: 3139 322e 3136 382e 312e 3527 290a 2020  192.168.1.5').  
-000252b0: 2020 2020 2020 2827 3139 322e 3136 382e        ('192.168.
-000252c0: 312e 3527 2c20 4e6f 6e65 290a 2020 2020  1.5', None).    
-000252d0: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
-000252e0: 5245 5353 2869 735f 6970 7636 3d46 616c  RESS(is_ipv6=Fal
-000252f0: 7365 2928 2731 3932 2e31 3638 2e31 2e35  se)('192.168.1.5
-00025300: 2729 0a20 2020 2020 2020 2028 2731 3932  ').        ('192
-00025310: 2e31 3638 2e31 2e35 272c 204e 6f6e 6529  .168.1.5', None)
-00025320: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025330: 4950 4144 4452 4553 5328 2928 2732 3535  IPADDRESS()('255
-00025340: 2e32 3535 2e32 3535 2e32 3535 2729 0a20  .255.255.255'). 
-00025350: 2020 2020 2020 2028 2732 3535 2e32 3535         ('255.255
-00025360: 2e32 3535 2e32 3535 272c 204e 6f6e 6529  .255.255', None)
-00025370: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025380: 4950 4144 4452 4553 5328 2928 2731 3932  IPADDRESS()('192
-00025390: 2e31 3638 2e31 2e35 2027 290a 2020 2020  .168.1.5 ').    
-000253a0: 2020 2020 2827 3139 322e 3136 382e 312e      ('192.168.1.
-000253b0: 3520 272c 2027 656e 7465 7220 7661 6c69  5 ', 'enter vali
-000253c0: 6420 4950 2061 6464 7265 7373 2729 0a20  d IP address'). 
-000253d0: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-000253e0: 4144 4452 4553 5328 2928 2731 3932 2e31  ADDRESS()('192.1
-000253f0: 3638 2e31 2e31 2e35 2729 0a20 2020 2020  68.1.1.5').     
-00025400: 2020 2028 2731 3932 2e31 3638 2e31 2e31     ('192.168.1.1
-00025410: 2e35 272c 2027 656e 7465 7220 7661 6c69  .5', 'enter vali
-00025420: 6420 4950 2061 6464 7265 7373 2729 0a20  d IP address'). 
-00025430: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00025440: 4144 4452 4553 5328 2928 2731 3233 2e31  ADDRESS()('123.1
-00025450: 3233 2729 0a20 2020 2020 2020 2028 2731  23').        ('1
-00025460: 3233 2e31 3233 272c 2027 656e 7465 7220  23.123', 'enter 
-00025470: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-00025480: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
-00025490: 535f 4950 4144 4452 4553 5328 2928 2731  S_IPADDRESS()('1
-000254a0: 3131 312e 322e 332e 3427 290a 2020 2020  111.2.3.4').    
-000254b0: 2020 2020 2827 3131 3131 2e32 2e33 2e34      ('1111.2.3.4
-000254c0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-000254d0: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
-000254e0: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-000254f0: 4452 4553 5328 2928 2730 3131 312e 322e  DRESS()('0111.2.
-00025500: 332e 3427 290a 2020 2020 2020 2020 2827  3.4').        ('
-00025510: 3031 3131 2e32 2e33 2e34 272c 2027 656e  0111.2.3.4', 'en
-00025520: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
-00025530: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
-00025540: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
-00025550: 2928 2732 3536 2e32 2e33 2e34 2729 0a20  )('256.2.3.4'). 
-00025560: 2020 2020 2020 2028 2732 3536 2e32 2e33         ('256.2.3
-00025570: 2e34 272c 2027 656e 7465 7220 7661 6c69  .4', 'enter vali
-00025580: 6420 4950 2061 6464 7265 7373 2729 0a20  d IP address'). 
-00025590: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-000255a0: 4144 4452 4553 5328 2928 2733 3030 2e32  ADDRESS()('300.2
-000255b0: 2e33 2e34 2729 0a20 2020 2020 2020 2028  .3.4').        (
-000255c0: 2733 3030 2e32 2e33 2e34 272c 2027 656e  '300.2.3.4', 'en
-000255d0: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
-000255e0: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
-000255f0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
-00025600: 6d69 6e69 703d 2731 3932 2e31 3638 2e31  minip='192.168.1
-00025610: 2e30 272c 206d 6178 6970 3d27 3139 322e  .0', maxip='192.
-00025620: 3136 382e 312e 3235 3527 2928 2731 3932  168.1.255')('192
-00025630: 2e31 3638 2e31 2e31 3030 2729 0a20 2020  .168.1.100').   
-00025640: 2020 2020 2028 2731 3932 2e31 3638 2e31       ('192.168.1
-00025650: 2e31 3030 272c 204e 6f6e 6529 0a20 2020  .100', None).   
-00025660: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025670: 4452 4553 5328 6d69 6e69 703d 2731 2e32  DRESS(minip='1.2
-00025680: 2e33 2e35 272c 206d 6178 6970 3d27 312e  .3.5', maxip='1.
-00025690: 322e 332e 3927 2c20 6572 726f 725f 6d65  2.3.9', error_me
-000256a0: 7373 6167 653d 2742 6164 2069 7027 2928  ssage='Bad ip')(
-000256b0: 2731 2e32 2e33 2e34 2729 0a20 2020 2020  '1.2.3.4').     
-000256c0: 2020 2028 2731 2e32 2e33 2e34 272c 2027     ('1.2.3.4', '
-000256d0: 6261 6420 6970 2729 0a20 2020 2020 2020  bad ip').       
-000256e0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-000256f0: 5328 6d61 7869 703d 2731 2e32 2e33 2e34  S(maxip='1.2.3.4
-00025700: 272c 2069 6e76 6572 743d 5472 7565 2928  ', invert=True)(
-00025710: 2731 3237 2e30 2e30 2e31 2729 0a20 2020  '127.0.0.1').   
-00025720: 2020 2020 2028 2731 3237 2e30 2e30 2e31       ('127.0.0.1
-00025730: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-00025740: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-00025750: 5328 6d61 7869 703d 2731 3932 2e31 3638  S(maxip='192.168
-00025760: 2e31 2e34 272c 2069 6e76 6572 743d 5472  .1.4', invert=Tr
-00025770: 7565 2928 2731 3932 2e31 3638 2e31 2e34  ue)('192.168.1.4
-00025780: 2729 0a20 2020 2020 2020 2028 2731 3932  ').        ('192
-00025790: 2e31 3638 2e31 2e34 272c 2027 656e 7465  .168.1.4', 'ente
-000257a0: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-000257b0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
-000257c0: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
-000257d0: 5f6c 6f63 616c 686f 7374 3d54 7275 6529  _localhost=True)
-000257e0: 2827 3132 372e 302e 302e 3127 290a 2020  ('127.0.0.1').  
-000257f0: 2020 2020 2020 2827 3132 372e 302e 302e        ('127.0.0.
-00025800: 3127 2c20 4e6f 6e65 290a 2020 2020 2020  1', None).      
-00025810: 2020 3e3e 3e20 4953 5f49 5041 4444 5245    >>> IS_IPADDRE
-00025820: 5353 2869 735f 6c6f 6361 6c68 6f73 743d  SS(is_localhost=
-00025830: 5472 7565 2928 2731 3932 2e31 3638 2e31  True)('192.168.1
-00025840: 2e31 3027 290a 2020 2020 2020 2020 2827  .10').        ('
-00025850: 3139 322e 3136 382e 312e 3130 272c 2027  192.168.1.10', '
-00025860: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
-00025870: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-00025880: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-00025890: 5328 6973 5f6c 6f63 616c 686f 7374 3d46  S(is_localhost=F
-000258a0: 616c 7365 2928 2731 3237 2e30 2e30 2e31  alse)('127.0.0.1
-000258b0: 2729 0a20 2020 2020 2020 2028 2731 3237  ').        ('127
-000258c0: 2e30 2e30 2e31 272c 2027 656e 7465 7220  .0.0.1', 'enter 
-000258d0: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-000258e0: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
-000258f0: 535f 4950 4144 4452 4553 5328 6d61 7869  S_IPADDRESS(maxi
-00025900: 703d 2731 3030 2e30 2e30 2e30 272c 2069  p='100.0.0.0', i
-00025910: 735f 6c6f 6361 6c68 6f73 743d 5472 7565  s_localhost=True
-00025920: 2928 2731 3237 2e30 2e30 2e31 2729 0a20  )('127.0.0.1'). 
-00025930: 2020 2020 2020 2028 2731 3237 2e30 2e30         ('127.0.0
-00025940: 2e31 272c 2027 656e 7465 7220 7661 6c69  .1', 'enter vali
-00025950: 6420 4950 2061 6464 7265 7373 2729 0a0a  d IP address')..
-00025960: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00025970: 5041 4444 5245 5353 2829 2827 6665 3830  PADDRESS()('fe80
-00025980: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-00025990: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-000259a0: 2827 6665 3830 3a3a 3132 3663 3a38 6666  ('fe80::126c:8ff
-000259b0: 613a 6665 3232 3a62 3361 6627 2c20 4e6f  a:fe22:b3af', No
-000259c0: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-000259d0: 4953 5f49 5041 4444 5245 5353 2869 735f  IS_IPADDRESS(is_
-000259e0: 6970 7634 3d46 616c 7365 2928 2766 6538  ipv4=False)('fe8
-000259f0: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
-00025a00: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
-00025a10: 2028 2766 6538 303a 3a31 3236 633a 3866   ('fe80::126c:8f
-00025a20: 6661 3a66 6532 323a 6233 6166 272c 204e  fa:fe22:b3af', N
-00025a30: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00025a40: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
-00025a50: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
-00025a60: 3a66 6532 323a 6233 6166 2020 2729 0a20  :fe22:b3af  '). 
-00025a70: 2020 2020 2020 2028 2766 6538 303a 3a31         ('fe80::1
-00025a80: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00025a90: 6166 2020 272c 2027 656e 7465 7220 7661  af  ', 'enter va
-00025aa0: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
-00025ab0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025ac0: 4950 4144 4452 4553 5328 6973 5f69 7076  IPADDRESS(is_ipv
-00025ad0: 343d 5472 7565 2928 2766 6538 303a 3a31  4=True)('fe80::1
-00025ae0: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00025af0: 6166 2729 0a20 2020 2020 2020 2028 2766  af').        ('f
-00025b00: 6538 303a 3a31 3236 633a 3866 6661 3a66  e80::126c:8ffa:f
-00025b10: 6532 323a 6233 6166 272c 2027 656e 7465  e22:b3af', 'ente
-00025b20: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-00025b30: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
-00025b40: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
-00025b50: 5f69 7076 363d 5472 7565 2928 2731 3932  _ipv6=True)('192
-00025b60: 2e31 3638 2e31 2e31 2729 0a20 2020 2020  .168.1.1').     
-00025b70: 2020 2028 2731 3932 2e31 3638 2e31 2e31     ('192.168.1.1
-00025b80: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-00025b90: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
-00025ba0: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025bb0: 4452 4553 5328 6973 5f69 7076 363d 5472  DRESS(is_ipv6=Tr
-00025bc0: 7565 2c20 6572 726f 725f 6d65 7373 6167  ue, error_messag
-00025bd0: 653d 2742 6164 2069 7027 2928 2731 3932  e='Bad ip')('192
-00025be0: 2e31 3638 2e31 2e31 2729 0a20 2020 2020  .168.1.1').     
-00025bf0: 2020 2028 2731 3932 2e31 3638 2e31 2e31     ('192.168.1.1
-00025c00: 272c 2027 6261 6420 6970 2729 0a20 2020  ', 'bad ip').   
-00025c10: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025c20: 4452 4553 5328 6973 5f6c 696e 6b5f 6c6f  DRESS(is_link_lo
-00025c30: 6361 6c3d 5472 7565 2928 2766 6538 303a  cal=True)('fe80:
-00025c40: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
-00025c50: 6233 6166 2729 0a20 2020 2020 2020 2028  b3af').        (
-00025c60: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
-00025c70: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
-00025c80: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-00025c90: 535f 4950 4144 4452 4553 5328 6973 5f6c  S_IPADDRESS(is_l
-00025ca0: 696e 6b5f 6c6f 6361 6c3d 4661 6c73 6529  ink_local=False)
-00025cb0: 2827 6665 3830 3a3a 3132 3663 3a38 6666  ('fe80::126c:8ff
-00025cc0: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
-00025cd0: 2020 2020 2020 2827 6665 3830 3a3a 3132        ('fe80::12
-00025ce0: 3663 3a38 6666 613a 6665 3232 3a62 3361  6c:8ffa:fe22:b3a
-00025cf0: 6627 2c20 2765 6e74 6572 2076 616c 6964  f', 'enter valid
-00025d00: 2049 5020 6164 6472 6573 7327 290a 2020   IP address').  
-00025d10: 2020 2020 2020 3e3e 3e20 4953 5f49 5041        >>> IS_IPA
-00025d20: 4444 5245 5353 2869 735f 6c69 6e6b 5f6c  DDRESS(is_link_l
-00025d30: 6f63 616c 3d54 7275 6529 2827 3230 3031  ocal=True)('2001
-00025d40: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-00025d50: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-00025d60: 2827 3230 3031 3a3a 3132 3663 3a38 6666  ('2001::126c:8ff
-00025d70: 613a 6665 3232 3a62 3361 6627 2c20 2765  a:fe22:b3af', 'e
-00025d80: 6e74 6572 2076 616c 6964 2049 5020 6164  nter valid IP ad
-00025d90: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-00025da0: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
-00025db0: 2869 735f 6d75 6c74 6963 6173 743d 5472  (is_multicast=Tr
-00025dc0: 7565 2928 2732 3030 313a 3a31 3236 633a  ue)('2001::126c:
-00025dd0: 3866 6661 3a66 6532 323a 6233 6166 2729  8ffa:fe22:b3af')
-00025de0: 0a20 2020 2020 2020 2028 2732 3030 313a  .        ('2001:
-00025df0: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
-00025e00: 6233 6166 272c 2027 656e 7465 7220 7661  b3af', 'enter va
-00025e10: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
-00025e20: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025e30: 4950 4144 4452 4553 5328 6973 5f6d 756c  IPADDRESS(is_mul
-00025e40: 7469 6361 7374 3d54 7275 6529 2827 6666  ticast=True)('ff
-00025e50: 3030 3a3a 3132 3663 3a38 6666 613a 6665  00::126c:8ffa:fe
-00025e60: 3232 3a62 3361 6627 290a 2020 2020 2020  22:b3af').      
-00025e70: 2020 2827 6666 3030 3a3a 3132 3663 3a38    ('ff00::126c:8
-00025e80: 6666 613a 6665 3232 3a62 3361 6627 2c20  ffa:fe22:b3af', 
-00025e90: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
-00025ea0: 3e20 4953 5f49 5041 4444 5245 5353 2869  > IS_IPADDRESS(i
-00025eb0: 735f 726f 7574 6561 626c 653d 5472 7565  s_routeable=True
-00025ec0: 2928 2732 3030 313a 3a31 3236 633a 3866  )('2001::126c:8f
-00025ed0: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
-00025ee0: 2020 2020 2020 2028 2732 3030 313a 3a31         ('2001::1
-00025ef0: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00025f00: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
-00025f10: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
-00025f20: 4553 5328 6973 5f72 6f75 7465 6162 6c65  ESS(is_routeable
-00025f30: 3d54 7275 6529 2827 6666 3030 3a3a 3132  =True)('ff00::12
-00025f40: 3663 3a38 6666 613a 6665 3232 3a62 3361  6c:8ffa:fe22:b3a
-00025f50: 6627 290a 2020 2020 2020 2020 2827 6666  f').        ('ff
-00025f60: 3030 3a3a 3132 3663 3a38 6666 613a 6665  00::126c:8ffa:fe
-00025f70: 3232 3a62 3361 6627 2c20 2765 6e74 6572  22:b3af', 'enter
-00025f80: 2076 616c 6964 2049 5020 6164 6472 6573   valid IP addres
-00025f90: 7327 290a 2020 2020 2020 2020 3e3e 3e20  s').        >>> 
-00025fa0: 4953 5f49 5041 4444 5245 5353 2873 7562  IS_IPADDRESS(sub
-00025fb0: 6e65 7473 3d27 3230 3031 3a3a 2f33 3227  nets='2001::/32'
-00025fc0: 2928 2732 3030 313a 3a38 6666 613a 6665  )('2001::8ffa:fe
-00025fd0: 3232 3a62 3361 6627 290a 2020 2020 2020  22:b3af').      
-00025fe0: 2020 2827 3230 3031 3a3a 3866 6661 3a66    ('2001::8ffa:f
-00025ff0: 6532 323a 6233 6166 272c 204e 6f6e 6529  e22:b3af', None)
-00026000: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00026010: 4950 4144 4452 4553 5328 7375 626e 6574  IPADDRESS(subnet
-00026020: 733d 2766 6230 303a 3a2f 3827 2928 2732  s='fb00::/8')('2
-00026030: 3030 313a 3a38 6666 613a 6665 3232 3a62  001::8ffa:fe22:b
-00026040: 3361 6627 290a 2020 2020 2020 2020 2827  3af').        ('
-00026050: 3230 3031 3a3a 3866 6661 3a66 6532 323a  2001::8ffa:fe22:
-00026060: 6233 6166 272c 2027 656e 7465 7220 7661  b3af', 'enter va
-00026070: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
-00026080: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00026090: 4950 4144 4452 4553 5328 7375 626e 6574  IPADDRESS(subnet
-000260a0: 733d 5b27 6663 3030 3a3a 2f38 272c 2732  s=['fc00::/8','2
-000260b0: 3030 313a 3a2f 3332 275d 2928 2732 3030  001::/32'])('200
-000260c0: 313a 3a38 6666 613a 6665 3232 3a62 3361  1::8ffa:fe22:b3a
-000260d0: 6627 290a 2020 2020 2020 2020 2827 3230  f').        ('20
-000260e0: 3031 3a3a 3866 6661 3a66 6532 323a 6233  01::8ffa:fe22:b3
-000260f0: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
-00026100: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
-00026110: 4553 5328 7375 626e 6574 733d 2769 6e76  ESS(subnets='inv
-00026120: 616c 6964 7375 626e 6574 2729 2827 3230  alidsubnet')('20
-00026130: 3031 3a3a 3866 6661 3a66 6532 323a 6233  01::8ffa:fe22:b3
-00026140: 6166 2729 0a20 2020 2020 2020 2028 2732  af').        ('2
-00026150: 3030 313a 3a38 6666 613a 6665 3232 3a62  001::8ffa:fe22:b
-00026160: 3361 6627 2c20 2769 6e76 616c 6964 2073  3af', 'invalid s
-00026170: 7562 6e65 7420 7072 6f76 6964 6564 2729  ubnet provided')
-00026180: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
-00026190: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-000261a0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-000261b0: 2020 6d69 6e69 703d 2230 2e30 2e30 2e30    minip="0.0.0.0
-000261c0: 222c 0a20 2020 2020 2020 206d 6178 6970  ",.        maxip
-000261d0: 3d22 3235 352e 3235 352e 3235 352e 3235  ="255.255.255.25
-000261e0: 3522 2c0a 2020 2020 2020 2020 696e 7665  5",.        inve
-000261f0: 7274 3d46 616c 7365 2c0a 2020 2020 2020  rt=False,.      
-00026200: 2020 6973 5f6c 6f63 616c 686f 7374 3d4e    is_localhost=N
-00026210: 6f6e 652c 0a20 2020 2020 2020 2069 735f  one,.        is_
-00026220: 7072 6976 6174 653d 4e6f 6e65 2c0a 2020  private=None,.  
-00026230: 2020 2020 2020 6973 5f61 7574 6f6d 6174        is_automat
-00026240: 6963 3d4e 6f6e 652c 0a20 2020 2020 2020  ic=None,.       
-00026250: 2069 735f 6970 7634 3d4e 6f6e 652c 0a20   is_ipv4=None,. 
-00026260: 2020 2020 2020 2069 735f 6c69 6e6b 5f6c         is_link_l
-00026270: 6f63 616c 3d4e 6f6e 652c 0a20 2020 2020  ocal=None,.     
-00026280: 2020 2069 735f 7265 7365 7276 6564 3d4e     is_reserved=N
-00026290: 6f6e 652c 0a20 2020 2020 2020 2069 735f  one,.        is_
-000262a0: 6d75 6c74 6963 6173 743d 4e6f 6e65 2c0a  multicast=None,.
-000262b0: 2020 2020 2020 2020 6973 5f72 6f75 7465          is_route
-000262c0: 6162 6c65 3d4e 6f6e 652c 0a20 2020 2020  able=None,.     
-000262d0: 2020 2069 735f 3674 6f34 3d4e 6f6e 652c     is_6to4=None,
-000262e0: 0a20 2020 2020 2020 2069 735f 7465 7265  .        is_tere
-000262f0: 646f 3d4e 6f6e 652c 0a20 2020 2020 2020  do=None,.       
-00026300: 2073 7562 6e65 7473 3d4e 6f6e 652c 0a20   subnets=None,. 
-00026310: 2020 2020 2020 2069 735f 6970 7636 3d4e         is_ipv6=N
-00026320: 6f6e 652c 0a20 2020 2020 2020 2065 7272  one,.        err
-00026330: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-00026340: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-00026350: 7373 222c 0a20 2020 2029 3a0a 2020 2020  ss",.    ):.    
-00026360: 2020 2020 7365 6c66 2e6d 696e 6970 203d      self.minip =
-00026370: 2028 6d69 6e69 702c 290a 2020 2020 2020   (minip,).      
-00026380: 2020 7365 6c66 2e6d 6178 6970 203d 2028    self.maxip = (
-00026390: 6d61 7869 702c 290a 2020 2020 2020 2020  maxip,).        
-000263a0: 7365 6c66 2e69 6e76 6572 7420 3d20 696e  self.invert = in
-000263b0: 7665 7274 0a20 2020 2020 2020 2073 656c  vert.        sel
-000263c0: 662e 6973 5f6c 6f63 616c 686f 7374 203d  f.is_localhost =
-000263d0: 2069 735f 6c6f 6361 6c68 6f73 740a 2020   is_localhost.  
-000263e0: 2020 2020 2020 7365 6c66 2e69 735f 7072        self.is_pr
-000263f0: 6976 6174 6520 3d20 6973 5f70 7269 7661  ivate = is_priva
-00026400: 7465 0a20 2020 2020 2020 2073 656c 662e  te.        self.
-00026410: 6973 5f61 7574 6f6d 6174 6963 203d 2069  is_automatic = i
-00026420: 735f 6175 746f 6d61 7469 630a 2020 2020  s_automatic.    
-00026430: 2020 2020 7365 6c66 2e69 735f 6970 7634      self.is_ipv4
-00026440: 203d 2069 735f 6970 7634 206f 7220 6973   = is_ipv4 or is
-00026450: 5f69 7076 3620 6973 2046 616c 7365 0a20  _ipv6 is False. 
-00026460: 2020 2020 2020 2073 656c 662e 6973 5f70         self.is_p
-00026470: 7269 7661 7465 203d 2069 735f 7072 6976  rivate = is_priv
-00026480: 6174 650a 2020 2020 2020 2020 7365 6c66  ate.        self
-00026490: 2e69 735f 6c69 6e6b 5f6c 6f63 616c 203d  .is_link_local =
-000264a0: 2069 735f 6c69 6e6b 5f6c 6f63 616c 0a20   is_link_local. 
-000264b0: 2020 2020 2020 2073 656c 662e 6973 5f72         self.is_r
-000264c0: 6573 6572 7665 6420 3d20 6973 5f72 6573  eserved = is_res
-000264d0: 6572 7665 640a 2020 2020 2020 2020 7365  erved.        se
-000264e0: 6c66 2e69 735f 6d75 6c74 6963 6173 7420  lf.is_multicast 
-000264f0: 3d20 6973 5f6d 756c 7469 6361 7374 0a20  = is_multicast. 
-00026500: 2020 2020 2020 2073 656c 662e 6973 5f72         self.is_r
-00026510: 6f75 7465 6162 6c65 203d 2069 735f 726f  outeable = is_ro
-00026520: 7574 6561 626c 650a 2020 2020 2020 2020  uteable.        
-00026530: 7365 6c66 2e69 735f 3674 6f34 203d 2069  self.is_6to4 = i
-00026540: 735f 3674 6f34 0a20 2020 2020 2020 2073  s_6to4.        s
-00026550: 656c 662e 6973 5f74 6572 6564 6f20 3d20  elf.is_teredo = 
-00026560: 6973 5f74 6572 6564 6f0a 2020 2020 2020  is_teredo.      
-00026570: 2020 7365 6c66 2e73 7562 6e65 7473 203d    self.subnets =
-00026580: 2073 7562 6e65 7473 0a20 2020 2020 2020   subnets.       
-00026590: 2073 656c 662e 6973 5f69 7076 3620 3d20   self.is_ipv6 = 
-000265a0: 6973 5f69 7076 3620 6f72 2069 735f 6970  is_ipv6 or is_ip
-000265b0: 7634 2069 7320 4661 6c73 650a 2020 2020  v4 is False.    
-000265c0: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-000265d0: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
-000265e0: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
-000265f0: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00026600: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00026610: 4e6f 6e65 293a 0a20 2020 2020 2020 2049  None):.        I
-00026620: 5041 6464 7265 7373 203d 2069 7061 6464  PAddress = ipadd
-00026630: 7265 7373 2e69 705f 6164 6472 6573 730a  ress.ip_address.
-00026640: 2020 2020 2020 2020 4950 7636 4164 6472          IPv6Addr
-00026650: 6573 7320 3d20 6970 6164 6472 6573 732e  ess = ipaddress.
-00026660: 4950 7636 4164 6472 6573 730a 2020 2020  IPv6Address.    
-00026670: 2020 2020 4950 7634 4164 6472 6573 7320      IPv4Address 
-00026680: 3d20 6970 6164 6472 6573 732e 4950 7634  = ipaddress.IPv4
-00026690: 4164 6472 6573 730a 0a20 2020 2020 2020  Address..       
-000266a0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-000266b0: 2020 6970 203d 2049 5041 6464 7265 7373    ip = IPAddress
-000266c0: 2874 6f5f 756e 6963 6f64 6528 7661 6c75  (to_unicode(valu
-000266d0: 6529 290a 2020 2020 2020 2020 6578 6365  e)).        exce
-000266e0: 7074 2056 616c 7565 4572 726f 723a 0a20  pt ValueError:. 
-000266f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00026700: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00026710: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-00026720: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00026730: 6167 6529 290a 0a20 2020 2020 2020 2069  age))..        i
-00026740: 6620 7365 6c66 2e69 735f 6970 7634 2061  f self.is_ipv4 a
-00026750: 6e64 2069 7369 6e73 7461 6e63 6528 6970  nd isinstance(ip
-00026760: 2c20 4950 7636 4164 6472 6573 7329 3a0a  , IPv6Address):.
-00026770: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00026780: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-00026790: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-000267a0: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-000267b0: 7361 6765 2929 0a20 2020 2020 2020 2065  sage)).        e
-000267c0: 6c69 6620 7365 6c66 2e69 735f 6970 7636  lif self.is_ipv6
-000267d0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-000267e0: 6970 2c20 4950 7634 4164 6472 6573 7329  ip, IPv4Address)
-000267f0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00026800: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-00026810: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
-00026820: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
-00026830: 6573 7361 6765 2929 0a20 2020 2020 2020  essage)).       
-00026840: 2065 6c69 6620 7365 6c66 2e69 735f 6970   elif self.is_ip
-00026850: 7634 206f 7220 6973 696e 7374 616e 6365  v4 or isinstance
-00026860: 2869 702c 2049 5076 3441 6464 7265 7373  (ip, IPv4Address
-00026870: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00026880: 6574 7572 6e20 4953 5f49 5056 3428 0a20  eturn IS_IPV4(. 
-00026890: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000268a0: 696e 6970 3d73 656c 662e 6d69 6e69 702c  inip=self.minip,
-000268b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000268c0: 206d 6178 6970 3d73 656c 662e 6d61 7869   maxip=self.maxi
-000268d0: 702c 0a20 2020 2020 2020 2020 2020 2020  p,.             
-000268e0: 2020 2069 6e76 6572 743d 7365 6c66 2e69     invert=self.i
-000268f0: 6e76 6572 742c 0a20 2020 2020 2020 2020  nvert,.         
-00026900: 2020 2020 2020 2069 735f 6c6f 6361 6c68         is_localh
-00026910: 6f73 743d 7365 6c66 2e69 735f 6c6f 6361  ost=self.is_loca
-00026920: 6c68 6f73 742c 0a20 2020 2020 2020 2020  lhost,.         
-00026930: 2020 2020 2020 2069 735f 7072 6976 6174         is_privat
-00026940: 653d 7365 6c66 2e69 735f 7072 6976 6174  e=self.is_privat
-00026950: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00026960: 2020 2069 735f 6175 746f 6d61 7469 633d     is_automatic=
-00026970: 7365 6c66 2e69 735f 6175 746f 6d61 7469  self.is_automati
-00026980: 632c 0a20 2020 2020 2020 2020 2020 2020  c,.             
-00026990: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
-000269a0: 3d73 656c 662e 6572 726f 725f 6d65 7373  =self.error_mess
-000269b0: 6167 652c 0a20 2020 2020 2020 2020 2020  age,.           
-000269c0: 2029 2e76 616c 6964 6174 6528 7661 6c75   ).validate(valu
-000269d0: 652c 2072 6563 6f72 645f 6964 290a 2020  e, record_id).  
-000269e0: 2020 2020 2020 656c 6966 2073 656c 662e        elif self.
-000269f0: 6973 5f69 7076 3620 6f72 2069 7369 6e73  is_ipv6 or isins
-00026a00: 7461 6e63 6528 6970 2c20 4950 7636 4164  tance(ip, IPv6Ad
-00026a10: 6472 6573 7329 3a0a 2020 2020 2020 2020  dress):.        
-00026a20: 2020 2020 7265 7475 726e 2049 535f 4950      return IS_IP
-00026a30: 5636 280a 2020 2020 2020 2020 2020 2020  V6(.            
-00026a40: 2020 2020 6973 5f70 7269 7661 7465 3d73      is_private=s
-00026a50: 656c 662e 6973 5f70 7269 7661 7465 2c0a  elf.is_private,.
-00026a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026a70: 6973 5f6c 696e 6b5f 6c6f 6361 6c3d 7365  is_link_local=se
-00026a80: 6c66 2e69 735f 6c69 6e6b 5f6c 6f63 616c  lf.is_link_local
-00026a90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00026aa0: 2020 6973 5f72 6573 6572 7665 643d 7365    is_reserved=se
-00026ab0: 6c66 2e69 735f 7265 7365 7276 6564 2c0a  lf.is_reserved,.
-00026ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026ad0: 6973 5f6d 756c 7469 6361 7374 3d73 656c  is_multicast=sel
-00026ae0: 662e 6973 5f6d 756c 7469 6361 7374 2c0a  f.is_multicast,.
-00026af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b00: 6973 5f72 6f75 7465 6162 6c65 3d73 656c  is_routeable=sel
-00026b10: 662e 6973 5f72 6f75 7465 6162 6c65 2c0a  f.is_routeable,.
-00026b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b30: 6973 5f36 746f 343d 7365 6c66 2e69 735f  is_6to4=self.is_
-00026b40: 3674 6f34 2c0a 2020 2020 2020 2020 2020  6to4,.          
-00026b50: 2020 2020 2020 6973 5f74 6572 6564 6f3d        is_teredo=
-00026b60: 7365 6c66 2e69 735f 7465 7265 646f 2c0a  self.is_teredo,.
-00026b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026b80: 7375 626e 6574 733d 7365 6c66 2e73 7562  subnets=self.sub
-00026b90: 6e65 7473 2c0a 2020 2020 2020 2020 2020  nets,.          
-00026ba0: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-00026bb0: 6167 653d 7365 6c66 2e65 7272 6f72 5f6d  age=self.error_m
-00026bc0: 6573 7361 6765 2c0a 2020 2020 2020 2020  essage,.        
-00026bd0: 2020 2020 292e 7661 6c69 6461 7465 2876      ).validate(v
-00026be0: 616c 7565 2c20 7265 636f 7264 5f69 6429  alue, record_id)
-00026bf0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00026c00: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00026c10: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00026c20: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-00026c30: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00026c40: 6167 6529 290a                           age)).
+00022370: 5634 2829 2827 3132 332e 3132 3327 290a  V4()('123.123').
+00022380: 2020 2020 2020 2020 2020 2020 2827 3132              ('12
+00022390: 332e 3132 3327 2c20 2765 6e74 6572 2076  3.123', 'enter v
+000223a0: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
+000223b0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+000223c0: 3e3e 3e20 4953 5f49 5056 3428 2928 2731  >>> IS_IPV4()('1
+000223d0: 3131 312e 322e 332e 3427 290a 2020 2020  111.2.3.4').    
+000223e0: 2020 2020 2020 2020 2827 3131 3131 2e32          ('1111.2
+000223f0: 2e33 2e34 272c 2027 656e 7465 7220 7661  .3.4', 'enter va
+00022400: 6c69 6420 4950 7634 2061 6464 7265 7373  lid IPv4 address
+00022410: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+00022420: 3e3e 2049 535f 4950 5634 2829 2827 3031  >> IS_IPV4()('01
+00022430: 3131 2e32 2e33 2e34 2729 0a20 2020 2020  11.2.3.4').     
+00022440: 2020 2020 2020 2028 2730 3131 312e 322e         ('0111.2.
+00022450: 332e 3427 2c20 2765 6e74 6572 2076 616c  3.4', 'enter val
+00022460: 6964 2049 5076 3420 6164 6472 6573 7327  id IPv4 address'
+00022470: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00022480: 3e20 4953 5f49 5056 3428 2928 2732 3536  > IS_IPV4()('256
+00022490: 2e32 2e33 2e34 2729 0a20 2020 2020 2020  .2.3.4').       
+000224a0: 2020 2020 2028 2732 3536 2e32 2e33 2e34       ('256.2.3.4
+000224b0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+000224c0: 4950 7634 2061 6464 7265 7373 2729 0a20  IPv4 address'). 
+000224d0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+000224e0: 535f 4950 5634 2829 2827 3330 302e 322e  S_IPV4()('300.2.
+000224f0: 332e 3427 290a 2020 2020 2020 2020 2020  3.4').          
+00022500: 2020 2827 3330 302e 322e 332e 3427 2c20    ('300.2.3.4', 
+00022510: 2765 6e74 6572 2076 616c 6964 2049 5076  'enter valid IPv
+00022520: 3420 6164 6472 6573 7327 290a 2020 2020  4 address').    
+00022530: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00022540: 5056 3428 6d69 6e69 703d 2731 2e32 2e33  PV4(minip='1.2.3
+00022550: 2e34 272c 206d 6178 6970 3d27 312e 322e  .4', maxip='1.2.
+00022560: 332e 3427 2928 2731 2e32 2e33 2e34 2729  3.4')('1.2.3.4')
+00022570: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
+00022580: 2e32 2e33 2e34 272c 204e 6f6e 6529 0a20  .2.3.4', None). 
+00022590: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+000225a0: 535f 4950 5634 286d 696e 6970 3d27 312e  S_IPV4(minip='1.
+000225b0: 322e 332e 3527 2c20 6d61 7869 703d 2731  2.3.5', maxip='1
+000225c0: 2e32 2e33 2e39 272c 2065 7272 6f72 5f6d  .2.3.9', error_m
+000225d0: 6573 7361 6765 3d27 4261 6420 6970 2729  essage='Bad ip')
+000225e0: 2827 312e 322e 332e 3427 290a 2020 2020  ('1.2.3.4').    
+000225f0: 2020 2020 2020 2020 2827 312e 322e 332e          ('1.2.3.
+00022600: 3427 2c20 2762 6164 2069 7027 290a 2020  4', 'bad ip').  
+00022610: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00022620: 5f49 5056 3428 6d61 7869 703d 2731 2e32  _IPV4(maxip='1.2
+00022630: 2e33 2e34 272c 2069 6e76 6572 743d 5472  .3.4', invert=Tr
+00022640: 7565 2928 2731 3237 2e30 2e30 2e31 2729  ue)('127.0.0.1')
+00022650: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
+00022660: 3237 2e30 2e30 2e31 272c 204e 6f6e 6529  27.0.0.1', None)
+00022670: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00022680: 2049 535f 4950 5634 286d 6178 6970 3d27   IS_IPV4(maxip='
+00022690: 312e 322e 332e 3427 2c20 696e 7665 7274  1.2.3.4', invert
+000226a0: 3d54 7275 6529 2827 312e 322e 332e 3427  =True)('1.2.3.4'
+000226b0: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+000226c0: 312e 322e 332e 3427 2c20 2765 6e74 6572  1.2.3.4', 'enter
+000226d0: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
+000226e0: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+000226f0: 2020 3e3e 3e20 4953 5f49 5056 3428 6973    >>> IS_IPV4(is
+00022700: 5f6c 6f63 616c 686f 7374 3d54 7275 6529  _localhost=True)
+00022710: 2827 3132 372e 302e 302e 3127 290a 2020  ('127.0.0.1').  
+00022720: 2020 2020 2020 2020 2020 2827 3132 372e            ('127.
+00022730: 302e 302e 3127 2c20 4e6f 6e65 290a 2020  0.0.1', None).  
+00022740: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00022750: 5f49 5056 3428 6973 5f6c 6f63 616c 686f  _IPV4(is_localho
+00022760: 7374 3d54 7275 6529 2827 312e 322e 332e  st=True)('1.2.3.
+00022770: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
+00022780: 2827 312e 322e 332e 3427 2c20 2765 6e74  ('1.2.3.4', 'ent
+00022790: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
+000227a0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+000227b0: 2020 2020 3e3e 3e20 4953 5f49 5056 3428      >>> IS_IPV4(
+000227c0: 6973 5f6c 6f63 616c 686f 7374 3d46 616c  is_localhost=Fal
+000227d0: 7365 2928 2731 3237 2e30 2e30 2e31 2729  se)('127.0.0.1')
+000227e0: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
+000227f0: 3237 2e30 2e30 2e31 272c 2027 656e 7465  27.0.0.1', 'ente
+00022800: 7220 7661 6c69 6420 4950 7634 2061 6464  r valid IPv4 add
+00022810: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
+00022820: 2020 203e 3e3e 2049 535f 4950 5634 286d     >>> IS_IPV4(m
+00022830: 6178 6970 3d27 3130 302e 302e 302e 3027  axip='100.0.0.0'
+00022840: 2c20 6973 5f6c 6f63 616c 686f 7374 3d54  , is_localhost=T
+00022850: 7275 6529 2827 3132 372e 302e 302e 3127  rue)('127.0.0.1'
+00022860: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00022870: 3132 372e 302e 302e 3127 2c20 2765 6e74  127.0.0.1', 'ent
+00022880: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
+00022890: 6472 6573 7327 290a 0a20 2020 2022 2222  dress')..    """
+000228a0: 0a0a 2020 2020 5245 4745 585f 4950 5634  ..    REGEX_IPV4
+000228b0: 203d 2072 652e 636f 6d70 696c 6528 0a20   = re.compile(. 
+000228c0: 2020 2020 2020 2072 225e 2828 5b31 2d39         r"^(([1-9
+000228d0: 5d3f 5c64 7c31 5c64 5c64 7c32 5b30 2d34  ]?\d|1\d\d|2[0-4
+000228e0: 5d5c 647c 3235 5b30 2d35 5d29 5c2e 297b  ]\d|25[0-5])\.){
+000228f0: 337d 285b 312d 395d 3f5c 647c 315c 645c  3}([1-9]?\d|1\d\
+00022900: 647c 325b 302d 345d 5c64 7c32 355b 302d  d|2[0-4]\d|25[0-
+00022910: 355d 2924 220a 2020 2020 290a 2020 2020  5])$".    ).    
+00022920: 6e75 6d62 6572 7320 3d20 2831 3637 3737  numbers = (16777
+00022930: 3231 362c 2036 3535 3336 2c20 3235 362c  216, 65536, 256,
+00022940: 2031 290a 2020 2020 6c6f 6361 6c68 6f73   1).    localhos
+00022950: 7420 3d20 3231 3330 3730 3634 3333 0a20  t = 2130706433. 
+00022960: 2020 2070 7269 7661 7465 203d 2028 2832     private = ((2
+00022970: 3838 3637 3239 3732 382c 2032 3838 3637  886729728, 28867
+00022980: 3935 3236 3329 2c20 2833 3233 3232 3335  95263), (3232235
+00022990: 3532 302c 2033 3233 3233 3031 3035 3529  520, 3232301055)
+000229a0: 290a 2020 2020 6175 746f 6d61 7469 6320  ).    automatic 
+000229b0: 3d20 2832 3835 3139 3935 3634 382c 2032  = (2851995648, 2
+000229c0: 3835 3230 3631 3138 3329 0a0a 2020 2020  852061183)..    
+000229d0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
+000229e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+000229f0: 2020 2020 6d69 6e69 703d 2230 2e30 2e30      minip="0.0.0
+00022a00: 2e30 222c 0a20 2020 2020 2020 206d 6178  .0",.        max
+00022a10: 6970 3d22 3235 352e 3235 352e 3235 352e  ip="255.255.255.
+00022a20: 3235 3522 2c0a 2020 2020 2020 2020 696e  255",.        in
+00022a30: 7665 7274 3d46 616c 7365 2c0a 2020 2020  vert=False,.    
+00022a40: 2020 2020 6973 5f6c 6f63 616c 686f 7374      is_localhost
+00022a50: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+00022a60: 735f 7072 6976 6174 653d 4e6f 6e65 2c0a  s_private=None,.
+00022a70: 2020 2020 2020 2020 6973 5f61 7574 6f6d          is_autom
+00022a80: 6174 6963 3d4e 6f6e 652c 0a20 2020 2020  atic=None,.     
+00022a90: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
+00022aa0: 3d22 456e 7465 7220 7661 6c69 6420 4950  ="Enter valid IP
+00022ab0: 7634 2061 6464 7265 7373 222c 0a20 2020  v4 address",.   
+00022ac0: 2029 3a0a 2020 2020 2020 2020 666f 7220   ):.        for 
+00022ad0: 6e2c 2076 616c 7565 2069 6e20 656e 756d  n, value in enum
+00022ae0: 6572 6174 6528 286d 696e 6970 2c20 6d61  erate((minip, ma
+00022af0: 7869 7029 293a 0a20 2020 2020 2020 2020  xip)):.         
+00022b00: 2020 2074 656d 7020 3d20 5b5d 0a20 2020     temp = [].   
+00022b10: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00022b20: 7374 616e 6365 2876 616c 7565 2c20 7374  stance(value, st
+00022b30: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00022b40: 2020 2020 7465 6d70 2e61 7070 656e 6428      temp.append(
+00022b50: 7661 6c75 652e 7370 6c69 7428 222e 2229  value.split(".")
+00022b60: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00022b70: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+00022b80: 6c75 652c 2028 6c69 7374 2c20 7475 706c  lue, (list, tupl
+00022b90: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+00022ba0: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
+00022bb0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+00022bc0: 6e28 7661 6c75 6529 0a20 2020 2020 2020  n(value).       
+00022bd0: 2020 2020 2020 2020 2020 2020 203d 3d20               == 
+00022be0: 6c65 6e28 5b69 7465 6d20 666f 7220 6974  len([item for it
+00022bf0: 656d 2069 6e20 7661 6c75 6520 6966 2069  em in value if i
+00022c00: 7369 6e73 7461 6e63 6528 6974 656d 2c20  sinstance(item, 
+00022c10: 696e 7429 5d29 0a20 2020 2020 2020 2020  int)]).         
+00022c20: 2020 2020 2020 2020 2020 203d 3d20 340a             == 4.
+00022c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022c40: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00022c50: 2020 2020 2020 2074 656d 702e 6170 7065         temp.appe
+00022c60: 6e64 2876 616c 7565 290a 2020 2020 2020  nd(value).      
+00022c70: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00022c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022c90: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
+00022ca0: 7661 6c75 653a 0a20 2020 2020 2020 2020  value:.         
+00022cb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00022cc0: 6620 6973 696e 7374 616e 6365 2869 7465  f isinstance(ite
+00022cd0: 6d2c 2073 7472 293a 0a20 2020 2020 2020  m, str):.       
+00022ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022cf0: 2020 2020 2074 656d 702e 6170 7065 6e64       temp.append
+00022d00: 2869 7465 6d2e 7370 6c69 7428 222e 2229  (item.split(".")
+00022d10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00022d20: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+00022d30: 7369 6e73 7461 6e63 6528 6974 656d 2c20  sinstance(item, 
+00022d40: 286c 6973 742c 2074 7570 6c65 2929 3a0a  (list, tuple)):.
+00022d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022d60: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
+00022d70: 2e61 7070 656e 6428 6974 656d 290a 2020  .append(item).  
+00022d80: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
+00022d90: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
+00022da0: 2020 2066 6f72 2069 7465 6d20 696e 2074     for item in t
+00022db0: 656d 703a 0a20 2020 2020 2020 2020 2020  emp:.           
+00022dc0: 2020 2020 206e 756d 6265 7220 3d20 300a       number = 0.
+00022dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022de0: 666f 7220 692c 206a 2069 6e20 7a69 7028  for i, j in zip(
+00022df0: 7365 6c66 2e6e 756d 6265 7273 2c20 6974  self.numbers, it
+00022e00: 656d 293a 0a20 2020 2020 2020 2020 2020  em):.           
+00022e10: 2020 2020 2020 2020 206e 756d 6265 7220           number 
+00022e20: 2b3d 2069 202a 2069 6e74 286a 290a 2020  += i * int(j).  
+00022e30: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
+00022e40: 6d62 6572 732e 6170 7065 6e64 286e 756d  mbers.append(num
+00022e50: 6265 7229 0a20 2020 2020 2020 2020 2020  ber).           
+00022e60: 2069 6620 6e20 3d3d 2030 3a0a 2020 2020   if n == 0:.    
+00022e70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00022e80: 2e6d 696e 6970 203d 206e 756d 6265 7273  .minip = numbers
+00022e90: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00022ea0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00022eb0: 2020 2073 656c 662e 6d61 7869 7020 3d20     self.maxip = 
+00022ec0: 6e75 6d62 6572 730a 2020 2020 2020 2020  numbers.        
+00022ed0: 7365 6c66 2e69 6e76 6572 7420 3d20 696e  self.invert = in
+00022ee0: 7665 7274 0a20 2020 2020 2020 2073 656c  vert.        sel
+00022ef0: 662e 6973 5f6c 6f63 616c 686f 7374 203d  f.is_localhost =
+00022f00: 2069 735f 6c6f 6361 6c68 6f73 740a 2020   is_localhost.  
+00022f10: 2020 2020 2020 7365 6c66 2e69 735f 7072        self.is_pr
+00022f20: 6976 6174 6520 3d20 6973 5f70 7269 7661  ivate = is_priva
+00022f30: 7465 0a20 2020 2020 2020 2073 656c 662e  te.        self.
+00022f40: 6973 5f61 7574 6f6d 6174 6963 203d 2069  is_automatic = i
+00022f50: 735f 6175 746f 6d61 7469 630a 2020 2020  s_automatic.    
+00022f60: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+00022f70: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
+00022f80: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
+00022f90: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
+00022fa0: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
+00022fb0: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
+00022fc0: 6620 7265 2e6d 6174 6368 2873 656c 662e  f re.match(self.
+00022fd0: 5245 4745 585f 4950 5634 2c20 7661 6c75  REGEX_IPV4, valu
+00022fe0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00022ff0: 6e75 6d62 6572 203d 2030 0a20 2020 2020  number = 0.     
+00023000: 2020 2020 2020 2066 6f72 2069 2c20 6a20         for i, j 
+00023010: 696e 207a 6970 2873 656c 662e 6e75 6d62  in zip(self.numb
+00023020: 6572 732c 2076 616c 7565 2e73 706c 6974  ers, value.split
+00023030: 2822 2e22 2929 3a0a 2020 2020 2020 2020  (".")):.        
+00023040: 2020 2020 2020 2020 6e75 6d62 6572 202b          number +
+00023050: 3d20 6920 2a20 696e 7428 6a29 0a20 2020  = i * int(j).   
+00023060: 2020 2020 2020 2020 206f 6b20 3d20 4661           ok = Fa
+00023070: 6c73 650a 0a20 2020 2020 2020 2020 2020  lse..           
+00023080: 2066 6f72 2062 6f74 746f 6d2c 2074 6f70   for bottom, top
+00023090: 2069 6e20 7a69 7028 7365 6c66 2e6d 696e   in zip(self.min
+000230a0: 6970 2c20 7365 6c66 2e6d 6178 6970 293a  ip, self.maxip):
+000230b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000230c0: 2069 6620 7365 6c66 2e69 6e76 6572 7420   if self.invert 
+000230d0: 213d 2028 626f 7474 6f6d 203c 3d20 6e75  != (bottom <= nu
+000230e0: 6d62 6572 203c 3d20 746f 7029 3a0a 2020  mber <= top):.  
+000230f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023100: 2020 6f6b 203d 2054 7275 650a 0a20 2020    ok = True..   
+00023110: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
+00023120: 2020 2020 2020 2020 2020 2020 2020 6f6b                ok
+00023130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023140: 2061 6e64 2073 656c 662e 6973 5f6c 6f63   and self.is_loc
+00023150: 616c 686f 7374 2069 7320 6e6f 7420 4e6f  alhost is not No
+00023160: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+00023170: 2020 2061 6e64 2073 656c 662e 6973 5f6c     and self.is_l
+00023180: 6f63 616c 686f 7374 2021 3d20 286e 756d  ocalhost != (num
+00023190: 6265 7220 3d3d 2073 656c 662e 6c6f 6361  ber == self.loca
+000231a0: 6c68 6f73 7429 0a20 2020 2020 2020 2020  lhost).         
+000231b0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+000231c0: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
+000231d0: 0a0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+000231e0: 6976 6174 6520 3d20 616e 7928 0a20 2020  ivate = any(.   
+000231f0: 2020 2020 2020 2020 2020 2020 205b 0a20               [. 
+00023200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023210: 2020 2070 7269 7661 7465 5f6e 756d 6265     private_numbe
+00023220: 725b 305d 203c 3d20 6e75 6d62 6572 203c  r[0] <= number <
+00023230: 3d20 7072 6976 6174 655f 6e75 6d62 6572  = private_number
+00023240: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
+00023250: 2020 2020 2020 2020 666f 7220 7072 6976          for priv
+00023260: 6174 655f 6e75 6d62 6572 2069 6e20 7365  ate_number in se
+00023270: 6c66 2e70 7269 7661 7465 0a20 2020 2020  lf.private.     
+00023280: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
+00023290: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000232a0: 2020 2020 2020 2069 6620 6f6b 2061 6e64         if ok and
+000232b0: 2073 656c 662e 6973 5f70 7269 7661 7465   self.is_private
+000232c0: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+000232d0: 2073 656c 662e 6973 5f70 7269 7661 7465   self.is_private
+000232e0: 2021 3d20 7072 6976 6174 653a 0a20 2020   != private:.   
+000232f0: 2020 2020 2020 2020 2020 2020 206f 6b20               ok 
+00023300: 3d20 4661 6c73 650a 0a20 2020 2020 2020  = False..       
+00023310: 2020 2020 2061 7574 6f6d 6174 6963 203d       automatic =
+00023320: 2073 656c 662e 6175 746f 6d61 7469 635b   self.automatic[
+00023330: 305d 203c 3d20 6e75 6d62 6572 203c 3d20  0] <= number <= 
+00023340: 7365 6c66 2e61 7574 6f6d 6174 6963 5b31  self.automatic[1
+00023350: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
+00023360: 206f 6b20 616e 6420 7365 6c66 2e69 735f   ok and self.is_
+00023370: 6175 746f 6d61 7469 6320 6973 206e 6f74  automatic is not
+00023380: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
+00023390: 735f 6175 746f 6d61 7469 6320 213d 2061  s_automatic != a
+000233a0: 7574 6f6d 6174 6963 3a0a 2020 2020 2020  utomatic:.      
+000233b0: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
+000233c0: 616c 7365 0a0a 2020 2020 2020 2020 2020  alse..          
+000233d0: 2020 6966 206f 6b3a 0a20 2020 2020 2020    if ok:.       
+000233e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000233f0: 7661 6c75 650a 0a20 2020 2020 2020 2072  value..        r
+00023400: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00023410: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+00023420: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00023430: 6d65 7373 6167 6529 290a 0a0a 636c 6173  message))...clas
+00023440: 7320 4953 5f49 5056 3628 5661 6c69 6461  s IS_IPV6(Valida
+00023450: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
+00023460: 2020 4368 6563 6b73 2069 6620 6669 656c    Checks if fiel
+00023470: 6427 7320 7661 6c75 6520 6973 2061 6e20  d's value is an 
+00023480: 4950 2076 6572 7369 6f6e 2036 2061 6464  IP version 6 add
+00023490: 7265 7373 2e0a 0a20 2020 2055 7365 7320  ress...    Uses 
+000234a0: 7468 6520 6970 6164 6472 6573 7320 6672  the ipaddress fr
+000234b0: 6f6d 2074 6865 2050 7974 686f 6e20 3320  om the Python 3 
+000234c0: 7374 616e 6461 7264 206c 6962 7261 7279  standard library
+000234d0: 0a20 2020 2061 6e64 2069 7473 2050 7974  .    and its Pyt
+000234e0: 686f 6e20 3220 6261 636b 706f 7274 2028  hon 2 backport (
+000234f0: 696e 2063 6f6e 7472 6962 2f69 7061 6464  in contrib/ipadd
+00023500: 7265 7373 2e70 7929 2e0a 0a20 2020 2041  ress.py)...    A
+00023510: 7267 733a 0a20 2020 2020 2020 2069 735f  rgs:.        is_
+00023520: 7072 6976 6174 653a 204e 6f6e 6520 2864  private: None (d
+00023530: 6566 6175 6c74 293a 2069 6e64 6966 6665  efault): indiffe
+00023540: 7265 6e74 0a20 2020 2020 2020 2020 2020  rent.           
+00023550: 2020 2020 2020 2020 2054 7275 6520 2865           True (e
+00023560: 6e66 6f72 6365 293a 2061 6464 7265 7373  nforce): address
+00023570: 206d 7573 7420 6265 2069 6e20 6663 3030   must be in fc00
+00023580: 3a3a 2f37 2072 616e 6765 0a20 2020 2020  ::/7 range.     
+00023590: 2020 2020 2020 2020 2020 2020 2020 2046                 F
+000235a0: 616c 7365 2028 666f 7262 6964 293a 2061  alse (forbid): a
+000235b0: 6464 7265 7373 206d 7573 7420 4e4f 5420  ddress must NOT 
+000235c0: 6265 2069 6e20 6663 3030 3a3a 2f37 2072  be in fc00::/7 r
+000235d0: 616e 6765 0a20 2020 2020 2020 2069 735f  ange.        is_
+000235e0: 6c69 6e6b 5f6c 6f63 616c 3a20 5361 6d65  link_local: Same
+000235f0: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
+00023600: 6573 2066 6538 303a 3a2f 3130 2072 616e  es fe80::/10 ran
+00023610: 6765 0a20 2020 2020 2020 2069 735f 7265  ge.        is_re
+00023620: 7365 7276 6564 3a20 5361 6d65 2061 7320  served: Same as 
+00023630: 6162 6f76 6520 6275 7420 7573 6573 2049  above but uses I
+00023640: 4554 4620 7265 7365 7276 6564 2072 616e  ETF reserved ran
+00023650: 6765 0a20 2020 2020 2020 2069 735f 6d75  ge.        is_mu
+00023660: 6c74 6963 6173 743a 2053 616d 6520 6173  lticast: Same as
+00023670: 2061 626f 7665 2062 7574 2075 7365 7320   above but uses 
+00023680: 6666 3030 3a3a 2f38 2072 616e 6765 0a20  ff00::/8 range. 
+00023690: 2020 2020 2020 2069 735f 726f 7574 6561         is_routea
+000236a0: 626c 653a 2053 696d 696c 6172 2074 6f20  ble: Similar to 
+000236b0: 6162 6f76 6520 6275 7420 656e 666f 7263  above but enforc
+000236c0: 6573 206e 6f74 2070 7269 7661 7465 2c20  es not private, 
+000236d0: 6c69 6e6b 5f6c 6f63 616c 2c0a 2020 2020  link_local,.    
+000236e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000236f0: 2020 7265 7365 7276 6564 206f 7220 6d75    reserved or mu
+00023700: 6c74 6963 6173 740a 2020 2020 2020 2020  lticast.        
+00023710: 6973 5f36 746f 343a 2053 616d 6520 6173  is_6to4: Same as
+00023720: 2061 626f 7665 2062 7574 2075 7365 7320   above but uses 
+00023730: 3230 3032 3a3a 2f31 3620 7261 6e67 650a  2002::/16 range.
+00023740: 2020 2020 2020 2020 6973 5f74 6572 6564          is_tered
+00023750: 6f3a 2053 616d 6520 6173 2061 626f 7665  o: Same as above
+00023760: 2062 7574 2075 7365 7320 3230 3031 3a3a   but uses 2001::
+00023770: 2f33 3220 7261 6e67 650a 2020 2020 2020  /32 range.      
+00023780: 2020 7375 626e 6574 733a 2076 616c 7565    subnets: value
+00023790: 206d 7573 7420 6265 2061 206d 656d 6265   must be a membe
+000237a0: 7220 6f66 2061 7420 6c65 6173 7420 6f6e  r of at least on
+000237b0: 6520 6672 6f6d 206c 6973 7420 6f66 2073  e from list of s
+000237c0: 7562 6e65 7473 0a0a 2020 2020 4578 616d  ubnets..    Exam
+000237d0: 706c 6573 3a0a 2020 2020 2020 2020 4368  ples:.        Ch
+000237e0: 6563 6b20 666f 7220 7661 6c69 6420 4950  eck for valid IP
+000237f0: 7636 2061 6464 7265 7373 3a0a 0a20 2020  v6 address:..   
+00023800: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
+00023810: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
+00023820: 6d65 3d27 6e61 6d65 272c 2072 6571 7569  me='name', requi
+00023830: 7265 733d 4953 5f49 5056 3628 2929 0a0a  res=IS_IPV6())..
+00023840: 2020 2020 2020 2020 4368 6563 6b20 666f          Check fo
+00023850: 7220 7661 6c69 6420 4950 7636 2061 6464  r valid IPv6 add
+00023860: 7265 7373 2069 7320 6120 6c69 6e6b 5f6c  ress is a link_l
+00023870: 6f63 616c 2061 6464 7265 7373 3a0a 0a20  ocal address:.. 
+00023880: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
+00023890: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
+000238a0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
+000238b0: 7569 7265 733d 4953 5f49 5056 3628 6973  uires=IS_IPV6(is
+000238c0: 5f6c 696e 6b5f 6c6f 6361 6c3d 5472 7565  _link_local=True
+000238d0: 2929 0a0a 2020 2020 2020 2020 4368 6563  ))..        Chec
+000238e0: 6b20 666f 7220 7661 6c69 6420 4950 7636  k for valid IPv6
+000238f0: 2061 6464 7265 7373 2074 6861 7420 6973   address that is
+00023900: 2049 6e74 6572 6e65 7420 726f 7574 6561   Internet routea
+00023910: 626c 653a 0a0a 2020 2020 2020 2020 2020  ble:..          
+00023920: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
+00023930: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
+00023940: 6527 2c20 7265 7175 6972 6573 3d49 535f  e', requires=IS_
+00023950: 4950 5636 2869 735f 726f 7574 6561 626c  IPV6(is_routeabl
+00023960: 653d 5472 7565 2929 0a0a 2020 2020 2020  e=True))..      
+00023970: 2020 4368 6563 6b20 666f 7220 7661 6c69    Check for vali
+00023980: 6420 4950 7636 2061 6464 7265 7373 2069  d IPv6 address i
+00023990: 6e20 7370 6563 6966 6965 6420 7375 626e  n specified subn
+000239a0: 6574 3a0a 0a20 2020 2020 2020 2020 2020  et:..           
+000239b0: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
+000239c0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
+000239d0: 272c 2072 6571 7569 7265 733d 4953 5f49  ', requires=IS_I
+000239e0: 5056 3628 7375 626e 6574 733d 5b27 3230  PV6(subnets=['20
+000239f0: 3031 3a3a 2f33 3227 5d29 0a0a 2020 2020  01::/32'])..    
+00023a00: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00023a10: 5056 3628 2928 2766 6538 303a 3a31 3236  PV6()('fe80::126
+00023a20: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+00023a30: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+00023a40: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
+00023a50: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
+00023a60: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00023a70: 3e3e 2049 535f 4950 5636 2829 2827 3139  >> IS_IPV6()('19
+00023a80: 322e 3136 382e 312e 3127 290a 2020 2020  2.168.1.1').    
+00023a90: 2020 2020 2020 2020 2827 3139 322e 3136          ('192.16
+00023aa0: 382e 312e 3127 2c20 2765 6e74 6572 2076  8.1.1', 'enter v
+00023ab0: 616c 6964 2049 5076 3620 6164 6472 6573  alid IPv6 addres
+00023ac0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+00023ad0: 3e3e 3e20 4953 5f49 5056 3628 6572 726f  >>> IS_IPV6(erro
+00023ae0: 725f 6d65 7373 6167 653d 2742 6164 2069  r_message='Bad i
+00023af0: 7027 2928 2731 3932 2e31 3638 2e31 2e31  p')('192.168.1.1
+00023b00: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+00023b10: 2731 3932 2e31 3638 2e31 2e31 272c 2027  '192.168.1.1', '
+00023b20: 6261 6420 6970 2729 0a20 2020 2020 2020  bad ip').       
+00023b30: 2020 2020 203e 3e3e 2049 535f 4950 5636       >>> IS_IPV6
+00023b40: 2869 735f 6c69 6e6b 5f6c 6f63 616c 3d54  (is_link_local=T
+00023b50: 7275 6529 2827 6665 3830 3a3a 3132 3663  rue)('fe80::126c
+00023b60: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00023b70: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00023b80: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
+00023b90: 6665 3232 3a62 3361 6627 2c20 4e6f 6e65  fe22:b3af', None
+00023ba0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00023bb0: 3e20 4953 5f49 5056 3628 6973 5f6c 696e  > IS_IPV6(is_lin
+00023bc0: 6b5f 6c6f 6361 6c3d 4661 6c73 6529 2827  k_local=False)('
+00023bd0: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
+00023be0: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+00023bf0: 2020 2020 2020 2020 2827 6665 3830 3a3a          ('fe80::
+00023c00: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
+00023c10: 3361 6627 2c20 2765 6e74 6572 2076 616c  3af', 'enter val
+00023c20: 6964 2049 5076 3620 6164 6472 6573 7327  id IPv6 address'
+00023c30: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00023c40: 3e20 4953 5f49 5056 3628 6973 5f6c 696e  > IS_IPV6(is_lin
+00023c50: 6b5f 6c6f 6361 6c3d 5472 7565 2928 2732  k_local=True)('2
+00023c60: 3030 313a 3a31 3236 633a 3866 6661 3a66  001::126c:8ffa:f
+00023c70: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
+00023c80: 2020 2020 2020 2028 2732 3030 313a 3a31         ('2001::1
+00023c90: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00023ca0: 6166 272c 2027 656e 7465 7220 7661 6c69  af', 'enter vali
+00023cb0: 6420 4950 7636 2061 6464 7265 7373 2729  d IPv6 address')
+00023cc0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00023cd0: 2049 535f 4950 5636 2869 735f 6d75 6c74   IS_IPV6(is_mult
+00023ce0: 6963 6173 743d 5472 7565 2928 2732 3030  icast=True)('200
+00023cf0: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
+00023d00: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
+00023d10: 2020 2020 2028 2732 3030 313a 3a31 3236       ('2001::126
+00023d20: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+00023d30: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+00023d40: 4950 7636 2061 6464 7265 7373 2729 0a20  IPv6 address'). 
+00023d50: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00023d60: 535f 4950 5636 2869 735f 6d75 6c74 6963  S_IPV6(is_multic
+00023d70: 6173 743d 5472 7565 2928 2766 6630 303a  ast=True)('ff00:
+00023d80: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+00023d90: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
+00023da0: 2020 2028 2766 6630 303a 3a31 3236 633a     ('ff00::126c:
+00023db0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
+00023dc0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00023dd0: 2020 203e 3e3e 2049 535f 4950 5636 2869     >>> IS_IPV6(i
+00023de0: 735f 726f 7574 6561 626c 653d 5472 7565  s_routeable=True
+00023df0: 2928 2732 3030 313a 3a31 3236 633a 3866  )('2001::126c:8f
+00023e00: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
+00023e10: 2020 2020 2020 2020 2020 2028 2732 3030             ('200
+00023e20: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
+00023e30: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
+00023e40: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00023e50: 535f 4950 5636 2869 735f 726f 7574 6561  S_IPV6(is_routea
+00023e60: 626c 653d 5472 7565 2928 2766 6630 303a  ble=True)('ff00:
+00023e70: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+00023e80: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
+00023e90: 2020 2028 2766 6630 303a 3a31 3236 633a     ('ff00::126c:
+00023ea0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
+00023eb0: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
+00023ec0: 7636 2061 6464 7265 7373 2729 0a20 2020  v6 address').   
+00023ed0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00023ee0: 4950 5636 2873 7562 6e65 7473 3d27 3230  IPV6(subnets='20
+00023ef0: 3031 3a3a 2f33 3227 2928 2732 3030 313a  01::/32')('2001:
+00023f00: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00023f10: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00023f20: 3230 3031 3a3a 3866 6661 3a66 6532 323a  2001::8ffa:fe22:
+00023f30: 6233 6166 272c 204e 6f6e 6529 0a20 2020  b3af', None).   
+00023f40: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00023f50: 4950 5636 2873 7562 6e65 7473 3d27 6662  IPV6(subnets='fb
+00023f60: 3030 3a3a 2f38 2729 2827 3230 3031 3a3a  00::/8')('2001::
+00023f70: 3866 6661 3a66 6532 323a 6233 6166 2729  8ffa:fe22:b3af')
+00023f80: 0a20 2020 2020 2020 2020 2020 2028 2732  .            ('2
+00023f90: 3030 313a 3a38 6666 613a 6665 3232 3a62  001::8ffa:fe22:b
+00023fa0: 3361 6627 2c20 2765 6e74 6572 2076 616c  3af', 'enter val
+00023fb0: 6964 2049 5076 3620 6164 6472 6573 7327  id IPv6 address'
+00023fc0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00023fd0: 3e20 4953 5f49 5056 3628 7375 626e 6574  > IS_IPV6(subnet
+00023fe0: 733d 5b27 6663 3030 3a3a 2f38 272c 2732  s=['fc00::/8','2
+00023ff0: 3030 313a 3a2f 3332 275d 2928 2732 3030  001::/32'])('200
+00024000: 313a 3a38 6666 613a 6665 3232 3a62 3361  1::8ffa:fe22:b3a
+00024010: 6627 290a 2020 2020 2020 2020 2020 2020  f').            
+00024020: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
+00024030: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
+00024040: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00024050: 535f 4950 5636 2873 7562 6e65 7473 3d27  S_IPV6(subnets='
+00024060: 696e 7661 6c69 6473 7562 6e65 7427 2928  invalidsubnet')(
+00024070: 2732 3030 313a 3a38 6666 613a 6665 3232  '2001::8ffa:fe22
+00024080: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
+00024090: 2020 2020 2827 3230 3031 3a3a 3866 6661      ('2001::8ffa
+000240a0: 3a66 6532 323a 6233 6166 272c 2027 696e  :fe22:b3af', 'in
+000240b0: 7661 6c69 6420 7375 626e 6574 2070 726f  valid subnet pro
+000240c0: 7669 6465 6427 290a 0a20 2020 2022 2222  vided')..    """
+000240d0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+000240e0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+000240f0: 2c0a 2020 2020 2020 2020 6973 5f70 7269  ,.        is_pri
+00024100: 7661 7465 3d4e 6f6e 652c 0a20 2020 2020  vate=None,.     
+00024110: 2020 2069 735f 6c69 6e6b 5f6c 6f63 616c     is_link_local
+00024120: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+00024130: 735f 7265 7365 7276 6564 3d4e 6f6e 652c  s_reserved=None,
+00024140: 0a20 2020 2020 2020 2069 735f 6d75 6c74  .        is_mult
+00024150: 6963 6173 743d 4e6f 6e65 2c0a 2020 2020  icast=None,.    
+00024160: 2020 2020 6973 5f72 6f75 7465 6162 6c65      is_routeable
+00024170: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+00024180: 735f 3674 6f34 3d4e 6f6e 652c 0a20 2020  s_6to4=None,.   
+00024190: 2020 2020 2069 735f 7465 7265 646f 3d4e       is_teredo=N
+000241a0: 6f6e 652c 0a20 2020 2020 2020 2073 7562  one,.        sub
+000241b0: 6e65 7473 3d4e 6f6e 652c 0a20 2020 2020  nets=None,.     
+000241c0: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
+000241d0: 3d22 456e 7465 7220 7661 6c69 6420 4950  ="Enter valid IP
+000241e0: 7636 2061 6464 7265 7373 222c 0a20 2020  v6 address",.   
+000241f0: 2029 3a0a 2020 2020 2020 2020 7365 6c66   ):.        self
+00024200: 2e69 735f 7072 6976 6174 6520 3d20 6973  .is_private = is
+00024210: 5f70 7269 7661 7465 0a20 2020 2020 2020  _private.       
+00024220: 2073 656c 662e 6973 5f6c 696e 6b5f 6c6f   self.is_link_lo
+00024230: 6361 6c20 3d20 6973 5f6c 696e 6b5f 6c6f  cal = is_link_lo
+00024240: 6361 6c0a 2020 2020 2020 2020 7365 6c66  cal.        self
+00024250: 2e69 735f 7265 7365 7276 6564 203d 2069  .is_reserved = i
+00024260: 735f 7265 7365 7276 6564 0a20 2020 2020  s_reserved.     
+00024270: 2020 2073 656c 662e 6973 5f6d 756c 7469     self.is_multi
+00024280: 6361 7374 203d 2069 735f 6d75 6c74 6963  cast = is_multic
+00024290: 6173 740a 2020 2020 2020 2020 7365 6c66  ast.        self
+000242a0: 2e69 735f 726f 7574 6561 626c 6520 3d20  .is_routeable = 
+000242b0: 6973 5f72 6f75 7465 6162 6c65 0a20 2020  is_routeable.   
+000242c0: 2020 2020 2073 656c 662e 6973 5f36 746f       self.is_6to
+000242d0: 3420 3d20 6973 5f36 746f 340a 2020 2020  4 = is_6to4.    
+000242e0: 2020 2020 7365 6c66 2e69 735f 7465 7265      self.is_tere
+000242f0: 646f 203d 2069 735f 7465 7265 646f 0a20  do = is_teredo. 
+00024300: 2020 2020 2020 2073 656c 662e 7375 626e         self.subn
+00024310: 6574 7320 3d20 7375 626e 6574 730a 2020  ets = subnets.  
+00024320: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+00024330: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+00024340: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
+00024350: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+00024360: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+00024370: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+00024380: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00024390: 2020 6970 203d 2069 7061 6464 7265 7373    ip = ipaddress
+000243a0: 2e49 5076 3641 6464 7265 7373 2874 6f5f  .IPv6Address(to_
+000243b0: 756e 6963 6f64 6528 7661 6c75 6529 290a  unicode(value)).
+000243c0: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
+000243d0: 2054 7275 650a 2020 2020 2020 2020 6578   True.        ex
+000243e0: 6365 7074 2069 7061 6464 7265 7373 2e41  cept ipaddress.A
+000243f0: 6464 7265 7373 5661 6c75 6545 7272 6f72  ddressValueError
+00024400: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00024410: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+00024420: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
+00024430: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
+00024440: 6573 7361 6765 2929 0a0a 2020 2020 2020  essage))..      
+00024450: 2020 6966 2073 656c 662e 7375 626e 6574    if self.subnet
+00024460: 733a 0a20 2020 2020 2020 2020 2020 2023  s:.            #
+00024470: 2069 7465 7261 7465 2074 6872 6f75 6768   iterate through
+00024480: 2073 656c 662e 7375 626e 6574 7320 746f   self.subnets to
+00024490: 2073 6565 2069 6620 7661 6c75 6520 6973   see if value is
+000244a0: 2061 206d 656d 6265 720a 2020 2020 2020   a member.      
+000244b0: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
+000244c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000244d0: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
+000244e0: 7375 626e 6574 732c 2073 7472 293a 0a20  subnets, str):. 
+000244f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00024500: 656c 662e 7375 626e 6574 7320 3d20 5b73  elf.subnets = [s
+00024510: 656c 662e 7375 626e 6574 735d 0a20 2020  elf.subnets].   
+00024520: 2020 2020 2020 2020 2066 6f72 206e 6574           for net
+00024530: 776f 726b 2069 6e20 7365 6c66 2e73 7562  work in self.sub
+00024540: 6e65 7473 3a0a 2020 2020 2020 2020 2020  nets:.          
+00024550: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00024560: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00024570: 706e 6574 203d 2069 7061 6464 7265 7373  pnet = ipaddress
+00024580: 2e49 5076 364e 6574 776f 726b 2874 6f5f  .IPv6Network(to_
+00024590: 756e 6963 6f64 6528 6e65 7477 6f72 6b29  unicode(network)
+000245a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000245b0: 2020 6578 6365 7074 2028 6970 6164 6472    except (ipaddr
+000245c0: 6573 732e 4e65 746d 6173 6b56 616c 7565  ess.NetmaskValue
+000245d0: 4572 726f 722c 2069 7061 6464 7265 7373  Error, ipaddress
+000245e0: 2e41 6464 7265 7373 5661 6c75 6545 7272  .AddressValueErr
+000245f0: 6f72 293a 0a20 2020 2020 2020 2020 2020  or):.           
+00024600: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00024610: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+00024620: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
+00024630: 696e 7661 6c69 6420 7375 626e 6574 2070  invalid subnet p
+00024640: 726f 7669 6465 6422 2929 0a20 2020 2020  rovided")).     
+00024650: 2020 2020 2020 2020 2020 2069 6620 6970             if ip
+00024660: 2069 6e20 6970 6e65 743a 0a20 2020 2020   in ipnet:.     
+00024670: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00024680: 6b20 3d20 5472 7565 0a0a 2020 2020 2020  k = True..      
+00024690: 2020 6966 2073 656c 662e 6973 5f72 6f75    if self.is_rou
+000246a0: 7465 6162 6c65 3a0a 2020 2020 2020 2020  teable:.        
+000246b0: 2020 2020 7365 6c66 2e69 735f 7072 6976      self.is_priv
+000246c0: 6174 6520 3d20 4661 6c73 650a 2020 2020  ate = False.    
+000246d0: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
+000246e0: 7265 7365 7276 6564 203d 2046 616c 7365  reserved = False
+000246f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00024700: 662e 6973 5f6d 756c 7469 6361 7374 203d  f.is_multicast =
+00024710: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
+00024720: 6966 206f 6b20 616e 6420 7365 6c66 2e69  if ok and self.i
+00024730: 735f 7072 6976 6174 6520 6973 206e 6f74  s_private is not
+00024740: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
+00024750: 735f 7072 6976 6174 6520 213d 2069 702e  s_private != ip.
+00024760: 6973 5f70 7269 7661 7465 3a0a 2020 2020  is_private:.    
+00024770: 2020 2020 2020 2020 6f6b 203d 2046 616c          ok = Fal
+00024780: 7365 0a20 2020 2020 2020 2069 6620 280a  se.        if (.
+00024790: 2020 2020 2020 2020 2020 2020 6f6b 0a20              ok. 
+000247a0: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+000247b0: 656c 662e 6973 5f6c 696e 6b5f 6c6f 6361  elf.is_link_loca
+000247c0: 6c20 6973 206e 6f74 204e 6f6e 650a 2020  l is not None.  
+000247d0: 2020 2020 2020 2020 2020 616e 6420 7365            and se
+000247e0: 6c66 2e69 735f 6c69 6e6b 5f6c 6f63 616c  lf.is_link_local
+000247f0: 2021 3d20 6970 2e69 735f 6c69 6e6b 5f6c   != ip.is_link_l
+00024800: 6f63 616c 0a20 2020 2020 2020 2029 3a0a  ocal.        ):.
+00024810: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
+00024820: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
+00024830: 6620 6f6b 2061 6e64 2073 656c 662e 6973  f ok and self.is
+00024840: 5f72 6573 6572 7665 6420 6973 206e 6f74  _reserved is not
+00024850: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
+00024860: 735f 7265 7365 7276 6564 2021 3d20 6970  s_reserved != ip
+00024870: 2e69 735f 7265 7365 7276 6564 3a0a 2020  .is_reserved:.  
+00024880: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
+00024890: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
+000248a0: 280a 2020 2020 2020 2020 2020 2020 6f6b  (.            ok
+000248b0: 0a20 2020 2020 2020 2020 2020 2061 6e64  .            and
+000248c0: 2073 656c 662e 6973 5f6d 756c 7469 6361   self.is_multica
+000248d0: 7374 2069 7320 6e6f 7420 4e6f 6e65 0a20  st is not None. 
+000248e0: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+000248f0: 656c 662e 6973 5f6d 756c 7469 6361 7374  elf.is_multicast
+00024900: 2021 3d20 6970 2e69 735f 6d75 6c74 6963   != ip.is_multic
+00024910: 6173 740a 2020 2020 2020 2020 293a 0a20  ast.        ):. 
+00024920: 2020 2020 2020 2020 2020 206f 6b20 3d20             ok = 
+00024930: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
+00024940: 206f 6b20 616e 6420 7365 6c66 2e69 735f   ok and self.is_
+00024950: 3674 6f34 2069 7320 6e6f 7420 4e6f 6e65  6to4 is not None
+00024960: 2061 6e64 2073 656c 662e 6973 5f36 746f   and self.is_6to
+00024970: 3420 213d 2062 6f6f 6c28 6970 2e73 6978  4 != bool(ip.six
+00024980: 746f 666f 7572 293a 0a20 2020 2020 2020  tofour):.       
+00024990: 2020 2020 206f 6b20 3d20 4661 6c73 650a       ok = False.
+000249a0: 2020 2020 2020 2020 6966 206f 6b20 616e          if ok an
+000249b0: 6420 7365 6c66 2e69 735f 7465 7265 646f  d self.is_teredo
+000249c0: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+000249d0: 2073 656c 662e 6973 5f74 6572 6564 6f20   self.is_teredo 
+000249e0: 213d 2062 6f6f 6c28 6970 2e74 6572 6564  != bool(ip.tered
+000249f0: 6f29 3a0a 2020 2020 2020 2020 2020 2020  o):.            
+00024a00: 6f6b 203d 2046 616c 7365 0a0a 2020 2020  ok = False..    
+00024a10: 2020 2020 6966 206f 6b3a 0a20 2020 2020      if ok:.     
+00024a20: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
+00024a30: 6c75 650a 0a20 2020 2020 2020 2072 6169  lue..        rai
+00024a40: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00024a50: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+00024a60: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+00024a70: 7373 6167 6529 290a 0a0a 636c 6173 7320  ssage))...class 
+00024a80: 4953 5f49 5041 4444 5245 5353 2856 616c  IS_IPADDRESS(Val
+00024a90: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
+00024aa0: 0a20 2020 2043 6865 636b 7320 6966 2066  .    Checks if f
+00024ab0: 6965 6c64 2773 2076 616c 7565 2069 7320  ield's value is 
+00024ac0: 616e 2049 5020 4164 6472 6573 7320 2876  an IP Address (v
+00024ad0: 3420 6f72 2076 3629 2e20 4361 6e20 6265  4 or v6). Can be
+00024ae0: 2073 6574 2074 6f20 666f 7263 650a 2020   set to force.  
+00024af0: 2020 6164 6472 6573 7365 7320 6672 6f6d    addresses from
+00024b00: 2077 6974 6869 6e20 6120 7370 6563 6966   within a specif
+00024b10: 6963 2072 616e 6765 2e20 4368 6563 6b73  ic range. Checks
+00024b20: 2061 7265 2064 6f6e 6520 7769 7468 2074   are done with t
+00024b30: 6865 2063 6f72 7265 6374 0a20 2020 2049  he correct.    I
+00024b40: 535f 4950 5634 2061 6e64 2049 535f 4950  S_IPV4 and IS_IP
+00024b50: 5636 2076 616c 6964 6174 6f72 732e 0a0a  V6 validators...
+00024b60: 2020 2020 5573 6573 2074 6865 2069 7061      Uses the ipa
+00024b70: 6464 7265 7373 2066 726f 6d20 7468 6520  ddress from the 
+00024b80: 5079 7468 6f6e 2033 2073 7461 6e64 6172  Python 3 standar
+00024b90: 6420 6c69 6272 6172 790a 2020 2020 616e  d library.    an
+00024ba0: 6420 6974 7320 5079 7468 6f6e 2032 2062  d its Python 2 b
+00024bb0: 6163 6b70 6f72 7420 2869 6e20 636f 6e74  ackport (in cont
+00024bc0: 7269 622f 6970 6164 6472 6573 732e 7079  rib/ipaddress.py
+00024bd0: 292e 0a0a 2020 2020 4172 6773 3a0a 2020  )...    Args:.  
+00024be0: 2020 2020 2020 6d69 6e69 703a 206c 6f77        minip: low
+00024bf0: 6573 7420 616c 6c6f 7765 6420 6164 6472  est allowed addr
+00024c00: 6573 733b 2061 6363 6570 7473 3a0a 2020  ess; accepts:.  
+00024c10: 2020 2020 2020 2020 2020 2020 2073 7472               str
+00024c20: 2c20 6567 2e20 3139 322e 3136 382e 302e  , eg. 192.168.0.
+00024c30: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00024c40: 206c 6973 7420 6f72 2074 7570 6c65 206f   list or tuple o
+00024c50: 6620 6f63 7465 7473 2c20 6567 2e20 5b31  f octets, eg. [1
+00024c60: 3932 2c20 3136 382c 2030 2c20 315d 0a20  92, 168, 0, 1]. 
+00024c70: 2020 2020 2020 206d 6178 6970 3a20 6869         maxip: hi
+00024c80: 6768 6573 7420 616c 6c6f 7765 6420 6164  ghest allowed ad
+00024c90: 6472 6573 733b 2073 616d 6520 6173 2061  dress; same as a
+00024ca0: 626f 7665 0a20 2020 2020 2020 2069 6e76  bove.        inv
+00024cb0: 6572 743a 2054 7275 6520 746f 2061 6c6c  ert: True to all
+00024cc0: 6f77 2061 6464 7265 7373 6573 206f 6e6c  ow addresses onl
+00024cd0: 7920 6672 6f6d 206f 7574 7369 6465 206f  y from outside o
+00024ce0: 6620 6769 7665 6e20 7261 6e67 653b 206e  f given range; n
+00024cf0: 6f74 650a 2020 2020 2020 2020 2020 2020  ote.            
+00024d00: 2020 2020 7468 6174 2072 616e 6765 2062      that range b
+00024d10: 6f75 6e64 6172 6965 7320 6172 6520 6e6f  oundaries are no
+00024d20: 7420 6d61 7463 6865 6420 7468 6973 2077  t matched this w
+00024d30: 6179 0a0a 2020 2020 4950 7634 2073 7065  ay..    IPv4 spe
+00024d40: 6369 6669 6320 6172 6775 6d65 6e74 733a  cific arguments:
+00024d50: 0a0a 2020 2020 2020 2020 2d20 6973 5f6c  ..        - is_l
+00024d60: 6f63 616c 686f 7374 3a20 6c6f 6361 6c68  ocalhost: localh
+00024d70: 6f73 7420 6164 6472 6573 7320 7472 6561  ost address trea
+00024d80: 746d 656e 743a 0a0a 2020 2020 2020 2020  tment:..        
+00024d90: 2020 2020 2d20 4e6f 6e65 2028 6465 6661      - None (defa
+00024da0: 756c 7429 3a20 696e 6469 6666 6572 656e  ult): indifferen
+00024db0: 740a 2020 2020 2020 2020 2020 2020 2d20  t.            - 
+00024dc0: 5472 7565 2028 656e 666f 7263 6529 3a20  True (enforce): 
+00024dd0: 7175 6572 7920 6164 6472 6573 7320 6d75  query address mu
+00024de0: 7374 206d 6174 6368 206c 6f63 616c 686f  st match localho
+00024df0: 7374 2061 6464 7265 7373 0a20 2020 2020  st address.     
+00024e00: 2020 2020 2020 2020 2028 3132 372e 302e           (127.0.
+00024e10: 302e 3129 0a20 2020 2020 2020 2020 2020  0.1).           
+00024e20: 202d 2046 616c 7365 2028 666f 7262 6964   - False (forbid
+00024e30: 293a 2071 7565 7279 2061 6464 7265 7373  ): query address
+00024e40: 206d 7573 7420 6e6f 7420 6d61 7463 6820   must not match 
+00024e50: 6c6f 6361 6c68 6f73 7420 6164 6472 6573  localhost addres
+00024e60: 730a 2020 2020 2020 2020 2d20 6973 5f70  s.        - is_p
+00024e70: 7269 7661 7465 3a20 7361 6d65 2061 7320  rivate: same as 
+00024e80: 6162 6f76 652c 2065 7863 6570 7420 7468  above, except th
+00024e90: 6174 2071 7565 7279 2061 6464 7265 7373  at query address
+00024ea0: 2069 7320 6368 6563 6b65 6420 6167 6169   is checked agai
+00024eb0: 6e73 740a 2020 2020 2020 2020 2020 7477  nst.          tw
+00024ec0: 6f20 6164 6472 6573 7320 7261 6e67 6573  o address ranges
+00024ed0: 3a20 3137 322e 3136 2e30 2e30 202d 2031  : 172.16.0.0 - 1
+00024ee0: 3732 2e33 312e 3235 352e 3235 3520 616e  72.31.255.255 an
+00024ef0: 640a 2020 2020 2020 2020 2020 3139 322e  d.          192.
+00024f00: 3136 382e 302e 3020 2d20 3139 322e 3136  168.0.0 - 192.16
+00024f10: 382e 3235 352e 3235 350a 2020 2020 2020  8.255.255.      
+00024f20: 2020 2d20 6973 5f61 7574 6f6d 6174 6963    - is_automatic
+00024f30: 3a20 7361 6d65 2061 7320 6162 6f76 652c  : same as above,
+00024f40: 2065 7863 6570 7420 7468 6174 2071 7565   except that que
+00024f50: 7279 2061 6464 7265 7373 2069 7320 6368  ry address is ch
+00024f60: 6563 6b65 6420 6167 6169 6e73 740a 2020  ecked against.  
+00024f70: 2020 2020 2020 2020 6f6e 6520 6164 6472          one addr
+00024f80: 6573 7320 7261 6e67 653a 2031 3639 2e32  ess range: 169.2
+00024f90: 3534 2e30 2e30 202d 2031 3639 2e32 3534  54.0.0 - 169.254
+00024fa0: 2e32 3535 2e32 3535 0a20 2020 2020 2020  .255.255.       
+00024fb0: 202d 2069 735f 6970 7634 3a20 6569 7468   - is_ipv4: eith
+00024fc0: 6572 3a0a 0a20 2020 2020 2020 2020 2020  er:..           
+00024fd0: 202d 204e 6f6e 6520 2864 6566 6175 6c74   - None (default
+00024fe0: 293a 2069 6e64 6966 6665 7265 6e74 0a20  ): indifferent. 
+00024ff0: 2020 2020 2020 2020 2020 202d 2054 7275             - Tru
+00025000: 6520 2865 6e66 6f72 6365 293a 206d 7573  e (enforce): mus
+00025010: 7420 6265 2061 6e20 4950 7634 2061 6464  t be an IPv4 add
+00025020: 7265 7373 0a20 2020 2020 2020 2020 2020  ress.           
+00025030: 202d 2046 616c 7365 2028 666f 7262 6964   - False (forbid
+00025040: 293a 206d 7573 7420 4e4f 5420 6265 2061  ): must NOT be a
+00025050: 6e20 4950 7634 2061 6464 7265 7373 0a0a  n IPv4 address..
+00025060: 2020 2020 4950 7636 2073 7065 6369 6669      IPv6 specifi
+00025070: 6320 6172 6775 6d65 6e74 733a 0a0a 2020  c arguments:..  
+00025080: 2020 2020 2020 2d20 6973 5f6c 696e 6b5f        - is_link_
+00025090: 6c6f 6361 6c3a 2053 616d 6520 6173 2061  local: Same as a
+000250a0: 626f 7665 2062 7574 2075 7365 7320 6665  bove but uses fe
+000250b0: 3830 3a3a 2f31 3020 7261 6e67 650a 2020  80::/10 range.  
+000250c0: 2020 2020 2020 2d20 6973 5f72 6573 6572        - is_reser
+000250d0: 7665 643a 2053 616d 6520 6173 2061 626f  ved: Same as abo
+000250e0: 7665 2062 7574 2075 7365 7320 4945 5446  ve but uses IETF
+000250f0: 2072 6573 6572 7665 6420 7261 6e67 650a   reserved range.
+00025100: 2020 2020 2020 2020 2d20 6973 5f6d 756c          - is_mul
+00025110: 7469 6361 7374 3a20 5361 6d65 2061 7320  ticast: Same as 
+00025120: 6162 6f76 6520 6275 7420 7573 6573 2066  above but uses f
+00025130: 6630 303a 3a2f 3820 7261 6e67 650a 2020  f00::/8 range.  
+00025140: 2020 2020 2020 2d20 6973 5f72 6f75 7465        - is_route
+00025150: 6162 6c65 3a20 5369 6d69 6c61 7220 746f  able: Similar to
+00025160: 2061 626f 7665 2062 7574 2065 6e66 6f72   above but enfor
+00025170: 6365 7320 6e6f 7420 7072 6976 6174 652c  ces not private,
+00025180: 206c 696e 6b5f 6c6f 6361 6c2c 0a20 2020   link_local,.   
+00025190: 2020 2020 2020 2072 6573 6572 7665 6420         reserved 
+000251a0: 6f72 206d 756c 7469 6361 7374 0a20 2020  or multicast.   
+000251b0: 2020 2020 202d 2069 735f 3674 6f34 3a20       - is_6to4: 
+000251c0: 5361 6d65 2061 7320 6162 6f76 6520 6275  Same as above bu
+000251d0: 7420 7573 6573 2032 3030 323a 3a2f 3136  t uses 2002::/16
+000251e0: 2072 616e 6765 0a20 2020 2020 2020 202d   range.        -
+000251f0: 2069 735f 7465 7265 646f 3a20 5361 6d65   is_teredo: Same
+00025200: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
+00025210: 6573 2032 3030 313a 3a2f 3332 2072 616e  es 2001::/32 ran
+00025220: 6765 0a20 2020 2020 2020 202d 2073 7562  ge.        - sub
+00025230: 6e65 7473 3a20 7661 6c75 6520 6d75 7374  nets: value must
+00025240: 2062 6520 6120 6d65 6d62 6572 206f 6620   be a member of 
+00025250: 6174 206c 6561 7374 206f 6e65 2066 726f  at least one fro
+00025260: 6d20 6c69 7374 206f 6620 7375 626e 6574  m list of subnet
+00025270: 730a 2020 2020 2020 2020 2d20 6973 5f69  s.        - is_i
+00025280: 7076 363a 2065 6974 6865 723a 0a0a 2020  pv6: either:..  
+00025290: 2020 2020 2020 2020 2020 2d20 4e6f 6e65            - None
+000252a0: 2028 6465 6661 756c 7429 3a20 696e 6469   (default): indi
+000252b0: 6666 6572 656e 740a 2020 2020 2020 2020  fferent.        
+000252c0: 2020 2020 2d20 5472 7565 2028 656e 666f      - True (enfo
+000252d0: 7263 6529 3a20 6d75 7374 2062 6520 616e  rce): must be an
+000252e0: 2049 5076 3620 6164 6472 6573 730a 2020   IPv6 address.  
+000252f0: 2020 2020 2020 2020 2020 2d20 4661 6c73            - Fals
+00025300: 6520 2866 6f72 6269 6429 3a20 6d75 7374  e (forbid): must
+00025310: 204e 4f54 2062 6520 616e 2049 5076 3620   NOT be an IPv6 
+00025320: 6164 6472 6573 730a 0a20 2020 204d 696e  address..    Min
+00025330: 6970 2061 6e64 206d 6178 6970 206d 6179  ip and maxip may
+00025340: 2061 6c73 6f20 6265 206c 6973 7473 206f   also be lists o
+00025350: 7220 7475 706c 6573 206f 6620 6164 6472  r tuples of addr
+00025360: 6573 7365 7320 696e 2061 6c6c 2061 626f  esses in all abo
+00025370: 7665 0a20 2020 2066 6f72 6d73 2028 7374  ve.    forms (st
+00025380: 722c 2069 6e74 2c20 6c69 7374 202f 2074  r, int, list / t
+00025390: 7570 6c65 292c 2061 6c6c 6f77 696e 6720  uple), allowing 
+000253a0: 7365 7475 7020 6f66 206d 756c 7469 706c  setup of multipl
+000253b0: 6520 6164 6472 6573 7320 7261 6e67 6573  e address ranges
+000253c0: 3a3a 0a0a 2020 2020 2020 2020 6d69 6e69  ::..        mini
+000253d0: 7020 3d20 286d 696e 6970 312c 206d 696e  p = (minip1, min
+000253e0: 6970 322c 202e 2e2e 206d 696e 6970 4e29  ip2, ... minipN)
+000253f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025400: 2020 2020 7c20 2020 2020 2020 7c20 2020      |       |   
+00025410: 2020 2020 2020 2020 7c0a 2020 2020 2020          |.      
+00025420: 2020 2020 2020 2020 2020 2020 207c 2020               |  
+00025430: 2020 2020 207c 2020 2020 2020 2020 2020       |          
+00025440: 207c 0a20 2020 2020 2020 206d 6178 6970   |.        maxip
+00025450: 203d 2028 6d61 7869 7031 2c20 6d61 7869   = (maxip1, maxi
+00025460: 7032 2c20 2e2e 2e20 6d61 7869 704e 290a  p2, ... maxipN).
+00025470: 0a20 2020 204c 6f6e 6765 7220 6974 6572  .    Longer iter
+00025480: 6162 6c65 2077 696c 6c20 6265 2074 7275  able will be tru
+00025490: 6e63 6174 6564 2074 6f20 6d61 7463 6820  ncated to match 
+000254a0: 6c65 6e67 7468 206f 6620 7368 6f72 7465  length of shorte
+000254b0: 7220 6f6e 652e 0a0a 2020 2020 2020 2020  r one...        
+000254c0: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
+000254d0: 2829 2827 3139 322e 3136 382e 312e 3527  ()('192.168.1.5'
+000254e0: 290a 2020 2020 2020 2020 2827 3139 322e  ).        ('192.
+000254f0: 3136 382e 312e 3527 2c20 4e6f 6e65 290a  168.1.5', None).
+00025500: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00025510: 5041 4444 5245 5353 2869 735f 6970 7636  PADDRESS(is_ipv6
+00025520: 3d46 616c 7365 2928 2731 3932 2e31 3638  =False)('192.168
+00025530: 2e31 2e35 2729 0a20 2020 2020 2020 2028  .1.5').        (
+00025540: 2731 3932 2e31 3638 2e31 2e35 272c 204e  '192.168.1.5', N
+00025550: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00025560: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
+00025570: 2732 3535 2e32 3535 2e32 3535 2e32 3535  '255.255.255.255
+00025580: 2729 0a20 2020 2020 2020 2028 2732 3535  ').        ('255
+00025590: 2e32 3535 2e32 3535 2e32 3535 272c 204e  .255.255.255', N
+000255a0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+000255b0: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
+000255c0: 2731 3932 2e31 3638 2e31 2e35 2027 290a  '192.168.1.5 ').
+000255d0: 2020 2020 2020 2020 2827 3139 322e 3136          ('192.16
+000255e0: 382e 312e 3520 272c 2027 656e 7465 7220  8.1.5 ', 'enter 
+000255f0: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
+00025600: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
+00025610: 535f 4950 4144 4452 4553 5328 2928 2731  S_IPADDRESS()('1
+00025620: 3932 2e31 3638 2e31 2e31 2e35 2729 0a20  92.168.1.1.5'). 
+00025630: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
+00025640: 2e31 2e31 2e35 272c 2027 656e 7465 7220  .1.1.5', 'enter 
+00025650: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
+00025660: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
+00025670: 535f 4950 4144 4452 4553 5328 2928 2731  S_IPADDRESS()('1
+00025680: 3233 2e31 3233 2729 0a20 2020 2020 2020  23.123').       
+00025690: 2028 2731 3233 2e31 3233 272c 2027 656e   ('123.123', 'en
+000256a0: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+000256b0: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
+000256c0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+000256d0: 2928 2731 3131 312e 322e 332e 3427 290a  )('1111.2.3.4').
+000256e0: 2020 2020 2020 2020 2827 3131 3131 2e32          ('1111.2
+000256f0: 2e33 2e34 272c 2027 656e 7465 7220 7661  .3.4', 'enter va
+00025700: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
+00025710: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00025720: 4950 4144 4452 4553 5328 2928 2730 3131  IPADDRESS()('011
+00025730: 312e 322e 332e 3427 290a 2020 2020 2020  1.2.3.4').      
+00025740: 2020 2827 3031 3131 2e32 2e33 2e34 272c    ('0111.2.3.4',
+00025750: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
+00025760: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+00025770: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
+00025780: 4553 5328 2928 2732 3536 2e32 2e33 2e34  ESS()('256.2.3.4
+00025790: 2729 0a20 2020 2020 2020 2028 2732 3536  ').        ('256
+000257a0: 2e32 2e33 2e34 272c 2027 656e 7465 7220  .2.3.4', 'enter 
+000257b0: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
+000257c0: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
+000257d0: 535f 4950 4144 4452 4553 5328 2928 2733  S_IPADDRESS()('3
+000257e0: 3030 2e32 2e33 2e34 2729 0a20 2020 2020  00.2.3.4').     
+000257f0: 2020 2028 2733 3030 2e32 2e33 2e34 272c     ('300.2.3.4',
+00025800: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
+00025810: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+00025820: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
+00025830: 4553 5328 6d69 6e69 703d 2731 3932 2e31  ESS(minip='192.1
+00025840: 3638 2e31 2e30 272c 206d 6178 6970 3d27  68.1.0', maxip='
+00025850: 3139 322e 3136 382e 312e 3235 3527 2928  192.168.1.255')(
+00025860: 2731 3932 2e31 3638 2e31 2e31 3030 2729  '192.168.1.100')
+00025870: 0a20 2020 2020 2020 2028 2731 3932 2e31  .        ('192.1
+00025880: 3638 2e31 2e31 3030 272c 204e 6f6e 6529  68.1.100', None)
+00025890: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+000258a0: 4950 4144 4452 4553 5328 6d69 6e69 703d  IPADDRESS(minip=
+000258b0: 2731 2e32 2e33 2e35 272c 206d 6178 6970  '1.2.3.5', maxip
+000258c0: 3d27 312e 322e 332e 3927 2c20 6572 726f  ='1.2.3.9', erro
+000258d0: 725f 6d65 7373 6167 653d 2742 6164 2069  r_message='Bad i
+000258e0: 7027 2928 2731 2e32 2e33 2e34 2729 0a20  p')('1.2.3.4'). 
+000258f0: 2020 2020 2020 2028 2731 2e32 2e33 2e34         ('1.2.3.4
+00025900: 272c 2027 6261 6420 6970 2729 0a20 2020  ', 'bad ip').   
+00025910: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00025920: 4452 4553 5328 6d61 7869 703d 2731 2e32  DRESS(maxip='1.2
+00025930: 2e33 2e34 272c 2069 6e76 6572 743d 5472  .3.4', invert=Tr
+00025940: 7565 2928 2731 3237 2e30 2e30 2e31 2729  ue)('127.0.0.1')
+00025950: 0a20 2020 2020 2020 2028 2731 3237 2e30  .        ('127.0
+00025960: 2e30 2e31 272c 204e 6f6e 6529 0a20 2020  .0.1', None).   
+00025970: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00025980: 4452 4553 5328 6d61 7869 703d 2731 3932  DRESS(maxip='192
+00025990: 2e31 3638 2e31 2e34 272c 2069 6e76 6572  .168.1.4', inver
+000259a0: 743d 5472 7565 2928 2731 3932 2e31 3638  t=True)('192.168
+000259b0: 2e31 2e34 2729 0a20 2020 2020 2020 2028  .1.4').        (
+000259c0: 2731 3932 2e31 3638 2e31 2e34 272c 2027  '192.168.1.4', '
+000259d0: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
+000259e0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+000259f0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00025a00: 5328 6973 5f6c 6f63 616c 686f 7374 3d54  S(is_localhost=T
+00025a10: 7275 6529 2827 3132 372e 302e 302e 3127  rue)('127.0.0.1'
+00025a20: 290a 2020 2020 2020 2020 2827 3132 372e  ).        ('127.
+00025a30: 302e 302e 3127 2c20 4e6f 6e65 290a 2020  0.0.1', None).  
+00025a40: 2020 2020 2020 3e3e 3e20 4953 5f49 5041        >>> IS_IPA
+00025a50: 4444 5245 5353 2869 735f 6c6f 6361 6c68  DDRESS(is_localh
+00025a60: 6f73 743d 5472 7565 2928 2731 3932 2e31  ost=True)('192.1
+00025a70: 3638 2e31 2e31 3027 290a 2020 2020 2020  68.1.10').      
+00025a80: 2020 2827 3139 322e 3136 382e 312e 3130    ('192.168.1.10
+00025a90: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+00025aa0: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
+00025ab0: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00025ac0: 4452 4553 5328 6973 5f6c 6f63 616c 686f  DRESS(is_localho
+00025ad0: 7374 3d46 616c 7365 2928 2731 3237 2e30  st=False)('127.0
+00025ae0: 2e30 2e31 2729 0a20 2020 2020 2020 2028  .0.1').        (
+00025af0: 2731 3237 2e30 2e30 2e31 272c 2027 656e  '127.0.0.1', 'en
+00025b00: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+00025b10: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
+00025b20: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+00025b30: 6d61 7869 703d 2731 3030 2e30 2e30 2e30  maxip='100.0.0.0
+00025b40: 272c 2069 735f 6c6f 6361 6c68 6f73 743d  ', is_localhost=
+00025b50: 5472 7565 2928 2731 3237 2e30 2e30 2e31  True)('127.0.0.1
+00025b60: 2729 0a20 2020 2020 2020 2028 2731 3237  ').        ('127
+00025b70: 2e30 2e30 2e31 272c 2027 656e 7465 7220  .0.0.1', 'enter 
+00025b80: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
+00025b90: 2729 0a0a 2020 2020 2020 2020 3e3e 3e20  ')..        >>> 
+00025ba0: 4953 5f49 5041 4444 5245 5353 2829 2827  IS_IPADDRESS()('
+00025bb0: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
+00025bc0: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+00025bd0: 2020 2020 2827 6665 3830 3a3a 3132 3663      ('fe80::126c
+00025be0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00025bf0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00025c00: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
+00025c10: 2869 735f 6970 7634 3d46 616c 7365 2928  (is_ipv4=False)(
+00025c20: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
+00025c30: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
+00025c40: 2020 2020 2028 2766 6538 303a 3a31 3236       ('fe80::126
+00025c50: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+00025c60: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00025c70: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00025c80: 5328 2928 2766 6538 303a 3a31 3236 633a  S()('fe80::126c:
+00025c90: 3866 6661 3a66 6532 323a 6233 6166 2020  8ffa:fe22:b3af  
+00025ca0: 2729 0a20 2020 2020 2020 2028 2766 6538  ').        ('fe8
+00025cb0: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
+00025cc0: 323a 6233 6166 2020 272c 2027 656e 7465  2:b3af  ', 'ente
+00025cd0: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
+00025ce0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
+00025cf0: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
+00025d00: 5f69 7076 343d 5472 7565 2928 2766 6538  _ipv4=True)('fe8
+00025d10: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
+00025d20: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
+00025d30: 2028 2766 6538 303a 3a31 3236 633a 3866   ('fe80::126c:8f
+00025d40: 6661 3a66 6532 323a 6233 6166 272c 2027  fa:fe22:b3af', '
+00025d50: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
+00025d60: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+00025d70: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00025d80: 5328 6973 5f69 7076 363d 5472 7565 2928  S(is_ipv6=True)(
+00025d90: 2731 3932 2e31 3638 2e31 2e31 2729 0a20  '192.168.1.1'). 
+00025da0: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
+00025db0: 2e31 2e31 272c 2027 656e 7465 7220 7661  .1.1', 'enter va
+00025dc0: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
+00025dd0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00025de0: 4950 4144 4452 4553 5328 6973 5f69 7076  IPADDRESS(is_ipv
+00025df0: 363d 5472 7565 2c20 6572 726f 725f 6d65  6=True, error_me
+00025e00: 7373 6167 653d 2742 6164 2069 7027 2928  ssage='Bad ip')(
+00025e10: 2731 3932 2e31 3638 2e31 2e31 2729 0a20  '192.168.1.1'). 
+00025e20: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
+00025e30: 2e31 2e31 272c 2027 6261 6420 6970 2729  .1.1', 'bad ip')
+00025e40: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00025e50: 4950 4144 4452 4553 5328 6973 5f6c 696e  IPADDRESS(is_lin
+00025e60: 6b5f 6c6f 6361 6c3d 5472 7565 2928 2766  k_local=True)('f
+00025e70: 6538 303a 3a31 3236 633a 3866 6661 3a66  e80::126c:8ffa:f
+00025e80: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
+00025e90: 2020 2028 2766 6538 303a 3a31 3236 633a     ('fe80::126c:
+00025ea0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
+00025eb0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+00025ec0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+00025ed0: 6973 5f6c 696e 6b5f 6c6f 6361 6c3d 4661  is_link_local=Fa
+00025ee0: 6c73 6529 2827 6665 3830 3a3a 3132 3663  lse)('fe80::126c
+00025ef0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00025f00: 290a 2020 2020 2020 2020 2827 6665 3830  ).        ('fe80
+00025f10: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
+00025f20: 3a62 3361 6627 2c20 2765 6e74 6572 2076  :b3af', 'enter v
+00025f30: 616c 6964 2049 5020 6164 6472 6573 7327  alid IP address'
+00025f40: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00025f50: 5f49 5041 4444 5245 5353 2869 735f 6c69  _IPADDRESS(is_li
+00025f60: 6e6b 5f6c 6f63 616c 3d54 7275 6529 2827  nk_local=True)('
+00025f70: 3230 3031 3a3a 3132 3663 3a38 6666 613a  2001::126c:8ffa:
+00025f80: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+00025f90: 2020 2020 2827 3230 3031 3a3a 3132 3663      ('2001::126c
+00025fa0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00025fb0: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
+00025fc0: 5020 6164 6472 6573 7327 290a 2020 2020  P address').    
+00025fd0: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
+00025fe0: 5245 5353 2869 735f 6d75 6c74 6963 6173  RESS(is_multicas
+00025ff0: 743d 5472 7565 2928 2732 3030 313a 3a31  t=True)('2001::1
+00026000: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00026010: 6166 2729 0a20 2020 2020 2020 2028 2732  af').        ('2
+00026020: 3030 313a 3a31 3236 633a 3866 6661 3a66  001::126c:8ffa:f
+00026030: 6532 323a 6233 6166 272c 2027 656e 7465  e22:b3af', 'ente
+00026040: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
+00026050: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
+00026060: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
+00026070: 5f6d 756c 7469 6361 7374 3d54 7275 6529  _multicast=True)
+00026080: 2827 6666 3030 3a3a 3132 3663 3a38 6666  ('ff00::126c:8ff
+00026090: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
+000260a0: 2020 2020 2020 2827 6666 3030 3a3a 3132        ('ff00::12
+000260b0: 3663 3a38 6666 613a 6665 3232 3a62 3361  6c:8ffa:fe22:b3a
+000260c0: 6627 2c20 4e6f 6e65 290a 2020 2020 2020  f', None).      
+000260d0: 2020 3e3e 3e20 4953 5f49 5041 4444 5245    >>> IS_IPADDRE
+000260e0: 5353 2869 735f 726f 7574 6561 626c 653d  SS(is_routeable=
+000260f0: 5472 7565 2928 2732 3030 313a 3a31 3236  True)('2001::126
+00026100: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+00026110: 2729 0a20 2020 2020 2020 2028 2732 3030  ').        ('200
+00026120: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
+00026130: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
+00026140: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00026150: 4144 4452 4553 5328 6973 5f72 6f75 7465  ADDRESS(is_route
+00026160: 6162 6c65 3d54 7275 6529 2827 6666 3030  able=True)('ff00
+00026170: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
+00026180: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
+00026190: 2827 6666 3030 3a3a 3132 3663 3a38 6666  ('ff00::126c:8ff
+000261a0: 613a 6665 3232 3a62 3361 6627 2c20 2765  a:fe22:b3af', 'e
+000261b0: 6e74 6572 2076 616c 6964 2049 5020 6164  nter valid IP ad
+000261c0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+000261d0: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
+000261e0: 2873 7562 6e65 7473 3d27 3230 3031 3a3a  (subnets='2001::
+000261f0: 2f33 3227 2928 2732 3030 313a 3a38 6666  /32')('2001::8ff
+00026200: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
+00026210: 2020 2020 2020 2827 3230 3031 3a3a 3866        ('2001::8f
+00026220: 6661 3a66 6532 323a 6233 6166 272c 204e  fa:fe22:b3af', N
+00026230: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00026240: 2049 535f 4950 4144 4452 4553 5328 7375   IS_IPADDRESS(su
+00026250: 626e 6574 733d 2766 6230 303a 3a2f 3827  bnets='fb00::/8'
+00026260: 2928 2732 3030 313a 3a38 6666 613a 6665  )('2001::8ffa:fe
+00026270: 3232 3a62 3361 6627 290a 2020 2020 2020  22:b3af').      
+00026280: 2020 2827 3230 3031 3a3a 3866 6661 3a66    ('2001::8ffa:f
+00026290: 6532 323a 6233 6166 272c 2027 656e 7465  e22:b3af', 'ente
+000262a0: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
+000262b0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
+000262c0: 2049 535f 4950 4144 4452 4553 5328 7375   IS_IPADDRESS(su
+000262d0: 626e 6574 733d 5b27 6663 3030 3a3a 2f38  bnets=['fc00::/8
+000262e0: 272c 2732 3030 313a 3a2f 3332 275d 2928  ','2001::/32'])(
+000262f0: 2732 3030 313a 3a38 6666 613a 6665 3232  '2001::8ffa:fe22
+00026300: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
+00026310: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
+00026320: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
+00026330: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00026340: 4144 4452 4553 5328 7375 626e 6574 733d  ADDRESS(subnets=
+00026350: 2769 6e76 616c 6964 7375 626e 6574 2729  'invalidsubnet')
+00026360: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
+00026370: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
+00026380: 2028 2732 3030 313a 3a38 6666 613a 6665   ('2001::8ffa:fe
+00026390: 3232 3a62 3361 6627 2c20 2769 6e76 616c  22:b3af', 'inval
+000263a0: 6964 2073 7562 6e65 7420 7072 6f76 6964  id subnet provid
+000263b0: 6564 2729 0a20 2020 2022 2222 0a0a 2020  ed').    """..  
+000263c0: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+000263d0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+000263e0: 2020 2020 2020 6d69 6e69 703d 2230 2e30        minip="0.0
+000263f0: 2e30 2e30 222c 0a20 2020 2020 2020 206d  .0.0",.        m
+00026400: 6178 6970 3d22 3235 352e 3235 352e 3235  axip="255.255.25
+00026410: 352e 3235 3522 2c0a 2020 2020 2020 2020  5.255",.        
+00026420: 696e 7665 7274 3d46 616c 7365 2c0a 2020  invert=False,.  
+00026430: 2020 2020 2020 6973 5f6c 6f63 616c 686f        is_localho
+00026440: 7374 3d4e 6f6e 652c 0a20 2020 2020 2020  st=None,.       
+00026450: 2069 735f 7072 6976 6174 653d 4e6f 6e65   is_private=None
+00026460: 2c0a 2020 2020 2020 2020 6973 5f61 7574  ,.        is_aut
+00026470: 6f6d 6174 6963 3d4e 6f6e 652c 0a20 2020  omatic=None,.   
+00026480: 2020 2020 2069 735f 6970 7634 3d4e 6f6e       is_ipv4=Non
+00026490: 652c 0a20 2020 2020 2020 2069 735f 6c69  e,.        is_li
+000264a0: 6e6b 5f6c 6f63 616c 3d4e 6f6e 652c 0a20  nk_local=None,. 
+000264b0: 2020 2020 2020 2069 735f 7265 7365 7276         is_reserv
+000264c0: 6564 3d4e 6f6e 652c 0a20 2020 2020 2020  ed=None,.       
+000264d0: 2069 735f 6d75 6c74 6963 6173 743d 4e6f   is_multicast=No
+000264e0: 6e65 2c0a 2020 2020 2020 2020 6973 5f72  ne,.        is_r
+000264f0: 6f75 7465 6162 6c65 3d4e 6f6e 652c 0a20  outeable=None,. 
+00026500: 2020 2020 2020 2069 735f 3674 6f34 3d4e         is_6to4=N
+00026510: 6f6e 652c 0a20 2020 2020 2020 2069 735f  one,.        is_
+00026520: 7465 7265 646f 3d4e 6f6e 652c 0a20 2020  teredo=None,.   
+00026530: 2020 2020 2073 7562 6e65 7473 3d4e 6f6e       subnets=Non
+00026540: 652c 0a20 2020 2020 2020 2069 735f 6970  e,.        is_ip
+00026550: 7636 3d4e 6f6e 652c 0a20 2020 2020 2020  v6=None,.       
+00026560: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+00026570: 456e 7465 7220 7661 6c69 6420 4950 2061  Enter valid IP a
+00026580: 6464 7265 7373 222c 0a20 2020 2029 3a0a  ddress",.    ):.
+00026590: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
+000265a0: 6970 203d 2028 6d69 6e69 702c 290a 2020  ip = (minip,).  
+000265b0: 2020 2020 2020 7365 6c66 2e6d 6178 6970        self.maxip
+000265c0: 203d 2028 6d61 7869 702c 290a 2020 2020   = (maxip,).    
+000265d0: 2020 2020 7365 6c66 2e69 6e76 6572 7420      self.invert 
+000265e0: 3d20 696e 7665 7274 0a20 2020 2020 2020  = invert.       
+000265f0: 2073 656c 662e 6973 5f6c 6f63 616c 686f   self.is_localho
+00026600: 7374 203d 2069 735f 6c6f 6361 6c68 6f73  st = is_localhos
+00026610: 740a 2020 2020 2020 2020 7365 6c66 2e69  t.        self.i
+00026620: 735f 7072 6976 6174 6520 3d20 6973 5f70  s_private = is_p
+00026630: 7269 7661 7465 0a20 2020 2020 2020 2073  rivate.        s
+00026640: 656c 662e 6973 5f61 7574 6f6d 6174 6963  elf.is_automatic
+00026650: 203d 2069 735f 6175 746f 6d61 7469 630a   = is_automatic.
+00026660: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
+00026670: 6970 7634 203d 2069 735f 6970 7634 206f  ipv4 = is_ipv4 o
+00026680: 7220 6973 5f69 7076 3620 6973 2046 616c  r is_ipv6 is Fal
+00026690: 7365 0a20 2020 2020 2020 2073 656c 662e  se.        self.
+000266a0: 6973 5f70 7269 7661 7465 203d 2069 735f  is_private = is_
+000266b0: 7072 6976 6174 650a 2020 2020 2020 2020  private.        
+000266c0: 7365 6c66 2e69 735f 6c69 6e6b 5f6c 6f63  self.is_link_loc
+000266d0: 616c 203d 2069 735f 6c69 6e6b 5f6c 6f63  al = is_link_loc
+000266e0: 616c 0a20 2020 2020 2020 2073 656c 662e  al.        self.
+000266f0: 6973 5f72 6573 6572 7665 6420 3d20 6973  is_reserved = is
+00026700: 5f72 6573 6572 7665 640a 2020 2020 2020  _reserved.      
+00026710: 2020 7365 6c66 2e69 735f 6d75 6c74 6963    self.is_multic
+00026720: 6173 7420 3d20 6973 5f6d 756c 7469 6361  ast = is_multica
+00026730: 7374 0a20 2020 2020 2020 2073 656c 662e  st.        self.
+00026740: 6973 5f72 6f75 7465 6162 6c65 203d 2069  is_routeable = i
+00026750: 735f 726f 7574 6561 626c 650a 2020 2020  s_routeable.    
+00026760: 2020 2020 7365 6c66 2e69 735f 3674 6f34      self.is_6to4
+00026770: 203d 2069 735f 3674 6f34 0a20 2020 2020   = is_6to4.     
+00026780: 2020 2073 656c 662e 6973 5f74 6572 6564     self.is_tered
+00026790: 6f20 3d20 6973 5f74 6572 6564 6f0a 2020  o = is_teredo.  
+000267a0: 2020 2020 2020 7365 6c66 2e73 7562 6e65        self.subne
+000267b0: 7473 203d 2073 7562 6e65 7473 0a20 2020  ts = subnets.   
+000267c0: 2020 2020 2073 656c 662e 6973 5f69 7076       self.is_ipv
+000267d0: 3620 3d20 6973 5f69 7076 3620 6f72 2069  6 = is_ipv6 or i
+000267e0: 735f 6970 7634 2069 7320 4661 6c73 650a  s_ipv4 is False.
+000267f0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00026800: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+00026810: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
+00026820: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+00026830: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+00026840: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00026850: 2020 2049 5041 6464 7265 7373 203d 2069     IPAddress = i
+00026860: 7061 6464 7265 7373 2e69 705f 6164 6472  paddress.ip_addr
+00026870: 6573 730a 2020 2020 2020 2020 4950 7636  ess.        IPv6
+00026880: 4164 6472 6573 7320 3d20 6970 6164 6472  Address = ipaddr
+00026890: 6573 732e 4950 7636 4164 6472 6573 730a  ess.IPv6Address.
+000268a0: 2020 2020 2020 2020 4950 7634 4164 6472          IPv4Addr
+000268b0: 6573 7320 3d20 6970 6164 6472 6573 732e  ess = ipaddress.
+000268c0: 4950 7634 4164 6472 6573 730a 0a20 2020  IPv4Address..   
+000268d0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000268e0: 2020 2020 2020 6970 203d 2049 5041 6464        ip = IPAdd
+000268f0: 7265 7373 2874 6f5f 756e 6963 6f64 6528  ress(to_unicode(
+00026900: 7661 6c75 6529 290a 2020 2020 2020 2020  value)).        
+00026910: 6578 6365 7074 2056 616c 7565 4572 726f  except ValueErro
+00026920: 723a 0a20 2020 2020 2020 2020 2020 2072  r:.            r
+00026930: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00026940: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+00026950: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00026960: 6d65 7373 6167 6529 290a 0a20 2020 2020  message))..     
+00026970: 2020 2069 6620 7365 6c66 2e69 735f 6970     if self.is_ip
+00026980: 7634 2061 6e64 2069 7369 6e73 7461 6e63  v4 and isinstanc
+00026990: 6528 6970 2c20 4950 7636 4164 6472 6573  e(ip, IPv6Addres
+000269a0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+000269b0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+000269c0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+000269d0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+000269e0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+000269f0: 2020 2065 6c69 6620 7365 6c66 2e69 735f     elif self.is_
+00026a00: 6970 7636 2061 6e64 2069 7369 6e73 7461  ipv6 and isinsta
+00026a10: 6e63 6528 6970 2c20 4950 7634 4164 6472  nce(ip, IPv4Addr
+00026a20: 6573 7329 3a0a 2020 2020 2020 2020 2020  ess):.          
+00026a30: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+00026a40: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
+00026a50: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
+00026a60: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
+00026a70: 2020 2020 2065 6c69 6620 7365 6c66 2e69       elif self.i
+00026a80: 735f 6970 7634 206f 7220 6973 696e 7374  s_ipv4 or isinst
+00026a90: 616e 6365 2869 702c 2049 5076 3441 6464  ance(ip, IPv4Add
+00026aa0: 7265 7373 293a 0a20 2020 2020 2020 2020  ress):.         
+00026ab0: 2020 2072 6574 7572 6e20 4953 5f49 5056     return IS_IPV
+00026ac0: 3428 0a20 2020 2020 2020 2020 2020 2020  4(.             
+00026ad0: 2020 206d 696e 6970 3d73 656c 662e 6d69     minip=self.mi
+00026ae0: 6e69 702c 0a20 2020 2020 2020 2020 2020  nip,.           
+00026af0: 2020 2020 206d 6178 6970 3d73 656c 662e       maxip=self.
+00026b00: 6d61 7869 702c 0a20 2020 2020 2020 2020  maxip,.         
+00026b10: 2020 2020 2020 2069 6e76 6572 743d 7365         invert=se
+00026b20: 6c66 2e69 6e76 6572 742c 0a20 2020 2020  lf.invert,.     
+00026b30: 2020 2020 2020 2020 2020 2069 735f 6c6f             is_lo
+00026b40: 6361 6c68 6f73 743d 7365 6c66 2e69 735f  calhost=self.is_
+00026b50: 6c6f 6361 6c68 6f73 742c 0a20 2020 2020  localhost,.     
+00026b60: 2020 2020 2020 2020 2020 2069 735f 7072             is_pr
+00026b70: 6976 6174 653d 7365 6c66 2e69 735f 7072  ivate=self.is_pr
+00026b80: 6976 6174 652c 0a20 2020 2020 2020 2020  ivate,.         
+00026b90: 2020 2020 2020 2069 735f 6175 746f 6d61         is_automa
+00026ba0: 7469 633d 7365 6c66 2e69 735f 6175 746f  tic=self.is_auto
+00026bb0: 6d61 7469 632c 0a20 2020 2020 2020 2020  matic,.         
+00026bc0: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+00026bd0: 7361 6765 3d73 656c 662e 6572 726f 725f  sage=self.error_
+00026be0: 6d65 7373 6167 652c 0a20 2020 2020 2020  message,.       
+00026bf0: 2020 2020 2029 2e76 616c 6964 6174 6528       ).validate(
+00026c00: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
+00026c10: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
+00026c20: 656c 662e 6973 5f69 7076 3620 6f72 2069  elf.is_ipv6 or i
+00026c30: 7369 6e73 7461 6e63 6528 6970 2c20 4950  sinstance(ip, IP
+00026c40: 7636 4164 6472 6573 7329 3a0a 2020 2020  v6Address):.    
+00026c50: 2020 2020 2020 2020 7265 7475 726e 2049          return I
+00026c60: 535f 4950 5636 280a 2020 2020 2020 2020  S_IPV6(.        
+00026c70: 2020 2020 2020 2020 6973 5f70 7269 7661          is_priva
+00026c80: 7465 3d73 656c 662e 6973 5f70 7269 7661  te=self.is_priva
+00026c90: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
+00026ca0: 2020 2020 6973 5f6c 696e 6b5f 6c6f 6361      is_link_loca
+00026cb0: 6c3d 7365 6c66 2e69 735f 6c69 6e6b 5f6c  l=self.is_link_l
+00026cc0: 6f63 616c 2c0a 2020 2020 2020 2020 2020  ocal,.          
+00026cd0: 2020 2020 2020 6973 5f72 6573 6572 7665        is_reserve
+00026ce0: 643d 7365 6c66 2e69 735f 7265 7365 7276  d=self.is_reserv
+00026cf0: 6564 2c0a 2020 2020 2020 2020 2020 2020  ed,.            
+00026d00: 2020 2020 6973 5f6d 756c 7469 6361 7374      is_multicast
+00026d10: 3d73 656c 662e 6973 5f6d 756c 7469 6361  =self.is_multica
+00026d20: 7374 2c0a 2020 2020 2020 2020 2020 2020  st,.            
+00026d30: 2020 2020 6973 5f72 6f75 7465 6162 6c65      is_routeable
+00026d40: 3d73 656c 662e 6973 5f72 6f75 7465 6162  =self.is_routeab
+00026d50: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
+00026d60: 2020 2020 6973 5f36 746f 343d 7365 6c66      is_6to4=self
+00026d70: 2e69 735f 3674 6f34 2c0a 2020 2020 2020  .is_6to4,.      
+00026d80: 2020 2020 2020 2020 2020 6973 5f74 6572            is_ter
+00026d90: 6564 6f3d 7365 6c66 2e69 735f 7465 7265  edo=self.is_tere
+00026da0: 646f 2c0a 2020 2020 2020 2020 2020 2020  do,.            
+00026db0: 2020 2020 7375 626e 6574 733d 7365 6c66      subnets=self
+00026dc0: 2e73 7562 6e65 7473 2c0a 2020 2020 2020  .subnets,.      
+00026dd0: 2020 2020 2020 2020 2020 6572 726f 725f            error_
+00026de0: 6d65 7373 6167 653d 7365 6c66 2e65 7272  message=self.err
+00026df0: 6f72 5f6d 6573 7361 6765 2c0a 2020 2020  or_message,.    
+00026e00: 2020 2020 2020 2020 292e 7661 6c69 6461          ).valida
+00026e10: 7465 2876 616c 7565 2c20 7265 636f 7264  te(value, record
+00026e20: 5f69 6429 0a20 2020 2020 2020 2065 6c73  _id).        els
+00026e30: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00026e40: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00026e50: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+00026e60: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00026e70: 6d65 7373 6167 6529 290a                 message)).
```

### Comparing `pydal-20240428.2/pydal.egg-info/PKG-INFO` & `pydal-20240529.1/pydal.egg-info/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pydal
-Version: 20240428.2
+Version: 20240529.1
 Summary: pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")
 Author-email: Massimo Di Pierro <massimo.dipierro@gmail.com>
 Project-URL: Homepage, https://github.com/web2py/pydal
 Project-URL: Bug Tracker, https://github.com/web2py/pydal/issues
 Project-URL: Documentation, https://py4web.com/_documentation/static/en/chapter-07.html
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: BSD License
```

### Comparing `pydal-20240428.2/pydal.egg-info/SOURCES.txt` & `pydal-20240529.1/pydal.egg-info/SOURCES.txt`

 * *Files 8% similar despite different names*

```diff
@@ -125,9 +125,11 @@
 tests/__pycache__/contribs.cpython-311.pyc
 tests/__pycache__/indexes.cpython-311.pyc
 tests/__pycache__/is_url_validators.cpython-311.pyc
 tests/__pycache__/restapi.cpython-311.pyc
 tests/__pycache__/smart_query.cpython-311.pyc
 tests/__pycache__/sql.cpython-311.pyc
 tests/__pycache__/tags.cpython-311.pyc
+tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc
 tests/__pycache__/validation.cpython-311.pyc
+tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc
 tests/__pycache__/validators.cpython-311.pyc
```

### Comparing `pydal-20240428.2/pyproject.toml` & `pydal-20240529.1/pyproject.toml`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [project]
 name = "pydal"
-version = "20240428.2"
+version = "20240529.1"
 authors = [{ name="Massimo Di Pierro", email="massimo.dipierro@gmail.com" },]
 description = 'pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")'
 readme = "README.md"
 requires-python = ">=3.7"
 classifiers = [
       "Programming Language :: Python :: 3",
       "License :: OSI Approved :: BSD License",
```

### Comparing `pydal-20240428.2/tests/__pycache__/_adapt.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/_adapt.cpython-311.pyc`

 * *Files 15% similar despite different names*

#### Python bytecode

```diff
@@ -77,19 +77,19 @@
                118 JUMP_IF_TRUE_OR_POP      3 (to 126)
                120 LOAD_NAME                5 (IS_MONGODB)
                122 JUMP_IF_TRUE_OR_POP      1 (to 126)
                124 LOAD_NAME                3 (IS_IMAP)
            >>  126 STORE_NAME              12 (IS_NOSQL)
    
     16         128 LOAD_CONST              15 ((None,))
-               130 LOAD_CONST              13 (<code object drop, file "/home/mdipierro/Dropbox/packages/pydal/tests/_adapt.py", line 16>)
+               130 LOAD_CONST              13 (<code object drop, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_adapt.py", line 16>)
                132 MAKE_FUNCTION            1 (defaults)
                134 STORE_NAME              13 (drop)
    
-    32         136 LOAD_CONST              14 (<code object _quote, file "/home/mdipierro/Dropbox/packages/pydal/tests/_adapt.py", line 32>)
+    32         136 LOAD_CONST              14 (<code object _quote, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_adapt.py", line 32>)
                138 MAKE_FUNCTION            0
                140 STORE_NAME              14 (_quote)
                142 LOAD_CONST               1 (None)
                144 RETURN_VALUE
    consts
       0
       None
@@ -195,15 +195,15 @@
                      356 RETURN_VALUE
          consts
             None
          names      ('IS_NOSQL', 'IS_MONGODB', '_db', '_common_filter', 'delete', '_tablename', 'tables', 'index', '_remove_references_to', 'drop')
          varnames   ('table', 'cascade', 'db')
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_adapt.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_adapt.py'
          name       'drop'
          firstlineno 16
          lnotab 0x02011c020e011a013a0110014a012e0204012e02
       code
          argcount  : 2
          nlocals   : 2
          stacksize : 2
@@ -223,22 +223,22 @@
                       50 RETURN_VALUE
          consts
             None
          names      ('_adapter', 'dialect', '__class__', 'quote_template')
          varnames   ('db', 'value')
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_adapt.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_adapt.py'
          name       '_quote'
          firstlineno 32
          lnotab 0x0201
       (None,)
    names      ('os', 'getenv', 'DEFAULT_URI', 'IS_IMAP', 'IS_GAE', 'IS_MONGODB', 'IS_POSTGRESQL', 'IS_SQLITE', 'IS_MSSQL', 'IS_MYSQL', 'IS_TERADATA', 'IS_ORACLE', 'IS_NOSQL', 'drop', '_quote')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_adapt.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_adapt.py'
    name       '<module>'
    firstlineno 1
    lnotab
       0x00ff0201080222010801080108010801080108010801080108010c0308
       10
```

### Comparing `pydal-20240428.2/tests/__pycache__/_helpers.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/_helpers.cpython-311.pyc`

 * *Files 2% similar despite different names*

#### Python bytecode

```diff
@@ -33,15 +33,15 @@
                 34 IMPORT_NAME              5 (_compat)
                 36 IMPORT_FROM              6 (unittest)
                 38 STORE_NAME               6 (unittest)
                 40 POP_TOP
    
      7          42 PUSH_NULL
                 44 LOAD_BUILD_CLASS
-                46 LOAD_CONST               5 (<code object DALtest, file "/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py", line 7>)
+                46 LOAD_CONST               5 (<code object DALtest, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py", line 7>)
                 48 MAKE_FUNCTION            0
                 50 LOAD_CONST               6 ('DALtest')
                 52 LOAD_NAME                6 (unittest)
                 54 LOAD_ATTR                7 (TestCase)
                 64 PRECALL                  3
                 68 CALL                     3
                 78 STORE_NAME               8 (DALtest)
@@ -67,23 +67,23 @@
                        4 LOAD_NAME                0 (__name__)
                        6 STORE_NAME               1 (__module__)
                        8 LOAD_CONST               0 ('DALtest')
                       10 STORE_NAME               2 (__qualname__)
          
            8          12 LOAD_CLOSURE             0 (__class__)
                       14 BUILD_TUPLE              1
-                      16 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py", line 8>)
+                      16 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py", line 8>)
                       18 MAKE_FUNCTION            8 (closure)
                       20 STORE_NAME               3 (__init__)
          
-          12          22 LOAD_CONST               2 (<code object connect, file "/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py", line 12>)
+          12          22 LOAD_CONST               2 (<code object connect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py", line 12>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               4 (connect)
          
-          20          28 LOAD_CONST               3 (<code object tearDown, file "/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py", line 20>)
+          20          28 LOAD_CONST               3 (<code object tearDown, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py", line 20>)
                       30 MAKE_FUNCTION            0
                       32 STORE_NAME               5 (tearDown)
                       34 LOAD_CLOSURE             0 (__class__)
                       36 COPY                     1
                       38 STORE_NAME               6 (__classcell__)
                       40 RETURN_VALUE
          consts
@@ -122,15 +122,15 @@
                             84 RETURN_VALUE
                consts
                   None
                names      ('super', 'DALtest', '__init__', '_connections')
                varnames   ('self', 'args', 'kwargs')
                freevars   ('__class__',)
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py'
                name       '__init__'
                firstlineno 8
                lnotab 0x04014001
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 5
@@ -188,15 +188,15 @@
                   'uri'
                   'check_reserved'
                   'all'
                names      ('setdefault', 'DEFAULT_URI', 'DAL', '_connections', 'append')
                varnames   ('self', 'args', 'kwargs', 'ret')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py'
                name       'connect'
                firstlineno 12
                lnotab 0x0201040136012e0118013401
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 6
@@ -262,29 +262,29 @@
                            236 RETURN_VALUE
                consts
                   None
                names      ('_connections', 'commit', 'list', 'tables', 'reversed', 'drop', 'close')
                varnames   ('self', 'db', 'tablist', 'table')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py'
                name       'tearDown'
                firstlineno 20
                lnotab 0x020112012801280122012c012a01
          names      ('__name__', '__module__', '__qualname__', '__init__', 'connect', 'tearDown', '__classcell__')
          varnames   ()
          freevars   ()
          cellvars   ('__class__',)
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py'
          name       'DALtest'
          firstlineno 7
          lnotab 0x0c010a040608
       'DALtest'
       None
    names      ('pydal', 'DAL', '_adapt', 'DEFAULT_URI', 'drop', '_compat', 'unittest', 'TestCase', 'DALtest')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/_helpers.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/_helpers.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff02010c0210010c03
```

### Comparing `pydal-20240428.2/tests/__pycache__/base.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/base.cpython-311.pyc`

 * *Files 0% similar despite different names*

#### Python bytecode

```diff
@@ -109,15 +109,15 @@
                140 LOAD_NAME               12 (IS_ORACLE)
                142 LOAD_CONST               8 ('Reference Not Null unsupported on Oracle')
                144 PRECALL                  2
                148 CALL                     2
    
     15         158 PUSH_NULL
                160 LOAD_BUILD_CLASS
-               162 LOAD_CONST               9 (<code object TestReferenceNOTNULL, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 13>)
+               162 LOAD_CONST               9 (<code object TestReferenceNOTNULL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 13>)
                164 MAKE_FUNCTION            0
                166 LOAD_CONST              10 ('TestReferenceNOTNULL')
                168 LOAD_NAME               16 (unittest)
                170 LOAD_ATTR               18 (TestCase)
                180 PRECALL                  3
                184 CALL                     3
    
@@ -151,15 +151,15 @@
                302 LOAD_NAME               12 (IS_ORACLE)
                304 LOAD_CONST              13 ('Reference Unique unsupported on Oracle')
                306 PRECALL                  2
                310 CALL                     2
    
     38         320 PUSH_NULL
                322 LOAD_BUILD_CLASS
-               324 LOAD_CONST              14 (<code object TestReferenceUNIQUE, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 35>)
+               324 LOAD_CONST              14 (<code object TestReferenceUNIQUE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 35>)
                326 MAKE_FUNCTION            0
                328 LOAD_CONST              15 ('TestReferenceUNIQUE')
                330 LOAD_NAME               16 (unittest)
                332 LOAD_ATTR               18 (TestCase)
                342 PRECALL                  3
                346 CALL                     3
    
@@ -196,15 +196,15 @@
                478 LOAD_NAME               12 (IS_ORACLE)
                480 LOAD_CONST              18 ('Reference Unique not Null unsupported on Oracle')
                482 PRECALL                  2
                486 CALL                     2
    
     71         496 PUSH_NULL
                498 LOAD_BUILD_CLASS
-               500 LOAD_CONST              19 (<code object TestReferenceUNIQUENotNull, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 68>)
+               500 LOAD_CONST              19 (<code object TestReferenceUNIQUENotNull, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 68>)
                502 MAKE_FUNCTION            0
                504 LOAD_CONST              20 ('TestReferenceUNIQUENotNull')
                506 LOAD_NAME               16 (unittest)
                508 LOAD_ATTR               18 (TestCase)
                518 PRECALL                  3
                522 CALL                     3
    
@@ -236,15 +236,15 @@
                628 UNARY_NOT
            >>  630 LOAD_CONST              22 ('Skip unicode on py3 and MSSQL')
                632 PRECALL                  2
                636 CALL                     2
    
    100         646 PUSH_NULL
                648 LOAD_BUILD_CLASS
-               650 LOAD_CONST              23 (<code object TestUnicode, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 98>)
+               650 LOAD_CONST              23 (<code object TestUnicode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 98>)
                652 MAKE_FUNCTION            0
                654 LOAD_CONST              24 ('TestUnicode')
                656 LOAD_NAME               16 (unittest)
                658 LOAD_ATTR               18 (TestCase)
                668 PRECALL                  3
                672 CALL                     3
    
@@ -254,15 +254,15 @@
     98         696 PRECALL                  0
                700 CALL                     0
    
    100         710 STORE_NAME              22 (TestUnicode)
    
    113         712 PUSH_NULL
                714 LOAD_BUILD_CLASS
-               716 LOAD_CONST              25 (<code object TestParseDateTime, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 113>)
+               716 LOAD_CONST              25 (<code object TestParseDateTime, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 113>)
                718 MAKE_FUNCTION            0
                720 LOAD_CONST              26 ('TestParseDateTime')
                722 LOAD_NAME               16 (unittest)
                724 LOAD_ATTR               18 (TestCase)
                734 PRECALL                  3
                738 CALL                     3
                748 STORE_NAME              23 (TestParseDateTime)
@@ -281,15 +281,15 @@
                796 LOAD_NAME               13 (IS_TERADATA)
                798 LOAD_CONST              28 ('chained join unsupported on TERADATA')
                800 PRECALL                  2
                804 CALL                     2
    
    152         814 PUSH_NULL
                816 LOAD_BUILD_CLASS
-               818 LOAD_CONST              29 (<code object TestChainedJoinUNIQUE, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 150>)
+               818 LOAD_CONST              29 (<code object TestChainedJoinUNIQUE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 150>)
                820 MAKE_FUNCTION            0
                822 LOAD_CONST              30 ('TestChainedJoinUNIQUE')
                824 LOAD_NAME               16 (unittest)
                826 LOAD_ATTR               18 (TestCase)
                836 PRECALL                  3
                840 CALL                     3
    
@@ -299,15 +299,15 @@
    150         864 PRECALL                  0
                868 CALL                     0
    
    152         878 STORE_NAME              24 (TestChainedJoinUNIQUE)
    
    195         880 PUSH_NULL
                882 LOAD_BUILD_CLASS
-               884 LOAD_CONST              31 (<code object TestNullAdapter, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 195>)
+               884 LOAD_CONST              31 (<code object TestNullAdapter, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 195>)
                886 MAKE_FUNCTION            0
                888 LOAD_CONST              32 ('TestNullAdapter')
                890 LOAD_NAME               16 (unittest)
                892 LOAD_ATTR               18 (TestCase)
                902 PRECALL                  3
                906 CALL                     3
                916 STORE_NAME              25 (TestNullAdapter)
@@ -317,15 +317,15 @@
                922 LOAD_ATTR               26 (skip)
                932 LOAD_CONST              33 ('')
                934 PRECALL                  1
                938 CALL                     1
    
    207         948 PUSH_NULL
                950 LOAD_BUILD_CLASS
-               952 LOAD_CONST              34 (<code object TestSingleTransaction, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 206>)
+               952 LOAD_CONST              34 (<code object TestSingleTransaction, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 206>)
                954 MAKE_FUNCTION            0
                956 LOAD_CONST              35 ('TestSingleTransaction')
                958 LOAD_NAME               16 (unittest)
                960 LOAD_ATTR               18 (TestCase)
                970 PRECALL                  3
                974 CALL                     3
    
@@ -353,15 +353,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           13           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestReferenceNOTNULL')
                        8 STORE_NAME               2 (__qualname__)
          
-          18          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 18>)
+          18          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 18>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestReferenceNOTNULL'
             code
@@ -509,24 +509,24 @@
                   ('notnull',)
                   'pydal'
                   ('vv',)
                names      ('DAL', 'DEFAULT_URI', '_adapter', 'types', 'define_table', 'Field', 'assertRaises', 'Exception', 'ttt', 'insert', 'commit', 'drop', 'tt', 'close')
                varnames   ('self', 'ref', 'bigint', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 18
                lnotab 0x020110013001200102014601180146ff10034e022801280128012cf3
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestReferenceNOTNULL'
          firstlineno 13
          lnotab 0x0a05
       'TestReferenceNOTNULL'
       'Reference Unique unsupported on IMAP'
       'Reference Unique unsupported on GAE'
       'Reference Unique unsupported on Oracle'
@@ -538,15 +538,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           35           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestReferenceUNIQUE')
                        8 STORE_NAME               2 (__qualname__)
          
-          41          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 41>)
+          41          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 41>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestReferenceUNIQUE'
             code
@@ -774,26 +774,26 @@
                   2
                   ('tt_id', 'tt_uq')
                   3
                names      ('DAL', 'DEFAULT_URI', '_adapter', 'types', 'define_table', 'Field', 'tt', 'insert', 'ttt', 'assertRaises', 'Exception', 'commit', 'drop', 'close')
                varnames   ('self', 'ref', 'bigint', 'db', 'id_1', 'id_2')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 41
                lnotab
                   0x020110013001200102014601180102011c01280122fc10063601360238
                   023801500150022801280128012ce9
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestReferenceUNIQUE'
          firstlineno 35
          lnotab 0x0a06
       'TestReferenceUNIQUE'
       'Reference Unique not Null unsupported on IMAP'
       'Reference Unique not Null unsupported on GAE'
       'Reference Unique not Null unsupported on Oracle'
@@ -805,15 +805,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           68           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestReferenceUNIQUENotNull')
                        8 STORE_NAME               2 (__qualname__)
          
-          74          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 74>)
+          74          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 74>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestReferenceUNIQUENotNull'
             code
@@ -1009,26 +1009,26 @@
                   'pydal'
                   ('vv',)
                   ('tt_id',)
                names      ('DAL', 'DEFAULT_URI', '_adapter', 'types', 'define_table', 'Field', 'assertRaises', 'Exception', 'ttt', 'insert', 'commit', 'tt', 'drop', 'close')
                varnames   ('self', 'ref', 'bigint', 'db', 'id_i')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 74
                lnotab
                   0x020110013001200102014601180102011c012afd10054e012801360236
                   014e022801280128012cec
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestReferenceUNIQUENotNull'
          firstlineno 68
          lnotab 0x0a06
       'TestReferenceUNIQUENotNull'
       'Skip unicode on IMAP'
       'Skip unicode on py3 and MSSQL'
       code
@@ -1039,15 +1039,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           98           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestUnicode')
                        8 STORE_NAME               2 (__qualname__)
          
-         101          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 101>)
+         101          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 101>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestUnicode'
             code
@@ -1160,24 +1160,24 @@
                   'vv'
                   ''
                   ('vv',)
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'tt', 'insert', 'id', 'select', 'first', 'assertEqual', 'vv', 'commit', 'drop', 'close')
                varnames   ('self', 'db', 'vv', 'id_i', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 101
                lnotab 0x02012e014601040136017a01360128012801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestUnicode'
          firstlineno 98
          lnotab 0x0a03
       'TestUnicode'
       code
          argcount  : 0
          nlocals   : 0
@@ -1186,15 +1186,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          113           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestParseDateTime')
                        8 STORE_NAME               2 (__qualname__)
          
-         114          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 114>)
+         114          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 114>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestParseDateTime'
             code
@@ -1258,15 +1258,15 @@
                            120 POP_JUMP_FORWARD_IF_NOT_NONE     2 (to 126)
                
                119         122 LOAD_CONST               0 (None)
                            124 RETURN_VALUE
                
                121     >>  126 LOAD_CLOSURE             3 (db)
                            128 BUILD_TUPLE              1
-                           130 LOAD_CONST               4 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 121>)
+                           130 LOAD_CONST               4 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 121>)
                            132 MAKE_FUNCTION            8 (closure)
                            134 STORE_FAST               1 (parse)
                
                123         136 PUSH_NULL
                            138 LOAD_FAST                1 (parse)
                            140 LOAD_CONST               5 ('2015-09-04t12:33:36.223245')
                            142 PRECALL                  1
@@ -1451,15 +1451,15 @@
                      consts
                         None
                         'datetime'
                      names      ('_adapter', 'parser', 'parse')
                      varnames   ('v',)
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                      name       '<lambda>'
                      firstlineno 121
                      lnotab 0x
                   '2015-09-04t12:33:36.223245'
                   223245
                   12
                   '2015-09-04t12:33:36.223245Z'
@@ -1474,26 +1474,26 @@
                   1230
                   '2015-09-04t12:33:36.1234567890'
                   123456
                names      ('DAL', 'DEFAULT_URI', '_adapter', 'parser', 'registered', 'get', 'assertEqual', 'microsecond', 'hour', 'close')
                varnames   ('self', 'parse', 'dt')
                freevars   ()
                cellvars   ('db',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 114
                lnotab
                   0x04012e03480104020a0216013601360216013601360216013601360216
                   0136013602160136021601360216013601
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestParseDateTime'
          firstlineno 113
          lnotab 0x0a01
       'TestParseDateTime'
       'chained join unsupported on IMAP'
       'chained join unsupported on TERADATA'
       code
@@ -1504,15 +1504,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          150           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestChainedJoinUNIQUE')
                        8 STORE_NAME               2 (__qualname__)
          
-         155          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 155>)
+         155          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 155>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestChainedJoinUNIQUE'
             code
@@ -2029,27 +2029,27 @@
                   'z'
                   7
                   8
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'aa', 'insert', 'bb', 'commit', 'select', 'join', 'name', 'assertEqual', 'id', 'as_json', 'drop', 'close')
                varnames   ('self', 'db', 'k', 'i', 'j', 'rows', 'rows_json')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 155
                lnotab
                   0x02012e014601640108013601080140ff02022801440170015801580158
                   01580158015801580158015802440158024c014c014c014c014c014c014c
                   014c014c02280128012801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestChainedJoinUNIQUE'
          firstlineno 150
          lnotab 0x0a05
       'TestChainedJoinUNIQUE'
       code
          argcount  : 0
          nlocals   : 0
@@ -2058,15 +2058,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          195           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestNullAdapter')
                        8 STORE_NAME               2 (__qualname__)
          
-         198          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 198>)
+         198          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 198>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestNullAdapter'
             code
@@ -2136,24 +2136,24 @@
                   None
                   'no_table'
                   'aa'
                names      ('DAL', 'define_table', 'Field', 'assertIsInstance', 'no_table', 'aa', 'close')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'testRun'
                firstlineno 198
                lnotab 0x02011e0146014a014c01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestNullAdapter'
          firstlineno 195
          lnotab 0x0a03
       'TestNullAdapter'
       ''
       code
          argcount  : 0
@@ -2163,15 +2163,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          206           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestSingleTransaction')
                        8 STORE_NAME               2 (__qualname__)
          
-         208          10 LOAD_CONST               1 (<code object test_single_transaction, file "/home/mdipierro/Dropbox/packages/pydal/tests/base.py", line 208>)
+         208          10 LOAD_CONST               1 (<code object test_single_transaction, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py", line 208>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (test_single_transaction)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestSingleTransaction'
             code
@@ -2395,35 +2395,35 @@
                   'test'
                   ('aa',)
                   1
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'assertEqual', 'tt', 'count', 'commit', 'single_transaction', 'insert', 'ZeroDivisionError')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
                name       'test_single_transaction'
                firstlineno 208
                lnotab
                   0x0201280146016c01280102012a0136010afe3203120104ff08026c012a
                   0136ff2e02
             None
          names      ('__name__', '__module__', '__qualname__', 'test_single_transaction')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
          name       'TestSingleTransaction'
          firstlineno 206
          lnotab 0x0a02
       'TestSingleTransaction'
    names      ('shutil', 'tempfile', 'pydal', 'DAL', 'Field', 'pydal._compat', 'PY2', '_adapt', 'DEFAULT_URI', 'IS_GAE', 'IS_IMAP', 'IS_MSSQL', 'IS_ORACLE', 'IS_TERADATA', 'drop', '_compat', 'unittest', 'skipIf', 'TestCase', 'TestReferenceNOTNULL', 'TestReferenceUNIQUE', 'TestReferenceUNIQUENotNull', 'TestUnicode', 'TestParseDateTime', 'TestChainedJoinUNIQUE', 'TestNullAdapter', 'skip', 'TestSingleTransaction')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/base.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/base.py'
    name       '<module>'
    firstlineno 1
    lnotab
       0x00ff02030801080210010c0224010c032001200124ff0eff0e02021420
       012001200124ff0eff0eff0e03021e20012001200124ff0eff0eff0e0302
       1b2001260124ff0eff0e02020d26252001200124ff0eff0e02022b260b1e
       0124ff0e01
```

### Comparing `pydal-20240428.2/tests/__pycache__/caching.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/caching.cpython-311.pyc`

 * *Files 2% similar despite different names*

#### Python bytecode

```diff
@@ -59,25 +59,25 @@
                 70 IMPORT_NAME             11 (_helpers)
                 72 IMPORT_FROM             12 (DALtest)
                 74 STORE_NAME              12 (DALtest)
                 76 POP_TOP
    
     11          78 PUSH_NULL
                 80 LOAD_BUILD_CLASS
-                82 LOAD_CONST               7 (<code object SimpleCache, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 11>)
+                82 LOAD_CONST               7 (<code object SimpleCache, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 11>)
                 84 MAKE_FUNCTION            0
                 86 LOAD_CONST               8 ('SimpleCache')
                 88 LOAD_NAME               13 (object)
                 90 PRECALL                  3
                 94 CALL                     3
                104 STORE_NAME              14 (SimpleCache)
    
     41         106 PUSH_NULL
                108 LOAD_BUILD_CLASS
-               110 LOAD_CONST               9 (<code object PickleCache, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 41>)
+               110 LOAD_CONST               9 (<code object PickleCache, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 41>)
                112 MAKE_FUNCTION            0
                114 LOAD_CONST              10 ('PickleCache')
                116 LOAD_NAME               14 (SimpleCache)
                118 PRECALL                  3
                122 CALL                     3
                132 STORE_NAME              15 (PickleCache)
    
@@ -87,15 +87,15 @@
                148 LOAD_NAME                7 (IS_IMAP)
                150 LOAD_CONST              11 ('TODO: IMAP test')
                152 PRECALL                  2
                156 CALL                     2
    
     50         166 PUSH_NULL
                168 LOAD_BUILD_CLASS
-               170 LOAD_CONST              12 (<code object TestCache, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 49>)
+               170 LOAD_CONST              12 (<code object TestCache, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 49>)
                172 MAKE_FUNCTION            0
                174 LOAD_CONST              13 ('TestCache')
                176 LOAD_NAME               12 (DALtest)
                178 PRECALL                  3
                182 CALL                     3
    
     49         192 PRECALL                  0
@@ -125,28 +125,28 @@
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('SimpleCache')
                        8 STORE_NAME               2 (__qualname__)
          
           12          10 BUILD_MAP                0
                       12 STORE_NAME               3 (storage)
          
-          14          14 LOAD_CONST               1 (<code object clear, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 14>)
+          14          14 LOAD_CONST               1 (<code object clear, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 14>)
                       16 MAKE_FUNCTION            0
                       18 STORE_NAME               4 (clear)
          
-          17          20 LOAD_CONST               2 (<code object _encode, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 17>)
+          17          20 LOAD_CONST               2 (<code object _encode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 17>)
                       22 MAKE_FUNCTION            0
                       24 STORE_NAME               5 (_encode)
          
-          20          26 LOAD_CONST               3 (<code object _decode, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 20>)
+          20          26 LOAD_CONST               3 (<code object _decode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 20>)
                       28 MAKE_FUNCTION            0
                       30 STORE_NAME               6 (_decode)
          
           23          32 LOAD_CONST               7 ((300,))
-                      34 LOAD_CONST               5 (<code object __call__, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 23>)
+                      34 LOAD_CONST               5 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 23>)
                       36 MAKE_FUNCTION            1 (defaults)
                       38 STORE_NAME               7 (__call__)
                       40 LOAD_CONST               6 (None)
                       42 RETURN_VALUE
          consts
             'SimpleCache'
             code
@@ -169,15 +169,15 @@
                             54 RETURN_VALUE
                consts
                   None
                names      ('storage', 'clear')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       'clear'
                firstlineno 14
                lnotab 0x0201
             code
                argcount  : 2
                nlocals   : 2
                stacksize : 1
@@ -189,15 +189,15 @@
                              4 RETURN_VALUE
                consts
                   None
                names      ()
                varnames   ('self', 'value')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       '_encode'
                firstlineno 17
                lnotab 0x0201
             code
                argcount  : 2
                nlocals   : 2
                stacksize : 1
@@ -209,15 +209,15 @@
                              4 RETURN_VALUE
                consts
                   None
                names      ()
                varnames   ('self', 'value')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       '_decode'
                firstlineno 20
                lnotab 0x0201
             300
             code
                argcount  : 4
                nlocals   : 8
@@ -317,25 +317,25 @@
                   None
                   0
                   1
                names      ('time', 'storage', 'get', '_decode', '_encode')
                varnames   ('self', 'key', 'f', 'time_expire', 'dt', 'now', 'item', 'value')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       '__call__'
                firstlineno 23
                lnotab 0x020104012602360108011002040104012601360214013e01
             None
             (300,)
          names      ('__name__', '__module__', '__qualname__', 'storage', 'clear', '_encode', '_decode', '__call__')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
          name       'SimpleCache'
          firstlineno 11
          lnotab 0x0a010402060306030603
       'SimpleCache'
       code
          argcount  : 0
          nlocals   : 0
@@ -344,19 +344,19 @@
          code 0x970065005a0164005a02640184005a03640284005a0464035300
           41           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('PickleCache')
                        8 STORE_NAME               2 (__qualname__)
          
-          42          10 LOAD_CONST               1 (<code object _encode, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 42>)
+          42          10 LOAD_CONST               1 (<code object _encode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 42>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (_encode)
          
-          45          16 LOAD_CONST               2 (<code object _decode, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 45>)
+          45          16 LOAD_CONST               2 (<code object _decode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 45>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (_decode)
                       22 LOAD_CONST               3 (None)
                       24 RETURN_VALUE
          consts
             'PickleCache'
             code
@@ -380,15 +380,15 @@
                             62 RETURN_VALUE
                consts
                   None
                names      ('pickle', 'dumps', 'HIGHEST_PROTOCOL')
                varnames   ('self', 'value')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       '_encode'
                firstlineno 42
                lnotab 0x0201
             code
                argcount  : 2
                nlocals   : 2
                stacksize : 3
@@ -406,24 +406,24 @@
                             40 RETURN_VALUE
                consts
                   None
                names      ('pickle', 'loads')
                varnames   ('self', 'value')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       '_decode'
                firstlineno 45
                lnotab 0x0201
             None
          names      ('__name__', '__module__', '__qualname__', '_encode', '_decode')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
          name       'PickleCache'
          firstlineno 41
          lnotab 0x0a010603
       'PickleCache'
       'TODO: IMAP test'
       code
          argcount  : 0
@@ -436,27 +436,27 @@
             000000000000005a0764045300
           49           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestCache')
                        8 STORE_NAME               2 (__qualname__)
          
-          51          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 51>)
+          51          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 51>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
          
           66          16 PUSH_NULL
                       18 LOAD_NAME                4 (unittest)
                       20 LOAD_ATTR                5 (skipIf)
                       30 LOAD_NAME                6 (IS_MSSQL)
                       32 LOAD_CONST               2 ('Class nesting in ODBC driver breaks pickle')
                       34 PRECALL                  2
                       38 CALL                     2
          
-          67          48 LOAD_CONST               3 (<code object testPickling, file "/home/mdipierro/Dropbox/packages/pydal/tests/caching.py", line 66>)
+          67          48 LOAD_CONST               3 (<code object testPickling, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py", line 66>)
                       50 MAKE_FUNCTION            0
          
           66          52 PRECALL                  0
                       56 CALL                     0
          
           67          66 STORE_NAME               7 (testPickling)
                       68 LOAD_CONST               4 (None)
@@ -681,15 +681,15 @@
                   ('cache',)
                   True
                   ('cache', 'cacheable')
                names      ('SimpleCache', 'connect', 'define_table', 'Field', 'tt', 'insert', 'select', 'ALL', 'assertEqual', 'len')
                varnames   ('self', 'cache', 'db', 'r0', 'r1', 'r2', 'r3', 'r4')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       'testRun'
                firstlineno 51
                lnotab 0x02011c012801460136014e015601600156016001580160015801
             'Class nesting in ODBC driver breaks pickle'
             code
                argcount  : 1
                nlocals   : 9
@@ -934,31 +934,31 @@
                   ('cache',)
                   True
                   ('cache', 'cacheable')
                names      ('connect', 'PickleCache', 'define_table', 'Field', 'tt', 'insert', 'select', 'ALL', 'str', 'assertEqual')
                varnames   ('self', 'db', 'cache', 'r0', 'csv0', 'r1', 'r2', 'r3', 'r4')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
                name       'testPickling'
                firstlineno 66
                lnotab
                   0x020228012001180102011c01200120fc10063a015a011e015e0146015e
                   014601600146016001
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun', 'unittest', 'skipIf', 'IS_MSSQL', 'testPickling')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
          name       'TestCache'
          firstlineno 49
          lnotab 0x0a02060f200104ff0e01
       'TestCache'
    names      ('pickle', 'time', 'pydal', 'DAL', 'Field', '_adapt', 'DEFAULT_URI', 'IS_IMAP', 'IS_MSSQL', '_compat', 'unittest', '_helpers', 'DALtest', 'object', 'SimpleCache', 'PickleCache', 'skipIf', 'TestCache')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/caching.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/caching.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff020108010802100214010c010c031c1e1c0820011aff0e01
```

### Comparing `pydal-20240428.2/tests/__pycache__/contribs.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/contribs.cpython-311.pyc`

 * *Files 0% similar despite different names*

#### Python bytecode

```diff
@@ -63,21 +63,21 @@
     16          82 LOAD_CONST               4 (1)
                 84 LOAD_CONST               6 (('unittest',))
                 86 IMPORT_NAME             14 (_compat)
                 88 IMPORT_FROM             15 (unittest)
                 90 STORE_NAME              15 (unittest)
                 92 POP_TOP
    
-    19          94 LOAD_CONST               7 (<code object tearDownModule, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 19>)
+    19          94 LOAD_CONST               7 (<code object tearDownModule, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 19>)
                 96 MAKE_FUNCTION            0
                 98 STORE_NAME              16 (tearDownModule)
    
     24         100 PUSH_NULL
                102 LOAD_BUILD_CLASS
-               104 LOAD_CONST               8 (<code object testPortalocker, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 24>)
+               104 LOAD_CONST               8 (<code object testPortalocker, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 24>)
                106 MAKE_FUNCTION            0
                108 LOAD_CONST               9 ('testPortalocker')
                110 LOAD_NAME               15 (unittest)
                112 LOAD_ATTR               17 (TestCase)
                122 PRECALL                  3
                126 CALL                     3
                136 STORE_NAME              18 (testPortalocker)
@@ -125,15 +125,15 @@
          consts
             None
             'test.txt'
          names      ('os', 'path', 'isfile', 'unlink')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
          name       'tearDownModule'
          firstlineno 19
          lnotab 0x02013e012cff
       code
          argcount  : 0
          nlocals   : 0
          stacksize : 4
@@ -150,27 +150,27 @@
             00
           24           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('testPortalocker')
                        8 STORE_NAME               2 (__qualname__)
          
-          25          10 LOAD_CONST               1 (<code object test_LockedFile, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 25>)
+          25          10 LOAD_CONST               1 (<code object test_LockedFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 25>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (test_LockedFile)
          
           33          16 PUSH_NULL
                       18 LOAD_NAME                4 (unittest)
                       20 LOAD_ATTR                5 (skipIf)
                       30 LOAD_NAME                6 (IS_GAE)
                       32 LOAD_CONST               2 ('GAE has no locks')
                       34 PRECALL                  2
                       38 CALL                     2
          
-          34          48 LOAD_CONST               3 (<code object test_openmultiple, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 33>)
+          34          48 LOAD_CONST               3 (<code object test_openmultiple, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 33>)
                       50 MAKE_FUNCTION            0
          
           33          52 PRECALL                  0
                       56 CALL                     0
          
           34          66 STORE_NAME               7 (test_openmultiple)
          
@@ -178,15 +178,15 @@
                       70 LOAD_NAME                4 (unittest)
                       72 LOAD_ATTR                5 (skipIf)
                       82 LOAD_NAME                6 (IS_GAE)
                       84 LOAD_CONST               2 ('GAE has no locks')
                       86 PRECALL                  2
                       90 CALL                     2
          
-          69         100 LOAD_CONST               4 (<code object test_lock_unlock, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 68>)
+          69         100 LOAD_CONST               4 (<code object test_lock_unlock, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 68>)
                      102 MAKE_FUNCTION            0
          
           68         104 PRECALL                  0
                      108 CALL                     0
          
           69         118 STORE_NAME               8 (test_lock_unlock)
          
@@ -194,15 +194,15 @@
                      122 LOAD_NAME                4 (unittest)
                      124 LOAD_ATTR                5 (skipIf)
                      134 LOAD_NAME                6 (IS_GAE)
                      136 LOAD_CONST               2 ('GAE has no locks')
                      138 PRECALL                  2
                      142 CALL                     2
          
-         109         152 LOAD_CONST               5 (<code object test_read_locked, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 108>)
+         109         152 LOAD_CONST               5 (<code object test_read_locked, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 108>)
                      154 MAKE_FUNCTION            0
          
          108         156 PRECALL                  0
                      160 CALL                     0
          
          109         170 STORE_NAME               9 (test_read_locked)
          
@@ -210,27 +210,27 @@
                      174 LOAD_NAME                4 (unittest)
                      176 LOAD_ATTR                5 (skipIf)
                      186 LOAD_NAME                6 (IS_GAE)
                      188 LOAD_CONST               2 ('GAE has no locks')
                      190 PRECALL                  2
                      194 CALL                     2
          
-         127         204 LOAD_CONST               6 (<code object test_write_locked, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 126>)
+         127         204 LOAD_CONST               6 (<code object test_write_locked, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 126>)
                      206 MAKE_FUNCTION            0
          
          126         208 PRECALL                  0
                      212 CALL                     0
          
          127         222 STORE_NAME              10 (test_write_locked)
          
-         146         224 LOAD_CONST               7 (<code object test_exception, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 146>)
+         146         224 LOAD_CONST               7 (<code object test_exception, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 146>)
                      226 MAKE_FUNCTION            0
                      228 STORE_NAME              11 (test_exception)
          
-         149         230 LOAD_CONST               8 (<code object test_readline, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 149>)
+         149         230 LOAD_CONST               8 (<code object test_readline, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 149>)
                      232 MAKE_FUNCTION            0
                      234 STORE_NAME              12 (test_readline)
                      236 LOAD_CONST               9 (None)
                      238 RETURN_VALUE
          consts
             'testPortalocker'
             code
@@ -312,15 +312,15 @@
                   ('mode',)
                   'test ok'
                   'rb'
                names      ('LockedFile', 'write', 'to_bytes', 'close', 'assertEqual', 'read')
                varnames   ('self', 'f')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_LockedFile'
                firstlineno 25
                lnotab 0x020122014401280122016a01
             'GAE has no locks'
             code
                argcount  : 1
                nlocals   : 13
@@ -366,15 +366,15 @@
                
                 35           4 LOAD_GLOBAL              1 (NULL + time)
                             16 LOAD_ATTR                0 (time)
                             26 PRECALL                  0
                             30 CALL                     0
                             40 STORE_DEREF             13 (t0)
                
-                37          42 LOAD_CONST               1 (<code object worker1, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 37>)
+                37          42 LOAD_CONST               1 (<code object worker1, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 37>)
                             44 MAKE_FUNCTION            0
                             46 STORE_FAST               1 (worker1)
                
                 44          48 LOAD_GLOBAL              3 (NULL + LockedFile)
                             60 LOAD_CONST               2 ('test.txt')
                             62 LOAD_CONST               3 ('wb')
                             64 KW_NAMES                 4
@@ -471,37 +471,37 @@
                            510 POP_EXCEPT
                            512 RERAISE                  1
                        >>  514 POP_TOP
                            516 POP_EXCEPT
                            518 POP_TOP
                            520 POP_TOP
                
-                57     >>  522 LOAD_CONST               8 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 57>)
+                57     >>  522 LOAD_CONST               8 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 57>)
                            524 MAKE_FUNCTION            0
                            526 LOAD_FAST                8 (content)
                            528 LOAD_METHOD             13 (split)
                            550 LOAD_CONST               9 ('\n')
                            552 PRECALL                  1
                            556 CALL                     1
                            566 GET_ITER
                            568 PRECALL                  0
                            572 CALL                     0
                            582 STORE_FAST               9 (results)
                
                 59         584 LOAD_CLOSURE            13 (t0)
                            586 BUILD_TUPLE              1
-                           588 LOAD_CONST              10 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 59>)
+                           588 LOAD_CONST              10 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 59>)
                            590 MAKE_FUNCTION            8 (closure)
                            592 LOAD_FAST                9 (results)
                            594 GET_ITER
                            596 PRECALL                  0
                            600 CALL                     0
                            610 STORE_FAST              10 (starts)
                
-                60         612 LOAD_CONST              11 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 60>)
+                60         612 LOAD_CONST              11 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 60>)
                            614 MAKE_FUNCTION            0
                            616 LOAD_FAST                9 (results)
                            618 GET_ITER
                            620 PRECALL                  0
                            624 CALL                     0
                            634 STORE_FAST              11 (ends)
                
@@ -641,15 +641,15 @@
                         2
                         '\t'
                         '\n'
                      names      ('time', 'LockedFile', 'sleep', 'write', 'to_bytes', 'close')
                      varnames   ('start', 'f1')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       'worker1'
                      firstlineno 37
                      lnotab 0x02012601220128017201
                   'test.txt'
                   'wb'
                   ('mode',)
                   ''
@@ -685,15 +685,15 @@
                              >>   94 RETURN_VALUE
                      consts
                         '\t'
                      names      ('strip', 'split')
                      varnames   ('.0', 'line')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       '<listcomp>'
                      firstlineno 57
                      lnotab 0x
                   '\n'
                   code
                      argcount  : 1
                      nlocals   : 2
@@ -728,15 +728,15 @@
                      consts
                         0
                         1
                      names      ('float',)
                      varnames   ('.0', 'line')
                      freevars   ('t0',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       '<listcomp>'
                      firstlineno 59
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 2
                      stacksize : 4
@@ -757,26 +757,26 @@
                              >>   28 RETURN_VALUE
                      consts
                         1
                      names      ()
                      varnames   ('.0', 'line')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       '<listcomp>'
                      firstlineno 60
                      lnotab 0x
                   1
                   0
                   2
                names      ('time', 'LockedFile', 'write', 'to_bytes', 'close', 'range', 'threading', 'Thread', 'append', 'start', 'join', 'open', 'read', 'split', 'assertEqual', 'sum', 'len', 'assertTrue', 'float')
                varnames   ('self', 'worker1', 'f', 'th', 'x', 't1', 't', 'g', 'content', 'results', 'starts', 'ends', 'line')
                freevars   ()
                cellvars   ('t0',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_openmultiple'
                firstlineno 33
                lnotab
                   0x040226020607220144012801040122012a012a012a0108012a01200128
                   ff2e033e021c011801600208018602
             code
                argcount  : 1
@@ -823,19 +823,19 @@
                   000000ab00000000000000000001007c00a00d0000000000000000000000
                   0000000000000000007c077c057a0a000064086b0500000000a6010000ab
                   01000000000000000001007c00a00e000000000000000000000000000000
                   00000000007c067409000000000000000000006406a6010000ab01000000
                   0000000000a6020000ab020000000000000000010064005300
                 68           0 RESUME                   0
                
-                70           2 LOAD_CONST               1 (<code object worker1, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 70>)
+                70           2 LOAD_CONST               1 (<code object worker1, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 70>)
                              4 MAKE_FUNCTION            0
                              6 STORE_FAST               1 (worker1)
                
-                74           8 LOAD_CONST               2 (<code object worker2, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 74>)
+                74           8 LOAD_CONST               2 (<code object worker2, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 74>)
                             10 MAKE_FUNCTION            0
                             12 STORE_FAST               2 (worker2)
                
                 78          14 LOAD_GLOBAL              1 (NULL + open)
                             26 LOAD_CONST               3 ('test.txt')
                             28 LOAD_CONST               4 ('wb')
                             30 KW_NAMES                 5
@@ -1068,15 +1068,15 @@
                      consts
                         None
                         2
                      names      ('time', 'sleep', 'unlock')
                      varnames   ('fh',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       'worker1'
                      firstlineno 70
                      lnotab 0x02012801
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 3
@@ -1104,30 +1104,30 @@
                      consts
                         None
                         2
                      names      ('time', 'sleep', 'close')
                      varnames   ('fh',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       'worker2'
                      firstlineno 74
                      lnotab 0x02012801
                   'test.txt'
                   'wb'
                   ('mode',)
                   'test ok'
                   ('target', 'args')
                   2
                   ''
                names      ('open', 'lock', 'LOCK_EX', 'write', 'to_bytes', 'threading', 'Thread', 'start', 'int', 'time', 'read_locked', 'join', 'close', 'assertTrue', 'assertEqual', 'LockedFile')
                varnames   ('self', 'worker1', 'worker2', 'f', 't1', 'start', 'content', 'end')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_lock_unlock'
                firstlineno 68
                lnotab
                   0x02020604060422012a0144012e01280140011e01400128012803380146
                   011e014602220144012e01280140011e01400128033801
             code
                argcount  : 1
@@ -1151,15 +1151,15 @@
                   00000001007c00a00a00000000000000000000000000000000000000007c
                   067c047a0a000064076b0500000000a6010000ab01000000000000000001
                   007c00a00b00000000000000000000000000000000000000007c05740500
                   0000000000000000006405a6010000ab010000000000000000a6020000ab
                   020000000000000000010064005300
                108           0 RESUME                   0
                
-               110           2 LOAD_CONST               1 (<code object worker, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 110>)
+               110           2 LOAD_CONST               1 (<code object worker, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 110>)
                              4 MAKE_FUNCTION            0
                              6 STORE_FAST               1 (worker)
                
                114           8 LOAD_GLOBAL              1 (NULL + LockedFile)
                             20 LOAD_CONST               2 ('test.txt')
                             22 LOAD_CONST               3 ('wb')
                             24 KW_NAMES                 4
@@ -1276,29 +1276,29 @@
                      consts
                         None
                         2
                      names      ('time', 'sleep', 'close')
                      varnames   ('fh',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       'worker'
                      firstlineno 110
                      lnotab 0x02012801
                   'test.txt'
                   'wb'
                   ('mode',)
                   'test ok'
                   ('target', 'args')
                   2
                names      ('LockedFile', 'write', 'to_bytes', 'threading', 'Thread', 'start', 'int', 'time', 'read_locked', 'join', 'assertTrue', 'assertEqual')
                varnames   ('self', 'worker', 'f', 't1', 'start', 'content', 'end')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_read_locked'
                firstlineno 108
                lnotab 0x02020604220144012e01280140011e01400128023801
             code
                argcount  : 1
                nlocals   : 8
                stacksize : 6
@@ -1323,15 +1323,15 @@
                   02000000000000000001006e0b2300310073047702780359007701010059
                   00010001007c00a00c00000000000000000000000000000000000000007c
                   057c047a0a000064076b0500000000a6010000ab01000000000000000001
                   007c00a00d00000000000000000000000000000000000000007c076406a6
                   020000ab020000000000000000010064005300
                126           0 RESUME                   0
                
-               128           2 LOAD_CONST               1 (<code object worker, file "/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py", line 128>)
+               128           2 LOAD_CONST               1 (<code object worker, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py", line 128>)
                              4 MAKE_FUNCTION            0
                              6 STORE_FAST               1 (worker)
                
                132           8 LOAD_GLOBAL              1 (NULL + open)
                             20 LOAD_CONST               2 ('test.txt')
                             22 LOAD_CONST               3 ('wb')
                             24 KW_NAMES                 4
@@ -1482,29 +1482,29 @@
                      consts
                         None
                         2
                      names      ('time', 'sleep', 'close')
                      varnames   ('fh',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                      name       'worker'
                      firstlineno 128
                      lnotab 0x02012801
                   'test.txt'
                   'wb'
                   ('mode',)
                   ('target', 'args')
                   'test ok'
                   2
                names      ('open', 'lock', 'LOCK_EX', 'threading', 'Thread', 'start', 'int', 'time', 'write_locked', 'to_bytes', 'join', 'read', 'assertTrue', 'assertEqual')
                varnames   ('self', 'worker', 'f', 't1', 'start', 'end', 'g', 'content')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_write_locked'
                firstlineno 126
                lnotab 0x0202060422012a012e01280140013a0140012801200128ff2e033801
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 5
@@ -1534,15 +1534,15 @@
                   None
                   'test.txt'
                   'x'
                names      ('assertRaises', 'RuntimeError', 'LockedFile')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_exception'
                firstlineno 146
                lnotab 0x0201
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 5
@@ -1697,31 +1697,31 @@
                   'abc'
                   '123'
                   2
                names      ('LockedFile', 'write', 'to_bytes', 'close', 'readline', 'assertTrue', 'readlines', 'assertEqual', 'len')
                varnames   ('self', 'f', 'rl', 'rls')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
                name       'test_readline'
                firstlineno 149
                lnotab 0x02012001440144012801200128014801280148012801200128012801
             None
          names      ('__name__', '__module__', '__qualname__', 'test_LockedFile', 'unittest', 'skipIf', 'IS_GAE', 'test_openmultiple', 'test_lock_unlock', 'test_read_locked', 'test_write_locked', 'test_exception', 'test_readline')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
          name       'testPortalocker'
          firstlineno 24
          lnotab
             0x0a010608200104ff0e010222200104ff0e010227200104ff0e01021120
             0104ff0e0102130603
       'testPortalocker'
    names      ('os', 'threading', 'time', 'pydal._compat', 'to_bytes', 'pydal.contrib.portalocker', 'LOCK_EX', 'LockedFile', 'lock', 'read_locked', 'unlock', 'write_locked', '_adapt', 'IS_GAE', '_compat', 'unittest', 'tearDownModule', 'TestCase', 'testPortalocker')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/contribs.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/contribs.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff02010801080108020c0120090c010c030605
```

### Comparing `pydal-20240428.2/tests/__pycache__/indexes.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/indexes.cpython-311.pyc`

 * *Files 2% similar despite different names*

#### Python bytecode

```diff
@@ -43,15 +43,15 @@
                 42 IMPORT_NAME              7 (_compat)
                 44 IMPORT_FROM              8 (unittest)
                 46 STORE_NAME               8 (unittest)
                 48 POP_TOP
    
      7          50 PUSH_NULL
                 52 LOAD_BUILD_CLASS
-                54 LOAD_CONST               5 (<code object TestIndexesBasic, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 7>)
+                54 LOAD_CONST               5 (<code object TestIndexesBasic, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 7>)
                 56 MAKE_FUNCTION            0
                 58 LOAD_CONST               6 ('TestIndexesBasic')
                 60 LOAD_NAME                8 (unittest)
                 62 LOAD_ATTR                9 (TestCase)
                 72 PRECALL                  3
                 76 CALL                     3
                 86 STORE_NAME              10 (TestIndexesBasic)
@@ -62,15 +62,15 @@
                102 LOAD_NAME                5 (IS_POSTGRESQL)
                104 LOAD_CONST               7 ('Expressions in indexes are not supported')
                106 PRECALL                  2
                110 CALL                     2
    
     22         120 PUSH_NULL
                122 LOAD_BUILD_CLASS
-               124 LOAD_CONST               8 (<code object TestIndexesExpressions, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 21>)
+               124 LOAD_CONST               8 (<code object TestIndexesExpressions, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 21>)
                126 MAKE_FUNCTION            0
                128 LOAD_CONST               9 ('TestIndexesExpressions')
                130 LOAD_NAME                8 (unittest)
                132 LOAD_ATTR                9 (TestCase)
                142 PRECALL                  3
                146 CALL                     3
    
@@ -85,15 +85,15 @@
                186 LOAD_NAME                5 (IS_POSTGRESQL)
                188 LOAD_CONST              10 ('Partial indexes are not supported')
                190 PRECALL                  2
                194 CALL                     2
    
     46         204 PUSH_NULL
                206 LOAD_BUILD_CLASS
-               208 LOAD_CONST              11 (<code object TestIndexesWhere, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 45>)
+               208 LOAD_CONST              11 (<code object TestIndexesWhere, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 45>)
                210 MAKE_FUNCTION            0
                212 LOAD_CONST              12 ('TestIndexesWhere')
                214 LOAD_NAME                8 (unittest)
                216 LOAD_ATTR                9 (TestCase)
                226 PRECALL                  3
                230 CALL                     3
    
@@ -117,15 +117,15 @@
          code 0x970065005a0164005a02640184005a0364025300
            7           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestIndexesBasic')
                        8 STORE_NAME               2 (__qualname__)
          
-           8          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 8>)
+           8          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 8>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestIndexesBasic'
             code
@@ -268,24 +268,24 @@
                   'tt'
                   'aa'
                   'idx_aa'
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'tt', 'create_index', 'aa', 'assertTrue', 'drop_index', 'assertRaises', 'Exception', 'rollback', 'drop')
                varnames   ('self', 'db', 'rv')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
                name       'testRun'
                firstlineno 8
                lnotab 0x02012e0146014a012a0134012a01360134ff2e022801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
          name       'TestIndexesBasic'
          firstlineno 7
          lnotab 0x0a01
       'TestIndexesBasic'
       'Expressions in indexes are not supported'
       code
          argcount  : 0
@@ -295,15 +295,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           21           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestIndexesExpressions')
                        8 STORE_NAME               2 (__qualname__)
          
-          23          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 23>)
+          23          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 23>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestIndexesExpressions'
             code
@@ -543,26 +543,26 @@
                   ' ('
                   ','
                   ');'
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', '_adapter', 'dialect', 'create_index', 'tt', 'aa', 'bb', 'coalesce', 'index_expander', 'str', 'quote', 'sql_shortref', 'sqlsafe_name', 'assertEqual', 'assertTrue', 'drop_index', 'drop')
                varnames   ('self', 'db', 'sql', 'coalesce_sql', 'expected_sql', 'rv')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
                name       'testRun'
                firstlineno 23
                lnotab
                   0x0201300164012c0162ff1003340158ff300340011a01240106fc04062c
                   0186012a0134012a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
          name       'TestIndexesExpressions'
          firstlineno 21
          lnotab 0x0a02
       'TestIndexesExpressions'
       'Partial indexes are not supported'
       code
          argcount  : 0
@@ -572,15 +572,15 @@
          code 0x970065005a0164005a02640184005a0364025300
           45           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestIndexesWhere')
                        8 STORE_NAME               2 (__qualname__)
          
-          47          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py", line 47>)
+          47          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py", line 47>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestIndexesWhere'
             code
@@ -735,30 +735,30 @@
                   False
                   ('where',)
                   'CREATE INDEX "idx_aa_f" ON "tt" ("aa") WHERE ("tt"."bb" = \'F\');'
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', '_adapter', 'dialect', 'create_index', 'tt', 'aa', 'str', 'bb', 'assertEqual', 'assertTrue', 'drop_index', 'drop')
                varnames   ('self', 'db', 'sql', 'rv')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
                name       'testRun'
                firstlineno 47
                lnotab 0x0201300164012c015eff1203180104ff10036a012a0134012a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
          name       'TestIndexesWhere'
          firstlineno 45
          lnotab 0x0a02
       'TestIndexesWhere'
       None
    names      ('pydal', 'DAL', 'Field', '_adapt', 'DEFAULT_URI', 'IS_POSTGRESQL', 'drop', '_compat', 'unittest', 'TestCase', 'TestIndexesBasic', 'skipUnless', 'TestIndexesExpressions', 'TestIndexesWhere')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/indexes.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/indexes.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff0201100214010c03260e200124ff0e010217200124ff0e01
```

### Comparing `pydal-20240428.2/tests/__pycache__/is_url_validators.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/is_url_validators.cpython-311.pyc`

 * *Files 1% similar despite different names*

#### Python bytecode

```diff
@@ -36,59 +36,59 @@
                 30 STORE_NAME               5 (IS_URL)
                 32 IMPORT_FROM              6 (unicode_to_ascii_authority)
                 34 STORE_NAME               6 (unicode_to_ascii_authority)
                 36 POP_TOP
    
     17          38 PUSH_NULL
                 40 LOAD_BUILD_CLASS
-                42 LOAD_CONST               4 (<code object TestIsUrl, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 17>)
+                42 LOAD_CONST               4 (<code object TestIsUrl, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 17>)
                 44 MAKE_FUNCTION            0
                 46 LOAD_CONST               5 ('TestIsUrl')
                 48 LOAD_NAME                1 (unittest)
                 50 LOAD_ATTR                7 (TestCase)
                 60 PRECALL                  3
                 64 CALL                     3
                 74 STORE_NAME               8 (TestIsUrl)
    
    266          76 PUSH_NULL
                 78 LOAD_BUILD_CLASS
-                80 LOAD_CONST               6 (<code object TestIsGenericUrl, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 266>)
+                80 LOAD_CONST               6 (<code object TestIsGenericUrl, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 266>)
                 82 MAKE_FUNCTION            0
                 84 LOAD_CONST               7 ('TestIsGenericUrl')
                 86 LOAD_NAME                1 (unittest)
                 88 LOAD_ATTR                7 (TestCase)
                 98 PRECALL                  3
                102 CALL                     3
                112 STORE_NAME               9 (TestIsGenericUrl)
    
    384         114 PUSH_NULL
                116 LOAD_BUILD_CLASS
-               118 LOAD_CONST               8 (<code object TestIsHttpUrl, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 384>)
+               118 LOAD_CONST               8 (<code object TestIsHttpUrl, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 384>)
                120 MAKE_FUNCTION            0
                122 LOAD_CONST               9 ('TestIsHttpUrl')
                124 LOAD_NAME                1 (unittest)
                126 LOAD_ATTR                7 (TestCase)
                136 PRECALL                  3
                140 CALL                     3
                150 STORE_NAME              10 (TestIsHttpUrl)
    
    552         152 PUSH_NULL
                154 LOAD_BUILD_CLASS
-               156 LOAD_CONST              10 (<code object TestUnicode, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 552>)
+               156 LOAD_CONST              10 (<code object TestUnicode, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 552>)
                158 MAKE_FUNCTION            0
                160 LOAD_CONST              11 ('TestUnicode')
                162 LOAD_NAME                1 (unittest)
                164 LOAD_ATTR                7 (TestCase)
                174 PRECALL                  3
                178 CALL                     3
                188 STORE_NAME              11 (TestUnicode)
    
    717         190 PUSH_NULL
                192 LOAD_BUILD_CLASS
-               194 LOAD_CONST              12 (<code object TestSimple, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 717>)
+               194 LOAD_CONST              12 (<code object TestSimple, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 717>)
                196 MAKE_FUNCTION            0
                198 LOAD_CONST              13 ('TestSimple')
                200 LOAD_NAME                1 (unittest)
                202 LOAD_ATTR                7 (TestCase)
                212 PRECALL                  3
                216 CALL                     3
                226 STORE_NAME              12 (TestSimple)
@@ -109,23 +109,23 @@
             045300
           17           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestIsUrl')
                        8 STORE_NAME               2 (__qualname__)
          
-          18          10 LOAD_CONST               1 (<code object testModeHttp, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 18>)
+          18          10 LOAD_CONST               1 (<code object testModeHttp, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 18>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testModeHttp)
          
-          92          16 LOAD_CONST               2 (<code object testModeGeneric, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 92>)
+          92          16 LOAD_CONST               2 (<code object testModeGeneric, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 92>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (testModeGeneric)
          
-         139          22 LOAD_CONST               3 (<code object testExceptionalUse, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 139>)
+         139          22 LOAD_CONST               3 (<code object testExceptionalUse, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 139>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               5 (testExceptionalUse)
                       28 LOAD_CONST               4 (None)
                       30 RETURN_VALUE
          consts
             'TestIsUrl'
             code
@@ -724,15 +724,15 @@
                   ('google.ca:80', 'Enter a valid URL')
                   ('allowed_schemes', 'prepend_scheme')
                   ('http://google.ca', 'Enter a valid URL')
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'x')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testModeHttp'
                firstlineno 18
                lnotab
                   0x02031c013e013e013e013e013e013e0420013e013e013e013e0422013e
                   013e013e013e0420013e013e013e013e0426013e01180116ff10033e013e
                   013e0422013e01180116ff10033e013e013e042601180116ff10033e013e
                   013e013e052201
@@ -1109,15 +1109,15 @@
                   (None, 'ftp', 'ftps')
                   ('mode', 'allowed_schemes', 'prepend_scheme')
                   ('http://google.ca', 'Enter a valid URL')
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'x')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testModeGeneric'
                firstlineno 92
                lnotab
                   0x020320013e013e013e013e0526013e013e013e013e013e0422013e013e
                   013e013e013e040c010aff1203180116ff10033e013e013e013e052401
             code
                argcount  : 1
@@ -1829,30 +1829,30 @@
                   "prepend_scheme='blargg' is not in allowed_schemes=[None, 'http']"
                   'google.ca'
                   ('google.ca', 'Enter a valid URL')
                names      ('IS_URL', 'fail', 'Exception', 'str', 'startswith', 'assertEqual')
                varnames   ('self', 'x', 'e')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testExceptionalUse'
                firstlineno 139
                lnotab
                   0x02030201200116052efc120126015cfe08080201260116062efc120126
                   015cfe08090201200116092ef912021c0102ff08035cfb080c020124082e
                   f912021c0102ff08035cfb080b020126082ef912021c0102ff08035cfb08
                   0b020126082ef912021c0102ff08035cfb080c0201220116082efa120132
                   0102ff10035cfc080a02010c010aff120a2ef912021c0102ff08035cfb08
                   0d24013e052601
             None
          names      ('__name__', '__module__', '__qualname__', 'testModeHttp', 'testModeGeneric', 'testExceptionalUse')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
          name       'TestIsUrl'
          firstlineno 17
          lnotab 0x0a01064a062f
       'TestIsUrl'
       code
          argcount  : 0
          nlocals   : 0
@@ -1869,23 +1869,23 @@
          
          267          10 PUSH_NULL
                       12 LOAD_NAME                3 (IS_GENERIC_URL)
                       14 PRECALL                  0
                       18 CALL                     0
                       28 STORE_NAME               4 (x)
          
-         269          30 LOAD_CONST               1 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 269>)
+         269          30 LOAD_CONST               1 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 269>)
                       32 MAKE_FUNCTION            0
                       34 STORE_NAME               5 (testInvalidUrls)
          
-         321          36 LOAD_CONST               2 (<code object testValidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 321>)
+         321          36 LOAD_CONST               2 (<code object testValidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 321>)
                       38 MAKE_FUNCTION            0
                       40 STORE_NAME               6 (testValidUrls)
          
-         364          42 LOAD_CONST               3 (<code object testPrepending, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 364>)
+         364          42 LOAD_CONST               3 (<code object testPrepending, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 364>)
                       44 MAKE_FUNCTION            0
                       46 STORE_NAME               7 (testPrepending)
                       48 LOAD_CONST               4 (None)
                       50 RETURN_VALUE
          consts
             'TestIsGenericUrl'
             code
@@ -2009,15 +2009,15 @@
                   (None, '', 'http://www.no spaces allowed.com', 'http://www.benn.ca/no spaces allowed/', 'http://www.benn.ca/angle_<bracket/', 'http://www.benn.ca/angle_>bracket/', 'http://www.benn.ca/invalid%character', 'http://www.benn.ca/illegal%%20use', 'http://www.benn.ca/illegaluse%', 'http://www.benn.ca/illegaluse%0', 'http://www.benn.ca/illegaluse%x', 'http://www.benn.ca/ill%egaluse%x', 'http://www.benn.ca/double"quote/', 'http://www.curly{brace.com', 'http://www.benn.ca/curly}brace/', 'http://www.benn.ca/or|symbol/', 'http://www.benn.ca/back\\slash', 'http://www.benn.ca/the^carat', 'http://left[bracket.me', 'http://www.benn.ca/right]bracket', 'http://www.benn.ca/angle`quote', '-ttp://www.benn.ca', '+ttp://www.benn.ca', '.ttp://www.benn.ca', '9ttp://www.benn.ca', 'ht;tp://www.benn.ca', 'ht@tp://www.benn.ca', 'ht&tp://www.benn.ca', 'ht=tp://www.benn.ca', 'ht$tp://www.benn.ca', 'ht,tp://www.benn.ca', 'ht:tp://www.benn.ca', 'htp://invalid_scheme.com')
                   1
                   'Incorrectly accepted: '
                names      ('list', 'range', 'append', 'chr', 'x', 'str', 'len', 'fail')
                varnames   ('self', 'urlsToCheckA', 'i', 'urlsToCheckB', 'failures', 'url')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testInvalidUrls'
                firstlineno 269
                lnotab 0x0201040146035202082404020e0136014c0226012eff
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 7
@@ -2094,15 +2094,15 @@
                   1
                   'Incorrectly rejected: '
                   0
                names      ('x', 'append', 'str', 'len', 'fail')
                varnames   ('self', 'urlsToCheck', 'failures', 'url')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testValidUrls'
                firstlineno 321
                lnotab 0x020108210402080136014c0226012eff
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -2193,24 +2193,24 @@
                   'blargg'
                   ('allowed_schemes', 'prepend_scheme')
                   ('google.ca', 'Enter a valid URL')
                names      ('assertEqual', 'x', 'IS_GENERIC_URL')
                varnames   ('self', 'y')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testPrepending'
                firstlineno 364
                lnotab 0x02025203520352052601
             None
          names      ('__name__', '__module__', '__qualname__', 'IS_GENERIC_URL', 'x', 'testInvalidUrls', 'testValidUrls', 'testPrepending')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
          name       'TestIsGenericUrl'
          firstlineno 266
          lnotab 0x0a0114020634062b
       'TestIsGenericUrl'
       code
          argcount  : 0
          nlocals   : 0
@@ -2227,23 +2227,23 @@
          
          385          10 PUSH_NULL
                       12 LOAD_NAME                3 (IS_HTTP_URL)
                       14 PRECALL                  0
                       18 CALL                     0
                       28 STORE_NAME               4 (x)
          
-         387          30 LOAD_CONST               1 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 387>)
+         387          30 LOAD_CONST               1 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 387>)
                       32 MAKE_FUNCTION            0
                       34 STORE_NAME               5 (testInvalidUrls)
          
-         441          36 LOAD_CONST               2 (<code object testValidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 441>)
+         441          36 LOAD_CONST               2 (<code object testValidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 441>)
                       38 MAKE_FUNCTION            0
                       40 STORE_NAME               6 (testValidUrls)
          
-         514          42 LOAD_CONST               3 (<code object testPrepending, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 514>)
+         514          42 LOAD_CONST               3 (<code object testPrepending, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 514>)
                       44 MAKE_FUNCTION            0
                       46 STORE_NAME               7 (testPrepending)
                       48 LOAD_CONST               4 (None)
                       50 RETURN_VALUE
          consts
             'TestIsHttpUrl'
             code
@@ -2539,15 +2539,15 @@
                   1
                   'Incorrectly accepted: '
                   0
                names      ('chr', 'x', 'append', 'str', 'len', 'fail')
                varnames   ('self', 'urlsToCheck', 'failures', 'url')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testInvalidUrls'
                firstlineno 387
                lnotab
                   0x0201020102ff020202fe020328fd020402fc020502fb020602fa020702
                   f9020802f8020902f7020a02f6020b02f5020c02f4020d02f3020e02f202
                   0f02f1021002f0021102ef021202ee021302ed021402ec021502eb021602
                   ea021702e9021802e8021902e7021a02e6021b02e5021c02e4021d02e302
@@ -2631,15 +2631,15 @@
                   1
                   'Incorrectly rejected: '
                   0
                names      ('x', 'append', 'str', 'len', 'fail')
                varnames   ('self', 'urlsToCheck', 'failures', 'url')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testValidUrls'
                firstlineno 441
                lnotab 0x0201083f0402080136014c0226012eff
             code
                argcount  : 1
                nlocals   : 5
                stacksize : 7
@@ -2875,26 +2875,26 @@
                   ('google.ca', 'Enter a valid URL')
                   'google.ca:80'
                   ('google.ca:80', 'Enter a valid URL')
                names      ('assertEqual', 'x', 'IS_HTTP_URL', 'fail', 'Exception', 'str')
                varnames   ('self', 'y', 'z', 'e', 'a')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testPrepending'
                firstlineno 514
                lnotab
                   0x02025203520352022601180116ff10042001180116ff1004020120082e
                   f912021c0102ff08035cfb080b22013e01
             None
          names      ('__name__', '__module__', '__qualname__', 'IS_HTTP_URL', 'x', 'testInvalidUrls', 'testValidUrls', 'testPrepending')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
          name       'TestIsHttpUrl'
          firstlineno 384
          lnotab 0x0a01140206360649
       'TestIsHttpUrl'
       code
          argcount  : 0
          nlocals   : 0
@@ -2931,23 +2931,23 @@
                       60 LOAD_NAME                3 (IS_URL)
                       62 LOAD_CONST               3 (None)
                       64 KW_NAMES                 4
                       66 PRECALL                  1
                       70 CALL                     1
                       80 STORE_NAME               6 (z)
          
-         559          82 LOAD_CONST               5 (<code object testUnicodeToAsciiUrl, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 559>)
+         559          82 LOAD_CONST               5 (<code object testUnicodeToAsciiUrl, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 559>)
                       84 MAKE_FUNCTION            0
                       86 STORE_NAME               7 (testUnicodeToAsciiUrl)
          
-         569          88 LOAD_CONST               6 (<code object testValidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 569>)
+         569          88 LOAD_CONST               6 (<code object testValidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 569>)
                       90 MAKE_FUNCTION            0
                       92 STORE_NAME               8 (testValidUrls)
          
-         667          94 LOAD_CONST               7 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 667>)
+         667          94 LOAD_CONST               7 (<code object testInvalidUrls, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 667>)
                       96 MAKE_FUNCTION            0
                       98 STORE_NAME               9 (testInvalidUrls)
                      100 LOAD_CONST               3 (None)
                      102 RETURN_VALUE
          consts
             'TestUnicode'
             'https'
@@ -3013,15 +3013,15 @@
                   'www.xn--alliancefranaise-npb.nu'
                   'www.benn.ca'
                   ''
                names      ('assertEqual', 'unicode_to_ascii_authority', 'assertRaises', 'UnicodeError')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testUnicodeToAsciiUrl'
                firstlineno 559
                lnotab 0x020118011c0102fe1004460118011aff
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 5
@@ -3493,15 +3493,15 @@
                   ('https://xn--fiq13b.com', None)
                   'google.ca'
                   ('google.ca', None)
                names      ('assertEqual', 'x', 'y', 'z')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testValidUrls'
                firstlineno 569
                lnotab
                   0x02011801280102fe10041801280102fe10041801280102fe1004180128
                   0102fe10041801280102fe10041801280102fe10041801180102ff0e0302
                   fc10091801180102ff0e0302fc10091801280102fe100718012aff100318
                   01280102fe10041801280102fe10041801280102fe10041801280102fe10
@@ -3748,26 +3748,26 @@
                   ('invalid.domain..com', 'Enter a valid URL')
                   'invalid..blargg'
                   ('invalid..blargg', 'Enter a valid URL')
                names      ('assertEqual', 'x', 'y', 'z')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'testInvalidUrls'
                firstlineno 667
                lnotab
                   0x020152011801280102fe100418012aff100318012aff10035201180128
                   0102fe10051801280102fe10041801280102fe10041801280102fe100518
                   01280102fe10061801280102fe10041801280102fe
          names      ('__name__', '__module__', '__qualname__', 'IS_URL', 'x', 'y', 'z', 'testUnicodeToAsciiUrl', 'testValidUrls', 'testInvalidUrls')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
          name       'TestUnicode'
          firstlineno 552
          lnotab 0x0a0114011c021803060a0662
       'TestUnicode'
       code
          argcount  : 0
          nlocals   : 0
@@ -3776,15 +3776,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          717           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestSimple')
                        8 STORE_NAME               2 (__qualname__)
          
-         718          10 LOAD_CONST               1 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py", line 718>)
+         718          10 LOAD_CONST               1 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py", line 718>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (test_IS_URL)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestSimple'
             code
@@ -4042,32 +4042,32 @@
                   ('domain.ninja', 'Enter a valid URL')
                   ('mode', 'allowed_tlds')
                   ('domain.ninja', None)
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
                name       'test_IS_URL'
                firstlineno 718
                lnotab
                   0x02012e012c0132012c01240102ff10032c0132012c010e010aff100202
                   fe10032c010e010201060102fd100402fc10052c022e012c0236012c0238
                   01
             None
          names      ('__name__', '__module__', '__qualname__', 'test_IS_URL')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
          name       'TestSimple'
          firstlineno 717
          lnotab 0x0a01
       'TestSimple'
    names      ('__doc__', 'unittest', 'pydal.validators', 'IS_GENERIC_URL', 'IS_HTTP_URL', 'IS_URL', 'unicode_to_ascii_authority', 'TestCase', 'TestIsUrl', 'TestIsGenericUrl', 'TestIsHttpUrl', 'TestUnicode', 'TestSimple')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/is_url_validators.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/is_url_validators.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff0203040408021808267f007a2676267f0029267f0026
```

### Comparing `pydal-20240428.2/tests/__pycache__/restapi.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/restapi.cpython-311.pyc`

 * *Files 1% similar despite different names*

#### Python bytecode

```diff
@@ -45,15 +45,15 @@
                 54 IMPORT_NAME              9 (pydal.validators)
                 56 IMPORT_FROM             10 (IS_NOT_IN_DB)
                 58 STORE_NAME              10 (IS_NOT_IN_DB)
                 60 POP_TOP
    
      8          62 PUSH_NULL
                 64 LOAD_BUILD_CLASS
-                66 LOAD_CONST               5 (<code object TestRestAPI, file "/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py", line 8>)
+                66 LOAD_CONST               5 (<code object TestRestAPI, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py", line 8>)
                 68 MAKE_FUNCTION            0
                 70 LOAD_CONST               6 ('TestRestAPI')
                 72 LOAD_NAME                0 (unittest)
                 74 LOAD_ATTR               11 (TestCase)
                 84 PRECALL                  3
                 88 CALL                     3
                 98 STORE_NAME              12 (TestRestAPI)
@@ -75,27 +75,27 @@
             0484005a0664055300
            8           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestRestAPI')
                        8 STORE_NAME               2 (__qualname__)
          
-           9          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py", line 9>)
+           9          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py", line 9>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (setUp)
          
-          41          16 LOAD_CONST               2 (<code object test_search, file "/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py", line 41>)
+          41          16 LOAD_CONST               2 (<code object test_search, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py", line 41>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (test_search)
          
-         328          22 LOAD_CONST               3 (<code object test_REST, file "/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py", line 328>)
+         328          22 LOAD_CONST               3 (<code object test_REST, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py", line 328>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               5 (test_REST)
          
-         389          28 LOAD_CONST               4 (<code object test_policies, file "/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py", line 389>)
+         389          28 LOAD_CONST               4 (<code object test_policies, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py", line 389>)
                       30 MAKE_FUNCTION            0
                       32 STORE_NAME               6 (test_policies)
                       34 LOAD_CONST               5 (None)
                       36 RETURN_VALUE
          consts
             'TestRestAPI'
             code
@@ -390,15 +390,15 @@
                   'is under'
                   5
                   'is above'
                names      ('DAL', 'define_table', 'Field', 'IS_NOT_IN_DB', 'color', 'insert', 'thing', 'rel', 'RestAPI', 'ALLOW_ALL_POLICY', 'db', 'api')
                varnames   ('self', 'db', 'api')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
                name       'setUp'
                firstlineno 9
                lnotab
                   0x02011e026601360136013602640138013801380138013802180102011e
                   011c011efc10063a013a013a013a013a022a020e01
             code
                argcount  : 1
@@ -1501,15 +1501,15 @@
                   'ee'
                   'name.in'
                   'blue,green'
                names      ('api', 'ALLOW_ALL_POLICY', 'policy', 'assertEqual', 'search')
                varnames   ('self', 'api')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
                name       'test_search'
                firstlineno 41
                lnotab
                   0x02010e0118021801300202010203020102010201020102010201020102
                   010201020102f5040e020102010201020102010201020102010201020102
                   f5040e02010201020102010201020102010201020102f6040d0201020102
                   01020102010201020102010201020102f504d902fd04fe103c18012e0110
@@ -1783,15 +1783,15 @@
                   ('status', 'updated', 'errors', 'code', 'api_version', 'id')
                   'DELETE'
                   ('deleted', 'status', 'code', 'api_version')
                names      ('api', 'ALLOW_ALL_POLICY', 'policy', 'assertEqual', '__version__')
                varnames   ('self', 'api', 'response')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
                name       'test_REST'
                firstlineno 328
                lnotab
                   0x02010e01180220010601180102020201020102010a010cfb04fe100a20
                   0106011801020202010201020102010cfb04fe100a200106011801020202
                   0106010201020102010cfa04fe100b220106011801020202010201020102
                   01020102fa04fe100b1a010601180102010cfe
@@ -1864,29 +1864,29 @@
                   'No policy for this object'
                   401
                   ('status', 'message', 'code', 'api_version')
                names      ('api', 'DENY_ALL_POLICY', 'policy', 'assertEqual', '__version__')
                varnames   ('self', 'api', 'response')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
                name       'test_policies'
                firstlineno 389
                lnotab 0x02010e01180220010601180102020201020102010cfc04fe
             None
          names      ('__name__', '__module__', '__qualname__', 'setUp', 'test_search', 'test_REST', 'test_policies')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
          name       'TestRestAPI'
          firstlineno 8
          lnotab 0x0a010620067f007f0021063d
       'TestRestAPI'
    names      ('unittest', 'pydal', 'DAL', 'Field', 'pydal.restapi', 'ALLOW_ALL_POLICY', 'DENY_ALL_POLICY', 'RestAPI', '__version__', 'pydal.validators', 'IS_NOT_IN_DB', 'TestCase', 'TestRestAPI')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/restapi.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/restapi.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff02010802100118010c03
```

### Comparing `pydal-20240428.2/tests/__pycache__/smart_query.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/smart_query.cpython-311.pyc`

 * *Files 1% similar despite different names*

#### Python bytecode

```diff
@@ -66,15 +66,15 @@
                 92 LOAD_NAME               10 (IS_IMAP)
                 94 LOAD_CONST               7 ('Skip nosql')
                 96 PRECALL                  2
                100 CALL                     2
    
     10         110 PUSH_NULL
                112 LOAD_BUILD_CLASS
-               114 LOAD_CONST               8 (<code object TestSmartQuery, file "/home/mdipierro/Dropbox/packages/pydal/tests/smart_query.py", line 9>)
+               114 LOAD_CONST               8 (<code object TestSmartQuery, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/smart_query.py", line 9>)
                116 MAKE_FUNCTION            0
                118 LOAD_CONST               9 ('TestSmartQuery')
                120 LOAD_NAME               13 (unittest)
                122 LOAD_ATTR               15 (TestCase)
                132 PRECALL                  3
                136 CALL                     3
    
@@ -116,15 +116,15 @@
          code 0x970065005a0164005a02640184005a0364025300
            9           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestSmartQuery')
                        8 STORE_NAME               2 (__qualname__)
          
-          11          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/smart_query.py", line 11>)
+          11          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/smart_query.py", line 11>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestSmartQuery'
             code
@@ -1038,15 +1038,15 @@
                   'a_table.integer_field  greater or equal than  1'
                   'a_table.integer_field  equal or greater  1'
                   'a_table.integer_field  equal or greater than  1'
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'a_table', 'id', 'string_field', 'text_field', 'boolean_field', 'integer_field', 'double_field', 'smart_query', 'assertEqual', 'IS_GAE', 'startswith', 'endswith', 'contains', 'drop')
                varnames   ('self', 'db', 'fields', 'keywords', 'q', 'smart_q')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/smart_query.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/smart_query.py'
                name       'testRun'
                firstlineno 11
                lnotab
                   0x02012e0a180102011e011e011e011e011efa1012160116011601160116
                   0116fa041d0401200120012c020e0304013e0120012c0304013e0120012c
                   0304013e0120012c340401200120012c030401200120012c030401200120
                   012c030401200120012c030401200120012c030401200120012c0a040120
@@ -1056,24 +1056,24 @@
                   012c030401200120012c030401200120012c030401200120012c03040120
                   0120012c1c
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/smart_query.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/smart_query.py'
          name       'TestSmartQuery'
          firstlineno 9
          lnotab 0x0a02
       'TestSmartQuery'
       '__main__'
       None
    names      ('pydal', 'DAL', 'Field', 'pydal._compat', 'integer_types', 'pydal.helpers.methods', 'smart_query', '_adapt', 'DEFAULT_URI', 'IS_GAE', 'IS_IMAP', 'drop', '_compat', 'unittest', 'skipIf', 'TestCase', 'TestSmartQuery', '__name__', 'main')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/smart_query.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/smart_query.py'
    name       '<module>'
    firstlineno 1
    lnotab
       0x00ff020110010c010c0218010c03200124ff0e01027f007f003e0c0122
       ff
```

### Comparing `pydal-20240428.2/tests/__pycache__/sql.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/sql.cpython-311.pyc`

 * *Files 0% similar despite different names*

#### Python bytecode

```diff
@@ -221,351 +221,351 @@
                 312 POP_TOP
    
      46         314 BUILD_LIST               0
                 316 LOAD_CONST              18 (('string', 'text', 'integer', 'boolean', 'double', 'blob', 'date', 'time', 'datetime', 'upload', 'password', 'json', 'bigint'))
                 318 LIST_EXTEND              1
                 320 STORE_NAME              43 (ALLOWED_DATATYPES)
    
-     63         322 LOAD_CONST              19 (<code object setUpModule, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 63>)
+     63         322 LOAD_CONST              19 (<code object setUpModule, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 63>)
                 324 MAKE_FUNCTION            0
                 326 STORE_NAME              44 (setUpModule)
    
-     93         328 LOAD_CONST              20 (<code object tearDownModule, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 93>)
+     93         328 LOAD_CONST              20 (<code object tearDownModule, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 93>)
                 330 MAKE_FUNCTION            0
                 332 STORE_NAME              45 (tearDownModule)
    
     100         334 PUSH_NULL
                 336 LOAD_BUILD_CLASS
-                338 LOAD_CONST              21 (<code object TestFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 100>)
+                338 LOAD_CONST              21 (<code object TestFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 100>)
                 340 MAKE_FUNCTION            0
                 342 LOAD_CONST              22 ('TestFields')
                 344 LOAD_NAME               39 (DALtest)
                 346 PRECALL                  3
                 350 CALL                     3
                 360 STORE_NAME              46 (TestFields)
    
     393         362 PUSH_NULL
                 364 LOAD_BUILD_CLASS
-                366 LOAD_CONST              23 (<code object TestTables, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 393>)
+                366 LOAD_CONST              23 (<code object TestTables, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 393>)
                 368 MAKE_FUNCTION            0
                 370 LOAD_CONST              24 ('TestTables')
                 372 LOAD_NAME                8 (unittest)
                 374 LOAD_ATTR               47 (TestCase)
                 384 PRECALL                  3
                 388 CALL                     3
                 398 STORE_NAME              48 (TestTables)
    
     450         400 PUSH_NULL
                 402 LOAD_BUILD_CLASS
-                404 LOAD_CONST              25 (<code object TestAll, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 450>)
+                404 LOAD_CONST              25 (<code object TestAll, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 450>)
                 406 MAKE_FUNCTION            0
                 408 LOAD_CONST              26 ('TestAll')
                 410 LOAD_NAME                8 (unittest)
                 412 LOAD_ATTR               47 (TestCase)
                 422 PRECALL                  3
                 426 CALL                     3
                 436 STORE_NAME              49 (TestAll)
    
     459         438 PUSH_NULL
                 440 LOAD_BUILD_CLASS
-                442 LOAD_CONST              27 (<code object TestTable, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 459>)
+                442 LOAD_CONST              27 (<code object TestTable, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 459>)
                 444 MAKE_FUNCTION            0
                 446 LOAD_CONST              28 ('TestTable')
                 448 LOAD_NAME               39 (DALtest)
                 450 PRECALL                  3
                 454 CALL                     3
                 464 STORE_NAME              50 (TestTable)
    
     503         466 PUSH_NULL
                 468 LOAD_BUILD_CLASS
-                470 LOAD_CONST              29 (<code object TestInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 503>)
+                470 LOAD_CONST              29 (<code object TestInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 503>)
                 472 MAKE_FUNCTION            0
                 474 LOAD_CONST              30 ('TestInsert')
                 476 LOAD_NAME               39 (DALtest)
                 478 PRECALL                  3
                 482 CALL                     3
                 492 STORE_NAME              51 (TestInsert)
    
     524         494 PUSH_NULL
                 496 LOAD_BUILD_CLASS
-                498 LOAD_CONST              31 (<code object TestSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 524>)
+                498 LOAD_CONST              31 (<code object TestSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 524>)
                 500 MAKE_FUNCTION            0
                 502 LOAD_CONST              32 ('TestSelect')
                 504 LOAD_NAME               39 (DALtest)
                 506 PRECALL                  3
                 510 CALL                     3
                 520 STORE_NAME              52 (TestSelect)
    
     732         522 PUSH_NULL
                 524 LOAD_BUILD_CLASS
-                526 LOAD_CONST              33 (<code object TestSubselect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 732>)
+                526 LOAD_CONST              33 (<code object TestSubselect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 732>)
                 528 MAKE_FUNCTION            0
                 530 LOAD_CONST              34 ('TestSubselect')
                 532 LOAD_NAME               39 (DALtest)
                 534 PRECALL                  3
                 538 CALL                     3
                 548 STORE_NAME              53 (TestSubselect)
    
    1032         550 PUSH_NULL
                 552 LOAD_BUILD_CLASS
-                554 LOAD_CONST              35 (<code object TestAddMethod, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1032>)
+                554 LOAD_CONST              35 (<code object TestAddMethod, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1032>)
                 556 MAKE_FUNCTION            0
                 558 LOAD_CONST              36 ('TestAddMethod')
                 560 LOAD_NAME               39 (DALtest)
                 562 PRECALL                  3
                 566 CALL                     3
                 576 STORE_NAME              54 (TestAddMethod)
    
    1051         578 PUSH_NULL
                 580 LOAD_BUILD_CLASS
-                582 LOAD_CONST              37 (<code object TestBelongs, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1051>)
+                582 LOAD_CONST              37 (<code object TestBelongs, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1051>)
                 584 MAKE_FUNCTION            0
                 586 LOAD_CONST              38 ('TestBelongs')
                 588 LOAD_NAME               39 (DALtest)
                 590 PRECALL                  3
                 594 CALL                     3
                 604 STORE_NAME              55 (TestBelongs)
    
    1086         606 PUSH_NULL
                 608 LOAD_BUILD_CLASS
-                610 LOAD_CONST              39 (<code object TestContains, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1086>)
+                610 LOAD_CONST              39 (<code object TestContains, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1086>)
                 612 MAKE_FUNCTION            0
                 614 LOAD_CONST              40 ('TestContains')
                 616 LOAD_NAME               39 (DALtest)
                 618 PRECALL                  3
                 622 CALL                     3
                 632 STORE_NAME              56 (TestContains)
    
    1163         634 PUSH_NULL
                 636 LOAD_BUILD_CLASS
-                638 LOAD_CONST              41 (<code object TestLike, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1163>)
+                638 LOAD_CONST              41 (<code object TestLike, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1163>)
                 640 MAKE_FUNCTION            0
                 642 LOAD_CONST              42 ('TestLike')
                 644 LOAD_NAME               39 (DALtest)
                 646 PRECALL                  3
                 650 CALL                     3
                 660 STORE_NAME              57 (TestLike)
    
    1287         662 PUSH_NULL
                 664 LOAD_BUILD_CLASS
-                666 LOAD_CONST              43 (<code object TestDatetime, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1287>)
+                666 LOAD_CONST              43 (<code object TestDatetime, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1287>)
                 668 MAKE_FUNCTION            0
                 670 LOAD_CONST              44 ('TestDatetime')
                 672 LOAD_NAME               39 (DALtest)
                 674 PRECALL                  3
                 678 CALL                     3
                 688 STORE_NAME              58 (TestDatetime)
    
    1320         690 PUSH_NULL
                 692 LOAD_BUILD_CLASS
-                694 LOAD_CONST              45 (<code object TestExpressions, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1320>)
+                694 LOAD_CONST              45 (<code object TestExpressions, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1320>)
                 696 MAKE_FUNCTION            0
                 698 LOAD_CONST              46 ('TestExpressions')
                 700 LOAD_NAME               39 (DALtest)
                 702 PRECALL                  3
                 706 CALL                     3
                 716 STORE_NAME              59 (TestExpressions)
    
    1498         718 PUSH_NULL
                 720 LOAD_BUILD_CLASS
-                722 LOAD_CONST              47 (<code object TestTableAliasing, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1498>)
+                722 LOAD_CONST              47 (<code object TestTableAliasing, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1498>)
                 724 MAKE_FUNCTION            0
                 726 LOAD_CONST              48 ('TestTableAliasing')
                 728 LOAD_NAME               39 (DALtest)
                 730 PRECALL                  3
                 734 CALL                     3
                 744 STORE_NAME              60 (TestTableAliasing)
    
    1554         746 PUSH_NULL
                 748 LOAD_BUILD_CLASS
-                750 LOAD_CONST              49 (<code object TestJoin, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1554>)
+                750 LOAD_CONST              49 (<code object TestJoin, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1554>)
                 752 MAKE_FUNCTION            0
                 754 LOAD_CONST              50 ('TestJoin')
                 756 LOAD_NAME               39 (DALtest)
                 758 PRECALL                  3
                 762 CALL                     3
                 772 STORE_NAME              61 (TestJoin)
    
    1692         774 PUSH_NULL
                 776 LOAD_BUILD_CLASS
-                778 LOAD_CONST              51 (<code object TestMinMaxSumAvg, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1692>)
+                778 LOAD_CONST              51 (<code object TestMinMaxSumAvg, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1692>)
                 780 MAKE_FUNCTION            0
                 782 LOAD_CONST              52 ('TestMinMaxSumAvg')
                 784 LOAD_NAME               39 (DALtest)
                 786 PRECALL                  3
                 790 CALL                     3
                 800 STORE_NAME              62 (TestMinMaxSumAvg)
    
    1713         802 PUSH_NULL
                 804 LOAD_BUILD_CLASS
-                806 LOAD_CONST              53 (<code object TestMigrations, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1713>)
+                806 LOAD_CONST              53 (<code object TestMigrations, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1713>)
                 808 MAKE_FUNCTION            0
                 810 LOAD_CONST              54 ('TestMigrations')
                 812 LOAD_NAME                8 (unittest)
                 814 LOAD_ATTR               47 (TestCase)
                 824 PRECALL                  3
                 828 CALL                     3
                 838 STORE_NAME              63 (TestMigrations)
    
    1895         840 PUSH_NULL
                 842 LOAD_BUILD_CLASS
-                844 LOAD_CONST              55 (<code object TestReference, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1895>)
+                844 LOAD_CONST              55 (<code object TestReference, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1895>)
                 846 MAKE_FUNCTION            0
                 848 LOAD_CONST              56 ('TestReference')
                 850 LOAD_NAME               39 (DALtest)
                 852 PRECALL                  3
                 856 CALL                     3
                 866 STORE_NAME              64 (TestReference)
    
    1942         868 PUSH_NULL
                 870 LOAD_BUILD_CLASS
-                872 LOAD_CONST              57 (<code object TestClientLevelOps, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1942>)
+                872 LOAD_CONST              57 (<code object TestClientLevelOps, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1942>)
                 874 MAKE_FUNCTION            0
                 876 LOAD_CONST              58 ('TestClientLevelOps')
                 878 LOAD_NAME               39 (DALtest)
                 880 PRECALL                  3
                 884 CALL                     3
                 894 STORE_NAME              65 (TestClientLevelOps)
    
    2042         896 PUSH_NULL
                 898 LOAD_BUILD_CLASS
-                900 LOAD_CONST              59 (<code object TestVirtualFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2042>)
+                900 LOAD_CONST              59 (<code object TestVirtualFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2042>)
                 902 MAKE_FUNCTION            0
                 904 LOAD_CONST              60 ('TestVirtualFields')
                 906 LOAD_NAME               39 (DALtest)
                 908 PRECALL                  3
                 912 CALL                     3
                 922 STORE_NAME              66 (TestVirtualFields)
    
    2057         924 PUSH_NULL
                 926 LOAD_BUILD_CLASS
-                928 LOAD_CONST              61 (<code object TestComputedFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2057>)
+                928 LOAD_CONST              61 (<code object TestComputedFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2057>)
                 930 MAKE_FUNCTION            0
                 932 LOAD_CONST              62 ('TestComputedFields')
                 934 LOAD_NAME               39 (DALtest)
                 936 PRECALL                  3
                 940 CALL                     3
                 950 STORE_NAME              67 (TestComputedFields)
    
    2085         952 PUSH_NULL
                 954 LOAD_BUILD_CLASS
-                956 LOAD_CONST              63 (<code object TestCommonFilters, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2085>)
+                956 LOAD_CONST              63 (<code object TestCommonFilters, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2085>)
                 958 MAKE_FUNCTION            0
                 960 LOAD_CONST              64 ('TestCommonFilters')
                 962 LOAD_NAME               39 (DALtest)
                 964 PRECALL                  3
                 968 CALL                     3
                 978 STORE_NAME              68 (TestCommonFilters)
    
    2124         980 PUSH_NULL
                 982 LOAD_BUILD_CLASS
-                984 LOAD_CONST              65 (<code object TestImportExportFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2124>)
+                984 LOAD_CONST              65 (<code object TestImportExportFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2124>)
                 986 MAKE_FUNCTION            0
                 988 LOAD_CONST              66 ('TestImportExportFields')
                 990 LOAD_NAME               39 (DALtest)
                 992 PRECALL                  3
                 996 CALL                     3
                1006 STORE_NAME              69 (TestImportExportFields)
    
    2148        1008 PUSH_NULL
                1010 LOAD_BUILD_CLASS
-               1012 LOAD_CONST              67 (<code object TestImportExportUuidFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2148>)
+               1012 LOAD_CONST              67 (<code object TestImportExportUuidFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2148>)
                1014 MAKE_FUNCTION            0
                1016 LOAD_CONST              68 ('TestImportExportUuidFields')
                1018 LOAD_NAME               39 (DALtest)
                1020 PRECALL                  3
                1024 CALL                     3
                1034 STORE_NAME              70 (TestImportExportUuidFields)
    
    2171        1036 PUSH_NULL
                1038 LOAD_BUILD_CLASS
-               1040 LOAD_CONST              69 (<code object TestDALDictImportExport, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2171>)
+               1040 LOAD_CONST              69 (<code object TestDALDictImportExport, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2171>)
                1042 MAKE_FUNCTION            0
                1044 LOAD_CONST              70 ('TestDALDictImportExport')
                1046 LOAD_NAME                8 (unittest)
                1048 LOAD_ATTR               47 (TestCase)
                1058 PRECALL                  3
                1062 CALL                     3
                1072 STORE_NAME              71 (TestDALDictImportExport)
    
    2277        1074 PUSH_NULL
                1076 LOAD_BUILD_CLASS
-               1078 LOAD_CONST              71 (<code object TestSelectAsDict, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2277>)
+               1078 LOAD_CONST              71 (<code object TestSelectAsDict, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2277>)
                1080 MAKE_FUNCTION            0
                1082 LOAD_CONST              72 ('TestSelectAsDict')
                1084 LOAD_NAME               39 (DALtest)
                1086 PRECALL                  3
                1090 CALL                     3
                1100 STORE_NAME              72 (TestSelectAsDict)
    
    2316        1102 PUSH_NULL
                1104 LOAD_BUILD_CLASS
-               1106 LOAD_CONST              73 (<code object TestExecuteSQL, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2316>)
+               1106 LOAD_CONST              73 (<code object TestExecuteSQL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2316>)
                1108 MAKE_FUNCTION            0
                1110 LOAD_CONST              74 ('TestExecuteSQL')
                1112 LOAD_NAME               39 (DALtest)
                1114 PRECALL                  3
                1118 CALL                     3
                1128 STORE_NAME              73 (TestExecuteSQL)
    
    2408        1130 PUSH_NULL
                1132 LOAD_BUILD_CLASS
-               1134 LOAD_CONST              75 (<code object TestRNameTable, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2408>)
+               1134 LOAD_CONST              75 (<code object TestRNameTable, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2408>)
                1136 MAKE_FUNCTION            0
                1138 LOAD_CONST              76 ('TestRNameTable')
                1140 LOAD_NAME               39 (DALtest)
                1142 PRECALL                  3
                1146 CALL                     3
                1156 STORE_NAME              74 (TestRNameTable)
    
    2697        1158 PUSH_NULL
                1160 LOAD_BUILD_CLASS
-               1162 LOAD_CONST              77 (<code object TestRNameFields, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2697>)
+               1162 LOAD_CONST              77 (<code object TestRNameFields, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2697>)
                1164 MAKE_FUNCTION            0
                1166 LOAD_CONST              78 ('TestRNameFields')
                1168 LOAD_NAME               39 (DALtest)
                1170 PRECALL                  3
                1174 CALL                     3
                1184 STORE_NAME              75 (TestRNameFields)
    
    3115        1186 PUSH_NULL
                1188 LOAD_BUILD_CLASS
-               1190 LOAD_CONST              79 (<code object TestQuoting, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3115>)
+               1190 LOAD_CONST              79 (<code object TestQuoting, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3115>)
                1192 MAKE_FUNCTION            0
                1194 LOAD_CONST              80 ('TestQuoting')
                1196 LOAD_NAME               39 (DALtest)
                1198 PRECALL                  3
                1202 CALL                     3
                1212 STORE_NAME              76 (TestQuoting)
    
    3245        1214 PUSH_NULL
                1216 LOAD_BUILD_CLASS
-               1218 LOAD_CONST              81 (<code object TestTableAndFieldCase, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3245>)
+               1218 LOAD_CONST              81 (<code object TestTableAndFieldCase, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3245>)
                1220 MAKE_FUNCTION            0
                1222 LOAD_CONST              82 ('TestTableAndFieldCase')
                1224 LOAD_NAME                8 (unittest)
                1226 LOAD_ATTR               47 (TestCase)
                1236 PRECALL                  3
                1240 CALL                     3
                1250 STORE_NAME              77 (TestTableAndFieldCase)
    
    3256        1252 PUSH_NULL
                1254 LOAD_BUILD_CLASS
-               1256 LOAD_CONST              83 (<code object TestQuotesByDefault, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3256>)
+               1256 LOAD_CONST              83 (<code object TestQuotesByDefault, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3256>)
                1258 MAKE_FUNCTION            0
                1260 LOAD_CONST              84 ('TestQuotesByDefault')
                1262 LOAD_NAME                8 (unittest)
                1264 LOAD_ATTR               47 (TestCase)
                1274 PRECALL                  3
                1278 CALL                     3
                1288 STORE_NAME              78 (TestQuotesByDefault)
    
    3265        1290 PUSH_NULL
                1292 LOAD_BUILD_CLASS
-               1294 LOAD_CONST              85 (<code object TestGis, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3265>)
+               1294 LOAD_CONST              85 (<code object TestGis, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3265>)
                1296 MAKE_FUNCTION            0
                1298 LOAD_CONST              86 ('TestGis')
                1300 LOAD_NAME               39 (DALtest)
                1302 PRECALL                  3
                1306 CALL                     3
                1316 STORE_NAME              79 (TestGis)
    
@@ -575,80 +575,80 @@
                1332 LOAD_NAME               34 (IS_POSTGRESQL)
                1334 LOAD_CONST              87 ('Only implemented for postgres for now')
                1336 PRECALL                  2
                1340 CALL                     2
    
    3341        1350 PUSH_NULL
                1352 LOAD_BUILD_CLASS
-               1354 LOAD_CONST              88 (<code object TestJSON, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3340>)
+               1354 LOAD_CONST              88 (<code object TestJSON, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3340>)
                1356 MAKE_FUNCTION            0
                1358 LOAD_CONST              89 ('TestJSON')
                1360 LOAD_NAME               39 (DALtest)
                1362 PRECALL                  3
                1366 CALL                     3
    
    3340        1376 PRECALL                  0
                1380 CALL                     0
    
    3341        1390 STORE_NAME              81 (TestJSON)
    
    3384        1392 PUSH_NULL
                1394 LOAD_BUILD_CLASS
-               1396 LOAD_CONST              90 (<code object TestSQLCustomType, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3384>)
+               1396 LOAD_CONST              90 (<code object TestSQLCustomType, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3384>)
                1398 MAKE_FUNCTION            0
                1400 LOAD_CONST              91 ('TestSQLCustomType')
                1402 LOAD_NAME               39 (DALtest)
                1404 PRECALL                  3
                1408 CALL                     3
                1418 STORE_NAME              82 (TestSQLCustomType)
    
    3426        1420 PUSH_NULL
                1422 LOAD_BUILD_CLASS
-               1424 LOAD_CONST              92 (<code object TestLazy, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3426>)
+               1424 LOAD_CONST              92 (<code object TestLazy, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3426>)
                1426 MAKE_FUNCTION            0
                1428 LOAD_CONST              93 ('TestLazy')
                1430 LOAD_NAME               39 (DALtest)
                1432 PRECALL                  3
                1436 CALL                     3
                1446 STORE_NAME              83 (TestLazy)
    
    3472        1448 PUSH_NULL
                1450 LOAD_BUILD_CLASS
-               1452 LOAD_CONST              94 (<code object TestRedefine, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3472>)
+               1452 LOAD_CONST              94 (<code object TestRedefine, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3472>)
                1454 MAKE_FUNCTION            0
                1456 LOAD_CONST              95 ('TestRedefine')
                1458 LOAD_NAME                8 (unittest)
                1460 LOAD_ATTR               47 (TestCase)
                1470 PRECALL                  3
                1474 CALL                     3
                1484 STORE_NAME              84 (TestRedefine)
    
    3486        1486 PUSH_NULL
                1488 LOAD_BUILD_CLASS
-               1490 LOAD_CONST              96 (<code object TestUpdateInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3486>)
+               1490 LOAD_CONST              96 (<code object TestUpdateInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3486>)
                1492 MAKE_FUNCTION            0
                1494 LOAD_CONST              97 ('TestUpdateInsert')
                1496 LOAD_NAME               39 (DALtest)
                1498 PRECALL                  3
                1502 CALL                     3
                1512 STORE_NAME              85 (TestUpdateInsert)
    
    3499        1514 PUSH_NULL
                1516 LOAD_BUILD_CLASS
-               1518 LOAD_CONST              98 (<code object TestBulkInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3499>)
+               1518 LOAD_CONST              98 (<code object TestBulkInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3499>)
                1520 MAKE_FUNCTION            0
                1522 LOAD_CONST              99 ('TestBulkInsert')
                1524 LOAD_NAME               39 (DALtest)
                1526 PRECALL                  3
                1530 CALL                     3
                1540 STORE_NAME              86 (TestBulkInsert)
    
    3521        1542 PUSH_NULL
                1544 LOAD_BUILD_CLASS
-               1546 LOAD_CONST             100 (<code object TestRecordVersioning, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3521>)
+               1546 LOAD_CONST             100 (<code object TestRecordVersioning, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3521>)
                1548 MAKE_FUNCTION            0
                1550 LOAD_CONST             101 ('TestRecordVersioning')
                1552 LOAD_NAME               39 (DALtest)
                1554 PRECALL                  3
                1558 CALL                     3
                1568 STORE_NAME              87 (TestRecordVersioning)
    
@@ -660,40 +660,40 @@
                1588 LOAD_NAME               32 (IS_NOSQL)
             >> 1590 LOAD_CONST             102 ('Skip if sqlite or NOSQL since no pools')
                1592 PRECALL                  2
                1596 CALL                     2
    
    3544        1606 PUSH_NULL
                1608 LOAD_BUILD_CLASS
-               1610 LOAD_CONST             103 (<code object TestConnection, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3543>)
+               1610 LOAD_CONST             103 (<code object TestConnection, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3543>)
                1612 MAKE_FUNCTION            0
                1614 LOAD_CONST             104 ('TestConnection')
                1616 LOAD_NAME                8 (unittest)
                1618 LOAD_ATTR               47 (TestCase)
                1628 PRECALL                  3
                1632 CALL                     3
    
    3543        1642 PRECALL                  0
                1646 CALL                     0
    
    3544        1656 STORE_NAME              88 (TestConnection)
    
    3587        1658 PUSH_NULL
                1660 LOAD_BUILD_CLASS
-               1662 LOAD_CONST             105 (<code object TestSerializers, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3587>)
+               1662 LOAD_CONST             105 (<code object TestSerializers, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3587>)
                1664 MAKE_FUNCTION            0
                1666 LOAD_CONST             106 ('TestSerializers')
                1668 LOAD_NAME               39 (DALtest)
                1670 PRECALL                  3
                1674 CALL                     3
                1684 STORE_NAME              89 (TestSerializers)
    
    3611        1686 PUSH_NULL
                1688 LOAD_BUILD_CLASS
-               1690 LOAD_CONST             107 (<code object TestIterselect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3611>)
+               1690 LOAD_CONST             107 (<code object TestIterselect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3611>)
                1692 MAKE_FUNCTION            0
                1694 LOAD_CONST             108 ('TestIterselect')
                1696 LOAD_NAME               39 (DALtest)
                1698 PRECALL                  3
                1702 CALL                     3
                1712 STORE_NAME              90 (TestIterselect)
    
@@ -765,15 +765,15 @@
                       68 LOAD_CONST               1 ('all')
                       70 BUILD_LIST               1
                       72 KW_NAMES                 2
                       74 PRECALL                  2
                       78 CALL                     2
                       88 STORE_FAST               0 (db)
          
-          67          90 LOAD_CONST               3 (<code object clean_table, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 67>)
+          67          90 LOAD_CONST               3 (<code object clean_table, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 67>)
                       92 MAKE_FUNCTION            0
                       94 STORE_FAST               1 (clean_table)
          
           77          96 LOAD_CONST               4 (('tt', 't0', 't1', 't2', 't3', 't4', 'easy_name', 'tt_archive', 'pet_farm', 'person'))
                       98 GET_ITER
                  >>  100 FOR_ITER                14 (to 130)
                      102 STORE_FAST               2 (tablename)
@@ -889,24 +889,24 @@
                  184 to 192 -> 194 [1] lasti
                consts
                   None
                names      ('define_table', 'Exception', 'drop')
                varnames   ('db', 'tablename', 'e')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'clean_table'
                firstlineno 67
                lnotab 0x020102012e01120112ff080202013a01120114ff
             ('tt', 't0', 't1', 't2', 't3', 't4', 'easy_name', 'tt_archive', 'pet_farm', 'person')
          names      ('IS_MYSQL', 'IS_TERADATA', 'IS_ORACLE', 'DAL', 'DEFAULT_URI', 'close')
          varnames   ('db', 'clean_table', 'tablename')
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'setUpModule'
          firstlineno 63
          lnotab 0x02012a012e02060a080c1a012ce6
       code
          argcount  : 0
          nlocals   : 1
          stacksize : 4
@@ -959,15 +959,15 @@
             None
             'sql.log'
             '*.table'
          names      ('os', 'path', 'isfile', 'unlink', 'glob')
          varnames   ('a',)
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'tearDownModule'
          firstlineno 93
          lnotab 0x02013e0128012c012aff
       code
          argcount  : 0
          nlocals   : 0
          stacksize : 1
@@ -977,39 +977,39 @@
             0484005a06640584005a07640684005a08640784005a0964085300
          100           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestFields')
                        8 STORE_NAME               2 (__qualname__)
          
-         101          10 LOAD_CONST               1 (<code object testFieldName, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 101>)
+         101          10 LOAD_CONST               1 (<code object testFieldName, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 101>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testFieldName)
          
-         156          16 LOAD_CONST               2 (<code object testFieldTypes, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 156>)
+         156          16 LOAD_CONST               2 (<code object testFieldTypes, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 156>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (testFieldTypes)
          
-         176          22 LOAD_CONST               3 (<code object testFieldLabels, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 176>)
+         176          22 LOAD_CONST               3 (<code object testFieldLabels, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 176>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               5 (testFieldLabels)
          
-         185          28 LOAD_CONST               4 (<code object testFieldFormatters, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 185>)
+         185          28 LOAD_CONST               4 (<code object testFieldFormatters, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 185>)
                       30 MAKE_FUNCTION            0
                       32 STORE_NAME               6 (testFieldFormatters)
          
-         194          34 LOAD_CONST               5 (<code object testUploadField, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 194>)
+         194          34 LOAD_CONST               5 (<code object testUploadField, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 194>)
                       36 MAKE_FUNCTION            0
                       38 STORE_NAME               7 (testUploadField)
          
-         264          40 LOAD_CONST               6 (<code object testBlobBytes, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 264>)
+         264          40 LOAD_CONST               6 (<code object testBlobBytes, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 264>)
                       42 MAKE_FUNCTION            0
                       44 STORE_NAME               8 (testBlobBytes)
          
-         275          46 LOAD_CONST               7 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 275>)
+         275          46 LOAD_CONST               7 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 275>)
                       48 MAKE_FUNCTION            0
                       50 STORE_NAME               9 (testRun)
                       52 LOAD_CONST               8 (None)
                       54 RETURN_VALUE
          consts
             'TestFields'
             code
@@ -1184,15 +1184,15 @@
                   ('1x', 'xx$%@%', 'xx yy', 'yy\na', 'yy\n')
                   ('', '', '', '', '', '', '', '', '')
                   None
                names      ('assertRaises', 'SyntaxError', 'Field', 'assertTrue')
                varnames   ('self', 'x', 'non_valid_examples', 'a')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testFieldName'
                firstlineno 101
                lnotab
                   0x020f440344030801460318011e0102fe10064401440144030801080146
                   030c0b080146ff
             code
                argcount  : 1
@@ -1291,15 +1291,15 @@
                   'temp'
                   'reference temp'
                   'Passing a Table does not result in a reference type.'
                names      ('assertTrue', 'Field', 'length', 'Table', 'type')
                varnames   ('self', 'typ')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testFieldTypes'
                firstlineno 156
                lnotab 0x020208011801300108fe12061801300102fe100618014c0102fe
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 6
@@ -1357,15 +1357,15 @@
                   'Label built is incorrect'
                   'abc_def'
                   'Abc Def'
                names      ('assertTrue', 'Field', 'label')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testFieldLabels'
                firstlineno 176
                lnotab 0x0202180132ff1003180132ff
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 7
@@ -1435,15 +1435,15 @@
                   'abc'
                   ('date', 'time', 'datetime')
                   'test'
                names      ('ALLOWED_DATATYPES', 'Field', 'isinstance', 'formatter', 'str', 'datetime', 'now')
                varnames   ('self', 'typ', 'f')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testFieldFormatters'
                firstlineno 185
                lnotab 0x020212012001080152028afb
             code
                argcount  : 1
                nlocals   : 11
                stacksize : 9
@@ -1780,15 +1780,15 @@
                   ('fileobj',)
                   ('MemoryFS',)
                   ('uploadfs', 'autodelete')
                names      ('tempfile', 'NamedTemporaryFile', 'write', 'seek', 'connect', 'define_table', 'Field', 'gettempdir', 'tt', 'insert', 'fileobj', 'retrieve', 'assertEqual', 'os', 'path', 'basename', 'name', 'read', 'close', 'delete_record', 'drop', 'fs.memoryfs', 'MemoryFS', 'ImportError')
                varnames   ('self', 'tempfile', 'stream', 'content', 'db', 'f_id', 'row', 'retr_name', 'retr_stream', 'retr_content', 'MemoryFS')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testUploadField'
                firstlineno 194
                lnotab
                   0x02010802280104012a022a022801180102010c012cff10fe100636021a
                   014e03700228012c0328032803320302010c032a01180136ff100436021a
                   014e03700228012c032801280328033802120106ff
             code
@@ -1935,15 +1935,15 @@
                   ('aa',)
                   1
                   0
                names      ('connect', 'pickle', 'dumps', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'to_bytes', 'select', 'aa', 'BytesIO', 'read', 'drop')
                varnames   ('self', 'db', 'obj')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testBlobBytes'
                firstlineno 264
                lnotab 0x02022801280148015e01a6014c01a401
             code
                argcount  : 1
                nlocals   : 12
                stacksize : 11
@@ -2828,15 +2828,15 @@
                           4124 LOAD_FAST                8 (t0)
                           4126 PRECALL                  2
                           4130 CALL                     2
                           4140 POP_TOP
                
                357        4142 LOAD_GLOBAL              5 (NULL + Field)
                           4154 LOAD_ATTR               20 (Virtual)
-                          4164 LOAD_CONST              38 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 357>)
+                          4164 LOAD_CONST              38 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 357>)
                           4166 MAKE_FUNCTION            0
                           4168 PRECALL                  1
                           4172 CALL                     1
                           4182 LOAD_FAST                1 (db)
                           4184 LOAD_ATTR                4 (tt)
                           4194 STORE_ATTR              21 (b)
                
@@ -2860,15 +2860,15 @@
                           4334 LOAD_CONST              39 ('b')
                           4336 PRECALL                  2
                           4340 CALL                     2
                           4350 POP_TOP
                
                361        4352 LOAD_GLOBAL              5 (NULL + Field)
                           4364 LOAD_ATTR               24 (Lazy)
-                          4374 LOAD_CONST              40 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 361>)
+                          4374 LOAD_CONST              40 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 361>)
                           4376 MAKE_FUNCTION            0
                           4378 PRECALL                  1
                           4382 CALL                     1
                           4392 LOAD_FAST                1 (db)
                           4394 LOAD_ATTR                4 (tt)
                           4404 STORE_ATTR              25 (c)
                
@@ -3176,15 +3176,15 @@
                                   24 RETURN_VALUE
                      consts
                         None
                      names      ('tt', 'aa')
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 357
                      lnotab 0x
                   'b'
                   code
                      argcount  : 1
                      nlocals   : 1
@@ -3198,28 +3198,28 @@
                                   24 RETURN_VALUE
                      consts
                         None
                      names      ('tt', 'aa')
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 361
                      lnotab 0x
                   'c'
                   'tt.b'
                   'tt.c'
                   'time'
                   '11:30'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_ORACLE', 'select', 'aa', 'drop', 'with_alias', 'zz', 'long', 'id', 'first', 'datetime', 'date', 'today', 'assertTrue', 'assertFalse', 'Virtual', 'b', 'tablename', 'name', 'Lazy', 'c', 'colnames', 'colnames_fields', 'assertIs', 'time', 'min')
                varnames   ('self', 'db', 'ft', 'ucs', 'objs', 'obj', 'rtn_id', 'rtn', 't0', 'row', 'rows', 'colnames_fields')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 275
                lnotab
                   0x0202280108014c015e0126038c0134014c015e018c013202480104015e
                   018c01b20132024c015e018c0132014c015e018c0132014c030801060102
                   01020102010201020102011cf7040b0801360184012e01320184013c015e
                   018c01320118015cff1003160102010201020102010201020102f910095e
@@ -3227,15 +3227,15 @@
                   024a014e01100136015002360136010e014c014c0132020e014c012c015e
                   018c01320318015cff100334015e01ea01
             None
          names      ('__name__', '__module__', '__qualname__', 'testFieldName', 'testFieldTypes', 'testFieldLabels', 'testFieldFormatters', 'testUploadField', 'testBlobBytes', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestFields'
          firstlineno 100
          lnotab 0x0a0106370614060906090646060b
       'TestFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -3244,15 +3244,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          393           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestTables')
                        8 STORE_NAME               2 (__qualname__)
          
-         394          10 LOAD_CONST               1 (<code object testTableNames, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 394>)
+         394          10 LOAD_CONST               1 (<code object testTableNames, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 394>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testTableNames)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestTables'
             code
@@ -3424,26 +3424,26 @@
                   'while'
                   ('1x', 'xx$%@%', 'xx yy', 'yy\na', 'yy\n')
                   ('', '', '', '', '', '', '', '', '')
                names      ('assertRaises', 'SyntaxError', 'Table', 'assertTrue')
                varnames   ('self', 'x', 'non_valid_examples', 'a')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTableNames'
                firstlineno 394
                lnotab
                   0x020f440344030801460318011e0102fe10064401440144030801080146
                   03080b080146ff
             None
          names      ('__name__', '__module__', '__qualname__', 'testTableNames')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestTables'
          firstlineno 393
          lnotab 0x0a01
       'TestTables'
       code
          argcount  : 0
          nlocals   : 0
@@ -3452,19 +3452,19 @@
          code 0x970065005a0164005a02640184005a03640284005a0464035300
          450           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestAll')
                        8 STORE_NAME               2 (__qualname__)
          
-         451          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 451>)
+         451          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 451>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (setUp)
          
-         454          16 LOAD_CONST               2 (<code object testSQLALL, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 454>)
+         454          16 LOAD_CONST               2 (<code object testSQLALL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 454>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (testSQLALL)
                       22 LOAD_CONST               3 (None)
                       24 RETURN_VALUE
          consts
             'TestAll'
             code
@@ -3501,15 +3501,15 @@
                   'PseudoTable'
                   'name'
                   'birthdate'
                names      ('Table', 'Field', 'pt')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'setUp'
                firstlineno 451
                lnotab 0x0201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 7
@@ -3543,24 +3543,24 @@
                consts
                   None
                   'PseudoTable.id, PseudoTable.name, PseudoTable.birthdate'
                names      ('assertEqual', 'str', 'SQLALL', 'pt')
                varnames   ('self', 'ans')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSQLALL'
                firstlineno 454
                lnotab 0x02010401
             None
          names      ('__name__', '__module__', '__qualname__', 'setUp', 'testSQLALL')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestAll'
          firstlineno 450
          lnotab 0x0a010603
       'TestAll'
       code
          argcount  : 0
          nlocals   : 0
@@ -3571,23 +3571,23 @@
             045300
          459           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestTable')
                        8 STORE_NAME               2 (__qualname__)
          
-         460          10 LOAD_CONST               1 (<code object testTableCreation, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 460>)
+         460          10 LOAD_CONST               1 (<code object testTableCreation, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 460>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testTableCreation)
          
-         477          16 LOAD_CONST               2 (<code object testTableAlias, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 477>)
+         477          16 LOAD_CONST               2 (<code object testTableAlias, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 477>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (testTableAlias)
          
-         489          22 LOAD_CONST               3 (<code object testTableInheritance, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 489>)
+         489          22 LOAD_CONST               3 (<code object testTableInheritance, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 489>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               5 (testTableInheritance)
                       28 LOAD_CONST               4 (None)
                       30 RETURN_VALUE
          consts
             'TestTable'
             code
@@ -3684,15 +3684,15 @@
                   'string'
                   'lastname'
                   'persons.firstname, persons.lastname'
                names      ('assertRaises', 'SyntaxError', 'Table', 'Field', 'assertTrue', 'set', 'fields', 'issuperset', 'str', 'ALL')
                varnames   ('self', 'persons')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTableCreation'
                firstlineno 460
                lnotab 0x020346020c0140ff10069204
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 9
@@ -3778,15 +3778,15 @@
                   'string'
                   'lastname'
                   'aliens'
                names      ('connect', 'Table', 'Field', 'with_alias', 'assertTrue', 'set', 'fields')
                varnames   ('self', 'db', 'persons', 'aliens')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTableAlias'
                firstlineno 477
                lnotab 0x020128010c0140ff10032a042e01
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 9
@@ -3874,24 +3874,24 @@
                   'items_purchased'
                   'integer'
                   ('items_purchased', 'firstname', 'lastname')
                names      ('Table', 'Field', 'assertTrue', 'set', 'fields', 'issuperset')
                varnames   ('self', 'persons', 'customers')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTableInheritance'
                firstlineno 489
                lnotab 0x02010c0140ff10030c0124ff100318013c0120ff0eff
             None
          names      ('__name__', '__module__', '__qualname__', 'testTableCreation', 'testTableAlias', 'testTableInheritance')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestTable'
          firstlineno 459
          lnotab 0x0a010611060c
       'TestTable'
       code
          argcount  : 0
          nlocals   : 0
@@ -3900,15 +3900,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          503           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestInsert')
                        8 STORE_NAME               2 (__qualname__)
          
-         504          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 504>)
+         504          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 504>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestInsert'
             code
@@ -4208,26 +4208,26 @@
                   '2'
                   True
                   False
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_TERADATA', 'aa', 'count', 'isempty', 'update', 'delete')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 504
                lnotab
                   0x0201280146015e010e015e0160025e015e027e017e0182017e017e017e
                   01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestInsert'
          firstlineno 503
          lnotab 0x0a01
       'TestInsert'
       code
          argcount  : 0
          nlocals   : 0
@@ -4239,43 +4239,43 @@
             095300
          524           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestSelect')
                        8 STORE_NAME               2 (__qualname__)
          
-         525          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 525>)
+         525          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 525>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
          
-         558          16 LOAD_CONST               2 (<code object testTestQuery, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 558>)
+         558          16 LOAD_CONST               2 (<code object testTestQuery, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 558>)
                       18 MAKE_FUNCTION            0
                       20 STORE_NAME               4 (testTestQuery)
          
-         562          22 LOAD_CONST               3 (<code object testListInteger, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 562>)
+         562          22 LOAD_CONST               3 (<code object testListInteger, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 562>)
                       24 MAKE_FUNCTION            0
                       26 STORE_NAME               5 (testListInteger)
          
-         569          28 LOAD_CONST               4 (<code object testListString, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 569>)
+         569          28 LOAD_CONST               4 (<code object testListString, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 569>)
                       30 MAKE_FUNCTION            0
                       32 STORE_NAME               6 (testListString)
          
-         576          34 LOAD_CONST               5 (<code object testListReference, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 576>)
+         576          34 LOAD_CONST               5 (<code object testListReference, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 576>)
                       36 MAKE_FUNCTION            0
                       38 STORE_NAME               7 (testListReference)
          
-         594          40 LOAD_CONST               6 (<code object testGroupByAndDistinct, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 594>)
+         594          40 LOAD_CONST               6 (<code object testGroupByAndDistinct, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 594>)
                       42 MAKE_FUNCTION            0
                       44 STORE_NAME               8 (testGroupByAndDistinct)
          
-         688          46 LOAD_CONST               7 (<code object testCoalesce, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 688>)
+         688          46 LOAD_CONST               7 (<code object testCoalesce, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 688>)
                       48 MAKE_FUNCTION            0
                       50 STORE_NAME               9 (testCoalesce)
          
-         712          52 LOAD_CONST               8 (<code object testTableAliasCollisions, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 712>)
+         712          52 LOAD_CONST               8 (<code object testTableAliasCollisions, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 712>)
                       54 MAKE_FUNCTION            0
                       56 STORE_NAME              10 (testTableAliasCollisions)
                       58 LOAD_CONST               9 (None)
                       60 RETURN_VALUE
          consts
             'TestSelect'
             code
@@ -4932,15 +4932,15 @@
                   (1, 2)
                   ('limitby',)
                   'tt.aa'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_TERADATA', 'id', 'count', 'select', 'aa', 'len', 'ALL', 'first')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 525
                lnotab
                   0x0201280146015e010e015e0160025e015e017e011801a0ff10039c0198
                   0190017e017e017e017e017e017e017e017e01ac01a001a001a201a202
             code
                argcount  : 1
@@ -4970,15 +4970,15 @@
                             94 RETURN_VALUE
                consts
                   None
                names      ('connect', '_adapter', 'test_connection')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTestQuery'
                firstlineno 558
                lnotab 0x02012801
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 7
@@ -5063,15 +5063,15 @@
                   (1, 2, 3, 4, 5)
                   ('aa',)
                   'tt.aa'
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'assertEqual', 'select', 'first', 'aa')
                varnames   ('self', 'db', 'l')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testListInteger'
                firstlineno 562
                lnotab 0x02012801480108013601
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 7
@@ -5156,15 +5156,15 @@
                   ('a', 'b', 'c')
                   ('aa',)
                   'tt.aa'
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'assertEqual', 'select', 'first', 'aa')
                varnames   ('self', 'db', 'l')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testListString'
                firstlineno 569
                lnotab 0x02012801480108013601
             code
                argcount  : 1
                nlocals   : 7
                stacksize : 7
@@ -5412,15 +5412,15 @@
                   'test2'
                   ('t0_id',)
                   1
                names      ('connect', 'define_table', 'Field', 't0', 'insert', 'tt', 'assertEqual', 'select', 't0_id', 'last', 'count')
                varnames   ('self', 'db', 'id_a1', 'id_a2', 'ref1', 'ref2', 'ref3')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testListReference'
                firstlineno 576
                lnotab
                   0x0201280148014801360136010601060108013601c6013601c6013601c6
                   02
             code
                argcount  : 1
@@ -6454,15 +6454,15 @@
                   ('distinct', 'orderby', 'limitby')
                   11
                   (4, 23)
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'assertEqual', 'count', 'select', 'aa', 'bb', 'sum', 'len', 'tuple', 'response', 'cc', 'first')
                varnames   ('self', 'db', 'result', 'count', 'sum')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testGroupByAndDistinct'
                firstlineno 594
                lnotab
                   0x0201280118015aff10033a013a013a013a013a013a013a013a013a013a
                   016c03a001460128017cff12035c0128017eff12035c012801160116013a
                   01300132fb12075c01280116013a011601180102fb120746015c0128017e
                   ff120346015c0318010c01280116013a01160142fc10ff0e0802f7100d68
@@ -6788,15 +6788,15 @@
                   3
                   'integer'
                   ('bb',)
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'IS_ORACLE', 'select', 'dd', 'coalesce', 'cc', 'bb', 'aa', 'assertEqual', 'response', 'drop', 'coalesce_zero')
                varnames   ('self', 'db', 'result')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testCoalesce'
                firstlineno 688
                lnotab
                   0x020128019a01360138013a010e023c01c0014e014e014e010e014e0132
                   026401360136017e014e01
             code
                argcount  : 1
@@ -7028,26 +7028,26 @@
                   ('groupby', 'having', 'orderby')
                   ('join', 'groupby', 'having', 'orderby')
                   ('left', 'groupby', 'having', 'orderby')
                names      ('connect', 'define_table', 'Field', 't1', 't2', 'with_alias', 'insert', 'id', 'update', 'aa', 'on', 'bb', 'select', 'delete')
                varnames   ('self', 'db', 't1', 't2', 'having', 'join')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTableAliasCollisions'
                firstlineno 712
                lnotab
                   0x02012801460146011c012a012a032c012c015001160148017e016e016e
                   01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun', 'testTestQuery', 'testListInteger', 'testListString', 'testListReference', 'testGroupByAndDistinct', 'testCoalesce', 'testTableAliasCollisions')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestSelect'
          firstlineno 524
          lnotab 0x0a0106210604060706070612065e0618
       'TestSelect'
       code
          argcount  : 0
          nlocals   : 0
@@ -7059,38 +7059,38 @@
             0484005a07640584005a0864065300
          732           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestSubselect')
                        8 STORE_NAME               2 (__qualname__)
          
-         733          10 LOAD_CONST               1 (<code object testMethods, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 733>)
+         733          10 LOAD_CONST               1 (<code object testMethods, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 733>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testMethods)
          
          787          16 PUSH_NULL
                       18 LOAD_NAME                4 (skipIf)
                       20 LOAD_NAME                5 (PY2)
                       22 LOAD_CONST               2 ('sqlite3 on py2 does not allow circular references')
                       24 PRECALL                  2
                       28 CALL                     2
          
-         788          38 LOAD_CONST               3 (<code object testCTE, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 787>)
+         788          38 LOAD_CONST               3 (<code object testCTE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 787>)
                       40 MAKE_FUNCTION            0
          
          787          42 PRECALL                  0
                       46 CALL                     0
          
          788          56 STORE_NAME               6 (testCTE)
          
-         842          58 LOAD_CONST               4 (<code object testSelectArguments, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 842>)
+         842          58 LOAD_CONST               4 (<code object testSelectArguments, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 842>)
                       60 MAKE_FUNCTION            0
                       62 STORE_NAME               7 (testSelectArguments)
          
-         903          64 LOAD_CONST               5 (<code object testCorrelated, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 903>)
+         903          64 LOAD_CONST               5 (<code object testCorrelated, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 903>)
                       66 MAKE_FUNCTION            0
                       68 STORE_NAME               8 (testCorrelated)
                       70 LOAD_CONST               6 (None)
                       72 RETURN_VALUE
          consts
             'TestSubselect'
             code
@@ -7841,15 +7841,15 @@
                   ('aa', 'exp')
                   0
                   ()
                names      ('connect', 'define_table', 'Field', 'dict', 'tt', 'insert', 'aa', 'bb', 'with_alias', 'nested_select', 'id', 'assertEqual', 'sorted', 'list', 'fields', 'assertIsInstance', 'len', 'zip', 'assertIs', 'getattr', '_filter_fields', 'enumerate', 'as_dict', 'executesql', 'str', '_rname', '_raw_rname', '_dalname', 'assertRaises', 'SyntaxError', 'query_name', 'sql_shortref', 'on', '_adapter', 'dialect', 'quote', 'Expression')
                varnames   ('self', 'db', 'data', 'item', 'fields', 'sub', 'name', 'key', 'val', 'tmp', 'result', 'idx', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testMethods'
                firstlineno 733
                lnotab
                   0x0201280164016401080126018e014a0288011201440108013801840134
                   0138014a014a014a02140160012801680158014401280148015402360136
                   013601360128ff2e0236010eff2e0236013cff2e032a0114012801680158
                   0236013601360176017001
@@ -7929,15 +7929,15 @@
                
                791         146 LOAD_DEREF              13 (db)
                            148 LOAD_ATTR                3 (org)
                            158 STORE_DEREF             14 (org)
                
                793         160 LOAD_CLOSURE            14 (org)
                            162 BUILD_TUPLE              1
-                           164 LOAD_CONST               5 (<code object insert_workers, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 793>)
+                           164 LOAD_CONST               5 (<code object insert_workers, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 793>)
                            166 MAKE_FUNCTION            8 (closure)
                            168 STORE_FAST               1 (insert_workers)
                
                796         170 LOAD_DEREF              14 (org)
                            172 LOAD_METHOD              4 (insert)
                            194 LOAD_CONST               6 ('Alice')
                            196 KW_NAMES                 7
@@ -8041,15 +8041,15 @@
                            624 CALL                     7
                
                813         634 LOAD_METHOD             11 (union)
                
                814         656 LOAD_CLOSURE            13 (db)
                            658 LOAD_CLOSURE            14 (org)
                            660 BUILD_TUPLE              2
-                           662 LOAD_CONST              24 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 814>)
+                           662 LOAD_CONST              24 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 814>)
                            664 MAKE_FUNCTION            8 (closure)
                
                813         666 PRECALL                  1
                            670 CALL                     1
                
                802         680 STORE_FAST               7 (works_for)
                
@@ -8162,15 +8162,15 @@
                                    2 MAKE_CELL                0 (boss)
                      
                      793           4 RESUME                   0
                      
                      794           6 LOAD_CLOSURE             0 (boss)
                                    8 LOAD_CLOSURE             2 (org)
                                   10 BUILD_TUPLE              2
-                                  12 LOAD_CONST               1 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 794>)
+                                  12 LOAD_CONST               1 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 794>)
                                   14 MAKE_FUNCTION            8 (closure)
                                   16 LOAD_FAST                1 (names)
                                   18 GET_ITER
                                   20 PRECALL                  0
                                   24 CALL                     0
                                   34 RETURN_VALUE
                      consts
@@ -8203,23 +8203,23 @@
                                    >>   60 RETURN_VALUE
                            consts
                               ('name', 'boss')
                            names      ('insert',)
                            varnames   ('.0', 'name')
                            freevars   ('boss', 'org')
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                            name       '<listcomp>'
                            firstlineno 794
                            lnotab 0x
                      names      ()
                      varnames   ('boss', 'names')
                      freevars   ('org',)
                      cellvars   ('boss',)
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'insert_workers'
                      firstlineno 793
                      lnotab 0x0601
                   'Alice'
                   ('name',)
                   'Jim'
                   'Tim'
@@ -8322,25 +8322,25 @@
                         'xdepth'
                         ' '
                         'boss_chain'
                      names      ('boss', 'id', 'nested_select', 'top_boss', 'name', 'xdepth', 'with_alias', 'boss_chain')
                      varnames   ('works_for',)
                      freevars   ('db', 'org')
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 814
                      lnotab 0x080140ff0e0216010c010c010c010c013801380102ff0efa0efe
                   True
                   ' '
                names      ('connect', 'define_table', 'Field', 'org', 'insert', 'name', 'cte', 'id', 'with_alias', 'boss', 'Expression', 'union', 'select', 'ALL', 'as_dict', 'values', 'get', 'append', 'len', 'assertEqual', 'join', 'strip')
                varnames   ('self', 'insert_workers', 'alice', 'jim', 'tim', 'jessy', 'jenny', 'works_for', 'rows', 'row', 'r', 'boss_chain', 'depth')
                freevars   ()
                cellvars   ('db', 'org')
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testCTE'
                firstlineno 787
                lnotab
                   0x0602280164010e020a032c012001200118011a032601160102010c0132
                   010c010c01480148f90e0916010aff0ef5021a68022c0104010401020136
                   010401020136fc02051e01380184f6
             code
@@ -8902,15 +8902,15 @@
                   ('orderby', 'distinct')
                   ('aa',)
                   ()
                names      ('connect', 'define_table', 'Field', 'dict', 'tt', 'insert', 'with_alias', 'aa', 'sum', 'count', 'on', 'bb', 'nested_select', 'assertEqual', 'len', 'enumerate', 'cnt', 'select', 'total', 'as_list')
                varnames   ('self', 'db', 'data', 'expected', 'item', 't1', 't2', 'fields', 'join', 'left', 'group', 'having', 'order', 'limit', 'sub', 'result', 'idx', 'val', 't3', 'query')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelectArguments'
                firstlineno 842
                lnotab
                   0x020128016402200120012001200120fb0407080108012603340134020c
                   01560156fd04055001460128014401420104013c01020102010201020102
                   01020102f908091401600128015c015001520434012a0138011e01620128
                   015c015c015e0386013801
@@ -10571,15 +10571,15 @@
                   ('correlated',)
                   'tmp'
                   ()
                names      ('connect', 'define_table', 'Field', 'dict', 't1', 'insert', 't2', 't3', 'aa', 'cc', 'nested_select', 'with_alias', 'bb', 'belongs', 'select', 'assertEqual', 'len', 'enumerate', 'on', 'update', 'mark', 'delete', 'id')
                varnames   ('self', 'db', 'data_t1', 'data_t2', 'expected_cor', 'expected_leftcor', 'expected_uncor', 'item', 'subquery', 'subfields', 'sub', 'query', 'order', 'result', 'idx', 'val', 'join', 'left', 'kwargs', 'tmp')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testCorrelated'
                firstlineno 903
                lnotab
                   0x0201280118015aff1003640148022001200120012001200120fa040864
                   010801080108010801260108012401440334011a014c013e0132016a0160
                   01280150015202a60132017601600128015c015e02a6017601600128015c
                   015e02320178018601600128015001520276018601600128015001520256
@@ -10588,15 +10588,15 @@
                   01280150015202880128016c01600128015c015e0288016c01600128015c
                   015efe
             None
          names      ('__name__', '__module__', '__qualname__', 'testMethods', 'skipIf', 'PY2', 'testCTE', 'testSelectArguments', 'testCorrelated')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestSubselect'
          firstlineno 732
          lnotab 0x0a010636160104ff0e010236063d
       'TestSubselect'
       code
          argcount  : 0
          nlocals   : 0
@@ -10605,15 +10605,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1032           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestAddMethod')
                         8 STORE_NAME               2 (__qualname__)
          
-         1033          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1033>)
+         1033          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1033>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestAddMethod'
             code
@@ -10669,15 +10669,15 @@
                
                1037         112 LOAD_FAST                1 (db)
                             114 LOAD_ATTR                3 (tt)
                             124 LOAD_ATTR                4 (add_method)
                             134 LOAD_ATTR                5 (all)
                
                1038         144 LOAD_CONST               9 ((None,))
-                            146 LOAD_CONST               3 (<code object select_all, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1037>)
+                            146 LOAD_CONST               3 (<code object select_all, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1037>)
                             148 MAKE_FUNCTION            1 (defaults)
                
                1037         150 PRECALL                  0
                             154 CALL                     0
                
                1038         164 STORE_FAST               2 (select_all)
                
@@ -10800,38 +10800,38 @@
                      consts
                         None
                         ('orderby',)
                      names      ('_db', 'select')
                      varnames   ('table', 'orderby')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'select_all'
                      firstlineno 1037
                      lnotab 0x0202
                   '1'
                   ('aa',)
                   1
                   2
                   3
                   (None,)
                names      ('connect', 'define_table', 'Field', 'tt', 'add_method', 'all', 'assertEqual', 'insert', 'IS_TERADATA', 'len')
                varnames   ('self', 'db', 'select_all')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1033
                lnotab 0x020128014602200106ff0e0102035e010e015e0160025e015e01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestAddMethod'
          firstlineno 1032
          lnotab 0x0a01
       'TestAddMethod'
       code
          argcount  : 0
          nlocals   : 0
@@ -10840,15 +10840,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1051           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestBelongs')
                         8 STORE_NAME               2 (__qualname__)
          
-         1052          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1052>)
+         1052          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1052>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestBelongs'
             code
@@ -11188,27 +11188,27 @@
                   '3'
                   3
                   ('1', '3')
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_TERADATA', 'aa', 'belongs', 'count', 'id', '_select')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1052
                lnotab
                   0x0201280146015e010e015e0160025e015e019c011801dcff1003180104
                   01c2ff0e02240102fc1006180104012c0104012c0188ff0eff0e043afb0e
                   ff0e08240102f6
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestBelongs'
          firstlineno 1051
          lnotab 0x0a01
       'TestBelongs'
       code
          argcount  : 0
          nlocals   : 0
@@ -11217,15 +11217,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1086           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestContains')
                         8 STORE_NAME               2 (__qualname__)
          
-         1087          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1087>)
+         1087          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1087>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestContains'
             code
@@ -12335,29 +12335,29 @@
                   'under_score'
                   'underxscore'
                   'underyscore'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_TERADATA', 'aa', 'contains', 'count', 'bb', 'like', 'drop', 'cc')
                varnames   ('self', 'db', 'is_case_insensitive')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1087
                lnotab
                   0x02012801660164010e0164016602640164019c019c019c019c019c019c
                   01b002740104019c01a002180178ff1003a001180178ff1003180178ff10
                   033203180102011e011e011efc100666010e0166016802660166019c019c
                   01b0019c019c01b0013203620138013801b0013203460136013601360136
                   01360136019c01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestContains'
          firstlineno 1086
          lnotab 0x0a01
       'TestContains'
       code
          argcount  : 0
          nlocals   : 0
@@ -12370,51 +12370,51 @@
             005a0b640884005a0c64095300
          1163           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestLike')
                         8 STORE_NAME               2 (__qualname__)
          
-         1164          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1164>)
+         1164          10 LOAD_CONST               1 (<code object setUp, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1164>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (setUp)
          
-         1170          16 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1170>)
+         1170          16 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1170>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testRun)
          
-         1200          22 LOAD_CONST               3 (<code object testUpperLower, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1200>)
+         1200          22 LOAD_CONST               3 (<code object testUpperLower, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1200>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (testUpperLower)
          
-         1207          28 LOAD_CONST               4 (<code object testStartsEndsWith, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1207>)
+         1207          28 LOAD_CONST               4 (<code object testStartsEndsWith, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1207>)
                        30 MAKE_FUNCTION            0
                        32 STORE_NAME               6 (testStartsEndsWith)
          
-         1214          34 LOAD_CONST               5 (<code object testEscaping, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1214>)
+         1214          34 LOAD_CONST               5 (<code object testEscaping, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1214>)
                        36 MAKE_FUNCTION            0
                        38 STORE_NAME               7 (testEscaping)
          
          1244          40 PUSH_NULL
                        42 LOAD_NAME                8 (unittest)
                        44 LOAD_ATTR                9 (skipIf)
                        54 LOAD_NAME               10 (IS_MSSQL)
                        56 LOAD_CONST               6 ('No Regexp on MSSQL')
                        58 PRECALL                  2
                        62 CALL                     2
          
-         1245          72 LOAD_CONST               7 (<code object testRegexp, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1244>)
+         1245          72 LOAD_CONST               7 (<code object testRegexp, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1244>)
                        74 MAKE_FUNCTION            0
          
          1244          76 PRECALL                  0
                        80 CALL                     0
          
          1245          90 STORE_NAME              11 (testRegexp)
          
-         1271          92 LOAD_CONST               8 (<code object testLikeInteger, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1271>)
+         1271          92 LOAD_CONST               8 (<code object testLikeInteger, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1271>)
                        94 MAKE_FUNCTION            0
                        96 STORE_NAME              12 (testLikeInteger)
                        98 LOAD_CONST               9 (None)
                       100 RETURN_VALUE
          consts
             'TestLike'
             code
@@ -12481,15 +12481,15 @@
                   'abc'
                   ('aa',)
                   True
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'isinstance', 'tt', 'insert', 'long', 'db')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'setUp'
                firstlineno 1164
                lnotab 0x0201280146018401
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
@@ -12966,15 +12966,15 @@
                   '%B%'
                   '%C'
                   '%ABC%'
                names      ('db', 'assertEqual', 'tt', 'aa', 'like', 'count', 'ilike')
                varnames   ('self', 'db', 'is_case_insensitive')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1170
                lnotab
                   0x02010e019c019c019c019c019c019c019c02a001a001a0019c019c019c
                   0a74019c019c01
             code
                argcount  : 1
@@ -13119,15 +13119,15 @@
                   '%B%'
                   '%C'
                   '%c'
                names      ('db', 'assertEqual', 'tt', 'aa', 'upper', 'like', 'count', 'lower')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testUpperLower'
                firstlineno 1200
                lnotab 0x02010e01c001c001c001
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 7
@@ -13252,15 +13252,15 @@
                   1
                   'c'
                   0
                names      ('db', 'assertEqual', 'tt', 'aa', 'startswith', 'count', 'endswith')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testStartsEndsWith'
                firstlineno 1207
                lnotab 0x02010e019c019c019c01
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
@@ -13733,15 +13733,15 @@
                   'discount%%'
                   2
                   '%%percent'
                names      ('db', 'replace', 'tt', 'insert', 'assertEqual', 'aa', 'like', 'count', 'id', 'delete', 'endswith', 'startswith')
                varnames   ('self', 'db', 'term')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testEscaping'
                firstlineno 1214
                lnotab
                   0x02010e012c01360136013601a001a001a8015602360136013601360136
                   0136019c019c01560236013601360136019c019c019c01
             'No Regexp on MSSQL'
             code
@@ -14008,15 +14008,15 @@
                   2
                   'COUNT'
                   3
                names      ('db', 'tt', 'id', 'delete', 'insert', 'assertEqual', 'aa', 'regexp', 'count', 'lower', 'upper', 'NotImplementedError')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRegexp'
                firstlineno 1244
                lnotab
                   0x02020e015601360136013601360102019c04c00118010401c4ff0e0224
                   0102fc100618010401a6ff0e02240102fc16f6120106ff
             code
                argcount  : 1
@@ -14330,24 +14330,24 @@
                   '012%'
                   '%45%'
                   '%54%'
                names      ('db', 'tt', 'drop', 'define_table', 'Field', 'assertEqual', 'isinstance', 'insert', 'long', 'aa', 'like', 'count')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testLikeInteger'
                firstlineno 1271
                lnotab 0x02010e0132014801840184019c019c019c019c019c019c019c01
             None
          names      ('__name__', '__module__', '__qualname__', 'setUp', 'testRun', 'testUpperLower', 'testStartsEndsWith', 'testEscaping', 'unittest', 'skipIf', 'IS_MSSQL', 'testRegexp', 'testLikeInteger')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestLike'
          firstlineno 1163
          lnotab 0x0a010606061e06070607061e200104ff0e01021a
       'TestLike'
       code
          argcount  : 0
          nlocals   : 0
@@ -14356,15 +14356,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1287           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestDatetime')
                         8 STORE_NAME               2 (__qualname__)
          
-         1288          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1288>)
+         1288          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1288>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestDatetime'
             code
@@ -14868,26 +14868,26 @@
                   55
                   0
                   'date'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'datetime', 'aa', 'count', 'year', 'month', 'day', 'hour', 'minutes', 'seconds', 'epoch', 'delete', 'drop', 'IS_ORACLE', 'time', 'select', 'date', 'today')
                varnames   ('self', 'db', 't0')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1288
                lnotab
                   0x0201280148018a018a018a01180182ff1003a201a201a201a201a201a2
                   01a20132030e0148012c0136018c01320248013c013601
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestDatetime'
          firstlineno 1287
          lnotab 0x0a01
       'TestDatetime'
       code
          argcount  : 0
          nlocals   : 0
@@ -14907,31 +14907,31 @@
                        12 LOAD_NAME                3 (unittest)
                        14 LOAD_ATTR                4 (skipIf)
                        24 LOAD_NAME                5 (IS_POSTGRESQL)
                        26 LOAD_CONST               1 ('PG8000 does not like these')
                        28 PRECALL                  2
                        32 CALL                     2
          
-         1322          42 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1321>)
+         1322          42 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1321>)
                        44 MAKE_FUNCTION            0
          
          1321          46 PRECALL                  0
                        50 CALL                     0
          
          1322          60 STORE_NAME               6 (testRun)
          
-         1405          62 LOAD_CONST               3 (<code object testUpdate, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1405>)
+         1405          62 LOAD_CONST               3 (<code object testUpdate, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1405>)
                        64 MAKE_FUNCTION            0
                        66 STORE_NAME               7 (testUpdate)
          
-         1448          68 LOAD_CONST               4 (<code object testSubstring, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1448>)
+         1448          68 LOAD_CONST               4 (<code object testSubstring, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1448>)
                        70 MAKE_FUNCTION            0
                        72 STORE_NAME               8 (testSubstring)
          
-         1475          74 LOAD_CONST               5 (<code object testOps, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1475>)
+         1475          74 LOAD_CONST               5 (<code object testOps, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1475>)
                        76 MAKE_FUNCTION            0
                        78 STORE_NAME               9 (testOps)
                        80 LOAD_CONST               6 (None)
                        82 RETURN_VALUE
          consts
             'TestExpressions'
             'PG8000 does not like these'
@@ -16237,15 +16237,15 @@
                   'my_case'
                   -1
                   -22
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'aa', 'update', 'bb', 'count', 'cc', 'sum', 'select', 'first', 'avg', 'min', 'max', 'abs', 'with_alias', 'case', 'len', 'delete')
                varnames   ('self', 'db', 'sum', 'count', 'avg', 'min', 'max', 'result', 'abs', 'exp', 'condition', 'case', 'my_case')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1321
                lnotab
                   0x0202280118015aff1003600160016003b8017e017e017e019e017e0184
                   01a4017e017e01b6017e017e0118019cff10037e017e03920192034201b6
                   01a001b6023c013c013c013c017201380138013801380138038c018c018c
                   018c039c0162017c0138013801480134017c013803200160012a013a0146
@@ -16598,15 +16598,15 @@
                   ('bb',)
                   2
                   3
                names      ('connect', 'datetime', 'today', 'replace', 'timedelta', 'date', 'time', 'IS_ORACLE', 'define_table', 'Field', 'assertTrue', 'isinstance', 'tt', 'insert', 'long', 'assertEqual', 'aa', 'select', 'bb', 'update', 'drop')
                varnames   ('self', 'db', 'datetime_datetime_today', 'one_day', 'one_sec', 'update_vals', 'uv')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testUpdate'
                firstlineno 1405
                lnotab
                   0x020128033c012c0128012a03020102010201020102010201020102017e
                   020201320102fd0206020126012cfd02f104160a013e03020176018e01bc
                   019401bc0136f6
             code
@@ -16837,15 +16837,15 @@
                   2
                   -2
                   3
                names      ('connect', 'define_table', 'Field', 'insert', 'name', 'lower', 'select', 'first', 'assertEqual')
                varnames   ('self', 'db', 't0', 'input_name', 'exp_slice', 'exp_slice_no_max', 'exp_slice_neg_max', 'exp_slice_neg_start', 'exp_item', 'out')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSubstring'
                firstlineno 1448
                lnotab
                   0x02012801460104012c0142014201420142013e02140116010201020102
                   01020102fb0e0724f7020b4801440148014801
             code
                argcount  : 1
@@ -17134,26 +17134,26 @@
                   6
                   's'
                   'c'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 't0', 'insert', 'vv', 'sum', 'count', 'avg', 'with_alias', 'select', 'first')
                varnames   ('self', 'db', 't0', 'sum', 'count', 'avg', 'op', 'op1', 'op2')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testOps'
                firstlineno 1475
                lnotab
                   0x0201280148015e015e015e013c013c013c010a0130019401940194010a
                   01940262016201
             None
          names      ('__name__', '__module__', '__qualname__', 'unittest', 'skipIf', 'IS_POSTGRESQL', 'testRun', 'testUpdate', 'testSubstring', 'testOps')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestExpressions'
          firstlineno 1320
          lnotab 0x0a01200104ff0e010253062b061b
       'TestExpressions'
       code
          argcount  : 0
          nlocals   : 0
@@ -17162,15 +17162,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1498           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestTableAliasing')
                         8 STORE_NAME               2 (__qualname__)
          
-         1499          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1499>)
+         1499          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1499>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestTableAliasing'
             code
@@ -17895,28 +17895,28 @@
                   ('bb',)
                   456
                   789
                names      ('connect', 'define_table', 'Field', 't1', 'with_alias', 't2', 'assertIs', 'id', 'pk', '_id', 'assertEqual', '_dalname', '_tablename', '_rname', 'insert', 'select', 'aa', 'as_list', 'IS_SQLITE', 'update', 'delete', 'assertRaises', 'SyntaxError', 'bb')
                varnames   ('self', 'db', 'tab1', 'tab2', 'result')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1499
                lnotab
                   0x020128014601180102012401200102fc12063401340140014001360136
                   013601360136012c012c0154015c020e01500154015c014c015401580236
                   0150ff2e0236014cff2e032c012c0154015c020e01500154015c014c0154
                   015a02360150ff2e0236014cff
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestTableAliasing'
          firstlineno 1498
          lnotab 0x0a01
       'TestTableAliasing'
       code
          argcount  : 0
          nlocals   : 0
@@ -17925,15 +17925,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1554           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestJoin')
                         8 STORE_NAME               2 (__qualname__)
          
-         1555          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1555>)
+         1555          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1555>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestJoin'
             code
@@ -19009,15 +19009,15 @@
                   'skipper'
                   ('name', 'ownerperson')
                   'person.name'
                names      ('connect', 'define_table', 'Field', 't1', 'insert', 't2', 'assertEqual', 'len', 'id', 'b', 'select', 'aa', 'ALL', 'on', 'count', '_extra', 'drop', 'person', 'name', 'dog', 'ownerperson', 'first', '_referenced_by')
                varnames   ('self', 'db', 'i1', 'i2', 'i3', 'id', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1555
                lnotab
                   0x0201280146016e013601360136013801380138011801b6ff10031801bc
                   ff10031801bcff100318010c01280116011601620130fc10ff0e0802f710
                   0b18011201160116011601620130fc100502fa0a07140102f7100b180112
                   01160116011601620130fc100502fa0a07140102f7100b18011201160116
@@ -19029,15 +19029,15 @@
                   0844f80a0902f6100c32013202460136013601640138018e014c01380132
                   01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestJoin'
          firstlineno 1554
          lnotab 0x0a01
       'TestJoin'
       code
          argcount  : 0
          nlocals   : 0
@@ -19046,15 +19046,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1692           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestMinMaxSumAvg')
                         8 STORE_NAME               2 (__qualname__)
          
-         1693          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1693>)
+         1693          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1693>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestMinMaxSumAvg'
             code
@@ -19386,26 +19386,26 @@
                   3
                   0
                   6
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'aa', 'min', 'id', 'select', '_extra', 'first', 'max', 'sum', 'count', 'avg')
                varnames   ('self', 'db', 's')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1693
                lnotab
                   0x0201280148015e015e015e013c01a201b00192013c0192013c0192013c
                   0192013c01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestMinMaxSumAvg'
          firstlineno 1692
          lnotab 0x0a01
       'TestMinMaxSumAvg'
       code
          argcount  : 0
          nlocals   : 0
@@ -19416,23 +19416,23 @@
             045300
          1713           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestMigrations')
                         8 STORE_NAME               2 (__qualname__)
          
-         1714          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1714>)
+         1714          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1714>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
          
-         1749          16 LOAD_CONST               2 (<code object testFieldRName, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1749>)
+         1749          16 LOAD_CONST               2 (<code object testFieldRName, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1749>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testFieldRName)
          
-         1886          22 LOAD_CONST               3 (<code object tearDown, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1886>)
+         1886          22 LOAD_CONST               3 (<code object tearDown, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1886>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (tearDown)
                        28 LOAD_CONST               4 (None)
                        30 RETURN_VALUE
          consts
             'TestMigrations'
             code
@@ -19801,15 +19801,15 @@
                   ('migrate', 'rname')
                   'b'
                   'text'
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'commit', 'close', 'tt', 'drop', 't1')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1714
                lnotab
                   0x02012e01660118013eff1203280128012e014a014c01280128012e0166
                   0118013eff1203280128012e016801180140ff1203280128012e014a014c
                   01320132012801
             code
@@ -19953,15 +19953,15 @@
                               0 MAKE_CELL                0 (self)
                               2 MAKE_CELL                6 (db)
                
                1749           4 RESUME                   0
                
                1750           6 LOAD_CLOSURE             0 (self)
                               8 BUILD_TUPLE              1
-                             10 LOAD_CONST               1 (<code object checkWrite, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1750>)
+                             10 LOAD_CONST               1 (<code object checkWrite, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1750>)
                              12 MAKE_FUNCTION            8 (closure)
                              14 STORE_FAST               1 (checkWrite)
                
                1760          16 LOAD_GLOBAL              1 (NULL + DAL)
                              28 LOAD_GLOBAL              2 (DEFAULT_URI)
                              40 LOAD_CONST               2 ('all')
                              42 BUILD_LIST               1
@@ -20381,15 +20381,15 @@
                            1818 LOAD_DEREF               6 (db)
                            1820 LOAD_ATTR                5 (tt)
                            1830 PRECALL                  1
                            1834 CALL                     1
                            1844 LOAD_ATTR               11 (select)
                            1854 LOAD_CLOSURE             6 (db)
                            1856 BUILD_TUPLE              1
-                           1858 LOAD_CONST              31 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1835>)
+                           1858 LOAD_CONST              31 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1835>)
                            1860 MAKE_FUNCTION            8 (closure)
                            1862 LOAD_FAST                3 (integrity)
                            1864 LOAD_METHOD             12 (keys)
                            1886 PRECALL                  0
                            1890 CALL                     0
                            1900 GET_ITER
                            1902 PRECALL                  0
@@ -20425,15 +20425,15 @@
                            2086 LOAD_DEREF               6 (db)
                            2088 LOAD_ATTR                6 (t1)
                            2098 PRECALL                  1
                            2102 CALL                     1
                            2112 LOAD_ATTR               11 (select)
                            2122 LOAD_CLOSURE             6 (db)
                            2124 BUILD_TUPLE              1
-                           2126 LOAD_CONST              32 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1838>)
+                           2126 LOAD_CONST              32 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1838>)
                            2128 MAKE_FUNCTION            8 (closure)
                            2130 LOAD_FAST                3 (integrity)
                            2132 LOAD_METHOD             12 (keys)
                            2154 PRECALL                  0
                            2158 CALL                     0
                            2168 GET_ITER
                            2170 PRECALL                  0
@@ -20578,15 +20578,15 @@
                            2828 LOAD_DEREF               6 (db)
                            2830 LOAD_ATTR                5 (tt)
                            2840 PRECALL                  1
                            2844 CALL                     1
                            2854 LOAD_ATTR               11 (select)
                            2864 LOAD_CLOSURE             6 (db)
                            2866 BUILD_TUPLE              1
-                           2868 LOAD_CONST              34 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1863>)
+                           2868 LOAD_CONST              34 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1863>)
                            2870 MAKE_FUNCTION            8 (closure)
                            2872 LOAD_FAST                3 (integrity)
                            2874 LOAD_METHOD             12 (keys)
                            2896 PRECALL                  0
                            2900 CALL                     0
                            2910 GET_ITER
                            2912 PRECALL                  0
@@ -20622,15 +20622,15 @@
                            3096 LOAD_DEREF               6 (db)
                            3098 LOAD_ATTR                6 (t1)
                            3108 PRECALL                  1
                            3112 CALL                     1
                            3122 LOAD_ATTR               11 (select)
                            3132 LOAD_CLOSURE             6 (db)
                            3134 BUILD_TUPLE              1
-                           3136 LOAD_CONST              35 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1866>)
+                           3136 LOAD_CONST              35 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1866>)
                            3138 MAKE_FUNCTION            8 (closure)
                            3140 LOAD_FAST                3 (integrity)
                            3142 LOAD_METHOD             12 (keys)
                            3164 PRECALL                  0
                            3168 CALL                     0
                            3178 GET_ITER
                            3180 PRECALL                  0
@@ -20808,15 +20808,15 @@
                                    34 LOAD_ATTR                1 (_id)
                                    44 LOAD_FAST                3 (rowid)
                                    46 COMPARE_OP               2 (==)
                                    52 STORE_FAST               4 (query)
                      
                      1753          54 LOAD_CLOSURE             1 (table)
                                    56 BUILD_TUPLE              1
-                                   58 LOAD_CONST               1 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1753>)
+                                   58 LOAD_CONST               1 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1753>)
                                    60 MAKE_FUNCTION            8 (closure)
                                    62 LOAD_FAST                2 (data)
                                    64 LOAD_METHOD              2 (keys)
                                    86 PRECALL                  0
                                    90 CALL                     0
                                   100 GET_ITER
                                   102 PRECALL                  0
@@ -20891,24 +20891,24 @@
                                          28 JUMP_BACKWARD           11 (to 8)
                                     >>   30 RETURN_VALUE
                            consts
                            names      ()
                            varnames   ('.0', 'x')
                            freevars   ('table',)
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                            name       '<listcomp>'
                            firstlineno 1753
                            lnotab 0x
                         ()
                      names      ('insert', '_id', 'keys', 'select', 'first', 'assertIsNot', 'assertEqual', 'as_dict', 'delete')
                      varnames   ('db', 'table', 'data', 'rowid', 'query', 'fields', 'row')
                      freevars   ('self',)
                      cellvars   ('table',)
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'checkWrite'
                      firstlineno 1750
                      lnotab 0x06011a01160140014a012c015001
                   'all'
                   ('check_reserved',)
                   'tt'
                   'aa'
@@ -20960,15 +20960,15 @@
                                    38 JUMP_BACKWARD           16 (to 8)
                               >>   40 RETURN_VALUE
                      consts
                      names      ('tt',)
                      varnames   ('.0', 'x')
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<listcomp>'
                      firstlineno 1835
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 2
                      stacksize : 4
@@ -20991,15 +20991,15 @@
                                    38 JUMP_BACKWARD           16 (to 8)
                               >>   40 RETURN_VALUE
                      consts
                      names      ('t1',)
                      varnames   ('.0', 'x')
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<listcomp>'
                      firstlineno 1838
                      lnotab 0x
                   'xb'
                   code
                      argcount  : 1
                      nlocals   : 2
@@ -21023,15 +21023,15 @@
                                    38 JUMP_BACKWARD           16 (to 8)
                               >>   40 RETURN_VALUE
                      consts
                      names      ('tt',)
                      varnames   ('.0', 'x')
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<listcomp>'
                      firstlineno 1863
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 2
                      stacksize : 4
@@ -21054,25 +21054,25 @@
                                    38 JUMP_BACKWARD           16 (to 8)
                               >>   40 RETURN_VALUE
                      consts
                      names      ('t1',)
                      varnames   ('.0', 'x')
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<listcomp>'
                      firstlineno 1866
                      lnotab 0x
                   'aa5'
                   ()
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'dict', 'tt', 't1', 'commit', 'close', 'insert', 'IS_SQLITE', 'select', 'keys', 'first', 'assertIsNot', 'assertEqual', 'as_dict', 'drop')
                varnames   ('self', 'checkWrite', 'data', 'integrity', 'row', 'row2')
                freevars   ()
                cellvars   ('self', 'db')
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testFieldRName'
                firstlineno 1749
                lnotab
                   0x06010a0a2e01180102012001200102fc12061801020120012001020102
                   fb1207220124012401280128032e014e01180126ff120320012401240128
                   0128032e01180102012001200102fc12061801020120012001020102fb12
                   072201220124012401240124012801280210022e01180102012001220102
@@ -21153,24 +21153,24 @@
                   '.storage.db'
                   '.storage.table'
                   '.storage.rname'
                names      ('os', 'path', 'exists', 'unlink')
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'tearDown'
                firstlineno 1886
                lnotab 0x02013e0128013e0128013e012cff
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun', 'testFieldRName', 'tearDown')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestMigrations'
          firstlineno 1713
          lnotab 0x0a010623067f000a
       'TestMigrations'
       code
          argcount  : 0
          nlocals   : 0
@@ -21179,15 +21179,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1895           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestReference')
                         8 STORE_NAME               2 (__qualname__)
          
-         1896          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1896>)
+         1896          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1896>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestReference'
             code
@@ -21570,27 +21570,27 @@
                   ('SET NULL', 'NO ACTION', 'CASCADE')
                   'SET NULL'
                   0
                names      ('connect', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'define_table', 'Field', 'commit', 'tt', 'insert', 'assertEqual', 'id', 'aa', 'update_record', 'name', 'count', 'delete', 'select', 'tearDown')
                varnames   ('self', 'scenarios', 'b', 'ondelete', 'db', 'key', 'x', 'x1', 'y', 'expected_count')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1896
                lnotab
                   0x0201040510012c0128020801380104ff2c03180140ff10032801360136
                   0138010e01360128011a0136017201380140022a015e0176015602020102
                   0102fd060582010c0194022cdb
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestReference'
          firstlineno 1895
          lnotab 0x0a01
       'TestReference'
       code
          argcount  : 0
          nlocals   : 0
@@ -21599,15 +21599,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          1942           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestClientLevelOps')
                         8 STORE_NAME               2 (__qualname__)
          
-         1943          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1943>)
+         1943          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1943>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestClientLevelOps'
             code
@@ -21781,24 +21781,24 @@
                1945          42 LOAD_FAST                1 (db)
                              44 LOAD_METHOD              1 (define_table)
                
                1946          66 LOAD_CONST               1 ('tt')
                
                1947          68 LOAD_GLOBAL              5 (NULL + Field)
                              80 LOAD_CONST               2 ('aa')
-                             82 LOAD_CONST               3 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1947>)
+                             82 LOAD_CONST               3 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1947>)
                              84 MAKE_FUNCTION            0
                              86 KW_NAMES                 4
                              88 PRECALL                  2
                              92 CALL                     2
                
                1948         102 LOAD_GLOBAL              5 (NULL + Field)
                             114 LOAD_CONST               5 ('bb')
                             116 LOAD_CONST               6 ('integer')
-                            118 LOAD_CONST               7 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1948>)
+                            118 LOAD_CONST               7 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1948>)
                             120 MAKE_FUNCTION            0
                             122 KW_NAMES                 8
                             124 PRECALL                  3
                             128 CALL                     3
                
                1945         138 PRECALL                  3
                             142 CALL                     3
@@ -21938,15 +21938,15 @@
                             904 LOAD_CONST              10 (1)
                             906 PRECALL                  2
                             910 CALL                     2
                             920 POP_TOP
                
                1964         922 LOAD_FAST                2 (rows1)
                             924 LOAD_METHOD             11 (find)
-                            946 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1964>)
+                            946 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1964>)
                             948 MAKE_FUNCTION            0
                             950 PRECALL                  1
                             954 CALL                     1
                             964 STORE_FAST               7 (rows6)
                
                1965         966 LOAD_FAST                0 (self)
                             968 LOAD_METHOD              9 (assertEqual)
@@ -21957,15 +21957,15 @@
                            1018 LOAD_CONST              10 (1)
                            1020 PRECALL                  2
                            1024 CALL                     2
                            1034 POP_TOP
                
                1966        1036 LOAD_FAST                3 (rows2)
                            1038 LOAD_METHOD             12 (exclude)
-                           1060 LOAD_CONST              15 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1966>)
+                           1060 LOAD_CONST              15 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1966>)
                            1062 MAKE_FUNCTION            0
                            1064 PRECALL                  1
                            1068 CALL                     1
                            1078 STORE_FAST               8 (rows7)
                
                1967        1080 LOAD_FAST                0 (self)
                            1082 LOAD_METHOD              9 (assertEqual)
@@ -21976,15 +21976,15 @@
                            1132 LOAD_CONST              10 (1)
                            1134 PRECALL                  2
                            1138 CALL                     2
                            1148 POP_TOP
                
                1968        1150 LOAD_FAST                6 (rows5)
                            1152 LOAD_METHOD             13 (sort)
-                           1174 LOAD_CONST              16 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1968>)
+                           1174 LOAD_CONST              16 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1968>)
                            1176 MAKE_FUNCTION            0
                            1178 PRECALL                  1
                            1182 CALL                     1
                            1192 STORE_FAST               9 (rows8)
                
                1969        1194 LOAD_FAST                0 (self)
                            1196 LOAD_METHOD              9 (assertEqual)
@@ -21993,15 +21993,15 @@
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 LOAD_CONST              10 (1)
                            1248 PRECALL                  2
                            1252 CALL                     2
                            1262 POP_TOP
                
-               1971        1264 LOAD_CONST              17 (<code object represent, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 1971>)
+               1971        1264 LOAD_CONST              17 (<code object represent, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 1971>)
                            1266 MAKE_FUNCTION            0
                            1268 STORE_FAST              10 (represent)
                
                1975        1270 LOAD_CONST              18 ('rows_render')
                            1272 LOAD_FAST               10 (represent)
                
                1974        1274 BUILD_MAP                1
@@ -22446,15 +22446,15 @@
                            3812 LOAD_GLOBAL              5 (NULL + Field)
                            3824 LOAD_CONST               2 ('aa')
                            3826 PRECALL                  1
                            3830 CALL                     1
                            3840 LOAD_GLOBAL              5 (NULL + Field)
                            3852 LOAD_ATTR               25 (Virtual)
                            3862 LOAD_CONST               5 ('bb')
-                           3864 LOAD_CONST              32 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2024>)
+                           3864 LOAD_CONST              32 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2024>)
                            3866 MAKE_FUNCTION            0
                            3868 PRECALL                  2
                            3872 CALL                     2
                            3882 PRECALL                  3
                            3886 CALL                     3
                            3896 POP_TOP
                
@@ -22596,15 +22596,15 @@
                      consts
                         None
                         'x'
                      names      ()
                      varnames   ('x', 'r')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 1947
                      lnotab 0x
                   ('represent',)
                   'bb'
                   'integer'
                   code
@@ -22626,15 +22626,15 @@
                      consts
                         None
                         'y'
                      names      ('str',)
                      varnames   ('x', 'r')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 1948
                      lnotab 0x
                   ('type', 'represent')
                   'test'
                   1
                   ('aa', 'bb')
@@ -22655,15 +22655,15 @@
                      consts
                         None
                         'test'
                      names      ('aa',)
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 1964
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 2
@@ -22678,15 +22678,15 @@
                      consts
                         None
                         'test'
                      names      ('aa',)
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 1966
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 1
@@ -22698,15 +22698,15 @@
                                    14 RETURN_VALUE
                      consts
                         None
                      names      ('aa',)
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 1968
                      lnotab 0x
                   code
                      argcount  : 3
                      nlocals   : 3
                      stacksize : 4
@@ -22726,15 +22726,15 @@
                      consts
                         None
                         'z'
                      names      ('str',)
                      varnames   ('f', 'v', 'r')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'represent'
                      firstlineno 1971
                      lnotab 0x0201
                   'rows_render'
                   'foo'
                   'ztest'
                   'z1'
@@ -22760,39 +22760,39 @@
                      consts
                         None
                         ':p'
                      names      ()
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2024
                      lnotab 0x
                   ('aa',)
                names      ('connect', 'define_table', 'Field', 'commit', 'tt', 'insert', 'id', 'select', 'assertNotEqual', 'assertEqual', 'len', 'find', 'exclude', 'sort', 'representers', 'Row', 'render', 'aa', 'bb', 'list', 'compact', 'assertIn', 'assertNotIn', 'max', 'drop', 'Virtual', 'first', 'keys')
                varnames   ('self', 'db', 'rows1', 'rows2', 'rows3', 'rows4', 'rows5', 'rows6', 'rows7', 'rows8', 'represent', 'rows', 'exp1', 'exp2', 'exp3', 'ret', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 1943
                lnotab
                   0x0201280118010201220124fd100528013801560156012c01560156012c
                   010a0146010a0146010a0146012c0146012c0146012c014602060404ff0e
                   03380156023a013afe04053a013afe04053a013afe040460018e01780178
                   016a019a01840184012c0156010e0110012c0136012c010e0110012c012c
                   0290010e0110012c012c0290010e0110012c012c01320270013601560128
                   012c012c012c020e0128012c016a01360136012c01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestClientLevelOps'
          firstlineno 1942
          lnotab 0x0a01
       'TestClientLevelOps'
       code
          argcount  : 0
          nlocals   : 0
@@ -22801,15 +22801,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2042           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestVirtualFields')
                         8 STORE_NAME               2 (__qualname__)
          
-         2043          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2043>)
+         2043          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2043>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestVirtualFields'
             code
@@ -22866,15 +22866,15 @@
                             188 KW_NAMES                 4
                             190 PRECALL                  1
                             194 CALL                     1
                             204 POP_TOP
                
                2049         206 PUSH_NULL
                             208 LOAD_BUILD_CLASS
-                            210 LOAD_CONST               5 (<code object Compute, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2049>)
+                            210 LOAD_CONST               5 (<code object Compute, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2049>)
                             212 MAKE_FUNCTION            0
                             214 LOAD_CONST               6 ('Compute')
                             216 PRECALL                  2
                             220 CALL                     2
                             230 STORE_FAST               2 (Compute)
                
                2053         232 LOAD_FAST                1 (db)
@@ -22926,15 +22926,15 @@
                      code 0x970065005a0164005a02640184005a0364025300
                      2049           0 RESUME                   0
                                     2 LOAD_NAME                0 (__name__)
                                     4 STORE_NAME               1 (__module__)
                                     6 LOAD_CONST               0 ('TestVirtualFields.testRun.<locals>.Compute')
                                     8 STORE_NAME               2 (__qualname__)
                      
-                     2050          10 LOAD_CONST               1 (<code object a_upper, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2050>)
+                     2050          10 LOAD_CONST               1 (<code object a_upper, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2050>)
                                    12 MAKE_FUNCTION            0
                                    14 STORE_NAME               3 (a_upper)
                                    16 LOAD_CONST               2 (None)
                                    18 RETURN_VALUE
                      consts
                         'TestVirtualFields.testRun.<locals>.Compute'
                         code
@@ -22957,44 +22957,44 @@
                                          60 RETURN_VALUE
                            consts
                               None
                            names      ('tt', 'aa', 'upper')
                            varnames   ('row',)
                            freevars   ()
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                            name       'a_upper'
                            firstlineno 2050
                            lnotab 0x0201
                         None
                      names      ('__name__', '__module__', '__qualname__', 'a_upper')
                      varnames   ()
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'Compute'
                      firstlineno 2049
                      lnotab 0x0a01
                   'Compute'
                   0
                   'TEST'
                names      ('connect', 'define_table', 'Field', 'commit', 'tt', 'insert', 'virtualfields', 'append', 'id', 'select', 'first', 'a_upper')
                varnames   ('self', 'db', 'Compute')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2043
                lnotab 0x020128014601280136021a044e01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestVirtualFields'
          firstlineno 2042
          lnotab 0x0a01
       'TestVirtualFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -23003,15 +23003,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2057           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestComputedFields')
                         8 STORE_NAME               2 (__qualname__)
          
-         2058          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2058>)
+         2058          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2058>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestComputedFields'
             code
@@ -23070,15 +23070,15 @@
                             110 LOAD_CONST               4 ('x')
                             112 KW_NAMES                 5
                             114 PRECALL                  2
                             118 CALL                     2
                
                2064         128 LOAD_GLOBAL              5 (NULL + Field)
                             140 LOAD_CONST               6 ('cc')
-                            142 LOAD_CONST               7 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2064>)
+                            142 LOAD_CONST               7 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2064>)
                             144 MAKE_FUNCTION            0
                             146 KW_NAMES                 8
                             148 PRECALL                  2
                             152 CALL                     2
                
                2060         162 PRECALL                  4
                             166 CALL                     4
@@ -23139,23 +23139,23 @@
                             506 LOAD_CONST               4 ('x')
                             508 KW_NAMES                 5
                             510 PRECALL                  2
                             514 CALL                     2
                
                2077         524 LOAD_GLOBAL              5 (NULL + Field)
                             536 LOAD_CONST               6 ('cc')
-                            538 LOAD_CONST              12 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2077>)
+                            538 LOAD_CONST              12 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2077>)
                             540 MAKE_FUNCTION            0
                             542 KW_NAMES                 8
                             544 PRECALL                  2
                             548 CALL                     2
                
                2078         558 LOAD_GLOBAL              5 (NULL + Field)
                             570 LOAD_CONST              13 ('dd')
-                            572 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2078>)
+                            572 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2078>)
                             574 MAKE_FUNCTION            0
                             576 KW_NAMES                 8
                             578 PRECALL                  2
                             582 CALL                     2
                
                2073         592 PRECALL                  5
                             596 CALL                     5
@@ -23214,15 +23214,15 @@
                                    30 RETURN_VALUE
                      consts
                         None
                      names      ('aa', 'bb')
                      varnames   ('r',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2064
                      lnotab 0x
                   ('compute',)
                   'z'
                   ('aa',)
                   'zx'
@@ -23243,15 +23243,15 @@
                                    30 RETURN_VALUE
                      consts
                         None
                      names      ('aa', 'bb')
                      varnames   ('r',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2077
                      lnotab 0x
                   'dd'
                   code
                      argcount  : 1
                      nlocals   : 1
@@ -23269,35 +23269,35 @@
                                    30 RETURN_VALUE
                      consts
                         None
                      names      ('bb', 'cc')
                      varnames   ('r',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2078
                      lnotab 0x
                   'xzx'
                names      ('connect', 'define_table', 'Field', 'commit', 'tt', 'insert', 'assertEqual', 'cc', 'drop', 'dd')
                varnames   ('self', 'db', 'id')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2058
                lnotab
                   0x02012801180102011c01200122fc1006280136014c0132012803180102
                   011c012001220122fb100728013601
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestComputedFields'
          firstlineno 2057
          lnotab 0x0a01
       'TestComputedFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -23306,15 +23306,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2085           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestCommonFilters')
                         8 STORE_NAME               2 (__qualname__)
          
-         2086          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2086>)
+         2086          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2086>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestCommonFilters'
             code
@@ -23506,15 +23506,15 @@
                             540 KW_NAMES                11
                             542 PRECALL                  2
                             546 CALL                     2
                             556 POP_TOP
                
                2096         558 LOAD_CLOSURE             5 (db)
                             560 BUILD_TUPLE              1
-                            562 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2096>)
+                            562 LOAD_CONST              14 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2096>)
                             564 MAKE_FUNCTION            8 (closure)
                             566 LOAD_DEREF               5 (db)
                             568 LOAD_ATTR                3 (t1)
                             578 STORE_ATTR               6 (_common_filter)
                
                2097         588 LOAD_FAST                0 (self)
                             590 LOAD_METHOD              7 (assertEqual)
@@ -23611,15 +23611,15 @@
                            1220 LOAD_CONST               9 (3)
                            1222 PRECALL                  2
                            1226 CALL                     2
                            1236 POP_TOP
                
                2103        1238 LOAD_CLOSURE             5 (db)
                            1240 BUILD_TUPLE              1
-                           1242 LOAD_CONST              16 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2103>)
+                           1242 LOAD_CONST              16 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2103>)
                            1244 MAKE_FUNCTION            8 (closure)
                            1246 LOAD_DEREF               5 (db)
                            1248 LOAD_ATTR                5 (t2)
                            1258 STORE_ATTR               6 (_common_filter)
                
                2104        1268 LOAD_FAST                0 (self)
                            1270 LOAD_METHOD              7 (assertEqual)
@@ -23759,15 +23759,15 @@
                            2160 KW_NAMES                11
                            2162 PRECALL                  2
                            2166 CALL                     2
                            2176 POP_TOP
                
                2116        2178 LOAD_CLOSURE             5 (db)
                            2180 BUILD_TUPLE              1
-                           2182 LOAD_CONST              18 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2116>)
+                           2182 LOAD_CONST              18 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2116>)
                            2184 MAKE_FUNCTION            8 (closure)
                            2186 LOAD_DEREF               5 (db)
                            2188 LOAD_ATTR                5 (t2)
                            2198 STORE_ATTR               6 (_common_filter)
                
                2117        2208 LOAD_FAST                0 (self)
                            2210 LOAD_METHOD              7 (assertEqual)
@@ -23871,15 +23871,15 @@
                      consts
                         None
                         1
                      names      ('t1', 'aa')
                      varnames   ('q',)
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2096
                      lnotab 0x
                   ('left',)
                   code
                      argcount  : 1
                      nlocals   : 1
@@ -23900,15 +23900,15 @@
                      consts
                         None
                         6
                      names      ('t2', 'aa')
                      varnames   ('q',)
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2103
                      lnotab 0x
                   0
                   code
                      argcount  : 1
                      nlocals   : 1
@@ -23929,35 +23929,35 @@
                      consts
                         None
                         6
                      names      ('t2', 'aa')
                      varnames   ('q',)
                      freevars   ('db',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2116
                      lnotab 0x
                names      ('connect', 'define_table', 'Field', 't1', 'insert', 't2', '_common_filter', 'assertEqual', 'count', 'b', 'id', 'len', 'select', 'on', 'delete', 'update')
                varnames   ('self', 'i1', 'i2', 'i3', 'q')
                freevars   ()
                cellvars   ('db',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2086
                lnotab
                   0x04012801480170013601360136013801380138011e016c016c01340162
                   016201ba011e0162016201ba026c0144016c0118016c02380138011e016c
                   0148016c011801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestCommonFilters'
          firstlineno 2085
          lnotab 0x0a01
       'TestCommonFilters'
       code
          argcount  : 0
          nlocals   : 0
@@ -23966,15 +23966,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2124           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestImportExportFields')
                         8 STORE_NAME               2 (__qualname__)
          
-         2125          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2125>)
+         2125          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2125>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestImportExportFields'
             code
@@ -24222,26 +24222,26 @@
                   10
                   ('name',)
                   ('friend', 'name')
                names      ('connect', 'define_table', 'Field', 'person', 'range', 'pet', 'delete', 'insert', 'str', 'commit', 'StringIO', 'export_to_csv_file', 'getvalue', 'import_from_csv_file', 'id', 'friend', 'name', 'count')
                varnames   ('self', 'db', 'n', 'k', 'id', 'stream')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2125
                lnotab
                   0x0201280146016e012201440144012201500154fe020328011c012a0144
                   01440142012a02aa0102ff
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestImportExportFields'
          firstlineno 2124
          lnotab 0x0a01
       'TestImportExportFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -24250,15 +24250,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2148           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestImportExportUuidFields')
                         8 STORE_NAME               2 (__qualname__)
          
-         2149          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2149>)
+         2149          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2149>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestImportExportUuidFields'
             code
@@ -24509,26 +24509,26 @@
                   ('name', 'uuid')
                   ('friend', 'name')
                   20
                names      ('connect', 'define_table', 'Field', 'person', 'range', 'pet', 'delete', 'insert', 'str', 'commit', 'StringIO', 'export_to_csv_file', 'getvalue', 'import_from_csv_file', 'count', 'id', 'friend', 'name')
                varnames   ('self', 'db', 'n', 'k', 'id', 'stream')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2149
                lnotab
                   0x0201280162016e0122014401440122016c0154fe020328011c012a0142
                   012a015002aa0102ff
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestImportExportUuidFields'
          firstlineno 2148
          lnotab 0x0a01
       'TestImportExportUuidFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -24537,15 +24537,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2171           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestDALDictImportExport')
                         8 STORE_NAME               2 (__qualname__)
          
-         2172          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2172>)
+         2172          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2172>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestDALDictImportExport'
             code
@@ -25357,30 +25357,30 @@
                   'tablename'
                   'fieldname'
                   ()
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'person', 'as_dict', 'isinstance', 'dict', 'basestring', 'len', 'name', 'type', 'default', 'tables', 'hasattr', 'pet', 'Table', 'friend', 'drop', 'commit', 'as_json', 'json', 'loads', 'uuid', 'close', 'staff', 'tvshow', 'rating', 'insert', 'select', 'first', 'id', 'str', 'fields')
                varnames   ('self', 'db', 'dbdict', 'uri', 'db2', 'dbjson', 'db3', 'mpfc', 'dbdict4', 'db4', 'dbdict5', 'db5', 'dbdict6', 'db6')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2172
                lnotab
                   0x02012e0166016e012e012e011001320136014e016a016a021801580158
                   016c013201280228022c0154013c014e014c0132012801280204020c0302
                   02080108fe02fe040802020801080108fd02fe04f802fe06141801160116
                   012e023001340134fd020402fc0c057e017e02320132012802120118011a
                   0126030c0206020202060108fe02fe04fe02fe060d18024001220236017e
                   023201320128022801280128012801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestDALDictImportExport'
          firstlineno 2171
          lnotab 0x0a01
       'TestDALDictImportExport'
       code
          argcount  : 0
          nlocals   : 0
@@ -25389,15 +25389,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2277           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestSelectAsDict')
                         8 STORE_NAME               2 (__qualname__)
          
-         2278          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2278>)
+         2278          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2278>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testSelect)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestSelectAsDict'
             code
@@ -25657,27 +25657,27 @@
                   ('as_ordered_dict',)
                   ('id', 'b_field', 'a_field')
                   'SELECT id, b_field, a_field FROM a_table'
                names      ('connect', 'IS_ORACLE', 'define_table', 'Field', 'a_table', 'insert', 'executesql', 'assertEqual', 'list', 'keys')
                varnames   ('self', 'db', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelect'
                firstlineno 2278
                lnotab
                   0x020128010e02180102011c011cfd10053801180104ff12034401180104
                   ff120344017e03180102011c011cfd10053801180104ff12034401180104
                   ff12034401
             None
          names      ('__name__', '__module__', '__qualname__', 'testSelect')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestSelectAsDict'
          firstlineno 2277
          lnotab 0x0a01
       'TestSelectAsDict'
       code
          argcount  : 0
          nlocals   : 0
@@ -25686,15 +25686,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          2316           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestExecuteSQL')
                         8 STORE_NAME               2 (__qualname__)
          
-         2317          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2317>)
+         2317          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2317>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testSelect)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestExecuteSQL'
             code
@@ -25923,15 +25923,15 @@
                
                2341         704 LOAD_FAST                0 (self)
                             706 LOAD_METHOD             11 (assertTrue)
                
                2342         728 LOAD_GLOBAL             25 (NULL + all)
                             740 LOAD_CLOSURE             2 (rtn)
                             742 BUILD_TUPLE              1
-                            744 LOAD_CONST              16 (<code object <genexpr>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2342>)
+                            744 LOAD_CONST              16 (<code object <genexpr>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2342>)
                             746 MAKE_FUNCTION            8 (closure)
                             748 LOAD_CONST              13 (('id', 'b_field', 'a_field'))
                             750 GET_ITER
                             752 PRECALL                  0
                             756 CALL                     0
                             766 PRECALL                  1
                             770 CALL                     1
@@ -25970,15 +25970,15 @@
                
                2352         924 LOAD_FAST                0 (self)
                             926 LOAD_METHOD             11 (assertTrue)
                
                2353         948 LOAD_GLOBAL             25 (NULL + all)
                             960 LOAD_CLOSURE             2 (rtn)
                             962 BUILD_TUPLE              1
-                            964 LOAD_CONST              19 (<code object <genexpr>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2353>)
+                            964 LOAD_CONST              19 (<code object <genexpr>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2353>)
                             966 MAKE_FUNCTION            8 (closure)
                             968 LOAD_CONST              13 (('id', 'b_field', 'a_field'))
                             970 GET_ITER
                             972 PRECALL                  0
                             976 CALL                     0
                             986 PRECALL                  1
                             990 CALL                     1
@@ -26162,15 +26162,15 @@
                
                2385        1956 LOAD_FAST                0 (self)
                            1958 LOAD_METHOD             11 (assertTrue)
                
                2386        1980 LOAD_GLOBAL             25 (NULL + all)
                            1992 LOAD_CLOSURE             2 (rtn)
                            1994 BUILD_TUPLE              1
-                           1996 LOAD_CONST              26 (<code object <genexpr>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2386>)
+                           1996 LOAD_CONST              26 (<code object <genexpr>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2386>)
                            1998 MAKE_FUNCTION            8 (closure)
                            2000 LOAD_CONST              13 (('id', 'b_field', 'a_field'))
                            2002 GET_ITER
                            2004 PRECALL                  0
                            2008 CALL                     0
                            2018 PRECALL                  1
                            2022 CALL                     1
@@ -26209,15 +26209,15 @@
                
                2396        2176 LOAD_FAST                0 (self)
                            2178 LOAD_METHOD             11 (assertTrue)
                
                2397        2200 LOAD_GLOBAL             25 (NULL + all)
                            2212 LOAD_CLOSURE             2 (rtn)
                            2214 BUILD_TUPLE              1
-                           2216 LOAD_CONST              27 (<code object <genexpr>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2397>)
+                           2216 LOAD_CONST              27 (<code object <genexpr>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2397>)
                            2218 MAKE_FUNCTION            8 (closure)
                            2220 LOAD_CONST              13 (('id', 'b_field', 'a_field'))
                            2222 GET_ITER
                            2224 PRECALL                  0
                            2228 CALL                     0
                            2238 PRECALL                  1
                            2242 CALL                     1
@@ -26324,15 +26324,15 @@
                      consts
                         0
                         None
                      names      ('keys',)
                      varnames   ('.0', 'x')
                      freevars   ('rtn',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<genexpr>'
                      firstlineno 2342
                      lnotab 0x
                   ('a_table.id', 'a_table.b_field', 'a_table.a_field')
                   ('fields', 'colnames')
                   code
                      argcount  : 1
@@ -26368,15 +26368,15 @@
                      consts
                         0
                         None
                      names      ('keys',)
                      varnames   ('.0', 'x')
                      freevars   ('rtn',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<genexpr>'
                      firstlineno 2353
                      lnotab 0x
                   'select COUNT(*) from "a_table"'
                   'foo'
                   1
                   False
@@ -26416,15 +26416,15 @@
                      consts
                         0
                         None
                      names      ('keys',)
                      varnames   ('.0', 'x')
                      freevars   ('rtn',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<genexpr>'
                      firstlineno 2386
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 2
                      stacksize : 4
@@ -26458,39 +26458,39 @@
                      consts
                         0
                         None
                      names      ('keys',)
                      varnames   ('.0', 'x')
                      freevars   ('rtn',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<genexpr>'
                      firstlineno 2397
                      lnotab 0x
                   'select COUNT(*) from a_table'
                names      ('IS_ORACLE', 'connect', 'DEFAULT_URI', 'define_table', 'Field', 'a_table', 'insert', 'executesql', 'assertEqual', 'list', 'keys', 'assertTrue', 'all', 'b_field', 'id', 'count', 'foo')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ('rtn',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelect'
                firstlineno 2317
                lnotab
                   0x040110023801180102011c011cfd10053801180104ff12034401180104
                   ff1203440144017a0218010eff1203180134ff10034202180102010c0106
                   fd1206180134ff10034201180102013c0104fd1205420210013801180102
                   011c011cfd10053801180104ff12034401180104ff1203440144017a0218
                   010eff1203180134ff10034202180102010c0106fd1206180134ff100342
                   01180102013c0104fd120546d6
             None
          names      ('__name__', '__module__', '__qualname__', 'testSelect')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestExecuteSQL'
          firstlineno 2316
          lnotab 0x0a01
       'TestExecuteSQL'
       code
          argcount  : 0
          nlocals   : 0
@@ -26499,19 +26499,19 @@
          code 0x970065005a0164005a02640184005a03640284005a0464035300
          2408           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestRNameTable')
                         8 STORE_NAME               2 (__qualname__)
          
-         2411          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2411>)
+         2411          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2411>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testSelect)
          
-         2556          16 LOAD_CONST               2 (<code object testJoin, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2556>)
+         2556          16 LOAD_CONST               2 (<code object testJoin, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2556>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testJoin)
                        22 LOAD_CONST               3 (None)
                        24 RETURN_VALUE
          consts
             'TestRNameTable'
             code
@@ -27974,15 +27974,15 @@
                   'Selina'
                   ('name', 'father', 'mother')
                   ('left', 'orderby')
                names      ('connect', 'IS_ORACLE', 'define_table', 'Field', 'easy_name', 'insert', 'assertEqual', 'id', 'a_field', 'select', 'len', 'delete', 'count', 'update', 'avg', 'person', 'pet', 'friend', 'name', 'on', '_select', 'belongs', 'as_dict', 'as_list', 'isempty', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'pet_farm', 'with_alias', 'father', 'mother')
                varnames   ('self', 'db', 'rname', 'rtn', 'avg', 'michael', 'john', 'luke', 'phippo', 'dunstin', 'gertie', 'subq', 'key', 'minali', 'osbert', 'selina', 'father', 'mother')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelect'
                firstlineno 2411
                lnotab
                   0x0201280104010e0204014a01360136015601460142014201360156012c
                   0156012c013601360156012c015a0156012c0156012c013c015801440104
                   01180140ff1203040118013eff12033201360136033802380138029c0146
                   014c014c014c014c014c014c014c014c034601300162fe12044c014c014c
@@ -29083,15 +29083,15 @@
                   'skipper'
                   ('name', 'ownerperson')
                   'person.name'
                names      ('connect', 'define_table', 'Field', 't1', 'insert', 't2', 'assertEqual', 'len', 'id', 'b', 'select', 'aa', 'ALL', 'on', 'count', '_extra', 'drop', 'person', 'name', 'dog', 'ownerperson', 'first', '_referenced_by')
                varnames   ('self', 'db', 'rname', 'rname2', 'i1', 'i2', 'i3', 'id', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testJoin'
                firstlineno 2556
                lnotab
                   0x02012801040104014a0172013601360136013801380138011801b6ff10
                   031801bcff10031801bcff100318010c01280116011601620130fc10ff0e
                   0802f7100b18011201160116011601620130fc100502fa0a07140102f710
                   0b18011201160116011601620130fc100502fa0a07140102f7100b180112
@@ -29103,15 +29103,15 @@
                   0602f90a0844f80a0902f6100c320132024a013601360118013eff120338
                   018e014c0138013201
             None
          names      ('__name__', '__module__', '__qualname__', 'testSelect', 'testJoin')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestRNameTable'
          firstlineno 2408
          lnotab 0x0a03067f0012
       'TestRNameTable'
       code
          argcount  : 0
          nlocals   : 0
@@ -29122,31 +29122,31 @@
             0484005a06640584005a0764065300
          2697           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestRNameFields')
                         8 STORE_NAME               2 (__qualname__)
          
-         2699          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2699>)
+         2699          10 LOAD_CONST               1 (<code object testSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2699>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testSelect)
          
-         2853          16 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2853>)
+         2853          16 LOAD_CONST               2 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2853>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testRun)
          
-         2931          22 LOAD_CONST               3 (<code object testInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2931>)
+         2931          22 LOAD_CONST               3 (<code object testInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2931>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (testInsert)
          
-         2946          28 LOAD_CONST               4 (<code object testJoin, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2946>)
+         2946          28 LOAD_CONST               4 (<code object testJoin, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2946>)
                        30 MAKE_FUNCTION            0
                        32 STORE_NAME               6 (testJoin)
          
-         3088          34 LOAD_CONST               5 (<code object testTFK, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3088>)
+         3088          34 LOAD_CONST               5 (<code object testTFK, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3088>)
                        36 MAKE_FUNCTION            0
                        38 STORE_NAME               7 (testTFK)
                        40 LOAD_CONST               6 (None)
                        42 RETURN_VALUE
          consts
             'TestRNameFields'
             code
@@ -30676,15 +30676,15 @@
                   'Selina'
                   ('name', 'father', 'mother')
                   ('left', 'orderby')
                names      ('connect', 'define_table', 'Field', 'easy_name', 'insert', 'assertEqual', 'id', 'a_field', 'select', 'len', 'delete', 'count', 'update', 'avg', 'rating', 'person', 'pet', 'friend', 'name', 'on', '_select', 'belongs', 'as_dict', 'as_list', 'isempty', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'pet_farm', 'with_alias', 'father', 'mother')
                varnames   ('self', 'db', 'rname', 'rname2', 'rtn', 'avg', 'michael', 'john', 'luke', 'phippo', 'dunstin', 'gertie', 'subq', 'key', 'minali', 'osbert', 'selina', 'father', 'mother')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelect'
                firstlineno 2699
                lnotab
                   0x020128010401040118010201200124fd10053601360156014601420142
                   01360156012c0156012c013601360156012c015a0156012c0156012c013c
                   01580144023c0158014402040118010201220122011cfc10060401180140
                   ff10033201360136033802380138029c0146014c014c014c014c014c014c
@@ -31461,25 +31461,25 @@
                            3754 CALL                     2
                            3764 PRECALL                  1
                            3768 CALL                     1
                            3778 POP_TOP
                
                2919        3780 LOAD_GLOBAL              5 (NULL + Field)
                            3792 LOAD_ATTR               16 (Virtual)
-                           3802 LOAD_CONST              28 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2919>)
+                           3802 LOAD_CONST              28 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2919>)
                            3804 MAKE_FUNCTION            0
                            3806 PRECALL                  1
                            3810 CALL                     1
                            3820 LOAD_FAST                1 (db)
                            3822 LOAD_ATTR                4 (tt)
                            3832 STORE_ATTR              17 (b)
                
                2920        3842 LOAD_GLOBAL              5 (NULL + Field)
                            3854 LOAD_ATTR               18 (Lazy)
-                           3864 LOAD_CONST              29 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 2920>)
+                           3864 LOAD_CONST              29 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 2920>)
                            3866 MAKE_FUNCTION            0
                            3868 PRECALL                  1
                            3872 CALL                     1
                            3882 LOAD_FAST                1 (db)
                            3884 LOAD_ATTR                4 (tt)
                            3894 STORE_ATTR              19 (c)
                
@@ -31625,15 +31625,15 @@
                                    24 RETURN_VALUE
                      consts
                         None
                      names      ('tt', 'aa')
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2919
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 1
@@ -31646,25 +31646,25 @@
                                    24 RETURN_VALUE
                      consts
                         None
                      names      ('tt', 'aa')
                      varnames   ('row',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 2920
                      lnotab 0x
                   'time'
                   '11:30'
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'IS_ORACLE', 'select', 'aa', 'drop', 'datetime', 'date', 'today', 'assertTrue', 'assertFalse', 'hasattr', 'Virtual', 'b', 'Lazy', 'c', 'time')
                varnames   ('self', 'db', 'rname', 'ft', 't0', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 2853
                lnotab
                   0x02012801040108014e015e010e018c0134014e015e018c0132014e015e
                   018c0132014e015e018c0132010e014e015e018c01320118015eff10033c
                   015e018c013201180102015cfe1004160102010201020102010201020102
                   f910095e018c035a014c0156015c015c015c013601380138013e012e012e
@@ -31935,15 +31935,15 @@
                   '2'
                   True
                   False
                names      ('connect', 'define_table', 'Field', 'assertEqual', 'tt', 'insert', 'aa', 'count', 'isempty', 'update', 'delete')
                varnames   ('self', 'db', 'rname')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testInsert'
                firstlineno 2931
                lnotab 0x0201280104014a015e015e015e017e017e0182017e017e017e01
             code
                argcount  : 1
                nlocals   : 9
                stacksize : 12
@@ -33042,15 +33042,15 @@
                   'skipper'
                   ('name', 'ownerperson')
                   'person.name'
                names      ('connect', 'define_table', 'Field', 't1', 'insert', 't2', 'assertEqual', 'len', 'id', 'b', 'select', 'aa', 'ALL', 'on', 'count', '_extra', 'drop', 'person', 'name', 'dog', 'ownerperson', 'first', '_referenced_by')
                varnames   ('self', 'db', 'rname', 'rname2', 'i1', 'i2', 'i3', 'id', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testJoin'
                firstlineno 2946
                lnotab
                   0x02012801040104014a0176013601360136013801380138011801b6ff10
                   031801bcff10031801bcff100318010c01280116011601620130fc10ff0e
                   0802f7100b18011201160116011601620130fc100502fa0a07140102f710
                   0b18011201160116011601620130fc100502fa0a07140102f7100b180112
@@ -33331,26 +33331,26 @@
                   30
                   ('ref1', 'ref2')
                   0
                names      ('connect', '_adapter', 'types', 'skipTest', 'define_table', 'Field', 't1', 'id1', 'id2', 'insert', 't2', 'ref1', 'ref2', 'select', 'ALL', 'assertEqual', 'len')
                varnames   ('self', 'db', 'query', 'result')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testTFK'
                firstlineno 3088
                lnotab
                   0x020128011c012a011801020124012201200106fb120718010201360136
                   fd10053a013a0138016a015001460144014401
             None
          names      ('__name__', '__module__', '__qualname__', 'testSelect', 'testRun', 'testInsert', 'testJoin', 'testTFK')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestRNameFields'
          firstlineno 2697
          lnotab 0x0a02067f001b064e060f067f000f
       'TestRNameFields'
       code
          argcount  : 0
          nlocals   : 0
@@ -33361,23 +33361,23 @@
             045300
          3115           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestQuoting')
                         8 STORE_NAME               2 (__qualname__)
          
-         3117          10 LOAD_CONST               1 (<code object testCase, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3117>)
+         3117          10 LOAD_CONST               1 (<code object testCase, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3117>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testCase)
          
-         3158          16 LOAD_CONST               2 (<code object testPKFK, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3158>)
+         3158          16 LOAD_CONST               2 (<code object testPKFK, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3158>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testPKFK)
          
-         3203          22 LOAD_CONST               3 (<code object testPKFK2, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3203>)
+         3203          22 LOAD_CONST               3 (<code object testPKFK2, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3203>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (testPKFK2)
                        28 LOAD_CONST               4 (None)
                        30 RETURN_VALUE
          consts
             'TestQuoting'
             code
@@ -33716,15 +33716,15 @@
                   'sqlite:'
                   'Column names in each table must be unique'
                   ('a_a', 'a_A')
                names      ('connect', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'define_table', 'Field', 'int', 't0', 'id', 'b', 'B', 'select', 'assertEqual', 'words', 'drop', 'Exception', 'rollback', 'args', 'dict', 'a_a', 'a_A')
                varnames   ('self', 'db', 'key', 't0', 't1', 'blather', 'r', 'e')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testCase'
                firstlineno 3117
                lnotab
                   0x02012e0128020801380104ff2c044801660204010e0142026a024c0228
                   012803020166011202500128010c011e0128010c010cf8080a28024201
             code
                argcount  : 1
@@ -34039,15 +34039,15 @@
                   't5'
                   'reference no_table_wrong_reference'
                   'cascade'
                names      ('connect', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'define_table', 'Field', 'Code', 'Exception', 'assertTrue', 'isinstance', 'KeyError', 'drop')
                varnames   ('self', 'db', 'key', 't0', 't2', 't3', 't4', 't5', 'e')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testPKFK'
                firstlineno 3158
                lnotab
                   0x02032c0128020801380104ff2c075001640118014eff1203180144ff12
                   0402011801020120011e0104fc1606120162ff080328022801280128012c
                   022a0128012801
             code
@@ -34359,27 +34359,27 @@
                   'part_rev.part'
                   ('mssql', 'sqlite')
                   'cascade'
                names      ('connect', 'DEFAULT_URI', 'startswith', '_adapter', 'types', 'replace', 'define_table', 'Field', 'object_', 'insert', 'part', 'part_rev', 'id', 'select', 'assertEqual', 'len', 'drop')
                varnames   ('self', 'db', 'key', 't0', 't1', 't2', 'id', 'id_rev', 'result')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testPKFK2'
                firstlineno 3203
                lnotab
                   0x02032c0128020801380104ff2c044801180124ff1203180102011e011e
                   011e0104fb12073201360132013a016a014601440144022802280128012c
                   022a012a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testCase', 'testPKFK', 'testPKFK2')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestQuoting'
          firstlineno 3115
          lnotab 0x0a020629062d
       'TestQuoting'
       code
          argcount  : 0
          nlocals   : 0
@@ -34391,15 +34391,15 @@
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestTableAndFieldCase')
                         8 STORE_NAME               2 (__qualname__)
          
          3246          10 LOAD_CONST               1 ('\n    at the Python level we should not allow db.C and db.c because of .table conflicts on windows\n    but it should be possible to map two different names into distinct tables "c" and "C" at the Python level\n    By default Python models names should be mapped into lower case table names and assume case insensitivity.\n    ')
                        12 STORE_NAME               3 (__doc__)
          
-         3252          14 LOAD_CONST               2 (<code object testme, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3252>)
+         3252          14 LOAD_CONST               2 (<code object testme, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3252>)
                        16 MAKE_FUNCTION            0
                        18 STORE_NAME               4 (testme)
                        20 LOAD_CONST               3 (None)
                        22 RETURN_VALUE
          consts
             'TestTableAndFieldCase'
             '\n    at the Python level we should not allow db.C and db.c because of .table conflicts on windows\n    but it should be possible to map two different names into distinct tables "c" and "C" at the Python level\n    By default Python models names should be mapped into lower case table names and assume case insensitivity.\n    '
@@ -34415,24 +34415,24 @@
                               4 RETURN_VALUE
                consts
                   None
                names      ()
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testme'
                firstlineno 3252
                lnotab 0x0201
             None
          names      ('__name__', '__module__', '__qualname__', '__doc__', 'testme')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestTableAndFieldCase'
          firstlineno 3245
          lnotab 0x0a010406
       'TestTableAndFieldCase'
       code
          argcount  : 0
          nlocals   : 0
@@ -34444,15 +34444,15 @@
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestQuotesByDefault')
                         8 STORE_NAME               2 (__qualname__)
          
          3257          10 LOAD_CONST               1 ('\n    all default tables names should be quoted unless an explicit mapping has been given for a table.\n    ')
                        12 STORE_NAME               3 (__doc__)
          
-         3261          14 LOAD_CONST               2 (<code object testme, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3261>)
+         3261          14 LOAD_CONST               2 (<code object testme, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3261>)
                        16 MAKE_FUNCTION            0
                        18 STORE_NAME               4 (testme)
                        20 LOAD_CONST               3 (None)
                        22 RETURN_VALUE
          consts
             'TestQuotesByDefault'
             '\n    all default tables names should be quoted unless an explicit mapping has been given for a table.\n    '
@@ -34468,24 +34468,24 @@
                               4 RETURN_VALUE
                consts
                   None
                names      ()
                varnames   ('self',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testme'
                firstlineno 3261
                lnotab 0x0201
             None
          names      ('__name__', '__module__', '__qualname__', '__doc__', 'testme')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestQuotesByDefault'
          firstlineno 3256
          lnotab 0x0a010404
       'TestQuotesByDefault'
       code
          argcount  : 0
          nlocals   : 0
@@ -34508,15 +34508,15 @@
                        12 LOAD_NAME                3 (unittest)
                        14 LOAD_ATTR                4 (skipIf)
                        24 LOAD_CONST               1 (True)
                        26 LOAD_CONST               2 ('WIP')
                        28 PRECALL                  2
                        32 CALL                     2
          
-         3267          42 LOAD_CONST               3 (<code object testGeometry, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3266>)
+         3267          42 LOAD_CONST               3 (<code object testGeometry, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3266>)
                        44 MAKE_FUNCTION            0
          
          3266          46 PRECALL                  0
                        50 CALL                     0
          
          3267          60 STORE_NAME               5 (testGeometry)
          
@@ -34524,15 +34524,15 @@
                        64 LOAD_NAME                3 (unittest)
                        66 LOAD_ATTR                4 (skipIf)
                        76 LOAD_CONST               1 (True)
                        78 LOAD_CONST               2 ('WIP')
                        80 PRECALL                  2
                        84 CALL                     2
          
-         3308          94 LOAD_CONST               4 (<code object testGeometryCase, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3307>)
+         3308          94 LOAD_CONST               4 (<code object testGeometryCase, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3307>)
                        96 MAKE_FUNCTION            0
          
          3307          98 PRECALL                  0
                       102 CALL                     0
          
          3308         112 STORE_NAME               6 (testGeometryCase)
          
@@ -34540,15 +34540,15 @@
                       116 LOAD_NAME                3 (unittest)
                       118 LOAD_ATTR                4 (skipIf)
                       128 LOAD_CONST               1 (True)
                       130 LOAD_CONST               2 ('WIP')
                       132 PRECALL                  2
                       136 CALL                     2
          
-         3321         146 LOAD_CONST               5 (<code object testGisMigration, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3320>)
+         3321         146 LOAD_CONST               5 (<code object testGisMigration, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3320>)
                       148 MAKE_FUNCTION            0
          
          3320         150 PRECALL                  0
                       154 CALL                     0
          
          3321         164 STORE_NAME               7 (testGisMigration)
                       166 LOAD_CONST               6 (None)
@@ -35001,15 +35001,15 @@
                   (0, 2)
                   ('polygon',)
                   'POLYGON((0 0,2 0,2 2,0 2,0 0))'
                names      ('pydal', 'geoLine', 'geoPoint', 'geoPolygon', 'IS_POSTGRESQL', 'connect', 'define_table', 'Field', 'insert', 't0', 'id', 'select', 'point', 'st_astext', 'first', 'assertEqual', 't1', 'line', 't2', 'polygon', 'st_intersects', 'st_contains', 'count', 'st_x', 'st_y')
                varnames   ('self', 'geoLine', 'geoPoint', 'geoPolygon', 'db', 't0', 't1', 't2', 'text', 'query', 'output', 'n', 'x', 'y', 'point')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testGeometry'
                firstlineno 3266
                lnotab
                   0x020214020e0104012801480148014801400228015e015efe0aff02052c
                   014002eeff02032c01460228015e015efe0aff02052c01480194012c0148
                   013a012c01320132016c013801
             code
@@ -35116,15 +35116,15 @@
                   ('point',)
                   2
                   ('Point',)
                names      ('pydal', 'geoLine', 'geoPoint', 'geoPolygon', 'IS_POSTGRESQL', 'connect', 'define_table', 'Field', 'insert')
                varnames   ('self', 'geoLine', 'geoPoint', 'geoPolygon', 'db', 't0')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testGeometryCase'
                firstlineno 3307
                lnotab 0x020214020e0104012c0118013eff10034001
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 10
@@ -35260,26 +35260,26 @@
                   'foo'
                   ('rname',)
                   'New_point'
                names      ('IS_POSTGRESQL', 'DAL', 'DEFAULT_URI', 'define_table', 'Field', 'commit', 'close', 'drop')
                varnames   ('self', 'b', 'db', 't0')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testGisMigration'
                firstlineno 3320
                lnotab
                   0x02020e01040108013001180102011e0122fd1005280128013001480128
                   0128012af3
             None
          names      ('__name__', '__module__', '__qualname__', 'unittest', 'skipIf', 'testGeometry', 'testGeometryCase', 'testGisMigration')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestGis'
          firstlineno 3265
          lnotab 0x0a01200104ff0e010228200104ff0e01020c200104ff0e01
       'TestGis'
       'Only implemented for postgres for now'
       code
          argcount  : 0
@@ -35289,15 +35289,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3340           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestJSON')
                         8 STORE_NAME               2 (__qualname__)
          
-         3342          10 LOAD_CONST               1 (<code object testJSONExpressions, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3342>)
+         3342          10 LOAD_CONST               1 (<code object testJSONExpressions, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3342>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testJSONExpressions)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestJSON'
             code
@@ -35733,27 +35733,27 @@
                   '{"c": {"c0":{"c01": [4]}}}'
                   '{c, c0, c01, 0}'
                   'first'
                names      ('connect', 'hasattr', '_adapter', 'dialect', 'define_table', 'Field', 'insert', 'tj', 'testjson', 'json_key', 'json_key_value', 'select', 'assertEqual', 'len', 'id', 'json_path_value', 'json_contains', 'json_path', 'with_alias', 'first')
                varnames   ('self', 'db', 'tj', 'rec1', 'rec2', 'rows')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testJSONExpressions'
                firstlineno 3342
                lnotab
                   0x020128013401040148011802080102010e0102fc04ff12081802080102
                   010e0102fc04ff1208a201460142017c0146017c01460142017c01460174
                   01460174014601460162ff10034201
             None
          names      ('__name__', '__module__', '__qualname__', 'testJSONExpressions')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestJSON'
          firstlineno 3340
          lnotab 0x0a02
       'TestJSON'
       code
          argcount  : 0
          nlocals   : 0
@@ -35762,15 +35762,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3384           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestSQLCustomType')
                         8 STORE_NAME               2 (__qualname__)
          
-         3385          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3385>)
+         3385          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3385>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestSQLCustomType'
             code
@@ -36021,20 +36021,20 @@
                
                3415         980 LOAD_CONST              15 ('text')
                
                3416         982 LOAD_FAST               10 (native)
                
                3417         984 LOAD_CLOSURE            13 (zlib)
                             986 BUILD_TUPLE              1
-                            988 LOAD_CONST              17 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3417>)
+                            988 LOAD_CONST              17 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3417>)
                             990 MAKE_FUNCTION            8 (closure)
                
                3418         992 LOAD_CLOSURE            13 (zlib)
                             994 BUILD_TUPLE              1
-                            996 LOAD_CONST              18 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3418>)
+                            996 LOAD_CONST              18 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3418>)
                             998 MAKE_FUNCTION            8 (closure)
                
                3414        1000 KW_NAMES                19
                            1002 PRECALL                  4
                            1006 CALL                     4
                            1016 STORE_FAST              11 (compressed)
                
@@ -36093,15 +36093,15 @@
                         None
                         ''
                         1
                      names      ('compress',)
                      varnames   ('x',)
                      freevars   ('zlib',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 3417
                      lnotab 0x
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 3
@@ -36120,37 +36120,37 @@
                                    44 RETURN_VALUE
                      consts
                         None
                      names      ('decompress',)
                      varnames   ('x',)
                      freevars   ('zlib',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<lambda>'
                      firstlineno 3418
                      lnotab 0x
                   ('type', 'native', 'encoder', 'decoder')
                   'cdata'
                names      ('connect', 'pydal.helpers.classes', 'SQLCustomType', 'hasattr', '_adapter', 'types', 'define_table', 'Field', 'insert', 'id', 'select', 'ALL', 'first', 'assertEqual', 'drop', 'zlib', 'IS_ORACLE')
                varnames   ('self', 'db', 'SQLCustomType', 'native_double', 'native_string', 'basic_t', 'basic_t_str', 't0', 'r_id', 'row', 'native', 'compressed', 't1')
                freevars   ()
                cellvars   ('zlib',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3385
                lnotab
                   0x040128010c02040104012a0124012e011a011a0118013eff10032e017c
                   01380138012e017c01380138012802080204010e01040104010201020108
                   0108fc1206
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestSQLCustomType'
          firstlineno 3384
          lnotab 0x0a01
       'TestSQLCustomType'
       code
          argcount  : 0
          nlocals   : 0
@@ -36161,27 +36161,27 @@
             0484005a0664055300
          3426           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestLazy')
                         8 STORE_NAME               2 (__qualname__)
          
-         3427          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3427>)
+         3427          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3427>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
          
-         3434          16 LOAD_CONST               2 (<code object testLazyGetter, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3434>)
+         3434          16 LOAD_CONST               2 (<code object testLazyGetter, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3434>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testLazyGetter)
          
-         3447          22 LOAD_CONST               3 (<code object testRowNone, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3447>)
+         3447          22 LOAD_CONST               3 (<code object testRowNone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3447>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (testRowNone)
          
-         3459          28 LOAD_CONST               4 (<code object testRowExtra, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3459>)
+         3459          28 LOAD_CONST               4 (<code object testRowExtra, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3459>)
                        30 MAKE_FUNCTION            0
                        32 STORE_NAME               6 (testRowExtra)
                        34 LOAD_CONST               5 (None)
                        36 RETURN_VALUE
          consts
             'TestLazy'
             code
@@ -36267,15 +36267,15 @@
                   'name'
                   '1'
                   ('name',)
                names      ('connect', 'define_table', 'Field', 'assertTrue', '_LAZY_TABLES', 'keys', 't0', 'insert', 'assertFalse')
                varnames   ('self', 'db', 't0')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3427
                lnotab 0x02012c0146015c013601
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
@@ -36377,15 +36377,15 @@
                   0
                   ('value',)
                   ('tt_id',)
                names      ('connect', 'define_table', 'Field', 'ttt', 'value', 'writable', 'tt', 'insert')
                varnames   ('self', 'db', 'idd')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testLazyGetter'
                firstlineno 3434
                lnotab 0x02012e014801180102011e011efd100622013601
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 7
@@ -36539,15 +36539,15 @@
                   'integer'
                   ('value',)
                   'tt.value'
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'select', 'ALL', 'first', 'assertEqual', 'value', 'get')
                varnames   ('self', 'db', 'tt', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRowNone'
                firstlineno 3447
                lnotab 0x02012e01480136017e0136014c01380152013801
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 7
@@ -36663,24 +36663,24 @@
                   ('VALUE',)
                   'value'
                   ('value',)
                names      ('connect', 'IS_ORACLE', 'define_table', 'Field', 'tt', 'insert', 'select', 'first', 'assertEqual', 'value')
                varnames   ('self', 'db', 'tt', 'row')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRowExtra'
                firstlineno 3459
                lnotab 0x02012e010e0248013802480136016a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun', 'testLazyGetter', 'testRowNone', 'testRowExtra')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestLazy'
          firstlineno 3426
          lnotab 0x0a010607060d060c
       'TestLazy'
       code
          argcount  : 0
          nlocals   : 0
@@ -36689,15 +36689,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3472           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestRedefine')
                         8 STORE_NAME               2 (__qualname__)
          
-         3473          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3473>)
+         3473          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3473>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestRedefine'
             code
@@ -36843,24 +36843,24 @@
                   'code'
                   'code_a'
                   ('redefine',)
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'assertTrue', 't_a', 'assertFalse', 'close')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3473
                lnotab 0x02013201460138013a014a0138013a0138013a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestRedefine'
          firstlineno 3472
          lnotab 0x0a01
       'TestRedefine'
       code
          argcount  : 0
          nlocals   : 0
@@ -36869,15 +36869,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3486           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestUpdateInsert')
                         8 STORE_NAME               2 (__qualname__)
          
-         3487          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3487>)
+         3487          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3487>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestUpdateInsert'
             code
@@ -37035,24 +37035,24 @@
                   ('name',)
                   'web2py2'
                   0
                names      ('connect', 'define_table', 'Field', 'update_or_insert', 'id', 'assertTrue', 'count', 'name')
                varnames   ('self', 'db', 't0', 'i_id', 'u_id')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3487
                lnotab 0x020128014601400140013201320168017a01
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestUpdateInsert'
          firstlineno 3486
          lnotab 0x0a01
       'TestUpdateInsert'
       code
          argcount  : 0
          nlocals   : 0
@@ -37061,15 +37061,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3499           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestBulkInsert')
                         8 STORE_NAME               2 (__qualname__)
          
-         3500          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3500>)
+         3500          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3500>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestBulkInsert'
             code
@@ -37123,27 +37123,27 @@
                             112 STORE_FAST               2 (t0)
                
                3504         114 LOAD_CONST               3 (0)
                             116 STORE_GLOBAL             3 (ctr)
                
                3506         118 LOAD_CLOSURE             0 (self)
                             120 BUILD_TUPLE              1
-                            122 LOAD_CONST               4 (<code object test_after_insert, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3506>)
+                            122 LOAD_CONST               4 (<code object test_after_insert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3506>)
                             124 MAKE_FUNCTION            8 (closure)
                             126 STORE_FAST               3 (test_after_insert)
                
                3512         128 LOAD_FAST                2 (t0)
                             130 LOAD_ATTR                4 (_after_insert)
                             140 LOAD_METHOD              5 (append)
                             162 LOAD_FAST                3 (test_after_insert)
                             164 PRECALL                  1
                             168 CALL                     1
                             178 POP_TOP
                
-               3513         180 LOAD_CONST               5 (<code object <listcomp>, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3513>)
+               3513         180 LOAD_CONST               5 (<code object <listcomp>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3513>)
                             182 MAKE_FUNCTION            0
                             184 LOAD_GLOBAL             13 (NULL + range)
                             196 LOAD_CONST               3 (0)
                             198 LOAD_CONST               6 (10)
                             200 LOAD_CONST               7 (1)
                             202 PRECALL                  3
                             206 CALL                     3
@@ -37260,15 +37260,15 @@
                         None
                         1
                         True
                      names      ('assertIsInstance', 'OpRow', 'ctr')
                      varnames   ('i', 'r')
                      freevars   ('self',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       'test_after_insert'
                      firstlineno 3506
                      lnotab 0x040136021401
                   code
                      argcount  : 1
                      nlocals   : 2
                      stacksize : 5
@@ -37290,35 +37290,35 @@
                      consts
                         'name'
                         'web2py_%s'
                      names      ()
                      varnames   ('.0', 'pos')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                      name       '<listcomp>'
                      firstlineno 3513
                      lnotab 0x
                   10
                   1
                   'web2py_%s'
                names      ('connect', 'define_table', 'Field', 'ctr', '_after_insert', 'append', 'range', 'bulk_insert', 'assertTrue', 'count', 'len', 'name')
                varnames   ('self', 'db', 't0', 'test_after_insert', 'items', 'pos')
                freevars   ()
                cellvars   ('self',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3500
                lnotab 0x04012801460204020a06340136012a01820126018201
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestBulkInsert'
          firstlineno 3499
          lnotab 0x0a01
       'TestBulkInsert'
       code
          argcount  : 0
          nlocals   : 0
@@ -37327,15 +37327,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3521           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestRecordVersioning')
                         8 STORE_NAME               2 (__qualname__)
          
-         3522          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3522>)
+         3522          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3522>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestRecordVersioning'
             code
@@ -37606,26 +37606,26 @@
                   1
                   'web2py3'
                   2
                names      ('connect', 'define_table', 'Field', 't0', '_enable_record_versioning', 'assertTrue', 'insert', 'name', 'delete', 'assertEqual', 'len', 'select', 'count', 'id', 'update', 't0_archive')
                varnames   ('self', 'db', 'i_id')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3522
                lnotab
                   0x02012801180102011c0124fd100536012e0136013601560186016c015a
                   0186016c018601
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestRecordVersioning'
          firstlineno 3521
          lnotab 0x0a01
       'TestRecordVersioning'
       'Skip if sqlite or NOSQL since no pools'
       code
          argcount  : 0
@@ -37635,15 +37635,15 @@
          code 0x970065005a0164005a02640184005a0364025300
          3543           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestConnection')
                         8 STORE_NAME               2 (__qualname__)
          
-         3545          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3545>)
+         3545          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3545>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
                        16 LOAD_CONST               2 (None)
                        18 RETURN_VALUE
          consts
             'TestConnection'
             code
@@ -37954,27 +37954,27 @@
                   ('check_reserved', 'pool_size')
                   1
                   0
                names      ('DAL', 'DEFAULT_URI', '_adapter', 'connection', 'close', 'IS_ORACLE', 'assertRaises', 'Exception', 'commit', 'set', 'range', 'add', 'assertEqual', 'len', 'pop', 'get_connection', 'append', 'POOLS')
                varnames   ('self', 'db', 'connection', 'connections', 'a', 'db2', 'c', 'dbs', 'db3', 'db4')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3545
                lnotab
                   0x02022e01180128010e0240031c012201300118012a012a014601280128
                   01280204012201300232012c0108012a01700132012a0128020e01220130
                   013c012a0174fb
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestConnection'
          firstlineno 3543
          lnotab 0x0a02
       'TestConnection'
       code
          argcount  : 0
          nlocals   : 0
@@ -37983,19 +37983,19 @@
          code 0x970065005a0164005a02640184005a03640284005a0464035300
          3587           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestSerializers')
                         8 STORE_NAME               2 (__qualname__)
          
-         3588          10 LOAD_CONST               1 (<code object testAsJson, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3588>)
+         3588          10 LOAD_CONST               1 (<code object testAsJson, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3588>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testAsJson)
          
-         3598          16 LOAD_CONST               2 (<code object testSelectIterselect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3598>)
+         3598          16 LOAD_CONST               2 (<code object testSelectIterselect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3598>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (testSelectIterselect)
                        22 LOAD_CONST               3 (None)
                        24 RETURN_VALUE
          consts
             'TestSerializers'
             code
@@ -38089,15 +38089,15 @@
                   'datetime'
                   ('date_field',)
                   0
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'datetime', 'now', 'select', 'ALL', 'as_json', 'json', 'loads')
                varnames   ('self', 'db', 'rows', 'j', 'json')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testAsJson'
                firstlineno 3588
                lnotab 0x0201280148016e014e0128010802
             code
                argcount  : 1
                nlocals   : 6
                stacksize : 9
@@ -38216,24 +38216,24 @@
                   ('tt',)
                   ('as_dict', 'as_csv', 'as_json', 'as_xml', 'as_list')
                   'failed %s'
                names      ('connect', 'define_table', 'Field', 'tt', 'insert', 'select', 'iterselect', 'assertEqual', 'getattr')
                varnames   ('self', 'db', 'methods', 'method', 'rows', 'rowsI')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testSelectIterselect'
                firstlineno 3598
                lnotab 0x02012801460136010801080144014401180164ff12fd
             None
          names      ('__name__', '__module__', '__qualname__', 'testAsJson', 'testSelectIterselect')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestSerializers'
          firstlineno 3587
          lnotab 0x0a01060a
       'TestSerializers'
       code
          argcount  : 0
          nlocals   : 0
@@ -38247,27 +38247,27 @@
             00000000005a0964065300
          3611           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestIterselect')
                         8 STORE_NAME               2 (__qualname__)
          
-         3612          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3612>)
+         3612          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3612>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (testRun)
          
          3666          16 PUSH_NULL
                        18 LOAD_NAME                4 (unittest)
                        20 LOAD_ATTR                5 (skipIf)
                        30 LOAD_NAME                6 (IS_MSSQL)
                        32 LOAD_CONST               2 ('Skip mssql')
                        34 PRECALL                  2
                        38 CALL                     2
          
-         3667          48 LOAD_CONST               3 (<code object testMultiSelect, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3666>)
+         3667          48 LOAD_CONST               3 (<code object testMultiSelect, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3666>)
                        50 MAKE_FUNCTION            0
          
          3666          52 PRECALL                  0
                        56 CALL                     0
          
          3667          66 STORE_NAME               7 (testMultiSelect)
          
@@ -38277,15 +38277,15 @@
                        82 LOAD_NAME                8 (IS_SQLITE)
                        84 LOAD_NAME                6 (IS_MSSQL)
                        86 BINARY_OP                7 (|)
                        90 LOAD_CONST               4 ('Skip sqlite & ms sql')
                        92 PRECALL                  2
                        96 CALL                     2
          
-         3695         106 LOAD_CONST               5 (<code object testMultiSelectWithCommit, file "/home/mdipierro/Dropbox/packages/pydal/tests/sql.py", line 3694>)
+         3695         106 LOAD_CONST               5 (<code object testMultiSelectWithCommit, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py", line 3694>)
                       108 MAKE_FUNCTION            0
          
          3694         110 PRECALL                  0
                       114 CALL                     0
          
          3695         124 STORE_NAME               9 (testMultiSelectWithCommit)
                       126 LOAD_CONST               6 (None)
@@ -38817,15 +38817,15 @@
                   False
                   1
                   2
                names      ('connect', 'define_table', 'Field', 'insert', 't0', 'select', 'id', 'enumerate', 'assertEqual', 'name', 'iterselect', 'first', 'bool', 'assertRaises', 'IndexError', '__getitem__', 'next', 'StopIteration', 'compact')
                varnames   ('self', 'db', 't0', 'names', 'n', 'rows', 'pos', 'r')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testRun'
                firstlineno 3612
                lnotab
                   0x020128014601080108012e025c01280144025c01280144025c01660166
                   02280144025c010401280144036e014601280144035c014e014e024e014e
                   0142035c010801520142035c010e0108015cff
             'Skip mssql'
@@ -39123,15 +39123,15 @@
                   1
                   'The iterator is not looping over all elements'
                   ('orderby',)
                names      ('connect', 'define_table', 'Field', 't0', 'delete', 'commit', 'insert', 'iterselect', 'update_or_insert', 'id', 'name', 'assertEqual', 'len', 'count', '_adapter', 'test_connection')
                varnames   ('self', 'db', 't0', 'names', 'n', 'c', 'r', 'x', 'y')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testMultiSelect'
                firstlineno 3666
                lnotab
                   0x02042801620144012801080108012e010401480168010c024801860104
                   016001600168010cfe020466018601
             'Skip sqlite & ms sql'
             code
@@ -39351,36 +39351,36 @@
                   ('nn',)
                   0
                   2
                names      ('connect', 'define_table', 'Field', 'xrange', 'insert', 'commit', 't0', 'nn', 'sum', 'select', 'first', 'iterselect', 'ALL', 'update_or_insert', 'id', 'assertEqual', 'count', '_adapter', 'test_connection')
                varnames   ('self', 'db', 't0', 'n', 's', 'tot', 'c', 'r')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
                name       'testMultiSelectWithCommit'
                firstlineno 3694
                lnotab
                   0x02022801480126012e0128013c01760104015e016e0128010c026c01a4
                   02
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun', 'unittest', 'skipIf', 'IS_MSSQL', 'testMultiSelect', 'IS_SQLITE', 'testMultiSelectWithCommit')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
          name       'TestIterselect'
          firstlineno 3611
          lnotab 0x0a010636200104ff0e01021b260104ff0e01
       'TestIterselect'
       '__main__'
    names      ('__doc__', '__future__', 'print_function', 'datetime', 'glob', 'json', 'os', 'pickle', 'unittest', 'skipIf', 'pydal', 'DAL', 'Field', 'pydal._compat', 'PY2', 'BytesIO', 'StringIO', 'basestring', 'integer_types', 'to_bytes', 'xrange', 'pydal.helpers.classes', 'SQLALL', 'OpRow', 'pydal.objects', 'Expression', 'Row', 'Table', '_adapt', 'DEFAULT_URI', 'IS_MSSQL', 'IS_MYSQL', 'IS_NOSQL', 'IS_ORACLE', 'IS_POSTGRESQL', 'IS_SQLITE', 'IS_TERADATA', '_compat', '_helpers', 'DALtest', 'long', 'print', 'partition', 'ALLOWED_DATATYPES', 'setUpModule', 'tearDownModule', 'TestFields', 'TestCase', 'TestTables', 'TestAll', 'TestTable', 'TestInsert', 'TestSelect', 'TestSubselect', 'TestAddMethod', 'TestBelongs', 'TestContains', 'TestLike', 'TestDatetime', 'TestExpressions', 'TestTableAliasing', 'TestJoin', 'TestMinMaxSumAvg', 'TestMigrations', 'TestReference', 'TestClientLevelOps', 'TestVirtualFields', 'TestComputedFields', 'TestCommonFilters', 'TestImportExportFields', 'TestImportExportUuidFields', 'TestDALDictImportExport', 'TestSelectAsDict', 'TestExecuteSQL', 'TestRNameTable', 'TestRNameFields', 'TestQuoting', 'TestTableAndFieldCase', 'TestQuotesByDefault', 'TestGis', 'skipUnless', 'TestJSON', 'TestSQLCustomType', 'TestLazy', 'TestRedefine', 'TestUpdateInsert', 'TestBulkInsert', 'TestRecordVersioning', 'TestConnection', 'TestSerializers', 'TestIterselect', '__name__', 'main')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/sql.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/sql.py'
    name       '<module>'
    firstlineno 1
    lnotab
       0x00ff020204040c02080108010801080108010c02100124091001140228
       0a0c010c0210024c030811061e06071c7f007f0027263926091c2c1c151c
       7f00511c7f007f002e1c131c231c4d1c7c1c211c7f00331c381c7f000b1c
       15267f00371c2f1c641c0f1c1c1c271c181c17266a1c271c5c1c7f007f00
```

### Comparing `pydal-20240428.2/tests/__pycache__/tags.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/tags.cpython-311.pyc`

 * *Files 1% similar despite different names*

#### Python bytecode

```diff
@@ -31,15 +31,15 @@
                 30 IMPORT_NAME              4 (pydal.tools.tags)
                 32 IMPORT_FROM              5 (Tags)
                 34 STORE_NAME               5 (Tags)
                 36 POP_TOP
    
      7          38 PUSH_NULL
                 40 LOAD_BUILD_CLASS
-                42 LOAD_CONST               4 (<code object TestTags, file "/home/mdipierro/Dropbox/packages/pydal/tests/tags.py", line 7>)
+                42 LOAD_CONST               4 (<code object TestTags, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/tags.py", line 7>)
                 44 MAKE_FUNCTION            0
                 46 LOAD_CONST               5 ('TestTags')
                 48 LOAD_NAME                0 (unittest)
                 50 LOAD_ATTR                6 (TestCase)
                 60 PRECALL                  3
                 64 CALL                     3
                 74 STORE_NAME               7 (TestTags)
@@ -58,15 +58,15 @@
          code 0x970065005a0164005a02640184005a0364025300
            7           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestTags')
                        8 STORE_NAME               2 (__qualname__)
          
-           8          10 LOAD_CONST               1 (<code object test_tags, file "/home/mdipierro/Dropbox/packages/pydal/tests/tags.py", line 8>)
+           8          10 LOAD_CONST               1 (<code object test_tags, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/tags.py", line 8>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (test_tags)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestTags'
             code
@@ -313,31 +313,31 @@
                   'material/wood'
                   'color'
                   2
                names      ('DAL', 'define_table', 'Field', 'Tags', 'thing', 'insert', 'add', 'assertTrue', 'get', 'find', 'select', 'first', 'id', 'len')
                varnames   ('self', 'db', 'properties', 'id1', 'id2', 'rows')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/tags.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/tags.py'
                name       'test_tags'
                firstlineno 8
                lnotab
                   0x02011e0146012801360136012c012c012c012c025601560262015a0262
                   015a026201
             None
          names      ('__name__', '__module__', '__qualname__', 'test_tags')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/tags.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/tags.py'
          name       'TestTags'
          firstlineno 7
          lnotab 0x0a01
       'TestTags'
    names      ('unittest', 'pydal', 'DAL', 'Field', 'pydal.tools.tags', 'Tags', 'TestCase', 'TestTags')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/tags.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/tags.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff0201080210010c03
```

### Comparing `pydal-20240428.2/tests/__pycache__/validation.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/validation.cpython-311.pyc`

 * *Files 16% similar despite different names*

#### Python bytecode

```diff
@@ -1,144 +1,155 @@
 magic:    0xa70d0d0a
-moddate:  0xc8b52c66 (Sat Apr 27 08:22:32 2024 UTC)
-files sz: 3786
+moddate:  0xb11e5866 (Thu May 30 06:37:37 2024 UTC)
+files sz: 5270
 code
    argcount  : 0
    nlocals   : 0
    stacksize : 6
    flags     : 0
    code
-      0x9700640064016c005a00640064026c016d025a026d035a030100640064
-      036c046d055a050100640464056c066d075a076d085a086d095a096d0a5a
-      0a0100640464066c0b6d0c5a0c010065056407190000000000000000005a
-      0d020065006a0e00000000000000006408a6010000ab0100000000000000
-      005a0f640984005a1002004700640a8400640b6511a6030000ab03000000
-      00000000005a120200650c6a1300000000000000006508640ca6020000ab
-      02000000000000000002004700640d8400640e650c6a1400000000000000
-      00a6030000ab030000000000000000a6000000ab0000000000000000005a
-      150200650c6a1300000000000000006508640ca6020000ab020000000000
-      00000002004700640f84006410650c6a140000000000000000a6030000ab
-      030000000000000000a6000000ab0000000000000000005a1664015300
+      0x9700640064016c005a00640064016c015a01640064016c025a02640064
+      026c036d045a046d055a050100640064036c066d075a070100640464056c
+      086d095a096d0a5a0a6d0b5a0b6d0c5a0c0100640464066c0d6d0e5a0e01
+      0065076407190000000000000000005a0f020065016a1000000000000000
+      006408a6010000ab0100000000000000005a11640984005a120200470064
+      0a8400640b6513a6030000ab0300000000000000005a140200650e6a1500
+      00000000000000650a640ca6020000ab0200000000000000000200470064
+      0d8400640e650e6a160000000000000000a6030000ab0300000000000000
+      00a6000000ab0000000000000000005a170200650e6a1500000000000000
+      00650a640ca6020000ab02000000000000000002004700640f8400641065
+      0e6a160000000000000000a6030000ab030000000000000000a6000000ab
+      0000000000000000005a1864015300
      0           0 RESUME                   0
    
      1           2 LOAD_CONST               0 (0)
                  4 LOAD_CONST               1 (None)
-                 6 IMPORT_NAME              0 (re)
-                 8 STORE_NAME               0 (re)
+                 6 IMPORT_NAME              0 (os)
+                 8 STORE_NAME               0 (os)
    
-     3          10 LOAD_CONST               0 (0)
-                12 LOAD_CONST               2 (('DAL', 'Field'))
-                14 IMPORT_NAME              1 (pydal)
-                16 IMPORT_FROM              2 (DAL)
-                18 STORE_NAME               2 (DAL)
-                20 IMPORT_FROM              3 (Field)
-                22 STORE_NAME               3 (Field)
-                24 POP_TOP
-   
-     4          26 LOAD_CONST               0 (0)
-                28 LOAD_CONST               3 (('integer_types',))
-                30 IMPORT_NAME              4 (pydal._compat)
-                32 IMPORT_FROM              5 (integer_types)
-                34 STORE_NAME               5 (integer_types)
-                36 POP_TOP
-   
-     6          38 LOAD_CONST               4 (1)
-                40 LOAD_CONST               5 (('DEFAULT_URI', 'IS_IMAP', 'IS_NOSQL', 'drop'))
-                42 IMPORT_NAME              6 (_adapt)
-                44 IMPORT_FROM              7 (DEFAULT_URI)
-                46 STORE_NAME               7 (DEFAULT_URI)
-                48 IMPORT_FROM              8 (IS_IMAP)
-                50 STORE_NAME               8 (IS_IMAP)
-                52 IMPORT_FROM              9 (IS_NOSQL)
-                54 STORE_NAME               9 (IS_NOSQL)
-                56 IMPORT_FROM             10 (drop)
-                58 STORE_NAME              10 (drop)
-                60 POP_TOP
-   
-     7          62 LOAD_CONST               4 (1)
-                64 LOAD_CONST               6 (('unittest',))
-                66 IMPORT_NAME             11 (_compat)
-                68 IMPORT_FROM             12 (unittest)
-                70 STORE_NAME              12 (unittest)
-                72 POP_TOP
-   
-     9          74 LOAD_NAME                5 (integer_types)
-                76 LOAD_CONST               7 (-1)
-                78 BINARY_SUBSCR
-                88 STORE_NAME              13 (long)
-   
-    11          90 PUSH_NULL
-                92 LOAD_NAME                0 (re)
-                94 LOAD_ATTR               14 (compile)
-               104 LOAD_CONST               8 ('^[+-]?\\d+$')
-               106 PRECALL                  1
-               110 CALL                     1
-               120 STORE_NAME              15 (regex_isint)
-   
-    14         122 LOAD_CONST               9 (<code object range_error_message, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 14>)
-               124 MAKE_FUNCTION            0
-               126 STORE_NAME              16 (range_error_message)
-   
-    29         128 PUSH_NULL
-               130 LOAD_BUILD_CLASS
-               132 LOAD_CONST              10 (<code object IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 29>)
-               134 MAKE_FUNCTION            0
-               136 LOAD_CONST              11 ('IS_INT_IN_RANGE')
-               138 LOAD_NAME               17 (object)
-               140 PRECALL                  3
-               144 CALL                     3
-               154 STORE_NAME              18 (IS_INT_IN_RANGE)
-   
-    47         156 PUSH_NULL
-               158 LOAD_NAME               12 (unittest)
-               160 LOAD_ATTR               19 (skipIf)
-               170 LOAD_NAME                8 (IS_IMAP)
-               172 LOAD_CONST              12 ('TODO: IMAP test')
-               174 PRECALL                  2
-               178 CALL                     2
-   
-    48         188 PUSH_NULL
-               190 LOAD_BUILD_CLASS
-               192 LOAD_CONST              13 (<code object TestValidateAndInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 47>)
-               194 MAKE_FUNCTION            0
-               196 LOAD_CONST              14 ('TestValidateAndInsert')
-               198 LOAD_NAME               12 (unittest)
-               200 LOAD_ATTR               20 (TestCase)
-               210 PRECALL                  3
-               214 CALL                     3
-   
-    47         224 PRECALL                  0
-               228 CALL                     0
-   
-    48         238 STORE_NAME              21 (TestValidateAndInsert)
-   
-    76         240 PUSH_NULL
-               242 LOAD_NAME               12 (unittest)
-               244 LOAD_ATTR               19 (skipIf)
-               254 LOAD_NAME                8 (IS_IMAP)
-               256 LOAD_CONST              12 ('TODO: IMAP test')
-               258 PRECALL                  2
-               262 CALL                     2
-   
-    77         272 PUSH_NULL
-               274 LOAD_BUILD_CLASS
-               276 LOAD_CONST              15 (<code object TestValidateUpdateInsert, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 76>)
-               278 MAKE_FUNCTION            0
-               280 LOAD_CONST              16 ('TestValidateUpdateInsert')
-               282 LOAD_NAME               12 (unittest)
-               284 LOAD_ATTR               20 (TestCase)
-               294 PRECALL                  3
-               298 CALL                     3
-   
-    76         308 PRECALL                  0
-               312 CALL                     0
-   
-    77         322 STORE_NAME              22 (TestValidateUpdateInsert)
-               324 LOAD_CONST               1 (None)
-               326 RETURN_VALUE
+     2          10 LOAD_CONST               0 (0)
+                12 LOAD_CONST               1 (None)
+                14 IMPORT_NAME              1 (re)
+                16 STORE_NAME               1 (re)
+   
+     3          18 LOAD_CONST               0 (0)
+                20 LOAD_CONST               1 (None)
+                22 IMPORT_NAME              2 (tempfile)
+                24 STORE_NAME               2 (tempfile)
+   
+     5          26 LOAD_CONST               0 (0)
+                28 LOAD_CONST               2 (('DAL', 'Field'))
+                30 IMPORT_NAME              3 (pydal)
+                32 IMPORT_FROM              4 (DAL)
+                34 STORE_NAME               4 (DAL)
+                36 IMPORT_FROM              5 (Field)
+                38 STORE_NAME               5 (Field)
+                40 POP_TOP
+   
+     6          42 LOAD_CONST               0 (0)
+                44 LOAD_CONST               3 (('integer_types',))
+                46 IMPORT_NAME              6 (pydal._compat)
+                48 IMPORT_FROM              7 (integer_types)
+                50 STORE_NAME               7 (integer_types)
+                52 POP_TOP
+   
+     8          54 LOAD_CONST               4 (1)
+                56 LOAD_CONST               5 (('DEFAULT_URI', 'IS_IMAP', 'IS_NOSQL', 'drop'))
+                58 IMPORT_NAME              8 (_adapt)
+                60 IMPORT_FROM              9 (DEFAULT_URI)
+                62 STORE_NAME               9 (DEFAULT_URI)
+                64 IMPORT_FROM             10 (IS_IMAP)
+                66 STORE_NAME              10 (IS_IMAP)
+                68 IMPORT_FROM             11 (IS_NOSQL)
+                70 STORE_NAME              11 (IS_NOSQL)
+                72 IMPORT_FROM             12 (drop)
+                74 STORE_NAME              12 (drop)
+                76 POP_TOP
+   
+     9          78 LOAD_CONST               4 (1)
+                80 LOAD_CONST               6 (('unittest',))
+                82 IMPORT_NAME             13 (_compat)
+                84 IMPORT_FROM             14 (unittest)
+                86 STORE_NAME              14 (unittest)
+                88 POP_TOP
+   
+    11          90 LOAD_NAME                7 (integer_types)
+                92 LOAD_CONST               7 (-1)
+                94 BINARY_SUBSCR
+               104 STORE_NAME              15 (long)
+   
+    13         106 PUSH_NULL
+               108 LOAD_NAME                1 (re)
+               110 LOAD_ATTR               16 (compile)
+               120 LOAD_CONST               8 ('^[+-]?\\d+$')
+               122 PRECALL                  1
+               126 CALL                     1
+               136 STORE_NAME              17 (regex_isint)
+   
+    16         138 LOAD_CONST               9 (<code object range_error_message, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 16>)
+               140 MAKE_FUNCTION            0
+               142 STORE_NAME              18 (range_error_message)
+   
+    31         144 PUSH_NULL
+               146 LOAD_BUILD_CLASS
+               148 LOAD_CONST              10 (<code object IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 31>)
+               150 MAKE_FUNCTION            0
+               152 LOAD_CONST              11 ('IS_INT_IN_RANGE')
+               154 LOAD_NAME               19 (object)
+               156 PRECALL                  3
+               160 CALL                     3
+               170 STORE_NAME              20 (IS_INT_IN_RANGE)
+   
+    49         172 PUSH_NULL
+               174 LOAD_NAME               14 (unittest)
+               176 LOAD_ATTR               21 (skipIf)
+               186 LOAD_NAME               10 (IS_IMAP)
+               188 LOAD_CONST              12 ('TODO: IMAP test')
+               190 PRECALL                  2
+               194 CALL                     2
+   
+    50         204 PUSH_NULL
+               206 LOAD_BUILD_CLASS
+               208 LOAD_CONST              13 (<code object TestValidateAndInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 49>)
+               210 MAKE_FUNCTION            0
+               212 LOAD_CONST              14 ('TestValidateAndInsert')
+               214 LOAD_NAME               14 (unittest)
+               216 LOAD_ATTR               22 (TestCase)
+               226 PRECALL                  3
+               230 CALL                     3
+   
+    49         240 PRECALL                  0
+               244 CALL                     0
+   
+    50         254 STORE_NAME              23 (TestValidateAndInsert)
+   
+   105         256 PUSH_NULL
+               258 LOAD_NAME               14 (unittest)
+               260 LOAD_ATTR               21 (skipIf)
+               270 LOAD_NAME               10 (IS_IMAP)
+               272 LOAD_CONST              12 ('TODO: IMAP test')
+               274 PRECALL                  2
+               278 CALL                     2
+   
+   106         288 PUSH_NULL
+               290 LOAD_BUILD_CLASS
+               292 LOAD_CONST              15 (<code object TestValidateUpdateInsert, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 105>)
+               294 MAKE_FUNCTION            0
+               296 LOAD_CONST              16 ('TestValidateUpdateInsert')
+               298 LOAD_NAME               14 (unittest)
+               300 LOAD_ATTR               22 (TestCase)
+               310 PRECALL                  3
+               314 CALL                     3
+   
+   105         324 PRECALL                  0
+               328 CALL                     0
+   
+   106         338 STORE_NAME              24 (TestValidateUpdateInsert)
+               340 LOAD_CONST               1 (None)
+               342 RETURN_VALUE
    consts
       0
       None
       ('DAL', 'Field')
       ('integer_types',)
       1
       ('DEFAULT_URI', 'IS_IMAP', 'IS_NOSQL', 'drop')
@@ -153,66 +164,66 @@
          code
             0x97007c00801e64027c017a0000007d007c0281087c0381067c0064037a
             0d00007d006e0f7c0281067c0064047a0d00007d006e077c0381057c0064
             057a0d00007d007401000000000000000000007c03a6010000ab01000000
             0000000000740200000000000000000000760072057c0364067a1700007d
             037c007405000000000000000000007c027c03ac07a6020000ab02000000
             00000000007a0600005300
-          14           0 RESUME                   0
+          16           0 RESUME                   0
          
-          16           2 LOAD_FAST                0 (error_message)
+          18           2 LOAD_FAST                0 (error_message)
                        4 POP_JUMP_FORWARD_IF_NOT_NONE    30 (to 66)
          
-          17           6 LOAD_CONST               2 ('Enter ')
+          19           6 LOAD_CONST               2 ('Enter ')
                        8 LOAD_FAST                1 (what_to_enter)
                       10 BINARY_OP                0 (+)
                       14 STORE_FAST               0 (error_message)
          
-          18          16 LOAD_FAST                2 (minimum)
+          20          16 LOAD_FAST                2 (minimum)
                       18 POP_JUMP_FORWARD_IF_NONE     8 (to 36)
                       20 LOAD_FAST                3 (maximum)
                       22 POP_JUMP_FORWARD_IF_NONE     6 (to 36)
          
-          19          24 LOAD_FAST                0 (error_message)
+          21          24 LOAD_FAST                0 (error_message)
                       26 LOAD_CONST               3 (' between %(min)g and %(max)g')
                       28 BINARY_OP               13 (+=)
                       32 STORE_FAST               0 (error_message)
                       34 JUMP_FORWARD            15 (to 66)
          
-          20     >>   36 LOAD_FAST                2 (minimum)
+          22     >>   36 LOAD_FAST                2 (minimum)
                       38 POP_JUMP_FORWARD_IF_NONE     6 (to 52)
          
-          21          40 LOAD_FAST                0 (error_message)
+          23          40 LOAD_FAST                0 (error_message)
                       42 LOAD_CONST               4 (' greater than or equal to %(min)g')
                       44 BINARY_OP               13 (+=)
                       48 STORE_FAST               0 (error_message)
                       50 JUMP_FORWARD             7 (to 66)
          
-          22     >>   52 LOAD_FAST                3 (maximum)
+          24     >>   52 LOAD_FAST                3 (maximum)
                       54 POP_JUMP_FORWARD_IF_NONE     5 (to 66)
          
-          23          56 LOAD_FAST                0 (error_message)
+          25          56 LOAD_FAST                0 (error_message)
                       58 LOAD_CONST               5 (' less than or equal to %(max)g')
                       60 BINARY_OP               13 (+=)
                       64 STORE_FAST               0 (error_message)
          
-          24     >>   66 LOAD_GLOBAL              1 (NULL + type)
+          26     >>   66 LOAD_GLOBAL              1 (NULL + type)
                       78 LOAD_FAST                3 (maximum)
                       80 PRECALL                  1
                       84 CALL                     1
                       94 LOAD_GLOBAL              2 (integer_types)
                      106 CONTAINS_OP              0
                      108 POP_JUMP_FORWARD_IF_FALSE     5 (to 120)
          
-          25         110 LOAD_FAST                3 (maximum)
+          27         110 LOAD_FAST                3 (maximum)
                      112 LOAD_CONST               6 (1)
                      114 BINARY_OP               23 (-=)
                      118 STORE_FAST               3 (maximum)
          
-          26     >>  120 LOAD_FAST                0 (error_message)
+          28     >>  120 LOAD_FAST                0 (error_message)
                      122 LOAD_GLOBAL              5 (NULL + dict)
                      134 LOAD_FAST                2 (minimum)
                      136 LOAD_FAST                3 (maximum)
                      138 KW_NAMES                 7
                      140 PRECALL                  2
                      144 CALL                     2
                      154 BINARY_OP                6 (%)
@@ -226,39 +237,39 @@
             ' less than or equal to %(max)g'
             1
             ('min', 'max')
          names      ('type', 'integer_types', 'dict')
          varnames   ('error_message', 'what_to_enter', 'minimum', 'maximum')
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
          name       'range_error_message'
-         firstlineno 14
+         firstlineno 16
          lnotab 0x020204010a0108010c0104010c0104010a012c010a01
       code
          argcount  : 0
          nlocals   : 0
          stacksize : 2
          flags     : 0
          code
             0x970065005a0164005a026404640284015a036405640384015a04640153
             00
-          29           0 RESUME                   0
+          31           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('IS_INT_IN_RANGE')
                        8 STORE_NAME               2 (__qualname__)
          
-          30          10 LOAD_CONST               4 ((None, None, None))
-                      12 LOAD_CONST               2 (<code object __init__, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 30>)
+          32          10 LOAD_CONST               4 ((None, None, None))
+                      12 LOAD_CONST               2 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 32>)
                       14 MAKE_FUNCTION            1 (defaults)
                       16 STORE_NAME               3 (__init__)
          
-          37          18 LOAD_CONST               5 ((None,))
-                      20 LOAD_CONST               3 (<code object __call__, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 37>)
+          39          18 LOAD_CONST               5 ((None,))
+                      20 LOAD_CONST               3 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 39>)
                       22 MAKE_FUNCTION            1 (defaults)
                       24 STORE_NAME               4 (__call__)
                       26 LOAD_CONST               1 (None)
                       28 RETURN_VALUE
          consts
             'IS_INT_IN_RANGE'
             None
@@ -270,162 +281,166 @@
                code
                   0x97007c01810f7401000000000000000000007c01a6010000ab01000000
                   00000000006e0164007c005f0100000000000000007c02810f7401000000
                   000000000000007c02a6010000ab0100000000000000006e0164007c005f
                   0200000000000000007407000000000000000000007c0364017c006a0100
                   000000000000007c006a020000000000000000a6040000ab040000000000
                   0000007c005f04000000000000000064005300
-                30           0 RESUME                   0
+                32           0 RESUME                   0
                
-                31           2 LOAD_FAST                1 (minimum)
+                33           2 LOAD_FAST                1 (minimum)
                              4 POP_JUMP_FORWARD_IF_NONE    15 (to 36)
                              6 LOAD_GLOBAL              1 (NULL + int)
                             18 LOAD_FAST                1 (minimum)
                             20 PRECALL                  1
                             24 CALL                     1
                             34 JUMP_FORWARD             1 (to 38)
                        >>   36 LOAD_CONST               0 (None)
                        >>   38 LOAD_FAST                0 (self)
                             40 STORE_ATTR               1 (minimum)
                
-                32          50 LOAD_FAST                2 (maximum)
+                34          50 LOAD_FAST                2 (maximum)
                             52 POP_JUMP_FORWARD_IF_NONE    15 (to 84)
                             54 LOAD_GLOBAL              1 (NULL + int)
                             66 LOAD_FAST                2 (maximum)
                             68 PRECALL                  1
                             72 CALL                     1
                             82 JUMP_FORWARD             1 (to 86)
                        >>   84 LOAD_CONST               0 (None)
                        >>   86 LOAD_FAST                0 (self)
                             88 STORE_ATTR               2 (maximum)
                
-                33          98 LOAD_GLOBAL              7 (NULL + range_error_message)
+                35          98 LOAD_GLOBAL              7 (NULL + range_error_message)
                
-                34         110 LOAD_FAST                3 (error_message)
+                36         110 LOAD_FAST                3 (error_message)
                            112 LOAD_CONST               1 ('an integer')
                            114 LOAD_FAST                0 (self)
                            116 LOAD_ATTR                1 (minimum)
                            126 LOAD_FAST                0 (self)
                            128 LOAD_ATTR                2 (maximum)
                
-                33         138 PRECALL                  4
+                35         138 PRECALL                  4
                            142 CALL                     4
                            152 LOAD_FAST                0 (self)
                            154 STORE_ATTR               4 (error_message)
                            164 LOAD_CONST               0 (None)
                            166 RETURN_VALUE
                consts
                   None
                   'an integer'
                names      ('int', 'minimum', 'maximum', 'range_error_message', 'error_message')
                varnames   ('self', 'minimum', 'maximum', 'error_message')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
                name       '__init__'
-               firstlineno 30
+               firstlineno 32
                lnotab 0x0201300130010c011cff
             code
                argcount  : 3
                nlocals   : 4
                stacksize : 5
                flags     : 3
                code
                   0x9700740000000000000000000000a00100000000000000000000000000
                   000000000000007405000000000000000000007c01a6010000ab01000000
                   0000000000a6010000ab0100000000000000007237740700000000000000
                   0000007c01a6010000ab0100000000000000007d037c006a040000000000
                   000000810b7c037c006a0400000000000000006b050000000072167c006a
                   050000000000000000810b7c037c006a0500000000000000006b00000000
                   0072047c036400660253007c017c006a06000000000000000066025300
-                37           0 RESUME                   0
+                39           0 RESUME                   0
                
-                38           2 LOAD_GLOBAL              0 (regex_isint)
+                40           2 LOAD_GLOBAL              0 (regex_isint)
                             14 LOAD_METHOD              1 (match)
                             36 LOAD_GLOBAL              5 (NULL + str)
                             48 LOAD_FAST                1 (value)
                             50 PRECALL                  1
                             54 CALL                     1
                             64 PRECALL                  1
                             68 CALL                     1
                             78 POP_JUMP_FORWARD_IF_FALSE    55 (to 190)
                
-                39          80 LOAD_GLOBAL              7 (NULL + int)
+                41          80 LOAD_GLOBAL              7 (NULL + int)
                             92 LOAD_FAST                1 (value)
                             94 PRECALL                  1
                             98 CALL                     1
                            108 STORE_FAST               3 (v)
                
-                40         110 LOAD_FAST                0 (self)
+                42         110 LOAD_FAST                0 (self)
                            112 LOAD_ATTR                4 (minimum)
                            122 POP_JUMP_FORWARD_IF_NONE    11 (to 146)
                            124 LOAD_FAST                3 (v)
                            126 LOAD_FAST                0 (self)
                            128 LOAD_ATTR                4 (minimum)
                            138 COMPARE_OP               5 (>=)
                            144 POP_JUMP_FORWARD_IF_FALSE    22 (to 190)
                
-                41     >>  146 LOAD_FAST                0 (self)
+                43     >>  146 LOAD_FAST                0 (self)
                            148 LOAD_ATTR                5 (maximum)
                            158 POP_JUMP_FORWARD_IF_NONE    11 (to 182)
                            160 LOAD_FAST                3 (v)
                            162 LOAD_FAST                0 (self)
                            164 LOAD_ATTR                5 (maximum)
                            174 COMPARE_OP               0 (<)
                            180 POP_JUMP_FORWARD_IF_FALSE     4 (to 190)
                
-                43     >>  182 LOAD_FAST                3 (v)
+                45     >>  182 LOAD_FAST                3 (v)
                            184 LOAD_CONST               0 (None)
                            186 BUILD_TUPLE              2
                            188 RETURN_VALUE
                
-                44     >>  190 LOAD_FAST                1 (value)
+                46     >>  190 LOAD_FAST                1 (value)
                            192 LOAD_FAST                0 (self)
                            194 LOAD_ATTR                6 (error_message)
                            204 BUILD_TUPLE              2
                            206 RETURN_VALUE
                consts
                   None
                names      ('regex_isint', 'match', 'str', 'int', 'minimum', 'maximum', 'error_message')
                varnames   ('self', 'value', 'record_id', 'v')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
                name       '__call__'
-               firstlineno 37
+               firstlineno 39
                lnotab 0x02014e011e01240124020801
             (None, None, None)
             (None,)
          names      ('__name__', '__module__', '__qualname__', '__init__', '__call__')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
          name       'IS_INT_IN_RANGE'
-         firstlineno 29
+         firstlineno 31
          lnotab 0x0a010807
       'IS_INT_IN_RANGE'
       'TODO: IMAP test'
       code
          argcount  : 0
          nlocals   : 0
          stacksize : 1
          flags     : 0
-         code 0x970065005a0164005a02640184005a0364025300
-          47           0 RESUME                   0
+         code 0x970065005a0164005a02640184005a03640284005a0464035300
+          49           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestValidateAndInsert')
                        8 STORE_NAME               2 (__qualname__)
          
-          49          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 49>)
+          51          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 51>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
-                      16 LOAD_CONST               2 (None)
-                      18 RETURN_VALUE
+         
+          77          16 LOAD_CONST               2 (<code object testApiUpload, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 77>)
+                      18 MAKE_FUNCTION            0
+                      20 STORE_NAME               4 (testApiUpload)
+                      22 LOAD_CONST               3 (None)
+                      24 RETURN_VALUE
          consts
             'TestValidateAndInsert'
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 12
                flags     : 3
@@ -458,94 +473,94 @@
                   000000000000000000000000007c02a00b00000000000000000000000000
                   000000000000006413a6010000ab0100000000000000006400a6020000ab
                   02000000000000000001007c00a00d000000000000000000000000000000
                   00000000007c026411190000000000000000006405190000000000000000
                   006400a6020000ab0200000000000000000100741d000000000000000000
                   007c016a050000000000000000a6010000ab010000000000000000010064
                   005300
-                49           0 RESUME                   0
+                51           0 RESUME                   0
                
-                50           2 LOAD_GLOBAL              1 (NULL + DAL)
+                52           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_GLOBAL              2 (DEFAULT_URI)
                             26 LOAD_CONST               1 ('all')
                             28 BUILD_LIST               1
                             30 KW_NAMES                 2
                             32 PRECALL                  2
                             36 CALL                     2
                             46 STORE_FAST               1 (db)
                
-                51          48 LOAD_FAST                1 (db)
+                53          48 LOAD_FAST                1 (db)
                             50 LOAD_METHOD              2 (define_table)
                
-                52          72 LOAD_CONST               3 ('val_and_insert')
+                54          72 LOAD_CONST               3 ('val_and_insert')
                
-                53          74 LOAD_GLOBAL              7 (NULL + Field)
+                55          74 LOAD_GLOBAL              7 (NULL + Field)
                             86 LOAD_CONST               4 ('aa')
                             88 PRECALL                  1
                             92 CALL                     1
                
-                54         102 LOAD_GLOBAL              7 (NULL + Field)
+                56         102 LOAD_GLOBAL              7 (NULL + Field)
                            114 LOAD_CONST               5 ('bb')
                            116 LOAD_CONST               6 ('integer')
                            118 LOAD_GLOBAL              9 (NULL + IS_INT_IN_RANGE)
                            130 LOAD_CONST               7 (1)
                            132 LOAD_CONST               8 (5)
                            134 PRECALL                  2
                            138 CALL                     2
                            148 KW_NAMES                 9
                            150 PRECALL                  3
                            154 CALL                     3
                
-                55         164 LOAD_GLOBAL              7 (NULL + Field)
+                57         164 LOAD_GLOBAL              7 (NULL + Field)
                            176 LOAD_CONST              10 ('cc')
                            178 LOAD_CONST              11 (False)
                            180 KW_NAMES                12
                            182 PRECALL                  2
                            186 CALL                     2
                
-                51         196 PRECALL                  4
+                53         196 PRECALL                  4
                            200 CALL                     4
                            210 POP_TOP
                
-                57         212 LOAD_FAST                1 (db)
+                59         212 LOAD_FAST                1 (db)
                            214 LOAD_ATTR                5 (val_and_insert)
                            224 LOAD_METHOD              6 (validate_and_insert)
                            246 LOAD_CONST              13 ('test1')
                            248 LOAD_CONST              14 (2)
                            250 LOAD_CONST              15 ('not-alloed')
                            252 KW_NAMES                16
                            254 PRECALL                  3
                            258 CALL                     3
                            268 STORE_FAST               2 (rtn)
                
-                58         270 LOAD_FAST                0 (self)
+                60         270 LOAD_FAST                0 (self)
                            272 LOAD_METHOD              7 (assertTrue)
                            294 LOAD_CONST              10 ('cc')
                            296 LOAD_FAST                2 (rtn)
                            298 LOAD_CONST              17 ('errors')
                            300 BINARY_SUBSCR
                            310 CONTAINS_OP              0
                            312 PRECALL                  1
                            316 CALL                     1
                            326 POP_TOP
                
-                59         328 LOAD_FAST                1 (db)
+                61         328 LOAD_FAST                1 (db)
                            330 LOAD_ATTR                5 (val_and_insert)
                            340 LOAD_METHOD              6 (validate_and_insert)
                            362 LOAD_CONST              13 ('test1')
                            364 LOAD_CONST              14 (2)
                            366 KW_NAMES                18
                            368 PRECALL                  2
                            372 CALL                     2
                            382 STORE_FAST               2 (rtn)
                
-                60         384 LOAD_GLOBAL             16 (IS_NOSQL)
+                62         384 LOAD_GLOBAL             16 (IS_NOSQL)
                            396 POP_JUMP_FORWARD_IF_FALSE    61 (to 520)
                
-                61         398 LOAD_FAST                0 (self)
+                63         398 LOAD_FAST                0 (self)
                            400 LOAD_METHOD              9 (assertEqual)
                            422 LOAD_GLOBAL             21 (NULL + isinstance)
                            434 LOAD_FAST                2 (rtn)
                            436 LOAD_METHOD             11 (get)
                            458 LOAD_CONST              19 ('id')
                            460 PRECALL                  1
                            464 CALL                     1
@@ -554,72 +569,72 @@
                            490 CALL                     2
                            500 LOAD_CONST              20 (True)
                            502 PRECALL                  2
                            506 CALL                     2
                            516 POP_TOP
                            518 JUMP_FORWARD            41 (to 602)
                
-                63     >>  520 LOAD_FAST                0 (self)
+                65     >>  520 LOAD_FAST                0 (self)
                            522 LOAD_METHOD              9 (assertEqual)
                            544 LOAD_FAST                2 (rtn)
                            546 LOAD_METHOD             11 (get)
                            568 LOAD_CONST              19 ('id')
                            570 PRECALL                  1
                            574 CALL                     1
                            584 LOAD_CONST               7 (1)
                            586 PRECALL                  2
                            590 CALL                     2
                            600 POP_TOP
                
-                65     >>  602 LOAD_FAST                0 (self)
+                67     >>  602 LOAD_FAST                0 (self)
                            604 LOAD_METHOD              7 (assertTrue)
                            626 LOAD_FAST                2 (rtn)
                            628 LOAD_METHOD             11 (get)
                            650 LOAD_CONST              17 ('errors')
                            652 PRECALL                  1
                            656 CALL                     1
                            666 UNARY_NOT
                            668 PRECALL                  1
                            672 CALL                     1
                            682 POP_TOP
                
-                67         684 LOAD_FAST                1 (db)
+                69         684 LOAD_FAST                1 (db)
                            686 LOAD_ATTR                5 (val_and_insert)
                            696 LOAD_METHOD              6 (validate_and_insert)
                            718 LOAD_CONST              21 ('a')
                            720 KW_NAMES                22
                            722 PRECALL                  1
                            726 CALL                     1
                            736 STORE_FAST               2 (rtn)
                
-                69         738 LOAD_FAST                0 (self)
+                71         738 LOAD_FAST                0 (self)
                            740 LOAD_METHOD              9 (assertEqual)
                            762 LOAD_FAST                2 (rtn)
                            764 LOAD_METHOD             11 (get)
                            786 LOAD_CONST              19 ('id')
                            788 PRECALL                  1
                            792 CALL                     1
                            802 LOAD_CONST               0 (None)
                            804 PRECALL                  2
                            808 CALL                     2
                            818 POP_TOP
                
-                71         820 LOAD_FAST                0 (self)
+                73         820 LOAD_FAST                0 (self)
                            822 LOAD_METHOD             13 (assertNotEqual)
                            844 LOAD_FAST                2 (rtn)
                            846 LOAD_CONST              17 ('errors')
                            848 BINARY_SUBSCR
                            858 LOAD_CONST               5 ('bb')
                            860 BINARY_SUBSCR
                            870 LOAD_CONST               0 (None)
                            872 PRECALL                  2
                            876 CALL                     2
                            886 POP_TOP
                
-                73         888 LOAD_GLOBAL             29 (NULL + drop)
+                75         888 LOAD_GLOBAL             29 (NULL + drop)
                            900 LOAD_FAST                1 (db)
                            902 LOAD_ATTR                5 (val_and_insert)
                            912 PRECALL                  1
                            916 CALL                     1
                            926 POP_TOP
                            928 LOAD_CONST               0 (None)
                            930 RETURN_VALUE
@@ -647,43 +662,362 @@
                   True
                   'a'
                   ('bb',)
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'IS_INT_IN_RANGE', 'val_and_insert', 'validate_and_insert', 'assertTrue', 'IS_NOSQL', 'assertEqual', 'isinstance', 'get', 'long', 'assertNotEqual', 'drop')
                varnames   ('self', 'db', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
                name       'testRun'
-               firstlineno 49
+               firstlineno 51
                lnotab
                   0x02012e01180102011c013e0120fc10063a013a0138010e017a02520252
                   02360252024402
+            code
+               argcount  : 1
+               nlocals   : 9
+               stacksize : 10
+               flags     : 3
+               code
+                  0x9700740100000000000000000000740200000000000000000000640167
+                  01ac02a6020000ab0200000000000000007d017405000000000000000000
+                  006a030000000000000000a6000000ab00000000000000000035007d027c
+                  01a00400000000000000000000000000000000000000006403740b000000
+                  0000000000000064046405ac06a6020000ab020000000000000000740b00
+                  000000000000000000640764087c02ac09a6030000ab0300000000000000
+                  00a6030000ab0300000000000000000100640a7d037c016a060000000000
+                  000000a00700000000000000000000000000000000000000007411000000
+                  0000000000000064077c03ac0ba6020000ab020000000000000000ac0ca6
+                  010000ab0100000000000000007d047c00a0090000000000000000000000
+                  0000000000000000007c0464006404640d6901640e9c02a6020000ab0200
+                  0000000000000001007c00a0090000000000000000000000000000000000
+                  0000007415000000000000000000006a0b00000000000000007c02a60100
+                  00ab0100000000000000006700a6020000ab02000000000000000001007c
+                  016a060000000000000000a0070000000000000000000000000000000000
+                  000000640f74110000000000000000000064077c03ac0ba6020000ab0200
+                  00000000000000ac10a6020000ab0200000000000000007d047c00a00900
+                  000000000000000000000000000000000000007c046900641164129c02a6
+                  020000ab02000000000000000001007c01a0060000000000000000000000
+                  0000000000000000007c04641319000000000000000000a6010000ab0100
+                  000000000000007d057c00a0090000000000000000000000000000000000
+                  0000007c056a0c0000000000000000640fa6020000ab0200000000000000
+                  0001007415000000000000000000006a0b00000000000000007c02a60100
+                  00ab0100000000000000007d067c00a00900000000000000000000000000
+                  00000000000000741b000000000000000000007c06a6010000ab01000000
+                  00000000006411a6020000ab02000000000000000001007c00a009000000
+                  00000000000000000000000000000000007c056a0e00000000000000007c
+                  06641419000000000000000000a6020000ab020000000000000000010064
+                  157d07741f000000000000000000007414000000000000000000006a1000
+                  00000000000000a01100000000000000000000000000000000000000007c
+                  027c06641419000000000000000000a6020000ab02000000000000000064
+                  16a6020000ab02000000000000000035007d087c00a00900000000000000
+                  000000000000000000000000007c08a01200000000000000000000000000
+                  00000000000000a6000000ab0000000000000000007c07a6020000ab0200
+                  000000000000000100640064006400a6020000ab02000000000000000001
+                  006e0b230031007304770278035900770101005900010001006400640064
+                  00a6020000ab020000000000000000010064005300230031007304770278
+                  0359007701010059000100010064005300
+                77           0 RESUME                   0
+               
+                78           2 LOAD_GLOBAL              1 (NULL + DAL)
+                            14 LOAD_GLOBAL              2 (DEFAULT_URI)
+                            26 LOAD_CONST               1 ('all')
+                            28 BUILD_LIST               1
+                            30 KW_NAMES                 2
+                            32 PRECALL                  2
+                            36 CALL                     2
+                            46 STORE_FAST               1 (db)
+               
+                79          48 LOAD_GLOBAL              5 (NULL + tempfile)
+                            60 LOAD_ATTR                3 (TemporaryDirectory)
+                            70 PRECALL                  0
+                            74 CALL                     0
+                            84 BEFORE_WITH
+                            86 STORE_FAST               2 (tempdir)
+               
+                80          88 LOAD_FAST                1 (db)
+                            90 LOAD_METHOD              4 (define_table)
+               
+                81         112 LOAD_CONST               3 ('thing')
+               
+                82         114 LOAD_GLOBAL             11 (NULL + Field)
+                           126 LOAD_CONST               4 ('name')
+                           128 LOAD_CONST               5 (True)
+                           130 KW_NAMES                 6
+                           132 PRECALL                  2
+                           136 CALL                     2
+               
+                83         146 LOAD_GLOBAL             11 (NULL + Field)
+                           158 LOAD_CONST               7 ('image')
+                           160 LOAD_CONST               8 ('upload')
+                           162 LOAD_FAST                2 (tempdir)
+                           164 KW_NAMES                 9
+                           166 PRECALL                  3
+                           170 CALL                     3
+               
+                80         180 PRECALL                  3
+                           184 CALL                     3
+                           194 POP_TOP
+               
+                85         196 LOAD_CONST              10 (b'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=')
+                           198 STORE_FAST               3 (b64)
+               
+                86         200 LOAD_FAST                1 (db)
+                           202 LOAD_ATTR                6 (thing)
+                           212 LOAD_METHOD              7 (validate_and_insert)
+               
+                87         234 LOAD_GLOBAL             17 (NULL + dict)
+                           246 LOAD_CONST               7 ('image')
+                           248 LOAD_FAST                3 (b64)
+                           250 KW_NAMES                11
+                           252 PRECALL                  2
+                           256 CALL                     2
+               
+                86         266 KW_NAMES                12
+                           268 PRECALL                  1
+                           272 CALL                     1
+                           282 STORE_FAST               4 (res)
+               
+                89         284 LOAD_FAST                0 (self)
+                           286 LOAD_METHOD              9 (assertEqual)
+                           308 LOAD_FAST                4 (res)
+                           310 LOAD_CONST               0 (None)
+                           312 LOAD_CONST               4 ('name')
+                           314 LOAD_CONST              13 ('required')
+                           316 BUILD_MAP                1
+                           318 LOAD_CONST              14 (('id', 'errors'))
+                           320 BUILD_CONST_KEY_MAP      2
+                           322 PRECALL                  2
+                           326 CALL                     2
+                           336 POP_TOP
+               
+                90         338 LOAD_FAST                0 (self)
+                           340 LOAD_METHOD              9 (assertEqual)
+                           362 LOAD_GLOBAL             21 (NULL + os)
+                           374 LOAD_ATTR               11 (listdir)
+                           384 LOAD_FAST                2 (tempdir)
+                           386 PRECALL                  1
+                           390 CALL                     1
+                           400 BUILD_LIST               0
+                           402 PRECALL                  2
+                           406 CALL                     2
+                           416 POP_TOP
+               
+                91         418 LOAD_FAST                1 (db)
+                           420 LOAD_ATTR                6 (thing)
+                           430 LOAD_METHOD              7 (validate_and_insert)
+               
+                92         452 LOAD_CONST              15 ('something')
+                           454 LOAD_GLOBAL             17 (NULL + dict)
+                           466 LOAD_CONST               7 ('image')
+                           468 LOAD_FAST                3 (b64)
+                           470 KW_NAMES                11
+                           472 PRECALL                  2
+                           476 CALL                     2
+               
+                91         486 KW_NAMES                16
+                           488 PRECALL                  2
+                           492 CALL                     2
+                           502 STORE_FAST               4 (res)
+               
+                94         504 LOAD_FAST                0 (self)
+                           506 LOAD_METHOD              9 (assertEqual)
+                           528 LOAD_FAST                4 (res)
+                           530 BUILD_MAP                0
+                           532 LOAD_CONST              17 (1)
+                           534 LOAD_CONST              18 (('errors', 'id'))
+                           536 BUILD_CONST_KEY_MAP      2
+                           538 PRECALL                  2
+                           542 CALL                     2
+                           552 POP_TOP
+               
+                95         554 LOAD_FAST                1 (db)
+                           556 LOAD_METHOD              6 (thing)
+                           578 LOAD_FAST                4 (res)
+                           580 LOAD_CONST              19 ('id')
+                           582 BINARY_SUBSCR
+                           592 PRECALL                  1
+                           596 CALL                     1
+                           606 STORE_FAST               5 (thing)
+               
+                96         608 LOAD_FAST                0 (self)
+                           610 LOAD_METHOD              9 (assertEqual)
+                           632 LOAD_FAST                5 (thing)
+                           634 LOAD_ATTR               12 (name)
+                           644 LOAD_CONST              15 ('something')
+                           646 PRECALL                  2
+                           650 CALL                     2
+                           660 POP_TOP
+               
+                97         662 LOAD_GLOBAL             21 (NULL + os)
+                           674 LOAD_ATTR               11 (listdir)
+                           684 LOAD_FAST                2 (tempdir)
+                           686 PRECALL                  1
+                           690 CALL                     1
+                           700 STORE_FAST               6 (names)
+               
+                98         702 LOAD_FAST                0 (self)
+                           704 LOAD_METHOD              9 (assertEqual)
+                           726 LOAD_GLOBAL             27 (NULL + len)
+                           738 LOAD_FAST                6 (names)
+                           740 PRECALL                  1
+                           744 CALL                     1
+                           754 LOAD_CONST              17 (1)
+                           756 PRECALL                  2
+                           760 CALL                     2
+                           770 POP_TOP
+               
+                99         772 LOAD_FAST                0 (self)
+                           774 LOAD_METHOD              9 (assertEqual)
+                           796 LOAD_FAST                5 (thing)
+                           798 LOAD_ATTR               14 (image)
+                           808 LOAD_FAST                6 (names)
+                           810 LOAD_CONST              20 (0)
+                           812 BINARY_SUBSCR
+                           822 PRECALL                  2
+                           826 CALL                     2
+                           836 POP_TOP
+               
+               100         838 LOAD_CONST              21 (b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x04\x00\x00\x00\xb5\x1c\x0c\x02\x00\x00\x00\x0bIDATx\xdacd\xf8\x0f\x00\x01\x05\x01\x01'\x18\xe3f\x00\x00\x00\x00IEND\xaeB`\x82")
+                           840 STORE_FAST               7 (content)
+               
+               101         842 LOAD_GLOBAL             31 (NULL + open)
+                           854 LOAD_GLOBAL             20 (os)
+                           866 LOAD_ATTR               16 (path)
+                           876 LOAD_METHOD             17 (join)
+                           898 LOAD_FAST                2 (tempdir)
+                           900 LOAD_FAST                6 (names)
+                           902 LOAD_CONST              20 (0)
+                           904 BINARY_SUBSCR
+                           914 PRECALL                  2
+                           918 CALL                     2
+                           928 LOAD_CONST              22 ('rb')
+                           930 PRECALL                  2
+                           934 CALL                     2
+                           944 BEFORE_WITH
+                           946 STORE_FAST               8 (stream)
+               
+               102         948 LOAD_FAST                0 (self)
+                           950 LOAD_METHOD              9 (assertEqual)
+                           972 LOAD_FAST                8 (stream)
+                           974 LOAD_METHOD             18 (read)
+                           996 PRECALL                  0
+                          1000 CALL                     0
+                          1010 LOAD_FAST                7 (content)
+                          1012 PRECALL                  2
+                          1016 CALL                     2
+                          1026 POP_TOP
+               
+               101        1028 LOAD_CONST               0 (None)
+                          1030 LOAD_CONST               0 (None)
+                          1032 LOAD_CONST               0 (None)
+                          1034 PRECALL                  2
+                          1038 CALL                     2
+                          1048 POP_TOP
+                          1050 JUMP_FORWARD            11 (to 1074)
+                       >> 1052 PUSH_EXC_INFO
+                          1054 WITH_EXCEPT_START
+                          1056 POP_JUMP_FORWARD_IF_TRUE     4 (to 1066)
+                          1058 RERAISE                  2
+                       >> 1060 COPY                     3
+                          1062 POP_EXCEPT
+                          1064 RERAISE                  1
+                       >> 1066 POP_TOP
+                          1068 POP_EXCEPT
+                          1070 POP_TOP
+                          1072 POP_TOP
+               
+                79     >> 1074 LOAD_CONST               0 (None)
+                          1076 LOAD_CONST               0 (None)
+                          1078 LOAD_CONST               0 (None)
+                          1080 PRECALL                  2
+                          1084 CALL                     2
+                          1094 POP_TOP
+                          1096 LOAD_CONST               0 (None)
+                          1098 RETURN_VALUE
+                       >> 1100 PUSH_EXC_INFO
+                          1102 WITH_EXCEPT_START
+                          1104 POP_JUMP_FORWARD_IF_TRUE     4 (to 1114)
+                          1106 RERAISE                  2
+                       >> 1108 COPY                     3
+                          1110 POP_EXCEPT
+                          1112 RERAISE                  1
+                       >> 1114 POP_TOP
+                          1116 POP_EXCEPT
+                          1118 POP_TOP
+                          1120 POP_TOP
+                          1122 LOAD_CONST               0 (None)
+                          1124 RETURN_VALUE
+               ExceptionTable:
+                 86 to 944 -> 1100 [1] lasti
+                 946 to 1026 -> 1052 [2] lasti
+                 1028 to 1050 -> 1100 [1] lasti
+                 1052 to 1058 -> 1060 [4] lasti
+                 1060 to 1064 -> 1100 [1] lasti
+                 1066 to 1066 -> 1060 [4] lasti
+                 1068 to 1072 -> 1100 [1] lasti
+                 1100 to 1106 -> 1108 [3] lasti
+                 1114 to 1114 -> 1108 [3] lasti
+               consts
+                  None
+                  'all'
+                  ('check_reserved',)
+                  'thing'
+                  'name'
+                  True
+                  ('required',)
+                  'image'
+                  'upload'
+                  ('uploadfolder',)
+                  b'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII='
+                  ('filename', 'content')
+                  ('image',)
+                  'required'
+                  ('id', 'errors')
+                  'something'
+                  ('name', 'image')
+                  1
+                  ('errors', 'id')
+                  'id'
+                  0
+                  b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x04\x00\x00\x00\xb5\x1c\x0c\x02\x00\x00\x00\x0bIDATx\xdacd\xf8\x0f\x00\x01\x05\x01\x01'\x18\xe3f\x00\x00\x00\x00IEND\xaeB`\x82"
+                  'rb'
+               names      ('DAL', 'DEFAULT_URI', 'tempfile', 'TemporaryDirectory', 'define_table', 'Field', 'thing', 'validate_and_insert', 'dict', 'assertEqual', 'os', 'listdir', 'name', 'len', 'image', 'open', 'path', 'join', 'read')
+               varnames   ('self', 'db', 'tempdir', 'b64', 'res', 'thing', 'names', 'content', 'stream')
+               freevars   ()
+               cellvars   ()
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
+               name       'testApiUpload'
+               firstlineno 77
+               lnotab
+                  0x02012e01280118010201200122fd10050401220120ff12033601500122
+                  0122ff120332013601360128014601420104016a0150ff2eea
             None
-         names      ('__name__', '__module__', '__qualname__', 'testRun')
+         names      ('__name__', '__module__', '__qualname__', 'testRun', 'testApiUpload')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
          name       'TestValidateAndInsert'
-         firstlineno 47
-         lnotab 0x0a02
+         firstlineno 49
+         lnotab 0x0a02061a
       'TestValidateAndInsert'
       code
          argcount  : 0
          nlocals   : 0
          stacksize : 1
          flags     : 0
          code 0x970065005a0164005a02640184005a0364025300
-          76           0 RESUME                   0
+         105           0 RESUME                   0
                        2 LOAD_NAME                0 (__name__)
                        4 STORE_NAME               1 (__module__)
                        6 LOAD_CONST               0 ('TestValidateUpdateInsert')
                        8 STORE_NAME               2 (__qualname__)
          
-          78          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/packages/pydal/tests/validation.py", line 78>)
+         107          10 LOAD_CONST               1 (<code object testRun, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py", line 107>)
                       12 MAKE_FUNCTION            0
                       14 STORE_NAME               3 (testRun)
                       16 LOAD_CONST               2 (None)
                       18 RETURN_VALUE
          consts
             'TestValidateUpdateInsert'
             code
@@ -729,104 +1063,104 @@
                   00a6000000ab000000000000000000640ea6020000ab0200000000000000
                   0001007c00a009000000000000000000000000000000000000000002007c
                   017c026a060000000000000000640a6b0200000000a6010000ab01000000
                   0000000000a00c0000000000000000000000000000000000000000a60000
                   00ab0000000000000000006406a6020000ab020000000000000000010074
                   1b000000000000000000007c016a0e0000000000000000a6010000ab0100
                   00000000000000010064005300
-                78           0 RESUME                   0
+               107           0 RESUME                   0
                
-                79           2 LOAD_GLOBAL              1 (NULL + DAL)
+               108           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_GLOBAL              2 (DEFAULT_URI)
                             26 LOAD_CONST               1 ('all')
                             28 BUILD_LIST               1
                             30 KW_NAMES                 2
                             32 PRECALL                  2
                             36 CALL                     2
                             46 STORE_FAST               1 (db)
                
-                80          48 LOAD_FAST                1 (db)
+               109          48 LOAD_FAST                1 (db)
                             50 LOAD_METHOD              2 (define_table)
                
-                81          72 LOAD_CONST               3 ('t1')
+               110          72 LOAD_CONST               3 ('t1')
                             74 LOAD_GLOBAL              7 (NULL + Field)
                             86 LOAD_CONST               4 ('int_level')
                             88 LOAD_CONST               5 ('integer')
                             90 LOAD_GLOBAL              9 (NULL + IS_INT_IN_RANGE)
                            102 LOAD_CONST               6 (1)
                            104 LOAD_CONST               7 (5)
                            106 PRECALL                  2
                            110 CALL                     2
                            120 KW_NAMES                 8
                            122 PRECALL                  3
                            126 CALL                     3
                
-                80         136 PRECALL                  2
+               109         136 PRECALL                  2
                            140 CALL                     2
                            150 STORE_FAST               2 (t1)
                
-                83         152 LOAD_FAST                2 (t1)
+               112         152 LOAD_FAST                2 (t1)
                            154 LOAD_METHOD              5 (validate_and_update_or_insert)
                            176 LOAD_FAST                2 (t1)
                            178 LOAD_ATTR                6 (int_level)
                            188 LOAD_CONST               6 (1)
                            190 COMPARE_OP               2 (==)
                            196 LOAD_CONST               6 (1)
                            198 KW_NAMES                 9
                            200 PRECALL                  2
                            204 CALL                     2
                            214 STORE_FAST               3 (i_response)
                
-                84         216 LOAD_FAST                2 (t1)
+               113         216 LOAD_FAST                2 (t1)
                            218 LOAD_METHOD              5 (validate_and_update_or_insert)
                            240 LOAD_FAST                2 (t1)
                            242 LOAD_ATTR                6 (int_level)
                            252 LOAD_CONST               6 (1)
                            254 COMPARE_OP               2 (==)
                            260 LOAD_CONST              10 (2)
                            262 KW_NAMES                 9
                            264 PRECALL                  2
                            268 CALL                     2
                            278 STORE_FAST               4 (u_response)
                
-                85         280 LOAD_FAST                2 (t1)
+               114         280 LOAD_FAST                2 (t1)
                            282 LOAD_METHOD              5 (validate_and_update_or_insert)
                            304 LOAD_FAST                2 (t1)
                            306 LOAD_ATTR                6 (int_level)
                            316 LOAD_CONST               6 (1)
                            318 COMPARE_OP               2 (==)
                            324 LOAD_CONST              11 (6)
                            326 KW_NAMES                 9
                            328 PRECALL                  2
                            332 CALL                     2
                            342 STORE_FAST               5 (e_response)
                
-                86         344 LOAD_FAST                0 (self)
+               115         344 LOAD_FAST                0 (self)
                            346 LOAD_METHOD              7 (assertTrue)
                            368 LOAD_FAST                3 (i_response)
                            370 LOAD_CONST              12 ('id')
                            372 BINARY_SUBSCR
                            382 LOAD_CONST               0 (None)
                            384 COMPARE_OP               3 (!=)
                            390 PRECALL                  1
                            394 CALL                     1
                            404 POP_TOP
                
-                87         406 LOAD_FAST                0 (self)
+               116         406 LOAD_FAST                0 (self)
                            408 LOAD_METHOD              7 (assertTrue)
                            430 LOAD_FAST                4 (u_response)
                            432 LOAD_CONST              12 ('id')
                            434 BINARY_SUBSCR
                            444 LOAD_CONST               0 (None)
                            446 COMPARE_OP               3 (!=)
                            452 PRECALL                  1
                            456 CALL                     1
                            466 POP_TOP
                
-                88         468 LOAD_FAST                0 (self)
+               117         468 LOAD_FAST                0 (self)
                            470 LOAD_METHOD              7 (assertTrue)
                            492 LOAD_FAST                5 (e_response)
                            494 LOAD_METHOD              8 (get)
                            516 LOAD_CONST              12 ('id')
                            518 PRECALL                  1
                            522 CALL                     1
                            532 LOAD_CONST               0 (None)
@@ -837,15 +1171,15 @@
                            566 LOAD_CONST              13 ('errors')
                            568 PRECALL                  1
                            572 CALL                     1
                        >>  582 PRECALL                  1
                            586 CALL                     1
                            596 POP_TOP
                
-                89         598 LOAD_FAST                0 (self)
+               118         598 LOAD_FAST                0 (self)
                            600 LOAD_METHOD              9 (assertEqual)
                            622 LOAD_GLOBAL             21 (NULL + len)
                            634 PUSH_NULL
                            636 LOAD_FAST                1 (db)
                            638 LOAD_FAST                2 (t1)
                            640 PRECALL                  1
                            644 CALL                     1
@@ -855,30 +1189,30 @@
                            690 PRECALL                  1
                            694 CALL                     1
                            704 LOAD_CONST               6 (1)
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-                90         722 LOAD_FAST                0 (self)
+               119         722 LOAD_FAST                0 (self)
                            724 LOAD_METHOD              9 (assertEqual)
                            746 PUSH_NULL
                            748 LOAD_FAST                1 (db)
                            750 LOAD_FAST                2 (t1)
                            752 PRECALL                  1
                            756 CALL                     1
                            766 LOAD_METHOD             12 (count)
                            788 PRECALL                  0
                            792 CALL                     0
                            802 LOAD_CONST               6 (1)
                            804 PRECALL                  2
                            808 CALL                     2
                            818 POP_TOP
                
-                91         820 LOAD_FAST                0 (self)
+               120         820 LOAD_FAST                0 (self)
                            822 LOAD_METHOD              9 (assertEqual)
                            844 PUSH_NULL
                            846 LOAD_FAST                1 (db)
                            848 LOAD_FAST                2 (t1)
                            850 LOAD_ATTR                6 (int_level)
                            860 LOAD_CONST               6 (1)
                            862 COMPARE_OP               2 (==)
@@ -888,15 +1222,15 @@
                            904 PRECALL                  0
                            908 CALL                     0
                            918 LOAD_CONST              14 (0)
                            920 PRECALL                  2
                            924 CALL                     2
                            934 POP_TOP
                
-                92         936 LOAD_FAST                0 (self)
+               121         936 LOAD_FAST                0 (self)
                            938 LOAD_METHOD              9 (assertEqual)
                            960 PUSH_NULL
                            962 LOAD_FAST                1 (db)
                            964 LOAD_FAST                2 (t1)
                            966 LOAD_ATTR                6 (int_level)
                            976 LOAD_CONST              11 (6)
                            978 COMPARE_OP               2 (==)
@@ -906,15 +1240,15 @@
                           1020 PRECALL                  0
                           1024 CALL                     0
                           1034 LOAD_CONST              14 (0)
                           1036 PRECALL                  2
                           1040 CALL                     2
                           1050 POP_TOP
                
-                93        1052 LOAD_FAST                0 (self)
+               122        1052 LOAD_FAST                0 (self)
                           1054 LOAD_METHOD              9 (assertEqual)
                           1076 PUSH_NULL
                           1078 LOAD_FAST                1 (db)
                           1080 LOAD_FAST                2 (t1)
                           1082 LOAD_ATTR                6 (int_level)
                           1092 LOAD_CONST              10 (2)
                           1094 COMPARE_OP               2 (==)
@@ -924,22 +1258,22 @@
                           1136 PRECALL                  0
                           1140 CALL                     0
                           1150 LOAD_CONST               6 (1)
                           1152 PRECALL                  2
                           1156 CALL                     2
                           1166 POP_TOP
                
-                94        1168 LOAD_GLOBAL             27 (NULL + drop)
+               123        1168 LOAD_GLOBAL             27 (NULL + drop)
                           1180 LOAD_FAST                1 (db)
                           1182 LOAD_ATTR               14 (t1)
                           1192 PRECALL                  1
                           1196 CALL                     1
                           1206 POP_TOP
                
-                95        1208 LOAD_CONST               0 (None)
+               124        1208 LOAD_CONST               0 (None)
                           1210 RETURN_VALUE
                consts
                   None
                   'all'
                   ('check_reserved',)
                   't1'
                   'int_level'
@@ -953,33 +1287,33 @@
                   'id'
                   'errors'
                   0
                names      ('DAL', 'DEFAULT_URI', 'define_table', 'Field', 'IS_INT_IN_RANGE', 'validate_and_update_or_insert', 'int_level', 'assertTrue', 'get', 'assertEqual', 'len', 'select', 'count', 'drop', 't1')
                varnames   ('self', 'db', 't1', 'i_response', 'u_response', 'e_response')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
                name       'testRun'
-               firstlineno 78
+               firstlineno 107
                lnotab
                   0x02012e01180140ff10034001400140013e013e0182017c016201740174
                   0174012801
             None
          names      ('__name__', '__module__', '__qualname__', 'testRun')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
          name       'TestValidateUpdateInsert'
-         firstlineno 76
+         firstlineno 105
          lnotab 0x0a02
       'TestValidateUpdateInsert'
-   names      ('re', 'pydal', 'DAL', 'Field', 'pydal._compat', 'integer_types', '_adapt', 'DEFAULT_URI', 'IS_IMAP', 'IS_NOSQL', 'drop', '_compat', 'unittest', 'long', 'compile', 'regex_isint', 'range_error_message', 'object', 'IS_INT_IN_RANGE', 'skipIf', 'TestCase', 'TestValidateAndInsert', 'TestValidateUpdateInsert')
+   names      ('os', 're', 'tempfile', 'pydal', 'DAL', 'Field', 'pydal._compat', 'integer_types', '_adapt', 'DEFAULT_URI', 'IS_IMAP', 'IS_NOSQL', 'drop', '_compat', 'unittest', 'long', 'compile', 'regex_isint', 'range_error_message', 'object', 'IS_INT_IN_RANGE', 'skipIf', 'TestCase', 'TestValidateAndInsert', 'TestValidateUpdateInsert')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validation.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validation.py'
    name       '<module>'
    firstlineno 1
    lnotab
-      0x00ff0201080210010c0218010c0210022003060f1c12200124ff0e0102
-      1c200124ff0e01
+      0x00ff020108010801080210010c0218010c0210022003060f1c12200124
+      ff0e010237200124ff0e01
```

### Comparing `pydal-20240428.2/tests/__pycache__/validators.cpython-311.pyc` & `pydal-20240529.1/tests/__pycache__/validators.cpython-311.pyc`

 * *Files 2% similar despite different names*

#### Python bytecode

```diff
@@ -1,10 +1,10 @@
 magic:    0xa70d0d0a
-moddate:  0x216e5465 (Wed Nov 15 07:07:13 2023 UTC)
-files sz: 66909
+moddate:  0x75245866 (Thu May 30 07:02:13 2024 UTC)
+files sz: 67571
 code
    argcount  : 0
    nlocals   : 0
    stacksize : 5
    flags     : 0
    code
       0x970064005a00640164026c015a01640164026c025a02640164026c035a
@@ -69,15 +69,15 @@
                 90 STORE_NAME              13 (Validator)
                 92 IMPORT_FROM             14 (options_sorter)
                 94 STORE_NAME              14 (options_sorter)
                 96 POP_TOP
    
     17          98 PUSH_NULL
                100 LOAD_BUILD_CLASS
-               102 LOAD_CONST               7 (<code object TestValidators, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 17>)
+               102 LOAD_CONST               7 (<code object TestValidators, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 17>)
                104 MAKE_FUNCTION            0
                106 LOAD_CONST               8 ('TestValidators')
                108 LOAD_NAME                4 (unittest)
                110 LOAD_ATTR               15 (TestCase)
                120 PRECALL                  3
                124 CALL                     3
                134 STORE_NAME              16 (TestValidators)
@@ -98,198 +98,202 @@
          flags     : 0
          code
             0x970065005a0164005a02640184005a03640284005a04640384005a0564
             0484005a06640584005a07640684005a08640784005a09640884005a0a64
             0984005a0b640a84005a0c640b84005a0d640c84005a0e640d84005a0f64
             0e84005a10640f84005a11641084005a12641184005a13641284005a1464
             1384005a15641484005a16641584005a17641684005a18641784005a1964
-            1884005a1a641984005a1b641a84005a1c641b84005a1d641c84005a1e02
-            004700641d8400641e651fa6030000ab0300000000000000005a20652164
-            1f8400a6000000ab0000000000000000005a22642084005a23642184005a
+            1884005a1a641984005a1b641a84005a1c641b84005a1d641c84005a1e64
+            1d84005a1f02004700641e8400641f6520a6030000ab0300000000000000
+            005a21652264208400a6000000ab0000000000000000005a23642184005a
             24642284005a25642384005a26642484005a27642584005a28642684005a
-            29642784005a2a642884005a2b642984005a2c642a5300
+            29642784005a2a642884005a2b642984005a2c642a84005a2d642b5300
            17           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestValidators')
                         8 STORE_NAME               2 (__qualname__)
          
-           18          10 LOAD_CONST               1 (<code object myassertRegex, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 18>)
+           18          10 LOAD_CONST               1 (<code object myassertRegex, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 18>)
                        12 MAKE_FUNCTION            0
                        14 STORE_NAME               3 (myassertRegex)
          
-           23          16 LOAD_CONST               2 (<code object test_MISC, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 23>)
+           23          16 LOAD_CONST               2 (<code object test_MISC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 23>)
                        18 MAKE_FUNCTION            0
                        20 STORE_NAME               4 (test_MISC)
          
-           36          22 LOAD_CONST               3 (<code object test_IS_MATCH, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 36>)
+           36          22 LOAD_CONST               3 (<code object test_IS_MATCH, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 36>)
                        24 MAKE_FUNCTION            0
                        26 STORE_NAME               5 (test_IS_MATCH)
          
-           72          28 LOAD_CONST               4 (<code object test_IS_EQUAL_TO, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 72>)
+           72          28 LOAD_CONST               4 (<code object test_IS_EQUAL_TO, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 72>)
                        30 MAKE_FUNCTION            0
                        32 STORE_NAME               6 (test_IS_EQUAL_TO)
          
-           78          34 LOAD_CONST               5 (<code object test_IS_EXPR, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 78>)
+           78          34 LOAD_CONST               5 (<code object test_IS_EXPR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 78>)
                        36 MAKE_FUNCTION            0
                        38 STORE_NAME               7 (test_IS_EXPR)
          
-           88          40 LOAD_CONST               6 (<code object test_IS_LENGTH, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 88>)
+           88          40 LOAD_CONST               6 (<code object test_IS_LENGTH, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 88>)
                        42 MAKE_FUNCTION            0
                        44 STORE_NAME               8 (test_IS_LENGTH)
          
-          159          46 LOAD_CONST               7 (<code object test_IS_JSON, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 159>)
+          159          46 LOAD_CONST               7 (<code object test_IS_JSON, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 159>)
                        48 MAKE_FUNCTION            0
                        50 STORE_NAME               9 (test_IS_JSON)
          
-          173          52 LOAD_CONST               8 (<code object test_IS_IN_SET, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 173>)
+          173          52 LOAD_CONST               8 (<code object test_IS_IN_SET, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 173>)
                        54 MAKE_FUNCTION            0
                        56 STORE_NAME              10 (test_IS_IN_SET)
          
-          213          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 213>)
+          213          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 213>)
                        60 MAKE_FUNCTION            0
                        62 STORE_NAME              11 (test_IS_IN_DB)
          
-          389          64 LOAD_CONST              10 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 389>)
+          389          64 LOAD_CONST              10 (<code object test_IS_IN_DB_options, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 389>)
                        66 MAKE_FUNCTION            0
-                       68 STORE_NAME              12 (test_IS_NOT_IN_DB)
+                       68 STORE_NAME              12 (test_IS_IN_DB_options)
          
-          419          70 LOAD_CONST              11 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 419>)
+          402          70 LOAD_CONST              11 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 402>)
                        72 MAKE_FUNCTION            0
-                       74 STORE_NAME              13 (test_IS_INT_IN_RANGE)
+                       74 STORE_NAME              13 (test_IS_NOT_IN_DB)
          
-          445          76 LOAD_CONST              12 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 445>)
+          432          76 LOAD_CONST              12 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 432>)
                        78 MAKE_FUNCTION            0
-                       80 STORE_NAME              14 (test_IS_FLOAT_IN_RANGE)
+                       80 STORE_NAME              14 (test_IS_INT_IN_RANGE)
          
-          486          82 LOAD_CONST              13 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 486>)
+          458          82 LOAD_CONST              13 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 458>)
                        84 MAKE_FUNCTION            0
-                       86 STORE_NAME              15 (test_IS_DECIMAL_IN_RANGE)
+                       86 STORE_NAME              15 (test_IS_FLOAT_IN_RANGE)
          
-          540          88 LOAD_CONST              14 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 540>)
+          499          88 LOAD_CONST              14 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 499>)
                        90 MAKE_FUNCTION            0
-                       92 STORE_NAME              16 (test_IS_NOT_EMPTY)
+                       92 STORE_NAME              16 (test_IS_DECIMAL_IN_RANGE)
          
-          568          94 LOAD_CONST              15 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 568>)
+          553          94 LOAD_CONST              15 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 553>)
                        96 MAKE_FUNCTION            0
-                       98 STORE_NAME              17 (test_IS_ALPHANUMERIC)
+                       98 STORE_NAME              17 (test_IS_NOT_EMPTY)
          
-          578         100 LOAD_CONST              16 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 578>)
+          581         100 LOAD_CONST              16 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 581>)
                       102 MAKE_FUNCTION            0
-                      104 STORE_NAME              18 (test_IS_EMAIL)
+                      104 STORE_NAME              18 (test_IS_ALPHANUMERIC)
          
-          655         106 LOAD_CONST              17 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 655>)
+          591         106 LOAD_CONST              17 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 591>)
                       108 MAKE_FUNCTION            0
-                      110 STORE_NAME              19 (test_IS_LIST_OF_EMAILS)
+                      110 STORE_NAME              19 (test_IS_EMAIL)
          
-          671         112 LOAD_CONST              18 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 671>)
+          668         112 LOAD_CONST              18 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 668>)
                       114 MAKE_FUNCTION            0
-                      116 STORE_NAME              20 (test_IS_URL)
+                      116 STORE_NAME              20 (test_IS_LIST_OF_EMAILS)
          
-          687         118 LOAD_CONST              19 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 687>)
+          684         118 LOAD_CONST              19 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 684>)
                       120 MAKE_FUNCTION            0
-                      122 STORE_NAME              21 (test_IS_TIME)
+                      122 STORE_NAME              21 (test_IS_URL)
          
-          725         124 LOAD_CONST              20 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 725>)
+          700         124 LOAD_CONST              20 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 700>)
                       126 MAKE_FUNCTION            0
-                      128 STORE_NAME              22 (test_IS_DATE)
+                      128 STORE_NAME              22 (test_IS_TIME)
          
-          736         130 LOAD_CONST              21 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 736>)
+          738         130 LOAD_CONST              21 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 738>)
                       132 MAKE_FUNCTION            0
-                      134 STORE_NAME              23 (test_IS_DATETIME)
+                      134 STORE_NAME              23 (test_IS_DATE)
          
-          767         136 LOAD_CONST              22 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 767>)
+          749         136 LOAD_CONST              22 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 749>)
                       138 MAKE_FUNCTION            0
-                      140 STORE_NAME              24 (test_IS_DATE_IN_RANGE)
+                      140 STORE_NAME              24 (test_IS_DATETIME)
          
-          799         142 LOAD_CONST              23 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 799>)
+          780         142 LOAD_CONST              23 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 780>)
                       144 MAKE_FUNCTION            0
-                      146 STORE_NAME              25 (test_IS_DATETIME_IN_RANGE)
+                      146 STORE_NAME              25 (test_IS_DATE_IN_RANGE)
          
-          857         148 LOAD_CONST              24 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 857>)
+          812         148 LOAD_CONST              24 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 812>)
                       150 MAKE_FUNCTION            0
-                      152 STORE_NAME              26 (test_IS_LIST_OF)
+                      152 STORE_NAME              26 (test_IS_DATETIME_IN_RANGE)
          
-          874         154 LOAD_CONST              25 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 874>)
+          870         154 LOAD_CONST              25 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 870>)
                       156 MAKE_FUNCTION            0
-                      158 STORE_NAME              27 (test_IS_LOWER)
+                      158 STORE_NAME              27 (test_IS_LIST_OF)
          
-          882         160 LOAD_CONST              26 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 882>)
+          887         160 LOAD_CONST              26 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 887>)
                       162 MAKE_FUNCTION            0
-                      164 STORE_NAME              28 (test_IS_UPPER)
+                      164 STORE_NAME              28 (test_IS_LOWER)
          
-          890         166 LOAD_CONST              27 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 890>)
+          895         166 LOAD_CONST              27 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 895>)
                       168 MAKE_FUNCTION            0
-                      170 STORE_NAME              29 (test_IS_SLUG)
+                      170 STORE_NAME              29 (test_IS_UPPER)
          
-          930         172 LOAD_CONST              28 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 930>)
+          903         172 LOAD_CONST              28 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 903>)
                       174 MAKE_FUNCTION            0
-                      176 STORE_NAME              30 (test_ANY_OF)
+                      176 STORE_NAME              30 (test_IS_SLUG)
          
-          948         178 PUSH_NULL
-                      180 LOAD_BUILD_CLASS
-                      182 LOAD_CONST              29 (<code object CustomValidator, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 948>)
-                      184 MAKE_FUNCTION            0
-                      186 LOAD_CONST              30 ('CustomValidator')
-                      188 LOAD_NAME               31 (Validator)
-                      190 PRECALL                  3
-                      194 CALL                     3
-                      204 STORE_NAME              32 (CustomValidator)
+          943         178 LOAD_CONST              29 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 943>)
+                      180 MAKE_FUNCTION            0
+                      182 STORE_NAME              31 (test_ANY_OF)
          
-          954         206 LOAD_NAME               33 (staticmethod)
+          961         184 PUSH_NULL
+                      186 LOAD_BUILD_CLASS
+                      188 LOAD_CONST              30 (<code object CustomValidator, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 961>)
+                      190 MAKE_FUNCTION            0
+                      192 LOAD_CONST              31 ('CustomValidator')
+                      194 LOAD_NAME               32 (Validator)
+                      196 PRECALL                  3
+                      200 CALL                     3
+                      210 STORE_NAME              33 (CustomValidator)
          
-          955         208 LOAD_CONST              31 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 954>)
-                      210 MAKE_FUNCTION            0
+          967         212 LOAD_NAME               34 (staticmethod)
          
-          954         212 PRECALL                  0
-                      216 CALL                     0
+          968         214 LOAD_CONST              32 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 967>)
+                      216 MAKE_FUNCTION            0
          
-          955         226 STORE_NAME              34 (custom_validator_func)
+          967         218 PRECALL                  0
+                      222 CALL                     0
          
-          959         228 LOAD_CONST              32 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 959>)
-                      230 MAKE_FUNCTION            0
-                      232 STORE_NAME              35 (test_IS_EMPTY_OR)
+          968         232 STORE_NAME              35 (custom_validator_func)
          
-          997         234 LOAD_CONST              33 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 997>)
+          972         234 LOAD_CONST              33 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 972>)
                       236 MAKE_FUNCTION            0
-                      238 STORE_NAME              36 (test_CLEANUP)
+                      238 STORE_NAME              36 (test_IS_EMPTY_OR)
          
-         1001         240 LOAD_CONST              34 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1001>)
+         1010         240 LOAD_CONST              34 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1010>)
                       242 MAKE_FUNCTION            0
-                      244 STORE_NAME              37 (test_CRYPT)
+                      244 STORE_NAME              37 (test_CLEANUP)
          
-         1023         246 LOAD_CONST              35 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1023>)
+         1014         246 LOAD_CONST              35 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1014>)
                       248 MAKE_FUNCTION            0
-                      250 STORE_NAME              38 (test_IS_STRONG)
+                      250 STORE_NAME              38 (test_CRYPT)
          
-         1116         252 LOAD_CONST              36 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1116>)
+         1036         252 LOAD_CONST              36 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1036>)
                       254 MAKE_FUNCTION            0
-                      256 STORE_NAME              39 (test_IS_IMAGE)
+                      256 STORE_NAME              39 (test_IS_STRONG)
          
-         1186         258 LOAD_CONST              37 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1186>)
+         1129         258 LOAD_CONST              37 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1129>)
                       260 MAKE_FUNCTION            0
-                      262 STORE_NAME              40 (test_IS_FILE)
+                      262 STORE_NAME              40 (test_IS_IMAGE)
          
-         1252         264 LOAD_CONST              38 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1252>)
+         1199         264 LOAD_CONST              38 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1199>)
                       266 MAKE_FUNCTION            0
-                      268 STORE_NAME              41 (test_IS_UPLOAD_FILENAME)
+                      268 STORE_NAME              41 (test_IS_FILE)
          
-         1309         270 LOAD_CONST              39 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1309>)
+         1265         270 LOAD_CONST              39 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1265>)
                       272 MAKE_FUNCTION            0
-                      274 STORE_NAME              42 (test_IS_IPV4)
+                      274 STORE_NAME              42 (test_IS_UPLOAD_FILENAME)
          
-         1347         276 LOAD_CONST              40 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1347>)
+         1322         276 LOAD_CONST              40 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1322>)
                       278 MAKE_FUNCTION            0
-                      280 STORE_NAME              43 (test_IS_IPV6)
+                      280 STORE_NAME              43 (test_IS_IPV4)
          
-         1380         282 LOAD_CONST              41 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1380>)
+         1360         282 LOAD_CONST              41 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1360>)
                       284 MAKE_FUNCTION            0
-                      286 STORE_NAME              44 (test_IS_IPADDRESS)
-                      288 LOAD_CONST              42 (None)
-                      290 RETURN_VALUE
+                      286 STORE_NAME              44 (test_IS_IPV6)
+         
+         1393         288 LOAD_CONST              42 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1393>)
+                      290 MAKE_FUNCTION            0
+                      292 STORE_NAME              45 (test_IS_IPADDRESS)
+                      294 LOAD_CONST              43 (None)
+                      296 RETURN_VALUE
          consts
             'TestValidators'
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 5
                flags     : 15
@@ -332,15 +336,15 @@
                   None
                   'assertRegexpMatches'
                   'assertRegex'
                names      ('PY2', 'getattr')
                varnames   ('self', 'args', 'kwargs')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'myassertRegex'
                firstlineno 18
                lnotab 0x02010e012c01
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 6
@@ -478,15 +482,15 @@
                   1
                   'UTC'
                   None
                names      ('assertEqual', 'options_sorter', 'assertRaises', 'NotImplementedError', 'Validator', 'UTC', 'datetime', 'now', 'utcoffset', 'ZERO', 'dst', 'tzname')
                varnames   ('self', 'utc', 'dt')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_MISC'
                firstlineno 23
                lnotab 0x020348014801480150011c013c0166016601
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
@@ -882,15 +886,15 @@
                   ('hell', None)
                   ''
                   ('', 'Invalid expression')
                names      ('IS_MATCH', 'assertEqual', 'PY2')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_MATCH'
                firstlineno 36
                lnotab
                   0x020130012c0130012c0134012c0130012c0134012c0136012c0136012c
                   0130012c0134012c0134012c0134012c0134010e012e022c0134012c0134
                   012c023001
             code
@@ -951,15 +955,15 @@
                   ('aaa', None)
                   'aab'
                   ('aab', 'No match')
                names      ('IS_EQUAL_TO', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EQUAL_TO'
                firstlineno 72
                lnotab 0x020130012c013001
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
@@ -1014,15 +1018,15 @@
                            168 LOAD_CONST               5 (('2', 'Invalid expression'))
                            170 PRECALL                  2
                            174 CALL                     2
                            184 POP_TOP
                
                 83         186 PUSH_NULL
                            188 LOAD_GLOBAL              1 (NULL + IS_EXPR)
-                           200 LOAD_CONST               6 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 83>)
+                           200 LOAD_CONST               6 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 83>)
                            202 MAKE_FUNCTION            0
                            204 PRECALL                  1
                            208 CALL                     1
                            218 LOAD_CONST               2 ('1')
                            220 PRECALL                  1
                            224 CALL                     1
                            234 STORE_FAST               1 (rtn)
@@ -1033,15 +1037,15 @@
                            262 LOAD_CONST               7 (('1', 1))
                            264 PRECALL                  2
                            268 CALL                     2
                            278 POP_TOP
                
                 85         280 PUSH_NULL
                            282 LOAD_GLOBAL              1 (NULL + IS_EXPR)
-                           294 LOAD_CONST               8 (<code object <lambda>, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 85>)
+                           294 LOAD_CONST               8 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 85>)
                            296 MAKE_FUNCTION            0
                            298 PRECALL                  1
                            302 CALL                     1
                            312 LOAD_CONST               4 ('2')
                            314 PRECALL                  1
                            318 CALL                     1
                            328 STORE_FAST               1 (rtn)
@@ -1078,15 +1082,15 @@
                                   30 RETURN_VALUE
                      consts
                         None
                      names      ('int',)
                      varnames   ('value',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '<lambda>'
                      firstlineno 83
                      lnotab 0x
                   ('1', 1)
                   code
                      argcount  : 1
                      nlocals   : 1
@@ -1111,24 +1115,24 @@
                         None
                         2
                         'invalid'
                      names      ('int',)
                      varnames   ('value',)
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '<lambda>'
                      firstlineno 85
                      lnotab 0x
                   ('2', None)
                names      ('IS_EXPR', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EXPR'
                firstlineno 78
                lnotab 0x020130012c0130012c0132012c013201
             code
                argcount  : 1
                nlocals   : 9
                stacksize : 5
@@ -1791,15 +1795,15 @@
                   ('fp', 'environ')
                   6
                   'Enter from 6 to 255 characters'
                names      ('IS_LENGTH', 'assertEqual', 'encode', 'PY2', 'cgi', 'io', 'BytesIO', 'FieldStorage', 'file', 'str', 'len', 'seek')
                varnames   ('self', 'rtn', 'cpstr', 'cgi', 'BytesIO', 'a', 'urlencode_data', 'urlencode_environ', 'fake_stdin')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LENGTH'
                firstlineno 88
                lnotab
                   0x02012e012c012e012c0134012c0134012c012e012c0132012c0132012c
                   013201300136013401340132022a0132013001320130013401300230010e
                   012e022c0130010e012e022c0232012c0132012c0208010c022801200132
                   013001040236010201020102fc060616012a012e01320130012801320130
@@ -1961,15 +1965,15 @@
                   True
                   ('native_json',)
                   ('{"a": 100}', None)
                names      ('IS_JSON', 'assertEqual', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_JSON'
                firstlineno 159
                lnotab 0x02012e0134012e012c0132012c0142012c0146012c014a01
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
@@ -2423,15 +2427,15 @@
                   ('id1', 'id1')
                   ('id2', 'id2')
                   ('sort',)
                names      ('IS_IN_SET', 'assertEqual', 'itertools', 'chain', 'options')
                varnames   ('self', 'rtn', 'itertools')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_SET'
                firstlineno 173
                lnotab
                   0x020134012c0134012c0138012c0138012c01240102ff10032c0136012c
                   013a0130013a0130013a0132013a012c01080260012c01220102ff10032c
                   01360102ff120330014a0130014e01
             code
@@ -3946,15 +3950,15 @@
                   'test list:reference table'
                   ('name', 'person_list')
                   'list_ref_table.person_list'
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_IN_DB', 'assertEqual', 'id', 'split', 'options', 'sorted', 'name', 'IS_EMPTY_OR', 'category', 'validate_and_insert', 'assertFalse', 'get', 'IS_LENGTH', 'ref_table', 'assertTrue', 'person_keyed', 'ref_table_field', 'list_ref_table', 'drop')
                varnames   ('self', 'db', 'george_id', 'costanza_id', 'rtn', 'vldtr', 'ret')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_DB'
                firstlineno 213
                lnotab
                   0x02011e014601360136013401300134012c013e0130016c013001260108
                   ff10033601480130013a0108ff10033601260106ff100334010e010aff10
                   0202fe10032c0128010cff1003600128010cff100360010e010201020102
                   010201020102fa10070cf910083a014e0102ff120318011c011afe10040c
@@ -3964,14 +3968,195 @@
                   01020120fb120716012c0116012c0116012c01280116012c0238012c0138
                   012c0218013cff100336015201220104ff12035201340130024c01360136
                   0132012c01180102011c011efd100536015201220104ff12035201220128
                   0116012c02180102011c011efd100536015201220108ff12035201200128
                   011a01340132013201320132013201
             code
                argcount  : 1
+               nlocals   : 2
+               stacksize : 6
+               flags     : 3
+               code
+                  0x97007401000000000000000000006401a6010000ab0100000000000000
+                  007d017c01a0010000000000000000000000000000000000000000640274
+                  05000000000000000000006403a6010000ab010000000000000000a60200
+                  00ab02000000000000000001007c016a030000000000000000a004000000
+                  00000000000000000000000000000000006404ac05a6010000ab01000000
+                  000000000001007c016a030000000000000000a004000000000000000000
+                  00000000000000000000006406ac05a6010000ab01000000000000000001
+                  00740b000000000000000000007c016402a6020000ab0200000000000000
+                  00a0060000000000000000000000000000000000000000a6000000ab0000
+                  0000000000000067006407a2016b020000000073024a008201640884007c
+                  016a0300000000000000005f070000000000000000740b00000000000000
+                  0000007c016402a6020000ab020000000000000000a00600000000000000
+                  00000000000000000000000000a6000000ab000000000000000000670064
+                  09a2016b020000000073024a008201740b000000000000000000007c0164
+                  026400ac0aa6030000ab030000000000000000a006000000000000000000
+                  0000000000000000000000a6000000ab000000000000000000640b640c67
+                  026b020000000073024a008201740b000000000000000000007c01640264
+                  0dac0aa6030000ab030000000000000000a0060000000000000000000000
+                  000000000000000000a6000000ab0000000000000000006700640ea2016b
+                  020000000073024a00820164005300
+               389           0 RESUME                   0
+               
+               390           2 LOAD_GLOBAL              1 (NULL + DAL)
+                            14 LOAD_CONST               1 ('sqlite:memory')
+                            16 PRECALL                  1
+                            20 CALL                     1
+                            30 STORE_FAST               1 (db)
+               
+               391          32 LOAD_FAST                1 (db)
+                            34 LOAD_METHOD              1 (define_table)
+                            56 LOAD_CONST               2 ('thing')
+                            58 LOAD_GLOBAL              5 (NULL + Field)
+                            70 LOAD_CONST               3 ('name')
+                            72 PRECALL                  1
+                            76 CALL                     1
+                            86 PRECALL                  2
+                            90 CALL                     2
+                           100 POP_TOP
+               
+               392         102 LOAD_FAST                1 (db)
+                           104 LOAD_ATTR                3 (thing)
+                           114 LOAD_METHOD              4 (insert)
+                           136 LOAD_CONST               4 ('red')
+                           138 KW_NAMES                 5
+                           140 PRECALL                  1
+                           144 CALL                     1
+                           154 POP_TOP
+               
+               393         156 LOAD_FAST                1 (db)
+                           158 LOAD_ATTR                3 (thing)
+                           168 LOAD_METHOD              4 (insert)
+                           190 LOAD_CONST               6 ('green')
+                           192 KW_NAMES                 5
+                           194 PRECALL                  1
+                           198 CALL                     1
+                           208 POP_TOP
+               
+               394         210 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+                           222 LOAD_FAST                1 (db)
+                           224 LOAD_CONST               2 ('thing')
+                           226 PRECALL                  2
+                           230 CALL                     2
+                           240 LOAD_METHOD              6 (options)
+                           262 PRECALL                  0
+                           266 CALL                     0
+                           276 BUILD_LIST               0
+                           278 LOAD_CONST               7 ((('', ''), ('1', '1'), ('2', '2')))
+                           280 LIST_EXTEND              1
+                           282 COMPARE_OP               2 (==)
+                           288 POP_JUMP_FORWARD_IF_TRUE     2 (to 294)
+                           290 LOAD_ASSERTION_ERROR
+                           292 RAISE_VARARGS            1
+               
+               396     >>  294 LOAD_CONST               8 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 396>)
+                           296 MAKE_FUNCTION            0
+                           298 LOAD_FAST                1 (db)
+                           300 LOAD_ATTR                3 (thing)
+                           310 STORE_ATTR               7 (_format)
+               
+               397         320 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+                           332 LOAD_FAST                1 (db)
+                           334 LOAD_CONST               2 ('thing')
+                           336 PRECALL                  2
+                           340 CALL                     2
+                           350 LOAD_METHOD              6 (options)
+                           372 PRECALL                  0
+                           376 CALL                     0
+                           386 BUILD_LIST               0
+                           388 LOAD_CONST               9 ((('', ''), ('1', 'red'), ('2', 'green')))
+                           390 LIST_EXTEND              1
+                           392 COMPARE_OP               2 (==)
+                           398 POP_JUMP_FORWARD_IF_TRUE     2 (to 404)
+                           400 LOAD_ASSERTION_ERROR
+                           402 RAISE_VARARGS            1
+               
+               398     >>  404 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+                           416 LOAD_FAST                1 (db)
+                           418 LOAD_CONST               2 ('thing')
+                           420 LOAD_CONST               0 (None)
+                           422 KW_NAMES                10
+                           424 PRECALL                  3
+                           428 CALL                     3
+                           438 LOAD_METHOD              6 (options)
+                           460 PRECALL                  0
+                           464 CALL                     0
+                           474 LOAD_CONST              11 (('1', 'red'))
+                           476 LOAD_CONST              12 (('2', 'green'))
+                           478 BUILD_LIST               2
+                           480 COMPARE_OP               2 (==)
+                           486 POP_JUMP_FORWARD_IF_TRUE     2 (to 492)
+                           488 LOAD_ASSERTION_ERROR
+                           490 RAISE_VARARGS            1
+               
+               399     >>  492 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+                           504 LOAD_FAST                1 (db)
+                           506 LOAD_CONST               2 ('thing')
+                           508 LOAD_CONST              13 ('x')
+                           510 KW_NAMES                10
+                           512 PRECALL                  3
+                           516 CALL                     3
+                           526 LOAD_METHOD              6 (options)
+                           548 PRECALL                  0
+                           552 CALL                     0
+                           562 BUILD_LIST               0
+                           564 LOAD_CONST              14 ((('', 'x'), ('1', 'red'), ('2', 'green')))
+                           566 LIST_EXTEND              1
+                           568 COMPARE_OP               2 (==)
+                           574 POP_JUMP_FORWARD_IF_TRUE     2 (to 580)
+                           576 LOAD_ASSERTION_ERROR
+                           578 RAISE_VARARGS            1
+                       >>  580 LOAD_CONST               0 (None)
+                           582 RETURN_VALUE
+               consts
+                  None
+                  'sqlite:memory'
+                  'thing'
+                  'name'
+                  'red'
+                  ('name',)
+                  'green'
+                  (('', ''), ('1', '1'), ('2', '2'))
+                  code
+                     argcount  : 1
+                     nlocals   : 1
+                     stacksize : 1
+                     flags     : 19
+                     code 0x97007c006a0000000000000000005300
+                     396           0 RESUME                   0
+                                   2 LOAD_FAST                0 (i)
+                                   4 LOAD_ATTR                0 (name)
+                                  14 RETURN_VALUE
+                     consts
+                        None
+                     names      ('name',)
+                     varnames   ('i',)
+                     freevars   ()
+                     cellvars   ()
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+                     name       '<lambda>'
+                     firstlineno 396
+                     lnotab 0x
+                  (('', ''), ('1', 'red'), ('2', 'green'))
+                  ('zero',)
+                  ('1', 'red')
+                  ('2', 'green')
+                  'x'
+                  (('', 'x'), ('1', 'red'), ('2', 'green'))
+               names      ('DAL', 'define_table', 'Field', 'thing', 'insert', 'IS_IN_DB', 'options', '_format')
+               varnames   ('self', 'db')
+               freevars   ()
+               cellvars   ()
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+               name       'test_IS_IN_DB_options'
+               firstlineno 389
+               lnotab 0x02011e0146013601360154021a0154015801
+            code
+               argcount  : 1
                nlocals   : 4
                stacksize : 7
                flags     : 3
                code
                   0x97007401000000000000000000006401a6010000ab0100000000000000
                   007d017c01a0010000000000000000000000000000000000000000640274
                   05000000000000000000006403a6010000ab010000000000000000740500
@@ -4010,164 +4195,164 @@
                   00000000000000010002007c036405a6010000ab0100000000000000007d
                   027c00a00600000000000000000000000000000000000000007c02640da6
                   020000ab020000000000000000010002007c036407a6010000ab01000000
                   00000000007d027c00a00600000000000000000000000000000000000000
                   007c026417a6020000ab02000000000000000001007c016a030000000000
                   000000a0090000000000000000000000000000000000000000a6000000ab
                   000000000000000000010064005300
-               389           0 RESUME                   0
+               402           0 RESUME                   0
                
-               390           2 LOAD_GLOBAL              1 (NULL + DAL)
+               403           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               391          32 LOAD_FAST                1 (db)
+               404          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('person')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 LOAD_GLOBAL              5 (NULL + Field)
                             98 LOAD_CONST               4 ('nickname')
                            100 PRECALL                  1
                            104 CALL                     1
                            114 PRECALL                  3
                            118 CALL                     3
                            128 POP_TOP
                
-               392         130 LOAD_FAST                1 (db)
+               405         130 LOAD_FAST                1 (db)
                            132 LOAD_ATTR                3 (person)
                            142 LOAD_METHOD              4 (insert)
                            164 LOAD_CONST               5 ('george')
                            166 KW_NAMES                 6
                            168 PRECALL                  1
                            172 CALL                     1
                            182 POP_TOP
                
-               393         184 LOAD_FAST                1 (db)
+               406         184 LOAD_FAST                1 (db)
                            186 LOAD_ATTR                3 (person)
                            196 LOAD_METHOD              4 (insert)
                            218 LOAD_CONST               7 ('costanza')
                            220 LOAD_CONST               8 ('T Bone')
                            222 KW_NAMES                 9
                            224 PRECALL                  2
                            228 CALL                     2
                            238 POP_TOP
                
-               394         240 PUSH_NULL
+               407         240 PUSH_NULL
                            242 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            254 LOAD_FAST                1 (db)
                            256 LOAD_CONST              10 ('person.name')
                            258 LOAD_CONST              11 ('oops')
                            260 KW_NAMES                12
                            262 PRECALL                  3
                            266 CALL                     3
                            276 LOAD_CONST               5 ('george')
                            278 PRECALL                  1
                            282 CALL                     1
                            292 STORE_FAST               2 (rtn)
                
-               395         294 LOAD_FAST                0 (self)
+               408         294 LOAD_FAST                0 (self)
                            296 LOAD_METHOD              6 (assertEqual)
                            318 LOAD_FAST                2 (rtn)
                            320 LOAD_CONST              13 (('george', 'oops'))
                            322 PRECALL                  2
                            326 CALL                     2
                            336 POP_TOP
                
-               396         338 PUSH_NULL
+               409         338 PUSH_NULL
                            340 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                
-               397         352 LOAD_FAST                1 (db)
+               410         352 LOAD_FAST                1 (db)
                            354 LOAD_CONST              10 ('person.name')
                            356 LOAD_CONST              11 ('oops')
                            358 LOAD_CONST               5 ('george')
                            360 BUILD_LIST               1
                
-               396         362 KW_NAMES                14
+               409         362 KW_NAMES                14
                            364 PRECALL                  4
                            368 CALL                     4
                
-               398         378 LOAD_CONST               5 ('george')
+               411         378 LOAD_CONST               5 ('george')
                
-               396         380 PRECALL                  1
+               409         380 PRECALL                  1
                            384 CALL                     1
                            394 STORE_FAST               2 (rtn)
                
-               399         396 LOAD_FAST                0 (self)
+               412         396 LOAD_FAST                0 (self)
                            398 LOAD_METHOD              6 (assertEqual)
                            420 LOAD_FAST                2 (rtn)
                            422 LOAD_CONST              15 (('george', None))
                            424 PRECALL                  2
                            428 CALL                     2
                            438 POP_TOP
                
-               400         440 PUSH_NULL
+               413         440 PUSH_NULL
                            442 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            454 LOAD_FAST                1 (db)
                            456 LOAD_CONST              10 ('person.name')
                            458 LOAD_CONST              11 ('oops')
                            460 KW_NAMES                12
                            462 PRECALL                  3
                            466 CALL                     3
                            476 LOAD_CONST              16 ('  ')
                            478 PRECALL                  1
                            482 CALL                     1
                            492 STORE_FAST               2 (rtn)
                
-               401         494 LOAD_FAST                0 (self)
+               414         494 LOAD_FAST                0 (self)
                            496 LOAD_METHOD              6 (assertEqual)
                            518 LOAD_FAST                2 (rtn)
                            520 LOAD_CONST              17 (('  ', 'oops'))
                            522 PRECALL                  2
                            526 CALL                     2
                            536 POP_TOP
                
-               402         538 PUSH_NULL
+               415         538 PUSH_NULL
                            540 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            552 LOAD_FAST                1 (db)
                            554 LOAD_CONST              10 ('person.name')
                            556 PRECALL                  2
                            560 CALL                     2
                            570 LOAD_CONST              18 ('jerry')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               2 (rtn)
                
-               403         588 LOAD_FAST                0 (self)
+               416         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              6 (assertEqual)
                            612 LOAD_FAST                2 (rtn)
                            614 LOAD_CONST              19 (('jerry', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               404         632 PUSH_NULL
+               417         632 PUSH_NULL
                            634 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            646 LOAD_FAST                1 (db)
                            648 LOAD_CONST              10 ('person.name')
                            650 PRECALL                  2
                            654 CALL                     2
                            664 LOAD_CONST              18 ('jerry')
                            666 PRECALL                  1
                            670 CALL                     1
                            680 STORE_FAST               2 (rtn)
                
-               405         682 LOAD_FAST                0 (self)
+               418         682 LOAD_FAST                0 (self)
                            684 LOAD_METHOD              6 (assertEqual)
                            706 LOAD_FAST                2 (rtn)
                            708 LOAD_CONST              19 (('jerry', None))
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               406         726 PUSH_NULL
+               419         726 PUSH_NULL
                            728 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            740 PUSH_NULL
                            742 LOAD_FAST                1 (db)
                            744 LOAD_FAST                1 (db)
                            746 LOAD_ATTR                3 (person)
                            756 LOAD_ATTR                7 (id)
                            766 LOAD_CONST              20 (0)
@@ -4178,94 +4363,94 @@
                            790 PRECALL                  2
                            794 CALL                     2
                            804 LOAD_CONST              18 ('jerry')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               2 (rtn)
                
-               407         822 LOAD_FAST                0 (self)
+               420         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              6 (assertEqual)
                            846 LOAD_FAST                2 (rtn)
                            848 LOAD_CONST              19 (('jerry', None))
                            850 PRECALL                  2
                            854 CALL                     2
                            864 POP_TOP
                
-               408         866 PUSH_NULL
+               421         866 PUSH_NULL
                            868 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            880 LOAD_FAST                1 (db)
                            882 LOAD_FAST                1 (db)
                            884 LOAD_ATTR                3 (person)
                            894 LOAD_CONST              11 ('oops')
                            896 KW_NAMES                12
                            898 PRECALL                  3
                            902 CALL                     3
                            912 LOAD_CONST              21 (1)
                            914 PRECALL                  1
                            918 CALL                     1
                            928 STORE_FAST               2 (rtn)
                
-               409         930 LOAD_FAST                0 (self)
+               422         930 LOAD_FAST                0 (self)
                            932 LOAD_METHOD              6 (assertEqual)
                            954 LOAD_FAST                2 (rtn)
                            956 LOAD_CONST              22 ((1, 'oops'))
                            958 PRECALL                  2
                            962 CALL                     2
                            972 POP_TOP
                
-               410         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
+               423         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            986 LOAD_FAST                1 (db)
                            988 LOAD_CONST              10 ('person.name')
                            990 LOAD_CONST              11 ('oops')
                            992 KW_NAMES                12
                            994 PRECALL                  3
                            998 CALL                     3
                           1008 STORE_FAST               3 (vldtr)
                
-               411        1010 LOAD_FAST                3 (vldtr)
+               424        1010 LOAD_FAST                3 (vldtr)
                           1012 LOAD_METHOD              8 (set_self_id)
                           1034 LOAD_CONST               7 ('costanza')
                           1036 LOAD_CONST               8 ('T Bone')
                           1038 LOAD_CONST               9 (('name', 'nickname'))
                           1040 BUILD_CONST_KEY_MAP      2
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 POP_TOP
                
-               412        1058 PUSH_NULL
+               425        1058 PUSH_NULL
                           1060 LOAD_FAST                3 (vldtr)
                           1062 LOAD_CONST               5 ('george')
                           1064 PRECALL                  1
                           1068 CALL                     1
                           1078 STORE_FAST               2 (rtn)
                
-               413        1080 LOAD_FAST                0 (self)
+               426        1080 LOAD_FAST                0 (self)
                           1082 LOAD_METHOD              6 (assertEqual)
                           1104 LOAD_FAST                2 (rtn)
                           1106 LOAD_CONST              13 (('george', 'oops'))
                           1108 PRECALL                  2
                           1112 CALL                     2
                           1122 POP_TOP
                
-               414        1124 PUSH_NULL
+               427        1124 PUSH_NULL
                           1126 LOAD_FAST                3 (vldtr)
                           1128 LOAD_CONST               7 ('costanza')
                           1130 PRECALL                  1
                           1134 CALL                     1
                           1144 STORE_FAST               2 (rtn)
                
-               415        1146 LOAD_FAST                0 (self)
+               428        1146 LOAD_FAST                0 (self)
                           1148 LOAD_METHOD              6 (assertEqual)
                           1170 LOAD_FAST                2 (rtn)
                           1172 LOAD_CONST              23 (('costanza', None))
                           1174 PRECALL                  2
                           1178 CALL                     2
                           1188 POP_TOP
                
-               417        1190 LOAD_FAST                1 (db)
+               430        1190 LOAD_FAST                1 (db)
                           1192 LOAD_ATTR                3 (person)
                           1202 LOAD_METHOD              9 (drop)
                           1224 PRECALL                  0
                           1228 CALL                     0
                           1238 POP_TOP
                           1240 LOAD_CONST               0 (None)
                           1242 RETURN_VALUE
@@ -4294,17 +4479,17 @@
                   1
                   (1, 'oops')
                   ('costanza', None)
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_NOT_IN_DB', 'assertEqual', 'id', 'set_self_id', 'drop')
                varnames   ('self', 'db', 'rtn', 'vldtr')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_IN_DB'
-               firstlineno 389
+               firstlineno 402
                lnotab
                   0x02011e0162013601380136012c010e010aff100202fe10032c0136012c
                   0132012c0132012c0160012c0140012c012401300116012c0116012c02
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -4344,233 +4529,233 @@
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab000000000000000000640ea6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c01640fa60200
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab0000000000000000006410a6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c016411a60200
                   00ab020000000000000000010064005300
-               419           0 RESUME                   0
+               432           0 RESUME                   0
                
-               420           2 PUSH_NULL
+               433           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               3 ('4')
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               421          52 LOAD_FAST                0 (self)
+               434          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               4 ((4, None))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               422          96 PUSH_NULL
+               435          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               5 (4)
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               423         146 LOAD_FAST                0 (self)
+               436         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               4 ((4, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               424         190 PUSH_NULL
+               437         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               1 (1)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               425         240 LOAD_FAST                0 (self)
+               438         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               6 ((1, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               426         284 PUSH_NULL
+               439         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               2 (5)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               427         334 LOAD_FAST                0 (self)
+               440         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               428         378 PUSH_NULL
+               441         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               2 (5)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               429         428 LOAD_FAST                0 (self)
+               442         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               430         472 PUSH_NULL
+               443         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST               8 (3.5)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               431         522 LOAD_FAST                0 (self)
+               444         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST               9 ((3.5, 'Enter an integer between 1 and 4'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               432         566 PUSH_NULL
+               445         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            580 LOAD_CONST               0 (None)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST               3 ('4')
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               433         616 LOAD_FAST                0 (self)
+               446         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST               4 ((4, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               434         660 PUSH_NULL
+               447         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            674 LOAD_CONST               0 (None)
                            676 LOAD_CONST               2 (5)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              10 ('6')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               435         710 LOAD_FAST                0 (self)
+               448         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              11 (('6', 'Enter an integer less than or equal to 4'))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               436         754 PUSH_NULL
+               449         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            768 LOAD_CONST               1 (1)
                            770 LOAD_CONST               0 (None)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST               3 ('4')
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               437         804 LOAD_FAST                0 (self)
+               450         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST               4 ((4, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               438         848 PUSH_NULL
+               451         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              12 ('0')
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               439         898 LOAD_FAST                0 (self)
+               452         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              13 (('0', 'Enter an integer greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               440         942 PUSH_NULL
+               453         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            956 PRECALL                  0
                            960 CALL                     0
                            970 LOAD_CONST              14 (6)
                            972 PRECALL                  1
                            976 CALL                     1
                            986 STORE_FAST               1 (rtn)
                
-               441         988 LOAD_FAST                0 (self)
+               454         988 LOAD_FAST                0 (self)
                            990 LOAD_METHOD              1 (assertEqual)
                           1012 LOAD_FAST                1 (rtn)
                           1014 LOAD_CONST              15 ((6, None))
                           1016 PRECALL                  2
                           1020 CALL                     2
                           1030 POP_TOP
                
-               442        1032 PUSH_NULL
+               455        1032 PUSH_NULL
                           1034 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                           1046 PRECALL                  0
                           1050 CALL                     0
                           1060 LOAD_CONST              16 ('abc')
                           1062 PRECALL                  1
                           1066 CALL                     1
                           1076 STORE_FAST               1 (rtn)
                
-               443        1078 LOAD_FAST                0 (self)
+               456        1078 LOAD_FAST                0 (self)
                           1080 LOAD_METHOD              1 (assertEqual)
                           1102 LOAD_FAST                1 (rtn)
                           1104 LOAD_CONST              17 (('abc', 'Enter an integer'))
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 POP_TOP
                           1122 LOAD_CONST               0 (None)
@@ -4594,17 +4779,17 @@
                   (6, None)
                   'abc'
                   ('abc', 'Enter an integer')
                names      ('IS_INT_IN_RANGE', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_INT_IN_RANGE'
-               firstlineno 419
+               firstlineno 432
                lnotab
                   0x020132012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -4665,345 +4850,345 @@
                   00000000000000641aa6010000ab0100000000000000007d017c00a00100
                   000000000000000000000000000000000000007c01641ba6020000ab0200
                   0000000000000001007401000000000000000000006417ac18a6010000ab
                   010000000000000000a00200000000000000000000000000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c01641ca6020000ab0200000000000000
                   00010064005300
-               445           0 RESUME                   0
+               458           0 RESUME                   0
                
-               447           2 PUSH_NULL
+               460           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               448          52 LOAD_FAST                0 (self)
+               461          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               449          96 PUSH_NULL
+               462          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               450         146 LOAD_FAST                0 (self)
+               463         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               5 ((4.0, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               451         190 PUSH_NULL
+               464         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               6 (4)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               452         240 LOAD_FAST                0 (self)
+               465         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               5 ((4.0, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               453         284 PUSH_NULL
+               466         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               1 (1)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               454         334 LOAD_FAST                0 (self)
+               467         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((1.0, None))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               455         378 PUSH_NULL
+               468         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               8 (5.25)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               456         428 LOAD_FAST                0 (self)
+               469         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               9 ((5.25, 'Enter a number between 1 and 5'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               457         472 PUSH_NULL
+               470         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST              10 (6.0)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               458         522 LOAD_FAST                0 (self)
+               471         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST              11 ((6.0, 'Enter a number between 1 and 5'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               459         566 PUSH_NULL
+               472         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            580 LOAD_CONST               1 (1)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST              12 (3.5)
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               460         616 LOAD_FAST                0 (self)
+               473         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST              13 ((3.5, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               461         660 PUSH_NULL
+               474         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            674 LOAD_CONST               1 (1)
                            676 LOAD_CONST               0 (None)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              12 (3.5)
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               462         710 LOAD_FAST                0 (self)
+               475         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              13 ((3.5, None))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               463         754 PUSH_NULL
+               476         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            768 LOAD_CONST               0 (None)
                            770 LOAD_CONST               2 (5)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST              12 (3.5)
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               464         804 LOAD_FAST                0 (self)
+               477         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST              13 ((3.5, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               465         848 PUSH_NULL
+               478         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              14 (0.5)
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               466         898 LOAD_FAST                0 (self)
+               479         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              15 ((0.5, 'Enter a number greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               467         942 PUSH_NULL
+               480         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            956 LOAD_CONST               0 (None)
                            958 LOAD_CONST               2 (5)
                            960 PRECALL                  2
                            964 CALL                     2
                            974 LOAD_CONST              16 (6.5)
                            976 PRECALL                  1
                            980 CALL                     1
                            990 STORE_FAST               1 (rtn)
                
-               468         992 LOAD_FAST                0 (self)
+               481         992 LOAD_FAST                0 (self)
                            994 LOAD_METHOD              1 (assertEqual)
                           1016 LOAD_FAST                1 (rtn)
                           1018 LOAD_CONST              17 ((6.5, 'Enter a number less than or equal to 5'))
                           1020 PRECALL                  2
                           1024 CALL                     2
                           1034 POP_TOP
                
-               469        1036 PUSH_NULL
+               482        1036 PUSH_NULL
                           1038 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1050 PRECALL                  0
                           1054 CALL                     0
                           1064 LOAD_CONST              16 (6.5)
                           1066 PRECALL                  1
                           1070 CALL                     1
                           1080 STORE_FAST               1 (rtn)
                
-               470        1082 LOAD_FAST                0 (self)
+               483        1082 LOAD_FAST                0 (self)
                           1084 LOAD_METHOD              1 (assertEqual)
                           1106 LOAD_FAST                1 (rtn)
                           1108 LOAD_CONST              18 ((6.5, None))
                           1110 PRECALL                  2
                           1114 CALL                     2
                           1124 POP_TOP
                
-               471        1126 PUSH_NULL
+               484        1126 PUSH_NULL
                           1128 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1140 PRECALL                  0
                           1144 CALL                     0
                           1154 LOAD_CONST              19 ('abc')
                           1156 PRECALL                  1
                           1160 CALL                     1
                           1170 STORE_FAST               1 (rtn)
                
-               472        1172 LOAD_FAST                0 (self)
+               485        1172 LOAD_FAST                0 (self)
                           1174 LOAD_METHOD              1 (assertEqual)
                           1196 LOAD_FAST                1 (rtn)
                           1198 LOAD_CONST              20 (('abc', 'Enter a number'))
                           1200 PRECALL                  2
                           1204 CALL                     2
                           1214 POP_TOP
                
-               473        1216 PUSH_NULL
+               486        1216 PUSH_NULL
                           1218 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1230 PRECALL                  0
                           1234 CALL                     0
                           1244 LOAD_CONST              21 ('6,5')
                           1246 PRECALL                  1
                           1250 CALL                     1
                           1260 STORE_FAST               1 (rtn)
                
-               474        1262 LOAD_FAST                0 (self)
+               487        1262 LOAD_FAST                0 (self)
                           1264 LOAD_METHOD              1 (assertEqual)
                           1286 LOAD_FAST                1 (rtn)
                           1288 LOAD_CONST              22 (('6,5', 'Enter a number'))
                           1290 PRECALL                  2
                           1294 CALL                     2
                           1304 POP_TOP
                
-               475        1306 PUSH_NULL
+               488        1306 PUSH_NULL
                           1308 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1320 LOAD_CONST              23 (',')
                           1322 KW_NAMES                24
                           1324 PRECALL                  1
                           1328 CALL                     1
                           1338 LOAD_CONST              25 ('6.5')
                           1340 PRECALL                  1
                           1344 CALL                     1
                           1354 STORE_FAST               1 (rtn)
                
-               476        1356 LOAD_FAST                0 (self)
+               489        1356 LOAD_FAST                0 (self)
                           1358 LOAD_METHOD              1 (assertEqual)
                           1380 LOAD_FAST                1 (rtn)
                           1382 LOAD_CONST              18 ((6.5, None))
                           1384 PRECALL                  2
                           1388 CALL                     2
                           1398 POP_TOP
                
-               478        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               491        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1412 LOAD_CONST              23 (',')
                           1414 KW_NAMES                24
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_METHOD              2 (formatter)
                           1452 LOAD_CONST               0 (None)
                           1454 PRECALL                  1
                           1458 CALL                     1
                           1468 STORE_FAST               1 (rtn)
                
-               479        1470 LOAD_FAST                0 (self)
+               492        1470 LOAD_FAST                0 (self)
                           1472 LOAD_METHOD              1 (assertEqual)
                           1494 LOAD_FAST                1 (rtn)
                           1496 LOAD_CONST               0 (None)
                           1498 PRECALL                  2
                           1502 CALL                     2
                           1512 POP_TOP
                
-               480        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               493        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1526 LOAD_CONST              23 (',')
                           1528 KW_NAMES                24
                           1530 PRECALL                  1
                           1534 CALL                     1
                           1544 LOAD_METHOD              2 (formatter)
                           1566 LOAD_CONST              26 (0.25)
                           1568 PRECALL                  1
                           1572 CALL                     1
                           1582 STORE_FAST               1 (rtn)
                
-               481        1584 LOAD_FAST                0 (self)
+               494        1584 LOAD_FAST                0 (self)
                           1586 LOAD_METHOD              1 (assertEqual)
                           1608 LOAD_FAST                1 (rtn)
                           1610 LOAD_CONST              27 ('0,25')
                           1612 PRECALL                  2
                           1616 CALL                     2
                           1626 POP_TOP
                
-               483        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               496        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1640 LOAD_CONST              23 (',')
                           1642 KW_NAMES                24
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_METHOD              2 (formatter)
                           1680 LOAD_CONST               1 (1)
                           1682 PRECALL                  1
                           1686 CALL                     1
                           1696 STORE_FAST               1 (rtn)
                
-               484        1698 LOAD_FAST                0 (self)
+               497        1698 LOAD_FAST                0 (self)
                           1700 LOAD_METHOD              1 (assertEqual)
                           1722 LOAD_FAST                1 (rtn)
                           1724 LOAD_CONST              28 ('1,00')
                           1726 PRECALL                  2
                           1730 CALL                     2
                           1740 POP_TOP
                           1742 LOAD_CONST               0 (None)
@@ -5038,17 +5223,17 @@
                   0.25
                   '0,25'
                   '1,00'
                names      ('IS_FLOAT_IN_RANGE', 'assertEqual', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FLOAT_IN_RANGE'
-               firstlineno 445
+               firstlineno 458
                lnotab
                   0x020232012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c0132012c012e012c012e012c012e012c0132
                   012c0246012c0146012c024601
             code
                argcount  : 1
                nlocals   : 2
@@ -5150,560 +5335,560 @@
                   006400a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016400a6020000ab0200000000000000
                   0001007401000000000000000000006424ac25a6010000ab010000000000
                   000000a00400000000000000000000000000000000000000006426a60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c016427a6020000ab0200000000000000000100640053
                   00
-               486           0 RESUME                   0
+               499           0 RESUME                   0
                
-               488           2 PUSH_NULL
+               501           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               489          52 LOAD_FAST                0 (self)
+               502          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               490          96 PUSH_NULL
+               503          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               491         146 LOAD_FAST                0 (self)
+               504         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_GLOBAL              5 (NULL + decimal)
                            184 LOAD_ATTR                3 (Decimal)
                            194 LOAD_CONST               4 ('4')
                            196 PRECALL                  1
                            200 CALL                     1
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               492         230 PUSH_NULL
+               505         230 PUSH_NULL
                            232 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            244 LOAD_CONST               1 (1)
                            246 LOAD_CONST               2 (5)
                            248 PRECALL                  2
                            252 CALL                     2
                            262 LOAD_CONST               5 (4)
                            264 PRECALL                  1
                            268 CALL                     1
                            278 STORE_FAST               1 (rtn)
                
-               493         280 LOAD_FAST                0 (self)
+               506         280 LOAD_FAST                0 (self)
                            282 LOAD_METHOD              1 (assertEqual)
                            304 LOAD_FAST                1 (rtn)
                            306 LOAD_GLOBAL              5 (NULL + decimal)
                            318 LOAD_ATTR                3 (Decimal)
                            328 LOAD_CONST               4 ('4')
                            330 PRECALL                  1
                            334 CALL                     1
                            344 LOAD_CONST               0 (None)
                            346 BUILD_TUPLE              2
                            348 PRECALL                  2
                            352 CALL                     2
                            362 POP_TOP
                
-               494         364 PUSH_NULL
+               507         364 PUSH_NULL
                            366 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            378 LOAD_CONST               1 (1)
                            380 LOAD_CONST               2 (5)
                            382 PRECALL                  2
                            386 CALL                     2
                            396 LOAD_CONST               1 (1)
                            398 PRECALL                  1
                            402 CALL                     1
                            412 STORE_FAST               1 (rtn)
                
-               495         414 LOAD_FAST                0 (self)
+               508         414 LOAD_FAST                0 (self)
                            416 LOAD_METHOD              1 (assertEqual)
                            438 LOAD_FAST                1 (rtn)
                            440 LOAD_GLOBAL              5 (NULL + decimal)
                            452 LOAD_ATTR                3 (Decimal)
                            462 LOAD_CONST               6 ('1')
                            464 PRECALL                  1
                            468 CALL                     1
                            478 LOAD_CONST               0 (None)
                            480 BUILD_TUPLE              2
                            482 PRECALL                  2
                            486 CALL                     2
                            496 POP_TOP
                
-               496         498 PUSH_NULL
+               509         498 PUSH_NULL
                            500 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            512 LOAD_CONST               1 (1)
                            514 LOAD_CONST               2 (5)
                            516 PRECALL                  2
                            520 CALL                     2
                            530 LOAD_CONST               7 (5.25)
                            532 PRECALL                  1
                            536 CALL                     1
                            546 STORE_FAST               1 (rtn)
                
-               497         548 LOAD_FAST                0 (self)
+               510         548 LOAD_FAST                0 (self)
                            550 LOAD_METHOD              1 (assertEqual)
                            572 LOAD_FAST                1 (rtn)
                            574 LOAD_CONST               8 ((5.25, 'Enter a number between 1 and 5'))
                            576 PRECALL                  2
                            580 CALL                     2
                            590 POP_TOP
                
-               498         592 PUSH_NULL
+               511         592 PUSH_NULL
                            594 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            606 LOAD_CONST               7 (5.25)
                            608 LOAD_CONST               9 (6)
                            610 PRECALL                  2
                            614 CALL                     2
                            624 LOAD_CONST               7 (5.25)
                            626 PRECALL                  1
                            630 CALL                     1
                            640 STORE_FAST               1 (rtn)
                
-               499         642 LOAD_FAST                0 (self)
+               512         642 LOAD_FAST                0 (self)
                            644 LOAD_METHOD              1 (assertEqual)
                            666 LOAD_FAST                1 (rtn)
                            668 LOAD_GLOBAL              5 (NULL + decimal)
                            680 LOAD_ATTR                3 (Decimal)
                            690 LOAD_CONST              10 ('5.25')
                            692 PRECALL                  1
                            696 CALL                     1
                            706 LOAD_CONST               0 (None)
                            708 BUILD_TUPLE              2
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               500         726 PUSH_NULL
+               513         726 PUSH_NULL
                            728 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            740 LOAD_CONST               7 (5.25)
                            742 LOAD_CONST               9 (6)
                            744 PRECALL                  2
                            748 CALL                     2
                            758 LOAD_CONST              10 ('5.25')
                            760 PRECALL                  1
                            764 CALL                     1
                            774 STORE_FAST               1 (rtn)
                
-               501         776 LOAD_FAST                0 (self)
+               514         776 LOAD_FAST                0 (self)
                            778 LOAD_METHOD              1 (assertEqual)
                            800 LOAD_FAST                1 (rtn)
                            802 LOAD_GLOBAL              5 (NULL + decimal)
                            814 LOAD_ATTR                3 (Decimal)
                            824 LOAD_CONST              10 ('5.25')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 LOAD_CONST               0 (None)
                            842 BUILD_TUPLE              2
                            844 PRECALL                  2
                            848 CALL                     2
                            858 POP_TOP
                
-               502         860 PUSH_NULL
+               515         860 PUSH_NULL
                            862 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            874 LOAD_CONST               1 (1)
                            876 LOAD_CONST               2 (5)
                            878 PRECALL                  2
                            882 CALL                     2
                            892 LOAD_CONST              11 (6.0)
                            894 PRECALL                  1
                            898 CALL                     1
                            908 STORE_FAST               1 (rtn)
                
-               503         910 LOAD_FAST                0 (self)
+               516         910 LOAD_FAST                0 (self)
                            912 LOAD_METHOD              1 (assertEqual)
                            934 LOAD_FAST                1 (rtn)
                            936 LOAD_CONST              12 ((6.0, 'Enter a number between 1 and 5'))
                            938 PRECALL                  2
                            942 CALL                     2
                            952 POP_TOP
                
-               504         954 PUSH_NULL
+               517         954 PUSH_NULL
                            956 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            968 LOAD_CONST               1 (1)
                            970 LOAD_CONST               2 (5)
                            972 PRECALL                  2
                            976 CALL                     2
                            986 LOAD_CONST              13 (3.5)
                            988 PRECALL                  1
                            992 CALL                     1
                           1002 STORE_FAST               1 (rtn)
                
-               505        1004 LOAD_FAST                0 (self)
+               518        1004 LOAD_FAST                0 (self)
                           1006 LOAD_METHOD              1 (assertEqual)
                           1028 LOAD_FAST                1 (rtn)
                           1030 LOAD_GLOBAL              5 (NULL + decimal)
                           1042 LOAD_ATTR                3 (Decimal)
                           1052 LOAD_CONST              14 ('3.5')
                           1054 PRECALL                  1
                           1058 CALL                     1
                           1068 LOAD_CONST               0 (None)
                           1070 BUILD_TUPLE              2
                           1072 PRECALL                  2
                           1076 CALL                     2
                           1086 POP_TOP
                
-               506        1088 PUSH_NULL
+               519        1088 PUSH_NULL
                           1090 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1102 LOAD_CONST              15 (1.5)
                           1104 LOAD_CONST              16 (5.5)
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 LOAD_CONST              13 (3.5)
                           1122 PRECALL                  1
                           1126 CALL                     1
                           1136 STORE_FAST               1 (rtn)
                
-               507        1138 LOAD_FAST                0 (self)
+               520        1138 LOAD_FAST                0 (self)
                           1140 LOAD_METHOD              1 (assertEqual)
                           1162 LOAD_FAST                1 (rtn)
                           1164 LOAD_GLOBAL              5 (NULL + decimal)
                           1176 LOAD_ATTR                3 (Decimal)
                           1186 LOAD_CONST              14 ('3.5')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 LOAD_CONST               0 (None)
                           1204 BUILD_TUPLE              2
                           1206 PRECALL                  2
                           1210 CALL                     2
                           1220 POP_TOP
                
-               508        1222 PUSH_NULL
+               521        1222 PUSH_NULL
                           1224 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1236 LOAD_CONST              15 (1.5)
                           1238 LOAD_CONST              16 (5.5)
                           1240 PRECALL                  2
                           1244 CALL                     2
                           1254 LOAD_CONST              17 (6.5)
                           1256 PRECALL                  1
                           1260 CALL                     1
                           1270 STORE_FAST               1 (rtn)
                
-               509        1272 LOAD_FAST                0 (self)
+               522        1272 LOAD_FAST                0 (self)
                           1274 LOAD_METHOD              1 (assertEqual)
                           1296 LOAD_FAST                1 (rtn)
                           1298 LOAD_CONST              18 ((6.5, 'Enter a number between 1.5 and 5.5'))
                           1300 PRECALL                  2
                           1304 CALL                     2
                           1314 POP_TOP
                
-               510        1316 PUSH_NULL
+               523        1316 PUSH_NULL
                           1318 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1330 LOAD_CONST              15 (1.5)
                           1332 LOAD_CONST               0 (None)
                           1334 PRECALL                  2
                           1338 CALL                     2
                           1348 LOAD_CONST              17 (6.5)
                           1350 PRECALL                  1
                           1354 CALL                     1
                           1364 STORE_FAST               1 (rtn)
                
-               511        1366 LOAD_FAST                0 (self)
+               524        1366 LOAD_FAST                0 (self)
                           1368 LOAD_METHOD              1 (assertEqual)
                           1390 LOAD_FAST                1 (rtn)
                           1392 LOAD_GLOBAL              5 (NULL + decimal)
                           1404 LOAD_ATTR                3 (Decimal)
                           1414 LOAD_CONST              19 ('6.5')
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_CONST               0 (None)
                           1432 BUILD_TUPLE              2
                           1434 PRECALL                  2
                           1438 CALL                     2
                           1448 POP_TOP
                
-               512        1450 PUSH_NULL
+               525        1450 PUSH_NULL
                           1452 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1464 LOAD_CONST              15 (1.5)
                           1466 LOAD_CONST               0 (None)
                           1468 PRECALL                  2
                           1472 CALL                     2
                           1482 LOAD_CONST              20 (0.5)
                           1484 PRECALL                  1
                           1488 CALL                     1
                           1498 STORE_FAST               1 (rtn)
                
-               513        1500 LOAD_FAST                0 (self)
+               526        1500 LOAD_FAST                0 (self)
                           1502 LOAD_METHOD              1 (assertEqual)
                           1524 LOAD_FAST                1 (rtn)
                           1526 LOAD_CONST              21 ((0.5, 'Enter a number greater than or equal to 1.5'))
                           1528 PRECALL                  2
                           1532 CALL                     2
                           1542 POP_TOP
                
-               514        1544 PUSH_NULL
+               527        1544 PUSH_NULL
                           1546 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1558 LOAD_CONST               0 (None)
                           1560 LOAD_CONST              16 (5.5)
                           1562 PRECALL                  2
                           1566 CALL                     2
                           1576 LOAD_CONST              22 (4.5)
                           1578 PRECALL                  1
                           1582 CALL                     1
                           1592 STORE_FAST               1 (rtn)
                
-               515        1594 LOAD_FAST                0 (self)
+               528        1594 LOAD_FAST                0 (self)
                           1596 LOAD_METHOD              1 (assertEqual)
                           1618 LOAD_FAST                1 (rtn)
                           1620 LOAD_GLOBAL              5 (NULL + decimal)
                           1632 LOAD_ATTR                3 (Decimal)
                           1642 LOAD_CONST              23 ('4.5')
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_CONST               0 (None)
                           1660 BUILD_TUPLE              2
                           1662 PRECALL                  2
                           1666 CALL                     2
                           1676 POP_TOP
                
-               516        1678 PUSH_NULL
+               529        1678 PUSH_NULL
                           1680 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1692 LOAD_CONST               0 (None)
                           1694 LOAD_CONST              16 (5.5)
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 LOAD_CONST              17 (6.5)
                           1712 PRECALL                  1
                           1716 CALL                     1
                           1726 STORE_FAST               1 (rtn)
                
-               517        1728 LOAD_FAST                0 (self)
+               530        1728 LOAD_FAST                0 (self)
                           1730 LOAD_METHOD              1 (assertEqual)
                           1752 LOAD_FAST                1 (rtn)
                           1754 LOAD_CONST              24 ((6.5, 'Enter a number less than or equal to 5.5'))
                           1756 PRECALL                  2
                           1760 CALL                     2
                           1770 POP_TOP
                
-               518        1772 PUSH_NULL
+               531        1772 PUSH_NULL
                           1774 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1786 PRECALL                  0
                           1790 CALL                     0
                           1800 LOAD_CONST              17 (6.5)
                           1802 PRECALL                  1
                           1806 CALL                     1
                           1816 STORE_FAST               1 (rtn)
                
-               519        1818 LOAD_FAST                0 (self)
+               532        1818 LOAD_FAST                0 (self)
                           1820 LOAD_METHOD              1 (assertEqual)
                           1842 LOAD_FAST                1 (rtn)
                           1844 LOAD_GLOBAL              5 (NULL + decimal)
                           1856 LOAD_ATTR                3 (Decimal)
                           1866 LOAD_CONST              19 ('6.5')
                           1868 PRECALL                  1
                           1872 CALL                     1
                           1882 LOAD_CONST               0 (None)
                           1884 BUILD_TUPLE              2
                           1886 PRECALL                  2
                           1890 CALL                     2
                           1900 POP_TOP
                
-               520        1902 PUSH_NULL
+               533        1902 PUSH_NULL
                           1904 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1916 LOAD_CONST              25 (0)
                           1918 LOAD_CONST              26 (99)
                           1920 PRECALL                  2
                           1924 CALL                     2
                           1934 LOAD_CONST              27 (123.123)
                           1936 PRECALL                  1
                           1940 CALL                     1
                           1950 STORE_FAST               1 (rtn)
                
-               521        1952 LOAD_FAST                0 (self)
+               534        1952 LOAD_FAST                0 (self)
                           1954 LOAD_METHOD              1 (assertEqual)
                           1976 LOAD_FAST                1 (rtn)
                           1978 LOAD_CONST              28 ((123.123, 'Enter a number between 0 and 99'))
                           1980 PRECALL                  2
                           1984 CALL                     2
                           1994 POP_TOP
                
-               522        1996 PUSH_NULL
+               535        1996 PUSH_NULL
                           1998 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2010 LOAD_CONST              25 (0)
                           2012 LOAD_CONST              26 (99)
                           2014 PRECALL                  2
                           2018 CALL                     2
                           2028 LOAD_CONST              29 ('123.123')
                           2030 PRECALL                  1
                           2034 CALL                     1
                           2044 STORE_FAST               1 (rtn)
                
-               523        2046 LOAD_FAST                0 (self)
+               536        2046 LOAD_FAST                0 (self)
                           2048 LOAD_METHOD              1 (assertEqual)
                           2070 LOAD_FAST                1 (rtn)
                           2072 LOAD_CONST              30 (('123.123', 'Enter a number between 0 and 99'))
                           2074 PRECALL                  2
                           2078 CALL                     2
                           2088 POP_TOP
                
-               524        2090 PUSH_NULL
+               537        2090 PUSH_NULL
                           2092 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2104 LOAD_CONST              25 (0)
                           2106 LOAD_CONST              26 (99)
                           2108 PRECALL                  2
                           2112 CALL                     2
                           2122 LOAD_CONST              31 ('12.34')
                           2124 PRECALL                  1
                           2128 CALL                     1
                           2138 STORE_FAST               1 (rtn)
                
-               525        2140 LOAD_FAST                0 (self)
+               538        2140 LOAD_FAST                0 (self)
                           2142 LOAD_METHOD              1 (assertEqual)
                           2164 LOAD_FAST                1 (rtn)
                           2166 LOAD_GLOBAL              5 (NULL + decimal)
                           2178 LOAD_ATTR                3 (Decimal)
                           2188 LOAD_CONST              31 ('12.34')
                           2190 PRECALL                  1
                           2194 CALL                     1
                           2204 LOAD_CONST               0 (None)
                           2206 BUILD_TUPLE              2
                           2208 PRECALL                  2
                           2212 CALL                     2
                           2222 POP_TOP
                
-               526        2224 PUSH_NULL
+               539        2224 PUSH_NULL
                           2226 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2238 PRECALL                  0
                           2242 CALL                     0
                           2252 LOAD_CONST              32 ('abc')
                           2254 PRECALL                  1
                           2258 CALL                     1
                           2268 STORE_FAST               1 (rtn)
                
-               527        2270 LOAD_FAST                0 (self)
+               540        2270 LOAD_FAST                0 (self)
                           2272 LOAD_METHOD              1 (assertEqual)
                           2294 LOAD_FAST                1 (rtn)
                           2296 LOAD_CONST              33 (('abc', 'Enter a number'))
                           2298 PRECALL                  2
                           2302 CALL                     2
                           2312 POP_TOP
                
-               528        2314 PUSH_NULL
+               541        2314 PUSH_NULL
                           2316 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2328 PRECALL                  0
                           2332 CALL                     0
                           2342 LOAD_CONST              34 ('6,5')
                           2344 PRECALL                  1
                           2348 CALL                     1
                           2358 STORE_FAST               1 (rtn)
                
-               529        2360 LOAD_FAST                0 (self)
+               542        2360 LOAD_FAST                0 (self)
                           2362 LOAD_METHOD              1 (assertEqual)
                           2384 LOAD_FAST                1 (rtn)
                           2386 LOAD_CONST              35 (('6,5', 'Enter a number'))
                           2388 PRECALL                  2
                           2392 CALL                     2
                           2402 POP_TOP
                
-               530        2404 PUSH_NULL
+               543        2404 PUSH_NULL
                           2406 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2418 LOAD_CONST              36 (',')
                           2420 KW_NAMES                37
                           2422 PRECALL                  1
                           2426 CALL                     1
                           2436 LOAD_CONST              19 ('6.5')
                           2438 PRECALL                  1
                           2442 CALL                     1
                           2452 STORE_FAST               1 (rtn)
                
-               531        2454 LOAD_FAST                0 (self)
+               544        2454 LOAD_FAST                0 (self)
                           2456 LOAD_METHOD              1 (assertEqual)
                           2478 LOAD_FAST                1 (rtn)
                           2480 LOAD_GLOBAL              5 (NULL + decimal)
                           2492 LOAD_ATTR                3 (Decimal)
                           2502 LOAD_CONST              19 ('6.5')
                           2504 PRECALL                  1
                           2508 CALL                     1
                           2518 LOAD_CONST               0 (None)
                           2520 BUILD_TUPLE              2
                           2522 PRECALL                  2
                           2526 CALL                     2
                           2536 POP_TOP
                
-               532        2538 PUSH_NULL
+               545        2538 PUSH_NULL
                           2540 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2552 LOAD_CONST               1 (1)
                           2554 LOAD_CONST               2 (5)
                           2556 PRECALL                  2
                           2560 CALL                     2
                           2570 LOAD_GLOBAL              5 (NULL + decimal)
                           2582 LOAD_ATTR                3 (Decimal)
                           2592 LOAD_CONST               4 ('4')
                           2594 PRECALL                  1
                           2598 CALL                     1
                           2608 PRECALL                  1
                           2612 CALL                     1
                           2622 STORE_FAST               1 (rtn)
                
-               533        2624 LOAD_FAST                0 (self)
+               546        2624 LOAD_FAST                0 (self)
                           2626 LOAD_METHOD              1 (assertEqual)
                           2648 LOAD_FAST                1 (rtn)
                           2650 LOAD_GLOBAL              5 (NULL + decimal)
                           2662 LOAD_ATTR                3 (Decimal)
                           2672 LOAD_CONST               4 ('4')
                           2674 PRECALL                  1
                           2678 CALL                     1
                           2688 LOAD_CONST               0 (None)
                           2690 BUILD_TUPLE              2
                           2692 PRECALL                  2
                           2696 CALL                     2
                           2706 POP_TOP
                
-               535        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               548        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2720 LOAD_CONST              36 (',')
                           2722 KW_NAMES                37
                           2724 PRECALL                  1
                           2728 CALL                     1
                           2738 LOAD_METHOD              4 (formatter)
                           2760 LOAD_CONST               0 (None)
                           2762 PRECALL                  1
                           2766 CALL                     1
                           2776 STORE_FAST               1 (rtn)
                
-               536        2778 LOAD_FAST                0 (self)
+               549        2778 LOAD_FAST                0 (self)
                           2780 LOAD_METHOD              1 (assertEqual)
                           2802 LOAD_FAST                1 (rtn)
                           2804 LOAD_CONST               0 (None)
                           2806 PRECALL                  2
                           2810 CALL                     2
                           2820 POP_TOP
                
-               537        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               550        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2834 LOAD_CONST              36 (',')
                           2836 KW_NAMES                37
                           2838 PRECALL                  1
                           2842 CALL                     1
                           2852 LOAD_METHOD              4 (formatter)
                           2874 LOAD_CONST              38 (0.25)
                           2876 PRECALL                  1
                           2880 CALL                     1
                           2890 STORE_FAST               1 (rtn)
                
-               538        2892 LOAD_FAST                0 (self)
+               551        2892 LOAD_FAST                0 (self)
                           2894 LOAD_METHOD              1 (assertEqual)
                           2916 LOAD_FAST                1 (rtn)
                           2918 LOAD_CONST              39 ('0,25')
                           2920 PRECALL                  2
                           2924 CALL                     2
                           2934 POP_TOP
                           2936 LOAD_CONST               0 (None)
@@ -5749,17 +5934,17 @@
                   ('dot',)
                   0.25
                   '0,25'
                names      ('IS_DECIMAL_IN_RANGE', 'assertEqual', 'decimal', 'Decimal', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DECIMAL_IN_RANGE'
-               firstlineno 486
+               firstlineno 499
                lnotab
                   0x020232012c0132015401320154013201540132012c0132015401320154
                   0132012c01320154013201540132012c013201540132012c013201540132
                   012c012e01540132012c0132012c01320154012e012c012e012c01320154
                   015601540246012c014601
             code
                argcount  : 1
@@ -5803,238 +5988,238 @@
                   020000000000000000010002007401000000000000000000006416ac14a6
                   010000ab0100000000000000006417a6010000ab0100000000000000007d
                   017c00a00100000000000000000000000000000000000000007c016418a6
                   020000ab0200000000000000000100020074010000000000000000000064
                   13ac14a6010000ab0100000000000000006419a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   01641aa6020000ab020000000000000000010064005300
-               540           0 RESUME                   0
+               553           0 RESUME                   0
                
-               541           2 PUSH_NULL
+               554           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 (1)
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               542          48 LOAD_FAST                0 (self)
+               555          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 ((1, None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               543          92 PUSH_NULL
+               556          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (0)
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               544         138 LOAD_FAST                0 (self)
+               557         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((0, None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               545         182 PUSH_NULL
+               558         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('x')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               546         228 LOAD_FAST                0 (self)
+               559         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('x', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               547         272 PUSH_NULL
+               560         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 (' x ')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               548         318 LOAD_FAST                0 (self)
+               561         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 ((' x ', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               549         362 PUSH_NULL
+               562         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               0 (None)
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               550         408 LOAD_FAST                0 (self)
+               563         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               9 ((None, 'Enter a value'))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               551         452 PUSH_NULL
+               564         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              10 ('')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               552         498 LOAD_FAST                0 (self)
+               565         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              11 (('', 'Enter a value'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               553         542 PUSH_NULL
+               566         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              12 (b'')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               554         588 LOAD_FAST                0 (self)
+               567         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              13 ((b'', 'Enter a value'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               555         632 PUSH_NULL
+               568         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              14 ('  ')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               556         678 LOAD_FAST                0 (self)
+               569         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              15 (('  ', 'Enter a value'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               557         722 PUSH_NULL
+               570         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              16 (' \n\t')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               558         768 LOAD_FAST                0 (self)
+               571         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              17 ((' \n\t', 'Enter a value'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               559         812 PUSH_NULL
+               572         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 BUILD_LIST               0
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               560         858 LOAD_FAST                0 (self)
+               573         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 BUILD_LIST               0
                            886 LOAD_CONST              18 ('Enter a value')
                            888 BUILD_TUPLE              2
                            890 PRECALL                  2
                            894 CALL                     2
                            904 POP_TOP
                
-               561         906 PUSH_NULL
+               574         906 PUSH_NULL
                            908 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            920 LOAD_CONST              19 ('def')
                            922 KW_NAMES                20
                            924 PRECALL                  1
                            928 CALL                     1
                            938 LOAD_CONST              19 ('def')
                            940 PRECALL                  1
                            944 CALL                     1
                            954 STORE_FAST               1 (rtn)
                
-               562         956 LOAD_FAST                0 (self)
+               575         956 LOAD_FAST                0 (self)
                            958 LOAD_METHOD              1 (assertEqual)
                            980 LOAD_FAST                1 (rtn)
                            982 LOAD_CONST              21 (('def', 'Enter a value'))
                            984 PRECALL                  2
                            988 CALL                     2
                            998 POP_TOP
                
-               563        1000 PUSH_NULL
+               576        1000 PUSH_NULL
                           1002 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1014 LOAD_CONST              22 ('de[fg]')
                           1016 KW_NAMES                20
                           1018 PRECALL                  1
                           1022 CALL                     1
                           1032 LOAD_CONST              23 ('deg')
                           1034 PRECALL                  1
                           1038 CALL                     1
                           1048 STORE_FAST               1 (rtn)
                
-               564        1050 LOAD_FAST                0 (self)
+               577        1050 LOAD_FAST                0 (self)
                           1052 LOAD_METHOD              1 (assertEqual)
                           1074 LOAD_FAST                1 (rtn)
                           1076 LOAD_CONST              24 (('deg', 'Enter a value'))
                           1078 PRECALL                  2
                           1082 CALL                     2
                           1092 POP_TOP
                
-               565        1094 PUSH_NULL
+               578        1094 PUSH_NULL
                           1096 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1108 LOAD_CONST              19 ('def')
                           1110 KW_NAMES                20
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 LOAD_CONST              25 ('abc')
                           1128 PRECALL                  1
                           1132 CALL                     1
                           1142 STORE_FAST               1 (rtn)
                
-               566        1144 LOAD_FAST                0 (self)
+               579        1144 LOAD_FAST                0 (self)
                           1146 LOAD_METHOD              1 (assertEqual)
                           1168 LOAD_FAST                1 (rtn)
                           1170 LOAD_CONST              26 (('abc', None))
                           1172 PRECALL                  2
                           1176 CALL                     2
                           1186 POP_TOP
                           1188 LOAD_CONST               0 (None)
@@ -6067,17 +6252,17 @@
                   ('deg', 'Enter a value')
                   'abc'
                   ('abc', None)
                names      ('IS_NOT_EMPTY', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_EMPTY'
-               firstlineno 540
+               firstlineno 553
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e01300132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
@@ -6092,77 +6277,77 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006407a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016408a6020000ab0200000000000000
                   00010064005300
-               568           0 RESUME                   0
+               581           0 RESUME                   0
                
-               569           2 PUSH_NULL
+               582           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('1')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               570          48 LOAD_FAST                0 (self)
+               583          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('1', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               571          92 PUSH_NULL
+               584          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               572         138 LOAD_FAST                0 (self)
+               585         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               573         182 PUSH_NULL
+               586         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('A_a')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               574         228 LOAD_FAST                0 (self)
+               587         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('A_a', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               575         272 PUSH_NULL
+               588         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('!')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               576         318 LOAD_FAST                0 (self)
+               589         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('!', 'Enter only letters, numbers, and underscore'))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                            362 LOAD_CONST               0 (None)
@@ -6177,17 +6362,17 @@
                   ('A_a', None)
                   '!'
                   ('!', 'Enter only letters, numbers, and underscore')
                names      ('IS_ALPHANUMERIC', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_ALPHANUMERIC'
-               firstlineno 568
+               firstlineno 581
                lnotab 0x02012e012c012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -6287,584 +6472,584 @@
                   01643fa6020000ab02000000000000000001000200740100000000000000
                   0000006440ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016443a6020000ab020000000000000000010002007401000000
                   00000000000000a6000000ab0000000000000000006444a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016445a6020000ab020000000000000000010064005300
-               578           0 RESUME                   0
+               591           0 RESUME                   0
                
-               579           2 PUSH_NULL
+               592           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('a@b.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               580          48 LOAD_FAST                0 (self)
+               593          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('a@b.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               581          92 PUSH_NULL
+               594          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('abc@def.com')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               582         138 LOAD_FAST                0 (self)
+               595         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('abc@def.com', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               583         182 PUSH_NULL
+               596         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('abc@3def.com')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               584         228 LOAD_FAST                0 (self)
+               597         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('abc@3def.com', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               585         272 PUSH_NULL
+               598         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('abc@def.us')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               586         318 LOAD_FAST                0 (self)
+               599         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('abc@def.us', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               587         362 PUSH_NULL
+               600         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               9 ('abc@d_-f.us')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               588         408 LOAD_FAST                0 (self)
+               601         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST              10 (('abc@d_-f.us', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               589         452 PUSH_NULL
+               602         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              11 ('@def.com')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               590         498 LOAD_FAST                0 (self)
+               603         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              12 (('@def.com', 'Enter a valid email address'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               591         542 PUSH_NULL
+               604         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              13 ('"abc@def".com')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               592         588 LOAD_FAST                0 (self)
+               605         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              14 (('"abc@def".com', 'Enter a valid email address'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               593         632 PUSH_NULL
+               606         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              15 ('abc+def.com')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               594         678 LOAD_FAST                0 (self)
+               607         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              16 (('abc+def.com', 'Enter a valid email address'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               595         722 PUSH_NULL
+               608         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              17 ('abc@def.x')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               596         768 LOAD_FAST                0 (self)
+               609         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              18 (('abc@def.x', 'Enter a valid email address'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               597         812 PUSH_NULL
+               610         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              19 ('abc@def.12')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               598         858 LOAD_FAST                0 (self)
+               611         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              20 (('abc@def.12', 'Enter a valid email address'))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               599         902 PUSH_NULL
+               612         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              21 ('abc@def..com')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               600         948 LOAD_FAST                0 (self)
+               613         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              22 (('abc@def..com', 'Enter a valid email address'))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               601         992 PUSH_NULL
+               614         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1006 PRECALL                  0
                           1010 CALL                     0
                           1020 LOAD_CONST              23 ('abc@.def.com')
                           1022 PRECALL                  1
                           1026 CALL                     1
                           1036 STORE_FAST               1 (rtn)
                
-               602        1038 LOAD_FAST                0 (self)
+               615        1038 LOAD_FAST                0 (self)
                           1040 LOAD_METHOD              1 (assertEqual)
                           1062 LOAD_FAST                1 (rtn)
                           1064 LOAD_CONST              24 (('abc@.def.com', 'Enter a valid email address'))
                           1066 PRECALL                  2
                           1070 CALL                     2
                           1080 POP_TOP
                
-               603        1082 PUSH_NULL
+               616        1082 PUSH_NULL
                           1084 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1096 PRECALL                  0
                           1100 CALL                     0
                           1110 LOAD_CONST              25 ('abc@def.c_m')
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 STORE_FAST               1 (rtn)
                
-               604        1128 LOAD_FAST                0 (self)
+               617        1128 LOAD_FAST                0 (self)
                           1130 LOAD_METHOD              1 (assertEqual)
                           1152 LOAD_FAST                1 (rtn)
                           1154 LOAD_CONST              26 (('abc@def.c_m', 'Enter a valid email address'))
                           1156 PRECALL                  2
                           1160 CALL                     2
                           1170 POP_TOP
                
-               605        1172 PUSH_NULL
+               618        1172 PUSH_NULL
                           1174 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1186 PRECALL                  0
                           1190 CALL                     0
                           1200 LOAD_CONST              27 ('NotAnEmail')
                           1202 PRECALL                  1
                           1206 CALL                     1
                           1216 STORE_FAST               1 (rtn)
                
-               606        1218 LOAD_FAST                0 (self)
+               619        1218 LOAD_FAST                0 (self)
                           1220 LOAD_METHOD              1 (assertEqual)
                           1242 LOAD_FAST                1 (rtn)
                           1244 LOAD_CONST              28 (('NotAnEmail', 'Enter a valid email address'))
                           1246 PRECALL                  2
                           1250 CALL                     2
                           1260 POP_TOP
                
-               607        1262 PUSH_NULL
+               620        1262 PUSH_NULL
                           1264 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1276 PRECALL                  0
                           1280 CALL                     0
                           1290 LOAD_CONST              29 ('abc@NotAnEmail')
                           1292 PRECALL                  1
                           1296 CALL                     1
                           1306 STORE_FAST               1 (rtn)
                
-               608        1308 LOAD_FAST                0 (self)
+               621        1308 LOAD_FAST                0 (self)
                           1310 LOAD_METHOD              1 (assertEqual)
                           1332 LOAD_FAST                1 (rtn)
                           1334 LOAD_CONST              30 (('abc@NotAnEmail', 'Enter a valid email address'))
                           1336 PRECALL                  2
                           1340 CALL                     2
                           1350 POP_TOP
                
-               609        1352 PUSH_NULL
+               622        1352 PUSH_NULL
                           1354 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1366 PRECALL                  0
                           1370 CALL                     0
                           1380 LOAD_CONST              31 ('customer/department@example.com')
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 STORE_FAST               1 (rtn)
                
-               610        1398 LOAD_FAST                0 (self)
+               623        1398 LOAD_FAST                0 (self)
                           1400 LOAD_METHOD              1 (assertEqual)
                           1422 LOAD_FAST                1 (rtn)
                           1424 LOAD_CONST              32 (('customer/department@example.com', None))
                           1426 PRECALL                  2
                           1430 CALL                     2
                           1440 POP_TOP
                
-               611        1442 PUSH_NULL
+               624        1442 PUSH_NULL
                           1444 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1456 PRECALL                  0
                           1460 CALL                     0
                           1470 LOAD_CONST              33 ('$A12345@example.com')
                           1472 PRECALL                  1
                           1476 CALL                     1
                           1486 STORE_FAST               1 (rtn)
                
-               612        1488 LOAD_FAST                0 (self)
+               625        1488 LOAD_FAST                0 (self)
                           1490 LOAD_METHOD              1 (assertEqual)
                           1512 LOAD_FAST                1 (rtn)
                           1514 LOAD_CONST              34 (('$A12345@example.com', None))
                           1516 PRECALL                  2
                           1520 CALL                     2
                           1530 POP_TOP
                
-               613        1532 PUSH_NULL
+               626        1532 PUSH_NULL
                           1534 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1546 PRECALL                  0
                           1550 CALL                     0
                           1560 LOAD_CONST              35 ('!def!xyz%abc@example.com')
                           1562 PRECALL                  1
                           1566 CALL                     1
                           1576 STORE_FAST               1 (rtn)
                
-               614        1578 LOAD_FAST                0 (self)
+               627        1578 LOAD_FAST                0 (self)
                           1580 LOAD_METHOD              1 (assertEqual)
                           1602 LOAD_FAST                1 (rtn)
                           1604 LOAD_CONST              36 (('!def!xyz%abc@example.com', None))
                           1606 PRECALL                  2
                           1610 CALL                     2
                           1620 POP_TOP
                
-               615        1622 PUSH_NULL
+               628        1622 PUSH_NULL
                           1624 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1636 PRECALL                  0
                           1640 CALL                     0
                           1650 LOAD_CONST              37 ('_Yosemite.Sam@example.com')
                           1652 PRECALL                  1
                           1656 CALL                     1
                           1666 STORE_FAST               1 (rtn)
                
-               616        1668 LOAD_FAST                0 (self)
+               629        1668 LOAD_FAST                0 (self)
                           1670 LOAD_METHOD              1 (assertEqual)
                           1692 LOAD_FAST                1 (rtn)
                           1694 LOAD_CONST              38 (('_Yosemite.Sam@example.com', None))
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 POP_TOP
                
-               617        1712 PUSH_NULL
+               630        1712 PUSH_NULL
                           1714 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1726 PRECALL                  0
                           1730 CALL                     0
                           1740 LOAD_CONST              39 ('~@example.com')
                           1742 PRECALL                  1
                           1746 CALL                     1
                           1756 STORE_FAST               1 (rtn)
                
-               618        1758 LOAD_FAST                0 (self)
+               631        1758 LOAD_FAST                0 (self)
                           1760 LOAD_METHOD              1 (assertEqual)
                           1782 LOAD_FAST                1 (rtn)
                           1784 LOAD_CONST              40 (('~@example.com', None))
                           1786 PRECALL                  2
                           1790 CALL                     2
                           1800 POP_TOP
                
-               619        1802 PUSH_NULL
+               632        1802 PUSH_NULL
                           1804 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1816 PRECALL                  0
                           1820 CALL                     0
                           1830 LOAD_CONST              41 ('.wooly@example.com')
                           1832 PRECALL                  1
                           1836 CALL                     1
                           1846 STORE_FAST               1 (rtn)
                
-               620        1848 LOAD_FAST                0 (self)
+               633        1848 LOAD_FAST                0 (self)
                           1850 LOAD_METHOD              1 (assertEqual)
                           1872 LOAD_FAST                1 (rtn)
                           1874 LOAD_CONST              42 (('.wooly@example.com', 'Enter a valid email address'))
                           1876 PRECALL                  2
                           1880 CALL                     2
                           1890 POP_TOP
                
-               621        1892 PUSH_NULL
+               634        1892 PUSH_NULL
                           1894 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1906 PRECALL                  0
                           1910 CALL                     0
                           1920 LOAD_CONST              43 ('wo..oly@example.com')
                           1922 PRECALL                  1
                           1926 CALL                     1
                           1936 STORE_FAST               1 (rtn)
                
-               622        1938 LOAD_FAST                0 (self)
+               635        1938 LOAD_FAST                0 (self)
                           1940 LOAD_METHOD              1 (assertEqual)
                           1962 LOAD_FAST                1 (rtn)
                           1964 LOAD_CONST              44 (('wo..oly@example.com', 'Enter a valid email address'))
                           1966 PRECALL                  2
                           1970 CALL                     2
                           1980 POP_TOP
                
-               623        1982 PUSH_NULL
+               636        1982 PUSH_NULL
                           1984 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1996 PRECALL                  0
                           2000 CALL                     0
                           2010 LOAD_CONST              45 ('pootietang.@example.com')
                           2012 PRECALL                  1
                           2016 CALL                     1
                           2026 STORE_FAST               1 (rtn)
                
-               624        2028 LOAD_FAST                0 (self)
+               637        2028 LOAD_FAST                0 (self)
                           2030 LOAD_METHOD              1 (assertEqual)
                
-               625        2052 LOAD_FAST                1 (rtn)
+               638        2052 LOAD_FAST                1 (rtn)
                           2054 LOAD_CONST              46 (('pootietang.@example.com', 'Enter a valid email address'))
                
-               624        2056 PRECALL                  2
+               637        2056 PRECALL                  2
                           2060 CALL                     2
                           2070 POP_TOP
                
-               627        2072 PUSH_NULL
+               640        2072 PUSH_NULL
                           2074 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2086 PRECALL                  0
                           2090 CALL                     0
                           2100 LOAD_CONST              47 ('.@example.com')
                           2102 PRECALL                  1
                           2106 CALL                     1
                           2116 STORE_FAST               1 (rtn)
                
-               628        2118 LOAD_FAST                0 (self)
+               641        2118 LOAD_FAST                0 (self)
                           2120 LOAD_METHOD              1 (assertEqual)
                           2142 LOAD_FAST                1 (rtn)
                           2144 LOAD_CONST              48 (('.@example.com', 'Enter a valid email address'))
                           2146 PRECALL                  2
                           2150 CALL                     2
                           2160 POP_TOP
                
-               629        2162 PUSH_NULL
+               642        2162 PUSH_NULL
                           2164 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2176 PRECALL                  0
                           2180 CALL                     0
                           2190 LOAD_CONST              49 ('Ima.Fool@example.com')
                           2192 PRECALL                  1
                           2196 CALL                     1
                           2206 STORE_FAST               1 (rtn)
                
-               630        2208 LOAD_FAST                0 (self)
+               643        2208 LOAD_FAST                0 (self)
                           2210 LOAD_METHOD              1 (assertEqual)
                           2232 LOAD_FAST                1 (rtn)
                           2234 LOAD_CONST              50 (('Ima.Fool@example.com', None))
                           2236 PRECALL                  2
                           2240 CALL                     2
                           2250 POP_TOP
                
-               631        2252 PUSH_NULL
+               644        2252 PUSH_NULL
                           2254 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2266 PRECALL                  0
                           2270 CALL                     0
                           2280 LOAD_CONST              51 ('Ima Fool@example.com')
                           2282 PRECALL                  1
                           2286 CALL                     1
                           2296 STORE_FAST               1 (rtn)
                
-               632        2298 LOAD_FAST                0 (self)
+               645        2298 LOAD_FAST                0 (self)
                           2300 LOAD_METHOD              1 (assertEqual)
                           2322 LOAD_FAST                1 (rtn)
                           2324 LOAD_CONST              52 (('Ima Fool@example.com', 'Enter a valid email address'))
                           2326 PRECALL                  2
                           2330 CALL                     2
                           2340 POP_TOP
                
-               633        2342 PUSH_NULL
+               646        2342 PUSH_NULL
                           2344 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2356 PRECALL                  0
                           2360 CALL                     0
                           2370 LOAD_CONST              53 ('localguy@localhost')
                           2372 PRECALL                  1
                           2376 CALL                     1
                           2386 STORE_FAST               1 (rtn)
                
-               634        2388 LOAD_FAST                0 (self)
+               647        2388 LOAD_FAST                0 (self)
                           2390 LOAD_METHOD              1 (assertEqual)
                           2412 LOAD_FAST                1 (rtn)
                           2414 LOAD_CONST              54 (('localguy@localhost', None))
                           2416 PRECALL                  2
                           2420 CALL                     2
                           2430 POP_TOP
                
-               636        2432 PUSH_NULL
+               649        2432 PUSH_NULL
                           2434 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2446 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2448 KW_NAMES                56
                           2450 PRECALL                  1
                           2454 CALL                     1
                
-               637        2464 LOAD_CONST              53 ('localguy@localhost')
+               650        2464 LOAD_CONST              53 ('localguy@localhost')
                
-               636        2466 PRECALL                  1
+               649        2466 PRECALL                  1
                           2470 CALL                     1
                           2480 STORE_FAST               1 (rtn)
                
-               639        2482 LOAD_FAST                0 (self)
+               652        2482 LOAD_FAST                0 (self)
                           2484 LOAD_METHOD              1 (assertEqual)
                           2506 LOAD_FAST                1 (rtn)
                           2508 LOAD_CONST              54 (('localguy@localhost', None))
                           2510 PRECALL                  2
                           2514 CALL                     2
                           2524 POP_TOP
                
-               640        2526 PUSH_NULL
+               653        2526 PUSH_NULL
                           2528 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2540 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2542 KW_NAMES                56
                           2544 PRECALL                  1
                           2548 CALL                     1
                           2558 LOAD_CONST              57 ('abc@example.com')
                           2560 PRECALL                  1
                           2564 CALL                     1
                           2574 STORE_FAST               1 (rtn)
                
-               641        2576 LOAD_FAST                0 (self)
+               654        2576 LOAD_FAST                0 (self)
                           2578 LOAD_METHOD              1 (assertEqual)
                           2600 LOAD_FAST                1 (rtn)
                           2602 LOAD_CONST              58 (('abc@example.com', 'Enter a valid email address'))
                           2604 PRECALL                  2
                           2608 CALL                     2
                           2618 POP_TOP
                
-               643        2620 PUSH_NULL
+               656        2620 PUSH_NULL
                           2622 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2634 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2636 KW_NAMES                60
                           2638 PRECALL                  1
                           2642 CALL                     1
                           2652 LOAD_CONST              53 ('localguy@localhost')
                           2654 PRECALL                  1
                           2658 CALL                     1
                           2668 STORE_FAST               1 (rtn)
                
-               644        2670 LOAD_FAST                0 (self)
+               657        2670 LOAD_FAST                0 (self)
                           2672 LOAD_METHOD              1 (assertEqual)
                           2694 LOAD_FAST                1 (rtn)
                           2696 LOAD_CONST              61 (('localguy@localhost', 'Enter a valid email address'))
                           2698 PRECALL                  2
                           2702 CALL                     2
                           2712 POP_TOP
                
-               645        2714 PUSH_NULL
+               658        2714 PUSH_NULL
                           2716 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2728 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2730 KW_NAMES                60
                           2732 PRECALL                  1
                           2736 CALL                     1
                           2746 LOAD_CONST              62 ('localguy@example.edu')
                           2748 PRECALL                  1
                           2752 CALL                     1
                           2762 STORE_FAST               1 (rtn)
                
-               646        2764 LOAD_FAST                0 (self)
+               659        2764 LOAD_FAST                0 (self)
                           2766 LOAD_METHOD              1 (assertEqual)
                           2788 LOAD_FAST                1 (rtn)
                           2790 LOAD_CONST              63 (('localguy@example.edu', None))
                           2792 PRECALL                  2
                           2796 CALL                     2
                           2806 POP_TOP
                
-               648        2808 PUSH_NULL
+               661        2808 PUSH_NULL
                           2810 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2822 LOAD_CONST              64 ('oops')
                           2824 KW_NAMES                65
                           2826 PRECALL                  1
                           2830 CALL                     1
                           2840 LOAD_CONST              66 (42)
                           2842 PRECALL                  1
                           2846 CALL                     1
                           2856 STORE_FAST               1 (rtn)
                
-               649        2858 LOAD_FAST                0 (self)
+               662        2858 LOAD_FAST                0 (self)
                           2860 LOAD_METHOD              1 (assertEqual)
                           2882 LOAD_FAST                1 (rtn)
                           2884 LOAD_CONST              67 ((42, 'oops'))
                           2886 PRECALL                  2
                           2890 CALL                     2
                           2900 POP_TOP
                
-               652        2902 PUSH_NULL
+               665        2902 PUSH_NULL
                           2904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2916 PRECALL                  0
                           2920 CALL                     0
                           2930 LOAD_CONST              68 ('web2py@Alliancefranaise.nu')
                           2932 PRECALL                  1
                           2936 CALL                     1
                           2946 STORE_FAST               1 (rtn)
                
-               653        2948 LOAD_FAST                0 (self)
+               666        2948 LOAD_FAST                0 (self)
                           2950 LOAD_METHOD              1 (assertEqual)
                           2972 LOAD_FAST                1 (rtn)
                           2974 LOAD_CONST              69 (('web2py@Alliancefranaise.nu', None))
                           2976 PRECALL                  2
                           2980 CALL                     2
                           2990 POP_TOP
                           2992 LOAD_CONST               0 (None)
@@ -6940,17 +7125,17 @@
                   (42, 'oops')
                   'web2py@Alliancefranaise.nu'
                   ('web2py@Alliancefranaise.nu', None)
                names      ('IS_EMAIL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMAIL'
-               firstlineno 578
+               firstlineno 591
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c012e012c012e012c012e012c012e
                   012c012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e01180104ff10032e012c012e012c012e012c012e012c02200102ff10
                   032c0132012c0232012c0132012c0232012c032e01
             code
@@ -6982,144 +7167,144 @@
                   0000000000000000000000000000007c01a6010000ab0100000000000000
                   00a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026407a6020000ab02000000000000000001
                   00740100000000000000000000a6000000ab000000000000000000a00400
                   00000000000000000000000000000000000000640864096702a6010000ab
                   0100000000000000007d027c00a002000000000000000000000000000000
                   00000000007c02640aa6020000ab020000000000000000010064005300
-               655           0 RESUME                   0
+               668           0 RESUME                   0
                
-               656           2 LOAD_CONST               1 ('localguy@localhost')
+               669           2 LOAD_CONST               1 ('localguy@localhost')
                              4 LOAD_CONST               2 ('_Yosemite.Sam@example.com')
                              6 BUILD_LIST               2
                              8 STORE_FAST               1 (emails)
                
-               657          10 PUSH_NULL
+               670          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                             24 PRECALL                  0
                             28 CALL                     0
                             38 LOAD_CONST               3 (',')
                             40 LOAD_METHOD              1 (join)
                             62 LOAD_FAST                1 (emails)
                             64 PRECALL                  1
                             68 CALL                     1
                             78 PRECALL                  1
                             82 CALL                     1
                             92 STORE_FAST               2 (rtn)
                
-               658          94 LOAD_FAST                0 (self)
+               671          94 LOAD_FAST                0 (self)
                             96 LOAD_METHOD              2 (assertEqual)
                            118 LOAD_FAST                2 (rtn)
                            120 LOAD_CONST               3 (',')
                            122 LOAD_METHOD              1 (join)
                            144 LOAD_FAST                1 (emails)
                            146 PRECALL                  1
                            150 CALL                     1
                            160 LOAD_CONST               0 (None)
                            162 BUILD_TUPLE              2
                            164 PRECALL                  2
                            168 CALL                     2
                            178 POP_TOP
                
-               659         180 PUSH_NULL
+               672         180 PUSH_NULL
                            182 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            194 PRECALL                  0
                            198 CALL                     0
                            208 LOAD_CONST               4 (';')
                            210 LOAD_METHOD              1 (join)
                            232 LOAD_FAST                1 (emails)
                            234 PRECALL                  1
                            238 CALL                     1
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               660         264 LOAD_FAST                0 (self)
+               673         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST               4 (';')
                            292 LOAD_METHOD              1 (join)
                            314 LOAD_FAST                1 (emails)
                            316 PRECALL                  1
                            320 CALL                     1
                            330 LOAD_CONST               0 (None)
                            332 BUILD_TUPLE              2
                            334 PRECALL                  2
                            338 CALL                     2
                            348 POP_TOP
                
-               661         350 PUSH_NULL
+               674         350 PUSH_NULL
                            352 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            364 PRECALL                  0
                            368 CALL                     0
                            378 LOAD_CONST               5 (' ')
                            380 LOAD_METHOD              1 (join)
                            402 LOAD_FAST                1 (emails)
                            404 PRECALL                  1
                            408 CALL                     1
                            418 PRECALL                  1
                            422 CALL                     1
                            432 STORE_FAST               2 (rtn)
                
-               662         434 LOAD_FAST                0 (self)
+               675         434 LOAD_FAST                0 (self)
                            436 LOAD_METHOD              2 (assertEqual)
                            458 LOAD_FAST                2 (rtn)
                            460 LOAD_CONST               5 (' ')
                            462 LOAD_METHOD              1 (join)
                            484 LOAD_FAST                1 (emails)
                            486 PRECALL                  1
                            490 CALL                     1
                            500 LOAD_CONST               0 (None)
                            502 BUILD_TUPLE              2
                            504 PRECALL                  2
                            508 CALL                     2
                            518 POP_TOP
                
-               663         520 LOAD_FAST                1 (emails)
+               676         520 LOAD_FAST                1 (emails)
                            522 LOAD_METHOD              3 (append)
                            544 LOAD_CONST               6 ('a')
                            546 PRECALL                  1
                            550 CALL                     1
                            560 POP_TOP
                
-               664         562 PUSH_NULL
+               677         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            576 PRECALL                  0
                            580 CALL                     0
                            590 LOAD_CONST               4 (';')
                            592 LOAD_METHOD              1 (join)
                            614 LOAD_FAST                1 (emails)
                            616 PRECALL                  1
                            620 CALL                     1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               665         646 LOAD_FAST                0 (self)
+               678         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                
-               666         670 LOAD_FAST                2 (rtn)
+               679         670 LOAD_FAST                2 (rtn)
                            672 LOAD_CONST               7 (('localguy@localhost;_Yosemite.Sam@example.com;a', 'Invalid emails: a'))
                
-               665         674 PRECALL                  2
+               678         674 PRECALL                  2
                            678 CALL                     2
                            688 POP_TOP
                
-               668         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
+               681         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            702 PRECALL                  0
                            706 CALL                     0
                            716 LOAD_METHOD              4 (formatter)
                            738 LOAD_CONST               8 ('test@example.com')
                            740 LOAD_CONST               9 ('dude@example.com')
                            742 BUILD_LIST               2
                            744 PRECALL                  1
                            748 CALL                     1
                            758 STORE_FAST               2 (rtn)
                
-               669         760 LOAD_FAST                0 (self)
+               682         760 LOAD_FAST                0 (self)
                            762 LOAD_METHOD              2 (assertEqual)
                            784 LOAD_FAST                2 (rtn)
                            786 LOAD_CONST              10 ('test@example.com, dude@example.com')
                            788 PRECALL                  2
                            792 CALL                     2
                            802 POP_TOP
                            804 LOAD_CONST               0 (None)
@@ -7136,17 +7321,17 @@
                   'test@example.com'
                   'dude@example.com'
                   'test@example.com, dude@example.com'
                names      ('IS_LIST_OF_EMAILS', 'join', 'assertEqual', 'append', 'formatter')
                varnames   ('self', 'emails', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF_EMAILS'
-               firstlineno 655
+               firstlineno 668
                lnotab 0x020108015401560154015601540156012a015401180104ff10034601
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
                flags     : 3
                code
@@ -7165,123 +7350,123 @@
                   02a6020000ab020000000000000000010002007401000000000000000000
                   00a6000000ab000000000000000000640ca6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   0da6020000ab020000000000000000010002007401000000000000000000
                   00640e6400ac0fa6020000ab020000000000000000640ba6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016410a6020000ab020000000000000000010064005300
-               671           0 RESUME                   0
+               684           0 RESUME                   0
                
-               672           2 PUSH_NULL
+               685           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_URL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('http://example.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               673          48 LOAD_FAST                0 (self)
+               686          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('http://example.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               674          92 PUSH_NULL
+               687          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_URL)
                            106 LOAD_CONST               3 ('oops')
                            108 KW_NAMES                 4
                            110 PRECALL                  1
                            114 CALL                     1
                            124 LOAD_CONST               5 ('http://example,com')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               1 (rtn)
                
-               675         142 LOAD_FAST                0 (self)
+               688         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              1 (assertEqual)
                            166 LOAD_FAST                1 (rtn)
                            168 LOAD_CONST               6 (('http://example,com', 'oops'))
                            170 PRECALL                  2
                            174 CALL                     2
                            184 POP_TOP
                
-               676         186 PUSH_NULL
+               689         186 PUSH_NULL
                            188 LOAD_GLOBAL              1 (NULL + IS_URL)
                            200 LOAD_CONST               3 ('oops')
                            202 KW_NAMES                 4
                            204 PRECALL                  1
                            208 CALL                     1
                
-               677         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
+               690         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
                
-               676         220 PRECALL                  1
+               689         220 PRECALL                  1
                            224 CALL                     1
                            234 STORE_FAST               1 (rtn)
                
-               679         236 LOAD_FAST                0 (self)
+               692         236 LOAD_FAST                0 (self)
                            238 LOAD_METHOD              1 (assertEqual)
                            260 LOAD_FAST                1 (rtn)
                            262 LOAD_CONST               8 (('http://www.example.com:8800/a/b/c/d/e/f/g/h', None))
                            264 PRECALL                  2
                            268 CALL                     2
                            278 POP_TOP
                
-               680         280 PUSH_NULL
+               693         280 PUSH_NULL
                            282 LOAD_GLOBAL              1 (NULL + IS_URL)
                            294 LOAD_CONST               3 ('oops')
                            296 LOAD_CONST               9 ('http')
                            298 KW_NAMES                10
                            300 PRECALL                  2
                            304 CALL                     2
                            314 LOAD_CONST              11 ('example.com')
                            316 PRECALL                  1
                            320 CALL                     1
                            330 STORE_FAST               1 (rtn)
                
-               681         332 LOAD_FAST                0 (self)
+               694         332 LOAD_FAST                0 (self)
                            334 LOAD_METHOD              1 (assertEqual)
                            356 LOAD_FAST                1 (rtn)
                            358 LOAD_CONST               2 (('http://example.com', None))
                            360 PRECALL                  2
                            364 CALL                     2
                            374 POP_TOP
                
-               682         376 PUSH_NULL
+               695         376 PUSH_NULL
                            378 LOAD_GLOBAL              1 (NULL + IS_URL)
                            390 PRECALL                  0
                            394 CALL                     0
                            404 LOAD_CONST              12 ('http://example.com?q=george&p=22')
                            406 PRECALL                  1
                            410 CALL                     1
                            420 STORE_FAST               1 (rtn)
                
-               683         422 LOAD_FAST                0 (self)
+               696         422 LOAD_FAST                0 (self)
                            424 LOAD_METHOD              1 (assertEqual)
                            446 LOAD_FAST                1 (rtn)
                            448 LOAD_CONST              13 (('http://example.com?q=george&p=22', None))
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               684         466 PUSH_NULL
+               697         466 PUSH_NULL
                            468 LOAD_GLOBAL              1 (NULL + IS_URL)
                            480 LOAD_CONST              14 ('generic')
                            482 LOAD_CONST               0 (None)
                            484 KW_NAMES                15
                            486 PRECALL                  2
                            490 CALL                     2
                            500 LOAD_CONST              11 ('example.com')
                            502 PRECALL                  1
                            506 CALL                     1
                            516 STORE_FAST               1 (rtn)
                
-               685         518 LOAD_FAST                0 (self)
+               698         518 LOAD_FAST                0 (self)
                            520 LOAD_METHOD              1 (assertEqual)
                            542 LOAD_FAST                1 (rtn)
                            544 LOAD_CONST              16 (('example.com', None))
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                            562 LOAD_CONST               0 (None)
@@ -7304,17 +7489,17 @@
                   'generic'
                   ('mode', 'prepend_scheme')
                   ('example.com', None)
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_URL'
-               firstlineno 671
+               firstlineno 684
                lnotab 0x02012e012c0132012c01200102ff10032c0134012c012e012c013401
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
                flags     : 3
                code
@@ -7364,98 +7549,98 @@
                   00740100000000000000000000a6000000ab0000000000000000006415a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016416a6020000ab020000000000000000010002
                   00740100000000000000000000a6000000ab0000000000000000006417a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016418a6020000ab020000000000000000010064
                   005300
-               687           0 RESUME                   0
+               700           0 RESUME                   0
                
-               688           2 PUSH_NULL
+               701           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_TIME)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('21:30')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               689          48 LOAD_FAST                0 (self)
+               702          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_GLOBAL              5 (NULL + datetime)
                             86 LOAD_ATTR                3 (time)
                             96 LOAD_CONST               2 (21)
                             98 LOAD_CONST               3 (30)
                            100 PRECALL                  2
                            104 CALL                     2
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               690         134 PUSH_NULL
+               703         134 PUSH_NULL
                            136 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            148 PRECALL                  0
                            152 CALL                     0
                            162 LOAD_CONST               4 ('21-30')
                            164 PRECALL                  1
                            168 CALL                     1
                            178 STORE_FAST               1 (rtn)
                
-               691         180 LOAD_FAST                0 (self)
+               704         180 LOAD_FAST                0 (self)
                            182 LOAD_METHOD              1 (assertEqual)
                            204 LOAD_FAST                1 (rtn)
                            206 LOAD_GLOBAL              5 (NULL + datetime)
                            218 LOAD_ATTR                3 (time)
                            228 LOAD_CONST               2 (21)
                            230 LOAD_CONST               3 (30)
                            232 PRECALL                  2
                            236 CALL                     2
                            246 LOAD_CONST               0 (None)
                            248 BUILD_TUPLE              2
                            250 PRECALL                  2
                            254 CALL                     2
                            264 POP_TOP
                
-               692         266 PUSH_NULL
+               705         266 PUSH_NULL
                            268 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            280 PRECALL                  0
                            284 CALL                     0
                            294 LOAD_CONST               5 ('21.30')
                            296 PRECALL                  1
                            300 CALL                     1
                            310 STORE_FAST               1 (rtn)
                
-               693         312 LOAD_FAST                0 (self)
+               706         312 LOAD_FAST                0 (self)
                            314 LOAD_METHOD              1 (assertEqual)
                            336 LOAD_FAST                1 (rtn)
                            338 LOAD_GLOBAL              5 (NULL + datetime)
                            350 LOAD_ATTR                3 (time)
                            360 LOAD_CONST               2 (21)
                            362 LOAD_CONST               3 (30)
                            364 PRECALL                  2
                            368 CALL                     2
                            378 LOAD_CONST               0 (None)
                            380 BUILD_TUPLE              2
                            382 PRECALL                  2
                            386 CALL                     2
                            396 POP_TOP
                
-               694         398 PUSH_NULL
+               707         398 PUSH_NULL
                            400 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            412 PRECALL                  0
                            416 CALL                     0
                            426 LOAD_CONST               6 ('21:30:59')
                            428 PRECALL                  1
                            432 CALL                     1
                            442 STORE_FAST               1 (rtn)
                
-               695         444 LOAD_FAST                0 (self)
+               708         444 LOAD_FAST                0 (self)
                            446 LOAD_METHOD              1 (assertEqual)
                            468 LOAD_FAST                1 (rtn)
                            470 LOAD_GLOBAL              5 (NULL + datetime)
                            482 LOAD_ATTR                3 (time)
                            492 LOAD_CONST               2 (21)
                            494 LOAD_CONST               3 (30)
                            496 LOAD_CONST               7 (59)
@@ -7463,191 +7648,191 @@
                            502 CALL                     3
                            512 LOAD_CONST               0 (None)
                            514 BUILD_TUPLE              2
                            516 PRECALL                  2
                            520 CALL                     2
                            530 POP_TOP
                
-               696         532 PUSH_NULL
+               709         532 PUSH_NULL
                            534 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            546 PRECALL                  0
                            550 CALL                     0
                            560 LOAD_CONST               8 ('5:30')
                            562 PRECALL                  1
                            566 CALL                     1
                            576 STORE_FAST               1 (rtn)
                
-               697         578 LOAD_FAST                0 (self)
+               710         578 LOAD_FAST                0 (self)
                            580 LOAD_METHOD              1 (assertEqual)
                            602 LOAD_FAST                1 (rtn)
                            604 LOAD_GLOBAL              5 (NULL + datetime)
                            616 LOAD_ATTR                3 (time)
                            626 LOAD_CONST               9 (5)
                            628 LOAD_CONST               3 (30)
                            630 PRECALL                  2
                            634 CALL                     2
                            644 LOAD_CONST               0 (None)
                            646 BUILD_TUPLE              2
                            648 PRECALL                  2
                            652 CALL                     2
                            662 POP_TOP
                
-               698         664 PUSH_NULL
+               711         664 PUSH_NULL
                            666 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            678 PRECALL                  0
                            682 CALL                     0
                            692 LOAD_CONST              10 ('5:30 am')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               699         710 LOAD_FAST                0 (self)
+               712         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_GLOBAL              5 (NULL + datetime)
                            748 LOAD_ATTR                3 (time)
                            758 LOAD_CONST               9 (5)
                            760 LOAD_CONST               3 (30)
                            762 PRECALL                  2
                            766 CALL                     2
                            776 LOAD_CONST               0 (None)
                            778 BUILD_TUPLE              2
                            780 PRECALL                  2
                            784 CALL                     2
                            794 POP_TOP
                
-               700         796 PUSH_NULL
+               713         796 PUSH_NULL
                            798 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            810 PRECALL                  0
                            814 CALL                     0
                            824 LOAD_CONST              11 ('5:30 pm')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 STORE_FAST               1 (rtn)
                
-               701         842 LOAD_FAST                0 (self)
+               714         842 LOAD_FAST                0 (self)
                            844 LOAD_METHOD              1 (assertEqual)
                            866 LOAD_FAST                1 (rtn)
                            868 LOAD_GLOBAL              5 (NULL + datetime)
                            880 LOAD_ATTR                3 (time)
                            890 LOAD_CONST              12 (17)
                            892 LOAD_CONST               3 (30)
                            894 PRECALL                  2
                            898 CALL                     2
                            908 LOAD_CONST               0 (None)
                            910 BUILD_TUPLE              2
                            912 PRECALL                  2
                            916 CALL                     2
                            926 POP_TOP
                
-               702         928 PUSH_NULL
+               715         928 PUSH_NULL
                            930 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            942 PRECALL                  0
                            946 CALL                     0
                            956 LOAD_CONST              13 ('5:30 whatever')
                            958 PRECALL                  1
                            962 CALL                     1
                            972 STORE_FAST               1 (rtn)
                
-               703         974 LOAD_FAST                0 (self)
+               716         974 LOAD_FAST                0 (self)
                            976 LOAD_METHOD              1 (assertEqual)
                
-               704         998 LOAD_FAST                1 (rtn)
+               717         998 LOAD_FAST                1 (rtn)
                           1000 LOAD_CONST              14 (('5:30 whatever', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               703        1002 PRECALL                  2
+               716        1002 PRECALL                  2
                           1006 CALL                     2
                           1016 POP_TOP
                
-               706        1018 PUSH_NULL
+               719        1018 PUSH_NULL
                           1020 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1032 PRECALL                  0
                           1036 CALL                     0
                           1046 LOAD_CONST              15 ('5:30 20')
                           1048 PRECALL                  1
                           1052 CALL                     1
                           1062 STORE_FAST               1 (rtn)
                
-               707        1064 LOAD_FAST                0 (self)
+               720        1064 LOAD_FAST                0 (self)
                           1066 LOAD_METHOD              1 (assertEqual)
                
-               708        1088 LOAD_FAST                1 (rtn)
+               721        1088 LOAD_FAST                1 (rtn)
                           1090 LOAD_CONST              16 (('5:30 20', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               707        1092 PRECALL                  2
+               720        1092 PRECALL                  2
                           1096 CALL                     2
                           1106 POP_TOP
                
-               710        1108 PUSH_NULL
+               723        1108 PUSH_NULL
                           1110 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1122 PRECALL                  0
                           1126 CALL                     0
                           1136 LOAD_CONST              17 ('24:30')
                           1138 PRECALL                  1
                           1142 CALL                     1
                           1152 STORE_FAST               1 (rtn)
                
-               711        1154 LOAD_FAST                0 (self)
+               724        1154 LOAD_FAST                0 (self)
                           1156 LOAD_METHOD              1 (assertEqual)
                
-               712        1178 LOAD_FAST                1 (rtn)
+               725        1178 LOAD_FAST                1 (rtn)
                           1180 LOAD_CONST              18 (('24:30', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               711        1182 PRECALL                  2
+               724        1182 PRECALL                  2
                           1186 CALL                     2
                           1196 POP_TOP
                
-               714        1198 PUSH_NULL
+               727        1198 PUSH_NULL
                           1200 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1212 PRECALL                  0
                           1216 CALL                     0
                           1226 LOAD_CONST              19 ('21:60')
                           1228 PRECALL                  1
                           1232 CALL                     1
                           1242 STORE_FAST               1 (rtn)
                
-               715        1244 LOAD_FAST                0 (self)
+               728        1244 LOAD_FAST                0 (self)
                           1246 LOAD_METHOD              1 (assertEqual)
                
-               716        1268 LOAD_FAST                1 (rtn)
+               729        1268 LOAD_FAST                1 (rtn)
                           1270 LOAD_CONST              20 (('21:60', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               715        1272 PRECALL                  2
+               728        1272 PRECALL                  2
                           1276 CALL                     2
                           1286 POP_TOP
                
-               718        1288 PUSH_NULL
+               731        1288 PUSH_NULL
                           1290 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1302 PRECALL                  0
                           1306 CALL                     0
                           1316 LOAD_CONST              21 ('21:30::')
                           1318 PRECALL                  1
                           1322 CALL                     1
                           1332 STORE_FAST               1 (rtn)
                
-               719        1334 LOAD_FAST                0 (self)
+               732        1334 LOAD_FAST                0 (self)
                           1336 LOAD_METHOD              1 (assertEqual)
                
-               720        1358 LOAD_FAST                1 (rtn)
+               733        1358 LOAD_FAST                1 (rtn)
                           1360 LOAD_CONST              22 (('21:30::', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               719        1362 PRECALL                  2
+               732        1362 PRECALL                  2
                           1366 CALL                     2
                           1376 POP_TOP
                
-               722        1378 PUSH_NULL
+               735        1378 PUSH_NULL
                           1380 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1392 PRECALL                  0
                           1396 CALL                     0
                           1406 LOAD_CONST              23 ('')
                           1408 PRECALL                  1
                           1412 CALL                     1
                           1422 STORE_FAST               1 (rtn)
                
-               723        1424 LOAD_FAST                0 (self)
+               736        1424 LOAD_FAST                0 (self)
                           1426 LOAD_METHOD              1 (assertEqual)
                           1448 LOAD_FAST                1 (rtn)
                           1450 LOAD_CONST              24 (('', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                           1452 PRECALL                  2
                           1456 CALL                     2
                           1466 POP_TOP
                           1468 LOAD_CONST               0 (None)
@@ -7678,17 +7863,17 @@
                   ('21:30::', 'Enter time as hh:mm:ss (seconds, am, pm optional)')
                   ''
                   ('', 'Enter time as hh:mm:ss (seconds, am, pm optional)')
                names      ('IS_TIME', 'assertEqual', 'datetime', 'time')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_TIME'
-               firstlineno 687
+               firstlineno 700
                lnotab
                   0x02012e0156012e0156012e0156012e0158012e0156012e0156012e0156
                   012e01180104ff10032e01180104ff10032e01180104ff10032e01180104
                   ff10032e01180104ff10032e01
             code
                argcount  : 1
                nlocals   : 3
@@ -7704,32 +7889,32 @@
                   000000000000000000000000007c026408a6020000ab0200000000000000
                   00010074010000000000000000000064016402ac03a6020000ab02000000
                   0000000000a0040000000000000000000000000000000000000000740500
                   0000000000000000006a0300000000000000006409640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d027c00a00100
                   000000000000000000000000000000000000007c02640ca6020000ab0200
                   00000000000000010064005300
-               725           0 RESUME                   0
+               738           0 RESUME                   0
                
-               726           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               739           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
                             14 LOAD_CONST               1 ('%m/%d/%Y')
                             16 LOAD_CONST               2 ('oops')
                             18 KW_NAMES                 3
                             20 PRECALL                  2
                             24 CALL                     2
                             34 STORE_FAST               1 (v)
                
-               727          36 PUSH_NULL
+               740          36 PUSH_NULL
                             38 LOAD_FAST                1 (v)
                             40 LOAD_CONST               4 ('03/03/2008')
                             42 PRECALL                  1
                             46 CALL                     1
                             56 STORE_FAST               2 (rtn)
                
-               728          58 LOAD_FAST                0 (self)
+               741          58 LOAD_FAST                0 (self)
                             60 LOAD_METHOD              1 (assertEqual)
                             82 LOAD_FAST                2 (rtn)
                             84 LOAD_GLOBAL              5 (NULL + datetime)
                             96 LOAD_ATTR                3 (date)
                            106 LOAD_CONST               5 (2008)
                            108 LOAD_CONST               6 (3)
                            110 LOAD_CONST               6 (3)
@@ -7737,50 +7922,50 @@
                            116 CALL                     3
                            126 LOAD_CONST               0 (None)
                            128 BUILD_TUPLE              2
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               729         146 PUSH_NULL
+               742         146 PUSH_NULL
                            148 LOAD_FAST                1 (v)
                            150 LOAD_CONST               7 ('31/03/2008')
                            152 PRECALL                  1
                            156 CALL                     1
                            166 STORE_FAST               2 (rtn)
                
-               730         168 LOAD_FAST                0 (self)
+               743         168 LOAD_FAST                0 (self)
                            170 LOAD_METHOD              1 (assertEqual)
                            192 LOAD_FAST                2 (rtn)
                            194 LOAD_CONST               8 (('31/03/2008', 'oops'))
                            196 PRECALL                  2
                            200 CALL                     2
                            210 POP_TOP
                
-               731         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               744         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
                            224 LOAD_CONST               1 ('%m/%d/%Y')
                            226 LOAD_CONST               2 ('oops')
                            228 KW_NAMES                 3
                            230 PRECALL                  2
                            234 CALL                     2
                            244 LOAD_METHOD              4 (formatter)
                
-               732         266 LOAD_GLOBAL              5 (NULL + datetime)
+               745         266 LOAD_GLOBAL              5 (NULL + datetime)
                            278 LOAD_ATTR                3 (date)
                            288 LOAD_CONST               9 (1834)
                            290 LOAD_CONST              10 (12)
                            292 LOAD_CONST              11 (14)
                            294 PRECALL                  3
                            298 CALL                     3
                
-               731         308 PRECALL                  1
+               744         308 PRECALL                  1
                            312 CALL                     1
                            322 STORE_FAST               2 (rtn)
                
-               734         324 LOAD_FAST                0 (self)
+               747         324 LOAD_FAST                0 (self)
                            326 LOAD_METHOD              1 (assertEqual)
                            348 LOAD_FAST                2 (rtn)
                            350 LOAD_CONST              12 ('12/14/1834')
                            352 PRECALL                  2
                            356 CALL                     2
                            366 POP_TOP
                            368 LOAD_CONST               0 (None)
@@ -7799,17 +7984,17 @@
                   12
                   14
                   '12/14/1834'
                names      ('IS_DATE', 'assertEqual', 'datetime', 'date', 'formatter')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE'
-               firstlineno 725
+               firstlineno 738
                lnotab 0x020122011601580116012c0136012aff1003
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
                flags     : 3
                code
@@ -7826,32 +8011,32 @@
                   0000000000ac0ea6030000ab0300000000000000007d0102007c01640fa6
                   010000ab0100000000000000007d027c00a0010000000000000000000000
                   0000000000000000007c027405000000000000000000006a020000000000
                   00000064106407641164126413a6050000ab050000000000000000640066
                   02a6020000ab020000000000000000010064005300
                              0 MAKE_CELL                3 (DummyTimezone)
                
-               736           2 RESUME                   0
+               749           2 RESUME                   0
                
-               737           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               750           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                             16 LOAD_CONST               1 ('%m/%d/%Y %H:%M')
                             18 LOAD_CONST               2 ('oops')
                             20 KW_NAMES                 3
                             22 PRECALL                  2
                             26 CALL                     2
                             36 STORE_FAST               1 (v)
                
-               738          38 PUSH_NULL
+               751          38 PUSH_NULL
                             40 LOAD_FAST                1 (v)
                             42 LOAD_CONST               4 ('03/03/2008 12:40')
                             44 PRECALL                  1
                             48 CALL                     1
                             58 STORE_FAST               2 (rtn)
                
-               739          60 LOAD_FAST                0 (self)
+               752          60 LOAD_FAST                0 (self)
                             62 LOAD_METHOD              1 (assertEqual)
                             84 LOAD_FAST                2 (rtn)
                             86 LOAD_GLOBAL              5 (NULL + datetime)
                             98 LOAD_ATTR                2 (datetime)
                            108 LOAD_CONST               5 (2008)
                            110 LOAD_CONST               6 (3)
                            112 LOAD_CONST               6 (3)
@@ -7861,64 +8046,64 @@
                            122 CALL                     5
                            132 LOAD_CONST               0 (None)
                            134 BUILD_TUPLE              2
                            136 PRECALL                  2
                            140 CALL                     2
                            150 POP_TOP
                
-               740         152 PUSH_NULL
+               753         152 PUSH_NULL
                            154 LOAD_FAST                1 (v)
                            156 LOAD_CONST               9 ('31/03/2008 29:40')
                            158 PRECALL                  1
                            162 CALL                     1
                            172 STORE_FAST               2 (rtn)
                
-               741         174 LOAD_FAST                0 (self)
+               754         174 LOAD_FAST                0 (self)
                            176 LOAD_METHOD              1 (assertEqual)
                            198 LOAD_FAST                2 (rtn)
                            200 LOAD_CONST              10 (('31/03/2008 29:40', 'oops'))
                            202 PRECALL                  2
                            206 CALL                     2
                            216 POP_TOP
                
-               746         218 PUSH_NULL
+               759         218 PUSH_NULL
                            220 LOAD_BUILD_CLASS
                            222 LOAD_CLOSURE             3 (DummyTimezone)
                            224 BUILD_TUPLE              1
-                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 746>)
+                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 759>)
                            228 MAKE_FUNCTION            8 (closure)
                            230 LOAD_CONST              12 ('DummyTimezone')
                            232 LOAD_GLOBAL              4 (datetime)
                            244 LOAD_ATTR                3 (tzinfo)
                            254 PRECALL                  3
                            258 CALL                     3
                            268 STORE_DEREF              3 (DummyTimezone)
                
-               761         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               774         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                
-               762         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
+               775         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
                            284 LOAD_CONST               2 ('oops')
                            286 PUSH_NULL
                            288 LOAD_DEREF               3 (DummyTimezone)
                            290 PRECALL                  0
                            294 CALL                     0
                
-               761         304 KW_NAMES                14
+               774         304 KW_NAMES                14
                            306 PRECALL                  3
                            310 CALL                     3
                            320 STORE_FAST               1 (v)
                
-               764         322 PUSH_NULL
+               777         322 PUSH_NULL
                            324 LOAD_FAST                1 (v)
                            326 LOAD_CONST              15 ('1982-12-14 08:00')
                            328 PRECALL                  1
                            332 CALL                     1
                            342 STORE_FAST               2 (rtn)
                
-               765         344 LOAD_FAST                0 (self)
+               778         344 LOAD_FAST                0 (self)
                            346 LOAD_METHOD              1 (assertEqual)
                            368 LOAD_FAST                2 (rtn)
                            370 LOAD_GLOBAL              5 (NULL + datetime)
                            382 LOAD_ATTR                2 (datetime)
                            392 LOAD_CONST              16 (1982)
                            394 LOAD_CONST               7 (12)
                            396 LOAD_CONST              17 (14)
@@ -7952,47 +8137,47 @@
                      flags     : 0
                      code
                         0x9501970065005a0164005a02020065036a0400000000000000006401ac
                         02a6010000ab0100000000000000005a0588006601640384085a06640484
                         005a0788006601640584085a086409640784015a0964085300
                                    0 COPY_FREE_VARS           1
                      
-                     746           2 RESUME                   0
+                     759           2 RESUME                   0
                                    4 LOAD_NAME                0 (__name__)
                                    6 STORE_NAME               1 (__module__)
                                    8 LOAD_CONST               0 ('TestValidators.test_IS_DATETIME.<locals>.DummyTimezone')
                                   10 STORE_NAME               2 (__qualname__)
                      
-                     747          12 PUSH_NULL
+                     760          12 PUSH_NULL
                                   14 LOAD_NAME                3 (datetime)
                                   16 LOAD_ATTR                4 (timedelta)
                                   26 LOAD_CONST               1 (1)
                                   28 KW_NAMES                 2
                                   30 PRECALL                  1
                                   34 CALL                     1
                                   44 STORE_NAME               5 (ONE)
                      
-                     749          46 LOAD_CLOSURE             0 (DummyTimezone)
+                     762          46 LOAD_CLOSURE             0 (DummyTimezone)
                                   48 BUILD_TUPLE              1
-                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 749>)
+                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 762>)
                                   52 MAKE_FUNCTION            8 (closure)
                                   54 STORE_NAME               6 (utcoffset)
                      
-                     752          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 752>)
+                     765          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 765>)
                                   58 MAKE_FUNCTION            0
                                   60 STORE_NAME               7 (tzname)
                      
-                     755          62 LOAD_CLOSURE             0 (DummyTimezone)
+                     768          62 LOAD_CLOSURE             0 (DummyTimezone)
                                   64 BUILD_TUPLE              1
-                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 755>)
+                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 768>)
                                   68 MAKE_FUNCTION            8 (closure)
                                   70 STORE_NAME               8 (dst)
                      
-                     758          72 LOAD_CONST               9 ((False,))
-                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 758>)
+                     771          72 LOAD_CONST               9 ((False,))
+                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 771>)
                                   76 MAKE_FUNCTION            1 (defaults)
                                   78 STORE_NAME               9 (localize)
                                   80 LOAD_CONST               8 (None)
                                   82 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_DATETIME.<locals>.DummyTimezone'
                         1
@@ -8001,127 +8186,127 @@
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           749           2 RESUME                   0
+                           762           2 RESUME                   0
                            
-                           750           4 LOAD_DEREF               2 (DummyTimezone)
+                           763           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'utcoffset'
-                           firstlineno 749
+                           firstlineno 762
                            lnotab 0x0401
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x970064015300
-                           752           0 RESUME                   0
+                           765           0 RESUME                   0
                            
-                           753           2 LOAD_CONST               1 ('UTC+1')
+                           766           2 LOAD_CONST               1 ('UTC+1')
                                          4 RETURN_VALUE
                            consts
                               None
                               'UTC+1'
                            names      ()
                            varnames   ('self', 'dt')
                            freevars   ()
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'tzname'
-                           firstlineno 752
+                           firstlineno 765
                            lnotab 0x0201
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           755           2 RESUME                   0
+                           768           2 RESUME                   0
                            
-                           756           4 LOAD_DEREF               2 (DummyTimezone)
+                           769           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'dst'
-                           firstlineno 755
+                           firstlineno 768
                            lnotab 0x0401
                         False
                         code
                            argcount  : 3
                            nlocals   : 3
                            stacksize : 3
                            flags     : 19
                            code
                               0x97007c01a00000000000000000000000000000000000000000007c00ac
                               01a6010000ab0100000000000000005300
-                           758           0 RESUME                   0
+                           771           0 RESUME                   0
                            
-                           759           2 LOAD_FAST                1 (dt)
+                           772           2 LOAD_FAST                1 (dt)
                                          4 LOAD_METHOD              0 (replace)
                                         26 LOAD_FAST                0 (self)
                                         28 KW_NAMES                 1
                                         30 PRECALL                  1
                                         34 CALL                     1
                                         44 RETURN_VALUE
                            consts
                               None
                               ('tzinfo',)
                            names      ('replace',)
                            varnames   ('self', 'dt', 'is_dst')
                            freevars   ()
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'localize'
-                           firstlineno 758
+                           firstlineno 771
                            lnotab 0x0201
                         None
                         (False,)
                      names      ('__name__', '__module__', '__qualname__', 'datetime', 'timedelta', 'ONE', 'utcoffset', 'tzname', 'dst', 'localize')
                      varnames   ()
                      freevars   ('DummyTimezone',)
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyTimezone'
-                     firstlineno 746
+                     firstlineno 759
                      lnotab 0x0c0122020a0306030a03
                   'DummyTimezone'
                   '%Y-%m-%d %H:%M'
                   ('format', 'error_message', 'timezone')
                   '1982-12-14 08:00'
                   1982
                   14
                   7
                   0
                names      ('IS_DATETIME', 'assertEqual', 'datetime', 'tzinfo')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ('DummyTimezone',)
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME'
-               firstlineno 736
+               firstlineno 749
                lnotab 0x0401220116015c0116012c05340f0c0116ff12031601
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
                flags     : 3
                code
@@ -8157,51 +8342,51 @@
                   000000000001007401000000000000000000007403000000000000000000
                   006a020000000000000000640164026402a6030000ab0300000000000000
                   007403000000000000000000006a020000000000000000640364046405a6
                   030000ab0300000000000000006406ac13a6030000ab0300000000000000
                   007d0102007c016411a6010000ab0100000000000000007d027c00a00300
                   000000000000000000000000000000000000007c026414a6020000ab0200
                   00000000000000010064005300
-               767           0 RESUME                   0
+               780           0 RESUME                   0
                
-               768           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               781           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               769          14 LOAD_GLOBAL              3 (NULL + datetime)
+               782          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                2 (date)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 PRECALL                  3
                             46 CALL                     3
                
-               770          56 LOAD_GLOBAL              3 (NULL + datetime)
+               783          56 LOAD_GLOBAL              3 (NULL + datetime)
                             68 LOAD_ATTR                2 (date)
                             78 LOAD_CONST               3 (2009)
                             80 LOAD_CONST               4 (12)
                             82 LOAD_CONST               5 (31)
                             84 PRECALL                  3
                             88 CALL                     3
                
-               771          98 LOAD_CONST               6 ('%m/%d/%Y')
+               784          98 LOAD_CONST               6 ('%m/%d/%Y')
                
-               772         100 LOAD_CONST               7 ('oops')
+               785         100 LOAD_CONST               7 ('oops')
                
-               768         102 KW_NAMES                 8
+               781         102 KW_NAMES                 8
                            104 PRECALL                  4
                            108 CALL                     4
                            118 STORE_FAST               1 (v)
                
-               775         120 PUSH_NULL
+               788         120 PUSH_NULL
                            122 LOAD_FAST                1 (v)
                            124 LOAD_CONST               9 ('03/03/2008')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               2 (rtn)
                
-               776         142 LOAD_FAST                0 (self)
+               789         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              3 (assertEqual)
                            166 LOAD_FAST                2 (rtn)
                            168 LOAD_GLOBAL              3 (NULL + datetime)
                            180 LOAD_ATTR                2 (date)
                            190 LOAD_CONST               1 (2008)
                            192 LOAD_CONST              10 (3)
                            194 LOAD_CONST              10 (3)
@@ -8209,43 +8394,43 @@
                            200 CALL                     3
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               777         230 PUSH_NULL
+               790         230 PUSH_NULL
                            232 LOAD_FAST                1 (v)
                            234 LOAD_CONST              11 ('03/03/2010')
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               778         252 LOAD_FAST                0 (self)
+               791         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              3 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_CONST              12 (('03/03/2010', 'oops'))
                            280 PRECALL                  2
                            284 CALL                     2
                            294 POP_TOP
                
-               779         296 PUSH_NULL
+               792         296 PUSH_NULL
                            298 LOAD_FAST                1 (v)
                            300 LOAD_GLOBAL              3 (NULL + datetime)
                            312 LOAD_ATTR                2 (date)
                            322 LOAD_CONST               1 (2008)
                            324 LOAD_CONST              10 (3)
                            326 LOAD_CONST              10 (3)
                            328 PRECALL                  3
                            332 CALL                     3
                            342 PRECALL                  1
                            346 CALL                     1
                            356 STORE_FAST               2 (rtn)
                
-               780         358 LOAD_FAST                0 (self)
+               793         358 LOAD_FAST                0 (self)
                            360 LOAD_METHOD              3 (assertEqual)
                            382 LOAD_FAST                2 (rtn)
                            384 LOAD_GLOBAL              3 (NULL + datetime)
                            396 LOAD_ATTR                2 (date)
                            406 LOAD_CONST               1 (2008)
                            408 LOAD_CONST              10 (3)
                            410 LOAD_CONST              10 (3)
@@ -8253,28 +8438,28 @@
                            416 CALL                     3
                            426 LOAD_CONST               0 (None)
                            428 BUILD_TUPLE              2
                            430 PRECALL                  2
                            434 CALL                     2
                            444 POP_TOP
                
-               781         446 PUSH_NULL
+               794         446 PUSH_NULL
                            448 LOAD_FAST                1 (v)
                            450 LOAD_GLOBAL              3 (NULL + datetime)
                            462 LOAD_ATTR                2 (date)
                            472 LOAD_CONST              13 (2010)
                            474 LOAD_CONST              10 (3)
                            476 LOAD_CONST              10 (3)
                            478 PRECALL                  3
                            482 CALL                     3
                            492 PRECALL                  1
                            496 CALL                     1
                            506 STORE_FAST               2 (rtn)
                
-               782         508 LOAD_FAST                0 (self)
+               795         508 LOAD_FAST                0 (self)
                            510 LOAD_METHOD              3 (assertEqual)
                            532 LOAD_FAST                2 (rtn)
                            534 LOAD_GLOBAL              3 (NULL + datetime)
                            546 LOAD_ATTR                2 (date)
                            556 LOAD_CONST              13 (2010)
                            558 LOAD_CONST              10 (3)
                            560 LOAD_CONST              10 (3)
@@ -8282,111 +8467,111 @@
                            566 CALL                     3
                            576 LOAD_CONST               7 ('oops')
                            578 BUILD_TUPLE              2
                            580 PRECALL                  2
                            584 CALL                     2
                            594 POP_TOP
                
-               783         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               796         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            608 LOAD_GLOBAL              3 (NULL + datetime)
                            620 LOAD_ATTR                2 (date)
                            630 LOAD_CONST               3 (2009)
                            632 LOAD_CONST               4 (12)
                            634 LOAD_CONST               5 (31)
                            636 PRECALL                  3
                            640 CALL                     3
                            650 LOAD_CONST               6 ('%m/%d/%Y')
                            652 KW_NAMES                14
                            654 PRECALL                  2
                            658 CALL                     2
                            668 STORE_FAST               1 (v)
                
-               784         670 PUSH_NULL
+               797         670 PUSH_NULL
                            672 LOAD_FAST                1 (v)
                            674 LOAD_CONST              11 ('03/03/2010')
                            676 PRECALL                  1
                            680 CALL                     1
                            690 STORE_FAST               2 (rtn)
                
-               785         692 LOAD_FAST                0 (self)
+               798         692 LOAD_FAST                0 (self)
                            694 LOAD_METHOD              3 (assertEqual)
                            716 LOAD_FAST                2 (rtn)
                            718 LOAD_CONST              15 (('03/03/2010', 'Enter date on or before 12/31/2009'))
                            720 PRECALL                  2
                            724 CALL                     2
                            734 POP_TOP
                
-               786         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               799         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            748 LOAD_GLOBAL              3 (NULL + datetime)
                            760 LOAD_ATTR                2 (date)
                            770 LOAD_CONST               1 (2008)
                            772 LOAD_CONST               2 (1)
                            774 LOAD_CONST               2 (1)
                            776 PRECALL                  3
                            780 CALL                     3
                            790 LOAD_CONST               6 ('%m/%d/%Y')
                            792 KW_NAMES                16
                            794 PRECALL                  2
                            798 CALL                     2
                            808 STORE_FAST               1 (v)
                
-               787         810 PUSH_NULL
+               800         810 PUSH_NULL
                            812 LOAD_FAST                1 (v)
                            814 LOAD_CONST              17 ('03/03/2007')
                            816 PRECALL                  1
                            820 CALL                     1
                            830 STORE_FAST               2 (rtn)
                
-               788         832 LOAD_FAST                0 (self)
+               801         832 LOAD_FAST                0 (self)
                            834 LOAD_METHOD              3 (assertEqual)
                            856 LOAD_FAST                2 (rtn)
                            858 LOAD_CONST              18 (('03/03/2007', 'Enter date on or after 01/01/2008'))
                            860 PRECALL                  2
                            864 CALL                     2
                            874 POP_TOP
                
-               789         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               802         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               790         888 LOAD_GLOBAL              3 (NULL + datetime)
+               803         888 LOAD_GLOBAL              3 (NULL + datetime)
                            900 LOAD_ATTR                2 (date)
                            910 LOAD_CONST               1 (2008)
                            912 LOAD_CONST               2 (1)
                            914 LOAD_CONST               2 (1)
                            916 PRECALL                  3
                            920 CALL                     3
                
-               791         930 LOAD_GLOBAL              3 (NULL + datetime)
+               804         930 LOAD_GLOBAL              3 (NULL + datetime)
                            942 LOAD_ATTR                2 (date)
                            952 LOAD_CONST               3 (2009)
                            954 LOAD_CONST               4 (12)
                            956 LOAD_CONST               5 (31)
                            958 PRECALL                  3
                            962 CALL                     3
                
-               792         972 LOAD_CONST               6 ('%m/%d/%Y')
+               805         972 LOAD_CONST               6 ('%m/%d/%Y')
                
-               789         974 KW_NAMES                19
+               802         974 KW_NAMES                19
                            976 PRECALL                  3
                            980 CALL                     3
                            990 STORE_FAST               1 (v)
                
-               794         992 PUSH_NULL
+               807         992 PUSH_NULL
                            994 LOAD_FAST                1 (v)
                            996 LOAD_CONST              17 ('03/03/2007')
                            998 PRECALL                  1
                           1002 CALL                     1
                           1012 STORE_FAST               2 (rtn)
                
-               795        1014 LOAD_FAST                0 (self)
+               808        1014 LOAD_FAST                0 (self)
                           1016 LOAD_METHOD              3 (assertEqual)
                
-               796        1038 LOAD_FAST                2 (rtn)
+               809        1038 LOAD_FAST                2 (rtn)
                           1040 LOAD_CONST              20 (('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009'))
                
-               795        1042 PRECALL                  2
+               808        1042 PRECALL                  2
                           1046 CALL                     2
                           1056 POP_TOP
                           1058 LOAD_CONST               0 (None)
                           1060 RETURN_VALUE
                consts
                   None
                   2008
@@ -8409,17 +8594,17 @@
                   ('03/03/2007', 'Enter date on or after 01/01/2008')
                   ('minimum', 'maximum', 'format')
                   ('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009')
                names      ('IS_DATE_IN_RANGE', 'datetime', 'date', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE_IN_RANGE'
-               firstlineno 767
+               firstlineno 780
                lnotab
                   0x02010c012a012a01020102fc12071601580116012c013e0158013e0158
                   014a0116012c014a0116012c010c012a012a0102fd12051601180104ff
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
@@ -8463,55 +8648,55 @@
                   000000000000007d027c00a0020000000000000000000000000000000000
                   0000007c026419a6020000ab020000000000000000010074010000000000
                   00000000007403000000000000000000006a010000000000000000640564
                   03640664036404a6050000ab050000000000000000641a6408ac1ba60300
                   00ab0300000000000000007d0102007c01641ca6010000ab010000000000
                   0000007d027c00a00200000000000000000000000000000000000000007c
                   02641da6020000ab020000000000000000010064005300
-               799           0 RESUME                   0
+               812           0 RESUME                   0
                
-               800           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               813           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               801          14 LOAD_GLOBAL              3 (NULL + datetime)
+               814          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                1 (datetime)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 LOAD_CONST               3 (12)
                             44 LOAD_CONST               4 (20)
                             46 PRECALL                  5
                             50 CALL                     5
                
-               802          60 LOAD_GLOBAL              3 (NULL + datetime)
+               815          60 LOAD_GLOBAL              3 (NULL + datetime)
                             72 LOAD_ATTR                1 (datetime)
                             82 LOAD_CONST               5 (2009)
                             84 LOAD_CONST               3 (12)
                             86 LOAD_CONST               6 (31)
                             88 LOAD_CONST               3 (12)
                             90 LOAD_CONST               4 (20)
                             92 PRECALL                  5
                             96 CALL                     5
                
-               803         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
+               816         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
                
-               804         108 LOAD_CONST               8 ('oops')
+               817         108 LOAD_CONST               8 ('oops')
                
-               800         110 KW_NAMES                 9
+               813         110 KW_NAMES                 9
                            112 PRECALL                  4
                            116 CALL                     4
                            126 STORE_FAST               1 (v)
                
-               806         128 PUSH_NULL
+               819         128 PUSH_NULL
                            130 LOAD_FAST                1 (v)
                            132 LOAD_CONST              10 ('03/03/2008 12:40')
                            134 PRECALL                  1
                            138 CALL                     1
                            148 STORE_FAST               2 (rtn)
                
-               807         150 LOAD_FAST                0 (self)
+               820         150 LOAD_FAST                0 (self)
                            152 LOAD_METHOD              2 (assertEqual)
                            174 LOAD_FAST                2 (rtn)
                            176 LOAD_GLOBAL              3 (NULL + datetime)
                            188 LOAD_ATTR                1 (datetime)
                            198 LOAD_CONST               1 (2008)
                            200 LOAD_CONST              11 (3)
                            202 LOAD_CONST              11 (3)
@@ -8521,45 +8706,45 @@
                            212 CALL                     5
                            222 LOAD_CONST               0 (None)
                            224 BUILD_TUPLE              2
                            226 PRECALL                  2
                            230 CALL                     2
                            240 POP_TOP
                
-               808         242 PUSH_NULL
+               821         242 PUSH_NULL
                            244 LOAD_FAST                1 (v)
                            246 LOAD_CONST              13 ('03/03/2010 10:34')
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               809         264 LOAD_FAST                0 (self)
+               822         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST              14 (('03/03/2010 10:34', 'oops'))
                            292 PRECALL                  2
                            296 CALL                     2
                            306 POP_TOP
                
-               810         308 PUSH_NULL
+               823         308 PUSH_NULL
                            310 LOAD_FAST                1 (v)
                            312 LOAD_GLOBAL              3 (NULL + datetime)
                            324 LOAD_ATTR                1 (datetime)
                            334 LOAD_CONST               1 (2008)
                            336 LOAD_CONST              11 (3)
                            338 LOAD_CONST              11 (3)
                            340 LOAD_CONST              15 (0)
                            342 LOAD_CONST              15 (0)
                            344 PRECALL                  5
                            348 CALL                     5
                            358 PRECALL                  1
                            362 CALL                     1
                            372 STORE_FAST               2 (rtn)
                
-               811         374 LOAD_FAST                0 (self)
+               824         374 LOAD_FAST                0 (self)
                            376 LOAD_METHOD              2 (assertEqual)
                            398 LOAD_FAST                2 (rtn)
                            400 LOAD_GLOBAL              3 (NULL + datetime)
                            412 LOAD_ATTR                1 (datetime)
                            422 LOAD_CONST               1 (2008)
                            424 LOAD_CONST              11 (3)
                            426 LOAD_CONST              11 (3)
@@ -8569,30 +8754,30 @@
                            436 CALL                     5
                            446 LOAD_CONST               0 (None)
                            448 BUILD_TUPLE              2
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               812         466 PUSH_NULL
+               825         466 PUSH_NULL
                            468 LOAD_FAST                1 (v)
                            470 LOAD_GLOBAL              3 (NULL + datetime)
                            482 LOAD_ATTR                1 (datetime)
                            492 LOAD_CONST              16 (2010)
                            494 LOAD_CONST              11 (3)
                            496 LOAD_CONST              11 (3)
                            498 LOAD_CONST              15 (0)
                            500 LOAD_CONST              15 (0)
                            502 PRECALL                  5
                            506 CALL                     5
                            516 PRECALL                  1
                            520 CALL                     1
                            530 STORE_FAST               2 (rtn)
                
-               813         532 LOAD_FAST                0 (self)
+               826         532 LOAD_FAST                0 (self)
                            534 LOAD_METHOD              2 (assertEqual)
                            556 LOAD_FAST                2 (rtn)
                            558 LOAD_GLOBAL              3 (NULL + datetime)
                            570 LOAD_ATTR                1 (datetime)
                            580 LOAD_CONST              16 (2010)
                            582 LOAD_CONST              11 (3)
                            584 LOAD_CONST              11 (3)
@@ -8602,162 +8787,162 @@
                            594 CALL                     5
                            604 LOAD_CONST               8 ('oops')
                            606 BUILD_TUPLE              2
                            608 PRECALL                  2
                            612 CALL                     2
                            622 POP_TOP
                
-               814         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               827         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               815         636 LOAD_GLOBAL              3 (NULL + datetime)
+               828         636 LOAD_GLOBAL              3 (NULL + datetime)
                            648 LOAD_ATTR                1 (datetime)
                            658 LOAD_CONST               5 (2009)
                            660 LOAD_CONST               3 (12)
                            662 LOAD_CONST               6 (31)
                            664 LOAD_CONST               3 (12)
                            666 LOAD_CONST               4 (20)
                            668 PRECALL                  5
                            672 CALL                     5
                            682 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               814         684 KW_NAMES                18
+               827         684 KW_NAMES                18
                            686 PRECALL                  2
                            690 CALL                     2
                            700 STORE_FAST               1 (v)
                
-               817         702 PUSH_NULL
+               830         702 PUSH_NULL
                            704 LOAD_FAST                1 (v)
                            706 LOAD_CONST              19 ('03/03/2010 12:20:00')
                            708 PRECALL                  1
                            712 CALL                     1
                            722 STORE_FAST               2 (rtn)
                
-               818         724 LOAD_FAST                0 (self)
+               831         724 LOAD_FAST                0 (self)
                            726 LOAD_METHOD              2 (assertEqual)
                
-               819         748 LOAD_FAST                2 (rtn)
+               832         748 LOAD_FAST                2 (rtn)
                
-               820         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
+               833         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
                
-               818         752 PRECALL                  2
+               831         752 PRECALL                  2
                            756 CALL                     2
                            766 POP_TOP
                
-               825         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               838         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               826         780 LOAD_GLOBAL              3 (NULL + datetime)
+               839         780 LOAD_GLOBAL              3 (NULL + datetime)
                            792 LOAD_ATTR                1 (datetime)
                            802 LOAD_CONST               1 (2008)
                            804 LOAD_CONST               2 (1)
                            806 LOAD_CONST               2 (1)
                            808 LOAD_CONST               3 (12)
                            810 LOAD_CONST               4 (20)
                            812 PRECALL                  5
                            816 CALL                     5
                            826 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               825         828 KW_NAMES                21
+               838         828 KW_NAMES                21
                            830 PRECALL                  2
                            834 CALL                     2
                            844 STORE_FAST               1 (v)
                
-               828         846 PUSH_NULL
+               841         846 PUSH_NULL
                            848 LOAD_FAST                1 (v)
                            850 LOAD_CONST              22 ('03/03/2007 12:20:00')
                            852 PRECALL                  1
                            856 CALL                     1
                            866 STORE_FAST               2 (rtn)
                
-               829         868 LOAD_FAST                0 (self)
+               842         868 LOAD_FAST                0 (self)
                            870 LOAD_METHOD              2 (assertEqual)
                
-               830         892 LOAD_FAST                2 (rtn)
+               843         892 LOAD_FAST                2 (rtn)
                
-               831         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
+               844         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
                
-               829         896 PRECALL                  2
+               842         896 PRECALL                  2
                            900 CALL                     2
                            910 POP_TOP
                
-               836         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               849         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               837         924 LOAD_GLOBAL              3 (NULL + datetime)
+               850         924 LOAD_GLOBAL              3 (NULL + datetime)
                            936 LOAD_ATTR                1 (datetime)
                            946 LOAD_CONST               1 (2008)
                            948 LOAD_CONST               2 (1)
                            950 LOAD_CONST               2 (1)
                            952 LOAD_CONST               3 (12)
                            954 LOAD_CONST               4 (20)
                            956 PRECALL                  5
                            960 CALL                     5
                
-               838         970 LOAD_GLOBAL              3 (NULL + datetime)
+               851         970 LOAD_GLOBAL              3 (NULL + datetime)
                            982 LOAD_ATTR                1 (datetime)
                            992 LOAD_CONST               5 (2009)
                            994 LOAD_CONST               3 (12)
                            996 LOAD_CONST               6 (31)
                            998 LOAD_CONST               3 (12)
                           1000 LOAD_CONST               4 (20)
                           1002 PRECALL                  5
                           1006 CALL                     5
                
-               839        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
+               852        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               836        1018 KW_NAMES                24
+               849        1018 KW_NAMES                24
                           1020 PRECALL                  3
                           1024 CALL                     3
                           1034 STORE_FAST               1 (v)
                
-               841        1036 PUSH_NULL
+               854        1036 PUSH_NULL
                           1038 LOAD_FAST                1 (v)
                           1040 LOAD_CONST              22 ('03/03/2007 12:20:00')
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 STORE_FAST               2 (rtn)
                
-               842        1058 LOAD_FAST                0 (self)
+               855        1058 LOAD_FAST                0 (self)
                           1060 LOAD_METHOD              2 (assertEqual)
                
-               843        1082 LOAD_FAST                2 (rtn)
+               856        1082 LOAD_FAST                2 (rtn)
                
-               844        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
+               857        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
                
-               842        1086 PRECALL                  2
+               855        1086 PRECALL                  2
                           1090 CALL                     2
                           1100 POP_TOP
                
-               849        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               862        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               850        1114 LOAD_GLOBAL              3 (NULL + datetime)
+               863        1114 LOAD_GLOBAL              3 (NULL + datetime)
                           1126 LOAD_ATTR                1 (datetime)
                           1136 LOAD_CONST               5 (2009)
                           1138 LOAD_CONST               3 (12)
                           1140 LOAD_CONST               6 (31)
                           1142 LOAD_CONST               3 (12)
                           1144 LOAD_CONST               4 (20)
                           1146 PRECALL                  5
                           1150 CALL                     5
                
-               851        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
+               864        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
                
-               852        1162 LOAD_CONST               8 ('oops')
+               865        1162 LOAD_CONST               8 ('oops')
                
-               849        1164 KW_NAMES                27
+               862        1164 KW_NAMES                27
                           1166 PRECALL                  3
                           1170 CALL                     3
                           1180 STORE_FAST               1 (v)
                
-               854        1182 PUSH_NULL
+               867        1182 PUSH_NULL
                           1184 LOAD_FAST                1 (v)
                           1186 LOAD_CONST              28 ('clearly not a date')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 STORE_FAST               2 (rtn)
                
-               855        1204 LOAD_FAST                0 (self)
+               868        1204 LOAD_FAST                0 (self)
                           1206 LOAD_METHOD              2 (assertEqual)
                           1228 LOAD_FAST                2 (rtn)
                           1230 LOAD_CONST              29 (('clearly not a date', 'oops'))
                           1232 PRECALL                  2
                           1236 CALL                     2
                           1246 POP_TOP
                           1248 LOAD_CONST               0 (None)
@@ -8793,17 +8978,17 @@
                   ('maximum', 'format', 'error_message')
                   'clearly not a date'
                   ('clearly not a date', 'oops')
                names      ('IS_DATETIME_IN_RANGE', 'datetime', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME_IN_RANGE'
-               firstlineno 799
+               firstlineno 812
                lnotab
                   0x02010c012e012e01020102fc120616015c0116012c0142015c0142015c
                   010c0130ff120316011801020102fe10070c0130ff120316011801020102
                   fe10070c012e012e0102fd120516011801020102fe10070c012e01020102
                   fd12051601
             code
                argcount  : 1
@@ -8834,102 +9019,102 @@
                   000000000000006408ac0aa6020000ab0200000000000000006700640ba2
                   01a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026700640ba201640c6602a6020000ab0200
                   00000000000000010002007401000000000000000000006406ac07a60100
                   00ab010000000000000000640da6010000ab0100000000000000007d027c
                   00a00200000000000000000000000000000000000000007c02640ea60200
                   00ab020000000000000000010064005300
-               857           0 RESUME                   0
+               870           0 RESUME                   0
                
-               858           2 BUILD_LIST               0
+               871           2 BUILD_LIST               0
                              4 LOAD_CONST               1 ((0, 1, 2, 3, 4))
                              6 LIST_EXTEND              1
                              8 STORE_FAST               1 (values)
                
-               859          10 PUSH_NULL
+               872          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                             24 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                             36 LOAD_CONST               2 (0)
                             38 LOAD_CONST               3 (10)
                             40 PRECALL                  2
                             44 CALL                     2
                             54 PRECALL                  1
                             58 CALL                     1
                             68 LOAD_FAST                1 (values)
                             70 PRECALL                  1
                             74 CALL                     1
                             84 STORE_FAST               2 (rtn)
                
-               860          86 LOAD_FAST                0 (self)
+               873          86 LOAD_FAST                0 (self)
                             88 LOAD_METHOD              2 (assertEqual)
                            110 LOAD_FAST                2 (rtn)
                            112 LOAD_FAST                1 (values)
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               861         134 LOAD_FAST                1 (values)
+               874         134 LOAD_FAST                1 (values)
                            136 LOAD_METHOD              3 (append)
                            158 LOAD_CONST               4 (11)
                            160 PRECALL                  1
                            164 CALL                     1
                            174 POP_TOP
                
-               862         176 PUSH_NULL
+               875         176 PUSH_NULL
                            178 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            190 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            202 LOAD_CONST               2 (0)
                            204 LOAD_CONST               3 (10)
                            206 PRECALL                  2
                            210 CALL                     2
                            220 PRECALL                  1
                            224 CALL                     1
                            234 LOAD_FAST                1 (values)
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               863         252 LOAD_FAST                0 (self)
+               876         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              2 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_FAST                1 (values)
                            280 LOAD_CONST               5 ('Enter an integer between 0 and 9')
                            282 BUILD_TUPLE              2
                            284 PRECALL                  2
                            288 CALL                     2
                            298 POP_TOP
                
-               864         300 PUSH_NULL
+               877         300 PUSH_NULL
                            302 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            314 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            326 LOAD_CONST               2 (0)
                            328 LOAD_CONST               3 (10)
                            330 PRECALL                  2
                            334 CALL                     2
                            344 PRECALL                  1
                            348 CALL                     1
                            358 LOAD_CONST               6 (1)
                            360 PRECALL                  1
                            364 CALL                     1
                            374 STORE_FAST               2 (rtn)
                
-               865         376 LOAD_FAST                0 (self)
+               878         376 LOAD_FAST                0 (self)
                            378 LOAD_METHOD              2 (assertEqual)
                            400 LOAD_FAST                2 (rtn)
                            402 LOAD_CONST               6 (1)
                            404 BUILD_LIST               1
                            406 LOAD_CONST               0 (None)
                            408 BUILD_TUPLE              2
                            410 PRECALL                  2
                            414 CALL                     2
                            424 POP_TOP
                
-               866         426 PUSH_NULL
+               879         426 PUSH_NULL
                            428 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            440 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            452 LOAD_CONST               2 (0)
                            454 LOAD_CONST               3 (10)
                            456 PRECALL                  2
                            460 CALL                     2
                            470 LOAD_CONST               3 (10)
@@ -8939,27 +9124,27 @@
                            488 LOAD_CONST               6 (1)
                            490 LOAD_CONST               8 (2)
                            492 BUILD_LIST               2
                            494 PRECALL                  1
                            498 CALL                     1
                            508 STORE_FAST               2 (rtn)
                
-               867         510 LOAD_FAST                0 (self)
+               880         510 LOAD_FAST                0 (self)
                            512 LOAD_METHOD              2 (assertEqual)
                            534 LOAD_FAST                2 (rtn)
                            536 LOAD_CONST               6 (1)
                            538 LOAD_CONST               8 (2)
                            540 BUILD_LIST               2
                            542 LOAD_CONST               9 ('Minimum length is 10')
                            544 BUILD_TUPLE              2
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                
-               868         562 PUSH_NULL
+               881         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            576 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            588 LOAD_CONST               2 (0)
                            590 LOAD_CONST               3 (10)
                            592 PRECALL                  2
                            596 CALL                     2
                            606 LOAD_CONST               8 (2)
@@ -8969,38 +9154,38 @@
                            624 BUILD_LIST               0
                            626 LOAD_CONST              11 ((1, 2, 3))
                            628 LIST_EXTEND              1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               869         646 LOAD_FAST                0 (self)
+               882         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                            670 LOAD_FAST                2 (rtn)
                            672 BUILD_LIST               0
                            674 LOAD_CONST              11 ((1, 2, 3))
                            676 LIST_EXTEND              1
                            678 LOAD_CONST              12 ('Maximum length is 2')
                            680 BUILD_TUPLE              2
                            682 PRECALL                  2
                            686 CALL                     2
                            696 POP_TOP
                
-               871         698 PUSH_NULL
+               884         698 PUSH_NULL
                            700 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            712 LOAD_CONST               6 (1)
                            714 KW_NAMES                 7
                            716 PRECALL                  1
                            720 CALL                     1
                            730 LOAD_CONST              13 ('')
                            732 PRECALL                  1
                            736 CALL                     1
                            746 STORE_FAST               2 (rtn)
                
-               872         748 LOAD_FAST                0 (self)
+               885         748 LOAD_FAST                0 (self)
                            750 LOAD_METHOD              2 (assertEqual)
                            772 LOAD_FAST                2 (rtn)
                            774 LOAD_CONST              14 (('', 'Minimum length is 1'))
                            776 PRECALL                  2
                            780 CALL                     2
                            790 POP_TOP
                            792 LOAD_CONST               0 (None)
@@ -9021,17 +9206,17 @@
                   'Maximum length is 2'
                   ''
                   ('', 'Minimum length is 1')
                names      ('IS_LIST_OF', 'IS_INT_IN_RANGE', 'assertEqual', 'append')
                varnames   ('self', 'values', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF'
-               firstlineno 857
+               firstlineno 870
                lnotab 0x020108014c0130012a014c0130014c01320154013401540134023201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9041,60 +9226,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               874           0 RESUME                   0
+               887           0 RESUME                   0
                
-               875           2 PUSH_NULL
+               888           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('ABC')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               876          48 LOAD_FAST                0 (self)
+               889          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               877          92 PUSH_NULL
+               890          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'ABC')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               878         138 LOAD_FAST                0 (self)
+               891         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'abc', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               879         182 PUSH_NULL
+               892         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               880         228 LOAD_FAST                0 (self)
+               893         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9107,17 +9292,17 @@
                   (b'abc', None)
                   ''
                   ('', None)
                names      ('IS_LOWER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LOWER'
-               firstlineno 874
+               firstlineno 887
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9127,60 +9312,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               882           0 RESUME                   0
+               895           0 RESUME                   0
                
-               883           2 PUSH_NULL
+               896           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               884          48 LOAD_FAST                0 (self)
+               897          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('ABC', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               885          92 PUSH_NULL
+               898          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'abc')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               886         138 LOAD_FAST                0 (self)
+               899         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'ABC', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               887         182 PUSH_NULL
+               900         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               888         228 LOAD_FAST                0 (self)
+               901         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9193,17 +9378,17 @@
                   (b'ABC', None)
                   ''
                   ('', None)
                names      ('IS_UPPER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPPER'
-               firstlineno 882
+               firstlineno 895
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9262,346 +9447,346 @@
                   000000000000006416ac1aa6010000ab010000000000000000641ca60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c01641da6020000ab0200000000000000000100020074
                   01000000000000000000006418ac1aa6010000ab01000000000000000064
                   1ca6010000ab0100000000000000007d017c00a001000000000000000000
                   00000000000000000000007c01641ea6020000ab02000000000000000001
                   0064005300
-               890           0 RESUME                   0
+               903           0 RESUME                   0
                
-               891           2 PUSH_NULL
+               904           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc123')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               892          48 LOAD_FAST                0 (self)
+               905          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc123', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               893          92 PUSH_NULL
+               906          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('ABC123')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               894         138 LOAD_FAST                0 (self)
+               907         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               2 (('abc123', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               895         182 PUSH_NULL
+               908         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               4 ('abc-123')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               896         228 LOAD_FAST                0 (self)
+               909         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               5 (('abc-123', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               897         272 PUSH_NULL
+               910         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               6 ('abc--123')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               898         318 LOAD_FAST                0 (self)
+               911         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               5 (('abc-123', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               899         362 PUSH_NULL
+               912         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               7 ('abc 123')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               900         408 LOAD_FAST                0 (self)
+               913         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               5 (('abc-123', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               901         452 PUSH_NULL
+               914         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST               8 ('abc\t_123')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               902         498 LOAD_FAST                0 (self)
+               915         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST               5 (('abc-123', None))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               903         542 PUSH_NULL
+               916         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST               9 ('-abc-')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               904         588 LOAD_FAST                0 (self)
+               917         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              10 (('abc', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               905         632 PUSH_NULL
+               918         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              11 ('--a--b--_ -c--')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               906         678 LOAD_FAST                0 (self)
+               919         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              12 (('a-b-c', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               907         722 PUSH_NULL
+               920         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              13 ('abc&amp;123')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               908         768 LOAD_FAST                0 (self)
+               921         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST               2 (('abc123', None))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               909         812 PUSH_NULL
+               922         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              14 ('abc&amp;123&amp;def')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               910         858 LOAD_FAST                0 (self)
+               923         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              15 (('abc123def', None))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               911         902 PUSH_NULL
+               924         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              16 ('')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               912         948 LOAD_FAST                0 (self)
+               925         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              17 (('n', None))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               913         992 PUSH_NULL
+               926         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1006 LOAD_CONST              18 (4)
                           1008 KW_NAMES                19
                           1010 PRECALL                  1
                           1014 CALL                     1
                           1024 LOAD_CONST               1 ('abc123')
                           1026 PRECALL                  1
                           1030 CALL                     1
                           1040 STORE_FAST               1 (rtn)
                
-               914        1042 LOAD_FAST                0 (self)
+               927        1042 LOAD_FAST                0 (self)
                           1044 LOAD_METHOD              1 (assertEqual)
                           1066 LOAD_FAST                1 (rtn)
                           1068 LOAD_CONST              20 (('abc1', None))
                           1070 PRECALL                  2
                           1074 CALL                     2
                           1084 POP_TOP
                
-               915        1086 PUSH_NULL
+               928        1086 PUSH_NULL
                           1088 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1100 PRECALL                  0
                           1104 CALL                     0
                           1114 LOAD_CONST              21 ('abc_123')
                           1116 PRECALL                  1
                           1120 CALL                     1
                           1130 STORE_FAST               1 (rtn)
                
-               916        1132 LOAD_FAST                0 (self)
+               929        1132 LOAD_FAST                0 (self)
                           1134 LOAD_METHOD              1 (assertEqual)
                           1156 LOAD_FAST                1 (rtn)
                           1158 LOAD_CONST               5 (('abc-123', None))
                           1160 PRECALL                  2
                           1164 CALL                     2
                           1174 POP_TOP
                
-               917        1176 PUSH_NULL
+               930        1176 PUSH_NULL
                           1178 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1190 LOAD_CONST              22 (False)
                           1192 KW_NAMES                23
                           1194 PRECALL                  1
                           1198 CALL                     1
                           1208 LOAD_CONST              21 ('abc_123')
                           1210 PRECALL                  1
                           1214 CALL                     1
                           1224 STORE_FAST               1 (rtn)
                
-               918        1226 LOAD_FAST                0 (self)
+               931        1226 LOAD_FAST                0 (self)
                           1228 LOAD_METHOD              1 (assertEqual)
                           1250 LOAD_FAST                1 (rtn)
                           1252 LOAD_CONST               5 (('abc-123', None))
                           1254 PRECALL                  2
                           1258 CALL                     2
                           1268 POP_TOP
                
-               919        1270 PUSH_NULL
+               932        1270 PUSH_NULL
                           1272 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1284 LOAD_CONST              24 (True)
                           1286 KW_NAMES                23
                           1288 PRECALL                  1
                           1292 CALL                     1
                           1302 LOAD_CONST              21 ('abc_123')
                           1304 PRECALL                  1
                           1308 CALL                     1
                           1318 STORE_FAST               1 (rtn)
                
-               920        1320 LOAD_FAST                0 (self)
+               933        1320 LOAD_FAST                0 (self)
                           1322 LOAD_METHOD              1 (assertEqual)
                           1344 LOAD_FAST                1 (rtn)
                           1346 LOAD_CONST              25 (('abc_123', None))
                           1348 PRECALL                  2
                           1352 CALL                     2
                           1362 POP_TOP
                
-               921        1364 PUSH_NULL
+               934        1364 PUSH_NULL
                           1366 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1378 LOAD_CONST              22 (False)
                           1380 KW_NAMES                26
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 LOAD_CONST              27 ('abc')
                           1398 PRECALL                  1
                           1402 CALL                     1
                           1412 STORE_FAST               1 (rtn)
                
-               922        1414 LOAD_FAST                0 (self)
+               935        1414 LOAD_FAST                0 (self)
                           1416 LOAD_METHOD              1 (assertEqual)
                           1438 LOAD_FAST                1 (rtn)
                           1440 LOAD_CONST              10 (('abc', None))
                           1442 PRECALL                  2
                           1446 CALL                     2
                           1456 POP_TOP
                
-               923        1458 PUSH_NULL
+               936        1458 PUSH_NULL
                           1460 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1472 LOAD_CONST              24 (True)
                           1474 KW_NAMES                26
                           1476 PRECALL                  1
                           1480 CALL                     1
                           1490 LOAD_CONST              27 ('abc')
                           1492 PRECALL                  1
                           1496 CALL                     1
                           1506 STORE_FAST               1 (rtn)
                
-               924        1508 LOAD_FAST                0 (self)
+               937        1508 LOAD_FAST                0 (self)
                           1510 LOAD_METHOD              1 (assertEqual)
                           1532 LOAD_FAST                1 (rtn)
                           1534 LOAD_CONST              10 (('abc', None))
                           1536 PRECALL                  2
                           1540 CALL                     2
                           1550 POP_TOP
                
-               925        1552 PUSH_NULL
+               938        1552 PUSH_NULL
                           1554 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1566 LOAD_CONST              22 (False)
                           1568 KW_NAMES                26
                           1570 PRECALL                  1
                           1574 CALL                     1
                           1584 LOAD_CONST              28 ('a bc')
                           1586 PRECALL                  1
                           1590 CALL                     1
                           1600 STORE_FAST               1 (rtn)
                
-               926        1602 LOAD_FAST                0 (self)
+               939        1602 LOAD_FAST                0 (self)
                           1604 LOAD_METHOD              1 (assertEqual)
                           1626 LOAD_FAST                1 (rtn)
                           1628 LOAD_CONST              29 (('a-bc', None))
                           1630 PRECALL                  2
                           1634 CALL                     2
                           1644 POP_TOP
                
-               927        1646 PUSH_NULL
+               940        1646 PUSH_NULL
                           1648 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1660 LOAD_CONST              24 (True)
                           1662 KW_NAMES                26
                           1664 PRECALL                  1
                           1668 CALL                     1
                           1678 LOAD_CONST              28 ('a bc')
                           1680 PRECALL                  1
                           1684 CALL                     1
                           1694 STORE_FAST               1 (rtn)
                
-               928        1696 LOAD_FAST                0 (self)
+               941        1696 LOAD_FAST                0 (self)
                           1698 LOAD_METHOD              1 (assertEqual)
                           1720 LOAD_FAST                1 (rtn)
                           1722 LOAD_CONST              30 (('a bc', 'Must be slug'))
                           1724 PRECALL                  2
                           1728 CALL                     2
                           1738 POP_TOP
                           1740 LOAD_CONST               0 (None)
@@ -9638,17 +9823,17 @@
                   'a bc'
                   ('a-bc', None)
                   ('a bc', 'Must be slug')
                names      ('IS_SLUG', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_SLUG'
-               firstlineno 890
+               firstlineno 903
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c0132012c012e012c0132012c0132
                   012c0132012c0132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
@@ -9689,17 +9874,17 @@
                   0000000000640cac0da6010000ab01000000000000000074030000000000
                   0000000000a6000000ab0000000000000000006702a6010000ab01000000
                   0000000000a0070000000000000000000000000000000000000000740b00
                   0000000000000000006a060000000000000000640e640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d017c00a00300
                   000000000000000000000000000000000000007c01640fa6020000ab0200
                   00000000000000010064005300
-               930           0 RESUME                   0
+               943           0 RESUME                   0
                
-               931           2 PUSH_NULL
+               944           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + ANY_OF)
                             16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             28 PRECALL                  0
                             32 CALL                     0
                             42 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                             54 PRECALL                  0
                             58 CALL                     0
@@ -9707,23 +9892,23 @@
                             70 PRECALL                  1
                             74 CALL                     1
                             84 LOAD_CONST               1 ('a@b.co')
                             86 PRECALL                  1
                             90 CALL                     1
                            100 STORE_FAST               1 (rtn)
                
-               932         102 LOAD_FAST                0 (self)
+               945         102 LOAD_FAST                0 (self)
                            104 LOAD_METHOD              3 (assertEqual)
                            126 LOAD_FAST                1 (rtn)
                            128 LOAD_CONST               2 (('a@b.co', None))
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               933         146 PUSH_NULL
+               946         146 PUSH_NULL
                            148 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            160 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            172 PRECALL                  0
                            176 CALL                     0
                            186 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            198 PRECALL                  0
                            202 CALL                     0
@@ -9731,23 +9916,23 @@
                            214 PRECALL                  1
                            218 CALL                     1
                            228 LOAD_CONST               3 ('abco')
                            230 PRECALL                  1
                            234 CALL                     1
                            244 STORE_FAST               1 (rtn)
                
-               934         246 LOAD_FAST                0 (self)
+               947         246 LOAD_FAST                0 (self)
                            248 LOAD_METHOD              3 (assertEqual)
                            270 LOAD_FAST                1 (rtn)
                            272 LOAD_CONST               4 (('abco', None))
                            274 PRECALL                  2
                            278 CALL                     2
                            288 POP_TOP
                
-               935         290 PUSH_NULL
+               948         290 PUSH_NULL
                            292 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            304 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            316 PRECALL                  0
                            320 CALL                     0
                            330 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            342 PRECALL                  0
                            346 CALL                     0
@@ -9755,23 +9940,23 @@
                            358 PRECALL                  1
                            362 CALL                     1
                            372 LOAD_CONST               5 ('@ab.co')
                            374 PRECALL                  1
                            378 CALL                     1
                            388 STORE_FAST               1 (rtn)
                
-               936         390 LOAD_FAST                0 (self)
+               949         390 LOAD_FAST                0 (self)
                            392 LOAD_METHOD              3 (assertEqual)
                            414 LOAD_FAST                1 (rtn)
                            416 LOAD_CONST               6 (('@ab.co', 'Enter only letters, numbers, and underscore'))
                            418 PRECALL                  2
                            422 CALL                     2
                            432 POP_TOP
                
-               937         434 PUSH_NULL
+               950         434 PUSH_NULL
                            436 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            448 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            460 PRECALL                  0
                            464 CALL                     0
                            474 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            486 PRECALL                  0
                            490 CALL                     0
@@ -9779,23 +9964,23 @@
                            502 PRECALL                  1
                            506 CALL                     1
                            516 LOAD_CONST               5 ('@ab.co')
                            518 PRECALL                  1
                            522 CALL                     1
                            532 STORE_FAST               1 (rtn)
                
-               938         534 LOAD_FAST                0 (self)
+               951         534 LOAD_FAST                0 (self)
                            536 LOAD_METHOD              3 (assertEqual)
                            558 LOAD_FAST                1 (rtn)
                            560 LOAD_CONST               7 (('@ab.co', 'Enter a valid email address'))
                            562 PRECALL                  2
                            566 CALL                     2
                            576 POP_TOP
                
-               939         578 PUSH_NULL
+               952         578 PUSH_NULL
                            580 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            592 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            604 PRECALL                  0
                            608 CALL                     0
                            618 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            630 PRECALL                  0
                            634 CALL                     0
@@ -9803,23 +9988,23 @@
                            646 PRECALL                  1
                            650 CALL                     1
                            660 LOAD_CONST               1 ('a@b.co')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               940         678 LOAD_FAST                0 (self)
+               953         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              3 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST               2 (('a@b.co', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               941         722 PUSH_NULL
+               954         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            736 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            748 PRECALL                  0
                            752 CALL                     0
                            762 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            774 PRECALL                  0
                            778 CALL                     0
@@ -9827,15 +10012,15 @@
                            790 PRECALL                  1
                            794 CALL                     1
                            804 LOAD_CONST               8 ('1982-12-14')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               1 (rtn)
                
-               942         822 LOAD_FAST                0 (self)
+               955         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              3 (assertEqual)
                            846 LOAD_FAST                1 (rtn)
                            848 LOAD_GLOBAL             11 (NULL + datetime)
                            860 LOAD_ATTR                6 (date)
                            870 LOAD_CONST               9 (1982)
                            872 LOAD_CONST              10 (12)
                            874 LOAD_CONST              11 (14)
@@ -9843,41 +10028,41 @@
                            880 CALL                     3
                            890 LOAD_CONST               0 (None)
                            892 BUILD_TUPLE              2
                            894 PRECALL                  2
                            898 CALL                     2
                            908 POP_TOP
                
-               943         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
+               956         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            922 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            934 LOAD_CONST              12 ('%m/%d/%Y')
                            936 KW_NAMES                13
                            938 PRECALL                  1
                            942 CALL                     1
                            952 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            964 PRECALL                  0
                            968 CALL                     0
                            978 BUILD_LIST               2
                            980 PRECALL                  1
                            984 CALL                     1
                            994 LOAD_METHOD              7 (formatter)
                
-               944        1016 LOAD_GLOBAL             11 (NULL + datetime)
+               957        1016 LOAD_GLOBAL             11 (NULL + datetime)
                           1028 LOAD_ATTR                6 (date)
                           1038 LOAD_CONST              14 (1834)
                           1040 LOAD_CONST              10 (12)
                           1042 LOAD_CONST              11 (14)
                           1044 PRECALL                  3
                           1048 CALL                     3
                
-               943        1058 PRECALL                  1
+               956        1058 PRECALL                  1
                           1062 CALL                     1
                           1072 STORE_FAST               1 (rtn)
                
-               946        1074 LOAD_FAST                0 (self)
+               959        1074 LOAD_FAST                0 (self)
                           1076 LOAD_METHOD              3 (assertEqual)
                           1098 LOAD_FAST                1 (rtn)
                           1100 LOAD_CONST              15 ('12/14/1834')
                           1102 PRECALL                  2
                           1106 CALL                     2
                           1116 POP_TOP
                           1118 LOAD_CONST               0 (None)
@@ -9899,52 +10084,52 @@
                   ('format',)
                   1834
                   '12/14/1834'
                names      ('ANY_OF', 'IS_EMAIL', 'IS_ALPHANUMERIC', 'assertEqual', 'IS_DATE', 'datetime', 'date', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_ANY_OF'
-               firstlineno 930
+               firstlineno 943
                lnotab
                   0x020164012c0164012c0164012c0164012c0164012c01640158016a012a
                   ff1003
             code
                argcount  : 0
                nlocals   : 0
                stacksize : 1
                flags     : 0
                code 0x970065005a0164005a0264015a03640284005a0464035300
-               948           0 RESUME                   0
+               961           0 RESUME                   0
                              2 LOAD_NAME                0 (__name__)
                              4 STORE_NAME               1 (__module__)
                              6 LOAD_CONST               0 ('TestValidators.CustomValidator')
                              8 STORE_NAME               2 (__qualname__)
                
-               949          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
+               962          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
                             12 STORE_NAME               3 (__doc__)
                
-               951          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 951>)
+               964          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 964>)
                             16 MAKE_FUNCTION            0
                             18 STORE_NAME               4 (__call__)
                             20 LOAD_CONST               3 (None)
                             22 RETURN_VALUE
                consts
                   'TestValidators.CustomValidator'
                   'Custom Validator not overloading .validate()'
                   code
                      argcount  : 2
                      nlocals   : 2
                      stacksize : 2
                      flags     : 3
                      code 0x97007c0172047c01640066026e037c01640166025300
-                     951           0 RESUME                   0
+                     964           0 RESUME                   0
                      
-                     952           2 LOAD_FAST                1 (value)
+                     965           2 LOAD_FAST                1 (value)
                                    4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                                    6 LOAD_FAST                1 (value)
                                    8 LOAD_CONST               0 (None)
                                   10 BUILD_TUPLE              2
                                   12 JUMP_FORWARD             3 (to 20)
                              >>   14 LOAD_FAST                1 (value)
                                   16 LOAD_CONST               1 ('invalid!')
@@ -9953,37 +10138,37 @@
                      consts
                         None
                         'invalid!'
                      names      ()
                      varnames   ('self', 'value')
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '__call__'
-                     firstlineno 951
+                     firstlineno 964
                      lnotab 0x0201
                   None
                names      ('__name__', '__module__', '__qualname__', '__doc__', '__call__')
                varnames   ()
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'CustomValidator'
-               firstlineno 948
+               firstlineno 961
                lnotab 0x0a010402
             'CustomValidator'
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 2
                flags     : 3
                code 0x97007c0072047c00640166026e037c00640266025300
-               954           0 RESUME                   0
+               967           0 RESUME                   0
                
-               957           2 LOAD_FAST                0 (value)
+               970           2 LOAD_FAST                0 (value)
                              4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                              6 LOAD_FAST                0 (value)
                              8 LOAD_CONST               1 (None)
                             10 BUILD_TUPLE              2
                             12 JUMP_FORWARD             3 (to 20)
                        >>   14 LOAD_FAST                0 (value)
                             16 LOAD_CONST               2 ('invalid!')
@@ -9993,17 +10178,17 @@
                   'Validation function instead of Validator subclass'
                   None
                   'invalid!'
                names      ()
                varnames   ('value',)
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'custom_validator_func'
-               firstlineno 954
+               firstlineno 967
                lnotab 0x0203
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
                flags     : 3
                code
@@ -10062,336 +10247,336 @@
                   000000000000007c006a070000000000000000a6010000ab010000000000
                   0000006416a6010000ab0100000000000000007d017c00a0020000000000
                   0000000000000000000000000000007c016417a6020000ab020000000000
                   000000010002007401000000000000000000007c006a0700000000000000
                   00a6010000ab0100000000000000006418a6010000ab0100000000000000
                   007d017c00a00200000000000000000000000000000000000000007c0164
                   19a6020000ab020000000000000000010064005300
-               959           0 RESUME                   0
-               
-               960           2 PUSH_NULL
-                             4 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                            16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                            28 PRECALL                  0
-                            32 CALL                     0
-                            42 PRECALL                  1
-                            46 CALL                     1
-                            56 LOAD_CONST               1 ('abc@def.com')
-                            58 PRECALL                  1
-                            62 CALL                     1
-                            72 STORE_FAST               1 (rtn)
-               
-               961          74 LOAD_FAST                0 (self)
-                            76 LOAD_METHOD              2 (assertEqual)
-                            98 LOAD_FAST                1 (rtn)
-                           100 LOAD_CONST               2 (('abc@def.com', None))
-                           102 PRECALL                  2
-                           106 CALL                     2
-                           116 POP_TOP
-               
-               962         118 PUSH_NULL
-                           120 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                           132 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                           144 PRECALL                  0
-                           148 CALL                     0
-                           158 PRECALL                  1
-                           162 CALL                     1
-                           172 LOAD_CONST               3 ('   ')
-                           174 PRECALL                  1
-                           178 CALL                     1
-                           188 STORE_FAST               1 (rtn)
-               
-               963         190 LOAD_FAST                0 (self)
-                           192 LOAD_METHOD              2 (assertEqual)
-                           214 LOAD_FAST                1 (rtn)
-                           216 LOAD_CONST               4 ((None, None))
-                           218 PRECALL                  2
-                           222 CALL                     2
-                           232 POP_TOP
-               
-               964         234 PUSH_NULL
-                           236 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                           248 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                           260 PRECALL                  0
-                           264 CALL                     0
-                           274 LOAD_CONST               5 ('abc')
-                           276 KW_NAMES                 6
-                           278 PRECALL                  2
-                           282 CALL                     2
-                           292 LOAD_CONST               3 ('   ')
-                           294 PRECALL                  1
-                           298 CALL                     1
-                           308 STORE_FAST               1 (rtn)
-               
-               965         310 LOAD_FAST                0 (self)
-                           312 LOAD_METHOD              2 (assertEqual)
-                           334 LOAD_FAST                1 (rtn)
-                           336 LOAD_CONST               7 (('abc', None))
-                           338 PRECALL                  2
-                           342 CALL                     2
-                           352 POP_TOP
-               
-               966         354 PUSH_NULL
-                           356 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                           368 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                           380 PRECALL                  0
-                           384 CALL                     0
-                           394 LOAD_CONST               5 ('abc')
-                           396 LOAD_CONST               8 ('def')
-                           398 KW_NAMES                 9
-                           400 PRECALL                  3
-                           404 CALL                     3
-                           414 LOAD_CONST               8 ('def')
-                           416 PRECALL                  1
-                           420 CALL                     1
-                           430 STORE_FAST               1 (rtn)
-               
-               967         432 LOAD_FAST                0 (self)
-                           434 LOAD_METHOD              2 (assertEqual)
-                           456 LOAD_FAST                1 (rtn)
-                           458 LOAD_CONST               7 (('abc', None))
-                           460 PRECALL                  2
-                           464 CALL                     2
-                           474 POP_TOP
-               
-               968         476 PUSH_NULL
-                           478 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                           490 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                           502 PRECALL                  0
-                           506 CALL                     0
-                           516 PRECALL                  1
-                           520 CALL                     1
-                           530 LOAD_CONST               5 ('abc')
-                           532 PRECALL                  1
-                           536 CALL                     1
-                           546 STORE_FAST               1 (rtn)
-               
-               969         548 LOAD_FAST                0 (self)
-                           550 LOAD_METHOD              2 (assertEqual)
-                           572 LOAD_FAST                1 (rtn)
-                           574 LOAD_CONST              10 (('abc', 'Enter a valid email address'))
-                           576 PRECALL                  2
-                           580 CALL                     2
-                           590 POP_TOP
-               
-               970         592 PUSH_NULL
-                           594 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                           606 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                           618 PRECALL                  0
-                           622 CALL                     0
-                           632 PRECALL                  1
-                           636 CALL                     1
-                           646 LOAD_CONST              11 (' abc ')
-                           648 PRECALL                  1
-                           652 CALL                     1
-                           662 STORE_FAST               1 (rtn)
-               
-               971         664 LOAD_FAST                0 (self)
-                           666 LOAD_METHOD              2 (assertEqual)
-                           688 LOAD_FAST                1 (rtn)
-                           690 LOAD_CONST              12 ((' abc ', 'Enter a valid email address'))
-                           692 PRECALL                  2
-                           696 CALL                     2
-                           706 POP_TOP
-               
-               972         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-               
-               973         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
-                           732 LOAD_CONST              13 (('id1', 'first label'))
-                           734 LOAD_CONST              14 (('id2', 'second label'))
-                           736 BUILD_LIST               2
-                           738 LOAD_CONST              15 ('zero')
-                           740 KW_NAMES                16
-                           742 PRECALL                  2
-                           746 CALL                     2
+                972           0 RESUME                   0
                
-               972         756 PRECALL                  1
-                           760 CALL                     1
+                973           2 PUSH_NULL
+                              4 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                             16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                             28 PRECALL                  0
+                             32 CALL                     0
+                             42 PRECALL                  1
+                             46 CALL                     1
+                             56 LOAD_CONST               1 ('abc@def.com')
+                             58 PRECALL                  1
+                             62 CALL                     1
+                             72 STORE_FAST               1 (rtn)
+               
+                974          74 LOAD_FAST                0 (self)
+                             76 LOAD_METHOD              2 (assertEqual)
+                             98 LOAD_FAST                1 (rtn)
+                            100 LOAD_CONST               2 (('abc@def.com', None))
+                            102 PRECALL                  2
+                            106 CALL                     2
+                            116 POP_TOP
+               
+                975         118 PUSH_NULL
+                            120 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                            132 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                            144 PRECALL                  0
+                            148 CALL                     0
+                            158 PRECALL                  1
+                            162 CALL                     1
+                            172 LOAD_CONST               3 ('   ')
+                            174 PRECALL                  1
+                            178 CALL                     1
+                            188 STORE_FAST               1 (rtn)
+               
+                976         190 LOAD_FAST                0 (self)
+                            192 LOAD_METHOD              2 (assertEqual)
+                            214 LOAD_FAST                1 (rtn)
+                            216 LOAD_CONST               4 ((None, None))
+                            218 PRECALL                  2
+                            222 CALL                     2
+                            232 POP_TOP
+               
+                977         234 PUSH_NULL
+                            236 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                            248 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                            260 PRECALL                  0
+                            264 CALL                     0
+                            274 LOAD_CONST               5 ('abc')
+                            276 KW_NAMES                 6
+                            278 PRECALL                  2
+                            282 CALL                     2
+                            292 LOAD_CONST               3 ('   ')
+                            294 PRECALL                  1
+                            298 CALL                     1
+                            308 STORE_FAST               1 (rtn)
                
-               974         770 LOAD_METHOD              4 (options)
-                           792 LOAD_CONST              17 (False)
-                           794 KW_NAMES                16
-                           796 PRECALL                  1
-                           800 CALL                     1
-               
-               972         810 STORE_FAST               1 (rtn)
-               
-               975         812 LOAD_FAST                0 (self)
-                           814 LOAD_METHOD              2 (assertEqual)
-               
-               976         836 LOAD_FAST                1 (rtn)
-                           838 BUILD_LIST               0
-                           840 LOAD_CONST              18 ((('', ''), ('id1', 'first label'), ('id2', 'second label')))
-                           842 LIST_EXTEND              1
+                978         310 LOAD_FAST                0 (self)
+                            312 LOAD_METHOD              2 (assertEqual)
+                            334 LOAD_FAST                1 (rtn)
+                            336 LOAD_CONST               7 (('abc', None))
+                            338 PRECALL                  2
+                            342 CALL                     2
+                            352 POP_TOP
+               
+                979         354 PUSH_NULL
+                            356 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                            368 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                            380 PRECALL                  0
+                            384 CALL                     0
+                            394 LOAD_CONST               5 ('abc')
+                            396 LOAD_CONST               8 ('def')
+                            398 KW_NAMES                 9
+                            400 PRECALL                  3
+                            404 CALL                     3
+                            414 LOAD_CONST               8 ('def')
+                            416 PRECALL                  1
+                            420 CALL                     1
+                            430 STORE_FAST               1 (rtn)
+               
+                980         432 LOAD_FAST                0 (self)
+                            434 LOAD_METHOD              2 (assertEqual)
+                            456 LOAD_FAST                1 (rtn)
+                            458 LOAD_CONST               7 (('abc', None))
+                            460 PRECALL                  2
+                            464 CALL                     2
+                            474 POP_TOP
+               
+                981         476 PUSH_NULL
+                            478 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                            490 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                            502 PRECALL                  0
+                            506 CALL                     0
+                            516 PRECALL                  1
+                            520 CALL                     1
+                            530 LOAD_CONST               5 ('abc')
+                            532 PRECALL                  1
+                            536 CALL                     1
+                            546 STORE_FAST               1 (rtn)
                
-               975         844 PRECALL                  2
-                           848 CALL                     2
-                           858 POP_TOP
+                982         548 LOAD_FAST                0 (self)
+                            550 LOAD_METHOD              2 (assertEqual)
+                            572 LOAD_FAST                1 (rtn)
+                            574 LOAD_CONST              10 (('abc', 'Enter a valid email address'))
+                            576 PRECALL                  2
+                            580 CALL                     2
+                            590 POP_TOP
+               
+                983         592 PUSH_NULL
+                            594 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                            606 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                            618 PRECALL                  0
+                            622 CALL                     0
+                            632 PRECALL                  1
+                            636 CALL                     1
+                            646 LOAD_CONST              11 (' abc ')
+                            648 PRECALL                  1
+                            652 CALL                     1
+                            662 STORE_FAST               1 (rtn)
+               
+                984         664 LOAD_FAST                0 (self)
+                            666 LOAD_METHOD              2 (assertEqual)
+                            688 LOAD_FAST                1 (rtn)
+                            690 LOAD_CONST              12 ((' abc ', 'Enter a valid email address'))
+                            692 PRECALL                  2
+                            696 CALL                     2
+                            706 POP_TOP
                
-               978         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                985         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                
-               979         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
-                           884 LOAD_CONST              13 (('id1', 'first label'))
-                           886 LOAD_CONST              14 (('id2', 'second label'))
-                           888 BUILD_LIST               2
-                           890 LOAD_CONST              15 ('zero')
-                           892 KW_NAMES                16
-                           894 PRECALL                  2
-                           898 CALL                     2
+                986         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+                            732 LOAD_CONST              13 (('id1', 'first label'))
+                            734 LOAD_CONST              14 (('id2', 'second label'))
+                            736 BUILD_LIST               2
+                            738 LOAD_CONST              15 ('zero')
+                            740 KW_NAMES                16
+                            742 PRECALL                  2
+                            746 CALL                     2
                
-               978         908 PRECALL                  1
-                           912 CALL                     1
+                985         756 PRECALL                  1
+                            760 CALL                     1
                
-               980         922 LOAD_METHOD              4 (options)
-                           944 PRECALL                  0
-                           948 CALL                     0
-               
-               978         958 STORE_FAST               1 (rtn)
-               
-               981         960 LOAD_FAST                0 (self)
-                           962 LOAD_METHOD              2 (assertEqual)
-               
-               982         984 LOAD_FAST                1 (rtn)
-                           986 BUILD_LIST               0
-                           988 LOAD_CONST              19 ((('', 'zero'), ('id1', 'first label'), ('id2', 'second label')))
-                           990 LIST_EXTEND              1
-               
-               981         992 PRECALL                  2
-                           996 CALL                     2
-                          1006 POP_TOP
-               
-               984        1008 PUSH_NULL
-                          1010 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1022 LOAD_GLOBAL             11 (NULL + IS_LOWER)
-                          1034 PRECALL                  0
-                          1038 CALL                     0
-                          1048 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                          1060 PRECALL                  0
-                          1064 CALL                     0
-                          1074 BUILD_TUPLE              2
-                          1076 PRECALL                  1
-                          1080 CALL                     1
-                          1090 LOAD_CONST              20 ('AAA')
-                          1092 PRECALL                  1
-                          1096 CALL                     1
-                          1106 STORE_FAST               1 (rtn)
-               
-               985        1108 LOAD_FAST                0 (self)
-                          1110 LOAD_METHOD              2 (assertEqual)
-                          1132 LOAD_FAST                1 (rtn)
-                          1134 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
-                          1136 PRECALL                  2
-                          1140 CALL                     2
-                          1150 POP_TOP
-               
-               986        1152 PUSH_NULL
-                          1154 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1166 LOAD_GLOBAL             11 (NULL + IS_LOWER)
-                          1178 PRECALL                  0
-                          1182 CALL                     0
-                          1192 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
-                          1204 PRECALL                  0
-                          1208 CALL                     0
-                          1218 BUILD_LIST               2
-                          1220 PRECALL                  1
-                          1224 CALL                     1
-                          1234 LOAD_CONST              20 ('AAA')
-                          1236 PRECALL                  1
-                          1240 CALL                     1
-                          1250 STORE_FAST               1 (rtn)
-               
-               987        1252 LOAD_FAST                0 (self)
-                          1254 LOAD_METHOD              2 (assertEqual)
-                          1276 LOAD_FAST                1 (rtn)
-                          1278 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
-                          1280 PRECALL                  2
-                          1284 CALL                     2
-                          1294 POP_TOP
+                987         770 LOAD_METHOD              4 (options)
+                            792 LOAD_CONST              17 (False)
+                            794 KW_NAMES                16
+                            796 PRECALL                  1
+                            800 CALL                     1
+               
+                985         810 STORE_FAST               1 (rtn)
+               
+                988         812 LOAD_FAST                0 (self)
+                            814 LOAD_METHOD              2 (assertEqual)
+               
+                989         836 LOAD_FAST                1 (rtn)
+                            838 BUILD_LIST               0
+                            840 LOAD_CONST              18 ((('', ''), ('id1', 'first label'), ('id2', 'second label')))
+                            842 LIST_EXTEND              1
+               
+                988         844 PRECALL                  2
+                            848 CALL                     2
+                            858 POP_TOP
+               
+                991         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+               
+                992         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+                            884 LOAD_CONST              13 (('id1', 'first label'))
+                            886 LOAD_CONST              14 (('id2', 'second label'))
+                            888 BUILD_LIST               2
+                            890 LOAD_CONST              15 ('zero')
+                            892 KW_NAMES                16
+                            894 PRECALL                  2
+                            898 CALL                     2
+               
+                991         908 PRECALL                  1
+                            912 CALL                     1
+               
+                993         922 LOAD_METHOD              4 (options)
+                            944 PRECALL                  0
+                            948 CALL                     0
+               
+                991         958 STORE_FAST               1 (rtn)
+               
+                994         960 LOAD_FAST                0 (self)
+                            962 LOAD_METHOD              2 (assertEqual)
+               
+                995         984 LOAD_FAST                1 (rtn)
+                            986 BUILD_LIST               0
+                            988 LOAD_CONST              19 ((('', 'zero'), ('id1', 'first label'), ('id2', 'second label')))
+                            990 LIST_EXTEND              1
+               
+                994         992 PRECALL                  2
+                            996 CALL                     2
+                           1006 POP_TOP
+               
+                997        1008 PUSH_NULL
+                           1010 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1022 LOAD_GLOBAL             11 (NULL + IS_LOWER)
+                           1034 PRECALL                  0
+                           1038 CALL                     0
+                           1048 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                           1060 PRECALL                  0
+                           1064 CALL                     0
+                           1074 BUILD_TUPLE              2
+                           1076 PRECALL                  1
+                           1080 CALL                     1
+                           1090 LOAD_CONST              20 ('AAA')
+                           1092 PRECALL                  1
+                           1096 CALL                     1
+                           1106 STORE_FAST               1 (rtn)
+               
+                998        1108 LOAD_FAST                0 (self)
+                           1110 LOAD_METHOD              2 (assertEqual)
+                           1132 LOAD_FAST                1 (rtn)
+                           1134 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
+                           1136 PRECALL                  2
+                           1140 CALL                     2
+                           1150 POP_TOP
+               
+                999        1152 PUSH_NULL
+                           1154 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1166 LOAD_GLOBAL             11 (NULL + IS_LOWER)
+                           1178 PRECALL                  0
+                           1182 CALL                     0
+                           1192 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
+                           1204 PRECALL                  0
+                           1208 CALL                     0
+                           1218 BUILD_LIST               2
+                           1220 PRECALL                  1
+                           1224 CALL                     1
+                           1234 LOAD_CONST              20 ('AAA')
+                           1236 PRECALL                  1
+                           1240 CALL                     1
+                           1250 STORE_FAST               1 (rtn)
+               
+               1000        1252 LOAD_FAST                0 (self)
+                           1254 LOAD_METHOD              2 (assertEqual)
+                           1276 LOAD_FAST                1 (rtn)
+                           1278 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
+                           1280 PRECALL                  2
+                           1284 CALL                     2
+                           1294 POP_TOP
                
-               988        1296 PUSH_NULL
-                          1298 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1310 LOAD_FAST                0 (self)
-                          1312 LOAD_METHOD              6 (CustomValidator)
-                          1334 PRECALL                  0
-                          1338 CALL                     0
-                          1348 PRECALL                  1
-                          1352 CALL                     1
-                          1362 LOAD_CONST              22 (1)
-                          1364 PRECALL                  1
-                          1368 CALL                     1
-                          1378 STORE_FAST               1 (rtn)
-               
-               989        1380 LOAD_FAST                0 (self)
-                          1382 LOAD_METHOD              2 (assertEqual)
-                          1404 LOAD_FAST                1 (rtn)
-                          1406 LOAD_CONST              23 ((1, None))
-                          1408 PRECALL                  2
-                          1412 CALL                     2
-                          1422 POP_TOP
-               
-               990        1424 PUSH_NULL
-                          1426 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1438 LOAD_FAST                0 (self)
-                          1440 LOAD_METHOD              6 (CustomValidator)
-                          1462 PRECALL                  0
-                          1466 CALL                     0
-                          1476 PRECALL                  1
-                          1480 CALL                     1
-                          1490 LOAD_CONST              24 (0)
-                          1492 PRECALL                  1
-                          1496 CALL                     1
-                          1506 STORE_FAST               1 (rtn)
+               1001        1296 PUSH_NULL
+                           1298 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1310 LOAD_FAST                0 (self)
+                           1312 LOAD_METHOD              6 (CustomValidator)
+                           1334 PRECALL                  0
+                           1338 CALL                     0
+                           1348 PRECALL                  1
+                           1352 CALL                     1
+                           1362 LOAD_CONST              22 (1)
+                           1364 PRECALL                  1
+                           1368 CALL                     1
+                           1378 STORE_FAST               1 (rtn)
                
-               991        1508 LOAD_FAST                0 (self)
-                          1510 LOAD_METHOD              2 (assertEqual)
-                          1532 LOAD_FAST                1 (rtn)
-                          1534 LOAD_CONST              25 ((0, 'invalid!'))
-                          1536 PRECALL                  2
-                          1540 CALL                     2
-                          1550 POP_TOP
+               1002        1380 LOAD_FAST                0 (self)
+                           1382 LOAD_METHOD              2 (assertEqual)
+                           1404 LOAD_FAST                1 (rtn)
+                           1406 LOAD_CONST              23 ((1, None))
+                           1408 PRECALL                  2
+                           1412 CALL                     2
+                           1422 POP_TOP
                
-               992        1552 PUSH_NULL
-                          1554 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1566 LOAD_FAST                0 (self)
-                          1568 LOAD_ATTR                7 (custom_validator_func)
-                          1578 PRECALL                  1
-                          1582 CALL                     1
-                          1592 LOAD_CONST              22 (1)
-                          1594 PRECALL                  1
-                          1598 CALL                     1
-                          1608 STORE_FAST               1 (rtn)
-               
-               993        1610 LOAD_FAST                0 (self)
-                          1612 LOAD_METHOD              2 (assertEqual)
-                          1634 LOAD_FAST                1 (rtn)
-                          1636 LOAD_CONST              23 ((1, None))
-                          1638 PRECALL                  2
-                          1642 CALL                     2
-                          1652 POP_TOP
-               
-               994        1654 PUSH_NULL
-                          1656 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
-                          1668 LOAD_FAST                0 (self)
-                          1670 LOAD_ATTR                7 (custom_validator_func)
-                          1680 PRECALL                  1
-                          1684 CALL                     1
-                          1694 LOAD_CONST              24 (0)
-                          1696 PRECALL                  1
-                          1700 CALL                     1
-                          1710 STORE_FAST               1 (rtn)
-               
-               995        1712 LOAD_FAST                0 (self)
-                          1714 LOAD_METHOD              2 (assertEqual)
-                          1736 LOAD_FAST                1 (rtn)
-                          1738 LOAD_CONST              25 ((0, 'invalid!'))
-                          1740 PRECALL                  2
-                          1744 CALL                     2
-                          1754 POP_TOP
-                          1756 LOAD_CONST               0 (None)
-                          1758 RETURN_VALUE
+               1003        1424 PUSH_NULL
+                           1426 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1438 LOAD_FAST                0 (self)
+                           1440 LOAD_METHOD              6 (CustomValidator)
+                           1462 PRECALL                  0
+                           1466 CALL                     0
+                           1476 PRECALL                  1
+                           1480 CALL                     1
+                           1490 LOAD_CONST              24 (0)
+                           1492 PRECALL                  1
+                           1496 CALL                     1
+                           1506 STORE_FAST               1 (rtn)
+               
+               1004        1508 LOAD_FAST                0 (self)
+                           1510 LOAD_METHOD              2 (assertEqual)
+                           1532 LOAD_FAST                1 (rtn)
+                           1534 LOAD_CONST              25 ((0, 'invalid!'))
+                           1536 PRECALL                  2
+                           1540 CALL                     2
+                           1550 POP_TOP
+               
+               1005        1552 PUSH_NULL
+                           1554 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1566 LOAD_FAST                0 (self)
+                           1568 LOAD_ATTR                7 (custom_validator_func)
+                           1578 PRECALL                  1
+                           1582 CALL                     1
+                           1592 LOAD_CONST              22 (1)
+                           1594 PRECALL                  1
+                           1598 CALL                     1
+                           1608 STORE_FAST               1 (rtn)
+               
+               1006        1610 LOAD_FAST                0 (self)
+                           1612 LOAD_METHOD              2 (assertEqual)
+                           1634 LOAD_FAST                1 (rtn)
+                           1636 LOAD_CONST              23 ((1, None))
+                           1638 PRECALL                  2
+                           1642 CALL                     2
+                           1652 POP_TOP
+               
+               1007        1654 PUSH_NULL
+                           1656 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+                           1668 LOAD_FAST                0 (self)
+                           1670 LOAD_ATTR                7 (custom_validator_func)
+                           1680 PRECALL                  1
+                           1684 CALL                     1
+                           1694 LOAD_CONST              24 (0)
+                           1696 PRECALL                  1
+                           1700 CALL                     1
+                           1710 STORE_FAST               1 (rtn)
+               
+               1008        1712 LOAD_FAST                0 (self)
+                           1714 LOAD_METHOD              2 (assertEqual)
+                           1736 LOAD_FAST                1 (rtn)
+                           1738 LOAD_CONST              25 ((0, 'invalid!'))
+                           1740 PRECALL                  2
+                           1744 CALL                     2
+                           1754 POP_TOP
+                           1756 LOAD_CONST               0 (None)
+                           1758 RETURN_VALUE
                consts
                   None
                   'abc@def.com'
                   ('abc@def.com', None)
                   '   '
                   (None, None)
                   'abc'
@@ -10415,62 +10600,62 @@
                   (1, None)
                   0
                   (0, 'invalid!')
                names      ('IS_EMPTY_OR', 'IS_EMAIL', 'assertEqual', 'IS_IN_SET', 'options', 'IS_LOWER', 'CustomValidator', 'custom_validator_func')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMPTY_OR'
-               firstlineno 959
+               firstlineno 972
                lnotab
                   0x020148012c0148012c014c012c014e012c0148012c0148012c010c0124
                   ff0e0228fe0203180108ff10030c0124ff0e0224fe0203180108ff100364
                   012c0164012c0154012c0154012c013a012c013a01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
                   0x97000200740100000000000000000000a6000000ab0000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016402a6020000ab0200000000000000
                   00010064005300
-               997           0 RESUME                   0
+               1010           0 RESUME                   0
                
-               998           2 PUSH_NULL
-                             4 LOAD_GLOBAL              1 (NULL + CLEANUP)
-                            16 PRECALL                  0
-                            20 CALL                     0
-                            30 LOAD_CONST               1 ('hello')
-                            32 PRECALL                  1
-                            36 CALL                     1
-                            46 STORE_FAST               1 (rtn)
+               1011           2 PUSH_NULL
+                              4 LOAD_GLOBAL              1 (NULL + CLEANUP)
+                             16 PRECALL                  0
+                             20 CALL                     0
+                             30 LOAD_CONST               1 ('hello')
+                             32 PRECALL                  1
+                             36 CALL                     1
+                             46 STORE_FAST               1 (rtn)
                
-               999          48 LOAD_FAST                0 (self)
-                            50 LOAD_METHOD              1 (assertEqual)
-                            72 LOAD_FAST                1 (rtn)
-                            74 LOAD_CONST               2 (('hello', None))
-                            76 PRECALL                  2
-                            80 CALL                     2
-                            90 POP_TOP
-                            92 LOAD_CONST               0 (None)
-                            94 RETURN_VALUE
+               1012          48 LOAD_FAST                0 (self)
+                             50 LOAD_METHOD              1 (assertEqual)
+                             72 LOAD_FAST                1 (rtn)
+                             74 LOAD_CONST               2 (('hello', None))
+                             76 PRECALL                  2
+                             80 CALL                     2
+                             90 POP_TOP
+                             92 LOAD_CONST               0 (None)
+                             94 RETURN_VALUE
                consts
                   None
                   'hello'
                   ('hello', None)
                names      ('CLEANUP', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CLEANUP'
-               firstlineno 997
+               firstlineno 1010
                lnotab 0x02012e01
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 8
                flags     : 3
                code
@@ -10520,17 +10705,17 @@
                   00000000000000000064016413ac03a6020000ab02000000000000000064
                   04a6010000ab0100000000000000006405190000000000000000007c03a6
                   020000ab02000000000000000001007c00a0030000000000000000000000
                   000000000000000000020074030000000000000000000064016413ac03a6
                   020000ab0200000000000000006404a6010000ab01000000000000000064
                   05190000000000000000007c0364146400850219000000000000000000a6
                   020000ab020000000000000000010064005300
-               1001           0 RESUME                   0
+               1014           0 RESUME                   0
                
-               1002           2 LOAD_GLOBAL              1 (NULL + str)
+               1015           2 LOAD_GLOBAL              1 (NULL + str)
                              14 PUSH_NULL
                              16 LOAD_GLOBAL              3 (NULL + CRYPT)
                              28 LOAD_CONST               1 ('md5')
                              30 LOAD_CONST               2 (True)
                              32 KW_NAMES                 3
                              34 PRECALL                  2
                              38 CALL                     2
@@ -10539,23 +10724,23 @@
                              54 CALL                     1
                              64 LOAD_CONST               5 (0)
                              66 BINARY_SUBSCR
                              76 PRECALL                  1
                              80 CALL                     1
                              90 STORE_FAST               1 (rtn)
                
-               1003          92 LOAD_FAST                0 (self)
+               1016          92 LOAD_FAST                0 (self)
                              94 LOAD_METHOD              2 (myassertRegex)
                             116 LOAD_FAST                1 (rtn)
                             118 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             120 PRECALL                  2
                             124 CALL                     2
                             134 POP_TOP
                
-               1004         136 LOAD_GLOBAL              1 (NULL + str)
+               1017         136 LOAD_GLOBAL              1 (NULL + str)
                             148 PUSH_NULL
                             150 LOAD_GLOBAL              3 (NULL + CRYPT)
                             162 LOAD_CONST               7 ('sha1')
                             164 LOAD_CONST               2 (True)
                             166 KW_NAMES                 3
                             168 PRECALL                  2
                             172 CALL                     2
@@ -10564,23 +10749,23 @@
                             188 CALL                     1
                             198 LOAD_CONST               5 (0)
                             200 BINARY_SUBSCR
                             210 PRECALL                  1
                             214 CALL                     1
                             224 STORE_FAST               1 (rtn)
                
-               1005         226 LOAD_FAST                0 (self)
+               1018         226 LOAD_FAST                0 (self)
                             228 LOAD_METHOD              2 (myassertRegex)
                             250 LOAD_FAST                1 (rtn)
                             252 LOAD_CONST               8 ('^sha1\\$.{16}\\$.{40}$')
                             254 PRECALL                  2
                             258 CALL                     2
                             268 POP_TOP
                
-               1006         270 LOAD_GLOBAL              1 (NULL + str)
+               1019         270 LOAD_GLOBAL              1 (NULL + str)
                             282 PUSH_NULL
                             284 LOAD_GLOBAL              3 (NULL + CRYPT)
                             296 LOAD_CONST               9 ('sha256')
                             298 LOAD_CONST               2 (True)
                             300 KW_NAMES                 3
                             302 PRECALL                  2
                             306 CALL                     2
@@ -10589,23 +10774,23 @@
                             322 CALL                     1
                             332 LOAD_CONST               5 (0)
                             334 BINARY_SUBSCR
                             344 PRECALL                  1
                             348 CALL                     1
                             358 STORE_FAST               1 (rtn)
                
-               1007         360 LOAD_FAST                0 (self)
+               1020         360 LOAD_FAST                0 (self)
                             362 LOAD_METHOD              2 (myassertRegex)
                             384 LOAD_FAST                1 (rtn)
                             386 LOAD_CONST              10 ('^sha256\\$.{16}\\$.{64}$')
                             388 PRECALL                  2
                             392 CALL                     2
                             402 POP_TOP
                
-               1008         404 LOAD_GLOBAL              1 (NULL + str)
+               1021         404 LOAD_GLOBAL              1 (NULL + str)
                             416 PUSH_NULL
                             418 LOAD_GLOBAL              3 (NULL + CRYPT)
                             430 LOAD_CONST              11 ('sha384')
                             432 LOAD_CONST               2 (True)
                             434 KW_NAMES                 3
                             436 PRECALL                  2
                             440 CALL                     2
@@ -10614,23 +10799,23 @@
                             456 CALL                     1
                             466 LOAD_CONST               5 (0)
                             468 BINARY_SUBSCR
                             478 PRECALL                  1
                             482 CALL                     1
                             492 STORE_FAST               1 (rtn)
                
-               1009         494 LOAD_FAST                0 (self)
+               1022         494 LOAD_FAST                0 (self)
                             496 LOAD_METHOD              2 (myassertRegex)
                             518 LOAD_FAST                1 (rtn)
                             520 LOAD_CONST              12 ('^sha384\\$.{16}\\$.{96}$')
                             522 PRECALL                  2
                             526 CALL                     2
                             536 POP_TOP
                
-               1010         538 LOAD_GLOBAL              1 (NULL + str)
+               1023         538 LOAD_GLOBAL              1 (NULL + str)
                             550 PUSH_NULL
                             552 LOAD_GLOBAL              3 (NULL + CRYPT)
                             564 LOAD_CONST              13 ('sha512')
                             566 LOAD_CONST               2 (True)
                             568 KW_NAMES                 3
                             570 PRECALL                  2
                             574 CALL                     2
@@ -10639,26 +10824,26 @@
                             590 CALL                     1
                             600 LOAD_CONST               5 (0)
                             602 BINARY_SUBSCR
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1011         628 LOAD_FAST                0 (self)
+               1024         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              2 (myassertRegex)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              14 ('^sha512\\$.{16}\\$.{128}$')
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1012         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
+               1025         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
                             674 STORE_FAST               2 (alg)
                
-               1013         676 LOAD_GLOBAL              1 (NULL + str)
+               1026         676 LOAD_GLOBAL              1 (NULL + str)
                             688 PUSH_NULL
                             690 LOAD_GLOBAL              3 (NULL + CRYPT)
                             702 LOAD_FAST                2 (alg)
                             704 LOAD_CONST               2 (True)
                             706 KW_NAMES                 3
                             708 PRECALL                  2
                             712 CALL                     2
@@ -10667,23 +10852,23 @@
                             728 CALL                     1
                             738 LOAD_CONST               5 (0)
                             740 BINARY_SUBSCR
                             750 PRECALL                  1
                             754 CALL                     1
                             764 STORE_FAST               1 (rtn)
                
-               1014         766 LOAD_FAST                0 (self)
+               1027         766 LOAD_FAST                0 (self)
                             768 LOAD_METHOD              2 (myassertRegex)
                             790 LOAD_FAST                1 (rtn)
                             792 LOAD_CONST              16 ('^pbkdf2\\(1000,20,sha512\\)\\$.{16}\\$.{40}$')
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1015         810 LOAD_GLOBAL              1 (NULL + str)
+               1028         810 LOAD_GLOBAL              1 (NULL + str)
                             822 PUSH_NULL
                             824 LOAD_GLOBAL              3 (NULL + CRYPT)
                             836 LOAD_CONST               1 ('md5')
                             838 LOAD_CONST              17 ('mykey')
                             840 LOAD_CONST               2 (True)
                             842 KW_NAMES                18
                             844 PRECALL                  3
@@ -10693,23 +10878,23 @@
                             864 CALL                     1
                             874 LOAD_CONST               5 (0)
                             876 BINARY_SUBSCR
                             886 PRECALL                  1
                             890 CALL                     1
                             900 STORE_FAST               1 (rtn)
                
-               1016         902 LOAD_FAST                0 (self)
+               1029         902 LOAD_FAST                0 (self)
                             904 LOAD_METHOD              2 (myassertRegex)
                             926 LOAD_FAST                1 (rtn)
                             928 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             930 PRECALL                  2
                             934 CALL                     2
                             944 POP_TOP
                
-               1017         946 LOAD_GLOBAL              1 (NULL + str)
+               1030         946 LOAD_GLOBAL              1 (NULL + str)
                             958 PUSH_NULL
                             960 LOAD_GLOBAL              3 (NULL + CRYPT)
                             972 LOAD_CONST               7 ('sha1')
                             974 LOAD_CONST              19 (False)
                             976 KW_NAMES                 3
                             978 PRECALL                  2
                             982 CALL                     2
@@ -10718,15 +10903,15 @@
                             998 CALL                     1
                            1008 LOAD_CONST               5 (0)
                            1010 BINARY_SUBSCR
                            1020 PRECALL                  1
                            1024 CALL                     1
                            1034 STORE_FAST               3 (a)
                
-               1018        1036 LOAD_FAST                0 (self)
+               1031        1036 LOAD_FAST                0 (self)
                            1038 LOAD_METHOD              3 (assertEqual)
                            1060 PUSH_NULL
                            1062 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1074 LOAD_CONST               7 ('sha1')
                            1076 LOAD_CONST              19 (False)
                            1078 KW_NAMES                 3
                            1080 PRECALL                  2
@@ -10737,15 +10922,15 @@
                            1110 LOAD_CONST               5 (0)
                            1112 BINARY_SUBSCR
                            1122 LOAD_FAST                3 (a)
                            1124 PRECALL                  2
                            1128 CALL                     2
                            1138 POP_TOP
                
-               1019        1140 LOAD_FAST                0 (self)
+               1032        1140 LOAD_FAST                0 (self)
                            1142 LOAD_METHOD              3 (assertEqual)
                            1164 PUSH_NULL
                            1166 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1178 LOAD_CONST               7 ('sha1')
                            1180 LOAD_CONST              19 (False)
                            1182 KW_NAMES                 3
                            1184 PRECALL                  2
@@ -10760,15 +10945,15 @@
                            1230 LOAD_CONST               0 (None)
                            1232 BUILD_SLICE              2
                            1234 BINARY_SUBSCR
                            1244 PRECALL                  2
                            1248 CALL                     2
                            1258 POP_TOP
                
-               1020        1260 LOAD_FAST                0 (self)
+               1033        1260 LOAD_FAST                0 (self)
                            1262 LOAD_METHOD              3 (assertEqual)
                            1284 PUSH_NULL
                            1286 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1298 LOAD_CONST               1 ('md5')
                            1300 LOAD_CONST              19 (False)
                            1302 KW_NAMES                 3
                            1304 PRECALL                  2
@@ -10779,15 +10964,15 @@
                            1334 LOAD_CONST               5 (0)
                            1336 BINARY_SUBSCR
                            1346 LOAD_FAST                3 (a)
                            1348 PRECALL                  2
                            1352 CALL                     2
                            1362 POP_TOP
                
-               1021        1364 LOAD_FAST                0 (self)
+               1034        1364 LOAD_FAST                0 (self)
                            1366 LOAD_METHOD              3 (assertEqual)
                            1388 PUSH_NULL
                            1390 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1402 LOAD_CONST               1 ('md5')
                            1404 LOAD_CONST              19 (False)
                            1406 KW_NAMES                 3
                            1408 PRECALL                  2
@@ -10829,17 +11014,17 @@
                   ('digest_alg', 'key', 'salt')
                   False
                   6
                names      ('str', 'CRYPT', 'myassertRegex', 'assertEqual')
                varnames   ('self', 'rtn', 'alg', 'a')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CRYPT'
-               firstlineno 1001
+               firstlineno 1014
                lnotab
                   0x02015a012c015a012c015a012c015a012c015a012c0104015a012c015c
                   012c015a01680178016801
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
@@ -10898,385 +11083,385 @@
                   000000000000000000000000000000000000007c016427641fa003000000
                   0000000000000000000000000000000000642864296702a6010000ab0100
                   000000000000006602a6020000ab02000000000000000001000200740100
                   000000000000000000642a642a642a6401ac2ba6040000ab040000000000
                   0000006427a6010000ab0100000000000000007d017c00a0010000000000
                   0000000000000000000000000000007c01642ca6020000ab020000000000
                   000000010064005300
-               1023           0 RESUME                   0
+               1036           0 RESUME                   0
                
-               1024           2 PUSH_NULL
+               1037           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                              16 LOAD_CONST               1 (True)
                              18 KW_NAMES                 2
                              20 PRECALL                  1
                              24 CALL                     1
                              34 LOAD_CONST               3 ('Abcd1234')
                              36 PRECALL                  1
                              40 CALL                     1
                              50 STORE_FAST               1 (rtn)
                
-               1025          52 LOAD_FAST                0 (self)
+               1038          52 LOAD_FAST                0 (self)
                              54 LOAD_METHOD              1 (assertEqual)
                
-               1026          76 LOAD_FAST                1 (rtn)
+               1039          76 LOAD_FAST                1 (rtn)
                
-               1027          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
+               1040          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
                
-               1025          80 PRECALL                  2
+               1038          80 PRECALL                  2
                              84 CALL                     2
                              94 POP_TOP
                
-               1032          96 PUSH_NULL
+               1045          96 PUSH_NULL
                              98 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             110 LOAD_CONST               1 (True)
                             112 KW_NAMES                 2
                             114 PRECALL                  1
                             118 CALL                     1
                             128 LOAD_CONST               5 ('Abcd1234!')
                             130 PRECALL                  1
                             134 CALL                     1
                             144 STORE_FAST               1 (rtn)
                
-               1033         146 LOAD_FAST                0 (self)
+               1046         146 LOAD_FAST                0 (self)
                             148 LOAD_METHOD              1 (assertEqual)
                             170 LOAD_FAST                1 (rtn)
                             172 LOAD_CONST               6 (('Abcd1234!', None))
                             174 PRECALL                  2
                             178 CALL                     2
                             188 POP_TOP
                
-               1034         190 PUSH_NULL
+               1047         190 PUSH_NULL
                             192 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             204 LOAD_CONST               1 (True)
                             206 LOAD_CONST               7 (1)
                             208 KW_NAMES                 8
                             210 PRECALL                  2
                             214 CALL                     2
                             224 LOAD_CONST               9 ('a')
                             226 PRECALL                  1
                             230 CALL                     1
                             240 STORE_FAST               1 (rtn)
                
-               1035         242 LOAD_FAST                0 (self)
+               1048         242 LOAD_FAST                0 (self)
                             244 LOAD_METHOD              1 (assertEqual)
                             266 LOAD_FAST                1 (rtn)
                             268 LOAD_CONST              10 (('a', None))
                             270 PRECALL                  2
                             274 CALL                     2
                             284 POP_TOP
                
-               1036         286 PUSH_NULL
+               1049         286 PUSH_NULL
                             288 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             300 LOAD_CONST               1 (True)
                             302 LOAD_CONST               7 (1)
                             304 LOAD_CONST              11 (2)
                             306 KW_NAMES                12
                             308 PRECALL                  3
                             312 CALL                     3
                             322 LOAD_CONST               9 ('a')
                             324 PRECALL                  1
                             328 CALL                     1
                             338 STORE_FAST               1 (rtn)
                
-               1037         340 LOAD_FAST                0 (self)
+               1050         340 LOAD_FAST                0 (self)
                             342 LOAD_METHOD              1 (assertEqual)
                             364 LOAD_FAST                1 (rtn)
                             366 LOAD_CONST              13 (('a', 'Minimum length is 2'))
                             368 PRECALL                  2
                             372 CALL                     2
                             382 POP_TOP
                
-               1038         384 PUSH_NULL
+               1051         384 PUSH_NULL
                             386 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             398 LOAD_CONST               1 (True)
                             400 LOAD_CONST              14 (100)
                             402 KW_NAMES                 8
                             404 PRECALL                  2
                             408 CALL                     2
                             418 LOAD_CONST              15 ('abc123')
                             420 PRECALL                  1
                             424 CALL                     1
                             434 STORE_FAST               1 (rtn)
                
-               1039         436 LOAD_FAST                0 (self)
+               1052         436 LOAD_FAST                0 (self)
                             438 LOAD_METHOD              1 (assertEqual)
                             460 LOAD_FAST                1 (rtn)
                             462 LOAD_CONST              16 (('abc123', 'Password too simple (32.35/100)'))
                             464 PRECALL                  2
                             468 CALL                     2
                             478 POP_TOP
                
-               1040         480 PUSH_NULL
+               1053         480 PUSH_NULL
                             482 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             494 LOAD_CONST               1 (True)
                             496 LOAD_CONST              14 (100)
                             498 KW_NAMES                 8
                             500 PRECALL                  2
                             504 CALL                     2
                             514 LOAD_CONST              17 ('and')
                             516 PRECALL                  1
                             520 CALL                     1
                             530 STORE_FAST               1 (rtn)
                
-               1041         532 LOAD_FAST                0 (self)
+               1054         532 LOAD_FAST                0 (self)
                             534 LOAD_METHOD              1 (assertEqual)
                             556 LOAD_FAST                1 (rtn)
                             558 LOAD_CONST              18 (('and', 'Password too simple (14.57/100)'))
                             560 PRECALL                  2
                             564 CALL                     2
                             574 POP_TOP
                
-               1042         576 PUSH_NULL
+               1055         576 PUSH_NULL
                             578 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             590 LOAD_CONST               1 (True)
                             592 LOAD_CONST              14 (100)
                             594 KW_NAMES                 8
                             596 PRECALL                  2
                             600 CALL                     2
                             610 LOAD_CONST              19 ('aaa')
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1043         628 LOAD_FAST                0 (self)
+               1056         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              1 (assertEqual)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              20 (('aaa', 'Password too simple (14.42/100)'))
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1044         672 PUSH_NULL
+               1057         672 PUSH_NULL
                             674 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             686 LOAD_CONST               1 (True)
                             688 LOAD_CONST              14 (100)
                             690 KW_NAMES                 8
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_CONST              21 ('a1d')
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               1 (rtn)
                
-               1045         724 LOAD_FAST                0 (self)
+               1058         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              1 (assertEqual)
                             748 LOAD_FAST                1 (rtn)
                             750 LOAD_CONST              22 (('a1d', 'Password too simple (15.97/100)'))
                             752 PRECALL                  2
                             756 CALL                     2
                             766 POP_TOP
                
-               1046         768 PUSH_NULL
+               1059         768 PUSH_NULL
                             770 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             782 LOAD_CONST               1 (True)
                             784 LOAD_CONST              14 (100)
                             786 KW_NAMES                 8
                             788 PRECALL                  2
                             792 CALL                     2
                             802 LOAD_CONST              23 ('ad')
                             804 PRECALL                  1
                             808 CALL                     1
                             818 STORE_FAST               1 (rtn)
                
-               1047         820 LOAD_GLOBAL              4 (PY2)
+               1060         820 LOAD_GLOBAL              4 (PY2)
                             832 POP_JUMP_FORWARD_IF_FALSE    23 (to 880)
                
-               1048         834 LOAD_FAST                0 (self)
+               1061         834 LOAD_FAST                0 (self)
                             836 LOAD_METHOD              1 (assertEqual)
                             858 LOAD_FAST                1 (rtn)
                             860 LOAD_CONST              24 (('ad', 'Password too simple (32.66/100)'))
                             862 PRECALL                  2
                             866 CALL                     2
                             876 POP_TOP
                             878 JUMP_FORWARD            22 (to 924)
                
-               1050     >>  880 LOAD_FAST                0 (self)
+               1063     >>  880 LOAD_FAST                0 (self)
                             882 LOAD_METHOD              1 (assertEqual)
                             904 LOAD_FAST                1 (rtn)
                             906 LOAD_CONST              25 (('ad', 'Password too simple (31.26/100)'))
                             908 PRECALL                  2
                             912 CALL                     2
                             922 POP_TOP
                
-               1051     >>  924 PUSH_NULL
+               1064     >>  924 PUSH_NULL
                             926 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             938 PRECALL                  0
                             942 CALL                     0
                             952 LOAD_CONST              26 ('********')
                             954 PRECALL                  1
                             958 CALL                     1
                             968 STORE_FAST               1 (rtn)
                
-               1052         970 LOAD_FAST                0 (self)
+               1065         970 LOAD_FAST                0 (self)
                             972 LOAD_METHOD              1 (assertEqual)
                             994 LOAD_FAST                1 (rtn)
                             996 LOAD_CONST              27 (('********', None))
                             998 PRECALL                  2
                            1002 CALL                     2
                            1012 POP_TOP
                
-               1053        1014 PUSH_NULL
+               1066        1014 PUSH_NULL
                            1016 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1028 LOAD_CONST               1 (True)
                            1030 LOAD_CONST              28 (4)
                            1032 KW_NAMES                29
                            1034 PRECALL                  2
                            1038 CALL                     2
                            1048 LOAD_CONST              30 ('abcde')
                            1050 PRECALL                  1
                            1054 CALL                     1
                            1064 STORE_FAST               1 (rtn)
                
-               1054        1066 LOAD_FAST                0 (self)
+               1067        1066 LOAD_FAST                0 (self)
                            1068 LOAD_METHOD              1 (assertEqual)
                
-               1055        1090 LOAD_FAST                1 (rtn)
+               1068        1090 LOAD_FAST                1 (rtn)
                
-               1057        1092 LOAD_CONST              30 ('abcde')
+               1070        1092 LOAD_CONST              30 ('abcde')
                
-               1058        1094 LOAD_CONST              31 ('|')
+               1071        1094 LOAD_CONST              31 ('|')
                            1096 LOAD_METHOD              3 (join)
                
-               1059        1118 BUILD_LIST               0
+               1072        1118 BUILD_LIST               0
                            1120 LOAD_CONST              32 (('Minimum length is 8', 'Maximum length is 4', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1122 LIST_EXTEND              1
                
-               1058        1124 PRECALL                  1
+               1071        1124 PRECALL                  1
                            1128 CALL                     1
                
-               1056        1138 BUILD_TUPLE              2
+               1069        1138 BUILD_TUPLE              2
                
-               1054        1140 PRECALL                  2
+               1067        1140 PRECALL                  2
                            1144 CALL                     2
                            1154 POP_TOP
                
-               1069        1156 PUSH_NULL
+               1082        1156 PUSH_NULL
                            1158 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1170 LOAD_CONST               1 (True)
                            1172 KW_NAMES                 2
                            1174 PRECALL                  1
                            1178 CALL                     1
                            1188 LOAD_CONST              30 ('abcde')
                            1190 PRECALL                  1
                            1194 CALL                     1
                            1204 STORE_FAST               1 (rtn)
                
-               1070        1206 LOAD_FAST                0 (self)
+               1083        1206 LOAD_FAST                0 (self)
                            1208 LOAD_METHOD              1 (assertEqual)
                
-               1071        1230 LOAD_FAST                1 (rtn)
+               1084        1230 LOAD_FAST                1 (rtn)
                
-               1073        1232 LOAD_CONST              30 ('abcde')
+               1086        1232 LOAD_CONST              30 ('abcde')
                
-               1074        1234 LOAD_CONST              31 ('|')
+               1087        1234 LOAD_CONST              31 ('|')
                            1236 LOAD_METHOD              3 (join)
                
-               1075        1258 BUILD_LIST               0
+               1088        1258 BUILD_LIST               0
                            1260 LOAD_CONST              33 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1262 LIST_EXTEND              1
                
-               1074        1264 PRECALL                  1
+               1087        1264 PRECALL                  1
                            1268 CALL                     1
                
-               1072        1278 BUILD_TUPLE              2
+               1085        1278 BUILD_TUPLE              2
                
-               1070        1280 PRECALL                  2
+               1083        1280 PRECALL                  2
                            1284 CALL                     2
                            1294 POP_TOP
                
-               1084        1296 PUSH_NULL
+               1097        1296 PUSH_NULL
                            1298 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1310 LOAD_CONST              34 (0)
                            1312 LOAD_CONST              34 (0)
                            1314 LOAD_CONST              34 (0)
                            1316 LOAD_CONST               1 (True)
                            1318 KW_NAMES                35
                            1320 PRECALL                  4
                            1324 CALL                     4
                            1334 LOAD_CONST              36 ('Abcde1')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               1 (rtn)
                
-               1085        1352 LOAD_FAST                0 (self)
+               1098        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              1 (assertEqual)
                
-               1086        1376 LOAD_FAST                1 (rtn)
+               1099        1376 LOAD_FAST                1 (rtn)
                
-               1088        1378 LOAD_CONST              36 ('Abcde1')
+               1101        1378 LOAD_CONST              36 ('Abcde1')
                
-               1089        1380 LOAD_CONST              31 ('|')
+               1102        1380 LOAD_CONST              31 ('|')
                            1382 LOAD_METHOD              3 (join)
                
-               1090        1404 BUILD_LIST               0
+               1103        1404 BUILD_LIST               0
                            1406 LOAD_CONST              37 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'May not include any uppercase letters', 'May not include any lowercase letters', 'May not include any numbers'))
                            1408 LIST_EXTEND              1
                
-               1089        1410 PRECALL                  1
+               1102        1410 PRECALL                  1
                            1414 CALL                     1
                
-               1087        1424 BUILD_TUPLE              2
+               1100        1424 BUILD_TUPLE              2
                
-               1085        1426 PRECALL                  2
+               1098        1426 PRECALL                  2
                            1430 CALL                     2
                            1440 POP_TOP
                
-               1100        1442 PUSH_NULL
+               1113        1442 PUSH_NULL
                            1444 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1456 LOAD_CONST              34 (0)
                            1458 LOAD_CONST               1 (True)
                            1460 KW_NAMES                38
                            1462 PRECALL                  2
                            1466 CALL                     2
                            1476 LOAD_CONST              39 ('Abcde1!')
                            1478 PRECALL                  1
                            1482 CALL                     1
                            1492 STORE_FAST               1 (rtn)
                
-               1101        1494 LOAD_FAST                0 (self)
+               1114        1494 LOAD_FAST                0 (self)
                            1496 LOAD_METHOD              1 (assertEqual)
                
-               1102        1518 LOAD_FAST                1 (rtn)
+               1115        1518 LOAD_FAST                1 (rtn)
                
-               1104        1520 LOAD_CONST              39 ('Abcde1!')
+               1117        1520 LOAD_CONST              39 ('Abcde1!')
                
-               1105        1522 LOAD_CONST              31 ('|')
+               1118        1522 LOAD_CONST              31 ('|')
                            1524 LOAD_METHOD              3 (join)
                
-               1107        1546 LOAD_CONST              40 ('Minimum length is 8')
+               1120        1546 LOAD_CONST              40 ('Minimum length is 8')
                
-               1108        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
+               1121        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
                
-               1106        1550 BUILD_LIST               2
+               1119        1550 BUILD_LIST               2
                
-               1105        1552 PRECALL                  1
+               1118        1552 PRECALL                  1
                            1556 CALL                     1
                
-               1103        1566 BUILD_TUPLE              2
+               1116        1566 BUILD_TUPLE              2
                
-               1101        1568 PRECALL                  2
+               1114        1568 PRECALL                  2
                            1572 CALL                     2
                            1582 POP_TOP
                
-               1113        1584 PUSH_NULL
+               1126        1584 PUSH_NULL
                            1586 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1598 LOAD_CONST              42 (False)
                            1600 LOAD_CONST              42 (False)
                            1602 LOAD_CONST              42 (False)
                            1604 LOAD_CONST               1 (True)
                            1606 KW_NAMES                43
                            1608 PRECALL                  4
                            1612 CALL                     4
                            1622 LOAD_CONST              39 ('Abcde1!')
                            1624 PRECALL                  1
                            1628 CALL                     1
                            1638 STORE_FAST               1 (rtn)
                
-               1114        1640 LOAD_FAST                0 (self)
+               1127        1640 LOAD_FAST                0 (self)
                            1642 LOAD_METHOD              1 (assertEqual)
                            1664 LOAD_FAST                1 (rtn)
                            1666 LOAD_CONST              44 (('Abcde1!', 'Minimum length is 8'))
                            1668 PRECALL                  2
                            1672 CALL                     2
                            1682 POP_TOP
                            1684 LOAD_CONST               0 (None)
@@ -11327,17 +11512,17 @@
                   False
                   ('upper', 'number', 'special', 'es')
                   ('Abcde1!', 'Minimum length is 8')
                names      ('IS_STRONG', 'assertEqual', 'PY2', 'join')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_STRONG'
-               firstlineno 1023
+               firstlineno 1036
                lnotab
                   0x020132011801020102fe100732012c0134012c0136012c0134012c0134
                   012c0134012c0134012c0134010e012e022c012e012c0134011801020202
                   01180106ff0efe02fe100f3201180102020201180106ff0efe02fe100e38
                   01180102020201180106ff0efe02fe100f34011801020202011802020102
                   fe02ff0efe02fe100c3801
             code
@@ -11404,428 +11589,428 @@
                   020000ab0200000000000000007c02a6010000ab0100000000000000007d
                   037c00a00200000000000000000000000000000000000000007c037c0264
                   076602a6020000ab020000000000000000010002007c0164036410640564
                   06a6040000ab0400000000000000007d0202007403000000000000000000
                   006407ac11a6010000ab0100000000000000007c02a6010000ab01000000
                   00000000007d037c00a00200000000000000000000000000000000000000
                   007c037c0264076602a6020000ab020000000000000000010064005300
-               1116           0 RESUME                   0
+               1129           0 RESUME                   0
                
-               1117           2 PUSH_NULL
+               1130           2 PUSH_NULL
                               4 LOAD_BUILD_CLASS
-                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1117>)
+                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1130>)
                               8 MAKE_FUNCTION            0
                              10 LOAD_CONST               2 ('DummyImageFile')
                              12 LOAD_GLOBAL              0 (object)
                              24 PRECALL                  3
                              28 CALL                     3
                              38 STORE_FAST               1 (DummyImageFile)
                
-               1142          40 PUSH_NULL
+               1155          40 PUSH_NULL
                              42 LOAD_FAST                1 (DummyImageFile)
                              44 LOAD_CONST               3 ('test')
                              46 LOAD_CONST               4 ('bmp')
                              48 LOAD_CONST               5 (50)
                              50 LOAD_CONST               6 (100)
                              52 PRECALL                  4
                              56 CALL                     4
                              66 STORE_FAST               2 (img)
                
-               1143          68 PUSH_NULL
+               1156          68 PUSH_NULL
                              70 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                              82 PRECALL                  0
                              86 CALL                     0
                              96 LOAD_FAST                2 (img)
                              98 PRECALL                  1
                             102 CALL                     1
                             112 STORE_FAST               3 (rtn)
                
-               1144         114 LOAD_FAST                0 (self)
+               1157         114 LOAD_FAST                0 (self)
                             116 LOAD_METHOD              2 (assertEqual)
                             138 LOAD_FAST                3 (rtn)
                             140 LOAD_FAST                2 (img)
                             142 LOAD_CONST               0 (None)
                             144 BUILD_TUPLE              2
                             146 PRECALL                  2
                             150 CALL                     2
                             160 POP_TOP
                
-               1145         162 PUSH_NULL
+               1158         162 PUSH_NULL
                             164 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             176 LOAD_CONST               7 ('oops')
                             178 LOAD_CONST               8 ((100, 50))
                             180 KW_NAMES                 9
                             182 PRECALL                  2
                             186 CALL                     2
                             196 LOAD_FAST                2 (img)
                             198 PRECALL                  1
                             202 CALL                     1
                             212 STORE_FAST               3 (rtn)
                
-               1146         214 LOAD_FAST                0 (self)
+               1159         214 LOAD_FAST                0 (self)
                             216 LOAD_METHOD              2 (assertEqual)
                             238 LOAD_FAST                3 (rtn)
                             240 LOAD_FAST                2 (img)
                             242 LOAD_CONST               7 ('oops')
                             244 BUILD_TUPLE              2
                             246 PRECALL                  2
                             250 CALL                     2
                             260 POP_TOP
                
-               1147         262 PUSH_NULL
+               1160         262 PUSH_NULL
                             264 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             276 LOAD_CONST               7 ('oops')
                             278 LOAD_CONST               8 ((100, 50))
                             280 KW_NAMES                10
                             282 PRECALL                  2
                             286 CALL                     2
                             296 LOAD_FAST                2 (img)
                             298 PRECALL                  1
                             302 CALL                     1
                             312 STORE_FAST               3 (rtn)
                
-               1148         314 LOAD_FAST                0 (self)
+               1161         314 LOAD_FAST                0 (self)
                             316 LOAD_METHOD              2 (assertEqual)
                             338 LOAD_FAST                3 (rtn)
                             340 LOAD_FAST                2 (img)
                             342 LOAD_CONST               7 ('oops')
                             344 BUILD_TUPLE              2
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1149         362 PUSH_NULL
+               1162         362 PUSH_NULL
                             364 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             376 LOAD_CONST               7 ('oops')
                             378 LOAD_CONST              11 ((1, 1))
                             380 KW_NAMES                12
                             382 PRECALL                  2
                             386 CALL                     2
                             396 LOAD_FAST                2 (img)
                             398 PRECALL                  1
                             402 CALL                     1
                             412 STORE_FAST               3 (rtn)
                
-               1150         414 LOAD_FAST                0 (self)
+               1163         414 LOAD_FAST                0 (self)
                             416 LOAD_METHOD              2 (assertEqual)
                             438 LOAD_FAST                3 (rtn)
                             440 LOAD_FAST                2 (img)
                             442 LOAD_CONST               7 ('oops')
                             444 BUILD_TUPLE              2
                             446 PRECALL                  2
                             450 CALL                     2
                             460 POP_TOP
                
-               1152         462 PUSH_NULL
+               1165         462 PUSH_NULL
                             464 LOAD_FAST                1 (DummyImageFile)
                             466 LOAD_CONST               3 ('test')
                             468 LOAD_CONST              13 ('gif')
                             470 LOAD_CONST               5 (50)
                             472 LOAD_CONST               6 (100)
                             474 PRECALL                  4
                             478 CALL                     4
                             488 STORE_FAST               2 (img)
                
-               1153         490 PUSH_NULL
+               1166         490 PUSH_NULL
                             492 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             504 PRECALL                  0
                             508 CALL                     0
                             518 LOAD_FAST                2 (img)
                             520 PRECALL                  1
                             524 CALL                     1
                             534 STORE_FAST               3 (rtn)
                
-               1154         536 LOAD_FAST                0 (self)
+               1167         536 LOAD_FAST                0 (self)
                             538 LOAD_METHOD              2 (assertEqual)
                             560 LOAD_FAST                3 (rtn)
                             562 LOAD_FAST                2 (img)
                             564 LOAD_CONST               0 (None)
                             566 BUILD_TUPLE              2
                             568 PRECALL                  2
                             572 CALL                     2
                             582 POP_TOP
                
-               1155         584 PUSH_NULL
+               1168         584 PUSH_NULL
                             586 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             598 LOAD_CONST               7 ('oops')
                             600 LOAD_CONST               8 ((100, 50))
                             602 KW_NAMES                 9
                             604 PRECALL                  2
                             608 CALL                     2
                             618 LOAD_FAST                2 (img)
                             620 PRECALL                  1
                             624 CALL                     1
                             634 STORE_FAST               3 (rtn)
                
-               1156         636 LOAD_FAST                0 (self)
+               1169         636 LOAD_FAST                0 (self)
                             638 LOAD_METHOD              2 (assertEqual)
                             660 LOAD_FAST                3 (rtn)
                             662 LOAD_FAST                2 (img)
                             664 LOAD_CONST               7 ('oops')
                             666 BUILD_TUPLE              2
                             668 PRECALL                  2
                             672 CALL                     2
                             682 POP_TOP
                
-               1157         684 PUSH_NULL
+               1170         684 PUSH_NULL
                             686 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             698 LOAD_CONST               7 ('oops')
                             700 LOAD_CONST               8 ((100, 50))
                             702 KW_NAMES                10
                             704 PRECALL                  2
                             708 CALL                     2
                             718 LOAD_FAST                2 (img)
                             720 PRECALL                  1
                             724 CALL                     1
                             734 STORE_FAST               3 (rtn)
                
-               1158         736 LOAD_FAST                0 (self)
+               1171         736 LOAD_FAST                0 (self)
                             738 LOAD_METHOD              2 (assertEqual)
                             760 LOAD_FAST                3 (rtn)
                             762 LOAD_FAST                2 (img)
                             764 LOAD_CONST               7 ('oops')
                             766 BUILD_TUPLE              2
                             768 PRECALL                  2
                             772 CALL                     2
                             782 POP_TOP
                
-               1159         784 PUSH_NULL
+               1172         784 PUSH_NULL
                             786 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             798 LOAD_CONST               7 ('oops')
                             800 LOAD_CONST              11 ((1, 1))
                             802 KW_NAMES                12
                             804 PRECALL                  2
                             808 CALL                     2
                             818 LOAD_FAST                2 (img)
                             820 PRECALL                  1
                             824 CALL                     1
                             834 STORE_FAST               3 (rtn)
                
-               1160         836 LOAD_FAST                0 (self)
+               1173         836 LOAD_FAST                0 (self)
                             838 LOAD_METHOD              2 (assertEqual)
                             860 LOAD_FAST                3 (rtn)
                             862 LOAD_FAST                2 (img)
                             864 LOAD_CONST               7 ('oops')
                             866 BUILD_TUPLE              2
                             868 PRECALL                  2
                             872 CALL                     2
                             882 POP_TOP
                
-               1162         884 PUSH_NULL
+               1175         884 PUSH_NULL
                             886 LOAD_FAST                1 (DummyImageFile)
                             888 LOAD_CONST               3 ('test')
                             890 LOAD_CONST              14 ('jpeg')
                             892 LOAD_CONST               5 (50)
                             894 LOAD_CONST               6 (100)
                             896 PRECALL                  4
                             900 CALL                     4
                             910 STORE_FAST               2 (img)
                
-               1163         912 PUSH_NULL
+               1176         912 PUSH_NULL
                             914 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             926 PRECALL                  0
                             930 CALL                     0
                             940 LOAD_FAST                2 (img)
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               3 (rtn)
                
-               1164         958 LOAD_FAST                0 (self)
+               1177         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              2 (assertEqual)
                             982 LOAD_FAST                3 (rtn)
                             984 LOAD_FAST                2 (img)
                             986 LOAD_CONST               0 (None)
                             988 BUILD_TUPLE              2
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1165        1006 PUSH_NULL
+               1178        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1020 LOAD_CONST               7 ('oops')
                            1022 LOAD_CONST               8 ((100, 50))
                            1024 KW_NAMES                 9
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_FAST                2 (img)
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               3 (rtn)
                
-               1166        1058 LOAD_FAST                0 (self)
+               1179        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              2 (assertEqual)
                            1082 LOAD_FAST                3 (rtn)
                            1084 LOAD_FAST                2 (img)
                            1086 LOAD_CONST               7 ('oops')
                            1088 BUILD_TUPLE              2
                            1090 PRECALL                  2
                            1094 CALL                     2
                            1104 POP_TOP
                
-               1167        1106 PUSH_NULL
+               1180        1106 PUSH_NULL
                            1108 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1120 LOAD_CONST               7 ('oops')
                            1122 LOAD_CONST               8 ((100, 50))
                            1124 KW_NAMES                10
                            1126 PRECALL                  2
                            1130 CALL                     2
                            1140 LOAD_FAST                2 (img)
                            1142 PRECALL                  1
                            1146 CALL                     1
                            1156 STORE_FAST               3 (rtn)
                
-               1168        1158 LOAD_FAST                0 (self)
+               1181        1158 LOAD_FAST                0 (self)
                            1160 LOAD_METHOD              2 (assertEqual)
                            1182 LOAD_FAST                3 (rtn)
                            1184 LOAD_FAST                2 (img)
                            1186 LOAD_CONST               7 ('oops')
                            1188 BUILD_TUPLE              2
                            1190 PRECALL                  2
                            1194 CALL                     2
                            1204 POP_TOP
                
-               1169        1206 PUSH_NULL
+               1182        1206 PUSH_NULL
                            1208 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1220 LOAD_CONST               7 ('oops')
                            1222 LOAD_CONST              11 ((1, 1))
                            1224 KW_NAMES                12
                            1226 PRECALL                  2
                            1230 CALL                     2
                            1240 LOAD_FAST                2 (img)
                            1242 PRECALL                  1
                            1246 CALL                     1
                            1256 STORE_FAST               3 (rtn)
                
-               1170        1258 LOAD_FAST                0 (self)
+               1183        1258 LOAD_FAST                0 (self)
                            1260 LOAD_METHOD              2 (assertEqual)
                            1282 LOAD_FAST                3 (rtn)
                            1284 LOAD_FAST                2 (img)
                            1286 LOAD_CONST               7 ('oops')
                            1288 BUILD_TUPLE              2
                            1290 PRECALL                  2
                            1294 CALL                     2
                            1304 POP_TOP
                
-               1172        1306 PUSH_NULL
+               1185        1306 PUSH_NULL
                            1308 LOAD_FAST                1 (DummyImageFile)
                            1310 LOAD_CONST               3 ('test')
                            1312 LOAD_CONST              15 ('png')
                            1314 LOAD_CONST               5 (50)
                            1316 LOAD_CONST               6 (100)
                            1318 PRECALL                  4
                            1322 CALL                     4
                            1332 STORE_FAST               2 (img)
                
-               1173        1334 PUSH_NULL
+               1186        1334 PUSH_NULL
                            1336 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1348 PRECALL                  0
                            1352 CALL                     0
                            1362 LOAD_FAST                2 (img)
                            1364 PRECALL                  1
                            1368 CALL                     1
                            1378 STORE_FAST               3 (rtn)
                
-               1174        1380 LOAD_FAST                0 (self)
+               1187        1380 LOAD_FAST                0 (self)
                            1382 LOAD_METHOD              2 (assertEqual)
                            1404 LOAD_FAST                3 (rtn)
                            1406 LOAD_FAST                2 (img)
                            1408 LOAD_CONST               0 (None)
                            1410 BUILD_TUPLE              2
                            1412 PRECALL                  2
                            1416 CALL                     2
                            1426 POP_TOP
                
-               1175        1428 PUSH_NULL
+               1188        1428 PUSH_NULL
                            1430 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1442 LOAD_CONST               7 ('oops')
                            1444 LOAD_CONST               8 ((100, 50))
                            1446 KW_NAMES                 9
                            1448 PRECALL                  2
                            1452 CALL                     2
                            1462 LOAD_FAST                2 (img)
                            1464 PRECALL                  1
                            1468 CALL                     1
                            1478 STORE_FAST               3 (rtn)
                
-               1176        1480 LOAD_FAST                0 (self)
+               1189        1480 LOAD_FAST                0 (self)
                            1482 LOAD_METHOD              2 (assertEqual)
                            1504 LOAD_FAST                3 (rtn)
                            1506 LOAD_FAST                2 (img)
                            1508 LOAD_CONST               7 ('oops')
                            1510 BUILD_TUPLE              2
                            1512 PRECALL                  2
                            1516 CALL                     2
                            1526 POP_TOP
                
-               1177        1528 PUSH_NULL
+               1190        1528 PUSH_NULL
                            1530 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1542 LOAD_CONST               7 ('oops')
                            1544 LOAD_CONST               8 ((100, 50))
                            1546 KW_NAMES                10
                            1548 PRECALL                  2
                            1552 CALL                     2
                            1562 LOAD_FAST                2 (img)
                            1564 PRECALL                  1
                            1568 CALL                     1
                            1578 STORE_FAST               3 (rtn)
                
-               1178        1580 LOAD_FAST                0 (self)
+               1191        1580 LOAD_FAST                0 (self)
                            1582 LOAD_METHOD              2 (assertEqual)
                            1604 LOAD_FAST                3 (rtn)
                            1606 LOAD_FAST                2 (img)
                            1608 LOAD_CONST               7 ('oops')
                            1610 BUILD_TUPLE              2
                            1612 PRECALL                  2
                            1616 CALL                     2
                            1626 POP_TOP
                
-               1179        1628 PUSH_NULL
+               1192        1628 PUSH_NULL
                            1630 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1642 LOAD_CONST               7 ('oops')
                            1644 LOAD_CONST              11 ((1, 1))
                            1646 KW_NAMES                12
                            1648 PRECALL                  2
                            1652 CALL                     2
                            1662 LOAD_FAST                2 (img)
                            1664 PRECALL                  1
                            1668 CALL                     1
                            1678 STORE_FAST               3 (rtn)
                
-               1180        1680 LOAD_FAST                0 (self)
+               1193        1680 LOAD_FAST                0 (self)
                            1682 LOAD_METHOD              2 (assertEqual)
                            1704 LOAD_FAST                3 (rtn)
                            1706 LOAD_FAST                2 (img)
                            1708 LOAD_CONST               7 ('oops')
                            1710 BUILD_TUPLE              2
                            1712 PRECALL                  2
                            1716 CALL                     2
                            1726 POP_TOP
                
-               1182        1728 PUSH_NULL
+               1195        1728 PUSH_NULL
                            1730 LOAD_FAST                1 (DummyImageFile)
                            1732 LOAD_CONST               3 ('test')
                            1734 LOAD_CONST              16 ('xls')
                            1736 LOAD_CONST               5 (50)
                            1738 LOAD_CONST               6 (100)
                            1740 PRECALL                  4
                            1744 CALL                     4
                            1754 STORE_FAST               2 (img)
                
-               1183        1756 PUSH_NULL
+               1196        1756 PUSH_NULL
                            1758 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1770 LOAD_CONST               7 ('oops')
                            1772 KW_NAMES                17
                            1774 PRECALL                  1
                            1778 CALL                     1
                            1788 LOAD_FAST                2 (img)
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               3 (rtn)
                
-               1184        1806 LOAD_FAST                0 (self)
+               1197        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              2 (assertEqual)
                            1830 LOAD_FAST                3 (rtn)
                            1832 LOAD_FAST                2 (img)
                            1834 LOAD_CONST               7 ('oops')
                            1836 BUILD_TUPLE              2
                            1838 PRECALL                  2
                            1842 CALL                     2
@@ -11836,21 +12021,21 @@
                   None
                   code
                      argcount  : 0
                      nlocals   : 0
                      stacksize : 1
                      flags     : 0
                      code 0x970065005a0164005a02640184005a0364025300
-                     1117           0 RESUME                   0
+                     1130           0 RESUME                   0
                                     2 LOAD_NAME                0 (__name__)
                                     4 STORE_NAME               1 (__module__)
                                     6 LOAD_CONST               0 ('TestValidators.test_IS_IMAGE.<locals>.DummyImageFile')
                                     8 STORE_NAME               2 (__qualname__)
                      
-                     1118          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1118>)
+                     1131          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1131>)
                                    12 MAKE_FUNCTION            0
                                    14 STORE_NAME               3 (__init__)
                                    16 LOAD_CONST               2 (None)
                                    18 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_IMAGE.<locals>.DummyImageFile'
                         code
@@ -11890,65 +12075,65 @@
                               000000000000000000000000000000000000006415a6010000ab01000000
                               000000000001007c006a040000000000000000a005000000000000000000
                               00000000000000000000007c05a006000000000000000000000000000000
                               000000000064167c037c04a6030000ab030000000000000000a6010000ab
                               01000000000000000001007c006a040000000000000000a0070000000000
                               0000000000000000000000000000006401a6010000ab0100000000000000
                               00010064005300
-                           1118           0 RESUME                   0
+                           1131           0 RESUME                   0
                            
-                           1119           2 LOAD_CONST               1 (0)
+                           1132           2 LOAD_CONST               1 (0)
                                           4 LOAD_CONST               0 (None)
                                           6 IMPORT_NAME              0 (struct)
                                           8 STORE_FAST               5 (struct)
                            
-                           1120          10 LOAD_CONST               1 (0)
+                           1133          10 LOAD_CONST               1 (0)
                                          12 LOAD_CONST               2 (('BytesIO',))
                                          14 IMPORT_NAME              1 (io)
                                          16 IMPORT_FROM              2 (BytesIO)
                                          18 STORE_FAST               6 (BytesIO)
                                          20 POP_TOP
                            
-                           1122          22 LOAD_FAST                1 (filename)
+                           1135          22 LOAD_FAST                1 (filename)
                                          24 LOAD_CONST               3 ('.')
                                          26 BINARY_OP                0 (+)
                                          30 LOAD_FAST                2 (ext)
                                          32 BINARY_OP                0 (+)
                                          36 LOAD_FAST                0 (self)
                                          38 STORE_ATTR               3 (filename)
                            
-                           1123          48 PUSH_NULL
+                           1136          48 PUSH_NULL
                                          50 LOAD_FAST                6 (BytesIO)
                                          52 PRECALL                  0
                                          56 CALL                     0
                                          66 LOAD_FAST                0 (self)
                                          68 STORE_ATTR               4 (file)
                            
-                           1124          78 LOAD_FAST                2 (ext)
+                           1137          78 LOAD_FAST                2 (ext)
                                          80 LOAD_CONST               4 ('bmp')
                                          82 COMPARE_OP               2 (==)
                                          88 POP_JUMP_FORWARD_IF_FALSE   101 (to 292)
                            
-                           1125          90 LOAD_FAST                0 (self)
+                           1138          90 LOAD_FAST                0 (self)
                                          92 LOAD_ATTR                4 (file)
                                         102 LOAD_METHOD              5 (write)
                                         124 LOAD_CONST               5 (b'BM')
                                         126 PRECALL                  1
                                         130 CALL                     1
                                         140 POP_TOP
                            
-                           1126         142 LOAD_FAST                0 (self)
+                           1139         142 LOAD_FAST                0 (self)
                                         144 LOAD_ATTR                4 (file)
                                         154 LOAD_METHOD              5 (write)
                                         176 LOAD_CONST               6 (b'                ')
                                         178 PRECALL                  1
                                         182 CALL                     1
                                         192 POP_TOP
                            
-                           1127         194 LOAD_FAST                0 (self)
+                           1140         194 LOAD_FAST                0 (self)
                                         196 LOAD_ATTR                4 (file)
                                         206 LOAD_METHOD              5 (write)
                                         228 LOAD_FAST                5 (struct)
                                         230 LOAD_METHOD              6 (pack)
                                         252 LOAD_CONST               7 ('<LL')
                                         254 LOAD_FAST                3 (width)
                                         256 LOAD_FAST                4 (height)
@@ -11956,28 +12141,28 @@
                                         262 CALL                     3
                                         272 PRECALL                  1
                                         276 CALL                     1
                                         286 POP_TOP
                                         288 EXTENDED_ARG             1
                                         290 JUMP_FORWARD           339 (to 970)
                            
-                           1128     >>  292 LOAD_FAST                2 (ext)
+                           1141     >>  292 LOAD_FAST                2 (ext)
                                         294 LOAD_CONST               8 ('gif')
                                         296 COMPARE_OP               2 (==)
                                         302 POP_JUMP_FORWARD_IF_FALSE    76 (to 456)
                            
-                           1129         304 LOAD_FAST                0 (self)
+                           1142         304 LOAD_FAST                0 (self)
                                         306 LOAD_ATTR                4 (file)
                                         316 LOAD_METHOD              5 (write)
                                         338 LOAD_CONST               9 (b'GIF87a')
                                         340 PRECALL                  1
                                         344 CALL                     1
                                         354 POP_TOP
                            
-                           1130         356 LOAD_FAST                0 (self)
+                           1143         356 LOAD_FAST                0 (self)
                                         358 LOAD_ATTR                4 (file)
                                         368 LOAD_METHOD              5 (write)
                                         390 LOAD_FAST                5 (struct)
                                         392 LOAD_METHOD              6 (pack)
                                         414 LOAD_CONST              10 ('<HHB')
                                         416 LOAD_FAST                3 (width)
                                         418 LOAD_FAST                4 (height)
@@ -11986,101 +12171,101 @@
                                         426 CALL                     4
                                         436 PRECALL                  1
                                         440 CALL                     1
                                         450 POP_TOP
                                         452 EXTENDED_ARG             1
                                         454 JUMP_FORWARD           257 (to 970)
                            
-                           1131     >>  456 LOAD_FAST                2 (ext)
+                           1144     >>  456 LOAD_FAST                2 (ext)
                                         458 LOAD_CONST              11 (('jpg', 'jpeg'))
                                         460 CONTAINS_OP              0
                                         462 POP_JUMP_FORWARD_IF_FALSE   122 (to 708)
                            
-                           1132         464 LOAD_FAST                0 (self)
+                           1145         464 LOAD_FAST                0 (self)
                                         466 LOAD_ATTR                4 (file)
                                         476 LOAD_METHOD              5 (write)
                                         498 LOAD_CONST              12 (b'\xff\xd8')
                                         500 PRECALL                  1
                                         504 CALL                     1
                                         514 POP_TOP
                            
-                           1133         516 LOAD_FAST                0 (self)
+                           1146         516 LOAD_FAST                0 (self)
                                         518 LOAD_ATTR                4 (file)
                                         528 LOAD_METHOD              5 (write)
                                         550 LOAD_FAST                5 (struct)
                                         552 LOAD_METHOD              6 (pack)
                                         574 LOAD_CONST              13 ('!BBH')
                                         576 LOAD_CONST              14 (255)
                                         578 LOAD_CONST              15 (192)
                                         580 LOAD_CONST              16 (5)
                                         582 PRECALL                  4
                                         586 CALL                     4
                                         596 PRECALL                  1
                                         600 CALL                     1
                                         610 POP_TOP
                            
-                           1134         612 LOAD_FAST                0 (self)
+                           1147         612 LOAD_FAST                0 (self)
                                         614 LOAD_ATTR                4 (file)
                                         624 LOAD_METHOD              5 (write)
                                         646 LOAD_FAST                5 (struct)
                                         648 LOAD_METHOD              6 (pack)
                                         670 LOAD_CONST              17 ('!xHH')
                                         672 LOAD_FAST                4 (height)
                                         674 LOAD_FAST                3 (width)
                                         676 PRECALL                  3
                                         680 CALL                     3
                                         690 PRECALL                  1
                                         694 CALL                     1
                                         704 POP_TOP
                                         706 JUMP_FORWARD           131 (to 970)
                            
-                           1135     >>  708 LOAD_FAST                2 (ext)
+                           1148     >>  708 LOAD_FAST                2 (ext)
                                         710 LOAD_CONST              18 ('png')
                                         712 COMPARE_OP               2 (==)
                                         718 POP_JUMP_FORWARD_IF_FALSE   125 (to 970)
                            
-                           1136         720 LOAD_FAST                0 (self)
+                           1149         720 LOAD_FAST                0 (self)
                                         722 LOAD_ATTR                4 (file)
                                         732 LOAD_METHOD              5 (write)
                                         754 LOAD_CONST              19 (b'\x89PNG\r\n\x1a\n')
                                         756 PRECALL                  1
                                         760 CALL                     1
                                         770 POP_TOP
                            
-                           1137         772 LOAD_FAST                0 (self)
+                           1150         772 LOAD_FAST                0 (self)
                                         774 LOAD_ATTR                4 (file)
                                         784 LOAD_METHOD              5 (write)
                                         806 LOAD_CONST              20 (b'    ')
                                         808 PRECALL                  1
                                         812 CALL                     1
                                         822 POP_TOP
                            
-                           1138         824 LOAD_FAST                0 (self)
+                           1151         824 LOAD_FAST                0 (self)
                                         826 LOAD_ATTR                4 (file)
                                         836 LOAD_METHOD              5 (write)
                                         858 LOAD_CONST              21 (b'IHDR')
                                         860 PRECALL                  1
                                         864 CALL                     1
                                         874 POP_TOP
                            
-                           1139         876 LOAD_FAST                0 (self)
+                           1152         876 LOAD_FAST                0 (self)
                                         878 LOAD_ATTR                4 (file)
                                         888 LOAD_METHOD              5 (write)
                                         910 LOAD_FAST                5 (struct)
                                         912 LOAD_METHOD              6 (pack)
                                         934 LOAD_CONST              22 ('!LL')
                                         936 LOAD_FAST                3 (width)
                                         938 LOAD_FAST                4 (height)
                                         940 PRECALL                  3
                                         944 CALL                     3
                                         954 PRECALL                  1
                                         958 CALL                     1
                                         968 POP_TOP
                            
-                           1140     >>  970 LOAD_FAST                0 (self)
+                           1153     >>  970 LOAD_FAST                0 (self)
                                         972 LOAD_ATTR                4 (file)
                                         982 LOAD_METHOD              7 (seek)
                                        1004 LOAD_CONST               1 (0)
                                        1006 PRECALL                  1
                                        1010 CALL                     1
                                        1020 POP_TOP
                                        1022 LOAD_CONST               0 (None)
@@ -12109,28 +12294,28 @@
                               b'    '
                               b'IHDR'
                               '!LL'
                            names      ('struct', 'io', 'BytesIO', 'filename', 'file', 'write', 'pack', 'seek')
                            varnames   ('self', 'filename', 'ext', 'width', 'height', 'struct', 'BytesIO')
                            freevars   ()
                            cellvars   ()
-                           filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                           filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       '__init__'
-                           firstlineno 1118
+                           firstlineno 1131
                            lnotab
                               0x020108010c021a011e010c013401340162010c01340164010801340160
                               0160010c013401340134015e01
                         None
                      names      ('__name__', '__module__', '__qualname__', '__init__')
                      varnames   ()
                      freevars   ()
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyImageFile'
-                     firstlineno 1117
+                     firstlineno 1130
                      lnotab 0x0a01
                   'DummyImageFile'
                   'test'
                   'bmp'
                   50
                   100
                   'oops'
@@ -12144,17 +12329,17 @@
                   'png'
                   'xls'
                   ('error_message',)
                names      ('object', 'IS_IMAGE', 'assertEqual')
                varnames   ('self', 'DummyImageFile', 'img', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IMAGE'
-               firstlineno 1116
+               firstlineno 1129
                lnotab
                   0x020126191c012e0130013401300134013001340130021c012e01300134
                   01300134013001340130021c012e0130013401300134013001340130021c
                   012e0130013401300134013001340130021c013201
             code
                argcount  : 1
                nlocals   : 4
@@ -12207,349 +12392,349 @@
                   00ab020000000000000000010002007407000000000000000000006405ac
                   06a6010000ab0100000000000000006404a6010000ab0100000000000000
                   007d037c00a00400000000000000000000000000000000000000007c0364
                   18a6020000ab020000000000000000010064005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1186           4 RESUME                   0
+               1199           4 RESUME                   0
                
-               1187           6 LOAD_CONST               1 (0)
+               1200           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1188          14 LOAD_CONST               1 (0)
+               1201          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1190          26 LOAD_CLOSURE             4 (BytesIO)
+               1203          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1190>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1203>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1217          38 PUSH_NULL
+               1230          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1218          60 PUSH_NULL
+               1231          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_FILE)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1219         110 LOAD_FAST                0 (self)
+               1232         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1220         158 PUSH_NULL
+               1233         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1221         180 PUSH_NULL
+               1234         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1222         230 LOAD_FAST                0 (self)
+               1235         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1223         278 PUSH_NULL
+               1236         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('multiple.pdf')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1224         300 PUSH_NULL
+               1237         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             314 LOAD_CONST               5 ('pdf')
                             316 LOAD_CONST              10 ('png')
                             318 BUILD_LIST               2
                             320 KW_NAMES                 6
                             322 PRECALL                  1
                             326 CALL                     1
                             336 LOAD_FAST                2 (fake)
                             338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1225         354 LOAD_FAST                0 (self)
+               1238         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1226         402 PUSH_NULL
+               1239         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              11 ('multiple.png')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1227         424 PUSH_NULL
+               1240         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             438 LOAD_CONST               5 ('pdf')
                             440 LOAD_CONST              10 ('png')
                             442 BUILD_LIST               2
                             444 KW_NAMES                 6
                             446 PRECALL                  1
                             450 CALL                     1
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1228         478 LOAD_FAST                0 (self)
+               1241         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1229         526 PUSH_NULL
+               1242         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              12 ('multiple.gif')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1230         548 PUSH_NULL
+               1243         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             562 LOAD_CONST               5 ('pdf')
                             564 LOAD_CONST              10 ('png')
                             566 BUILD_LIST               2
                             568 KW_NAMES                 6
                             570 PRECALL                  1
                             574 CALL                     1
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1231         602 LOAD_FAST                0 (self)
+               1244         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1232         650 PUSH_NULL
+               1245         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              13 ('backup2014.tar.gz')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1233         672 PUSH_NULL
+               1246         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_FILE)
                
-               1234         686 LOAD_GLOBAL             11 (NULL + re)
+               1247         686 LOAD_GLOBAL             11 (NULL + re)
                             698 LOAD_ATTR                6 (compile)
                             708 LOAD_CONST              14 ('backup.*')
                             710 PRECALL                  1
                             714 CALL                     1
                             724 LOAD_CONST              15 ('tar.gz')
                             726 LOAD_CONST              16 (False)
                
-               1233         728 KW_NAMES                17
+               1246         728 KW_NAMES                17
                             730 PRECALL                  3
                             734 CALL                     3
                
-               1235         744 LOAD_FAST                2 (fake)
+               1248         744 LOAD_FAST                2 (fake)
                
-               1233         746 PRECALL                  1
+               1246         746 PRECALL                  1
                             750 CALL                     1
                             760 STORE_FAST               3 (rtn)
                
-               1236         762 LOAD_FAST                0 (self)
+               1249         762 LOAD_FAST                0 (self)
                             764 LOAD_METHOD              4 (assertEqual)
                             786 LOAD_FAST                3 (rtn)
                             788 LOAD_FAST                2 (fake)
                             790 LOAD_CONST               0 (None)
                             792 BUILD_TUPLE              2
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1237         810 PUSH_NULL
+               1250         810 PUSH_NULL
                             812 LOAD_FAST                1 (gen_fake)
                             814 LOAD_CONST              18 ('README')
                             816 PRECALL                  1
                             820 CALL                     1
                             830 STORE_FAST               2 (fake)
                
-               1238         832 PUSH_NULL
+               1251         832 PUSH_NULL
                             834 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             846 LOAD_CONST              18 ('README')
                             848 LOAD_CONST              19 ('')
                             850 LOAD_CONST               1 (0)
                             852 KW_NAMES                20
                             854 PRECALL                  3
                             858 CALL                     3
                             868 LOAD_FAST                2 (fake)
                             870 PRECALL                  1
                             874 CALL                     1
                             884 STORE_FAST               3 (rtn)
                
-               1239         886 LOAD_FAST                0 (self)
+               1252         886 LOAD_FAST                0 (self)
                             888 LOAD_METHOD              4 (assertEqual)
                             910 LOAD_FAST                3 (rtn)
                             912 LOAD_FAST                2 (fake)
                             914 LOAD_CONST               0 (None)
                             916 BUILD_TUPLE              2
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1240         934 PUSH_NULL
+               1253         934 PUSH_NULL
                             936 LOAD_FAST                1 (gen_fake)
                             938 LOAD_CONST              21 ('readme')
                             940 PRECALL                  1
                             944 CALL                     1
                             954 STORE_FAST               2 (fake)
                
-               1241         956 PUSH_NULL
+               1254         956 PUSH_NULL
                             958 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             970 LOAD_CONST              18 ('README')
                             972 LOAD_CONST              19 ('')
                             974 LOAD_CONST               1 (0)
                             976 KW_NAMES                20
                             978 PRECALL                  3
                             982 CALL                     3
                             992 LOAD_FAST                2 (fake)
                             994 PRECALL                  1
                             998 CALL                     1
                            1008 STORE_FAST               3 (rtn)
                
-               1242        1010 LOAD_FAST                0 (self)
+               1255        1010 LOAD_FAST                0 (self)
                            1012 LOAD_METHOD              4 (assertEqual)
                            1034 LOAD_FAST                3 (rtn)
                            1036 LOAD_FAST                2 (fake)
                            1038 LOAD_CONST               8 ('Enter valid filename')
                            1040 BUILD_TUPLE              2
                            1042 PRECALL                  2
                            1046 CALL                     2
                            1056 POP_TOP
                
-               1243        1058 PUSH_NULL
+               1256        1058 PUSH_NULL
                            1060 LOAD_FAST                1 (gen_fake)
                            1062 LOAD_CONST              21 ('readme')
                            1064 PRECALL                  1
                            1068 CALL                     1
                            1078 STORE_FAST               2 (fake)
                
-               1244        1080 PUSH_NULL
+               1257        1080 PUSH_NULL
                            1082 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1094 LOAD_CONST              18 ('README')
                            1096 LOAD_CONST              22 (2)
                            1098 KW_NAMES                23
                            1100 PRECALL                  2
                            1104 CALL                     2
                            1114 LOAD_FAST                2 (fake)
                            1116 PRECALL                  1
                            1120 CALL                     1
                            1130 STORE_FAST               3 (rtn)
                
-               1245        1132 LOAD_FAST                0 (self)
+               1258        1132 LOAD_FAST                0 (self)
                            1134 LOAD_METHOD              4 (assertEqual)
                            1156 LOAD_FAST                3 (rtn)
                            1158 LOAD_FAST                2 (fake)
                            1160 LOAD_CONST               0 (None)
                            1162 BUILD_TUPLE              2
                            1164 PRECALL                  2
                            1168 CALL                     2
                            1178 POP_TOP
                
-               1246        1180 PUSH_NULL
+               1259        1180 PUSH_NULL
                            1182 LOAD_FAST                1 (gen_fake)
                            1184 LOAD_CONST              18 ('README')
                            1186 PRECALL                  1
                            1190 CALL                     1
                            1200 STORE_FAST               2 (fake)
                
-               1247        1202 PUSH_NULL
+               1260        1202 PUSH_NULL
                            1204 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1216 LOAD_CONST              18 ('README')
                            1218 LOAD_CONST              22 (2)
                            1220 KW_NAMES                23
                            1222 PRECALL                  2
                            1226 CALL                     2
                            1236 LOAD_FAST                2 (fake)
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 STORE_FAST               3 (rtn)
                
-               1248        1254 LOAD_FAST                0 (self)
+               1261        1254 LOAD_FAST                0 (self)
                            1256 LOAD_METHOD              4 (assertEqual)
                            1278 LOAD_FAST                3 (rtn)
                            1280 LOAD_FAST                2 (fake)
                            1282 LOAD_CONST               0 (None)
                            1284 BUILD_TUPLE              2
                            1286 PRECALL                  2
                            1290 CALL                     2
                            1300 POP_TOP
                
-               1249        1302 PUSH_NULL
+               1262        1302 PUSH_NULL
                            1304 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1316 LOAD_CONST               5 ('pdf')
                            1318 KW_NAMES                 6
                            1320 PRECALL                  1
                            1324 CALL                     1
                            1334 LOAD_CONST               4 ('example.pdf')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               3 (rtn)
                
-               1250        1352 LOAD_FAST                0 (self)
+               1263        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              4 (assertEqual)
                            1376 LOAD_FAST                3 (rtn)
                            1378 LOAD_CONST              24 (('example.pdf', 'Enter valid filename'))
                            1380 PRECALL                  2
                            1384 CALL                     2
                            1394 POP_TOP
                            1396 LOAD_CONST               0 (None)
@@ -12569,79 +12754,79 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1190           2 RESUME                   0
+                     1203           2 RESUME                   0
                      
-                     1192           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1205           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1205           6 LOAD_FAST                0 (filename)
+                     1218           6 LOAD_FAST                0 (filename)
                      
-                     1192           8 BINARY_OP                6 (%)
+                     1205           8 BINARY_OP                6 (%)
                      
-                     1191          12 STORE_FAST               1 (formdata_file_data)
+                     1204          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1208          14 LOAD_GLOBAL              1 (NULL + str)
+                     1221          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1209          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1222          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1210          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1223          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1211          72 LOAD_CONST               4 ('POST')
+                     1224          72 LOAD_CONST               4 ('POST')
                      
-                     1207          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1220          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1213          80 LOAD_DEREF               4 (cgi)
+                     1226          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1214         104 PUSH_NULL
+                     1227         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1213         152 KW_NAMES                 6
+                     1226         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1215         168 LOAD_CONST               7 ('file_attach')
+                     1228         168 LOAD_CONST               7 ('file_attach')
                      
-                     1213         170 BINARY_SUBSCR
+                     1226         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
                         ('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD')
                         ('fp', 'environ')
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1190
+                     firstlineno 1203
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'multiple.pdf'
@@ -12660,17 +12845,17 @@
                   2
                   ('filename', 'case')
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_FILE', 'assertEqual', 're', 'compile')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FILE'
-               firstlineno 1186
+               firstlineno 1199
                lnotab
                   0x060108010c020c1b160132013001160132013001160136013001160136
                   01300116013601300116010e012aff100202fe1003300116013601300116
                   01360130011601340130011601340130013201
             code
                argcount  : 1
                nlocals   : 4
@@ -12710,255 +12895,255 @@
                   0000000000000000006405ac06a6010000ab0100000000000000006404a6
                   010000ab0100000000000000007d037c00a0040000000000000000000000
                   0000000000000000007c036415a6020000ab020000000000000000010064
                   005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1252           4 RESUME                   0
+               1265           4 RESUME                   0
                
-               1253           6 LOAD_CONST               1 (0)
+               1266           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1254          14 LOAD_CONST               1 (0)
+               1267          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1256          26 LOAD_CLOSURE             4 (BytesIO)
+               1269          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/packages/pydal/tests/validators.py", line 1256>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1269>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1283          38 PUSH_NULL
+               1296          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1284          60 PUSH_NULL
+               1297          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1285         110 LOAD_FAST                0 (self)
+               1298         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1286         158 PUSH_NULL
+               1299         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1287         180 PUSH_NULL
+               1300         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1288         230 LOAD_FAST                0 (self)
+               1301         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1289         278 PUSH_NULL
+               1302         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('backup2014.tar.gz')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1290         300 PUSH_NULL
+               1303         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                
-               1291         314 LOAD_CONST              10 ('backup.*')
+               1304         314 LOAD_CONST              10 ('backup.*')
                             316 LOAD_CONST              11 ('tar.gz')
                             318 LOAD_CONST              12 (False)
                
-               1290         320 KW_NAMES                13
+               1303         320 KW_NAMES                13
                             322 PRECALL                  3
                             326 CALL                     3
                
-               1292         336 LOAD_FAST                2 (fake)
+               1305         336 LOAD_FAST                2 (fake)
                
-               1290         338 PRECALL                  1
+               1303         338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1293         354 LOAD_FAST                0 (self)
+               1306         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1294         402 PUSH_NULL
+               1307         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              14 ('README')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1295         424 PUSH_NULL
+               1308         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             438 LOAD_CONST              15 ('^README$')
                             440 LOAD_CONST              16 ('^$')
                             442 LOAD_CONST               1 (0)
                             444 KW_NAMES                17
                             446 PRECALL                  3
                             450 CALL                     3
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1296         478 LOAD_FAST                0 (self)
+               1309         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1297         526 PUSH_NULL
+               1310         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              18 ('readme')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1298         548 PUSH_NULL
+               1311         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             562 LOAD_CONST              15 ('^README$')
                             564 LOAD_CONST              16 ('^$')
                             566 LOAD_CONST               1 (0)
                             568 KW_NAMES                17
                             570 PRECALL                  3
                             574 CALL                     3
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1299         602 LOAD_FAST                0 (self)
+               1312         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1300         650 PUSH_NULL
+               1313         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              18 ('readme')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1301         672 PUSH_NULL
+               1314         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             686 LOAD_CONST              14 ('README')
                             688 LOAD_CONST              19 (2)
                             690 KW_NAMES                20
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_FAST                2 (fake)
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               3 (rtn)
                
-               1302         724 LOAD_FAST                0 (self)
+               1315         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              4 (assertEqual)
                             748 LOAD_FAST                3 (rtn)
                             750 LOAD_FAST                2 (fake)
                             752 LOAD_CONST               0 (None)
                             754 BUILD_TUPLE              2
                             756 PRECALL                  2
                             760 CALL                     2
                             770 POP_TOP
                
-               1303         772 PUSH_NULL
+               1316         772 PUSH_NULL
                             774 LOAD_FAST                1 (gen_fake)
                             776 LOAD_CONST              14 ('README')
                             778 PRECALL                  1
                             782 CALL                     1
                             792 STORE_FAST               2 (fake)
                
-               1304         794 PUSH_NULL
+               1317         794 PUSH_NULL
                             796 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             808 LOAD_CONST              14 ('README')
                             810 LOAD_CONST              19 (2)
                             812 KW_NAMES                20
                             814 PRECALL                  2
                             818 CALL                     2
                             828 LOAD_FAST                2 (fake)
                             830 PRECALL                  1
                             834 CALL                     1
                             844 STORE_FAST               3 (rtn)
                
-               1305         846 LOAD_FAST                0 (self)
+               1318         846 LOAD_FAST                0 (self)
                             848 LOAD_METHOD              4 (assertEqual)
                             870 LOAD_FAST                3 (rtn)
                             872 LOAD_FAST                2 (fake)
                             874 LOAD_CONST               0 (None)
                             876 BUILD_TUPLE              2
                             878 PRECALL                  2
                             882 CALL                     2
                             892 POP_TOP
                
-               1306         894 PUSH_NULL
+               1319         894 PUSH_NULL
                             896 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             908 LOAD_CONST               5 ('pdf')
                             910 KW_NAMES                 6
                             912 PRECALL                  1
                             916 CALL                     1
                             926 LOAD_CONST               4 ('example.pdf')
                             928 PRECALL                  1
                             932 CALL                     1
                             942 STORE_FAST               3 (rtn)
                
-               1307         944 LOAD_FAST                0 (self)
+               1320         944 LOAD_FAST                0 (self)
                             946 LOAD_METHOD              4 (assertEqual)
                             968 LOAD_FAST                3 (rtn)
                             970 LOAD_CONST              21 (('example.pdf', 'Enter valid filename'))
                             972 PRECALL                  2
                             976 CALL                     2
                             986 POP_TOP
                             988 LOAD_CONST               0 (None)
@@ -12978,79 +13163,79 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1256           2 RESUME                   0
+                     1269           2 RESUME                   0
                      
-                     1258           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1271           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1271           6 LOAD_FAST                0 (filename)
+                     1284           6 LOAD_FAST                0 (filename)
                      
-                     1258           8 BINARY_OP                6 (%)
+                     1271           8 BINARY_OP                6 (%)
                      
-                     1257          12 STORE_FAST               1 (formdata_file_data)
+                     1270          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1274          14 LOAD_GLOBAL              1 (NULL + str)
+                     1287          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1275          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1288          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1276          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1289          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1277          72 LOAD_CONST               4 ('POST')
+                     1290          72 LOAD_CONST               4 ('POST')
                      
-                     1273          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1286          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1279          80 LOAD_DEREF               4 (cgi)
+                     1292          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1280         104 PUSH_NULL
+                     1293         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1279         152 KW_NAMES                 6
+                     1292         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1281         168 LOAD_CONST               7 ('file_attach')
+                     1294         168 LOAD_CONST               7 ('file_attach')
                      
-                     1279         170 BINARY_SUBSCR
+                     1292         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
                         ('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD')
                         ('fp', 'environ')
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
-                     filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1256
+                     firstlineno 1269
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'backup2014.tar.gz'
@@ -13066,17 +13251,17 @@
                   2
                   ('filename', 'case')
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_UPLOAD_FILENAME', 'assertEqual')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPLOAD_FILENAME'
-               firstlineno 1252
+               firstlineno 1265
                lnotab
                   0x060108010c020c1b16013201300116013201300116010e0106ff100202
                   fe1003300116013601300116013601300116013401300116013401300132
                   01
             code
                argcount  : 1
                nlocals   : 2
@@ -13132,322 +13317,322 @@
                   000000000001000200740100000000000000000000641fac1ea6010000ab
                   010000000000000000641ba6010000ab0100000000000000007d017c00a0
                   0100000000000000000000000000000000000000007c016420a6020000ab
                   0200000000000000000100020074010000000000000000000064216419ac
                   22a6020000ab020000000000000000641ba6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   20a6020000ab020000000000000000010064005300
-               1309           0 RESUME                   0
+               1322           0 RESUME                   0
                
-               1310           2 PUSH_NULL
+               1323           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('1.2.3.4')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1311          48 LOAD_FAST                0 (self)
+               1324          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('1.2.3.4', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1312          92 PUSH_NULL
+               1325          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('255.255.255.255')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1313         138 LOAD_FAST                0 (self)
+               1326         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('255.255.255.255', None))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1314         182 PUSH_NULL
+               1327         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             196 PRECALL                  0
                             200 CALL                     0
                             210 LOAD_CONST               5 ('1.2.3.4 ')
                             212 PRECALL                  1
                             216 CALL                     1
                             226 STORE_FAST               1 (rtn)
                
-               1315         228 LOAD_FAST                0 (self)
+               1328         228 LOAD_FAST                0 (self)
                             230 LOAD_METHOD              1 (assertEqual)
                             252 LOAD_FAST                1 (rtn)
                             254 LOAD_CONST               6 (('1.2.3.4 ', 'Enter valid IPv4 address'))
                             256 PRECALL                  2
                             260 CALL                     2
                             270 POP_TOP
                
-               1316         272 PUSH_NULL
+               1329         272 PUSH_NULL
                             274 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             286 PRECALL                  0
                             290 CALL                     0
                             300 LOAD_CONST               7 ('1.2.3.4.5')
                             302 PRECALL                  1
                             306 CALL                     1
                             316 STORE_FAST               1 (rtn)
                
-               1317         318 LOAD_FAST                0 (self)
+               1330         318 LOAD_FAST                0 (self)
                             320 LOAD_METHOD              1 (assertEqual)
                             342 LOAD_FAST                1 (rtn)
                             344 LOAD_CONST               8 (('1.2.3.4.5', 'Enter valid IPv4 address'))
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1318         362 PUSH_NULL
+               1331         362 PUSH_NULL
                             364 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             376 PRECALL                  0
                             380 CALL                     0
                             390 LOAD_CONST               9 ('123.123')
                             392 PRECALL                  1
                             396 CALL                     1
                             406 STORE_FAST               1 (rtn)
                
-               1319         408 LOAD_FAST                0 (self)
+               1332         408 LOAD_FAST                0 (self)
                             410 LOAD_METHOD              1 (assertEqual)
                             432 LOAD_FAST                1 (rtn)
                             434 LOAD_CONST              10 (('123.123', 'Enter valid IPv4 address'))
                             436 PRECALL                  2
                             440 CALL                     2
                             450 POP_TOP
                
-               1320         452 PUSH_NULL
+               1333         452 PUSH_NULL
                             454 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             466 PRECALL                  0
                             470 CALL                     0
                             480 LOAD_CONST              11 ('1111.2.3.4')
                             482 PRECALL                  1
                             486 CALL                     1
                             496 STORE_FAST               1 (rtn)
                
-               1321         498 LOAD_FAST                0 (self)
+               1334         498 LOAD_FAST                0 (self)
                             500 LOAD_METHOD              1 (assertEqual)
                             522 LOAD_FAST                1 (rtn)
                             524 LOAD_CONST              12 (('1111.2.3.4', 'Enter valid IPv4 address'))
                             526 PRECALL                  2
                             530 CALL                     2
                             540 POP_TOP
                
-               1322         542 PUSH_NULL
+               1335         542 PUSH_NULL
                             544 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             556 PRECALL                  0
                             560 CALL                     0
                             570 LOAD_CONST              13 ('0111.2.3.4')
                             572 PRECALL                  1
                             576 CALL                     1
                             586 STORE_FAST               1 (rtn)
                
-               1323         588 LOAD_FAST                0 (self)
+               1336         588 LOAD_FAST                0 (self)
                             590 LOAD_METHOD              1 (assertEqual)
                             612 LOAD_FAST                1 (rtn)
                             614 LOAD_CONST              14 (('0111.2.3.4', 'Enter valid IPv4 address'))
                             616 PRECALL                  2
                             620 CALL                     2
                             630 POP_TOP
                
-               1324         632 PUSH_NULL
+               1337         632 PUSH_NULL
                             634 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             646 PRECALL                  0
                             650 CALL                     0
                             660 LOAD_CONST              15 ('256.2.3.4')
                             662 PRECALL                  1
                             666 CALL                     1
                             676 STORE_FAST               1 (rtn)
                
-               1325         678 LOAD_FAST                0 (self)
+               1338         678 LOAD_FAST                0 (self)
                             680 LOAD_METHOD              1 (assertEqual)
                             702 LOAD_FAST                1 (rtn)
                             704 LOAD_CONST              16 (('256.2.3.4', 'Enter valid IPv4 address'))
                             706 PRECALL                  2
                             710 CALL                     2
                             720 POP_TOP
                
-               1326         722 PUSH_NULL
+               1339         722 PUSH_NULL
                             724 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             736 PRECALL                  0
                             740 CALL                     0
                             750 LOAD_CONST              17 ('300.2.3.4')
                             752 PRECALL                  1
                             756 CALL                     1
                             766 STORE_FAST               1 (rtn)
                
-               1327         768 LOAD_FAST                0 (self)
+               1340         768 LOAD_FAST                0 (self)
                             770 LOAD_METHOD              1 (assertEqual)
                             792 LOAD_FAST                1 (rtn)
                             794 LOAD_CONST              18 (('300.2.3.4', 'Enter valid IPv4 address'))
                             796 PRECALL                  2
                             800 CALL                     2
                             810 POP_TOP
                
-               1328         812 PUSH_NULL
+               1341         812 PUSH_NULL
                             814 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             826 LOAD_CONST               1 ('1.2.3.4')
                             828 LOAD_CONST               1 ('1.2.3.4')
                             830 KW_NAMES                19
                             832 PRECALL                  2
                             836 CALL                     2
                             846 LOAD_CONST               1 ('1.2.3.4')
                             848 PRECALL                  1
                             852 CALL                     1
                             862 STORE_FAST               1 (rtn)
                
-               1329         864 LOAD_FAST                0 (self)
+               1342         864 LOAD_FAST                0 (self)
                             866 LOAD_METHOD              1 (assertEqual)
                             888 LOAD_FAST                1 (rtn)
                             890 LOAD_CONST               2 (('1.2.3.4', None))
                             892 PRECALL                  2
                             896 CALL                     2
                             906 POP_TOP
                
-               1330         908 PUSH_NULL
+               1343         908 PUSH_NULL
                             910 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             922 LOAD_CONST              20 ('1.2.3.5')
                             924 LOAD_CONST              21 ('1.2.3.9')
                             926 LOAD_CONST              22 ('bad ip')
                             928 KW_NAMES                23
                             930 PRECALL                  3
                             934 CALL                     3
                
-               1331         944 LOAD_CONST               1 ('1.2.3.4')
+               1344         944 LOAD_CONST               1 ('1.2.3.4')
                
-               1330         946 PRECALL                  1
+               1343         946 PRECALL                  1
                             950 CALL                     1
                             960 STORE_FAST               1 (rtn)
                
-               1333         962 LOAD_FAST                0 (self)
+               1346         962 LOAD_FAST                0 (self)
                             964 LOAD_METHOD              1 (assertEqual)
                             986 LOAD_FAST                1 (rtn)
                             988 LOAD_CONST              24 (('1.2.3.4', 'bad ip'))
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1334        1006 PUSH_NULL
+               1347        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1020 LOAD_CONST               1 ('1.2.3.4')
                            1022 LOAD_CONST              25 (True)
                            1024 KW_NAMES                26
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_CONST              27 ('127.0.0.1')
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               1 (rtn)
                
-               1335        1058 LOAD_FAST                0 (self)
+               1348        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              1 (assertEqual)
                            1082 LOAD_FAST                1 (rtn)
                            1084 LOAD_CONST              28 (('127.0.0.1', None))
                            1086 PRECALL                  2
                            1090 CALL                     2
                            1100 POP_TOP
                
-               1336        1102 PUSH_NULL
+               1349        1102 PUSH_NULL
                            1104 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1116 LOAD_CONST               1 ('1.2.3.4')
                            1118 LOAD_CONST              25 (True)
                            1120 KW_NAMES                26
                            1122 PRECALL                  2
                            1126 CALL                     2
                            1136 LOAD_CONST               1 ('1.2.3.4')
                            1138 PRECALL                  1
                            1142 CALL                     1
                            1152 STORE_FAST               1 (rtn)
                
-               1337        1154 LOAD_FAST                0 (self)
+               1350        1154 LOAD_FAST                0 (self)
                            1156 LOAD_METHOD              1 (assertEqual)
                            1178 LOAD_FAST                1 (rtn)
                            1180 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1182 PRECALL                  2
                            1186 CALL                     2
                            1196 POP_TOP
                
-               1338        1198 PUSH_NULL
+               1351        1198 PUSH_NULL
                            1200 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1212 LOAD_CONST              25 (True)
                            1214 KW_NAMES                30
                            1216 PRECALL                  1
                            1220 CALL                     1
                            1230 LOAD_CONST              27 ('127.0.0.1')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1339        1248 LOAD_FAST                0 (self)
+               1352        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              28 (('127.0.0.1', None))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1340        1292 PUSH_NULL
+               1353        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1306 LOAD_CONST              25 (True)
                            1308 KW_NAMES                30
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST               1 ('1.2.3.4')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1341        1342 LOAD_FAST                0 (self)
+               1354        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1342        1386 PUSH_NULL
+               1355        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1400 LOAD_CONST              31 (False)
                            1402 KW_NAMES                30
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              27 ('127.0.0.1')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1343        1436 LOAD_FAST                0 (self)
+               1356        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1344        1480 PUSH_NULL
+               1357        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1494 LOAD_CONST              33 ('100.0.0.0')
                            1496 LOAD_CONST              25 (True)
                            1498 KW_NAMES                34
                            1500 PRECALL                  2
                            1504 CALL                     2
                            1514 LOAD_CONST              27 ('127.0.0.1')
                            1516 PRECALL                  1
                            1520 CALL                     1
                            1530 STORE_FAST               1 (rtn)
                
-               1345        1532 LOAD_FAST                0 (self)
+               1358        1532 LOAD_FAST                0 (self)
                            1534 LOAD_METHOD              1 (assertEqual)
                            1556 LOAD_FAST                1 (rtn)
                            1558 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1560 PRECALL                  2
                            1564 CALL                     2
                            1574 POP_TOP
                            1576 LOAD_CONST               0 (None)
@@ -13488,17 +13673,17 @@
                   ('127.0.0.1', 'Enter valid IPv4 address')
                   '100.0.0.0'
                   ('maxip', 'is_localhost')
                names      ('IS_IPV4', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV4'
-               firstlineno 1309
+               firstlineno 1322
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c0134012c01240102ff10032c0134012c0134012c0132
                   012c0132012c0132012c013401
             code
                argcount  : 1
                nlocals   : 2
@@ -13545,273 +13730,273 @@
                   00ab02000000000000000001000200740100000000000000000000641a64
                   146702ac15a6010000ab0100000000000000006416a6010000ab01000000
                   00000000007d017c00a00100000000000000000000000000000000000000
                   007c016417a6020000ab0200000000000000000100020074010000000000
                   0000000000641bac15a6010000ab0100000000000000006416a6010000ab
                   0100000000000000007d017c00a001000000000000000000000000000000
                   00000000007c01641ca6020000ab020000000000000000010064005300
-               1347           0 RESUME                   0
+               1360           0 RESUME                   0
                
-               1348           2 PUSH_NULL
+               1361           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1349          48 LOAD_FAST                0 (self)
+               1362          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1350          92 PUSH_NULL
+               1363          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('192.168.1.1')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1351         138 LOAD_FAST                0 (self)
+               1364         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('192.168.1.1', 'Enter valid IPv6 address'))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1352         182 PUSH_NULL
+               1365         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             196 LOAD_CONST               5 ('bad ip')
                             198 KW_NAMES                 6
                             200 PRECALL                  1
                             204 CALL                     1
                             214 LOAD_CONST               3 ('192.168.1.1')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1353         232 LOAD_FAST                0 (self)
+               1366         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               7 (('192.168.1.1', 'bad ip'))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1354         276 PUSH_NULL
+               1367         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             290 LOAD_CONST               8 (True)
                             292 KW_NAMES                 9
                             294 PRECALL                  1
                             298 CALL                     1
                             308 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             310 PRECALL                  1
                             314 CALL                     1
                             324 STORE_FAST               1 (rtn)
                
-               1355         326 LOAD_FAST                0 (self)
+               1368         326 LOAD_FAST                0 (self)
                             328 LOAD_METHOD              1 (assertEqual)
                             350 LOAD_FAST                1 (rtn)
                             352 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                             354 PRECALL                  2
                             358 CALL                     2
                             368 POP_TOP
                
-               1356         370 PUSH_NULL
+               1369         370 PUSH_NULL
                             372 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             384 LOAD_CONST              10 (False)
                             386 KW_NAMES                 9
                             388 PRECALL                  1
                             392 CALL                     1
                             402 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             404 PRECALL                  1
                             408 CALL                     1
                             418 STORE_FAST               1 (rtn)
                
-               1357         420 LOAD_FAST                0 (self)
+               1370         420 LOAD_FAST                0 (self)
                             422 LOAD_METHOD              1 (assertEqual)
                             444 LOAD_FAST                1 (rtn)
                             446 LOAD_CONST              11 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             448 PRECALL                  2
                             452 CALL                     2
                             462 POP_TOP
                
-               1358         464 PUSH_NULL
+               1371         464 PUSH_NULL
                             466 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             478 LOAD_CONST               8 (True)
                             480 KW_NAMES                 9
                             482 PRECALL                  1
                             486 CALL                     1
                             496 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             498 PRECALL                  1
                             502 CALL                     1
                             512 STORE_FAST               1 (rtn)
                
-               1359         514 LOAD_FAST                0 (self)
+               1372         514 LOAD_FAST                0 (self)
                             516 LOAD_METHOD              1 (assertEqual)
                             538 LOAD_FAST                1 (rtn)
                             540 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             542 PRECALL                  2
                             546 CALL                     2
                             556 POP_TOP
                
-               1360         558 PUSH_NULL
+               1373         558 PUSH_NULL
                             560 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             572 LOAD_CONST               8 (True)
                             574 KW_NAMES                14
                             576 PRECALL                  1
                             580 CALL                     1
                             590 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             592 PRECALL                  1
                             596 CALL                     1
                             606 STORE_FAST               1 (rtn)
                
-               1361         608 LOAD_FAST                0 (self)
+               1374         608 LOAD_FAST                0 (self)
                             610 LOAD_METHOD              1 (assertEqual)
                             632 LOAD_FAST                1 (rtn)
                             634 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             636 PRECALL                  2
                             640 CALL                     2
                             650 POP_TOP
                
-               1362         652 PUSH_NULL
+               1375         652 PUSH_NULL
                             654 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             666 LOAD_CONST               8 (True)
                             668 KW_NAMES                14
                             670 PRECALL                  1
                             674 CALL                     1
                             684 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             686 PRECALL                  1
                             690 CALL                     1
                             700 STORE_FAST               1 (rtn)
                
-               1363         702 LOAD_FAST                0 (self)
+               1376         702 LOAD_FAST                0 (self)
                             704 LOAD_METHOD              1 (assertEqual)
                             726 LOAD_FAST                1 (rtn)
                             728 LOAD_CONST              16 (('ff00::126c:8ffa:fe22:b3af', None))
                             730 PRECALL                  2
                             734 CALL                     2
                             744 POP_TOP
                
-               1367         746 PUSH_NULL
+               1380         746 PUSH_NULL
                             748 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             760 LOAD_CONST              10 (False)
                             762 KW_NAMES                17
                             764 PRECALL                  1
                             768 CALL                     1
                             778 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             780 PRECALL                  1
                             784 CALL                     1
                             794 STORE_FAST               1 (rtn)
                
-               1368         796 LOAD_FAST                0 (self)
+               1381         796 LOAD_FAST                0 (self)
                             798 LOAD_METHOD              1 (assertEqual)
                             820 LOAD_FAST                1 (rtn)
                             822 LOAD_CONST              18 (('2001::126c:8ffa:fe22:b3af', None))
                             824 PRECALL                  2
                             828 CALL                     2
                             838 POP_TOP
                
-               1369         840 PUSH_NULL
+               1382         840 PUSH_NULL
                             842 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             854 LOAD_CONST               8 (True)
                             856 KW_NAMES                17
                             858 PRECALL                  1
                             862 CALL                     1
                             872 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             874 PRECALL                  1
                             878 CALL                     1
                             888 STORE_FAST               1 (rtn)
                
-               1370         890 LOAD_FAST                0 (self)
+               1383         890 LOAD_FAST                0 (self)
                             892 LOAD_METHOD              1 (assertEqual)
                             914 LOAD_FAST                1 (rtn)
                             916 LOAD_CONST              19 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1371         934 PUSH_NULL
+               1384         934 PUSH_NULL
                             936 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             948 LOAD_CONST              20 ('2001::/32')
                             950 KW_NAMES                21
                             952 PRECALL                  1
                             956 CALL                     1
                             966 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                             968 PRECALL                  1
                             972 CALL                     1
                             982 STORE_FAST               1 (rtn)
                
-               1372         984 LOAD_FAST                0 (self)
+               1385         984 LOAD_FAST                0 (self)
                             986 LOAD_METHOD              1 (assertEqual)
                            1008 LOAD_FAST                1 (rtn)
                            1010 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1012 PRECALL                  2
                            1016 CALL                     2
                            1026 POP_TOP
                
-               1373        1028 PUSH_NULL
+               1386        1028 PUSH_NULL
                            1030 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1042 LOAD_CONST              24 ('fb00::/8')
                            1044 KW_NAMES                21
                            1046 PRECALL                  1
                            1050 CALL                     1
                            1060 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1062 PRECALL                  1
                            1066 CALL                     1
                            1076 STORE_FAST               1 (rtn)
                
-               1374        1078 LOAD_FAST                0 (self)
+               1387        1078 LOAD_FAST                0 (self)
                            1080 LOAD_METHOD              1 (assertEqual)
                            1102 LOAD_FAST                1 (rtn)
                            1104 LOAD_CONST              25 (('2001::8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                            1106 PRECALL                  2
                            1110 CALL                     2
                            1120 POP_TOP
                
-               1375        1122 PUSH_NULL
+               1388        1122 PUSH_NULL
                            1124 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1136 LOAD_CONST              26 ('fc00::/8')
                            1138 LOAD_CONST              20 ('2001::/32')
                            1140 BUILD_LIST               2
                            1142 KW_NAMES                21
                            1144 PRECALL                  1
                            1148 CALL                     1
                            1158 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1160 PRECALL                  1
                            1164 CALL                     1
                            1174 STORE_FAST               1 (rtn)
                
-               1376        1176 LOAD_FAST                0 (self)
+               1389        1176 LOAD_FAST                0 (self)
                            1178 LOAD_METHOD              1 (assertEqual)
                            1200 LOAD_FAST                1 (rtn)
                            1202 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1204 PRECALL                  2
                            1208 CALL                     2
                            1218 POP_TOP
                
-               1377        1220 PUSH_NULL
+               1390        1220 PUSH_NULL
                            1222 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1234 LOAD_CONST              27 ('invalidsubnet')
                            1236 KW_NAMES                21
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1254 PRECALL                  1
                            1258 CALL                     1
                            1268 STORE_FAST               1 (rtn)
                
-               1378        1270 LOAD_FAST                0 (self)
+               1391        1270 LOAD_FAST                0 (self)
                            1272 LOAD_METHOD              1 (assertEqual)
                            1294 LOAD_FAST                1 (rtn)
                            1296 LOAD_CONST              28 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            1298 PRECALL                  2
                            1302 CALL                     2
                            1312 POP_TOP
                            1314 LOAD_CONST               0 (None)
@@ -13846,17 +14031,17 @@
                   'fc00::/8'
                   'invalidsubnet'
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPV6', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV6'
-               firstlineno 1347
+               firstlineno 1360
                lnotab
                   0x02012e012c012e012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0432012c0132012c0132012c0132012c0136012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
@@ -13967,661 +14152,661 @@
                   020000000000000000010002007401000000000000000000006446644067
                   02ac41a6010000ab0100000000000000006442a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   016443a6020000ab02000000000000000001000200740100000000000000
                   0000006447ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016448a6020000ab020000000000000000010064005300
-               1380           0 RESUME                   0
+               1393           0 RESUME                   0
                
-               1381           2 PUSH_NULL
+               1394           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('192.168.1.5')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1382          48 LOAD_FAST                0 (self)
+               1395          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('192.168.1.5', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1383          92 PUSH_NULL
+               1396          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             106 LOAD_CONST               3 (False)
                             108 KW_NAMES                 4
                             110 PRECALL                  1
                             114 CALL                     1
                             124 LOAD_CONST               1 ('192.168.1.5')
                             126 PRECALL                  1
                             130 CALL                     1
                             140 STORE_FAST               1 (rtn)
                
-               1384         142 LOAD_FAST                0 (self)
+               1397         142 LOAD_FAST                0 (self)
                             144 LOAD_METHOD              1 (assertEqual)
                             166 LOAD_FAST                1 (rtn)
                             168 LOAD_CONST               2 (('192.168.1.5', None))
                             170 PRECALL                  2
                             174 CALL                     2
                             184 POP_TOP
                
-               1385         186 PUSH_NULL
+               1398         186 PUSH_NULL
                             188 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             200 PRECALL                  0
                             204 CALL                     0
                             214 LOAD_CONST               5 ('255.255.255.255')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1386         232 LOAD_FAST                0 (self)
+               1399         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               6 (('255.255.255.255', None))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1387         276 PUSH_NULL
+               1400         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             290 PRECALL                  0
                             294 CALL                     0
                             304 LOAD_CONST               7 ('192.168.1.5 ')
                             306 PRECALL                  1
                             310 CALL                     1
                             320 STORE_FAST               1 (rtn)
                
-               1388         322 LOAD_FAST                0 (self)
+               1401         322 LOAD_FAST                0 (self)
                             324 LOAD_METHOD              1 (assertEqual)
                             346 LOAD_FAST                1 (rtn)
                             348 LOAD_CONST               8 (('192.168.1.5 ', 'Enter valid IP address'))
                             350 PRECALL                  2
                             354 CALL                     2
                             364 POP_TOP
                
-               1389         366 PUSH_NULL
+               1402         366 PUSH_NULL
                             368 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             380 PRECALL                  0
                             384 CALL                     0
                             394 LOAD_CONST               9 ('192.168.1.1.5')
                             396 PRECALL                  1
                             400 CALL                     1
                             410 STORE_FAST               1 (rtn)
                
-               1390         412 LOAD_FAST                0 (self)
+               1403         412 LOAD_FAST                0 (self)
                             414 LOAD_METHOD              1 (assertEqual)
                             436 LOAD_FAST                1 (rtn)
                             438 LOAD_CONST              10 (('192.168.1.1.5', 'Enter valid IP address'))
                             440 PRECALL                  2
                             444 CALL                     2
                             454 POP_TOP
                
-               1391         456 PUSH_NULL
+               1404         456 PUSH_NULL
                             458 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             470 PRECALL                  0
                             474 CALL                     0
                             484 LOAD_CONST              11 ('123.123')
                             486 PRECALL                  1
                             490 CALL                     1
                             500 STORE_FAST               1 (rtn)
                
-               1392         502 LOAD_FAST                0 (self)
+               1405         502 LOAD_FAST                0 (self)
                             504 LOAD_METHOD              1 (assertEqual)
                             526 LOAD_FAST                1 (rtn)
                             528 LOAD_CONST              12 (('123.123', 'Enter valid IP address'))
                             530 PRECALL                  2
                             534 CALL                     2
                             544 POP_TOP
                
-               1393         546 PUSH_NULL
+               1406         546 PUSH_NULL
                             548 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             560 PRECALL                  0
                             564 CALL                     0
                             574 LOAD_CONST              13 ('1111.2.3.4')
                             576 PRECALL                  1
                             580 CALL                     1
                             590 STORE_FAST               1 (rtn)
                
-               1394         592 LOAD_FAST                0 (self)
+               1407         592 LOAD_FAST                0 (self)
                             594 LOAD_METHOD              1 (assertEqual)
                             616 LOAD_FAST                1 (rtn)
                             618 LOAD_CONST              14 (('1111.2.3.4', 'Enter valid IP address'))
                             620 PRECALL                  2
                             624 CALL                     2
                             634 POP_TOP
                
-               1395         636 PUSH_NULL
+               1408         636 PUSH_NULL
                             638 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             650 PRECALL                  0
                             654 CALL                     0
                             664 LOAD_CONST              15 ('0111.2.3.4')
                             666 PRECALL                  1
                             670 CALL                     1
                             680 STORE_FAST               1 (rtn)
                
-               1396         682 LOAD_FAST                0 (self)
+               1409         682 LOAD_FAST                0 (self)
                             684 LOAD_METHOD              1 (assertEqual)
                             706 LOAD_FAST                1 (rtn)
                             708 LOAD_CONST              16 (('0111.2.3.4', 'Enter valid IP address'))
                             710 PRECALL                  2
                             714 CALL                     2
                             724 POP_TOP
                
-               1397         726 PUSH_NULL
+               1410         726 PUSH_NULL
                             728 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             740 PRECALL                  0
                             744 CALL                     0
                             754 LOAD_CONST              17 ('256.2.3.4')
                             756 PRECALL                  1
                             760 CALL                     1
                             770 STORE_FAST               1 (rtn)
                
-               1398         772 LOAD_FAST                0 (self)
+               1411         772 LOAD_FAST                0 (self)
                             774 LOAD_METHOD              1 (assertEqual)
                             796 LOAD_FAST                1 (rtn)
                             798 LOAD_CONST              18 (('256.2.3.4', 'Enter valid IP address'))
                             800 PRECALL                  2
                             804 CALL                     2
                             814 POP_TOP
                
-               1399         816 PUSH_NULL
+               1412         816 PUSH_NULL
                             818 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             830 PRECALL                  0
                             834 CALL                     0
                             844 LOAD_CONST              19 ('300.2.3.4')
                             846 PRECALL                  1
                             850 CALL                     1
                             860 STORE_FAST               1 (rtn)
                
-               1400         862 LOAD_FAST                0 (self)
+               1413         862 LOAD_FAST                0 (self)
                             864 LOAD_METHOD              1 (assertEqual)
                             886 LOAD_FAST                1 (rtn)
                             888 LOAD_CONST              20 (('300.2.3.4', 'Enter valid IP address'))
                             890 PRECALL                  2
                             894 CALL                     2
                             904 POP_TOP
                
-               1401         906 PUSH_NULL
+               1414         906 PUSH_NULL
                             908 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             920 LOAD_CONST              21 ('192.168.1.0')
                             922 LOAD_CONST              22 ('192.168.1.255')
                             924 KW_NAMES                23
                             926 PRECALL                  2
                             930 CALL                     2
                             940 LOAD_CONST              24 ('192.168.1.100')
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               1 (rtn)
                
-               1402         958 LOAD_FAST                0 (self)
+               1415         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              1 (assertEqual)
                             982 LOAD_FAST                1 (rtn)
                             984 LOAD_CONST              25 (('192.168.1.100', None))
                             986 PRECALL                  2
                             990 CALL                     2
                            1000 POP_TOP
                
-               1403        1002 PUSH_NULL
+               1416        1002 PUSH_NULL
                            1004 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1016 LOAD_CONST              26 ('1.2.3.5')
                            1018 LOAD_CONST              27 ('1.2.3.9')
                            1020 LOAD_CONST              28 ('bad ip')
                            1022 KW_NAMES                29
                            1024 PRECALL                  3
                            1028 CALL                     3
                
-               1404        1038 LOAD_CONST              30 ('1.2.3.4')
+               1417        1038 LOAD_CONST              30 ('1.2.3.4')
                
-               1403        1040 PRECALL                  1
+               1416        1040 PRECALL                  1
                            1044 CALL                     1
                            1054 STORE_FAST               1 (rtn)
                
-               1406        1056 LOAD_FAST                0 (self)
+               1419        1056 LOAD_FAST                0 (self)
                            1058 LOAD_METHOD              1 (assertEqual)
                            1080 LOAD_FAST                1 (rtn)
                            1082 LOAD_CONST              31 (('1.2.3.4', 'bad ip'))
                            1084 PRECALL                  2
                            1088 CALL                     2
                            1098 POP_TOP
                
-               1407        1100 PUSH_NULL
+               1420        1100 PUSH_NULL
                            1102 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1114 LOAD_CONST              30 ('1.2.3.4')
                            1116 LOAD_CONST              32 (True)
                            1118 KW_NAMES                33
                            1120 PRECALL                  2
                            1124 CALL                     2
                            1134 LOAD_CONST              34 ('127.0.0.1')
                            1136 PRECALL                  1
                            1140 CALL                     1
                            1150 STORE_FAST               1 (rtn)
                
-               1408        1152 LOAD_FAST                0 (self)
+               1421        1152 LOAD_FAST                0 (self)
                            1154 LOAD_METHOD              1 (assertEqual)
                            1176 LOAD_FAST                1 (rtn)
                            1178 LOAD_CONST              35 (('127.0.0.1', None))
                            1180 PRECALL                  2
                            1184 CALL                     2
                            1194 POP_TOP
                
-               1409        1196 PUSH_NULL
+               1422        1196 PUSH_NULL
                            1198 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1210 LOAD_CONST              36 ('192.168.1.4')
                            1212 LOAD_CONST              32 (True)
                            1214 KW_NAMES                33
                            1216 PRECALL                  2
                            1220 CALL                     2
                            1230 LOAD_CONST              36 ('192.168.1.4')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1410        1248 LOAD_FAST                0 (self)
+               1423        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              37 (('192.168.1.4', 'Enter valid IP address'))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1411        1292 PUSH_NULL
+               1424        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1306 LOAD_CONST              32 (True)
                            1308 KW_NAMES                38
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST              34 ('127.0.0.1')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1412        1342 LOAD_FAST                0 (self)
+               1425        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              35 (('127.0.0.1', None))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1413        1386 PUSH_NULL
+               1426        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1400 LOAD_CONST              32 (True)
                            1402 KW_NAMES                38
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              39 ('192.168.1.10')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1414        1436 LOAD_FAST                0 (self)
+               1427        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              40 (('192.168.1.10', 'Enter valid IP address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1415        1480 PUSH_NULL
+               1428        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1494 LOAD_CONST               3 (False)
                            1496 KW_NAMES                38
                            1498 PRECALL                  1
                            1502 CALL                     1
                            1512 LOAD_CONST              34 ('127.0.0.1')
                            1514 PRECALL                  1
                            1518 CALL                     1
                            1528 STORE_FAST               1 (rtn)
                
-               1416        1530 LOAD_FAST                0 (self)
+               1429        1530 LOAD_FAST                0 (self)
                            1532 LOAD_METHOD              1 (assertEqual)
                            1554 LOAD_FAST                1 (rtn)
                            1556 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1558 PRECALL                  2
                            1562 CALL                     2
                            1572 POP_TOP
                
-               1417        1574 PUSH_NULL
+               1430        1574 PUSH_NULL
                            1576 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1588 LOAD_CONST              42 ('100.0.0.0')
                            1590 LOAD_CONST              32 (True)
                            1592 KW_NAMES                43
                            1594 PRECALL                  2
                            1598 CALL                     2
                            1608 LOAD_CONST              34 ('127.0.0.1')
                            1610 PRECALL                  1
                            1614 CALL                     1
                            1624 STORE_FAST               1 (rtn)
                
-               1418        1626 LOAD_FAST                0 (self)
+               1431        1626 LOAD_FAST                0 (self)
                            1628 LOAD_METHOD              1 (assertEqual)
                            1650 LOAD_FAST                1 (rtn)
                            1652 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1654 PRECALL                  2
                            1658 CALL                     2
                            1668 POP_TOP
                
-               1419        1670 PUSH_NULL
+               1432        1670 PUSH_NULL
                            1672 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1684 PRECALL                  0
                            1688 CALL                     0
                            1698 LOAD_CONST              44 ('aaa')
                            1700 PRECALL                  1
                            1704 CALL                     1
                            1714 STORE_FAST               1 (rtn)
                
-               1420        1716 LOAD_FAST                0 (self)
+               1433        1716 LOAD_FAST                0 (self)
                            1718 LOAD_METHOD              1 (assertEqual)
                            1740 LOAD_FAST                1 (rtn)
                            1742 LOAD_CONST              45 (('aaa', 'Enter valid IP address'))
                            1744 PRECALL                  2
                            1748 CALL                     2
                            1758 POP_TOP
                
-               1422        1760 PUSH_NULL
+               1435        1760 PUSH_NULL
                            1762 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1774 PRECALL                  0
                            1778 CALL                     0
                            1788 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               1 (rtn)
                
-               1423        1806 LOAD_FAST                0 (self)
+               1436        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              1 (assertEqual)
                            1830 LOAD_FAST                1 (rtn)
                            1832 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1834 PRECALL                  2
                            1838 CALL                     2
                            1848 POP_TOP
                
-               1424        1850 PUSH_NULL
+               1437        1850 PUSH_NULL
                            1852 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1864 LOAD_CONST               3 (False)
                            1866 KW_NAMES                48
                            1868 PRECALL                  1
                            1872 CALL                     1
                            1882 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1884 PRECALL                  1
                            1888 CALL                     1
                            1898 STORE_FAST               1 (rtn)
                
-               1425        1900 LOAD_FAST                0 (self)
+               1438        1900 LOAD_FAST                0 (self)
                            1902 LOAD_METHOD              1 (assertEqual)
                            1924 LOAD_FAST                1 (rtn)
                            1926 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1928 PRECALL                  2
                            1932 CALL                     2
                            1942 POP_TOP
                
-               1426        1944 PUSH_NULL
+               1439        1944 PUSH_NULL
                            1946 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1958 PRECALL                  0
                            1962 CALL                     0
                            1972 LOAD_CONST              49 ('fe80::126c:8ffa:fe22:b3af  ')
                            1974 PRECALL                  1
                            1978 CALL                     1
                            1988 STORE_FAST               1 (rtn)
                
-               1427        1990 LOAD_FAST                0 (self)
+               1440        1990 LOAD_FAST                0 (self)
                            1992 LOAD_METHOD              1 (assertEqual)
                            2014 LOAD_FAST                1 (rtn)
                            2016 LOAD_CONST              50 (('fe80::126c:8ffa:fe22:b3af  ', 'Enter valid IP address'))
                            2018 PRECALL                  2
                            2022 CALL                     2
                            2032 POP_TOP
                
-               1428        2034 PUSH_NULL
+               1441        2034 PUSH_NULL
                            2036 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2048 LOAD_CONST              32 (True)
                            2050 KW_NAMES                48
                            2052 PRECALL                  1
                            2056 CALL                     1
                            2066 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2068 PRECALL                  1
                            2072 CALL                     1
                            2082 STORE_FAST               1 (rtn)
                
-               1429        2084 LOAD_FAST                0 (self)
+               1442        2084 LOAD_FAST                0 (self)
                            2086 LOAD_METHOD              1 (assertEqual)
                            2108 LOAD_FAST                1 (rtn)
                            2110 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2112 PRECALL                  2
                            2116 CALL                     2
                            2126 POP_TOP
                
-               1430        2128 PUSH_NULL
+               1443        2128 PUSH_NULL
                            2130 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2142 LOAD_CONST              32 (True)
                            2144 KW_NAMES                 4
                            2146 PRECALL                  1
                            2150 CALL                     1
                            2160 LOAD_CONST              52 ('192.168.1.1')
                            2162 PRECALL                  1
                            2166 CALL                     1
                            2176 STORE_FAST               1 (rtn)
                
-               1431        2178 LOAD_FAST                0 (self)
+               1444        2178 LOAD_FAST                0 (self)
                            2180 LOAD_METHOD              1 (assertEqual)
                            2202 LOAD_FAST                1 (rtn)
                            2204 LOAD_CONST              53 (('192.168.1.1', 'Enter valid IP address'))
                            2206 PRECALL                  2
                            2210 CALL                     2
                            2220 POP_TOP
                
-               1432        2222 PUSH_NULL
+               1445        2222 PUSH_NULL
                            2224 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2236 LOAD_CONST              32 (True)
                            2238 LOAD_CONST              28 ('bad ip')
                            2240 KW_NAMES                54
                            2242 PRECALL                  2
                            2246 CALL                     2
                            2256 LOAD_CONST              52 ('192.168.1.1')
                            2258 PRECALL                  1
                            2262 CALL                     1
                            2272 STORE_FAST               1 (rtn)
                
-               1433        2274 LOAD_FAST                0 (self)
+               1446        2274 LOAD_FAST                0 (self)
                            2276 LOAD_METHOD              1 (assertEqual)
                            2298 LOAD_FAST                1 (rtn)
                            2300 LOAD_CONST              55 (('192.168.1.1', 'bad ip'))
                            2302 PRECALL                  2
                            2306 CALL                     2
                            2316 POP_TOP
                
-               1434        2318 PUSH_NULL
+               1447        2318 PUSH_NULL
                            2320 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2332 LOAD_CONST              32 (True)
                            2334 KW_NAMES                56
                            2336 PRECALL                  1
                            2340 CALL                     1
                            2350 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2352 PRECALL                  1
                            2356 CALL                     1
                            2366 STORE_FAST               1 (rtn)
                
-               1435        2368 LOAD_FAST                0 (self)
+               1448        2368 LOAD_FAST                0 (self)
                            2370 LOAD_METHOD              1 (assertEqual)
                            2392 LOAD_FAST                1 (rtn)
                            2394 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            2396 PRECALL                  2
                            2400 CALL                     2
                            2410 POP_TOP
                
-               1436        2412 PUSH_NULL
+               1449        2412 PUSH_NULL
                            2414 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2426 LOAD_CONST               3 (False)
                            2428 KW_NAMES                56
                            2430 PRECALL                  1
                            2434 CALL                     1
                            2444 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2446 PRECALL                  1
                            2450 CALL                     1
                            2460 STORE_FAST               1 (rtn)
                
-               1437        2462 LOAD_FAST                0 (self)
+               1450        2462 LOAD_FAST                0 (self)
                            2464 LOAD_METHOD              1 (assertEqual)
                            2486 LOAD_FAST                1 (rtn)
                            2488 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2490 PRECALL                  2
                            2494 CALL                     2
                            2504 POP_TOP
                
-               1438        2506 PUSH_NULL
+               1451        2506 PUSH_NULL
                            2508 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2520 LOAD_CONST              32 (True)
                            2522 KW_NAMES                56
                            2524 PRECALL                  1
                            2528 CALL                     1
                            2538 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2540 PRECALL                  1
                            2544 CALL                     1
                            2554 STORE_FAST               1 (rtn)
                
-               1439        2556 LOAD_FAST                0 (self)
+               1452        2556 LOAD_FAST                0 (self)
                            2558 LOAD_METHOD              1 (assertEqual)
                            2580 LOAD_FAST                1 (rtn)
                            2582 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2584 PRECALL                  2
                            2588 CALL                     2
                            2598 POP_TOP
                
-               1440        2600 PUSH_NULL
+               1453        2600 PUSH_NULL
                            2602 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2614 LOAD_CONST              32 (True)
                            2616 KW_NAMES                59
                            2618 PRECALL                  1
                            2622 CALL                     1
                            2632 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2634 PRECALL                  1
                            2638 CALL                     1
                            2648 STORE_FAST               1 (rtn)
                
-               1441        2650 LOAD_FAST                0 (self)
+               1454        2650 LOAD_FAST                0 (self)
                            2652 LOAD_METHOD              1 (assertEqual)
                            2674 LOAD_FAST                1 (rtn)
                            2676 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2678 PRECALL                  2
                            2682 CALL                     2
                            2692 POP_TOP
                
-               1442        2694 PUSH_NULL
+               1455        2694 PUSH_NULL
                            2696 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2708 LOAD_CONST              32 (True)
                            2710 KW_NAMES                59
                            2712 PRECALL                  1
                            2716 CALL                     1
                            2726 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2728 PRECALL                  1
                            2732 CALL                     1
                            2742 STORE_FAST               1 (rtn)
                
-               1443        2744 LOAD_FAST                0 (self)
+               1456        2744 LOAD_FAST                0 (self)
                            2746 LOAD_METHOD              1 (assertEqual)
                            2768 LOAD_FAST                1 (rtn)
                            2770 LOAD_CONST              61 (('ff00::126c:8ffa:fe22:b3af', None))
                            2772 PRECALL                  2
                            2776 CALL                     2
                            2786 POP_TOP
                
-               1444        2788 PUSH_NULL
+               1457        2788 PUSH_NULL
                            2790 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2802 LOAD_CONST              32 (True)
                            2804 KW_NAMES                62
                            2806 PRECALL                  1
                            2810 CALL                     1
                            2820 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2822 PRECALL                  1
                            2826 CALL                     1
                            2836 STORE_FAST               1 (rtn)
                
-               1445        2838 LOAD_FAST                0 (self)
+               1458        2838 LOAD_FAST                0 (self)
                            2840 LOAD_METHOD              1 (assertEqual)
                            2862 LOAD_FAST                1 (rtn)
                            2864 LOAD_CONST              63 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2866 PRECALL                  2
                            2870 CALL                     2
                            2880 POP_TOP
                
-               1446        2882 PUSH_NULL
+               1459        2882 PUSH_NULL
                            2884 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2896 LOAD_CONST              64 ('2001::/32')
                            2898 KW_NAMES                65
                            2900 PRECALL                  1
                            2904 CALL                     1
                            2914 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            2916 PRECALL                  1
                            2920 CALL                     1
                            2930 STORE_FAST               1 (rtn)
                
-               1447        2932 LOAD_FAST                0 (self)
+               1460        2932 LOAD_FAST                0 (self)
                            2934 LOAD_METHOD              1 (assertEqual)
                            2956 LOAD_FAST                1 (rtn)
                            2958 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            2960 PRECALL                  2
                            2964 CALL                     2
                            2974 POP_TOP
                
-               1448        2976 PUSH_NULL
+               1461        2976 PUSH_NULL
                            2978 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2990 LOAD_CONST              68 ('fb00::/8')
                            2992 KW_NAMES                65
                            2994 PRECALL                  1
                            2998 CALL                     1
                            3008 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3010 PRECALL                  1
                            3014 CALL                     1
                            3024 STORE_FAST               1 (rtn)
                
-               1449        3026 LOAD_FAST                0 (self)
+               1462        3026 LOAD_FAST                0 (self)
                            3028 LOAD_METHOD              1 (assertEqual)
                            3050 LOAD_FAST                1 (rtn)
                            3052 LOAD_CONST              69 (('2001::8ffa:fe22:b3af', 'Enter valid IP address'))
                            3054 PRECALL                  2
                            3058 CALL                     2
                            3068 POP_TOP
                
-               1450        3070 PUSH_NULL
+               1463        3070 PUSH_NULL
                            3072 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3084 LOAD_CONST              70 ('fc00::/8')
                            3086 LOAD_CONST              64 ('2001::/32')
                            3088 BUILD_LIST               2
                            3090 KW_NAMES                65
                            3092 PRECALL                  1
                            3096 CALL                     1
                            3106 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3108 PRECALL                  1
                            3112 CALL                     1
                            3122 STORE_FAST               1 (rtn)
                
-               1451        3124 LOAD_FAST                0 (self)
+               1464        3124 LOAD_FAST                0 (self)
                            3126 LOAD_METHOD              1 (assertEqual)
                            3148 LOAD_FAST                1 (rtn)
                            3150 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            3152 PRECALL                  2
                            3156 CALL                     2
                            3166 POP_TOP
                
-               1452        3168 PUSH_NULL
+               1465        3168 PUSH_NULL
                            3170 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3182 LOAD_CONST              71 ('invalidsubnet')
                            3184 KW_NAMES                65
                            3186 PRECALL                  1
                            3190 CALL                     1
                            3200 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3202 PRECALL                  1
                            3206 CALL                     1
                            3216 STORE_FAST               1 (rtn)
                
-               1453        3218 LOAD_FAST                0 (self)
+               1466        3218 LOAD_FAST                0 (self)
                            3220 LOAD_METHOD              1 (assertEqual)
                            3242 LOAD_FAST                1 (rtn)
                            3244 LOAD_CONST              72 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            3246 PRECALL                  2
                            3250 CALL                     2
                            3260 POP_TOP
                            3262 LOAD_CONST               0 (None)
@@ -14700,37 +14885,38 @@
                   'fc00::/8'
                   'invalidsubnet'
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPADDRESS', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
-               filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPADDRESS'
-               firstlineno 1380
+               firstlineno 1393
                lnotab
                   0x02012e012c0132012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c0134012c01240102ff10032c0134012c0134
                   012c0132012c0132012c0132012c0134012c012e012c022e012c0132012c
                   012e012c0132012c0132012c0134012c0132012c0132012c0132012c0132
                   012c0132012c0132012c0132012c0132012c0136012c013201
             None
-         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS')
+         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_IN_DB_options', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS')
          varnames   ()
          freevars   ()
          cellvars   ()
-         filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+         filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
          name       'TestValidators'
          firstlineno 17
          lnotab
-            0x0a010605060d06240606060a0647060e0628067f0031061e061a062906
-            36061c060a064d061006100626060b061f0620063a061106080608062806
-            121c06020104ff0e010204062606040616065d06460642063906260621
+            0x0a010605060d06240606060a0647060e0628067f0031060d061e061a06
+            290636061c060a064d061006100626060b061f0620063a06110608060806
+            2806121c06020104ff0e010204062606040616065d064606420639062606
+            21
       'TestValidators'
    names      ('__doc__', 'datetime', 'decimal', 're', 'unittest', 'pydal', 'DAL', 'Field', 'pydal._compat', 'PY2', 'to_bytes', 'pydal.validators', 'UTC', 'Validator', 'options_sorter', 'TestCase', 'TestValidators')
    varnames   ()
    freevars   ()
    cellvars   ()
-   filename   '/home/mdipierro/Dropbox/packages/pydal/tests/validators.py'
+   filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
    name       '<module>'
    firstlineno 1
    lnotab 0x00ff0204040208010801080108021001100108011403
```

### Comparing `pydal-20240428.2/tests/_adapt.py` & `pydal-20240529.1/tests/_adapt.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/_helpers.py` & `pydal-20240529.1/tests/_helpers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/base.py` & `pydal-20240529.1/tests/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/caching.py` & `pydal-20240529.1/tests/caching.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/contribs.py` & `pydal-20240529.1/tests/contribs.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/indexes.py` & `pydal-20240529.1/tests/indexes.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/is_url_validators.py` & `pydal-20240529.1/tests/is_url_validators.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/nosql.py` & `pydal-20240529.1/tests/nosql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/restapi.py` & `pydal-20240529.1/tests/restapi.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/smart_query.py` & `pydal-20240529.1/tests/smart_query.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/sql.py` & `pydal-20240529.1/tests/sql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/tags.py` & `pydal-20240529.1/tests/tags.py`

 * *Files identical despite different names*

### Comparing `pydal-20240428.2/tests/validation.py` & `pydal-20240529.1/tests/validation.py`

 * *Files 23% similar despite different names*

```diff
@@ -1,8 +1,10 @@
+import os
 import re
+import tempfile
 
 from pydal import DAL, Field
 from pydal._compat import integer_types
 
 from ._adapt import DEFAULT_URI, IS_IMAP, IS_NOSQL, drop
 from ._compat import unittest
 
@@ -48,18 +50,18 @@
 class TestValidateAndInsert(unittest.TestCase):
     def testRun(self):
         db = DAL(DEFAULT_URI, check_reserved=["all"])
         db.define_table(
             "val_and_insert",
             Field("aa"),
             Field("bb", "integer", requires=IS_INT_IN_RANGE(1, 5)),
-            Field("cc", writable=False)
+            Field("cc", writable=False),
         )
         rtn = db.val_and_insert.validate_and_insert(aa="test1", bb=2, cc="not-alloed")
-        self.assertTrue("cc" in rtn["errors"])        
+        self.assertTrue("cc" in rtn["errors"])
         rtn = db.val_and_insert.validate_and_insert(aa="test1", bb=2)
         if IS_NOSQL:
             self.assertEqual(isinstance(rtn.get("id"), long), True)
         else:
             self.assertEqual(rtn.get("id"), 1)
         # errors should be empty
         self.assertTrue(not rtn.get("errors"))
@@ -68,14 +70,41 @@
         # the returned id should be None
         self.assertEqual(rtn.get("id"), None)
         # an error message should be in rtn.errors.bb
         self.assertNotEqual(rtn["errors"]["bb"], None)
         # cleanup table
         drop(db.val_and_insert)
 
+    def testApiUpload(self):
+        db = DAL(DEFAULT_URI, check_reserved=["all"])
+        with tempfile.TemporaryDirectory() as tempdir:
+            db.define_table(
+                "thing",
+                Field("name", required=True),
+                Field("image", "upload", uploadfolder=tempdir),
+            )
+            b64 = b"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="
+            res = db.thing.validate_and_insert(
+                image=dict(filename="image", content=b64)
+            )
+            self.assertEqual(res, {"id": None, "errors": {"name": "required"}})
+            self.assertEqual(os.listdir(tempdir), [])
+            res = db.thing.validate_and_insert(
+                name="something", image=dict(filename="image", content=b64)
+            )
+            self.assertEqual(res, {"errors": {}, "id": 1})
+            thing = db.thing(res["id"])
+            self.assertEqual(thing.name, "something")
+            names = os.listdir(tempdir)
+            self.assertEqual(len(names), 1)
+            self.assertEqual(thing.image, names[0])
+            content = b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x04\x00\x00\x00\xb5\x1c\x0c\x02\x00\x00\x00\x0bIDATx\xdacd\xf8\x0f\x00\x01\x05\x01\x01'\x18\xe3f\x00\x00\x00\x00IEND\xaeB`\x82"
+            with open(os.path.join(tempdir, names[0]), "rb") as stream:
+                self.assertEqual(stream.read(), content)
+
 
 @unittest.skipIf(IS_IMAP, "TODO: IMAP test")
 class TestValidateUpdateInsert(unittest.TestCase):
     def testRun(self):
         db = DAL(DEFAULT_URI, check_reserved=["all"])
         t1 = db.define_table(
             "t1", Field("int_level", "integer", requires=IS_INT_IN_RANGE(1, 5))
```

### Comparing `pydal-20240428.2/tests/validators.py` & `pydal-20240529.1/tests/validators.py`

 * *Files 1% similar despite different names*

```diff
@@ -382,14 +382,27 @@
         db.person.drop()
         db.category.drop()
         db.person_keyed.drop()
         db.ref_table.drop()
         db.ref_table_field.drop()
         db.list_ref_table.drop()
 
+    def test_IS_IN_DB_options(self):
+        db = DAL("sqlite:memory")
+        db.define_table("thing", Field("name"))
+        db.thing.insert(name="red")
+        db.thing.insert(name="green")
+        assert IS_IN_DB(db, "thing").options() == [('', ''), ('1', '1'), ('2', '2')]
+        # setting a format for the validator
+        db.thing._format = lambda i: i.name
+        assert IS_IN_DB(db, "thing").options() == [('', ''), ('1', 'red'), ('2', 'green')]
+        assert IS_IN_DB(db, "thing", zero=None).options() == [('1', 'red'), ('2', 'green')]
+        assert IS_IN_DB(db, "thing", zero="x").options() == [('', 'x'), ('1', 'red'), ('2', 'green')]
+        
+
     def test_IS_NOT_IN_DB(self):
         db = DAL("sqlite:memory")
         db.define_table("person", Field("name"), Field("nickname"))
         db.person.insert(name="george")
         db.person.insert(name="costanza", nickname="T Bone")
         rtn = IS_NOT_IN_DB(db, "person.name", error_message="oops")("george")
         self.assertEqual(rtn, ("george", "oops"))
```


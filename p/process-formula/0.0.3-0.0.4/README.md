# Comparing `tmp/process_formula-0.0.3-py3-none-any.whl.zip` & `tmp/process_formula-0.0.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,39 +1,39 @@
-Zip file size: 81503 bytes, number of entries: 37
--rw-r--r--  2.0 unx      123 b- defN 23-Dec-14 06:32 process_formula/__init__.py
--rw-r--r--  2.0 unx     5544 b- defN 23-Dec-14 06:32 process_formula/normalize_formulas.py
--rw-r--r--  2.0 unx    10854 b- defN 23-Dec-14 06:32 process_formula/preprocess_latex.js
--rw-r--r--  2.0 unx     1289 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/LICENSE.txt
--rw-r--r--  2.0 unx     3689 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/README.md
--rwxr-xr-x  2.0 unx      927 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/cli.js
--rw-r--r--  2.0 unx     2223 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/katex.js
--rw-r--r--  2.0 unx     2473 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/package.json
--rw-r--r--  2.0 unx     5300 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/Lexer.js
--rw-r--r--  2.0 unx     4911 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/Options.js
--rw-r--r--  2.0 unx     1322 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/ParseError.js
--rw-r--r--  2.0 unx    26372 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/Parser.js
--rw-r--r--  2.0 unx      783 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/Settings.js
--rw-r--r--  2.0 unx     3199 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/Style.js
--rw-r--r--  2.0 unx    14362 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/buildCommon.js
--rw-r--r--  2.0 unx    49168 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/buildHTML.js
--rw-r--r--  2.0 unx    14472 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/buildMathML.js
--rw-r--r--  2.0 unx     1090 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/buildTree.js
--rw-r--r--  2.0 unx    18988 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/delimiter.js
--rw-r--r--  2.0 unx     7224 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/domTree.js
--rw-r--r--  2.0 unx     8635 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/environments.js
--rw-r--r--  2.0 unx     4274 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/fontMetrics.js
--rw-r--r--  2.0 unx    67282 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/fontMetricsData.js
--rw-r--r--  2.0 unx    16828 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/functions.js
--rw-r--r--  2.0 unx     2694 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/mathMLTree.js
--rw-r--r--  2.0 unx      221 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/parseData.js
--rw-r--r--  2.0 unx      377 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/parseTree.js
--rw-r--r--  2.0 unx    33147 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/symbols.js
--rw-r--r--  2.0 unx     2330 b- defN 23-Dec-14 06:32 process_formula/third_party/katex/src/utils.js
--rw-r--r--  2.0 unx     1328 b- defN 23-Dec-14 06:32 process_formula/third_party/match-at/package.json
--rw-r--r--  2.0 unx     1309 b- defN 23-Dec-14 06:32 process_formula/third_party/match-at/lib/matchAt.js
--rw-r--r--  2.0 unx     1061 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/LICENSE
--rw-r--r--  2.0 unx      727 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx       77 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       16 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3759 b- defN 23-Dec-14 06:32 process_formula-0.0.3.dist-info/RECORD
-37 files, 318470 bytes uncompressed, 75255 bytes compressed:  76.4%
+Zip file size: 81461 bytes, number of entries: 37
+-rw-r--r--  2.0 unx      123 b- defN 24-May-30 14:00 process_formula/__init__.py
+-rw-r--r--  2.0 unx     5471 b- defN 24-May-30 14:00 process_formula/normalize_formulas.py
+-rw-r--r--  2.0 unx    10854 b- defN 24-May-30 14:00 process_formula/preprocess_latex.js
+-rw-r--r--  2.0 unx     1289 b- defN 24-May-30 14:00 process_formula/third_party/katex/LICENSE.txt
+-rw-r--r--  2.0 unx     3689 b- defN 24-May-30 14:00 process_formula/third_party/katex/README.md
+-rwxr-xr-x  2.0 unx      927 b- defN 24-May-30 14:00 process_formula/third_party/katex/cli.js
+-rw-r--r--  2.0 unx     2223 b- defN 24-May-30 14:00 process_formula/third_party/katex/katex.js
+-rw-r--r--  2.0 unx     2473 b- defN 24-May-30 14:00 process_formula/third_party/katex/package.json
+-rw-r--r--  2.0 unx     5300 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/Lexer.js
+-rw-r--r--  2.0 unx     4911 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/Options.js
+-rw-r--r--  2.0 unx     1322 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/ParseError.js
+-rw-r--r--  2.0 unx    26372 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/Parser.js
+-rw-r--r--  2.0 unx      783 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/Settings.js
+-rw-r--r--  2.0 unx     3199 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/Style.js
+-rw-r--r--  2.0 unx    14362 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/buildCommon.js
+-rw-r--r--  2.0 unx    49168 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/buildHTML.js
+-rw-r--r--  2.0 unx    14472 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/buildMathML.js
+-rw-r--r--  2.0 unx     1090 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/buildTree.js
+-rw-r--r--  2.0 unx    18988 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/delimiter.js
+-rw-r--r--  2.0 unx     7224 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/domTree.js
+-rw-r--r--  2.0 unx     8635 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/environments.js
+-rw-r--r--  2.0 unx     4274 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/fontMetrics.js
+-rw-r--r--  2.0 unx    67282 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/fontMetricsData.js
+-rw-r--r--  2.0 unx    16828 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/functions.js
+-rw-r--r--  2.0 unx     2694 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/mathMLTree.js
+-rw-r--r--  2.0 unx      221 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/parseData.js
+-rw-r--r--  2.0 unx      377 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/parseTree.js
+-rw-r--r--  2.0 unx    33147 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/symbols.js
+-rw-r--r--  2.0 unx     2330 b- defN 24-May-30 14:00 process_formula/third_party/katex/src/utils.js
+-rw-r--r--  2.0 unx     1328 b- defN 24-May-30 14:00 process_formula/third_party/match-at/package.json
+-rw-r--r--  2.0 unx     1309 b- defN 24-May-30 14:00 process_formula/third_party/match-at/lib/matchAt.js
+-rw-r--r--  2.0 unx     1061 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/LICENSE
+-rw-r--r--  2.0 unx      727 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/WHEEL
+-rw-r--r--  2.0 unx       77 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       16 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3759 b- defN 24-May-30 14:00 process_formula-0.0.4.dist-info/RECORD
+37 files, 318397 bytes uncompressed, 75213 bytes compressed:  76.4%
```

## zipnote {}

```diff
@@ -87,26 +87,26 @@
 
 Filename: process_formula/third_party/match-at/package.json
 Comment: 
 
 Filename: process_formula/third_party/match-at/lib/matchAt.js
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/LICENSE
+Filename: process_formula-0.0.4.dist-info/LICENSE
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/METADATA
+Filename: process_formula-0.0.4.dist-info/METADATA
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/WHEEL
+Filename: process_formula-0.0.4.dist-info/WHEEL
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/entry_points.txt
+Filename: process_formula-0.0.4.dist-info/entry_points.txt
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/top_level.txt
+Filename: process_formula-0.0.4.dist-info/top_level.txt
 Comment: 
 
-Filename: process_formula-0.0.3.dist-info/RECORD
+Filename: process_formula-0.0.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## process_formula/normalize_formulas.py

```diff
@@ -1,34 +1,32 @@
 # -*- encoding: utf-8 -*-
 # @Author: SWHL
 # @Contact: liekkaskono@163.com
 import argparse
 import re
 import subprocess
 from pathlib import Path
-from typing import List, Union
+from typing import List, Sequence, Union
 
 
 class NormalizeFormula:
-    def __init__(
-        self,
-    ):
+    def __init__(self):
         self.root_dir = Path(__file__).resolve().parent
 
     def __call__(
         self,
-        input_content: Union[str, Path, List[str]],
+        input_content: Union[str, Path, Sequence[Union[str, Path]]],
         out_path: Union[str, Path, None] = None,
         mode: str = "normalize",
     ) -> List[str]:
-        input_data: List[str] = self.load_data(input_content)
+        input_data = self.load_data(input_content)
 
         # 将hskip 替换为hspace{}
         after_content = [
-            self.replace_hskip_to_hspace(v).replace("\r", " ").strip()
+            self.replace_hskip_to_hspace(str(v)).replace("\r", " ").strip()
             for v in input_data
         ]
 
         if not self.check_node():
             raise NormalizeFormulaError("Node.js was not installed correctly!")
 
         # 借助KaTeX获得规范化后的公式
@@ -37,31 +35,31 @@
         # 去除非ascii得字符
         final_content = self.remove_invalid_symbols(normalized_formulas)
 
         if out_path is not None:
             self.write_txt(out_path, final_content)
         return final_content
 
-    def load_data(self, input_content: Union[str, Path, List[str]]) -> List[str]:
+    def load_data(
+        self, input_content: Union[str, Path, Sequence[Union[str, Path]]]
+    ) -> Sequence[Union[str, Path]]:
         if isinstance(input_content, list):
             return input_content
 
         if isinstance(input_content, (str, Path)):
             if len(str(input_content)) > 255:
                 return [input_content]
 
             if Path(input_content).is_file():
                 return self.read_txt(input_content)
             return [input_content]
 
         raise NormalizeFormulaError("The format of input content is not supported!")
 
-    def check_node(
-        self,
-    ) -> bool:
+    def check_node(self) -> bool:
         if self.run_cmd("node -v"):
             return True
         return False
 
     def replace_hskip_to_hspace(self, input_string: str) -> str:
         pattern = r"hskip(.*?)(cm|in|pt|mm|em)"
         replacement = r"hspace{\1\2}"
@@ -82,31 +80,31 @@
             content = [content]
 
         with open(save_path, mode, encoding="utf-8") as f:
             for value in content:
                 f.write(f"{value}\n")
 
     def get_normalize_formulas(self, after_content, mode) -> List[str]:
-        temp_file = self.root_dir / "tmp"
-        self.write_txt(temp_file, after_content)
-
-        out_path = Path(temp_file).with_suffix(".temp.out")
         latex_js_path = self.root_dir / "preprocess_latex.js"
-        cmd = "cat %s | node %s %s > %s " % (
-            temp_file,
-            latex_js_path,
-            mode,
-            out_path,
-        )
-        self.run_cmd(cmd)
-        self.del_file(temp_file)
-
-        out_content = self.read_txt(out_path)
-        self.del_file(out_path)
-        return out_content
+        cmd = ["node", latex_js_path, mode]
+
+        try:
+            result = subprocess.run(
+                cmd,
+                input="\n".join(after_content),
+                capture_output=True,
+                text=True,
+                check=True,
+            )
+            return result.stdout.splitlines()
+        except subprocess.CalledProcessError as e:
+            print(f"Error occurred: {e.stderr}")
+            raise NormalizeFormulaError(
+                "Error occurred while normalizing formulas."
+            ) from e
 
     def remove_invalid_symbols(self, normalized_formulas: List[str]) -> List[str]:
         final_content = []
         for content in normalized_formulas:
             tokens = content.strip().split()
             tokens_out = [t for t in tokens if self.is_ascii(t)]
             tokens_str = " ".join(tokens_out)
@@ -134,20 +132,14 @@
                 text=True,
             )
         except subprocess.CalledProcessError as e:
             print(f"Run {cmd} meets error. \n{e.stderr}")
             return False
         return True
 
-    @staticmethod
-    def del_file(file_path: Union[str, Path]):
-        file_path = Path(file_path)
-        if file_path.exists() and file_path.is_file():
-            file_path.unlink()
-
 
 class NormalizeFormulaError(Exception):
     pass
 
 
 def main():
     parser = argparse.ArgumentParser(
@@ -169,15 +161,15 @@
     )
     parser.add_argument(
         "--mode",
         dest="mode",
         choices=["tokenize", "normalize"],
         default="normalize",
         help=(
-            "Tokenize (split to tokens seperated by space) or normalize (further translate to an equivalent standard form)."
+            "Tokenize (split to tokens separated by space) or normalize (further translate to an equivalent standard form)."
         ),
     )
     args = parser.parse_args()
 
     processor = NormalizeFormula()
     result = processor(
         input_content=args.input_content,
```

## Comparing `process_formula-0.0.3.dist-info/LICENSE` & `process_formula-0.0.4.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `process_formula-0.0.3.dist-info/METADATA` & `process_formula-0.0.4.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: process-formula
-Version: 0.0.3
+Version: 0.0.4
 Summary: Tools for processing LaTeX formulas.
 Home-page: https://github.com/SWHL/ProcessLaTeXFormulaTools
 Author: SWHL
 Author-email: liekkaskono@163.com
 License: MIT
 Keywords: formula,KaTeX,LaTeX,im2markup
 Platform: Any
```

## Comparing `process_formula-0.0.3.dist-info/RECORD` & `process_formula-0.0.4.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 process_formula/__init__.py,sha256=zPYrN55DJ7bxJbuDxBQurwsdzVj5nbypGjcyLtPAMfg,123
-process_formula/normalize_formulas.py,sha256=iWd5HX0mYReyrr6iEtdEhqb2WjtsU9S_lU1YrN0y9HQ,5544
+process_formula/normalize_formulas.py,sha256=HkqE2xX4rWEPd5gfkUfInkP48x49_VumDRevuxCM-1g,5471
 process_formula/preprocess_latex.js,sha256=4htFSUzQ-GtIl-P3Jx07ChsjTdg0ip4CZ2RNjHtzvIQ,10854
 process_formula/third_party/katex/LICENSE.txt,sha256=tAya3FZdmblMDhPmzwmSNQ9o2MtlScmI9H9wsyY4dM0,1289
 process_formula/third_party/katex/README.md,sha256=hy26h1Jtk0tJ8maWkCVKIj1PKrtujlV_GefBPdt9yDo,3689
 process_formula/third_party/katex/cli.js,sha256=OeD9U88ZjqVtEKKbhBHb-GtABK_dY46HN9PAHGwY544,927
 process_formula/third_party/katex/katex.js,sha256=X1z-FC1v2C3GbXWRVVPWY46bm_0uPG6aXFezsIAiw0Q,2223
 process_formula/third_party/katex/package.json,sha256=H2On5md3uH-UloXWIi560iWrXtvlGfcTzS2cVSX00N4,2473
 process_formula/third_party/katex/src/Lexer.js,sha256=rbyNgHSfwY_aQzOnnttt1ilmSlKvkFhXvU_gQzyB4SY,5300
@@ -25,13 +25,13 @@
 process_formula/third_party/katex/src/mathMLTree.js,sha256=JHdMQL0dZInylkGnZKJ869LCGIht9eadveKrhXpsYNg,2694
 process_formula/third_party/katex/src/parseData.js,sha256=TAaHcGK1iVCe1H1DTdn0CcbEbtfNzH4xo5OIgUzf5ZE,221
 process_formula/third_party/katex/src/parseTree.js,sha256=6Qfv04tiam59jHeB6If96l4mom9YSu0N-c4TOlWF9z8,377
 process_formula/third_party/katex/src/symbols.js,sha256=RcybR3tUX2xsWX4Sv9pFhvyKNEnsS3Mip-h28dR8xmM,33147
 process_formula/third_party/katex/src/utils.js,sha256=gnBEH1GC7Gw5b8-F7Ruak8mXeuTIezRuhgRD0MIHvMc,2330
 process_formula/third_party/match-at/package.json,sha256=0Ijgu4f5FEdEpvzLIeDWIh2NqwsJL33ojoyzps1GE1Y,1328
 process_formula/third_party/match-at/lib/matchAt.js,sha256=MFwICMQ1RqhS_DXDfbYOTqukETXO9l-5VY74-4rRTaY,1309
-process_formula-0.0.3.dist-info/LICENSE,sha256=aCvz1TEsGyqoq60NTZsm2_SsZ-D-REb933J73uzXGcs,1061
-process_formula-0.0.3.dist-info/METADATA,sha256=ada2fHU853uctTiDw_qt3Wv4Pg_eQl8rta6SQk1BkKs,727
-process_formula-0.0.3.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-process_formula-0.0.3.dist-info/entry_points.txt,sha256=RJPbe0uQYpyTDYWWd8ub6vCx3U6tTN9As2yFZmEGJ2A,77
-process_formula-0.0.3.dist-info/top_level.txt,sha256=tlAkYGCC_WLzh2iBeGMfc2dRMJYWoScz6n4Rd0e6mQs,16
-process_formula-0.0.3.dist-info/RECORD,,
+process_formula-0.0.4.dist-info/LICENSE,sha256=aCvz1TEsGyqoq60NTZsm2_SsZ-D-REb933J73uzXGcs,1061
+process_formula-0.0.4.dist-info/METADATA,sha256=XgEJjwZyoeEsXVkYcjRfpOblbWvdHiRjF76X6axfo3Q,727
+process_formula-0.0.4.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+process_formula-0.0.4.dist-info/entry_points.txt,sha256=RJPbe0uQYpyTDYWWd8ub6vCx3U6tTN9As2yFZmEGJ2A,77
+process_formula-0.0.4.dist-info/top_level.txt,sha256=tlAkYGCC_WLzh2iBeGMfc2dRMJYWoScz6n4Rd0e6mQs,16
+process_formula-0.0.4.dist-info/RECORD,,
```

